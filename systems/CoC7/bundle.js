(()=>{"use strict";const COC7={eras:{standard:"CoC7.Era1920",modern:"CoC7.EraModern",modernPulp:"CoC7.EraModernPulp",pulp:"CoC7.EraPulp",downDarkerTrails:"CoC7.EraDownDarkerTrails",downDarkerTrailsPulp:"CoC7.EraDownDarkerTrailsPulp",darkAges:"CoC7.EraDarkAges",darkAgesPulp:"CoC7.EraDarkAgesPulp",regency:"CoC7.EraRegency",regencyPulp:"CoC7.EraRegencyPulp",gasLight:"CoC7.EraGasLight",invictus:"CoC7.EraInvictus"},monetaryFormatKeys:{decimalLeft:"decimalLeft",decimalRight:"decimalRight",integerLeft:"integerLeft",integerRight:"integerRight",lsd:"lsd",roman:"roman"},monetaryFormats:{decimalLeft:"CoC7.MonetaryFormatDecimalLeft",decimalRight:"CoC7.MonetaryFormatDecimalRight",integerLeft:"CoC7.MonetaryFormatIntegerLeft",integerRight:"CoC7.MonetaryFormatIntegerRight",lsd:"CoC7.MonetaryFormatLsd",roman:"CoC7.MonetaryFormatRoman"},monetaryTypeKeys:{none:"none",asses:"asses",sestertii:"sestertii",quinarii:"quinarii",denarii:"denarii",d:"d",s:"s",value:"value",multiplier:"multiplier"},monetaryTypes:{none:{name:"CoC7.MonetaryTypeNone",filter:[]},asses:{name:"CoC7.MonetaryTypeAsses",filter:["roman"]},sestertii:{name:"CoC7.MonetaryTypeSestertii",filter:["roman"]},quinarii:{name:"CoC7.MonetaryTypeQuinarii",filter:["roman"]},denarii:{name:"CoC7.MonetaryTypeDenarii",filter:["roman"]},d:{name:"CoC7.MonetaryTypeDeniers",filter:["lsd"]},s:{name:"CoC7.MonetaryTypeSous",filter:["lsd"]},value:{name:"CoC7.MonetaryTypeOne",filter:[]},multiplier:{name:"CoC7.MonetaryTypeCreditRating",filter:[]}},characteristics:{str:"CoC7.CharacStr",con:"CoC7.CharacCon",siz:"CoC7.CharacSiz",dex:"CoC7.CharacDex",app:"CoC7.CharacApp",int:"CoC7.CharacInt",pow:"CoC7.CharacPow",edu:"CoC7.CharacEdu"},skillProperties:{noadjustments:"CoC7.SkillNoAdjustments",noxpgain:"CoC7.SkillNoXpGain",special:"CoC7.SkillSpecial",rarity:"CoC7.SkillRarity",push:"CoC7.SkillPush",combat:"CoC7.SkillCombat",fighting:"CoC7.SkillFighting",firearm:"CoC7.SkillFirearm",requiresname:"CoC7.SkillRequiresName",keepbasevalue:"CoC7.SkillKeepBaseValue",picknameonly:"CoC7.SkillPickNameOnly",onlyone:"CoC7.SkillSpecializationIsUnique"},weaponProperties:{melee:"CoC7.Weapon.Property.Melee",rngd:"CoC7.WeaponRngd",mnvr:"CoC7.WeaponProperyManeuver",thrown:"CoC7.Weapon.Property.Thrown",shotgun:"CoC7.Weapon.Property.Shotgun",dbrl:"CoC7.WeaponDbrl",impl:"CoC7.WeaponImpl",brst:"CoC7.WeaponBrst",auto:"CoC7.WeaponAuto",ahdb:"CoC7.WeaponAhdb",addb:"CoC7.WeaponAddb",slnt:"CoC7.WeaponSlnt",spcl:"CoC7.WeaponSpcl",mont:"CoC7.WeaponMont",blst:"CoC7.WeaponBlst",stun:"CoC7.WeaponStun",rare:"CoC7.WeaponRare",burn:"CoC7.Weapon.Property.Burn"},spellProperties:{call:"CoC7.CallSpell",dismiss:"CoC7.DismissSpell",contact:"CoC7.ContactSpell",summon:"CoC7.SummonSpell",bind:"CoC7.BindSpell",enchantment:"CoC7.EnchantmentSpell",gate:"CoC7.GateSpell",combat:"CoC7.CombatSpell"},bookType:{mythos:"CoC7.MythosBook",occult:"CoC7.OccultBook",other:"CoC7.Other"},talentType:{physical:"CoC7.PhysicalTalent",mental:"CoC7.MentalTalent",combat:"CoC7.CombatTalent",miscellaneous:"CoC7.MiscellaneousTalent",basic:"CoC7.BasicTalent",insane:"CoC7.InsaneTalent",other:"CoC7.OtherTalent"},statusType:{mania:"CoC7.Mania",phobia:"CoC7.Phobia"},occupationProperties:{classic:"CoC7.Classic",lovecraftian:"CoC7.Lovecraftian",modern:"CoC7.Modern",pulp:"CoC7.Pulp"},formula:{}};COC7.formula.actor={"@STR":"this.system.characteristics.str.value","@CON":"this.system.characteristics.con.value","@SIZ":"this.system.characteristics.siz.value","@DEX":"this.system.characteristics.dex.value","@APP":"this.system.characteristics.app.value","@INT":"this.system.characteristics.int.value","@POW":"this.system.characteristics.pow.value","@EDU":"this.system.characteristics.edu.value"},COC7.formula.actorsheet={"@STR":"this.actor.system.characteristics.str.value","@CON":"this.actor.system.characteristics.con.value","@SIZ":"this.actor.system.characteristics.siz.value","@DEX":"this.actor.system.characteristics.dex.value","@APP":"this.actor.system.characteristics.app.value","@INT":"this.actor.system.characteristics.int.value","@POW":"this.actor.system.characteristics.pow.value","@EDU":"this.actor.system.characteristics.edu.value"},COC7.status={tempoInsane:"tempoInsane",indefInsane:"indefInsane",unconscious:"unconscious",criticalWounds:"criticalWounds",dying:"dying",prone:"prone",dead:"dead"},COC7.newBookName="CoC7.NewBookName",COC7.newSkillName="CoC7.NewSkillName",COC7.newSpellName="CoC7.NewSpellName",COC7.newItemName="CoC7.NewItemName",COC7.newWeaponName="CoC7.NewWeaponName",COC7.creatureFightingSkill="CoC7.creatureFightingSkill",COC7.fightingSpecializationName="CoC7.FightingSpecializationName",COC7.firearmSpecializationName="CoC7.FirearmSpecializationName",COC7.combatCards={fightBack:"CoC7.FightBack",dodge:"CoC7.Dodge",maneuver:"CoC7.Maneuver",noResponse:"CoC7.NoResponse"};class CoC7Dice{static async roll(modif=0,rollMode=null,hideDice=!1){let roll,alternativeDice="";game.modules.get("dice-so-nice")?.active&&(modif<0?alternativeDice=game.settings.get("CoC7","tenDiePenalty"):modif>0&&(alternativeDice=game.settings.get("CoC7","tenDieBonus"))),roll=game.CoC7.dev.dice.alwaysCrit&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.crit01):game.CoC7.dev.dice.alwaysFumble&&game.settings.get("CoC7","hiddendevmenu")?Roll.fromData(CoC7Dice.fumble99):await new Roll("1dt"+(""!==alternativeDice?"+1do["+alternativeDice+"]":"+1dt").repeat(Math.abs(modif))+"+1d10").roll({async:!0});const result={unit:{total:0,results:[]},tens:{total:0,results:[]},total:0,roll};rollMode&&(result.rollMode=rollMode),hideDice&&(result.hideDice=hideDice);for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?result.tens.results.push(d.total):(result.unit.total=10===d.total?0:d.total,result.unit.results.push(result.unit.total));if(modif<0)result.tens.total=0===result.unit.total&&result.tens.results.includes(0)?100:Math.max(...result.tens.results);else if(0===result.unit.total){const dice=result.tens.results.filter((t=>t>0));result.tens.total=0===dice.length?100:Math.min(...dice)}else result.tens.total=Math.min(...result.tens.results);return result.total=result.unit.total+result.tens.total,result}static async showRollDice3d(roll){if(game.modules.get("dice-so-nice")?.active){const syncDice=game.settings.get("CoC7","syncDice3d"),chatData={whisper:null,blind:!1};ChatMessage.applyRollMode(chatData,game.settings.get("core","rollMode")),await game.dice3d.showForRoll(roll,game.user,syncDice,chatData.whisper,chatData.blind)}}static async combinedRoll(options){options.pool=options.pool??{},options.pool[0]=!1;const keys=Object.keys(options.pool).map((v=>parseInt(v,10)));let penaltyDice=Math.abs(Math.min(0,Math.min(...keys))),bonusDice=Math.max(0,Math.max(...keys));const hasDSN=game.modules.get("dice-so-nice")?.active,pool=[];pool.push("1dt+1d10"),penaltyDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDiePenalty")+"]":"1dt").repeat(Math.abs(penaltyDice))),bonusDice>0&&pool.push((hasDSN?"+1do["+game.settings.get("CoC7","tenDieBonus")+"]":"1dt").repeat(Math.abs(bonusDice)));const roll=await new Roll(pool.join("")).roll({async:!0}),result={groups:{baseDie:0,penaltyDice:[],bonusDice:[]},unit:0,roll};let baseSet=!1;for(const d of roll.dice)d instanceof CONFIG.Dice.terms.t?baseSet?penaltyDice>0?(result.groups.penaltyDice.push(d.total),penaltyDice--):(result.groups.bonusDice.push(d.total),bonusDice--):(result.groups.baseDie=d.total,baseSet=!0):result.unit=10===d.total?0:d.total;const output={};for(const key in options.pool){output[key]={unit:{total:result.unit,results:[result.unit]},tens:{total:0,results:[]},total:0,roll};const modif=parseInt(key,10);let modifier=modif;output[key].tens.results.push(result.groups.baseDie);for(const offset=Math.abs(modifier);modifier<0;modifier++)output[key].tens.results.push(result.groups.penaltyDice[modifier+offset]);for(const offset=modifier;modifier>0;modifier--)output[key].tens.results.push(result.groups.bonusDice[Math.abs(modifier-offset)]);if(modif<0)output[key].tens.total=0===output[key].unit.total&&output[key].tens.results.includes(0)?100:Math.max(...output[key].tens.results);else if(0===output[key].unit.total){const dice=output[key].tens.results.filter((t=>t>0));output[key].tens.total=0===dice.length?100:Math.min(...dice)}else output[key].tens.total=Math.min(...output[key].tens.results);output[key].total=output[key].unit.total+output[key].tens.total}return output}static fumble99={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:9,active:!0}]}],total:99,evaluated:!0};static crit01={class:"Roll",options:{},dice:[],formula:"1dt + 1d10",terms:[{class:"CoC7DecaderDie",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:10,active:!0}]},{class:"OperatorTerm",options:{},evaluated:!0,operator:"+"},{class:"Die",options:{},evaluated:!0,number:1,faces:10,modifiers:[],results:[{result:1,active:!0}]}],total:1,evaluated:!0}}class CoC7ContentLinkDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{id:"link-creation",classes:["coc7","active-effect-sheet"],title:game.i18n.localize("CoC7.CreateLink"),dragDrop:[{dragSelector:null,dropSelector:".container"}],template:"systems/CoC7/templates/apps/link-creation.html",closeOnSubmit:!1,width:560,height:"auto",tabs:[{navSelector:".tabs",contentSelector:".effect-options",initial:"details"}]})}async getData(){const sheetData=await super.getData();return sheetData.checkType=[{key:CoC7Link.CHECK_TYPE.CHECK,label:game.i18n.localize("CoC7.Check")},{key:CoC7Link.CHECK_TYPE.SANLOSS,label:game.i18n.localize("CoC7.SanityCheck")},{key:CoC7Link.CHECK_TYPE.ITEM,label:game.i18n.localize("CoC7.ItemWeapon")},{key:CoC7Link.CHECK_TYPE.EFFECT,label:game.i18n.localize("EFFECT.TabEffects")}],sheetData.linkType=[{key:CoC7Link.LINK_TYPE.CHARACTERISTIC,label:game.i18n.localize("CoC7.Characteristic")},{key:CoC7Link.LINK_TYPE.ATTRIBUTE,label:game.i18n.localize("CoC7.Attribute")},{key:CoC7Link.LINK_TYPE.SKILL,label:game.i18n.localize("CoC7.Skill")}],sheetData.attributeType=[{key:"lck",label:game.i18n.localize("CoC7.Luck")},{key:"san",label:game.i18n.localize("CoC7.Sanity")}],sheetData.effectModes=Object.entries(CONST.ACTIVE_EFFECT_MODES).reduce(((obj,e)=>(obj[e[1]]=game.i18n.localize("EFFECT.MODE_"+e[0]),obj)),{}),sheetData.characteristicType=CoCActor.getCharacteristicDefinition(),sheetData.link=sheetData.object.link,sheetData.fromGame=sheetData.link.isItemCheck||sheetData.link.isSkillCheck,sheetData.fromDirectory="fromDirectory"===sheetData.object.hasID,sheetData.fromCompendium="fromCompendium"===sheetData.object.hasID,sheetData.isSetFromGame=sheetData.link.id&&(sheetData.fromDirectory||sheetData.fromCompendium),sheetData.difficultyLevel=CoC7Check.difficultyLevel,sheetData.actorNames=sheetData.object.actors.map((a=>a.name)).join(", "),sheetData}activateListeners(html){super.activateListeners(html),html.find("select[name=type],select[name=check],select[name=attributeKey],select[name=characteristicKey],input[type=checkbox]").change(this._onChangeSubmit.bind(this)),html.find(".effect-control").click(this._onEffectControl.bind(this))}_onChangeSubmit(event){switch(event.currentTarget.name){case"fromCompendium":case"fromDirectory":this.object.hasID=event.currentTarget.name===this.object.hasID?"":event.currentTarget.name}this._onSubmit(event)}_onEffectControl(event){event.preventDefault();const button=event.currentTarget;switch(button.dataset.action){case"add":return this._addEffectChange();case"delete":button.closest(".effect-change").remove(),this._onSubmit(event)}}async _addEffectChange(){const idx=this.object.link.effect.changes.length;return this.submit({preventClose:!0,updateData:{[`effect.changes.${idx}`]:{key:"",mode:CONST.ACTIVE_EFFECT_MODES.ADD,value:""}}})}async _updateObject(event,formData){let hasEffect=!1;const effect={duration:{},changes:[]};for(const key in formData)switch(key){case"checkName":this.object.link.setValue("name",formData.checkName);break;case"blind":case"difficulty":case"displayName":case"icon":case"id":case"modifier":case"pack":case"sanMin":case"sanMax":case"sanReason":this.object.link.setValue(key,formData[key]);break;case"hasModifiers":case"hasLabel":case"hasIcon":this.object[key]=formData[key];break;case"effect.label":effect.label=formData[key],hasEffect=!0;break;case"effect.icon":effect.icon=formData[key],hasEffect=!0;break;case"effect.tint":effect.tint=formData[key],hasEffect=!0;break;case"effect.disabled":effect.disabled=formData[key],hasEffect=!0;break;case"effect.duration.seconds":effect.duration.seconds=formData[key],hasEffect=!0;break;case"effect.duration.rounds":effect.duration.rounds=formData[key],hasEffect=!0;break;case"effect.duration.turns":effect.duration.turns=formData[key],hasEffect=!0;break;default:{const match=key.match(/^effect\.changes\.(\d+)\.key$/);match&&(effect.changes.push({key:formData[key],mode:formData["effect.changes."+match[1]+".mode"],value:formData["effect.changes."+match[1]+".value"]}),hasEffect=!0)}}hasEffect&&this.object.link.setValue("object",effect);const target=event.currentTarget;if(target){switch(target.name){case"type":this.object.link.setValue("check",target.value),target.value===CoC7Link.CHECK_TYPE.CHECK&&(this.object.link.setValue("linkType",CoC7Link.LINK_TYPE.SKILL),this.object.link.setValue("name",""));break;case"check":this.object.link.setValue("linkType",target.value),target.value===CoC7Link.LINK_TYPE.CHARACTERISTIC?this.object.link.setValue("name",CoCActor.getCharacteristicDefinition()[0].key):target.value===CoC7Link.LINK_TYPE.ATTRIBUTE?this.object.link.setValue("name","lck"):this.object.link.setValue("name","");break;case"attributeKey":case"characteristicKey":this.object.link.setValue("name",target.value)}if("submit"===event.type){switch(event.submitter.dataset.action){case"clipboard":CoC7Utilities.copyToClipboard(this.object.link.link);break;case"chat":CoC7Link.toChatMessage(this.object.link.object);break;case"whisper-owner":CoC7Link.toWhisperMessage(this.object.link.object,this.object.actors);break;case"whisper-selected":if(!canvas.tokens.controlled.length)return void ui.notifications.warn(game.i18n.localize("CoC7.ErrorNoTokensSelected"));CoC7Link.toWhisperMessage(this.object.link.object,canvas.tokens.controlled.filter((t=>t.actor.owners.length)).map((t=>t.actor)))}return}}this.render(!0)}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);if("CoC7Link"===data.type)this.setLink(await CoC7Link.fromDropData(data)),this.render(!0);else if("Folder"===data.type&&"Actor"===data.documentName||["Item","Actor"].includes(data.type)){const dataList=await CoC7Utilities.getDataFromDropEvent(event,data.documentName??data.type);data.documentName??"Actor"===data.type?(this.object.actors=dataList.filter((a=>a.owners.length)),this.render(!0)):1===dataList.length&&["skill","weapon"].includes(dataList[0].type)&&(dataList[0].pack?(this.object.hasID="fromCompendium",this.object.link.setValue("pack",dataList[0].pack)):this.object.hasID="fromDirectory",this.object.link.setValue("id",dataList[0].id),this.object.link.setValue("name",dataList[0].name),this.render(!0))}}setLink(link){return this.object.link=link,""!==link.pack?this.object.hasID="fromCompendium":""!==link.id&&(this.object.hasID="fromDirectory"),link.difficulty===CoC7Check.difficultyLevel.regular&&0===parseInt(link.modifier,10)||(this.object.hasModifiers=!0),""!==link.displayName&&(this.object.hasLabel=!0),""!==link.icon&&(this.object.hasIcon=!0),""}static async create(linkData={},option={}){const object=mergeObject({link:null,hasID:"",hasModifiers:!1,hasLabel:!1,hasIcon:!1,actors:[]},option),dialog=new CoC7ContentLinkDialog(object,{});dialog.setLink(await CoC7Link.fromDropData(linkData)),dialog.render(!0)}}function createInlineRoll(roll){const data={cls:["inline-roll"],dataset:{}};try{data.cls.push("inline-result"),data.result=roll.total,data.title=roll.formula,data.dataset.roll=escape(JSON.stringify(roll))}catch(err){return null}const a=document.createElement("a");a.classList.add(...data.cls),a.title=data.title;for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.innerHTML=`<i class="fas fa-dice-d20"></i> ${data.result}`,a}function isCtrlKey(event){return!1!==event&&(event.metaKey||event.ctrlKey||91===event.keyCode||224===event.keyCode)}class chatHelper{static hyphenToCamelCase(string){return string.replace(/-([a-z])/g,(function(string){return string[1].toUpperCase()}))}static async createMessage(title,message,options={}){const messageData={};messageData.flavor=title,messageData.speaker=options.speaker||ChatMessage.getSpeaker(),options.whisper&&(messageData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER,messageData.whisper=options.whisper),void 0!==options.roll&&(messageData.roll=options.roll,messageData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,messageData.rollMode=CONST.DICE_ROLL_MODES.SELF),messageData.user=game.user.id,messageData.content=message,ChatMessage.create(messageData).then((msg=>msg))}static camelCaseToHyphen(string){return string.replace(/([A-Z])/g,(function(string){return"-"+string.toLowerCase()}))}static getActorFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const token=chatHelper.getTokenFromKey(key);return token?.actor}return game.actors.get(key)||null}static getSpeakerFromKey(actorKey){const speaker={},actor=chatHelper.getActorFromKey(actorKey);if(actorKey.includes(".")){const[sceneId,tokenId]=actorKey.split(".");speaker.token=tokenId,speaker.scene=sceneId,actor.token?.name&&(speaker.alias=actor.token.name),speaker.actor=actor.id}else speaker.actor=actorKey,speaker.alias=actor.name;return speaker}static attachObjectToElement(object,element,objectName=""){for(const prop of Object.keys(object))prop.startsWith("_")||("object"==typeof object[prop]?chatHelper.attachObjectToElement(object[prop],element,`${objectName}:${prop}:`):element.dataset[`${objectName}${prop}`]=object[prop])}static getObjectFromElement(object,element){function deserialize(obj,key,value){if(key.startsWith(":")){const s=key.slice(1),objProp=s.slice(s.indexOf(":")+1),objName=s.substring(0,s.indexOf(":"));void 0===obj[objName]&&(obj[objName]={}),deserialize(obj[objName],objProp,value)}else"true"===value?obj[key]=!0:"false"===value?obj[key]=!1:Number(value).toString()===value?obj[key]=Number(value):obj[key]=value}if(element&&object)for(const prop of Object.keys(element.dataset)){if("template"===prop)return;deserialize(object,prop,element.dataset[prop])}}static getTokenFromKey(key){if(!key)return null;if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene.document)),token}}{const actor=game.actors.get(key);return chatHelper.getActorToken(actor)}}static getActorToken(actor){return actor?actor.token||actor.prototypeToken:null}static getActorImgFromKey(actorKey){if(!actorKey)return null;if(game.settings.get("CoC7","useToken")){const token=chatHelper.getTokenFromKey(actorKey);if(token&&(token.document||token).texture.src&&-1===(token.document||token).texture.src.indexOf("*"))return(token.document||token).texture.src}const actor=chatHelper.getActorFromKey(actorKey);return game.settings.get("CoC7","useToken")&&actor.prototypeToken&&actor.prototypeToken.texture.src&&-1===actor.prototypeToken.texture.src?.indexOf("*")?actor.prototypeToken.texture.src:actor.img}static getDistance(startToken,endToken){if(void 0===endToken.center&&void 0!==endToken.id&&startToken.scene?.id){const scene=game.scenes.get(startToken.scene.id);if(void 0!==scene?.tokens){const tokens=scene?.tokens.filter((token=>token.actor.id===endToken.data.document.id)).map((token=>token.object));1===tokens.length&&(endToken=tokens[0])}}let distance={gridUnit:0,value:0,unit:canvas.scene.grid.units};if(void 0!==startToken&&void 0!==startToken.center&&void 0!==endToken&&void 0!==endToken.center){const ray=new Ray(startToken.center,endToken.center),segment=[{ray}];if(distance={gridUnit:ray.distance/canvas.scene.grid.size,value:canvas.grid.measureDistances(segment,{gridSpaces:game.settings.get("CoC7","gridSpaces")})[0],unit:canvas.scene.grid.units},game.settings.get("CoC7","distanceElevation")){const elevation=Math.abs((startToken.document.elevation||0)-(endToken.document.elevation||0));distance.value=Math.sqrt(distance.value*distance.value+elevation*elevation)}}else game.settings.get("CoC7","distanceTheatreOfTheMind")||ui.notifications.warn(game.i18n.localize("CoC7.MessageDistanceCalculationFailure"));return distance}static toYards(distance){return"ft"===distance.unit?distance.value/3:distance.value}}class CoC7Roll{static getFromCard(card){const rollDiv=card.querySelector("div.dice-roll");if(!rollDiv)return null;const roll=new CoC7Roll;return chatHelper.getObjectFromElement(roll,rollDiv),roll}get resultType(){switch(this.successLevel=parseInt(this.successLevel),this.successLevel){case CoC7Check.successLevel.regular:return game.i18n.format("CoC7.RegularSuccess");case CoC7Check.successLevel.hard:return game.i18n.format("CoC7.HardSuccess");case CoC7Check.successLevel.extreme:return game.i18n.format("CoC7.ExtremeSuccess");case CoC7Check.successLevel.critical:return game.i18n.format("CoC7.CriticalSuccess");case CoC7Check.successLevel.fumble:return game.i18n.format("CoC7.Fumble");case CoC7Check.successLevel.failure:return game.i18n.format("CoC7.Failure");default:return null}}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get item(){return this.itemId&&this.actor?this.actor.items.get(this.itemId):null}get skill(){return this.skillId&&this.actor?this.actor.items.get(this.skillId):null}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}static getFromElement(element,object=null){if(!element)return;const roll=object||new CoC7Roll;chatHelper.getObjectFromElement(roll,element),roll.dices={tens:[],unit:{}},chatHelper.getObjectFromElement(roll.dices,element.querySelector(".dice-result")),roll.dices.hasBonus=0!==roll.diceModifier,roll.dices.bonus=Math.abs(roll.diceModifier),roll.dices.bonusType=roll.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus");const tenDice=element.querySelector(".ten-dice");if(tenDice)for(const d of tenDice.querySelectorAll("li")){const die={selected:!1,isMax:!1,isMin:!1,value:-1};chatHelper.getObjectFromElement(die,d),roll.dices.tens.push(die)}const unitDie=element.querySelector(".unit-die")?element.querySelector(".unit-die").querySelector("li"):null;roll.dices.unit.value=unitDie?parseInt(unitDie.dataset.value):null,roll.increaseSuccess=[];const increaseSuccess=element.querySelector(".increase-success");if(increaseSuccess&&increaseSuccess.querySelectorAll("button"))for(const isl of increaseSuccess.querySelectorAll("button")){const newSuccesLevel={};chatHelper.getObjectFromElement(newSuccesLevel,isl),roll.increaseSuccess.push(newSuccesLevel)}return roll.luckNeeded&&(roll.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:roll.luckNeeded})),object?void 0:roll}static getFromCheck(check){const roll=new CoC7Roll;return roll.rollType=check.rollType,roll.side=check.side,roll.action=check.action,roll.refMessageId=check.refMessageId,roll.referenceMessageId=check.referenceMessageId,roll.successLevel=check.successLevel,roll.difficulty=check.difficulty,roll.skillId=check.skill?check.skill.id:null,roll.itemId=check.item?check.item.id:null,roll.diceMod=check.diceModifier,roll.value=parseInt(check.rawValue),roll.fumble=check.isFumble,roll.critical=check.isCritical,roll.characteristic=check.characteristic?check.characteristic:null,roll.result=check.dice.total,roll.actorKey=check.actor.tokenKey,check.actor.isToken?(roll.tokenId=check.actor.tokenKey,roll.actorId=null):(roll.tokenKey=null,roll.actorId=check.actor.tokenKey),roll}static attachCheckToElement(htmlElement,check){const roll=CoC7Roll.getFromCheck(check);return roll.attachToElement(htmlElement),roll}attachToElement(htmlElement){chatHelper.attachObjectToElement(this,htmlElement)}}class CoC7Damage{static getMainDie(damageString){return damageString.toLowerCase().includes("d20")?"d20":damageString.toLowerCase().includes("d12")?"d12":damageString.toLowerCase().includes("d10")?"d10":damageString.toLowerCase().includes("d8")?"d8":damageString.toLowerCase().includes("d4")?"d4":"d6"}static getFromElement(element,object=null){if(!element)return;const damage=object||{};chatHelper.getObjectFromElement(damage,element);const rolls=element.querySelector(".dice-rolls").querySelectorAll("li");damage.rolls=[];for(const r of rolls){const roll={};chatHelper.getObjectFromElement(roll,r),damage.rolls.push(roll)}return object?void 0:damage}}class RollDialog{static async create(options={}){options.difficulty&&(options.difficultyLevel={},CoC7Check.difficultyLevel.unknown===options.difficulty&&(options.difficultyLevel.unknown=!0),CoC7Check.difficultyLevel.regular===options.difficulty&&(options.difficultyLevel.regular=!0),CoC7Check.difficultyLevel.hard===options.difficulty&&(options.difficultyLevel.hard=!0),CoC7Check.difficultyLevel.extreme===options.difficulty&&(options.difficultyLevel.extreme=!0)),options.name&&!options.displayName&&(options.displayName=options.name);const unknownDifficultyDefault="unknown"===game.settings.get("CoC7","defaultCheckDifficulty"),data={allowFlatDiceModifier:game.settings.get("CoC7","allowFlatDiceModifier")&&!options.disableFlatDiceModifier,allowFlatThresholdModifier:game.settings.get("CoC7","allowFlatThresholdModifier")&&!options.disableFlatThresholdModifier,difficulty:CoC7Check.difficultyLevel,unknownDifficultyDefault,hideDifficulty:options.hideDifficulty??!1,options};void 0!==options.cardType&&(!options.forcedCardType??1)&&(data.cardTypes=CoC7ChatMessage.cardTypes(options));const html=await renderTemplate("systems/CoC7/templates/apps/bonus.html",data);return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:options.displayName?game.i18n.format("CoC7.BonusSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.BonusSelectionWindow"),content:html,buttons:{roll:{label:game.i18n.localize("CoC7.RollDice"),callback:html=>(formData=new FormData(html[0].querySelector("#bonus-roll-form")),resolve(formData))}},default:"roll",close:()=>{}});dlg.render(!0)}))}}class RollCard{constructor(){this.rolls=[],this.initiator=null}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);for(let index=0;index<card.rolls.length;index++)"Object"===card.rolls[index]?.constructor?.name&&(card.rolls[index]=Object.assign(new CoC7Check,card.rolls[index]),card.rolls[index].rolled&&(card.rolls[index]._htmlRoll=await card.rolls[index].getHtmlRoll()));return card}static async _onToggle(event){event.preventDefault();const span=event.currentTarget;if(span&&span.classList.contains("gm-select-only")&&!game.user.isGM)return;const message=span.closest(".chat-message"),card=await this.fromMessageId(message.dataset.messageId);if(!card)return;const flag=span.dataset.flag;if(!flag)return;const toggle=span.closest(".toggle");if(toggle){const buttons=toggle.querySelectorAll(".toggle-switch");for(const b of buttons)card.unsetFlag(b.dataset.flag);card.setFlag(flag)}else card.toggleFlag(flag);card.updateChatCard()}static async dispatch(data){if(game.user.isGM){let card,messages=ui.chat.collection.filter((message=>this.defaultConfig.type===message.getFlag("CoC7","type")&&"resolved"!==message.getFlag("CoC7","state")&&(!["combinedCard"].includes(this.defaultConfig.type)||message.getFlag("CoC7","initiator")===data.roll.initiator)));if(messages.length){const timestamp=new Date(messages[0].timestamp);86400<(new Date-timestamp)/1e3&&(await messages[0].setFlag("CoC7","state","resolved"),messages=[])}card=messages.length?await this.fromMessage(messages[0]):new this,void 0!==data._rollMode&&(card._rollMode=data._rollMode),await card.process(data)}else game.socket.emit("system.CoC7",data)}async toMessage(){const html=await renderTemplate(this.config.template,this),htmlCardElement=$(html);htmlCardElement[0].dataset.object=escape(this.dataString);const chatData={user:game.user.id,flavor:game.i18n.localize(this.config.title),content:htmlCardElement[0].outerHTML,flags:{CoC7:{type:this.config.type,state:"initiated",initiator:this.initiator}}};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0);return await ChatMessage.create(chatData)}async updateChatCard(){if(await this.compute(),this.messageId){const html=await renderTemplate(this.config.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}await this.toMessage()}updateRoll(data){data.fromGM||Object.assign(this.rolls[data.rank],data.roll)}addRollData(data){const check=Object.assign(new CoC7Check,data.roll);this.rolls.push(check),"combinedCard"===this.config.type&&(this.initiator=data.roll.initiator)}addRoll(data){this.rolls.push(data)}removeRoll(rank){this.rolls.splice(rank,1)}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultConfig(){return{exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get winners(){return this.rolls.filter((r=>r.winner))}get winner(){if(this.winners.length)return this.winners[0]}get loosers(){return this.rolls.filter((r=>!r.winner))}get looser(){if(this.loosers.length)return this.loosers[0]}get hasWinner(){return this.winners.length>0}get isKeeper(){return game.user.isGM}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.config.exclude?.includes(key)&&!key.startsWith(this.config.excludeStartWith))return value}))}}class CombinedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.combined .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.combined a",CombinedCheckCard._onClick.bind(this)),html.on("click",".roll-card.combined button",CombinedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/combined-roll.html",type:"combinedCard",title:"CoC7.CombinedRollCard"})}get config(){return CombinedCheckCard.defaultConfig}get successCount(){if(this.rolled){let count=0;for(const r of this.rolls)r.passed&&(count+=1);return count}}get mainActorKey(){return this.rolls[0]?.actor?.actorKey||void 0}get success(){if(void 0!==this.successCount)return this.any?this.successCount>0:this.all?this.successCount===this.rolls.length:void 0}get failure(){if(void 0!==this.success)return!this.success}get checkGMInitiator(){return game.users.get(this.initiator)?.isGM}async getHtmlRoll(){if(!this.rolled)return;const check=new CoC7Check;return await check._perform({roll:this._roll[check.diceModifier||0],silent:!0}),await check.getHtmlRoll({hideSuccess:!0})}process(data){switch(data.action){case"new":case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data);break;case"assignRoll":this.assignRoll(data)}game.user.isGM?this.updateChatCard():game.socket.emit("system.CoC7",data)}async assignRoll(data){game.user.isGM&&(this.rolled||(this.rolled=!0,this._roll=data.roll))}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await CombinedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-card":{const pool={};for(const dice of card.rolls){const diceModifier=parseInt(dice.diceModifier,10);isNaN(diceModifier)||(pool[diceModifier]=!1)}const roll=await CoC7Dice.combinedRoll({pool});roll.initiator=game.user.id;const data={type:this.defaultConfig.type,action:"assignRoll",fromGM:game.user.isGM,roll};AudioHelper.play({src:CONFIG.sounds.dice},!0),card.process(data);break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM,roll:{initiator:game.user.id}};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(){if(this._roll){this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.data));for(const r of this.rolls)r.rolled||(r.modifier=r.diceModifier||0,r.difficulty=r.difficulty||CoC7Check.difficultyLevel.regular,r.flatDiceModifier=r.flatDiceModifier||0,r.flatThresholdModifier=r.flatThresholdModifier||0,await r._perform({roll:this._roll[r.modifier],silent:!0}));for(let i=0;i<this.rolls.length;i++)this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));this._htmlRoll=await this.getHtmlRoll()}}closeCard(){this.closed=!0}}class InteractiveChatCard{constructor(options={}){this._options=options}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}get template(){return this.options.template}get cssClasses(){return this.options.classes}async toMessage(optionnalChatData={}){const html=await renderTemplate(this.template,this),htmlCardElement=$(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatData=mergeObject({user:game.user.id,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard(options={}){if(options.compute&&this.compute(),this.messageId){const html=await renderTemplate(this.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(this.dataString),htmlCardElement.dataset.cardClass=this.constructor.name,htmlCardElement.classList.add(...this.cssClasses);const chatMessage=game.messages.get(this.messageId);this.closed&&await chatMessage.setFlag("CoC7","state","resolved");const msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}this.toMessage()}activateListeners(html){html.on("click",".interactive-card .ic-radio-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .ic-switch",this._onToggle.bind(this)),html.on("click",".interactive-card .submit",this._onSubmit.bind(this)),html.on("focusout","input",this._onSubmit.bind(this)),html.on("click",".interactive-card button",this._onButton.bind(this)),html.on("keydown","form",this._onKey.bind(this))}static async bindListeners(html){const htmlCardElement=html[0].querySelector(".chat-card");if(!htmlCardElement)return;if(!htmlCardElement.dataset.cardClass)return;if(!Object.getOwnPropertyNames(game.CoC7.cards).includes(htmlCardElement.dataset.cardClass))return;const card=await InteractiveChatCard.fromHTMLCardElement(htmlCardElement),typedCard=Object.assign(new game.CoC7.cards[htmlCardElement.dataset.cardClass],card);typedCard.assignObject(),typedCard.activateListeners(html)}assignObject(){}_onButton(event){const action=event.currentTarget.dataset.action;this[action]&&this[action]({event,update:!0})}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onSubmit(event){event.preventDefault();const card=event.currentTarget.closest(".interactive-card");if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i];let data=new FormDataExtended(form).toObject();data=diffObject(this,expandObject(data));for(const[key,value]of Object.entries(data))this[key]=value,updates=!0}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{classes:["interactive-card"],exclude:["_actor","_skill","_item","_message","_htmlRoll"],excludeStartWith:"__"}}get data(){return JSON.parse(this.dataString)}get dataString(){return JSON.stringify(this,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(card){const cardData=JSON.parse(unescape(card.dataset.object));if(!cardData.messageId){const message=card.closest(".message");cardData.messageId=message?.dataset?.messageId}return await this.fromData(cardData)}static async fromData(data){const card=Object.assign(new this,data);return await card.assignObject(),card}setFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!0)}unsetFlag(flagName){(flagName||"string"===$.type(flagName))&&(this[flagName]=!1)}toggleFlag(flagName){this[flagName]=!this[flagName]}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const flag=target.dataset.flag;if(!flag)return;const toggle=target.closest(".ic-radio");if(toggle){const buttons=toggle.querySelectorAll(".ic-radio-switch");for(const b of buttons)this.unsetFlag(b.dataset.flag);this.setFlag(flag)}else this.toggleFlag(flag);const card=target.closest(".interactive-card");card&&this._update(card),this.updateChatCard()}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get isTargetOwner(){return this.target.isOwner}get isKeeper(){return game.user.isGM}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor||this.targetToken.data.actor||this.targetToken.data.document:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}}class DamageCard extends InteractiveChatCard{static get defaultOptions(){return mergeObject(super.defaultOptions,{exclude:["_targetToken","_targetActor","_htmlRoll","_htmlInlineRoll"].concat(super.defaultOptions.exclude),template:"systems/CoC7/templates/chat/cards/damage.html"})}async assignObject(){this.damageRoll&&"Object"===this.damageRoll.constructor.name&&(this.damageRoll=Roll.fromData(this.damageRoll))}_onButton(event){super._onButton(event)}get critical(){return this.options.critical}set critical(x){this._options.critical=x}get impale(){return void 0===this._impale?this.weapon.impale:this._impale}set impale(x){this._impale=x}get isDamageFormula(){return"string"==typeof this.damageFormula&&(!!isNaN(Number(this.damageFormula))&&Roll.validate(this.damageFormula))}get isDamageNumber(){return!isNaN(Number(this.damageFormula))}get isArmorForula(){return"string"==typeof this.armor&&(!!isNaN(Number(this.armor))&&Roll.validate(this.armor))}get totalDamageString(){let damage=Number(this.isDamageNumber?this.damageFormula:this.roll.total);return!this.ignoreArmor&&((isNaN(Number(this.armor))||Number(this.armor)>0)&&(damage-=Number(this.armor)),!isNaN(Number(this.armor))&&damage<=0)?game.i18n.localize("CoC7.ArmorAbsorbsDamage"):damage}get noDamage(){if(this.rolled){const damage=this.isDamageNumber?this.damageFormula:this.roll.total;return this.ignoreArmor?!!(damage<=0):!isNaN(Number(this.armor))&&!!(damage-Number(this.armor)<=0)}return!1}async updateChatCard(){if(!this.options.fastForward||this.roll||this.isDamageNumber||await this.rollDamage({update:!1}),this.isDamageNumber||this.roll&&null!=this.roll.total||this.hardrolled?this.rolled=!0:this.rolled=!1,!this.options.fastForward||this.damageInflicted||this.noDamage||await this.dealDamage({update:!1}),this.rolled&&this.roll){"Object"===this.roll.constructor.name&&(this.roll=Roll.fromData(this.roll));const a=createInlineRoll(this.roll);this._htmlInlineRoll=a.outerHTML,this._htmlRoll=await this.roll.render()}await super.updateChatCard()}async rollDamage(options={update:!0}){this.roll=await new Roll(this.damageFormula||"0").evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.roll),this.hardrolled=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async rollArmor(options={update:!0}){const roll=await new Roll(this.armor).evaluate({async:!0});this.armor=roll.total,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}async dealDamageToSelectedTarget(options={update:!0}){if(this.isArmorForula&&await this.rollArmor(),isNaN(Number(this.totalDamageString)))return void ui.notifications.error(game.i18n.localize("CoC7.ErrorEvaluatingDamage"));const targets=[],targetName=[],selectedPlayers=canvas.tokens.controlled.map((token=>token.actor));for(let index=0;index<selectedPlayers.length;index++)this.actor.id!==selectedPlayers[index].id&&(targetName.push(selectedPlayers[index].name),targets.push(selectedPlayers[index]));const data={title:" ",content:game.i18n.format("CoC7.DealDamage",{damage:this.totalDamageString,target:targetName}),buttons:{one:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>{this.confirmDamage(targets)}},two:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>{}}},default:"two"};targetName.length>0&&new Dialog(data).render(!0)}async confirmDamage(targets){for(let index=0;index<targets.length;index++)await targets[index].dealDamage(Number(this.totalDamageString),{ignoreArmor:!1}),ChatMessage.create({content:game.i18n.format("CoC7.DamageDealTo",{name:targets[index].name,damage:this.totalDamageString})})}async dealDamage(options={update:!0}){this.isArmorForula&&await this.rollArmor();let damage=this.totalDamageString;if(isNaN(Number(damage))){if(game.i18n.localize("CoC7.ArmorAbsorbsDamage")!==damage)return void ui.notifications.error("Error evaluating damage");damage=0}this.targetActor&&await this.targetActor.dealDamage(Number(damage),{ignoreArmor:!0}),this.damageInflicted=!0,options.update=void 0===options.update||options.update,options.update&&this.updateChatCard()}get range(){return this.options.range||"normal"}set range(x){["normal","long","extreme"].inclues(x.toLowerCase())&&(this._options.range=x)}get damageFormula(){const range=this.range;let formula=this.weapon?.system?.range[range]?.damage,db=this.actor.db;if(db=(""===(db??"").toString().trim()?0:db).toString().trim(),db.startsWith("-")||(db="+"+db),this.weapon.system.properties.addb&&(formula+=db),this.weapon.system.properties.ahdb&&(formula=formula+"+ floor("+db+"/2)"),formula){const maxDamage=new Roll(formula).evaluate({maximize:!0}).total;let rollString;return this.critical?this.impale?(rollString=formula+"+"+maxDamage,rollString):maxDamage:formula}}get armor(){return void 0!==this._armor&&""!==this._armor?this._armor:this.target?this.targetActor.system.attribs.armor.value:0}set armor(x){this._armor=x}}class OpposedCheckCard extends RollCard{static async bindListerners(html){html.on("click",".roll-card.opposed .toggle-switch",this._onToggle.bind(this)),html.on("click",".roll-card.opposed a",OpposedCheckCard._onClick.bind(this)),html.on("click",".roll-card.opposed button",OpposedCheckCard._onClick.bind(this))}static get defaultConfig(){return mergeObject(super.defaultConfig,{template:"systems/CoC7/templates/chat/cards/opposed-roll.html",type:"opposedCard"})}get config(){return OpposedCheckCard.defaultConfig}get attackerRoll(){if(this.combat){if(this.rolls?.length){const attacker=this.rolls.filter((r=>0===r.index||r.attacker));if(attacker.length)return attacker[0]}}else;}get defenderRoll(){if(this.combat){if(this.rolls?.length){const defender=this.rolls.filter((r=>0!==r.index||!r.attacker));if(defender.length)return defender[0]}}else;}get defenderIsDodging(){return!(!this.defenderRoll?.actor?.dodgeSkill?.name||!this.defenderRoll?.skill?.name)&&this.defenderRoll.actor.dodgeSkill.name.toLowerCase()===this.defenderRoll.skill.name.toLowerCase()}get advantageAttacker(){return void 0===this._aa?!!this.defenderRoll&&!this.defenderIsDodging:this._aa}get winnerRollsDamage(){return!!(this.combat&&this.rolls.length>=2&&this.hasWinner&&"weapon"===this.winner?.item?.type)}set advantageAttacker(x){this._aa=!0,this._ad=!1}get advantageDefender(){return void 0===this._ad?this.defenderIsDodging:this._ad}set advantageDefender(x){this._ad=!0,this._aa=!1}get isTie(){return this.winnerCount>1}get needsTieBreaker(){return!!this.combat&&!(!this.attackerRoll||!this.defenderRoll||this.attackerRoll.successLevel!==this.defenderRoll.successLevel)}get winnerCount(){let count=0;for(const r of this.rolls)r.winner&&(count+=1);return count}get isAttackManeuver(){return!(!this.combat||!this.attackerRoll||this.attackerRoll?.item&&!this.attackerRoll?.item.system.properties?.mnvr)}get resultText(){if(this.combat&&this.attackerRoll&&this.defenderRoll){if(!this.attackerRoll.winner&&!this.defenderRoll.winner)return game.i18n.localize("CoC7.NoWinner");if(this.attackerRoll.winner)return this.attackerRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.attackerRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.attackerRoll.actor.name});if(this.defenderRoll.winner)return this.defenderRoll.maneuver?game.i18n.format("CoC7.ManeuverSuccess",{name:this.defenderRoll.actor.name}):this.defenderIsDodging?game.i18n.format("CoC7.DodgeSuccess",{name:this.defenderRoll.actor.name}):game.i18n.format("CoC7.AttackSuccess",{name:this.defenderRoll.actor.name})}}async process(data){switch(data.action){case"new":this.rolls?.length||(this.combat=data.combat||void 0,this.combat&&(data.roll.attacker=!0)),data.roll.index=this.rolls.length,this.addRollData(data);break;case"roll":this.addRollData(data);break;case"updateRoll":this.updateRoll(data)}game.user.isGM?await this.updateChatCard():game.socket.emit("system.CoC7",data)}async roll(rank){await this.rolls[rank]._perform();const data={type:this.config.type,action:"updateRoll",rank,fromGM:game.user.isGM};return game.user.isGM||(data.roll=this.rolls[rank].JSONRollData),data}static async _onClick(event){event.preventDefault();const a=event.currentTarget,action=a.dataset.action,li=a.closest("li.actor-roll"),message=a.closest(".chat-message"),cardElement=a.closest("div.roll-card"),card=await OpposedCheckCard.fromHTMLCardElement(cardElement);card.messageId=message.dataset.messageId;const rank=Number(li?.dataset?.rank);switch(action){case"toggle-combat":card.combat=!card.combat,await card.updateChatCard();break;case"remove-roll":card.removeRoll(rank),await card.updateChatCard();break;case"close-card":card.closeCard(),await card.updateChatCard();break;case"roll-check":{const speaker=ChatMessage.getSpeaker();card.rolls[rank].actorKey||(card.rolls[rank].actorKey=`${speaker.scene}.${speaker.token}`);const data=await card.roll(rank);await card.process(data);break}case"roll-damage":{card.closeCard(),await card.updateChatCard();const damageChatCard=new DamageCard({critical:card.winner.isExtremeSuccess,fastForward:event.shiftKey});damageChatCard.actorKey=card.winner.actor.actorKey,damageChatCard.targetKey=card.looser.actor.actorKey,damageChatCard.itemId=card.winner.itemId,damageChatCard.updateChatCard();break}default:{const options={update:!1,data:a.dataset,classes:a.classList,target:a};await CoC7Check.alter(card.rolls[rank],action,options);const data={type:this.defaultConfig.type,action:"updateRoll",rank,fromGM:game.user.isGM};game.user.isGM||(data.roll=card.rolls[rank].JSONRollData),card.process(data);break}}}async compute(rank=void 0){if(this.rolls=this.rolls.filter((roll=>void 0!==roll.actor.actorKey)),rank)this.rolls[rank].rolled&&(this.rolls[rank]._htmlRoll=await this.rolls[rank].getHtmlRoll({hideDiceResult:!0}));else for(let i=0;i<this.rolls.length;i++)delete this.rolls[i].maneuver,this.combat&&(!this.rolls[i].item||this.rolls[i].item.system.properties?.mnvr)&&(this.rolls[i]?.actor?.dodgeSkill?.name&&this.rolls[i]?.skill?.name&&this.rolls[i].actor.dodgeSkill.name.toLowerCase()!==this.rolls[i].skill.name.toLowerCase()||!this.rolls[i]?.actor?.dodgeSkill?.name)&&(this.rolls[i].maneuver=!0),this.rolls[i].rolled&&(this.rolls[i]._htmlRoll=await this.rolls[i].getHtmlRoll({hideDiceResult:!0}));if(this.combat){if(this.rolls.sort(((a,b)=>a.index>b.index?1:a.index<b.index?-1:0)),this.rolls.length>1){this.rolls=[this.rolls[0],this.rolls[1]];for(const r of this.rolls)delete r.winner,delete r.tie}this.rolls[0]&&(this.rolls[0].attacker=!0),this.rolls[0]?.rolled&&this.rolls[1]?.rolled&&(this.rolls[0].passed||this.rolls[1].passed)&&(this.rolls[0].successLevel>this.rolls[1].successLevel?this.rolls[0].winner=!0:this.rolls[1].successLevel>this.rolls[0].successLevel?this.rolls[1].winner=!0:this.advantageAttacker?this.rolls[0].winner=!0:this.rolls[1].winner=!0)}else{if(this.rolls.sort(((a,b)=>{if(a.rolled&&!b.rolled)return-1;if(!a.rolled&&b.rolled)return 1;if(!a.rolled&&!b.rolled)return 0;if(a.successLevel>b.successLevel)return this.resolved=!0,-1;if(a.successLevel<b.successLevel)return this.resolved=!0,1;if(game.settings.get("CoC7","opposedRollTieBreaker")){if(a.modifiedResult>b.modifiedResult)return this.resolved=!0,-1;if(a.modifiedResult<b.modifiedResult)return this.resolved=!0,1}else{if(a.rawValue>b.rawValue)return this.resolved=!0,-1;if(a.rawValue<b.rawValue)return this.resolved=!0,1}return 0})),this.winCount=0,this.rolls[0]&&this.rolls[0].rolled&&!this.rolls[0].failed){this.winCount=1;for(let i=1;i<this.rolls.length;i++)this.rolls[i]&&this.rolls[i].rolled&&this.rolls[0].successLevel===this.rolls[i].successLevel&&(game.settings.get("CoC7","opposedRollTieBreaker")?this.rolls[0].modifiedResult===this.rolls[i].modifiedResult:this.rolls[0].rawValue===this.rolls[i].rawValue)&&(this.winCount=this.winCount+1)}for(let i=0;i<this.rolls.length;i++)this.rolls[i].winner=i<this.winCount,this.rolls[i].tie=this.rolls[i].winner&&this.winCount>1}}closeCard(){this.closed=!0}}class ChatCardActor{constructor(actorKey=null,fastForward=!1){this.actorKey=actorKey,this.fastForward=fastForward}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get isBlind(){return this.rollMode?(void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind):null}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){this._rollMode=x}get actor(){return this.actorKey?chatHelper.getActorFromKey(this.actorKey):null}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}get item(){return this.itemId?this.actor.items.get(this.itemId):null}get weapon(){return this.item}get targetedTokens(){return[...game.user.targets]}get target(){return this.targetToken?this.targetToken:this.targetActor}get targetToken(){return this._targetToken||(this._targetKey?this._targetToken=chatHelper.getTokenFromKey(this._targetKey):(this._targetToken=this.targetedTokens.pop(),this._targetToken?this._targetKey=`${this._targetToken.scene.id}.${this._targetToken.id}`:this._targetToken=null)),this._targetToken}get targetActor(){return this._targetActor||(this.targetToken?this._targetActor=this.targetToken.actor:this._targetActor=chatHelper.getActorFromKey(this._targetKey)),this._targetActor}get targetKey(){return this.targetToken||this.targetActor?this._targetKey:null}get hasTarget(){return!(!this.targetToken&&!this.targetActor)}set targetKey(x){this._targetKey=x}get skills(){return this.actor.getWeaponSkills(this.itemId)}get targetImg(){const img=chatHelper.getActorImgFromKey(this.targetKey);return img||"../icons/svg/mystery-man-black.svg"}get name(){return this.token?this.token.name:this.actor.name}get targetName(){return this.target?this.target.name:"dummy"}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}async say(message,flavor=null){const speakerData={};let speaker;this.actor?(speakerData.actor=this.actor,this.token&&(speakerData.token=this.token.document),speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor,content:message};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}}function replacer(key,value){if(key.startsWith("__"))return;if(["_actor"].includes(key))return;return["sanCheck","intCheck"].includes(key)?value.JSONRollData:value}class SanCheckCard extends ChatCardActor{constructor(actorKey=null,sanData={},options={}){super(actorKey,void 0!==options.fastForward&&Boolean(options.fastForward)),sanData.sanReason=sanData.sanReason??"",this.sanData=sanData,this.options=options,sanData.modifier&&!isNaN(Number(sanData.modifier))&&(this.options.sanModifier=Number(sanData.modifier)),sanData.difficulty&&!isNaN(Number(sanData.difficulty))&&(this.options.sanDifficulty=Number(sanData.difficulty)),this.state={}}get isBlind(){return void 0!==this.options.isBlind?Boolean(this.options.isBlind):super.isBlind}get difficulty(){return void 0!==this.options.difficulty?this.options.difficulty:CoC7Check.difficultyLevel.regular}get modifier(){return void 0!==this.options.modifier?this.options.modifier:0}get sanLossSource(){return this.sanData.tokenKey?chatHelper.getActorFromKey(this.sanData.tokenKey):null}get involuntaryAction(){return!(!this.state.sanRolled||!this.sanCheck.isFailure&&!this.sanCheck.isFumble)}get sanLossFormula(){return this.state.sanRolled?this.sanData.sanMax&&this.sanCheck.failed?isNaN(Number(this.sanData.sanMax))?this.sanData.sanMax:Number(this.sanData.sanMax):this.sanData.sanMin&&this.sanCheck.passed?isNaN(Number(this.sanData.sanMin))?this.sanData.sanMin:Number(this.sanData.sanMin):0:null}get sanLostToReason(){return this.actor.sanLostToReason(this.sanData.sanReason)}get maxPossibleSanLoss(){return this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)}get maxSanLoss(){return new Roll(this.sanData.sanMax.toString()).evaluate({maximize:!0}).total}get sanLossReasonEncountered(){return this.actor.sanLossReasonEncountered(this.sanData.sanReason)}get firstEncounter(){return!this.actor.mythosInsanityExperienced}get isActorLoosingSan(){return!this.actor.hasTempoInsane&&(0!==this.sanLossFormula&&(!this.sanData.sanReason||0!==this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax)||(this.state.immuneToCreature=!0,!1)))}get boutDurationText(){if(this.boutDuration){if(this.boutRealTime)return`${this.boutDuration} ${game.i18n.localize("CoC7.rounds")}`;if(this.boutSummary)return`${this.boutDuration} ${game.i18n.localize("CoC7.hours")}`}return null}get youGainCthulhuMythosString(){return this.mythosGain?game.i18n.format("CoC7.YouGainedCthulhuMythos",{value:this.mythosGain}):null}async advanceState(state){switch(state){case"keepCreatureSanData":this.state.keepCreatureSanData=!0;break;case"involuntaryActionPerformed":this.state[state]=!0,this.isActorLoosingSan||(this.state.finish=!0);break;case"sanLossApplied":await this.applySanLoss();break;case"enterBoutOfMadnessRealTime":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!0,this.boutSummary=!1,this.boutResult=await this.actor.enterBoutOfMadness(!0,this.boutDuration),this.state.boutOfMadnessResolved=!0,this.state.boutOfMadnessOver=!1;break;case"enterBoutOfMadnessSummary":this.boutDuration=(await new Roll("1D10").roll({async:!0})).total,this.boutRealTime=!1,this.boutSummary=!0,this.boutResult=await this.actor.enterBoutOfMadness(!1,this.boutDuration),this.state.boutOfMadnessResolved=!0,await this.triggerInsanity();break;case"boutOfMadnessOver":await this.actor.unsetCondition(COC7.status.tempoInsane),await this.triggerInsanity();break;case"noMythosGained":this.state.cthulhuMythosAwarded=!0,this.mythosGain=0;break;case"cthulhuMythosAwarded":{let amountGained=1;this.actor.mythosInsanityExperienced||(amountGained=5,await this.actor.experienceFirstMythosInsanity()),this.state.cthulhuMythosAwarded=!0;const cthulhuMythosSkill=this.actor.cthulhuMythosSkill,oldValue=cthulhuMythosSkill.data.data.adjustments.experience||0;cthulhuMythosSkill&&await cthulhuMythosSkill.update({"data.adjustments.experience":oldValue+amountGained}),this.mythosGain=amountGained;break}}}async bypassRollSan(){this.isBypassed=!0,this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.state.sanLossRolled=!0,this.state.ignoreSanCheck=!0,this.sanLoss=this.sanLossFormula}async rollSan(){if(this.sanCheck=new CoC7Check,this.sanCheck.actor=this.actorKey,this.sanCheck.attribute="san",this.sanCheck.difficulty=this.options.sanDifficulty||CoC7Check.difficultyLevel.regular,this.sanCheck.diceModifier=this.options.sanModifier||0,await this.sanCheck._perform({forceDSN:!0}),this.state.sanRolled=!0,this.state.involuntaryActionPerformed=this.sanCheck.passed,this.isActorLoosingSan){if("number"==typeof this.sanLossFormula)this.state.sanLossRolled=!0,this.sanData.sanReason?(this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanLossFormula),this.sanLoss<this.sanLossFormula&&(this.state.limitedLossToCreature=!0)):this.sanLoss=this.sanLossFormula;else if(this.sanCheck.isFumble)this.state.sanLossRolled=!0,this.sanLoss=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);else if(this.sanData.sanReason){const min=new Roll(this.sanLossFormula).evaluate({minimize:!0}).total,max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);min>=max&&(this.state.sanLossRolled=!0,this.sanLoss=max,this.state.limitedLossToCreature=!0)}}else this.state.finish=!0,this.actor.hasTempoInsane&&(this.state.immuneAlreadyInBout=!0,this.sanCheck.passed||(this.state.finish=!1)),this.state.sanLossRolled=!0,this.state.sanLossApplied=!0,this.state.intRolled=!0,this.state.insanity=!1,this.sanLoss=0}async rollSanLoss(){this.sanLossRoll=new Roll(`${this.sanLossFormula}`),await this.sanLossRoll.roll({async:!0}),await CoC7Dice.showRollDice3d(this.sanLossRoll);const max=this.actor.maxLossToSanReason(this.sanData.sanReason,this.sanData.sanMax);this.sanLossRoll.total>max&&(this.state.limitedLossToCreature=!0),this.sanLoss=Math.min(this.sanLossRoll.total,max),this.state.sanLossRolled=!0}async applySanLoss(){if(await this.actor.looseSan(this.sanData.sanReason,this.sanLoss),this.sanLoss>0&&(this.state.actorLostSan=!0),this.state.sanLossApplied=!0,this.actor.san<=0)return this.state.intRolled=!0,this.state.boutOfMadnessOver=!0,this.state.insanity=!0,this.state.permanentlyInsane=!0,void(this.state.finish=!0);this.sanLoss<5?(this.state.intRolled=!0,this.actor.hasIndefInsane?(this.state.insanity=!0,this.state.shaken=!0,this.state.insanityTableRolled=!1,this.state.finish=!1,this.state.intRolled=!0):(this.state.insanity=!1,this.state.shaken=!0,this.state.insanityTableRolled=!0,this.state.finish=!0)):this.state.intRolled=!1,this.actor.dailySanLoss>=this.actor.dailySanLimit&&(this.state.insanity=!0,this.state.intRolled=!0,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!0,this.state.insanityTableRolled=!1,this.state.memoryRepressed=!1,this.state.finish=!1)}async rollInt(){this.intCheck=new CoC7Check,this.intCheck.actor=this.actorKey,this.intCheck.characteristic="int",this.intCheck.difficulty=this.options.intDifficulty||CoC7Check.difficultyLevel.regular,this.intCheck.diceModifier=this.options.intModifier||0,await this.intCheck._perform({forceDSN:!0}),this.state.intRolled=!0,this.intCheck.passed||this.state.alreadyInsane?(this.state.insanity=!0,this.state.temporaryInsane=!0,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!1):(this.state.insanity=!1,this.state.temporaryInsane=!1,this.state.indefinitelyInsane=!1,this.state.memoryRepressed=!0,this.state.finish=!0)}async triggerInsanity(){this.state.boutOfMadnessOver=!0,this.state.indefinitelyInsane&&await this.actor.setCondition(COC7.status.indefInsane),this.state.finish=!0}async clearSanLossReason(){await this.actor.setReasonSanLoss(this.sanData.sanReason,0),this.sanLossReasonEncountered||(this.state.keepCreatureSanData=!0)}async updateChatCard(){if(this.state.sanRolled&&(this.__inlineSanCheck=this.sanCheck.inlineCheck.outerHTML),this.sanLossRoll){const a=createInlineRoll(this.sanLossRoll);this.__inlineSanLossRoll=a.outerHTML}this.state.intRolled&&this.intCheck&&(this.__inlineIntCheck=this.intCheck.inlineCheck.outerHTML);const html=await renderTemplate(SanCheckCard.template,this),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(this,replacer));const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlCardElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static get template(){return"systems/CoC7/templates/chat/cards/san-check.html"}static checkTargets(sanData,fastForward=!1){const targets=[...game.user.targets];if(targets.length)for(const t of targets)t.actor.isToken?SanCheckCard.create(t.actor.tokenKey,sanData,{fastForward}):SanCheckCard.create(t.actor.id,sanData,{fastForward});else ui.notifications.warn(game.i18n.localize("CoC7.WarnNoTargetsSanCheck"))}static async create(...args){const chatCard=new SanCheckCard(...args);chatCard.actor.hasIndefInsane&&(chatCard.state.alreadyInsane=!0),chatCard.actor.san<=0&&(chatCard.state.intRolled=!0,chatCard.state.boutOfMadnessOver=!0,chatCard.state.insanity=!0,chatCard.state.permanentlyInsane=!0,chatCard.state.finish=!0);const html=await renderTemplate(SanCheckCard.template,chatCard),htmlCardElement=$.parseHTML(html)[0];htmlCardElement.dataset.object=escape(JSON.stringify(chatCard,replacer)),await chatCard.say(htmlCardElement.outerHTML)}static getFromMessageId(messageId){const message=game.messages.get(messageId),htmlCard=$.parseHTML(message.content)[0].querySelector(".chat-card");return SanCheckCard.getFromCard(htmlCard)}static getFromCard(card){const sanCheckCardData=JSON.parse(unescape(card.dataset.object)),sanCheckCard=new SanCheckCard;return Object.assign(sanCheckCard,sanCheckCardData),sanCheckCard.messageId||(sanCheckCard.messageId=card.closest(".message").dataset.messageId),"Object"===sanCheckCard.sanCheck?.constructor?.name&&(sanCheckCard.sanCheck=Object.assign(new CoC7Check,sanCheckCard.sanCheck)),"Object"===sanCheckCard.intCheck?.constructor?.name&&(sanCheckCard.intCheck=Object.assign(new CoC7Check,sanCheckCard.intCheck)),"Object"===sanCheckCard.sanLossRoll?.constructor?.name&&(sanCheckCard.sanLossRoll=Roll.fromData(sanCheckCard.sanLossRoll)),sanCheckCard}}class SanDataDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(":checkbox").click((()=>this._toggleInput(html)))}_toggleInput(html){html.find('*[name="customname"]').toggle()}static async create(options={}){const html=await renderTemplate("systems/CoC7/templates/apps/sandata.html",options);return new Promise((resolve=>{let formData=null;const dlg=new SanDataDialog({title:options.displayName?game.i18n.format("CoC7.SanDataSelectionWindowNamed",{name:options.displayName}):game.i18n.localize("CoC7.SanDataSelectionWindow"),content:html,buttons:{Validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#san-data-form")),resolve(formData))}},default:"Validate",close:()=>{}});dlg.render(!0)}))}}class CoC7ChatMessage{static get ROLL_TYPE_ATTRIBUTE(){return"R/AT"}static get ROLL_TYPE_CHARACTERISTIC(){return"R/CH"}static get ROLL_TYPE_COMBAT(){return"R/CO"}static get ROLL_TYPE_SKILL(){return"R/SK"}static get ROLL_TYPE_ENCOUNTER(){return"R/EC"}static get CARD_TYPE_COMBINED(){return"C/CO"}static get CARD_TYPE_GROUP(){return"C/GR"}static get CARD_TYPE_NORMAL(){return"C/NO"}static get CARD_TYPE_OPPOSED(){return"C/OP"}static get CARD_TYPE_SAN_CHECK(){return"C/SC"}static get CARD_TYPE_NONE(){return"C/NO"}static cardTypes(config){if(config.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)return null;const select={[CoC7ChatMessage.CARD_TYPE_NORMAL]:"CoC7.RegularRollCard",[CoC7ChatMessage.CARD_TYPE_COMBINED]:"CoC7.CombinedRollCard",[CoC7ChatMessage.CARD_TYPE_OPPOSED]:"CoC7.OpposedRollCard"};return config.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE&&"san"===config.attribute&&(select[CoC7ChatMessage.CARD_TYPE_SAN_CHECK]="CoC7.SanityLossEncounter"),select}static normalizeRequest(options){if(void 0!==options.event||void 0===options.cardType||void 0===options.actor||void 0===options.skillId&&void 0===options.skillName&&void 0===options.attribute&&void 0===options.characteristic&&options.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER){if(void 0===options.event||void 0===options.cardType||void 0===options.rollType)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{value:game.i18n.localize("CoC7.Roll")})),!1}else if(void 0!==options.skillId)options.actor.items.get(options.skillId)&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL);else if(void 0!==options.skillName){const skillIds=options.actor.getSkillsByName(options.skillName);skillIds.length>0&&(options.skillId=skillIds[0].id,options.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL)}else void 0!==options.attribute&&["lck","san"].includes(options.attribute)?options.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:void 0!==options.characteristic&&void 0!==options.actor.system.characteristics[options.characteristic]&&(options.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC);if(![CoC7ChatMessage.CARD_TYPE_COMBINED,CoC7ChatMessage.CARD_TYPE_GROUP,CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_OPPOSED,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(options.cardType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidCardType")})),!1;if(![CoC7ChatMessage.ROLL_TYPE_SKILL,CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,CoC7ChatMessage.ROLL_TYPE_ENCOUNTER].includes(options.rollType))return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorInvalidRollType")})),!1;const config={options:{cardType:options.cardType,shiftKey:options.fastForward??options.event?.shiftKey??options.fastForward??!1,altKey:options.event?.altKey??!1,isCtrlKey:isCtrlKey(options.event??!1),createEncounter:options.createEncounter??!1,openLinkTool:options.openLinkTool??!1,sendToChat:options.sendToChat??!1,sendToClipboard:options.sendToClipboard??!1,isCombat:options.event?.currentTarget.classList?.contains("combat")??!1,preventStandby:options.preventStandby??!1,bonusDice:0},dialogOptions:{rollType:options.rollType,cardType:options.cardType,attribute:"",chatMessage:options.chatMessage??!0,forcedCardType:options.forcedCardType??!1,hideDifficulty:options.hideDifficulty??!1}};switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:if(config.options.skillId=options.skillId??options.event?.currentTarget.closest(".item")?.dataset.skillId,config.options.itemId=options.event?.currentTarget.closest(".item")?.dataset.itemId,config.options.characteristic=options.characteristic??options.event?.currentTarget.parentElement.dataset.characteristic,config.options.attribute=options.attribute??options.event?.currentTarget.parentElement.dataset.attrib,config.dialogOptions.attribute=config.options.attribute,config.options.actorId=options.event?.currentTarget.closest("form").dataset.actorId??options.actor.id,config.options.tokenKey=options.event?.currentTarget.closest("form").dataset.tokenId??options.actor.tokenKey,config.options.weaponAltSkill=options.event?.currentTarget.classList.contains("alternativ-skill"),config.options.actor=options.actor,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&config.options.isCombat){const item=config.options.actor.items.get(config.options.itemId);if(!item)return!1;"weapon"===item.type&&(config.options.weaponName=item.name,config.dialogOptions.rollType=CoC7ChatMessage.ROLL_TYPE_COMBAT)}if(void 0===config.options.actorId||void 0===config.options.tokenKey&&void 0===config.options.actor)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.ErrorActor")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL&&void 0===config.options.skillId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Skill")})),!1;if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC){if(void 0===config.options.characteristic)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Characteristic")})),!1;if(!game.user.isGM&&!config.options.actor.system.characteristics[config.options.characteristic]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE){if(void 0===config.options.attribute)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Attribute")})),!1;if(!game.user.isGM&&!config.options.actor.system.attribs[config.options.attribute]?.value)return!1}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT){if(void 0===config.options.itemId)return ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:game.i18n.localize("CoC7.Entities.Weapon")})),!1;if(config.options.altKey)return!1}config.options.hasPlayerOwner=config.options.actor.hasPlayerOwner??!1,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC?(config.dialogOptions.disableFlatThresholdModifier=config.options.isCtrlKey,config.dialogOptions.disableFlatDiceModifier=config.options.isCtrlKey):(config.dialogOptions.disableFlatThresholdModifier=!1,config.dialogOptions.disableFlatDiceModifier=!1),config.dialogOptions.modifier=0,config.dialogOptions.difficulty=options.difficulty??CoC7Check.difficultyLevel[game.settings.get("CoC7","defaultCheckDifficulty")],config.dialogOptions.flatDiceModifier=0,config.dialogOptions.flatThresholdModifier=0}return config}static async trigger(options={}){const config=CoC7ChatMessage.normalizeRequest(options);if(!1!==config)if(config.options.isCtrlKey&&game.user.isGM&&[CoC7ChatMessage.CARD_TYPE_NORMAL,CoC7ChatMessage.CARD_TYPE_SAN_CHECK].includes(config.dialogOptions.cardType))CoC7ChatMessage.createLink(config);else{if(!(config.options.sendToChat||config.options.sendToClipboard||config.options.openLinkTool||config.options.createEncounter)||!game.user.isGM||CoC7ChatMessage.CARD_TYPE_NONE!==config.dialogOptions.cardType){if(void 0!==config.options.actor){if(void 0!==config.options.attribute){const bonusDice=config.options.actor.system?.attribs?.[config.options.attribute]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.characteristic){const bonusDice=config.options.actor.system?.characteristics?.[config.options.characteristic]?.bonusDice;bonusDice&&(config.dialogOptions.modifier=bonusDice)}else if(void 0!==config.options.itemId){const itemModifiers=Object.values(config.options.actor.system.skills).find((k=>k.foundryID===config.options.itemId));void 0!==itemModifiers.bonusDice&&(config.dialogOptions.modifier=itemModifiers.bonusDice)}config.dialogOptions.modifier=Math.min(Math.max(config.dialogOptions.modifier,-2),2)}return config.options.shiftKey||await CoC7ChatMessage.createRoll(config),CoC7ChatMessage.runRoll(config)}CoC7ChatMessage.createLink(config)}}static createLink(config){switch(config.dialogOptions.rollType){case CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE:case CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:case CoC7ChatMessage.ROLL_TYPE_COMBAT:case CoC7ChatMessage.ROLL_TYPE_SKILL:case CoC7ChatMessage.ROLL_TYPE_ENCOUNTER:{const linkData={type:"CoC7Link"};if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL){if(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.SKILL,linkData.name=config.options.actor.items.get(config.options.skillId)?.shortName,!linkData.name)return}else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC)linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.CHARACTERISTIC,linkData.name=config.options.characteristic;else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE)(config.options.altKey||config.options.createEncounter)&&"san"===config.options.attribute?linkData.check=CoC7Link.CHECK_TYPE.SANLOSS:(linkData.check=CoC7Link.CHECK_TYPE.CHECK,linkData.linkType=CoC7Link.LINK_TYPE.ATTRIBUTE,linkData.name=config.options.attribute);else if(config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_COMBAT)linkData.check=CoC7Link.CHECK_TYPE.ITEM,linkData.name=config.options.weaponName;else{if(config.dialogOptions.rollType!==CoC7ChatMessage.ROLL_TYPE_ENCOUNTER)return;linkData.check=CoC7Link.CHECK_TYPE.SANLOSS,linkData.sanMin=config.options.actor?.system?.special?.sanLoss?.checkPassed,linkData.sanMax=config.options.actor?.system?.special?.sanLoss?.checkFailled,linkData.sanReason=config.options.actor.system.infos.type?.length?config.options.actor.system.infos.type:config.options.actor.name}"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),config.options.sendToChat?CoC7Link.toChatMessage(linkData):config.options.sendToClipboard?CoC7Link.fromDropData(linkData).then((link=>{CoC7Utilities.copyToClipboard(link.link)})):CoC7ContentLinkDialog.create(linkData,{actors:[config.options.actor].filter((a=>a.owners.length)),hasModifiers:config.options.shiftKey})}}}static async createRoll(config){const usage=await RollDialog.create(config.dialogOptions);if(usage){const cardType=usage.get("cardType");cardType&&(config.dialogOptions.cardType=cardType),config.dialogOptions.modifier=Number(usage.get("bonusDice")),config.dialogOptions.difficulty=Number(usage.get("difficulty")),config.dialogOptions.flatDiceModifier=Number(usage.get("flatDiceModifier")),config.dialogOptions.flatThresholdModifier=Number(usage.get("flatThresholdModifier"))}}static async runRoll(config){switch(config.dialogOptions.cardType){case CoC7ChatMessage.CARD_TYPE_SAN_CHECK:{const sanData=await SanDataDialog.create({promptLabel:!0});if(sanData){let sanMin=sanData.get("sanMin")||0,sanMax=sanData.get("sanMax")||0;const sanReason=sanData.get("sanReason");isNaN(Number(sanMin))||(sanMin=Number(sanMin)),isNaN(Number(sanMax))||(sanMax=Number(sanMax)),SanCheckCard.create(config.options.actor.actorKey,{sanMin,sanMax,sanReason},{sanModifier:config.dialogOptions.modifier,sanDifficulty:config.dialogOptions.difficulty,fastForward:config.options.shiftKey})}}break;case CoC7ChatMessage.CARD_TYPE_NORMAL:{const check=new CoC7Check;return check.diceModifier=config.dialogOptions.modifier,check.difficulty=config.dialogOptions.difficulty,check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.flatDiceModifier=config.dialogOptions.flatDiceModifier,check.flatThresholdModifier=config.dialogOptions.flatThresholdModifier,check.standby=!config.options.preventStandby&&game.settings.get("CoC7","stanbyGMRolls")&&game.user.isGM&&config.options.hasPlayerOwner,config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_SKILL?(check.skill=config.options.skillId,await check.roll()):config.dialogOptions.rollType===CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE?await check.rollAttribute(config.options.attribute):await check.rollCharacteristic(config.options.characteristic),config.dialogOptions.chatMessage&&check.toMessage(),{result:check.modifiedResult,successLevel:check.rolledSuccessLevel,isFumble:check.isFumble,isCritical:check.isCritical,successLevels:{1:check.regularThreshold,2:check.hardThreshold,3:check.extremeThreshold},passed:check.passed}}case CoC7ChatMessage.CARD_TYPE_OPPOSED:case CoC7ChatMessage.CARD_TYPE_COMBINED:{const check=new CoC7Check;check.actor=config.options.tokenKey?config.options.tokenKey:config.options.actorId,check.characteristic=config.options.characteristic,check.attribute=config.options.attribute,check.skillId=config.options.skillId,check.rollMode=game.settings.get("core","rollMode"),check.initiator=game.user.id;let data={};config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?(data={type:OpposedCheckCard.defaultConfig.type,combat:config.options.isCombat,action:"new"},check.item=config.options.itemId,check.weaponAltSkill=config.options.weaponAltSkill,check.denyPush=!0,await check._perform()):(data={type:CombinedCheckCard.defaultConfig.type,action:"new"},check.difficulty=config.dialogOptions.difficulty),data.roll=check.JSONRollData,data._rollMode=game.settings.get("core","rollMode"),config.dialogOptions.cardType===CoC7ChatMessage.CARD_TYPE_OPPOSED?OpposedCheckCard.dispatch(data):CombinedCheckCard.dispatch(data)}}}}class CoC7ConCheck{constructor(actorId=null,difficulty=CoC7Check.difficultyLevel.regular){this.check=new CoC7Check(actorId),this.check.characteristic="con",this.check.difficulty=difficulty,this.check.denyPush=!0,this.actorId=actorId}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}get actor(){return this.actorId?chatHelper.getActorFromKey(this.actorId):null}set actorId(x){this._actorId=x,this.check.actor=x}get actorId(){return this._actorId?this._actorId:null}get tokenKey(){return this.actor.isToken?this.actor.tokenKey:null}get isSuccess(){return!!this.check&&this.check.isSuccess}get isRolled(){return!!(this.check&&this.check.dices&&this.check.dices.total)}static getFromCard(card){const conCheck=new CoC7ConCheck;chatHelper.getObjectFromElement(conCheck,card);const htmlCheck=card.querySelector(".roll-result");return CoC7Roll.getFromElement(htmlCheck,conCheck.check),conCheck.messageId=card.closest(".message").dataset.messageId,conCheck}async getCheckElement(){const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this.check),htmlElement=$.parseHTML(html)[0];return htmlElement?(htmlElement.classList.remove("chat-card","item-card","roll-card"),htmlElement):null}async toMessage(fastForward=!1){fastForward&&await this.rollCon();const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(fastForward){htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement())}const speakerData={};let speaker;this.actor?(this.token?speakerData.token=this.token:speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:htmlElement.outerHTML};["gmroll","blindroll"].includes(game.settings.get("core","rollMode"))&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async rollCon(){this.check.hideDiceResult=!0,await this.check._perform(),this.isBlind||this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),this.applied=!0}async updateChatCard(){const html=await renderTemplate("systems/CoC7/templates/chat/con-check.html",this),htmlElement=$.parseHTML(html)[0];if(htmlElement.querySelector(".roll-result").replaceWith(await this.getCheckElement()),this.isBlind||!this.isRolled||this.isSuccess||(this.stayAlive?await this.actor.setCondition(COC7.status.dead):await this.actor.setCondition(COC7.status.unconscious)),!this.messageId)return;const chatMessage=game.messages.get(this.messageId),msg=await chatMessage.update({content:htmlElement.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}}class SkillSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".select-skill").click((async event=>this._onSelectSkillClicked(event)))}async _onSelectSkillClicked(event){const li=event.currentTarget.closest(".item");this.data.data.skills[Number(li.dataset.index)].selected=!0,event.currentTarget.style.display="none",this.data.data.added||(this.data.data.added=0),this.data.data.added++;event.currentTarget.closest(".skill-selector").querySelector(".count").innerText=this.data.data.added,this.data.data.added>=this.data.data.optionsCount&&this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/skill-select.html",data);return new Promise((resolve=>{new SkillSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>{if(!data.added>=data.optionsCount)return resolve(!1);const selected=data.skills.filter((skill=>skill.selected));return resolve(selected)}},{classes:["coc7","dialog","skill-select"]}).render(!0)}))}}class PointSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event))),html.find("button").click((event=>this._onButtonClicked(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item"),itemList=li.closest(".item-list");for(const item of itemList.querySelectorAll(".selectable"))item.classList.remove("selected"),this.data.data.characteristics[item.dataset.key].selected=!1,this.data.data.characteristics[item.dataset.key].optional=!1;$(li).toggleClass("selected"),this.data.data.characteristics[li.dataset.key].selected=!0;li.closest("#skill-selection-form").querySelector(".points").innerText=this.data.data.total+this.data.data.characteristics[li.dataset.key].multiplier*this.data.data.characteristics[li.dataset.key].value;li.closest("#skill-selection-form").querySelector("button.validate").classList.remove("inactive"),this.data.data.resolved=!0}async _onButtonClicked(event){event.preventDefault(),event.currentTarget.classList.contains("inactive")||super.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/point-select.html",data);return new Promise((resolve=>{new PointSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.resolved?resolve(data):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacSelectDialog extends Dialog{activateListeners(html){super.activateListeners(html),html.find(".item-name").click((async event=>this._onSelectCharacteristic(event)))}async _onSelectCharacteristic(event){const li=event.currentTarget.closest(".item");this.data.data.selected=li.dataset.key,this.close()}static async create(data){const html=await renderTemplate("systems/CoC7/templates/apps/char-select.html",data);return new Promise((resolve=>{new CharacSelectDialog({title:data.title,content:html,data,buttons:{},close:()=>data.selected?resolve(data.selected):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class CharacRollDialog extends Dialog{constructor(data,options){super(data,options),this.rolled=data.rolled||{}}activateListeners(html){super.activateListeners(html),html.on("change","input",this._onChangeInput.bind(this)),html.on("submit","form",this._onSubmit.bind(this)),html.on("click",".roll-characteristic",this._onRollCharacteristic.bind(this)),html.on("click",".increase-characteristic",this._onIncreaseCharacteristic.bind(this)),html.on("click",".decrease-characteristic",this._onDecreaseCharacteristic.bind(this)),html.on("click",".reset-characteristic",this._onResetCharacteristic.bind(this)),html.on("click","button",this._onButton.bind(this))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;await this.rollCharacteristic(characKey)}async _onIncreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.increaseCharacteristic(characKey)}async _onDecreaseCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.decreaseCharacteristic(characKey)}async _onResetCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key;this.resetCharacteristic(characKey)}async _onButton(event){const action=event.currentTarget.dataset.action;if("roll"===action)for(const char of["str","con","siz","dex","app","int","pow","edu","luck"])await this.rollCharacteristic(char);"validate"!==action||event.currentTarget.classList.contains("inactive")||(this.checkTotal(),this.close())}async rollCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input"),formula=this.data.data.characteristics.rolls[key];if(input&&formula){if(isNaN(Number(formula))){const roll=new Roll(formula);await roll.evaluate({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:this.data.data.characteristics.list[key].label,formula})}),input.value=roll.total}else input.value=Number(formula);this.data.data.characteristics.values[key]=Number(input.value),this.rolled||(this.rolled={}),this.rolled[key]=!0}this.checkTotal()}async increaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async decreaseCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&Number(input.value)>0&&(input.value=Number(input.value)-1,this.data.data.characteristics.values[key]=Number(input.value)),this.checkTotal()}async resetCharacteristic(key){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=null,this.data.data.characteristics.values[key]=0),this.checkTotal()}async _onChangeInput(event){event.preventDefault();const input=event.currentTarget,value=Number(input.value);isNaN(value)||(this.data.data.characteristics.values[input.name]=value),this.checkTotal()}checkTotal(){this.data.data.characteristics.points.total=0;for(const[key,value]of Object.entries(this.data.data.characteristics.values))"luck"!==key&&(this.data.data.characteristics.points.total+=value);const validation=this._element[0].querySelector(".points");if(this.data.data.characteristics.points.enabled){if(Number(this.data.data.characteristics.points.total)!==Number(this.data.data.characteristics.points.value))validation.classList.add("warning");else{validation.classList.remove("warning");this._element[0].querySelector("button.validate").classList.remove("inactive"),this.data.data.validate=!0}validation.querySelector(".value").innerText=this.data.data.characteristics.points.value}if(validation.querySelector(".total").innerText=this.data.data.characteristics.points.total,this.data.data.characteristics.rolls.enabled&&this.rolled&&(this.data.data.validate=!Object.entries(this.rolled).find((el=>!el))&&9===Object.entries(this.rolled).length,this.data.data.validate)){this._element[0].querySelector("button.validate").classList.remove("inactive")}}async _onSubmit(event){event.preventDefault()}static async create(data){const rolled={};data.characteristics.points.total=0;for(const[key,value]of Object.entries(data.characteristics.values))"luck"!==key&&(data.characteristics.points.total+=value||0),!isNaN(value)&&value>0&&(rolled[key]=!0);data.characteristics.points.enabled&&Number(data.characteristics.points.total)!==Number(data.characteristics.points.value)&&(data.pointsWarning=!0);const html=await renderTemplate("systems/CoC7/templates/apps/char-roll.html",data);return new Promise((resolve=>{new CharacRollDialog({title:data.title,content:html,data,rolled,buttons:{},close:()=>data.validate?resolve(!0):resolve(!1)},{classes:["coc7","dialog","char-select"]}).render(!0)}))}}class SkillSpecSelectDialog{static async create(skills,specializationName,baseValue=null,name=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-spec-select.html",{hasSkills:skills.length>0,skills,base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:name?game.i18n.format("CoC7.SkillSelectBase",{name}):game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:specializationName}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class SkillSpecializationSelectDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","skill-name-dialog"],title:"",template:"systems/CoC7/templates/apps/skill-specialization-select.hbs",width:400,height:"auto",closeOnSubmit:!1})}get title(){return game.i18n.format("CoC7.SkillSpecSelectTitle",{specialization:this.object.specializationName})}activateListeners(html){super.activateListeners(html),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("[name=existing-skill]").change(this._onSelectChange.bind(this))}async _onSelectChange(event){this.object.selected=event.currentTarget.value,this.render(!0)}async _onClickSubmit(event){if(""===this.object.selected){const obj=$(event.currentTarget).closest("form");this.object.name=obj.find("input[name=new-skill-name]").val()??"",this.object.baseValue=obj.find("input[name=base-value]").val()??""}if(""===this.object.selected&&""===this.object.name)return!1;this.object.resolve({selected:this.object.selected,name:this.object.name,baseValue:this.object.baseValue}),this.close()}async _updateObject(event,formData){}static async create({skills=[],allowCustom=!1,fixedBaseValue=!1,specializationName="",label="",baseValue=null}={}){const select=[];for(const skill of skills)select.push({id:skill.id,name:skill.name,base:skill.system.base});return await new Promise((resolve=>{new SkillSpecializationSelectDialog({specializationName,allowCustom,fixedBaseValue,allowSelect:skills.length>0,skills:select,selected:"",name:"",label,baseValue,resolve},{}).render(!0)}))}}class SkillValueDialog{static async create(name=null,baseValue=null){const html=await renderTemplate("systems/CoC7/templates/apps/skill-value.html",{base:baseValue,name});return new Promise((resolve=>{let formData=null;const dlg=new Dialog({title:game.i18n.format("CoC7.SkillValue",{name}),content:html,buttons:{validate:{label:game.i18n.localize("CoC7.Validate"),callback:html=>(formData=new FormData(html[0].querySelector("#skill-select-form")),resolve(formData))}},default:"validate",close:()=>resolve(!1)});dlg.render(!0)}))}}class CoC7MeleeResoltion{constructor(initiatorMessage=null,targetMessage=null,messageId=null){this.initiatorMessage=initiatorMessage,this.targetMessage=targetMessage,this.messageId=messageId}async preCreateMessage(){const html=await renderTemplate(this.template,this),chatData={user:game.user.id,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const chatMessage=await ChatMessage.create(chatData);return this.messageId=chatMessage.id,chatMessage}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get target(){return this.targetMessage?CoC7MeleeTarget.getFromMessageId(this.targetMessage):null}get targetToken(){return this.target?chatHelper.getTokenFromKey(this.target.actorKey):null}get initiator(){return this.initiatorMessage?CoC7MeleeInitiator.getFromMessageId(this.initiatorMessage):null}get initiatorToken(){return this.initiator?chatHelper.getTokenFromKey(this.initiator.actorKey):null}async resolve(){if(this.target)switch(this.target.action){case"noResponse":this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.action="roll-melee-damage",this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target;break;case"dodge":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.action="roll-melee-damage",this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.DodgeSuccess",{name:this.target.name}),this.winner=this.target,this.looser=this.initiator,this.winnerImg=this.target.skill.img,this.winnerTitle=this.target.skill.name,this.action="dodge",this.rollDamage=!1);break;case"fightBack":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.weapon.img,this.winnerTitle=this.target.weapon.name,this.looser=this.initiator,this.rollDamage=!0);break;case"maneuver":this.initiator.roll.successLevel<=0&&this.target.roll.successLevel<=0?(this.resultString=game.i18n.localize("CoC7.NoWinner"),this.winner=null,this.rollDamage=!1):this.initiator.roll.successLevel>=this.target.roll.successLevel?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.winnerImg=this.initiator.weapon.img,this.winnerTitle=this.initiator.weapon.name,this.looser=this.target,this.rollDamage=!0):this.initiator.roll.successLevel<=this.target.roll.successLevel&&(this.resultString=game.i18n.format("CoC7.ManeuverSuccess",{name:this.target.name}),this.winner=this.target,this.winnerImg=this.target.skill.data.img,this.winnerTitle=this.target.skill.name,this.looser=this.initiator,this.rollDamage=!1)}else this.initiator.roll.successLevel>0?(this.resultString=game.i18n.format("CoC7.WinnerRollDamage",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!0):(this.resultString=game.i18n.format("CoC7.InitiatorMissed",{name:this.initiator.name}),this.winner=this.initiator,this.rollDamage=!1);this.winner&&(this.winner.roll.successLevel>=CoC7Check.successLevel.extreme?this.winner.roll.criticalDamage=!0:this.winner.roll.criticalDamage=!1),this.resolved=!0;const html=await renderTemplate(this.template,this);if(this.messageId){const message=game.messages.get(this.messageId),speakerData={};this.winner&&(this.winner.token&&(speakerData.token=this.winner.token.documment),this.winner.actor&&(speakerData.actor=this.winner.actor));const speaker=this.winner?ChatMessage.getSpeaker(speakerData):null,user=this.winner&&this.winner.actor.user?this.winner.actor.user:game.user;let msg;return message?(msg=speaker?await message.update({user:user.id,speaker,content:html}):await message.update({user:user.id,content:html}),await ui.chat.updateMessage(msg,!1),msg):void ui.notifications.warn("Resolition card missing, was deleted ?")}}get template(){return"systems/CoC7/templates/chat/combat/melee-resolution.html"}}class CoC7MeleeTarget extends ChatCardActor{constructor(actorKey,parentMessageId=null,fastForward=!1){super(actorKey,fastForward),this.actorKey=actorKey,this.initiatorKey=null,this.parentMessageId=parentMessageId,this.fastForward=fastForward,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.skillId=null,this.itemId=null,this.dodging=!1,this.notResponding=!1,this.fightingBack=!1,this.maneuvering=!1}get actionSelected(){return this.dodging||this.notResponding||this.fightingBack||this.maneuvering}get action(){return this.dodging?"dodge":this.notResponding?"noResponse":this.fightingBack?"fightBack":this.maneuvering?"maneuver":null}get weapon(){return this.actor.items.get(this.itemId)}get skill(){return this.actor.items.get(this.skillId)}set initiatorKey(x){this._initiatorKey=x,this.targetKey=x}get initiatorKey(){return this._initiatorKey||(!this._initiator&&this.parentMessageId&&(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator&&(this._initiatorKey=this._initiator.actorKey)),this._initiatorKey?this._initiatorKey:(ui.notifications.error(`No initiator found for target : ${this.actor.name}`),null)}get initiator(){if(!this.initiatorKey){if(!this.parentMessageId)return null;this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId),this.initiatorKey=this._initiator.actorKey}return chatHelper.getActorFromKey(this.initiatorKey)}get meleeInitiator(){return this._initiator||(this._initiator=CoC7MeleeInitiator.getFromMessageId(this.parentMessageId)),this._initiator}get template(){return"systems/CoC7/templates/chat/combat/melee-target.html"}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],target=CoC7MeleeTarget.getFromCard(card,messageId);return target.messageId=messageId,target}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.target"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const target=CoC7MeleeTarget.getFromCard(card);target.toggleFlag(flag),target.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async createChatCard(){const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData);this.actor.isToken&&(speaker.alias=this.actor.token.name);let user=game.user;if(void 0===this.actor.user){let owners=[];const gms=game.users.filter((a=>a.isGM)).map((a=>a.id));for(const[k,v]of Object.entries(this.actor.ownership))if(v===CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER){if("default"===k){owners=game.users.map((a=>a.id));break}gms.includes(k)||owners.push(k)}let content="";switch(owners.length){case 0:break;case 1:void 0!==game.users.get(owners[0])&&(user=game.users.get(owners[0]));break;default:content="<p>"+game.i18n.localize("CoC7.MessageSelectSingleUserForTarget"),content+='<form id="selectform"><select name="user">';for(const k of owners)content=content+'<option value="'+k+'">'+game.users.get(k).name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectSingleUserForTarget"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(user=game.users.get(value))}})}}else void 0!==this.actor.user&&(user=this.actor.user);const chatData={user:user.id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;const message=await ChatMessage.create(chatData);return this.messageId=message.id,message}async updateChatCard(){const message=game.messages.get(this.messageId);if(!game.user.isGM&&message.user.id!==game.user.id)return void ui.notifications.info(game.i18n.localize("CoC7.UnableToInteractWithChatCard"));const html=await renderTemplate(this.template,this),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}async getUpdatedChatCard(){renderTemplate(this.template,this).then((html=>html))}static async updateSelected(card,event){const target=CoC7MeleeTarget.getFromCard(card);switch(event.currentTarget.dataset.action){case"dodge":target.dodging=!0,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null;break;case"noResponse":target.dodging=!1,target.notResponding=!0,target.fightingBack=!1,target.maneuvering=!1,target.skillId=null,target.itemId=null;break;case"fightBack":target.dodging=!1,target.notResponding=!1,target.fightingBack=!0,target.maneuvering=!1,target.skillId=event.currentTarget.dataset.skillId,target.itemId=event.currentTarget.dataset.weaponId;break;case"maneuver":target.dodging=!1,target.notResponding=!1,target.fightingBack=!1,target.maneuvering=!0,target.skillId=event.currentTarget.dataset.skillId,target.itemId=null}return target.updateChatCard(),target}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;return check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="target",check.action=this.action,check.actor=this.actor,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),check}async publishNoReponseResult(){this.rolled=!0,this.resolved=!0,this.notResponding=!0;const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id,await this.updateChatCard()}static getFromCard(card,messageId=null){const actorKey=card.dataset.actorKey,parentMessageId=card.dataset.parentMessageId,fastForward="true"===card.dataset.fastForward,target=new CoC7MeleeTarget(actorKey,parentMessageId,fastForward);return target.roll=CoC7Roll.getFromCard(card),chatHelper.getObjectFromElement(target,card),card.closest(".message")?target.messageId=card.closest(".message").dataset.messageId:target.messageId=messageId,target}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(`${this.actor.name} didn't have enough luck to pass the check`),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total");switch(newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoC7RangeInitiator{constructor(actorKey=null,itemId=null,fastForward=!1){this.actorKey=actorKey,this.itemId=itemId,this.fastForward=fastForward,this.resolved=!1,this.cover=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1,this.singleShot=!1,this.multipleShots=!1,this.burst=!1,this.fullAuto=!1,this.tokenKey=null,this.aimed=!1,this.totalBulletsFired=0,this._targets=[];for(const t of[...game.user.targets]){const target=new CoC7RangeTarget(`${t.scene.id}.${t.id}`);target.token=t,this._targets.push(target)}if(this._targets.length)this._targets[0].active=!0;else{const target=new CoC7RangeTarget;target.active=!0,this._targets.push(target)}if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);if(this.token=chatHelper.getTokenFromKey(actorKey),this.token&&(this.tokenKey=actor.tokenKey),itemId){actor.items.get(itemId)&&(this.weapon.singleShot?this.singleShot=!0:this.weapon.system.properties.auto&&(this.fullAuto=!0))}}if(this.tokenKey)for(const t of this._targets)if(t.token&&this.token){t.distance=chatHelper.getDistance(t.token,this.token),t.roundedDistance=Math.round(100*t.distance.value)/100,t.distanceUnit=t.distance.unit;const distInYd=Math.round(100*chatHelper.toYards(t.distance))/100;if(this.actor){t.pointBlankRange=!1;distInYd<=this.actor.system.characteristics.dex.value/15&&(t.pointBlankRange=!0)}this.weapon&&this.weapon.baseRange&&(t.baseRange=!1,t.longRange=!1,t.extremeRange=!1,t.outOfRange=!1,this.weapon.system.properties.shotgun?(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=this.weapon.longRange&&(t.longRange=!0),distInYd>this.weapon.longRange&&distInYd<=this.weapon.extremeRange&&(t.extremeRange=!0),distInYd>this.weapon.extremeRange&&(t.outOfRange=!0)):(distInYd<=this.weapon.baseRange&&(t.baseRange=!0),distInYd>this.weapon.baseRange&&distInYd<=2*this.weapon.baseRange&&(t.longRange=!0),distInYd>2*this.weapon.baseRange&&distInYd<=4*this.weapon.baseRange&&(t.extremeRange=!0),distInYd>4*this.weapon.baseRange&&(t.outOfRange=!0)),t.baseRange||t.longRange||t.extremeRange||t.outOfRange||(t.baseRange=!0))}else t.baseRange=!0}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}get actorImg(){const img=chatHelper.getActorImgFromKey(this.actorKey);return img||"../icons/svg/mystery-man-black.svg"}get actor(){return chatHelper.getActorFromKey(this.actorKey)}get item(){return this.actor.items.get(this.itemId)}get weapon(){return this.item}get targets(){return this._targets||(this._targets=[]),this._targets}get target(){return this.targets&&this.targets.length?this.targets.pop():null}get skills(){return this.actor.getWeaponSkills(this.itemId)}get mainWeaponSkill(){return this.actor.items.get(this.weapon.system.skill.main.id)}get autoWeaponSkill(){return this.weapon.system.skill.alternativ.id?this.actor.items.get(this.weapon.system.skill.alternativ.id):this.mainWeaponSkill}get autoFire(){return this.burst||this.fullAuto}get multiTarget(){return this.fullAuto||this.multipleShots}get aiming(){return void 0===this._aiming&&(this._aiming=this.actor.getActorFlag("aiming")),this._aiming}get activeTarget(){return this._targets.length?this._targets.find((t=>t.active)):null}get shots(){return void 0===this._shots&&(this._shots=[]),this._shots}get currentShotRank(){return this.shots.length+1}get activeTargetShotDifficulty(){return this.shotDifficulty()}set aiming(b){this._aiming=b}get didAnyShotHit(){let anyHit=!1;for(const r of this.rolls)anyHit=anyHit||r.isSuccess;return anyHit}get successfulHits(){const hits=[];for(let index=0;index<this.rolls.length;index++)if(this.rolls[index].isSuccess){const hit={roll:this.rolls[index],shot:this.shots[index]};hits.push(hit)}return 0!==hits.length?hits:null}get shotFired(){return this.shots?this.shots.length:0}get totalAmmo(){return this.weapon.getBulletLeft()}get maxShots(){return this.fullAuto?"":this.weapon.system.usesPerRound.max?parseInt(this.weapon.system.usesPerRound.max):1}get ignoreAmmo(){return game.settings.get("CoC7","disregardAmmo")}get ignoreUsesPerRound(){return game.settings.get("CoC7","disregardUsePerRound")}get outOfAmmo(){return!this.ignoreAmmo&&this.totalBulletsFired>=this.weapon.getBulletLeft()}get outOfShots(){return!this.ignoreUsesPerRound&&(!!this.shots&&this.shots.length>=this.maxShots)}get volleySize(){if(!this.weapon.system.properties.auto)return 1;if(this._volleySize)return this._volleySize;const size=Math.floor(this.autoWeaponSkill.value/10);return size<3?3:size}set volleySize(x){x>=Math.floor(this.autoWeaponSkill.value/10)?this._volleySize=Math.floor(this.autoWeaponSkill.value/10):x<=3&&(this._volleySize=3),this._volleySize=parseInt(x)}get isVolleyMinSize(){return 3===this.volleySize}get isVolleyMaxSize(){return(Math.floor(this.autoWeaponSkill.value/10)<3?3:Math.floor(this.autoWeaponSkill.value/10))===this.volleySize}getTargetFromKey(key){return this._targets.find((t=>key===t.actorKey))}calcTargetsDifficulty(){for(const t of this.targets)t.shotDifficulty=this.shotDifficulty(t)}shotDifficulty(t=null){const target=t||this.activeTarget;let damage=this.weapon.system.range.normal.damage;this.weapon.system.properties.shotgun&&(t.longRange&&(damage=this.weapon.system.range.long.damage),t.extremeRange&&(damage=this.weapon.system.range.extreme.damage));let difficulty,modifier=target.modifier;difficulty=this.weapon.system.properties.shotgun?1:target.difficulty;let difficultyName="";if(this.aiming&&1===this.currentShotRank&&modifier++,this.advantage&&modifier++,this.disadvantage&&modifier--,this.reload&&modifier--,this.multipleShots&&!this.fullAuto&&modifier--,this.fullAuto&&(modifier-=this.currentShotRank-1),modifier<-2){difficulty+=Math.abs(modifier+2),difficulty>CoC7Check.difficultyLevel.critical&&(difficulty=CoC7Check.difficultyLevel.impossible),modifier=-2}return CoC7Check.difficultyLevel.regular===difficulty&&(difficultyName="Regular"),CoC7Check.difficultyLevel.hard===difficulty&&(difficultyName="Hard"),CoC7Check.difficultyLevel.extreme===difficulty&&(difficultyName="Extreme"),CoC7Check.difficultyLevel.critical===difficulty&&(difficultyName="Critical"),CoC7Check.difficultyLevel.impossible===difficulty&&(difficultyName="Impossible"),{level:difficulty,name:difficultyName,modifier,damage,impossible:difficulty===CoC7Check.difficultyLevel.impossible}}addShotAtCurrentTarget(){this.calcTargetsDifficulty();const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:1,transitBullets:0,bulletsShotTransit:1,transit:!1};let bulletLeft=this.totalAmmo-this.totalBulletsFired;if(this.fullAuto){if(this.currentShotRank>1){const previousShot=this.shots[this.currentShotRank-2];if(previousShot.actorKey!==this.activeTarget.actorKey){const distance=chatHelper.getDistance(chatHelper.getTokenFromKey(previousShot.actorKey),chatHelper.getTokenFromKey(this.activeTarget.actorKey));shot.transitBullets=Math.floor(chatHelper.toYards(distance)),shot.transitBullets>=bulletLeft&&!this.ignoreAmmo&&(shot.transitBullets=bulletLeft,bulletLeft=0),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.transitBullets,shot.transit=!0}}shot.bulletsShot=this.volleySize,shot.bulletsShot<=3&&(shot.bulletsShot=3),shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0),shot.bulletsShotTransit=shot.bulletsShot+shot.transitBullets}this.burst&&(shot.bulletsShot=parseInt(this.weapon.system.usesPerRound.burst)?parseInt(this.weapon.system.usesPerRound.burst):1,shot.bulletsShot>=bulletLeft&&!this.ignoreAmmo&&(shot.bulletsShot=bulletLeft,bulletLeft=0)),this.totalBulletsFired=parseInt(this.totalBulletsFired)+shot.bulletsShot,this.aiming&&(this.aiming=!1,this.aimed=!0),this.shots.push(shot)}get template(){return"systems/CoC7/templates/chat/combat/range-initiator.html"}async createChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),speakerData={},token=chatHelper.getTokenFromKey(this.actorKey);token?speakerData.token=token.document:speakerData.actor=this.actor;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html},rollMode=game.settings.get("core","rollMode");["gmroll","blindroll"].includes(rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){this.calcTargetsDifficulty();const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;"singleShot"===flag||"multipleShots"===flag||"fullAuto"===flag?(this.singleShot=!1,this.multipleShots=!1,this.fullAuto=!1,"fullAuto"===flag&&(this.burst=!1),this[flag]=!0):"burst"===flag?(this.fullAuto=!1,this.singleShot||this.multipleShots||(this.singleShot=!0),this.burst=!this.burst):this[flag]=!this[flag]}async resolveCard(){if(this.rolls=[],this.multiTarget){let weaponMalfunction=!1,index=0;for(;!weaponMalfunction&&this.shots.length>index;){const roll=await this.shootAtTarget(this.shots[index]);roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll),await this.weapon.shootBullets(parseInt(this.shots[index].bulletsShot)+parseInt(this.shots[index].transitBullets)),roll.hasMalfunction&&(roll.isSuccess=!1,weaponMalfunction=!0),index++,this.rolls.push(roll)}}else{const roll=await this.shootAtTarget();roll.dice?.roll&&await CoC7Dice.showRollDice3d(roll.dice.roll);let bulletFired=this.burst?parseInt(this.weapon.system.usesPerRound.burst):1;bulletFired>=this.totalAmmo&&(bulletFired=this.totalAmmo);const shot={target:this.activeTarget,extremeRange:this.activeTarget.extremeRange,actorKey:this.activeTarget.actorKey,actorName:this.activeTarget.name,difficulty:this.activeTarget.shotDifficulty.level,modifier:this.activeTarget.shotDifficulty.modifier,damage:this.activeTarget.shotDifficulty.damage,bulletsShot:bulletFired,transitBullets:0,transit:!1};await this.weapon.shootBullets(bulletFired),roll.hasMalfunction&&(roll.isSuccess=!1),this.shots.push(shot),this.rolls.push(roll)}this.resolved=!0,this.rolled=!0,await this.updateChatCard()}async shootAtTarget(shot=null){const target=shot?this.getTargetFromKey(shot.actorKey):this.activeTarget,check=new CoC7Check;return check.actorKey=this.actorKey,check.actor=this.actorKey,check.item=this.itemId,check.isBlind=!1,check.isUnkonwn=!1,this.autoFire?check.skill=this.autoWeaponSkill:check.skill=this.mainWeaponSkill,this.multiTarget?(check.difficulty=shot.difficulty,check.diceModifier=shot.modifier):(this.calcTargetsDifficulty(),this.totalBulletsFired=parseInt(this.totalBulletsFired)+1,this.aiming&&(this.aiming=!1,this.aimed=!0),check.difficulty=this.activeTarget.shotDifficulty.level,check.diceModifier=this.activeTarget.shotDifficulty.modifier),check.details=`${game.i18n.localize("CoC7.Target")}: ${target.name}`,check.targetKey=target.actorKey,await check.roll(),check}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7RangeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}changeVolleySize(x){this.volleySize=this.volleySize+x,this.updateChatCard()}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".range.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7RangeInitiator.getFromCard(card);if(event.currentTarget.classList.contains("target-flag")){const target=event.currentTarget.closest(".target"),key=parseInt(target.dataset.targetKey);initiator.targets[key].toggleFlag(camelFlag)}else initiator.toggleFlag(camelFlag);initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}passRoll(rollIndex){const roll=this.rolls[rollIndex],luckAmount=parseInt(roll.luckNeeded);this.actor.spendLuck(luckAmount)?(roll.successLevel=roll.difficulty,roll.isSuccess=!0,roll.luckSpent=!0,this.updateChatCard()):ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`)}upgradeRoll(rollIndex,upgradeindex){const roll=this.rolls[rollIndex],increasedSuccess=roll.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(`${this.actor.name} does not have enough luck to pass the check`);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel);roll.successLevel=newSuccessLevel,roll.difficulty<=newSuccessLevel&&(roll.isSuccess=!0),roll.luckSpent=!0,this.updateChatCard()}static getFromCard(card,messageId=null){const rangeInitiator=new CoC7RangeInitiator;rangeInitiator._targets=[],messageId?rangeInitiator.messageId=messageId:card.closest(".message")&&(rangeInitiator.messageId=card.closest(".message").dataset.messageId),chatHelper.getObjectFromElement(rangeInitiator,card);const cardTargets=card.querySelectorAll(".target");for(const t of cardTargets){const target=CoC7RangeTarget.getFromElement(t);rangeInitiator.targets.push(target)}const cardShots=card.querySelectorAll(".shot");if(cardShots)for(const s of cardShots){const shot={};chatHelper.getObjectFromElement(shot,s),rangeInitiator.shots.push(shot)}rangeInitiator.rolls=[];const rolls=card.querySelectorAll(".roll-result");for(const r of rolls){const roll=CoC7Roll.getFromElement(r);rangeInitiator.rolls.push(roll)}rangeInitiator.damage=[];const damageRolls=card.querySelectorAll(".damage-results");for(const dr of damageRolls){const damageRoll=CoC7Damage.getFromElement(dr);rangeInitiator.damage.push(damageRoll)}return rangeInitiator}async rollDamage(){this.damage=[];const hits=this.successfulHits;for(let i=0;i<hits.length;i++){const h=hits[i],volleySize=parseInt(h.shot.bulletsShot),damageRolls=[];if(volleySize>0){let damageFormula=String(h.shot.damage);damageFormula&&""!==damageFormula||(damageFormula="0");const damageDie=CoC7Damage.getMainDie(damageFormula),maxDamage=new Roll(damageFormula).evaluate({maximize:!0}).total,criticalDamageFormula=this.weapon.impale?`${damageFormula} + ${maxDamage}`:`${maxDamage}`,criticalDamageDie=CoC7Damage.getMainDie(criticalDamageFormula);let impalingShots=0,successfulShots=0,critical=!1;(this.fullAuto||this.burst)&&(successfulShots=Math.floor(volleySize/2)),0===successfulShots&&(successfulShots=1),h.roll.successLevel>=CoC7Check.difficultyLevel.extreme&&(impalingShots=successfulShots,successfulShots=volleySize-impalingShots,critical=!0,CoC7Check.difficultyLevel.critical!==h.roll.successLevel&&(CoC7Check.difficultyLevel.extreme<=h.roll.difficulty||h.shot.extremeRange)&&(successfulShots=volleySize,impalingShots=0,critical=!1));let total=0;for(let index=0;index<successfulShots;index++){const roll=new Roll(damageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:damageFormula,total:roll.total,die:damageDie,critical:!1}),total+=roll.total}for(let index=0;index<impalingShots;index++){const roll=new Roll(criticalDamageFormula);await roll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(roll),damageRolls.push({formula:criticalDamageFormula,total:roll.total,die:criticalDamageDie,critical:!0}),total+=roll.total}let targetName="dummy",target=chatHelper.getTokenFromKey(h.roll.targetKey);target||(target=chatHelper.getActorFromKey(h.roll.targetKey)),target&&(targetName=target.name),this.damage.push({targetKey:h.roll.targetKey,targetName,rolls:damageRolls,total,critical,dealt:!1,resultString:game.i18n.format("CoC7.rangeCombatDamage",{name:targetName,total})})}}this.damageRolled=0!==this.damage.length,this.updateChatCard()}async dealDamage(){for(let dIndex=0;dIndex<this.damage.length;dIndex++){const actor=chatHelper.getActorFromKey(this.damage[dIndex].targetKey);if(null===actor)ui.notifications.error(game.i18n.localize("CoC7.NoTargetToDamage"));else{this.damage[dIndex].totalTaken=0,this.damage[dIndex].totalAbsorbed=0;for(let rIndex=0;rIndex<this.damage[dIndex].rolls.length;rIndex++){const dealtAmount=await actor.dealDamage(this.damage[dIndex].rolls[rIndex].total);this.damage[dIndex].totalTaken+=dealtAmount,this.damage[dIndex].rolls[rIndex].taken=dealtAmount,this.damage[dIndex].rolls[rIndex].absorbed=this.damage[dIndex].rolls[rIndex].total-dealtAmount,this.damage[dIndex].totalAbsorbed+=this.damage[dIndex].rolls[rIndex].total-dealtAmount}this.damage[dIndex].dealt=!0,this.damage[dIndex].resultString=game.i18n.format("CoC7.rangeCombatDamageArmor",{name:this.damage[dIndex].targetName,total:this.damage[dIndex].totalTaken,armor:this.damage[dIndex].totalAbsorbed})}}this.damageDealt=!0,this.updateChatCard()}}class CoC7RangeTarget{constructor(actorKey=null){this.actorKey=actorKey,this.cover=!1,this.pointBlankRange=!1,this.baseRange=!0,this.longRange=!1,this.extremeRange=!1,this.inMelee=!1}get big(){return void 0===this._big&&(this.actor&&this.actor.build?this._big=this.actor.build>=4:this._big=!1),this._big}set big(b){this._big=b}get small(){return void 0===this._small&&(this.actor&&this.actor.build?this._small=this.actor.build<=-2:this._small=!1),this._small}set small(b){this._small=b}get normal(){return!this.big&&!this.small}set normal(b){this._big=!1,this._small=!1}get isFast(){return!(!this.actor||!this.actor.mov)&&this.actor.mov>=8}get fast(){return void 0===this._fast&&(this._fast=!1),this._fast}set fast(b){this._fast=b}get actor(){return this.actorKey&&!this._actor&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this._actor}get name(){return this.token?this.token.name:this.actor?this.actor.name:"Dummy"}get img(){return this.token&&this.token.document?.texture.src?this.token.document?.texture.src:this.actor?this.actor.data.img:"../icons/svg/mystery-man-black.svg"}get token(){return!this._token&&this.actorKey&&(this._token=chatHelper.getTokenFromKey(this.actorKey)),this._token}get sizeText(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTargetTitle"):this.small?game.i18n.localize("CoC7.rangeCombatCard.SmallTargetTitle"):game.i18n.localize("CoC7.rangeCombatCard.NormalTargetTitle")}get sizeLabel(){return this.big?game.i18n.localize("CoC7.rangeCombatCard.BigTarget"):this.small?game.i18n.localize("CoC7.combatCard.SmallTarget"):game.i18n.localize("CoC7.rangeCombatCard.NormalTarget")}get difficulty(){return this.baseRange||this.pointBlankRange?CoC7Check.difficultyLevel.regular:this.longRange?CoC7Check.difficultyLevel.hard:this.extremeRange?CoC7Check.difficultyLevel.extreme:CoC7Check.difficultyLevel.impossible}get modifier(){let modifier=0;return this.cover&&modifier--,this.pointBlankRange&&modifier++,this.fast&&modifier--,this.small&&modifier--,this.big&&modifier++,this.inMelee&&modifier--,this.surprised&&modifier++,modifier}set token(t){this._token=t}static getFromElement(element){const target=new CoC7RangeTarget;return chatHelper.getObjectFromElement(target,element),target}static changeDisplayedTarget(event){if(!event.currentTarget.classList.contains("target-selector"))return null;return event.currentTarget.closest(".targets").querySelectorAll(".target")}attachToElement(element){chatHelper.attachObjectToElement(this,element)}toggleFlag(flag){"baseRange"===flag||"longRange"===flag||"extremeRange"===flag||"pointBlankRange"===flag?(this.pointBlankRange=!1,this.baseRange=!1,this.longRange=!1,this.extremeRange=!1,this.outOfRange=!1,this[flag]=!0):"size"===flag?this.small?(this.small=!1,this.big=!0):this.big?(this.small=!1,this.big=!1):this.small=!0:this[flag]=!this[flag],"fast"===flag&&this.fast&&!this.isFast&&ui.notifications.warn(game.i18n.format("CoC7.WarnFastTargetWithWrongMOV",{mov:this.actor.mov}))}}const CHAT_COC7_MESSAGE_FAKEROLL='<div class="dice-roll"><div class="dice-result"><div class="dice-formula">???</div><h4 class="dice-total">?</h4></div></div>';class CoC7Chat{static renderChatMessageHook(chatMessage,html){chatMessage.getFlag("CoC7","GMSelfRoll")&&!game.user.isGM&&(html.find(".whisper-to").remove(),html.find(".flavor-text").replaceWith(`<span class="flavor-text">${game.i18n.localize("CoC7.RollSecretDice")}</span>`),html.find(".message-content").replaceWith(`<div class="message-content">${CHAT_COC7_MESSAGE_FAKEROLL}</div>`)),chatMessage.getFlag("CoC7","removeWisperTargets")&&!game.user.isGM&&html.find(".whisper-to").remove(),chatMessage.getFlag("CoC7","fakeRoll")&&game.user.isGM&&(html.find(".flavor-text").replaceWith(game.i18n.localize("CoC7.KeeperSentDecoy")),html.find(".message-content").remove())}static fakeRollMessage(){const chatData={user:game.user.id,flavor:game.i18n.localize("CoC7.RollSecretDice"),whisper:game.users.players,type:CONST.CHAT_MESSAGE_TYPES.WHISPER,flags:{CoC7:{GMSelfRoll:!1,removeWisperTargets:!0,fakeRoll:!0}},content:CHAT_COC7_MESSAGE_FAKEROLL};ChatMessage.create(chatData)}static ready(){game.CoC7="init"}static async chatListeners(app,html){html.on("click",".card-buttons button",CoC7Chat._onChatCardAction.bind(this)),html.on("click",".card-title",CoC7Chat._onChatCardToggleContent.bind(this)),html.on("click",".radio-switch",CoC7Chat._onChatCardRadioSwitch.bind(this)),html.on("click",".panel-switch",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".simple-flag",CoC7Chat._onChatCardToggleSwitch.bind(this)),html.on("click",".volley-size",CoC7Chat._onChatCardVolleySize.bind(this)),html.on("click",".dropdown-element",CoC7Chat._onDropDownElementSelected.bind(this)),html.on("click",".simple-toggle",CoC7Chat._onToggleSelected.bind(this)),html.on("click",".target-selector",CoC7Chat._onTargetSelect.bind(this)),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),CoC7Link.bindEventsHandler(html),html.on("click","coc7-inline-result",CoC7Chat._onInline.bind(this)),OpposedCheckCard.bindListerners(html),CombinedCheckCard.bindListerners(html)}static _onOpenActor(event){event.preventDefault();const actorKey=event.currentTarget.dataset.actorKey;if(actorKey){const actor=chatHelper.getActorFromKey(actorKey);actor.isOwner&&actor.sheet.render(!0)}}static async onUpdateChatMessage(chatMessage){if(ui.chat.scrollBottom(),game.user.isGM&&0===chatMessage.type){const card=$(chatMessage.content)[0];if(card.classList.contains("melee")&&"true"===card.dataset.resolved){if(card.classList.contains("initiator"))if(card.dataset.targetCard){const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id),target=CoC7MeleeTarget.getFromMessageId(initiator.targetCard);if(target.resolved){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,target.messageId,target.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}else{const initiator=CoC7MeleeInitiator.getFromMessageId(chatMessage.id);if(initiator.resolutionCard){const resolutionCard=new CoC7MeleeResoltion(chatMessage.id,null,initiator.resolutionCard);await resolutionCard.resolve(),initiator.checkRevealed||await initiator.revealCheck()}}if(card.classList.contains("target")){const target=CoC7MeleeTarget.getFromMessageId(chatMessage.id),resolutionCard=new CoC7MeleeResoltion(target.parentMessageId,chatMessage.id,target.resolutionCard);await resolutionCard.resolve(),target.meleeInitiator.checkRevealed||await target.meleeInitiator.revealCheck()}}}}static async renderMessageHook(message,html){if(ui.chat.scrollBottom(),InteractiveChatCard.bindListeners(html),message.getFlag("CoC7","checkRevealed")&&(html.find(".dice-roll").removeClass("gm-visible-only"),html[0].dataset.checkRevealed=!0),html.find(".dropbtn").click((event=>event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show"))),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),game.user.isGM){const card=html[0].querySelector(".coc7.chat-card");if(card&&card.classList.contains("roll-card")&&"true"!==card.dataset.processed&&card.dataset.refMessageId){const roll=CoC7Roll.getFromElement(card);"target"===card.dataset.side&&(roll.defendantId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),"initiator"===card.dataset.side&&(roll.initiatorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId),card.dataset.processed="true",CoC7Chat.updateCombatCardTarget(roll)}}const userOnly=html.find(".target-only");for(const element of userOnly)if(!game.user.isGM){element.style.display="none";const actorId=element.getAttribute("data-actor-id");actorId&&game.actors.get(actorId).isOwner&&(element.style.display="block")}const gmOnly=html.find(".gm-only");for(const zone of gmOnly)game.user.isGM||(zone.style.display="none");const userVisibleOnly=html.find(".user-visible-only");for(const elem of userVisibleOnly)game.user.isGM&&(elem.style.display="none");const gmVisibleOnly=html.find(".gm-visible-only");for(const elem of gmVisibleOnly)game.user.isGM||game.user.isTrusted&&game.settings.get("CoC7","trustedCanSeeChatCard")||(elem.style.display="none");const ownerVisibleOnly=html.find(".owner-visible-only");for(const zone of ownerVisibleOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||game.user.isGM)&&(zone.style.display="none")}if(!game.user.isGM){const ownerOnly=html.find(".owner-only");for(const zone of ownerOnly){let actor=CoC7Chat._getActorFromKey(zone.dataset?.actorKey||zone.dataset?.actorId);actor||(actor=CoC7Chat._getChatCardActor(zone.closest(".chat-card"))),actor||(actor=CoC7Chat._getActorFromKey(zone.parentElement.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-actor-key]")?.dataset.actorKey)),actor||(actor=CoC7Chat._getActorFromKey(zone.closest("[data-token-key]")?.dataset.actorKey)),(actor&&!actor.isOwner||!actor&&!game.user.isGM)&&(zone.style.display="none")}const gmSelectOnly=html.find(".gm-select-only");if(!game.user.isTrusted||!game.settings.get("CoC7","trustedCanModfyChatCard"))for(const select of gmSelectOnly)select.classList.add("inactive"),select.classList.remove("simple-flag")}}static get actionTypeString(){return{fightBack:"CoC7.fightBack",maneuver:"CoC7.maneuver",dodging:"CoC7.dodge"}}static _onTargetSelect(event){const index=parseInt(event.currentTarget.dataset.key),targetsSelector=event.currentTarget.closest(".targets-selector");for(const i of targetsSelector.querySelectorAll("img"))i.style.border="none";targetsSelector.querySelector(`[data-key="${index}"]`).querySelector("img").style.border="1px solid #000";const targets=event.currentTarget.closest(".targets");for(const t of targets.querySelectorAll(".target"))t.style.display="none",t.dataset.active="false";const targetToDisplay=targets.querySelector(`[data-target-key="${index}"]`);targetToDisplay.style.display="block",targetToDisplay.dataset.active="true"}static _onDropDownElementSelected(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.closest(".toggle-switch").classList.add("switched-on"),event.currentTarget.closest(".dropdown-content").classList.toggle("show");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");switch(button.dataset.action="defending",button.dataset.actionType=event.currentTarget.dataset.action,button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.dataset.itemId=event.currentTarget.dataset.weaponId,button.dataset.itemName=event.currentTarget.dataset.weaponName,event.currentTarget.dataset.action){case"maneuver":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`;break;case"fightBack":button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.weaponName} (${event.currentTarget.dataset.skillValue}%)`}}static async _onInline(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("inline-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _onToggleSelected(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("target"))return void CoC7MeleeTarget.updateSelected(card,event);if(""===event.currentTarget.dataset.skillId)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorNoDodgeSkill"));const dropDownBoxes=event.currentTarget.closest(".response-selection").querySelectorAll(".toggle-switch");for(const dpdnBox of dropDownBoxes)dpdnBox.classList.remove("switched-on");event.currentTarget.classList.add("switched-on");const selectedBox=event.currentTarget.closest(".defender-action-select").querySelector(".selected-action");selectedBox.style.display="block";const button=selectedBox.querySelector("button");button.dataset.action="defending",button.dataset.actionType="dodging",button.dataset.defenderChoice=event.currentTarget.dataset.action,button.dataset.skillId=event.currentTarget.dataset.skillId,button.dataset.skillValue=event.currentTarget.dataset.skillValue,button.dataset.skillName=event.currentTarget.dataset.skillName,button.innerText=`${game.i18n.localize(COC7.combatCards[event.currentTarget.dataset.action])} : ${event.currentTarget.dataset.skillName} (${event.currentTarget.dataset.skillValue}%)`}static _onChatCardRadioSwitch(event){event.preventDefault();const optionList=event.currentTarget.parentElement.getElementsByClassName("radio-switch");let index;for(index=0;index<optionList.length;index++){const element=optionList[index];element.dataset.property===event.currentTarget.dataset.property?element.classList.add("switched-on"):element.classList.remove("switched-on")}event.currentTarget.parentElement.dataset.selected=event.currentTarget.dataset.property}static async _onChatCardVolleySize(event){const card=event.currentTarget.closest(".chat-card");if(card.classList.contains("range")&&card.classList.contains("initiator")){const rangeCard=CoC7RangeInitiator.getFromCard(card);event.currentTarget.classList.contains("increase")?rangeCard.changeVolleySize(1):event.currentTarget.classList.contains("decrease")&&rangeCard.changeVolleySize(-1)}}static async _onChatCardToggleSwitch(event){event.preventDefault();const card=event.currentTarget.closest(".chat-card");card.classList.contains("melee")&&(card.classList.contains("initiator")&&CoC7MeleeInitiator.updateCardSwitch(event),card.classList.contains("target")&&CoC7MeleeTarget.updateCardSwitch(event)),card.classList.contains("range")&&card.classList.contains("initiator")&&CoC7RangeInitiator.updateCardSwitch(event),card.classList.contains("damage"),card.classList.contains("roll-card")&&CoC7Check.updateCardSwitch(event)}static _getChatCardActor(card){const cardData=card.dataset.object?JSON.parse(unescape(card.dataset.object)):card.dataset;if(cardData.actorKey)return CoC7Chat._getActorFromKey(cardData.actorKey);const tokenKey=cardData.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}const actorId=cardData.actorId;if(actorId)return game.actors.get(actorId);const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){const chatMessage=game.messages.get(messageId);if(chatMessage.user)return chatMessage.user.character}return null}static isCardOwner(card){const message=card.closest(".message"),messageId=message?message.dataset.messageId:null;if(messageId){return game.messages.get(messageId).ownner||!1}return!1}static _getActorFromKey(key){if(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token.actor||new Token(tokenData).actor:null}}return game.actors.get(key)||null}}static getActorFromToken(tokenKey){const token=CoC7Chat.getToken(tokenKey);return token?token.actor:null}static getToken(tokenKey){if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId){const tokenDoc=game.actors.tokens[tokenId]?.token;return tokenDoc.object}{const scene=game.scenes.get(sceneId);if(!scene)return null;const token=scene.getEmbeddedDocument("Token",tokenId);return token?token||new Token(tokenData):null}}return null}static async updateChatCard(card,messId=null){const messageId=null==messId?card.closest(".message").dataset.messageId:messId,message=game.messages.get(messageId),msg=await message.update({content:card.outerHTML});return await ui.chat.updateMessage(msg,!1),msg}static async _onChatCardAction(event){event.preventDefault();const button=event.currentTarget,card=button.closest(".chat-card");if(!card)return;const originMessage=button.closest(".message"),action=button.dataset.action;if(CoC7Chat._getChatCardActor(card))switch(action){case"useLuck":{const luckAmount=parseInt(button.dataset.luckAmount),newSuccessLevel=parseInt(event.currentTarget.dataset.newSuccessLevel);if(card.classList.contains("melee")){let meleeCard;card.classList.contains("target")&&(meleeCard=CoC7MeleeTarget.getFromCard(card)),card.classList.contains("initiator")&&(meleeCard=CoC7MeleeInitiator.getFromCard(card)),meleeCard.upgradeRoll(luckAmount,newSuccessLevel,card)}else if(card.classList.contains("range")){const rangeCard=CoC7RangeInitiator.getFromCard(card),rollResult=button.closest(".roll-result"),rollIndex=rollResult?parseInt(rollResult.dataset.index):null;if(button.classList.contains("pass-check"))rangeCard.passRoll(rollIndex);else{const upgradeIndex=parseInt(button.dataset.index);rangeCard.upgradeRoll(rollIndex,upgradeIndex)}}else if(card.classList.contains("roll-card")||null!=card.querySelector(".roll-result")){const check=await CoC7Check.getFromCard(card);if(button.classList.contains("pass-check")){const luckAmount=parseInt(button.dataset.luckAmount);check.forcePass(luckAmount)}else{const upgradeIndex=parseInt(button.dataset.index);await check.upgradeCheck(upgradeIndex)}}else{const actor=CoC7Chat._getChatCardActor(card),detailedResultPlaceHolder=card.querySelector(".result-details");if(actor.spendLuck(luckAmount)){const result=card.querySelector(".dice-total");switch(card.dataset.successLevel=newSuccessLevel,card.dataset.processed="false",newSuccessLevel){case CoC7Check.successLevel.regular:result.innerText=game.i18n.localize("CoC7.RegularSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:result.innerText=game.i18n.localize("CoC7.HardSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:result.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:result.innerText=game.i18n.localize("CoC7.CriticalSuccess"),detailedResultPlaceHolder.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}result.classList.replace("failure","success"),result.classList.remove("fumble"),card.querySelector(".card-buttons").remove(),card.querySelector(".dice-tooltip").style.display="none",await CoC7Chat.updateChatCard(card)}else ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:actor.name}))}break}case"push":{const newCard=card.cloneNode(!0),result=newCard.querySelector(".dice-total");result.innerText=result.innerText+game.i18n.localize("CoC7.PushingSkill"),result.classList.remove("failure"),newCard.querySelector(".card-buttons").remove(),newCard.dataset.pushedRoll=!0,await CoC7Chat.updateChatCard(newCard,originMessage.dataset.messageId),await CoC7Check.push(card);break}case"defending":{let defender,defenderKey=event.currentTarget.closest(".defender-action-select").dataset.tokenId;defenderKey?defender=this.getActorFromToken(defenderKey):(defenderKey=event.currentTarget.closest(".defender-action-select").dataset.actorId,defender=game.actors.get(defenderKey));const responseType=event.currentTarget.dataset.actionType,outnumbered="true"===event.currentTarget.dataset.outnumbered,check=new CoC7Check;switch(check.referenceMessageId=originMessage.dataset.messageId,check.rollType="opposed",check.side="target",check.action=responseType,responseType){case"dodging":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"fightBack":check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.item=event.currentTarget.dataset.itemId,outnumbered&&(check.diceModifier=-1),await check.roll(),check.toMessage();break;case"maneuver":{const actor=CoC7Chat._getChatCardActor(card);if(defender.build<=actor.build-3)return void ui.notifications.error(game.i18n.localize("CoC7.ErrorManeuverNotPossible"));check.actor=defender,check.skill=event.currentTarget.dataset.skillId,check.difficulty=CoC7Check.difficultyLevel.regular,outnumbered&&(check.diceModifier=-1),defender.build<actor.build&&(check.diceModifier=check.diceModifier-(actor.build-defender.build)),check.diceModifier<-2&&(check.difficulty=check.difficulty+Math.abs(check.diceModifier)-2,check.diceModifier=-2),await check.roll(),check.toMessage();break}}break}case"melee-initiator-roll":{const initiator=CoC7MeleeInitiator.getFromCard(card),check=await initiator.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await initiator.publishCheckResult();break}case"melee-target-no-response":{const target=CoC7MeleeTarget.getFromCard(card);await target.publishNoReponseResult();break}case"melee-target-roll":{const target=CoC7MeleeTarget.getFromCard(card),check=await target.performSkillCheck(event.currentTarget.dataset.skill);$(button).prop("disabled",!0),await CoC7Dice.showRollDice3d(check.dice.roll),await target.publishCheckResult();break}case"roll-melee-damage":{const damageChatCard=new DamageCard({critical:"true"===button.dataset.critical,fastForward:event.shiftKey});damageChatCard.actorKey=button.dataset.dealer,damageChatCard.targetKey=button.dataset.target,damageChatCard.itemId=button.dataset.weapon,originMessage.dataset.messageId&&(damageChatCard.messageId=originMessage.dataset.messageId),damageChatCard.updateChatCard();break}case"range-initiator-shoot":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);rangeInitiator.addShotAtCurrentTarget(),await rangeInitiator.updateChatCard();break}case"range-initiator-roll":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.resolveCard();break}case"roll-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.rollDamage();break}case"deal-melee-damage":{const targetKey=card.dataset.targetKey,amount=card.dataset.result,targetActor=chatHelper.getActorFromKey(targetKey);await targetActor.dealDamage(amount);const buttons=card.querySelector(".card-buttons"),diceTotal=card.querySelector(".dice-total");$(diceTotal).append('<i class="fas fa-check"></i>'),buttons&&buttons.remove(),await CoC7Chat.updateChatCard(card);break}case"deal-range-damage":{const rangeInitiator=CoC7RangeInitiator.getFromCard(card);await rangeInitiator.dealDamage();break}case"testcheck":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-pass":(await CoC7Check.getFromCard(card)).forcePass();break;case"force-fail":(await CoC7Check.getFromCard(card)).forceFail();break;case"increase-success-level":(await CoC7Check.getFromCard(card)).increaseSuccessLevel();break;case"decrease-success-level":(await CoC7Check.getFromCard(card)).decreaseSuccessLevel();break;case"reveal-check":{const check=await CoC7Check.getFromCard(card);check.isBlind=!1,check.computeCheck(),isCtrlKey(event),check.updateChatCard({makePublic:!0});break}case"roll-check-card":{const check=await CoC7Check.getFromCard(card);check.standby=!1,await check._perform(),check.updateChatCard({forceRoll:!0});break}case"flag-for-development":{const check=await CoC7Check.getFromCard(card);await check.flagForDevelopement(),check.computeCheck(),check.updateChatCard();break}case"reset-creature-san-data":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.clearSanLossReason(),await sanCheck.updateChatCard();break}case"roll-san-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSan(),await sanCheck.updateChatCard();break}case"advance-state":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.advanceState(button.dataset.state),await sanCheck.updateChatCard();break}case"roll-san-loss":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollSanLoss(),sanCheck.updateChatCard();break}case"roll-int-check":{const sanCheck=SanCheckCard.getFromCard(card);await sanCheck.rollInt(),sanCheck.updateChatCard();break}case"roll-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);await conCheck.rollCon(),conCheck.updateChatCard();break}case"reveal-con-check":{const conCheck=CoC7ConCheck.getFromCard(card);conCheck.isBlind=!1,conCheck.updateChatCard();break}}}static _onChatCardToggleContent(event){event.preventDefault();const content=event.currentTarget.closest(".chat-card").querySelector(".card-content");content&&(content.style.display?content.style.display="none"===content.style.display?"block":"none":content.style.display="block")}}class CoC7MeleeInitiator extends ChatCardActor{constructor(actorKey=null,itemId=null,fastForward=!1){super(actorKey,fastForward),this.itemId=itemId,this.resolved=!1,this.outnumbered=!1,this.surprised=!1,this.autoSuccess=!1,this.advantage=!1,this.disadvantage=!1,this.messageId=null,this.targetCard=null,this.rolled=!1}get template(){return"systems/CoC7/templates/chat/combat/melee-initiator.html"}async revealCheck(){const chatMessage=game.messages.get(this.messageId);await chatMessage.setFlag("CoC7","checkRevealed",!0),await ui.chat.updateMessage(chatMessage,!1)}async createChatCard(){chatHelper.getActorImgFromKey(this.actorKey);const html=await renderTemplate(this.template,this),speakerData={};this.token?speakerData.token=this:speakerData.actor=this;const speaker=ChatMessage.getSpeaker(speakerData),chatData={user:(this.actor.user?this.actor.user:game.user).id,speaker,content:html};["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),chatData.blind=!1;return await ChatMessage.create(chatData)}async updateChatCard(){const html=await renderTemplate(this.template,this),message=game.messages.get(this.messageId),msg=await message.update({content:html});return await ui.chat.updateMessage(msg,!1),msg}toggleFlag(flagName){const flag=flagName.includes("-")?chatHelper.hyphenToCamelCase(flagName):flagName;this[flag]=!this[flag]}async performSkillCheck(skillId=null,publish=!1){const check=new CoC7Check;if(check.isBlind=!1,check.isUnkonwn=!1,check.referenceMessageId=this.messageId,check.rollType="opposed",check.side="initiator",check.action="attack",check.actor=this.actorKey,check.item=this.itemId,check.skill=skillId,check.difficulty=CoC7Check.difficultyLevel.regular,check.diceModifier=0,game.user.isGM?this.checkRevealed=!1:this.checkRevealed=!0,this.outnumbered&&(check.diceModifier+=1),this.surprised&&(check.diceModifier+=1),this.disadvantage&&(check.diceModifier-=1),this.advantage&&(check.diceModifier+=1),await check.roll(),this.check=check,this.rolled=!0,this.resolved=!0,publish&&check.toMessage(),this.criticalDamage=check.successLevel===CoC7Check.successLevel.extreme||check.successLevel===CoC7Check.successLevel.critical,this.hasTarget&&!this.autoSuccess){const message=await game.CoC7socket.executeAsGM("gmcreatemessageas",{targetKey:this.targetKey,messageId:this.messageId,fastForward:this.fastForward,actorKey:this.actorKey});this.targetCard=message.id||message._id}return this.autoSuccess&&!this.check.isFumble&&this.check.forcePass(),check}async publishCheckResult(check=null){if(!check&&!this.check)return null;if(check&&(this.check=check),this.roll=CoC7Roll.getFromCheck(this.check),this.rolled=!0,this.roll.rollIcons=[],this.roll.critical){this.roll.rollColor="goldenrod",this.roll.rollTitle=game.i18n.localize("CoC7.CriticalSuccess");for(let index=0;index<4;index++)this.roll.rollIcons.push("medal")}else if(this.roll.fumble){this.roll.rollColor="darkred",this.roll.rollTitle=game.i18n.localize("CoC7.Fumble");for(let index=0;index<4;index++)this.roll.rollIcons.push("spider")}else if(this.roll.success){this.roll.rollColor="goldenrod",CoC7Check.successLevel.regular===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.RegularSuccess")),CoC7Check.successLevel.hard===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.HardSuccess")),CoC7Check.successLevel.extreme===this.roll.successLevel&&(this.roll.rollTitle=game.i18n.localize("CoC7.ExtremeSuccess"));for(let index=0;index<this.roll.successLevel;index++)this.roll.rollIcons.push("star")}else this.roll.rollColor="black",this.roll.rollTitle=game.i18n.localize("CoC7.Failure"),this.roll.rollIcons.push("skull");if(!this.targetCard&&!this.autoSuccess&&this.hasTarget){const resolutionCard=new CoC7MeleeResoltion(this.parentMessageId,this.messageId),resolutionMessage=await resolutionCard.preCreateMessage();this.resolutionCard=resolutionMessage.id}await this.updateChatCard()}static getFromCard(card,messageId=null){const initiator=new CoC7MeleeInitiator;return chatHelper.getObjectFromElement(initiator,card),initiator.roll=CoC7Roll.getFromCard(card),card.closest(".message")?initiator.messageId=card.closest(".message").dataset.messageId:initiator.messageId=messageId,initiator}static getFromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return null;const card=$(message.content)[0],initiator=CoC7MeleeInitiator.getFromCard(card,messageId);return initiator.messageId=messageId,initiator}static updateCardSwitch(event,publishUpdate=!0){const card=event.currentTarget.closest(".melee.initiator"),flag=event.currentTarget.dataset.flag,camelFlag=chatHelper.hyphenToCamelCase(flag);if(publishUpdate){const initiator=CoC7MeleeInitiator.getFromCard(card);initiator.toggleFlag(flag),initiator.updateChatCard()}else card.dataset[camelFlag]="true"!==card.dataset[camelFlag],event.currentTarget.classList.toggle("switched-on"),event.currentTarget.dataset.selected=card.dataset[camelFlag]}upgradeRoll(luckAmount,newSuccessLevel,oldCard){this.actor.spendLuck(luckAmount)||ui.notifications.error(game.i18n.format("CoC7.LuckNotEnough",{name:this.actor.name})),this.roll.value=null,this.roll.successLevel=newSuccessLevel,this.roll.luckSpent=!0,oldCard.dataset.processed=!1;const diceRolls=oldCard.querySelector(".dice-roll");diceRolls.dataset.value=null,diceRolls.dataset.successLevel=newSuccessLevel,diceRolls.dataset.luckSpent=!0;const resulDetails=oldCard.querySelector(".result-details"),diceTotal=oldCard.querySelector(".dice-total"),rollDamageButton=oldCard.querySelector('button[data-action="roll-melee-damage"]');switch(rollDamageButton&&rollDamageButton.classList.remove("invisible"),newSuccessLevel){case CoC7Check.successLevel.regular:diceTotal.innerText=game.i18n.localize("CoC7.RegularSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.RegularDifficulty")});break;case CoC7Check.successLevel.hard:diceTotal.innerText=game.i18n.localize("CoC7.HardSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.HardDifficulty")});break;case CoC7Check.successLevel.extreme:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.ExtremeSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.ExtremeDifficulty")});break;case CoC7Check.successLevel.critical:rollDamageButton&&(rollDamageButton.dataset.critical=!0),diceTotal.innerText=game.i18n.localize("CoC7.CriticalSuccess"),resulDetails.innerText=game.i18n.format("CoC7.RollResult.LuckSpendText",{luckAmount,successLevel:game.i18n.localize("CoC7.CriticalDifficulty")})}diceTotal.classList.replace("failure","success"),oldCard.querySelector(".card-buttons").remove(),oldCard.querySelector(".dice-tooltip").style.display="none",CoC7Chat.updateChatCard(oldCard)}}class CoCActor extends Actor{constructor(data,context){if(data.type in CONFIG.Actor.documentClasses&&!context?.extended)return new CONFIG.Actor.documentClasses[data.type](data,{extended:!0,...context});super(data,context)}async initialize(){super.initialize(),await this.creatureInit()}prepareBaseData(){if(["character","npc","creature"].includes(this.type)){this.system.skills={};for(const i of this.items)"skill"===i.type&&(this.system.skills[`${i.itemIdentifier}`]={foundryID:i.id,cocid:i.flags?.CoC7?.cocidFlag?.id,value:i.rawValue,bonusDice:i.system.bonusDice});if(void 0===this.system.attribs.san.dailyLimit)if(this.system.attribs.san.oneFifthSanity){const s=this.system.attribs.san.oneFifthSanity.split("/");s[1]&&!isNaN(Number(s[1]))?this.system.attribs.san.dailyLimit=Number(s[1]):this.system.attribs.san.dailyLimit=0}else this.system.attribs.san.dailyLimit=0;this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.build.current=this.hp}super.prepareBaseData()}prepareEmbeddedDocuments(){super.prepareEmbeddedDocuments()}prepareDerivedData(){if(["character","npc","creature"].includes(this.type)){super.prepareDerivedData(),this.system.attribs.mov.value=this.rawMov,this.system.attribs.db.value=this.rawDb,this.system.attribs.build.value=this.rawBuild,this.system.attribs.hp.max=this.rawHpMax,null===this.hp&&(this.system.attribs.hp.value=this.rawHpMax),this.system.attribs.mp.max=this.rawMpMax,null===this.mp&&(this.system.attribs.mp.value=this.rawMpMax),this.system.attribs.san.max=this.rawSanMax,null===this.san&&(this.system.attribs.san.value=this.rawSanMax);const filterMatrix=[];this.system.attribs.hp.auto&&filterMatrix.push("system.attribs.hp.max"),this.system.attribs.mp.auto&&filterMatrix.push("system.attribs.mp.max"),this.system.attribs.san.auto&&filterMatrix.push("system.attribs.san.max"),this.system.attribs.mov.auto&&filterMatrix.push("system.attribs.mov.value"),this.system.attribs.db.auto&&filterMatrix.push("system.attribs.db.value"),this.system.attribs.build.auto&&filterMatrix.push("system.attribs.build.value");const changes=this.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);changes.sort(((a,b)=>a.priority-b.priority));const selectChanges=changes.filter((e=>filterMatrix.includes(e.key)));for(const change of selectChanges)change.effect.apply(this,change);this.hpMax&&this.hpMax<this.hp&&(this.system.attribs.hp.value=this.hpMax),this.mpMax&&this.mpMax<this.mp&&(this.system.attribs.mp.value=this.mpMax),this.sanMax&&this.sanMax<this.san&&(this.system.attribs.san.value=this.sanMax)}}static async create(data,options={}){return"character"===data.type?data.prototypeToken=mergeObject(data.prototypeToken||{},{actorLink:!0,disposition:1,sight:{enabled:!0}}):"npc"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/cultist.svg"):"creature"===data.type?void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="systems/CoC7/assets/icons/floating-tentacles.svg"):"container"===data.type&&(void 0!==data.img&&"icons/svg/mystery-man.svg"!==data.img||(data.img="icons/svg/chest.svg"),data.prototypeToken=mergeObject(data.prototypeToken||{},{actorLink:!0})),super.create(data,options)}checkUndefinedAuto(){const returnData={attribs:{hp:{},mp:{},san:{},mov:{},db:{},build:{}}};return void 0===this.system.attribs?.hp?.auto&&(returnData.attribs.hp.auto=!0),void 0===this.system.attribs?.mp?.auto&&(returnData.attribs.mp.auto=!0),void 0===this.system.attribs?.san?.auto&&(returnData.attribs.san.auto=!0),void 0===this.system.attribs?.mov?.auto&&(returnData.attribs.mov.auto=!0),void 0===this.system.attribs?.db?.auto&&(returnData.attribs.db.auto=!0),void 0===this.system.attribs?.build?.auto&&(returnData.attribs.build.auto=!0),returnData}get characteristics(){const characteristics={str:{value:null,shortName:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,shortName:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,shortName:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,shortName:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,shortName:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,shortName:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,shortName:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,shortName:"CHARAC.EDU",label:"CHARAC.Education",formula:null}};if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))characteristics[key]={key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value,hard:Math.floor(value.value/2)||null,extreme:Math.floor(value.value/5)||null,formula:value.formula};return characteristics}static async initToken(createData){}get hasTempoInsane(){return this.hasConditionStatus(COC7.status.tempoInsane)}get getTempoInsaneDurationText(){return this.hasConditionValue(COC7.status.tempoInsane,"durationText")}get hasIndefInsane(){return this.hasConditionStatus(COC7.status.indefInsane)}get portrait(){return game.settings.get("CoC7","useToken")&&(this.token?.texture?.src||this.prototypeToken?.texture?.src)||this.img}async enterBoutOfMadness(realTime=!0,duration=1){let result=null;const boutOfMadnessTableId=realTime?game.settings.get("CoC7","boutOfMadnessRealTimeTable"):game.settings.get("CoC7","boutOfMadnessSummaryTable");if("none"!==boutOfMadnessTableId){result={phobia:!1,mania:!1,description:null};const boutOfMadnessTable=game.tables.get(boutOfMadnessTableId);if(result.tableRoll=await boutOfMadnessTable.roll(),void 0!==result.tableRoll.results[0]){if(CONST.TABLE_RESULT_TYPES.DOCUMENT===result.tableRoll.results[0].type){const item=game.items.get(result.tableRoll.results[0].documentId);if(void 0!==item){item.system?.type?.phobia&&(result.phobia=!0),item.system?.type?.mania&&(result.mania=!0),result.description=`${item.name}:${TextEditor.enrichHTML(item.system.description.value,{async:!1})}`,result.name=item.name;const itemData=item.toObject();delete itemData._id,await this.createEmbeddedDocuments("Item",[itemData])}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessItemNotFound"))}CONST.TABLE_RESULT_TYPES.TEXT===result.tableRoll.results[0].type&&(result.description=TextEditor.enrichHTML(result.tableRoll.results[0].text,{async:!1}))}else ui.notifications.error(game.i18n.localize("CoC7.MessageBoutOfMadnessTableNotFound"))}return realTime?(this.setCondition(COC7.status.tempoInsane,{realTime,duration}),result):result}static emptySkill(skillName,value,{rarity=!1,push=!0,combat=!1,img=!1,specialization=!1}={}){const data={name:skillName,type:"skill",system:{value,skillName,specialization:"",properties:{special:!1,rarity,push,combat}}};if(!1!==img&&(data.img=img),!1!==specialization){const parts=CoC7Item.getNamePartsSpec(skillName,specialization);data.system.specialization=parts.specialization,data.system.skillName=parts.skillName,data.name=parts.name,data.system.properties.special=!0}return data}async createSkill(skillName,value,showSheet=!1){const data=CoCActor.emptySkill(skillName,value);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createWeaponSkill(name,firearms=!1,base=null){const skillData=await SkillSpecSelectDialog.create([],game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName"),0,name),value=Number(skillData.get("base-value")),parts=CoC7Item.getNamePartsSpec(name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),data={name:parts.name,type:"skill",system:{base:isNaN(value)?0:value,adjustments:{personal:null,occupation:null,archetype:null,experience:null},skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0}}};await this.createEmbeddedDocuments("Item",[data],{renderSheet:!base});return this.getSkillsByName(name)[0]}async creatureInit(){if("creature"!==this.type)return;if(this.getActorFlag("initialized"))return;if(0===this.getSkillsByName(game.i18n.localize(COC7.creatureFightingSkill)).length){try{const parts=CoC7Item.getNamePartsSpec(game.i18n.localize(COC7.creatureFightingSkill),game.i18n.localize(COC7.fightingSpecializationName)),data={type:"skill",name:parts.name,system:{base:0,value:null,skillName:parts.skillName,specialization:parts.specialization,properties:{combat:!0,fighting:!0,special:!0},flags:{}}},skill=await this.createEmbeddedDocuments("Item",[data],{renderSheet:!1}),attack=await this.createEmbeddedDocuments("Item",[{name:"Innate attack",type:"weapon",system:{description:{value:"Creature's natural attack",chat:"Creature's natural attack"},wpnType:"innate",properties:{addb:!0,slnt:!0}}}],{renderSheet:!1});if(skill.length>0&&attack.length>0){const createdAttack=this.items.get(attack[0].id);await createdAttack.update({"system.skill.main.id":skill[0].id,"system.skill.main.name":skill[0].name})}}catch(err){console.error("Creature init: "+err.message)}await this.setActorFlag("initialized")}}async createItem(itemName,quantity=1,showSheet=!1){const data={name:itemName,type:"item",system:{quantity}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptyBook(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newBookName)))return this.createBook(game.i18n.localize(COC7.newBookName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newBookName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newBookName)+" "+index;return this.createBook(itemName,showSheet)}async createBook(itemName,showSheet=!1){const data={name:itemName,type:"book",system:{}};return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySpell(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSpellName)))return this.createSpell(game.i18n.localize(COC7.newSpellName),showSheet);let index=0,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newSpellName)+" "+index;return this.createSpell(itemName,showSheet)}static emptySpell(itemName){return{name:itemName,type:"spell",system:{}}}async createSpell(itemName,showSheet=!1){const data=CoCActor.emptySpell(itemName);return await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createEmptySkill(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newSkillName)))return this.createSkill(game.i18n.localize(COC7.newSkillName),"character"!==this.type?1:null,showSheet);let index=0,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;for(;this.getItemIdByName(skillName);)index++,skillName=game.i18n.localize(COC7.newSkillName)+" "+index;return this.createSkill(skillName,null,showSheet)}async createEmptyItem(event=null){const showSheet=!event||!event.shiftKey;if(!this.getItemIdByName(game.i18n.localize(COC7.newItemName)))return this.createItem(game.i18n.localize(COC7.newItemName),1,showSheet);let index=0,itemName=game.i18n.localize(COC7.newItemName)+" "+index;for(;this.getItemIdByName(itemName);)index++,itemName=game.i18n.localize(COC7.newItemName)+" "+index;return this.createItem(itemName,1,showSheet)}async createEmptyWeapon(event=null,properties={}){const showSheet=!event||!event.shiftKey;let weaponName=game.i18n.localize(COC7.newWeaponName);if(this.getItemIdByName(game.i18n.localize(COC7.newWeaponName))){let index=0;for(weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index;this.getItemIdByName(weaponName);)index++,weaponName=game.i18n.localize(COC7.newWeaponName)+" "+index}const data={name:weaponName,type:"weapon",system:{properties:{}}};for(const[key]of Object.entries(COC7.weaponProperties))data.system.properties[key]=Object.prototype.hasOwnProperty.call(properties,key)??!1;await this.createEmbeddedDocuments("Item",[data],{renderSheet:showSheet})}async createBioSection(title=null){const bio=this.system.biography?duplicate(this.system.biography):[];bio.push({title,value:null}),await this.update({"system.biography":bio},{renderSheet:!1})}async updateBioValue(index,content){const bio=duplicate(this.system.biography);bio[index].value=content,await this.update({"system.biography":bio},{render:!1})}async updateBioTitle(index,title){const bio=duplicate(this.system.biography);bio[index].title=title,await this.update({"system.biography":bio})}async deleteBioSection(index){const bio=duplicate(this.system.biography);bio.splice(index,1),await this.update({"system.biography":bio})}async moveBioSectionUp(index){if(0===index)return;const bio=duplicate(this.system.biography);if(index>=bio.length)return;const elem=bio.splice(index,1)[0];bio.splice(index-1,0,elem),await this.update({"system.biography":bio})}async moveBioSectionDown(index){const bio=duplicate(this.system.biography);if(index>=bio.length-1)return;const elem=bio.splice(index,1)[0];bio.splice(index+1,0,elem),await this.update({"system.biography":bio})}async updateTextArea(textArea){const name="system."+textArea.dataset.areaName;await this.update({[name]:textArea.value})}async createEmbeddedDocuments(embeddedName,dataArray,options){const processedDataArray=[];let baseValue=0,baseCalculated=0,archetype=!1,occupation=!1;for(let data of dataArray)switch(data.type){case"skill":{if(baseValue=data.system.base,baseCalculated=await CoC7Item.calculateBase(this,data),"character"!==this.type){if(this.getItemIdByName(data.name))return;if(baseValue&&String(baseValue)!==String(data.system.value)&&(data.system.value=baseCalculated),isNaN(Number(data.system.value))){let value;try{value=(await new Roll(data.system.value,this.parseCharacteristics()).evaluate({async:!0})).total}catch(err){value=null}value&&(data.system.value=Math.floor(value))}}else data.system.value=null;let addThis=!0;if(CoC7Item.isAnySpec(data)){const isAnyButNotFlagged=(!data.system.properties?.requiresname??!1)&&!data.system.properties?.picknameonly;let skillList=[];const group=game.system.api.cocid.guessGroupFromDocument(data);if(group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>(item.system.properties?.special??!1)&&!item.system.properties?.requiresname&&!item.system.properties?.picknameonly))),data.system?.flags?.occupation||data.system?.flags?.archetype){const existingSkills=this.skills.filter((el=>!!el.system.specialization&&((!data.system?.flags?.occupation||!el.system.flags?.occupation)&&((!data.system?.flags?.archetype||!el.system.flags?.archetype)&&data.system.specialization.toLocaleLowerCase()===el.system.specialization.toLocaleLowerCase()))));if(existingSkills.length>0)if(skillList.length>0){for(let i=existingSkills.length-1;i>=0;i--){const found=skillList.findIndex((item=>item.name===existingSkills[i].name||item.flags?.CoC7?.cocidFlag?.id===existingSkills[i].flags?.CoC7?.cocidFlag?.id));found>-1&&skillList.splice(found,1)}skillList=skillList.concat(existingSkills)}else skillList=existingSkills}skillList.length>0&&skillList.sort(CoC7Utilities.sortByNameKey);const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:isAnyButNotFlagged||(data.system.properties?.requiresname??!1),fixedBaseValue:data.system.properties?.keepbasevalue??!1,specializationName:data.system.specialization,label:data.name,baseValue:data.system.base});if(Object.prototype.hasOwnProperty.call(skillData,"selected"))if(skillData.selected){const existingItem=this.items.get(skillData.selected);if(existingItem){const changes={};data.system.properties?.keepbasevalue||""!==skillData.baseValue&&(baseCalculated=skillData.baseValue,changes["system.value"]=baseCalculated);for(const[key,value]of Object.entries(data.system.flags))value&&(changes[`system.flags.${key}`]=!0);Object.keys(changes).length>0&&(changes._id=existingItem.id,await this.updateEmbeddedDocuments("Item",[changes])),data.name=CoC7Item.getNameWithoutSpec(existingItem),addThis=!1}else{const existing=skillList.find((i=>i.id===skillData.selected));if(existing){const flags=data.system?.flags;data=duplicate(existing);for(const[key,value]of Object.entries(flags))value&&(data.system.flags[key]=!0);data.system.properties?.keepbasevalue||(""!==skillData.baseValue?(baseCalculated=skillData.baseValue,data.system.value=baseCalculated):baseValue=data.system.value)}}}else{const parts=CoC7Item.getNamePartsSpec(skillData.name,data.system.specialization);data.system.properties?.keepbasevalue||(""!==skillData.baseValue?(baseCalculated=skillData.baseValue,data.system.value=baseCalculated):baseValue=data.system.value),data.system.skillName=parts.skillName,data.name=parts.name}}addThis&&(String(baseValue)!==String(baseCalculated)&&(data.system.base=baseCalculated),processedDataArray.push(duplicate(data)));break}case"weapon":if("container"!==this.type){const mainSkill=data.system?.skill?.main?.name;if(mainSkill){let skill=this.getSkillsByName(mainSkill)[0];if(!skill){const name=mainSkill.match(/\(([^)]+)\)/)?mainSkill.match(/\(([^)]+)\)/)[1]:mainSkill,existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(mainSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.main.id=skill.id)}const secondSkill=data.system?.skill?.alternativ?.name;if(secondSkill){let skill=this.getSkillsByName(secondSkill)[0];if(!skill){const name=secondSkill.match(/\(([^)]+)\)/)?secondSkill.match(/\(([^)]+)\)/)[1]:secondSkill,existing=game.items.find((item=>"skill"===item.type&&(item.name.toLocaleLowerCase()===name.toLocaleLowerCase()||item.system.skillName?.toLocaleLowerCase()===name.toLocaleLowerCase())));void 0!==existing?(await this.addItems([existing]),skill=await this.getSkillsByName(secondSkill)[0]):skill=await this.createWeaponSkill(name,!!data.system.properties?.rngd)}skill&&(data.system.skill.alternativ.id=skill.id)}}processedDataArray.push(duplicate(data));break;case"setup":{if(data.system.enableCharacterisitics){data.system.characteristics.list={},data.system.characteristics.list.str=this.getCharacteristic("str"),data.system.characteristics.list.con=this.getCharacteristic("con"),data.system.characteristics.list.siz=this.getCharacteristic("siz"),data.system.characteristics.list.dex=this.getCharacteristic("dex"),data.system.characteristics.list.app=this.getCharacteristic("app"),data.system.characteristics.list.int=this.getCharacteristic("int"),data.system.characteristics.list.pow=this.getCharacteristic("pow"),data.system.characteristics.list.edu=this.getCharacteristic("edu"),data.system.characteristics.list.luck={},data.system.characteristics.list.luck.value=isNaN(this.luck)?null:this.luck,data.system.characteristics.list.luck.label=game.i18n.localize("CoC7.Luck"),data.system.characteristics.list.luck.shortName=game.i18n.localize("CoC7.Luck"),data.system.characteristics.values||(data.system.characteristics.values={}),data.system.characteristics.values.str=data.system.characteristics.list.str.value,data.system.characteristics.values.con=data.system.characteristics.list.con.value,data.system.characteristics.values.siz=data.system.characteristics.list.siz.value,data.system.characteristics.values.dex=data.system.characteristics.list.dex.value,data.system.characteristics.values.app=data.system.characteristics.list.app.value,data.system.characteristics.values.int=data.system.characteristics.list.int.value,data.system.characteristics.values.pow=data.system.characteristics.list.pow.value,data.system.characteristics.values.edu=data.system.characteristics.list.edu.value,data.system.characteristics.values.luck=data.system.characteristics.list.luck.value,data.system.characteristics.points.enabled?data.system.title=game.i18n.localize("CoC7.SpendPoints"):data.system.title=game.i18n.localize("CoC7.RollCharac"),data.system.pointsWarning=!(null!==data.system.characteristics.values.str&&null!==data.system.characteristics.values.con&&null!==data.system.characteristics.values.siz&&null!==data.system.characteristics.values.dex&&null!==data.system.characteristics.values.app&&null!==data.system.characteristics.values.int&&null!==data.system.characteristics.values.pow&&null!==data.system.characteristics.values.edu);if(!await CharacRollDialog.create(data.system))return;{const updateData={};for(const key of["str","con","siz","dex","app","int","pow","edu"])data.system.characteristics.values[key]&&(updateData[`system.characteristics.${key}.value`]=data.system.characteristics.values[key],updateData[`system.characteristics.${key}.formula`]=data.system.characteristics.rolls[key]);data.system.characteristics.values.luck&&(updateData["system.attribs.lck.value"]=data.system.characteristics.values.luck),data.system.characteristics.values.pow&&(updateData["system.attribs.san.value"]=data.system.characteristics.values.pow,updateData["system.attribs.san.dailyLimit"]=Math.floor(data.system.characteristics.values.pow/5),updateData["system.attribs.mp.max"]=Math.floor(data.system.characteristics.values.pow/5)),await this.update(updateData,{renderSheet:!1}),await this.update({"system.attribs.hp.value":this.rawHpMax,"system.attribs.hp.max":this.rawHpMax},{renderSheet:!1})}}const era=Object.entries(data.flags?.CoC7?.cocidFlag?.eras).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:data.system.items,era:void 0===era[0]||era[0]}),skills=items.filter((it=>"skill"===it.type)),othersItems=items.filter((it=>"skill"!==it.type));if(await this.addUniqueItems(skills),await this.addItems(othersItems),game.settings.get("CoC7","oneBlockBackstory"))await this.update({"system.backstory":data.system.backstory},{renderSheet:!1});else for(const sectionName of data.system.bioSections)!this.system.biography?.find((el=>sectionName===el.title))&&sectionName&&await this.createBioSection(sectionName);const monetary=mergeObject(this.system.monetary,duplicate(data.system.monetary)),sheet=this.sheet;let state=!1;do{state=await new Promise((resolve=>setTimeout((()=>{resolve(sheet._state)}),100)))}while(state===Application.RENDER_STATES.RENDERING);await this.update({"system.monetary":monetary}),Hooks.call("setupFinishedCoC7");break}case"archetype":if("character"===this.type){if(this.archetype){let resetArchetype=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetArchetype"),content:`<p>${game.i18n.format("CoC7.ResetArchetypeHint",{name:this.name})}</p>`,yes:()=>{resetArchetype=!0},defaultYes:!1}),!resetArchetype)return;await this.resetArchetype()}const coreCharac=[];for(const entry of Object.entries(data.system.coreCharacteristics)){const[key,value]=entry;if(data.system.coreCharacteristics[key]=!1,value){const char=this.getCharacteristic(key);char.key=key,coreCharac.push(char)}}let charac;if(coreCharac.length>1){const charDialogData={};charDialogData.characteristics=coreCharac,charDialogData.title=game.i18n.localize("CoC7.SelectCoreCharac"),charac=await CharacSelectDialog.create(charDialogData)}else 1===coreCharac.length&&(charac=coreCharac[0].key);if(!charac)return;if(data.system.coreCharacteristics[charac]=!0,data.system.coreCharacteristicsFormula.enabled){let value=Number(data.system.coreCharacteristicsFormula.value);if(isNaN(value)){const char=this.getCharacteristic(charac),roll=new Roll(data.system.coreCharacteristicsFormula.value);await roll.roll({async:!0}),roll.toMessage({flavor:game.i18n.format("CoC7.MessageRollingCharacteristic",{label:char.label,formula:data.system.coreCharacteristicsFormula.value})}),value=char.value<roll.total?roll.total:char.value}await this.update({[`system.characteristics.${charac}.value`]:value})}data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),await this.addUniqueItems(data.system.skills,"archetype"),processedDataArray.push(duplicate(data)),archetype=!0}break;case"occupation":if("character"===this.type){if(this.occupation){let resetOccupation=!1;if(await Dialog.confirm({title:game.i18n.localize("CoC7.ResetOccupation"),content:`<p>${game.i18n.format("CoC7.ResetOccupationHint",{name:this.name})}</p>`,yes:()=>{resetOccupation=!0},defaultYes:!1}),!resetOccupation)return;await this.resetOccupation()}if(data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills}),Number(data.system.creditRating.max)>0){const actorCreditRating=game.system.api.cocid.findCocIdInList("i.skill.credit-rating",data.system.skills);0===actorCreditRating.length?0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&(data.system.skills.push("i.skill.credit-rating"),data.system.skills=await game.system.api.cocid.expandItemArray({itemList:data.system.skills})):0===game.system.api.cocid.findCocIdInList("i.skill.credit-rating",this.items).length&&data.system.skills.push(actorCreditRating[0])}const pointsDialogData={};pointsDialogData.characteristics=data.system.occupationSkillPoints;let total=0,optionalChar=!1;for(const entry of Object.entries(data.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);pointsDialogData.characteristics[key].name=char.label,pointsDialogData.characteristics[key].value=char.value,value.selected&&(pointsDialogData.characteristics[key].total=char.value*Number(pointsDialogData.characteristics[key].multiplier),value.optional?optionalChar=!0:total+=pointsDialogData.characteristics[key].total)}if(pointsDialogData.total=total,optionalChar){if(!await PointSelectDialog.create(pointsDialogData))return}for(let index=0;index<data.system.groups.length;index++){data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:data.system.groups[index].skills});const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.groups[index].options),dialogData.title=game.i18n.localize("CoC7.SkillSelectionWindow");for(const value of data.system.groups[index].skills)if(CoC7Item.isAnySpec(value))dialogData.skills.push(value);else{const skill=this.items.find((item=>item.name===value.name&&"skill"===item.type));if(!skill||!skill.system.flags?.occupation){data.system.skills.find((item=>item.name===value.name))||dialogData.skills.push(value)}}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}if(Number(data.system.personal)){const dialogData={skills:[],type:"occupation"};dialogData.actorId=this.id,dialogData.optionsCount=Number(data.system.personal),dialogData.title=game.i18n.format("CoC7.SelectPersonalSkills",{number:Number(data.system.personal)});for(const s of this.skills)if(!s.system.flags.occupation&&!s.system.properties.noadjustments&&!s.system.properties.noxpgain){data.system.skills.find((item=>item.name===s.name))||dialogData.skills.push(s)}if(0!==dialogData.skills.length)if(dialogData.skills.length<=dialogData.optionsCount){ui.notifications.info(game.i18n.format("CoC7.InfoLessSkillThanOptions",{skillCount:dialogData.skills.length,optionsCount:dialogData.optionsCount}));const merged=CoC7Item.mergeOptionalSkills(data.system.skills,dialogData.skills);data.system.skills=merged}else{const selected=await SkillSelectDialog.create(dialogData);if(!selected)return;const merged=CoC7Item.mergeOptionalSkills(data.system.skills,selected);data.system.skills=merged}else ui.notifications.info(game.i18n.localize("CoC7.InfoAllSkillsAlreadySelected"))}await this.addUniqueItems(data.system.skills,"occupation"),await(this.creditRatingSkill?.setItemFlag("occupation")),await(this.creditRatingSkill?.update({"system.adjustments.occupation":Number(data.system.creditRating.min)})),processedDataArray.push(duplicate(data)),occupation=!0}break;default:processedDataArray.push(duplicate(data))}if(0===processedDataArray.length)return[];const processed=await super.createEmbeddedDocuments(embeddedName,processedDataArray,options);return archetype&&(await this.update({"system.development.archetype":this.archetypePoints}),Hooks.call("archetypeFinishedCoC7")),occupation&&(await this.update({"system.development.occupation":this.occupationPoints,"system.development.personal":this.personalPoints}),Hooks.call("occupationFinishedCoC7")),processed}getItemIdByName(itemName){let id=null;const name=itemName.match(/\(([^)]+)\)/)?itemName.match(/\(([^)]+)\)/)[1]:itemName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()===name.toLowerCase()&&(id=value.id);return id}getItemsByName(itemName){const itemList=[];for(const value of this.items)value.name===itemName&&itemList.push(value);return itemList}getSkillsByName(skillName){const skillList=[],name=skillName.match(/\(([^)]+)\)/)?skillName.match(/\(([^)]+)\)/)[1]:skillName;for(const value of this.items)CoC7Item.getNameWithoutSpec(value).toLowerCase()!==name.toLowerCase()&&value.flags?.CoC7?.cocidFlag?.id!==skillName||"skill"!==value.type||skillList.push(value);return skillList}getFirstSkillByCoCID(cocid){return this.items.find((i=>i.flags?.CoC7?.cocidFlag?.id===cocid))}parseCharacteristics(){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actor))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));return parsed}static getCharacteristicDefinition(){const characteristics=[];for(const[key,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))characteristics.push({key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label)});return characteristics}getCharacteristic(charName){if(this.system.characteristics)for(const[key,value]of Object.entries(this.system.characteristics))if(game.i18n.localize(value.short).toLowerCase()===charName.toLowerCase()||game.i18n.localize(value.label).toLowerCase()===charName.toLowerCase()||key===charName.toLowerCase())return{key,shortName:game.i18n.localize(value.short),label:game.i18n.localize(value.label),value:value.value};return null}getAttribute(attribName){return["lck","luck",game.i18n.localize("CoC7.Luck").toLowerCase()].includes(attribName.toLowerCase())?{key:"lck",shortName:"luck",label:game.i18n.localize("CoC7.Luck"),value:this.system.attribs.lck.value}:["san",game.i18n.localize("CoC7.SAN").toLowerCase(),game.i18n.localize("CoC7.Sanity").toLowerCase()].includes(attribName.toLowerCase())?{key:"san",shortName:game.i18n.localize("CoC7.SAN"),label:game.i18n.localize("CoC7.Sanity"),value:this.system.attribs.san.value}:null}async runRoll(options={}){void 0===options.cardType&&(options.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL),void 0===options.preventStandby&&(options.preventStandby=!0),options.actor=this;return await CoC7ChatMessage.trigger(options)}get occupation(){return this.items.filter((item=>"occupation"===item.type))[0]}get archetype(){return this.items.filter((item=>"archetype"===item.type))[0]}async resetOccupation(eraseOld=!0){if(eraseOld){const occupationSkill=this.items.filter((item=>item.getItemFlag("occupation")));for(let index=0;index<occupationSkill.length;index++)await occupationSkill[index].unsetItemFlag("occupation")}this.occupation&&await this.occupation.delete(),await this.update({"system.development.occupation":null})}async resetArchetype(eraseOld=!0){if(eraseOld){const archetypeSkill=this.items.filter((item=>item.getItemFlag("archetype")));for(let index=0;index<archetypeSkill.length;index++)await archetypeSkill[index].unsetItemFlag("archetype")}this.archetype&&await this.archetype.delete(),await this.update({"system.development.archetype":null})}get luck(){return parseInt(this.system.attribs?.lck?.value)}async setLuck(value){return await this.update({"system.attribs.lck.value":value})}async spendLuck(amount){return amount=parseInt(amount),this.luck>=amount&&this.setLuck(this.luck-amount)}get hp(){return parseInt(this.system.attribs.hp.value)}get rawHpMax(){return this.system.attribs.hp.auto?null!=this.system.characteristics.siz.value&&null!=this.system.characteristics.con.value?CoCActor.hpFromCharacteristics(this.system.characteristics,this.type):this.system.attribs.hp.max?parseInt(this.system.attribs.hp.max):null:parseInt(this.system.attribs.hp.max)}get hpMax(){return parseInt(this.system.attribs.hp.max)}async _setHp(value){return value<0&&(value=0),value>this.system.attribs.hp.max&&(value=parseInt(this.system.attribs.hp.max)),await this.update({"system.attribs.hp.value":value})}async addUniqueItems(skillList,flag=null){const processed=[];for(let skill of skillList)if(skill=duplicate(skill),flag&&(Object.prototype.hasOwnProperty.call(skill.system,"flags")||(skill.system.flags={}),skill.system.flags[flag]=!0),CoC7Item.isAnySpec(skill))processed.push(skill);else{const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else processed.push(skill)}0!==processed.length&&await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addItems(itemList,flag=null){const processed=[];for(const item of itemList)flag&&(item.system.flags||(item.system.flags={}),item.system.flags[flag]=!0),processed.push(duplicate(item));if(0!==processed.length)return await this.createEmbeddedDocuments("Item",processed,{renderSheet:!1})}async addUniqueItem(skill,flag=null){const itemId=this.getItemIdByName(skill.name);if(itemId){if(flag){const item=this.items.get(itemId);await item.setItemFlag(flag)}}else flag&&(skill.system.flags||(skill.system.flags={}),skill.system.flags[flag]=!0),await this.createEmbeddedDocuments("Item",[skill],{renderSheet:!1})}get rawMpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?CoCActor.mpFromCharacteristics(this.system.characteristics):0:parseInt(this.system.attribs.mp.max)}getReasonSanLoss(sanReason){return"string"==typeof sanReason?this.system.sanityLossEvents.filter((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()))[0]??{type:"",totalLoss:0,immunity:!1}:{type:"",totalLoss:0,immunity:!1}}sanLostToReason(sanReason){if(sanReason){return this.getReasonSanLoss(sanReason).totalLoss}return 0}sanLossReasonEncountered(sanReason){if(sanReason){return""!==this.getReasonSanLoss(sanReason).type}return!1}setReasonSanLoss(sanReason,sanLoss){if("string"==typeof sanReason&&""!==sanReason){const sanityLossEvents=duplicate(this.system.sanityLossEvents),index=sanityLossEvents.findIndex((r=>r.type.toLocaleLowerCase()===sanReason.toLocaleLowerCase()));return sanLoss>0?-1===index?sanityLossEvents.push({type:sanReason,totalLoss:sanLoss,immunity:!1}):sanityLossEvents[index].totalLoss+=sanLoss:index>-1&&(sanityLossEvents.splice(index,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)}))),this.update({"system.sanityLossEvents":sanityLossEvents})}}maxLossToSanReason(sanReason,sanMaxFormula){const sanMax=new Roll(sanMaxFormula.toString()).evaluate({maximize:!0}).total,sanityLossEvent=this.getReasonSanLoss(sanReason);return sanityLossEvent.immunity?0:Math.max(0,sanMax-sanityLossEvent.totalLoss)}async looseSan(sanReason,sanLoss){return this.getReasonSanLoss(sanReason).immunity?0:(await this.setSan(this.san-sanLoss),this.setReasonSanLoss(sanReason,sanLoss),sanLoss)}sanLoss(checkPassed){return checkPassed?this.sanLossCheckPassed:this.sanLossCheckFailled}get sanLossCheckPassed(){return this.system.special?.sanLoss?.checkPassed}get sanLossCheckFailled(){return this.system.special?.sanLoss?.checkFailled}get sanLossMax(){return this.sanLossCheckFailled?isNaN(Number(this.sanLossCheckFailled))?new Roll(this.sanLossCheckFailled).evaluate({maximize:!0}).total:Number(this.sanLossCheckFailled):0}get sanLossMin(){return this.sanLossCheckPassed?isNaN(Number(this.sanLossCheckPassed))?new Roll(this.sanLossCheckPassed).evaluate({maximize:!0}).total:Number(this.sanLossCheckPassed):0}get dailySanLoss(){return this.system.attribs.san?.dailyLoss||0}get dailySanLimit(){return this.system.attribs.san?.dailyLimit||0}get rawSanMax(){if(this.system.attribs)return this.system.attribs?.san?.auto?this.cthulhuMythos?Math.max(99-this.cthulhuMythos,0):99:parseInt(this.system.attribs.san.max)}get sanMax(){return parseInt(this.system.attribs.san.max)}get mp(){return parseInt(this.system.attribs.mp.value)}get mpMax(){return this.system.attribs.mp.auto?null!=this.system.characteristics.pow.value?Math.floor(this.system.characteristics.pow.value/5):0:parseInt(this.system.attribs.mp.max)}async setMp(value){return value<0&&(value=0),value>parseInt(this.system.attribs.mp.max)&&(value=parseInt(this.system.attribs.mp.max)),await this.update({"system.attribs.mp.value":value})}get san(){return parseInt(this.system.attribs.san.value)}get int(){return this.getCharacteristic("int")}get occupationPointsSpent(){let occupationPoints=0;for(const skill of this.skills)skill.system.adjustments?.occupation&&(occupationPoints+=skill.system.adjustments.occupation);return occupationPoints}get occupationPoints(){if(!this.occupation)return 0;let points=0;for(const entry of Object.entries(this.occupation.system.occupationSkillPoints)){const[key,value]=entry,char=this.getCharacteristic(key);value.selected&&(points+=char.value*Number(value.multiplier))}return points}async resetOccupationPoints(){await this.update({"system.development.occupation":this.occupationPoints})}async resetArchetypePoints(){await this.update({"system.development.archetype":this.occupationPoints})}async resetPersonalPoints(){await this.update({"system.development.personal":this.personalPoints})}get archetypePointsSpent(){let archetypePoints=0;for(const skill of this.skills)skill.system.adjustments?.archetype&&(archetypePoints+=skill.system.adjustments.archetype);return archetypePoints}get archetypePoints(){return this.archetype?this.archetype.system.bonusPoints:0}get experiencePoints(){let experiencePoints=0;for(const skill of this.skills)skill.system.adjustments?.experience&&(experiencePoints+=skill.system.adjustments.experience);return experiencePoints}get personalPointsSpent(){let personalPoints=0;for(const skill of this.skills)skill.system.adjustments?.personal&&(personalPoints+=skill.system.adjustments.personal);return personalPoints}get personalPoints(){return 2*Number(this.system.characteristics.int.value)}get hasDevelopmentPhase(){for(const skill of this.skills)if(skill.system.flags?.developement)return!0;if(this.onlyRunOncePerSession)return!1;for(const sanityLossEvent of this.system.sanityLossEvents)if(!sanityLossEvent.immunity)return!0;return!1}async setSan(value){value<0&&(value=0),value>this.system.attribs.san.max&&(value=this.system.attribs.san.max);const loss=parseInt(this.system.attribs.san.value)-value;if(loss>0){let totalLoss=parseInt(this.system.attribs.san.dailyLoss)?parseInt(this.system.attribs.san.dailyLoss):0;totalLoss+=loss,loss>=5&&await this.setCondition(COC7.status.tempoInsane),totalLoss>=this.system.attribs.san.dailyLimit&&await this.setCondition(COC7.status.indefInsane),await this.update({"system.attribs.san.value":value,"system.attribs.san.dailyLoss":totalLoss})}else await this.update({"system.attribs.san.value":value});return value}async setAttribAuto(value,attrib){const updatedKey=`system.attribs.${attrib}.auto`;return await this.update({[updatedKey]:value})}async toggleAttribAuto(attrib){this.setAttribAuto(!this.system.attribs[attrib].auto,attrib)}static dbFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?"1D4":`${Math.floor((sum-45)/80)}D6`}static buildFromCharacteristics(characteristics){const sum=(characteristics.str.value??0)+(characteristics.siz.value??0);return sum<65?-2:sum<85?-1:sum<125?0:sum<165?1:Math.floor((sum-45)/80)+1}static hpFromCharacteristics(characteristics,type){const sum=parseInt(characteristics.siz.value??0,10)+parseInt(characteristics.con.value??0,10),divisor=game.settings.get("CoC7","pulpRuleDoubleMaxHealth")&&"character"===type?5:10;return Math.floor(sum/divisor)}static mpFromCharacteristics(characteristics){return Math.floor(characteristics.pow.value/5)}static movFromCharacteristics(characteristics,type,age){let MOV;return MOV=characteristics.dex.value>characteristics.siz.value&&characteristics.str.value>characteristics.siz.value?9:characteristics.dex.value>=characteristics.siz.value||characteristics.str.value>=characteristics.siz.value?8:7,"creature"===type||game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||isNaN(parseInt(age))||(MOV=parseInt(age)>=40?MOV-Math.floor(parseInt(age)/10)+3:MOV),Math.max(0,MOV)}get rawBuild(){return this.system.attribs&&this.system.attribs.build?("auto"===this.system.attribs.build.value&&(this.system.attribs.build.auto=!0),this.system.attribs.build.auto?CoCActor.buildFromCharacteristics(this.system.characteristics):this.system.attribs.build.value):null}get build(){return this.system.attribs.build.value}get rawDb(){return this.system.attribs&&this.system.attribs.db?("auto"===this.system.attribs.db.value&&(this.system.attribs.db.auto=!0),this.system.attribs.db.auto?CoCActor.dbFromCharacteristics(this.system.characteristics):this.system.attribs.db.value):null}get db(){return this.system.attribs.db.value}get rawMov(){if(!this.system.attribs)return null;if(!this.system.attribs.mov)return null;if("auto"===this.system.attribs.mov.value&&(this.system.attribs.mov.auto=!0),this.system.attribs.mov.auto){const MOV=CoCActor.movFromCharacteristics(this.system.characteristics,this.system.type,this.system.infos.age);if(MOV>0)return MOV}return this.system.attribs.mov.value}get mov(){return this.system.attribs.mov.value}get tokenId(){return this.token?`${this.token.scene._id}.${this.token.id}`:null}get locked(){return this.system.flags||(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),this.update({"system.flags.locked":!1})),this.system.flags.locked}getItemsFromName(name){return this.items.filter((i=>i.name===name))}set locked(value){this.update({"system.flags.locked":value})}async toggleActorFlag(flagName){const flagValue=!this.system.flags[flagName],name=`system.flags.${flagName}`;await this.update({[name]:flagValue})}async attributeCheck(attributeName,fastForward=!1,options={}){const attrib=this.getAttribute(attributeName.toLowerCase());if(!attrib)return ui.notifications.error(game.i18n.format("CoC7.ErrorNotFound",{missing:attributeName})),null;const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollAttribute(attrib.key),check.toMessage()}async characteristicCheck(characteristicName,fastForward=!1,options={}){const char=this.getCharacteristic(characteristicName);if(!char)return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:characteristicName,actor:this.name}));const check=new CoC7Check;if(options.modifier&&(check.diceModifier=Number(options.modifier)),options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){options.displayName=char.label;const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.rollCharacteristic(char.key),check.toMessage()}async skillCheck(skillData,fastForward,options={}){const skillIdentifier=skillData.name?skillData.name:skillData;console.log(skillIdentifier);let skill=[];if(!!skillIdentifier.match(/^i\.skill\./)){const item=this.getFirstSkillByCoCID(skillIdentifier);item&&skill.push(item)}if(skill.length||(skill=this.getSkillsByName(skillIdentifier)),!skill.length){let item=null;if(skillData.pack){const pack=game.packs.get(skillData.pack);if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(skillData.id)}else skillData.id&&(item=game.items.get(skillData.id));if(!item){const check=new CoC7Check;check._rawValue="?",await check.roll(),check.toMessage()}if(!item)return ui.notifications.warn(game.i18n.format("CoC7.NoSkill")+" "+game.i18n.format("CoC7.ErrorNotFoundForActor",{missing:skillData.name?skillData.name:skillData,actor:this.name}));let create=!1;if(await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:skillData.name,actor:this.name})}</p>`,yes:()=>{create=!0}}),!0!==create)return;if(await this.createEmbeddedDocuments("Item",[duplicate(item)]),skill=this.getSkillsByName(item.name),!skill.length)return;if(game.user.isGM){const skillValue=await SkillValueDialog.create(skill[0].name,skill[0].base),value=Number(skillValue.get("base-value"));await skill[0].updateValue(value)}}const check=new CoC7Check;if(void 0!==options.modifier&&(check.diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(check.difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!fastForward&&(void 0===options.difficulty||void 0===options.modifier)){const usage=await RollDialog.create(options);usage&&(check.diceModifier=Number(usage.get("bonusDice")),check.difficulty=Number(usage.get("difficulty")),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=this.tokenKey,check.skill=skill[0].id,"false"===options.blind?check.isBlind=!1:check.isBlind=!!options.blind,await check.roll(),check.toMessage()}async weaponCheck(weaponData,fastForward=!1){let weapon;if(void 0!==weaponData.uuid&&(weapon=await fromUuid(weaponData.uuid)),void 0!==weaponData.id&&(weapon=this.items.get(weaponData.id)),!weapon){let weapons=this.getItemsFromName(weaponData.name);if(0===weapons.length){if(!game.user.isGM)return void ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasNoWeaponNamed",{actorName:this.name,weaponName:weaponData.name}));{let item=null;const pack=weaponData.pack?game.packs.get(weaponData.pack):null;if(pack){if("Item"!==pack.metadata.entity)return;item=await pack.getDocument(weaponData.id)}else weaponData.id&&(item=game.items.get(weaponData.id));if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));let create=!1;await Dialog.confirm({title:`${game.i18n.localize("CoC7.AddWeapon")}`,content:`<p>${game.i18n.format("CoC7.AddWeapontHint",{weapon:weaponData.name,actor:this.name})}</p>`,yes:()=>{create=!0}});const actor=void 0!==this.parent?.actor?this.parent.actor:this;if(!0!==create)return;if(await actor.createEmbeddedDocuments("Item",[item.toJSON()]),weapons=actor.getItemsFromName(item.name),!weapons.length)return;await weapons[0].reload()}}else weapons.length>1&&ui.notifications.warn(game.i18n.format("CoC7.ErrorActorHasTooManyWeaponsNamed",{actorName:this.name,weaponName:weaponData.name}));weapon=weapons[0]}if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(this.tokenKey,weaponData.uuid||weapon.id,fastForward).createChatCard()}}async rollInitiative(hasGun=!1){if("optional"===game.settings.get("CoC7","initiativeRule")){const roll=new CoC7Check(this.actorKey);return roll.denyPush=!0,roll.denyLuck=!0,roll.denyBlindTampering=!0,roll.hideDice=!1===game.settings.get("CoC7","displayInitDices"),roll.flavor="Initiative roll",await roll.rollCharacteristic("dex",hasGun?1:0),roll.toMessage(),roll.successLevel+this.system.characteristics.dex.value/100}return hasGun?this.system.characteristics.dex.value+50:this.system.characteristics.dex.value}getActorFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}async setActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetActorFlag(flagName){await this.update({[`system.flags.${flagName}`]:!1})}getWeaponSkills(itemId){let weapon=fromUuidSync(itemId);if(weapon?void 0===weapon.system&&(weapon=game.packs.get(weapon.pack).get(weapon._id)):weapon=this.items.get(itemId),"weapon"!==weapon.type)return null;const skills=[];return weapon.system.skill.main.id&&skills.push(this.items.get(weapon.system.skill.main.id)),weapon.usesAlternativeSkill&&weapon.system.skill.alternativ.id&&skills.push(this.items.get(weapon.system.skill.alternativ.id)),skills}find(name){if(!name)return;const item=this.items.get(name);if(item)return{type:"item",value:item};const matches=/\(([^)]+)\)/.exec(name);let shortName=null;matches&&matches.length&&(shortName=matches[1]);const skill=this.skills.filter((s=>!!s.name&&(s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===name.toLocaleLowerCase().replace(/\s/g,"")||s.name.toLocaleLowerCase().replace(/\s/g,"")===shortName?.toLocaleLowerCase().replace(/\s/g,""))));if(skill.length)return{type:"item",value:skill[0]};const charKey=["str","con","siz","dex","app","int","pow","edu"];for(let i=0;i<charKey.length;i++){const char=this.getCharacteristic(charKey[i]);if(char){if(char.name=char.label,char.key?.toLocaleLowerCase()===name.toLowerCase()||char.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.shortName?.toLocaleLowerCase()===name.toLowerCase()||char.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char};if(char.label?.toLocaleLowerCase()===name.toLowerCase()||char.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"characteristic",value:char}}}const attribKey=["lck","san"];for(let i=0;i<attribKey.length;i++){const attr=this.getAttribute(attribKey[i]);if(attr){if(attr.name=attr.label,attr.key?.toLocaleLowerCase()===name.toLowerCase()||attr.key?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.shortName?.toLocaleLowerCase()===name.toLowerCase()||attr.shortName?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr};if(attr.label?.toLocaleLowerCase()===name.toLowerCase()||attr.label?.toLocaleLowerCase()===shortName?.toLowerCase())return{type:"attribute",value:attr}}}}get pilotSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.PilotSpecializationName")?.toLocaleLowerCase()))}get driveSkills(){return this.skills.filter((s=>s.system.properties?.special&&s.system.specialization?.toLocaleLowerCase()===game.i18n.localize("CoC7.DriveSpecializationName")?.toLocaleLowerCase()))}get tokenUuid(){return this.sheet.token?this.sheet.token.uuid:null}get tokenKey(){return this.sheet.token?`${this.sheet.token.parent.id}.${this.sheet.token.id}`:this.id}get actorKey(){return this.prototypeToken.actorLink?this.id:this.tokenKey}static getActorFromKey(key){if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}return game.actors.get(key)||null}get hasRollableCharacteristics(){for(const[,value]of Object.entries(this.system.characteristics))if(isNaN(Number(value.formula)))return!0;return!1}get hosRollableSkills(){for(const skill of this.skills)if(isNaN(skill.system?.value))return!0;return!1}async rollCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const r=new Roll(value.formula);await r.roll({async:!0}),r.total&&(characteristics[`system.characteristics.${key}.value`]=Math.floor(r.total))}await this.update(characteristics),await this.reportCharactedriticsValue()}async averageCharacteristicsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&!value.formula.startsWith("@")){const max=new Roll(value.formula).evaluate({maximize:!0}).total,min=new Roll(value.formula).evaluate({minimize:!0}).total,average=Math.floor((max+min)/2),charValue=average%5==0?average:10*Math.round(average/10);charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics),await this.reportCharactedriticsValue()}async reportCharactedriticsValue(){const characteristics={};for(const[key,value]of Object.entries(this.system.characteristics))if(value.formula&&value.formula.startsWith("@")){let charValue;try{charValue=new Roll(value.formula,this.parseCharacteristics()).evaluate({maximize:!0}).total}catch(err){charValue=null}charValue&&(characteristics[`system.characteristics.${key}.value`]=charValue)}await this.update(characteristics)}async setCharacteristic(name,value){const characteristic={},charValue=isNaN(parseInt(value))?null:parseInt(value);if(characteristic[name]=charValue,!charValue&&value.startsWith("@")){characteristic[name.replace(".value",".formula")]=value}await this.update(characteristic),await this.reportCharactedriticsValue()}async developementPhase(fastForward=!1){const failure=[],success=[],title=game.i18n.localize("CoC7.RollAll4Dev");let skillsRolled=0,message='<p class="chat-card">';for(const item of this.items)if("skill"===item.type&&item.developementFlag){skillsRolled++;const die=await new Die({faces:100}).evaluate({async:!0}),skillValue=item.value;let augment=null,skillMasteringMessage=null;if(die.total>skillValue||die.total>=95){const augmentDie=await new Die({faces:10}).evaluate({async:!0});if(success.push(item.id),skillValue<90&&skillValue+augmentDie.total>=90){const augmentSANDie=await new Die({faces:6,number:2}).evaluate({async:!0}),sanGained=augmentSANDie.total,sanGainedMessage=`Gained 2d6 (${augmentSANDie.values[0]} + ${augmentSANDie.values[1]} = ${sanGained}) SAN`;console.debug(sanGainedMessage),skillMasteringMessage=`<span class="upgrade-success">${game.i18n.format("CoC7.SanGained",{results:`${augmentSANDie.values[0]} + ${augmentSANDie.values[1]}`,sanGained,skill:item.name,skillValue:skillValue+augmentDie.total})}</span><br>`,await this.setSan(this.san+sanGained)}augment+=augmentDie.total,message+=`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:item.name,die:die.total,score:item.value,augment:augmentDie.total})}</span><br>`,null!==skillMasteringMessage&&(message+=skillMasteringMessage),await item.increaseExperience(augment)}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:item.name,die:die.total,score:item.value})}</span><br>`,failure.push(item.id);await item.unflagForDevelopement()}const sanityLossEvents=[];let changed=!1;for(const sanityLossEvent of this.system.sanityLossEvents)sanityLossEvent.immunity?sanityLossEvents.push(sanityLossEvent):sanityLossEvent.totalLoss>1?(sanityLossEvent.totalLoss--,sanityLossEvents.push(sanityLossEvent),changed=!0):changed=!0;if(changed&&(skillsRolled&&(message+="<br>"),message+=`<span>${game.i18n.format("CoC7.ReduceSanityLimits")}</span>`,await this.update({"system.sanityLossEvents":sanityLossEvents})),!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(skillsRolled?title:"",message,{speaker}),this.onlyRunOncePerSession=!0}return{failure,success}}async developLuck(fastForward=!1){const currentLuck=this.system.attribs.lck.value;currentLuck||await this.update({"system.attribs.lck.value":0});const pulpRuleDevelopmentRollLuck=game.settings.get("CoC7","pulpRuleDevelopmentRollLuck"),upgradeRoll=(await new Roll("1D100").roll({async:!0})).total,higherThanCurrentLuck=upgradeRoll>currentLuck;let augmentRoll;pulpRuleDevelopmentRollLuck?augmentRoll=higherThanCurrentLuck?"2D10+10":"1D10+5":higherThanCurrentLuck&&(augmentRoll="1D10");const title=game.i18n.localize("CoC7.RollLuck4Dev");let message='<p class="chat-card">';if(pulpRuleDevelopmentRollLuck||higherThanCurrentLuck){const augmentValue=(await new Roll(augmentRoll).roll({async:!0})).total;await this.update({"system.attribs.lck.value":this.system.attribs.lck.value+augmentValue}),message+=`<span class="upgrade-success">${game.i18n.format("CoC7.LuckIncreased",{die:upgradeRoll,score:currentLuck,augment:augmentValue})}</span>`}else message+=`<span class="upgrade-failed">${game.i18n.format("CoC7.LuckNotIncreased",{die:upgradeRoll,score:currentLuck})}</span>`;if(!fastForward){message+="</p>";const speaker={actor:this};await chatHelper.createMessage(title,message,{speaker})}}async developSkill(skillId,fastForward=!1){const skill=this.items.get(skillId);if(!skill)return;let title="",message="";const upgradeRoll=new Roll("1D100");if(await upgradeRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(upgradeRoll),upgradeRoll.total>skill.value||upgradeRoll.total>=95){const augmentRoll=new Roll("1D10");await augmentRoll.roll({async:!0}),fastForward||await CoC7Dice.showRollDice3d(augmentRoll),message=game.i18n.format("CoC7.DevSuccessDetails",{item:skill.name,augment:augmentRoll.total}),title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),await skill.increaseExperience(augmentRoll.total)}else title=game.i18n.format("CoC7.DevRollTitle",{item:skill.name,die:upgradeRoll.total,score:skill.value}),message=game.i18n.format("CoC7.DevFailureDetails",{item:skill.name});const speaker={actor:this._id};await chatHelper.createMessage(title,message,{speaker}),await skill.unflagForDevelopement()}hasConditionStatus(conditionName){const conditionValue=this.system.conditions?.[conditionName]?.value;return"boolean"==typeof conditionValue&&conditionValue}hasConditionValue(conditionName,field){if(this.hasConditionStatus(conditionName)){if(conditionName===COC7.status.tempoInsane&&"durationText"===field){const realTime=this.hasConditionValue(conditionName,"realTime"),duration=this.hasConditionValue(conditionName,"duration");if(void 0!==duration){if(!0===realTime)return duration+" "+game.i18n.localize("CoC7.rounds");if(!1===realTime)return duration+" "+game.i18n.localize("CoC7.hours")}return""}return this.system.conditions?.[conditionName]?.[field]}}async toggleCondition(conditionName){this.hasConditionStatus(conditionName)?await this.unsetCondition(conditionName):await this.setCondition(conditionName)}async setCondition(conditionName,{forceValue=!1,justThis=!1,realTime=null,duration=null}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>effect.flags.core?.statusId===conditionName)).map((effect=>effect.id)),custom={};switch(conditionName){case COC7.status.dead:custom.flags={core:{overlay:!0}};break;case COC7.status.tempoInsane:custom.flags={CoC7:{realTime:void 0}},custom.duration={rounds:void 0,seconds:void 0},!0!==realTime&&!1!==realTime||(custom.flags.CoC7.realTime=realTime,custom.flags={CoC7:{realTime}},null!=duration&&(realTime?custom.duration.rounds=duration:custom.duration.seconds=3600*duration))}if(0===effects.length){const effect=CONFIG.statusEffects.filter((effect=>effect.id===conditionName));if(1===effect.length){const effectData=mergeObject({label:game.i18n.localize(effect[0].label),icon:effect[0].icon,flags:{core:{statusId:effect[0].id}},disabled:!1},custom);await super.createEmbeddedDocuments("ActiveEffect",[effectData])}else forceValue=!0}else custom._id=effects[0],await super.updateEmbeddedDocuments("ActiveEffect",[custom]),forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons")){switch(conditionName){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.value`]:!0});break;case COC7.status.tempoInsane:{const fields={};fields[`system.conditions.${conditionName}.value`]=!0,!0!==realTime&&!1!==realTime||(fields[`system.conditions.${conditionName}.realTime`]=realTime,null!=duration&&(fields[`system.conditions.${conditionName}.duration`]=duration)),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.realTime`)||(fields[`system.conditions.${conditionName}.-=realTime`]=null),Object.prototype.hasOwnProperty.call(fields,`system.conditions.${conditionName}.duration`)||(fields[`system.conditions.${conditionName}.-=duration`]=null),await this.update(fields)}}if(!justThis)switch(conditionName){case COC7.status.criticalWounds:if(await this.setCondition(COC7.status.prone),!this.hasConditionStatus(COC7.status.unconscious)&&!this.hasConditionStatus(COC7.status.dead)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}break;case COC7.status.dead:await this.unsetCondition(COC7.status.criticalWounds),await this.unsetCondition(COC7.status.dying),await this.unsetCondition(COC7.status.unconscious)}}}async unsetCondition(conditionName,{forceValue=!1}={}){if(!forceValue&&game.settings.get("CoC7","enableStatusIcons")){const effects=this.effects.filter((effect=>effect.flags.core?.statusId===conditionName)).map((effect=>effect.id));effects.length>0?await super.deleteEmbeddedDocuments("ActiveEffect",effects):forceValue=!0}if(forceValue||!game.settings.get("CoC7","enableStatusIcons"))switch(conditionName){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:await this.update({[`system.conditions.${conditionName}.-=value`]:null}),await this.update({[`system.conditions.${conditionName}.value`]:!1})}}async resetCounter(counter){await this.update({[counter]:0})}async resetDailySanity(){await this.update({"system.attribs.san.dailyLimit":Math.floor(this.system.attribs.san.value/5),"system.attribs.san.dailyLoss":0})}get fightingSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.fighting&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get closeCombatWeapons(){const weaponList=[];for(const value of this.items)if("weapon"===value.type&&!value.system.properties.rngd){const skill=this.items.get(value.system.skill.main.id);value.system.skill.main.value=skill?skill.value:0,weaponList.push(value)}return weaponList.sort(CoC7Utilities.sortByNameKey),weaponList}get firearmSkills(){const skillList=[];for(const value of this.items)"skill"===value.type&&value.system.properties.firearm&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get user(){return game.users.find((user=>!(!user.character||user.character.id!==this.id)))}get dodgeSkill(){const skill=this.getFirstSkillByCoCID("i.skill.dodge");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge"));return 0!==skillList.length?skillList[0]:null}get creditRatingSkill(){const skill=this.getFirstSkillByCoCID("i.skill.credit-rating");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythosSkill(){const skill=this.getFirstSkillByCoCID("i.skill.cthulhu-mythos");if(skill)return skill;const skillList=this.getSkillsByName(game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"));return 0!==skillList.length?skillList[0]:null}get cthulhuMythos(){const CM=this.cthulhuMythosSkill;if(CM){const value=CM.value;return value||parseInt(CM.system.value)}return 0}get mythosHardened(){return this.getFlag("CoC7","mythosHardened")||!1}async setMythosHardened(){await this.setFlag("CoC7","mythosHardened",!0)}get mythosInsanityExperienced(){return this.getFlag("CoC7","mythosInsanityExperienced")||!1}async experienceFirstMythosInsanity(){await this.setFlag("CoC7","mythosInsanityExperienced",!0)}get creditRating(){const CR=this.creditRatingSkill;if(CR){const value=CR.value;return value||parseInt(CR.system.value)}return 0}static monetaryFormat(format,symbol,value){switch(format){case COC7.monetaryFormatKeys.lsd:return Math.floor(value/240)+"/"+Math.floor(value/12)%20+"/"+value%12;case COC7.monetaryFormatKeys.roman:return Math.floor(value/400)+"/"+Math.floor(value/16)%25+"/"+Math.floor(value/8)%2+"/"+Math.floor(value/4)%2+"/"+value%4;case COC7.monetaryFormatKeys.decimalLeft:return symbol+Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"");case COC7.monetaryFormatKeys.decimalRight:return Number(value).toLocaleString(void 0,{minimumFractionDigits:2}).replace(/\.00$/,"")+" "+symbol;case COC7.monetaryFormatKeys.integerLeft:return symbol+Number(value).toLocaleString();case COC7.monetaryFormatKeys.integerRight:return Number(value).toLocaleString()+" "+symbol}return"0"}static monetaryValue(format,values,CR,type,value){CR=CR||0;const row=values.find((r=>("object"==typeof r.min||r.min<=CR)&&("object"==typeof r.max||r.max>=CR)));if(void 0!==row&&void 0!==row[type]&&void 0!==row[value])switch(format){case COC7.monetaryFormatKeys.lsd:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 240*CR*row[value];case COC7.monetaryTypeKeys.value:return 240*row[value];case COC7.monetaryTypeKeys.s:return 12*row[value];case COC7.monetaryTypeKeys.d:return 1*row[value]}break;case COC7.monetaryFormatKeys.roman:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return 400*CR*row[value];case COC7.monetaryTypeKeys.value:return 400*row[value];case COC7.monetaryTypeKeys.denarii:return 16*row[value];case COC7.monetaryTypeKeys.quinarii:return 8*row[value];case COC7.monetaryTypeKeys.sestertii:return 4*row[value];case COC7.monetaryTypeKeys.asses:return 1*row[value]}break;default:switch(row[type]){case COC7.monetaryTypeKeys.multiplier:return CR*row[value];case COC7.monetaryTypeKeys.value:return 1*row[value]}}return 0}get spendingLevel(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"spendingType","spendingValue")}get cash(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"cashType","cashValue")}get assets(){return CoCActor.monetaryValue(this.system.monetary.format,this.system.monetary.values,this.creditRating,"assetsType","assetsValue")}get skills(){const skillList=[];for(const value of this.items)"skill"===value.type&&skillList.push(value);return skillList.sort(CoC7Utilities.sortByNameKey),skillList}get owners(){return game.users.filter((u=>this.testUserPermission(u,"OWNER")&&!u.isGM))}get player(){return this.owners.filter((u=>u.character?.id===this.id))}get characterUser(){return game.users.contents.filter((u=>u.character?.id===this.id))[0]||null}async setHp(value){value<0&&(value=0),value>this.system.attribs.hp.max&&(value=this.system.attribs.hp.max);const healthBefore=this.hp;let damageTaken;return isNaN(healthBefore)||value>=healthBefore?await this._setHp(value):(damageTaken=healthBefore-value,await this.dealDamage(damageTaken,{ignoreArmor:!0})),value}async dealDamage(amount,options={}){const armorData=options.armor?options.armor:this.system.attribs.armor,grossDamage=parseInt(amount);let armorValue=0;options.ignoreArmor||null===armorData||(CoC7Utilities.isFormula(armorData)?armorValue=(await new Roll(armorData).roll({async:!0})).total:isNaN(Number(armorData))?isNaN(Number(armorData?.value))?ui.notifications.warn(game.i18n.format("CoC7.ErrorUnableToParseArmorFormula",{value:armorData})):armorValue=Number(armorData.value):armorValue=Number(armorData));const netDamage=grossDamage-armorValue;if(netDamage<=0)return 0;if(await this._setHp(this.hp-netDamage),netDamage>=this.system.attribs.hp.max)await this.setCondition(COC7.status.dead);else if(game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")){if(0===this.hp)netDamage>=Math.ceil(this.system.attribs.hp.max/2)?this.setCondition(COC7.status.dying):this.setCondition(COC7.status.unconscious);else if(netDamage>=Math.ceil(this.system.attribs.hp.max/2)){new CoC7ConCheck(this.isToken?this.tokenKey:this.id).toMessage()}}else{let hasMajorWound=!1;netDamage>=Math.ceil(this.system.attribs.hp.max/2)?(await this.setCondition(COC7.status.criticalWounds),hasMajorWound=!0):hasMajorWound=this.hasConditionStatus(COC7.status.criticalWounds),0===this.hp&&(await this.setCondition(COC7.status.unconscious),hasMajorWound&&this.setCondition(COC7.status.dying))}return netDamage}get majorWound(){return this.hasConditionStatus(COC7.status.criticalWounds)}get dying(){return this.hasConditionStatus(COC7.status.dying)}get unconscious(){return this.hasConditionStatus(COC7.status.unconscious)}get dead(){return this.hasConditionStatus(COC7.status.dead)}get prone(){return this.hasConditionStatus(COC7.status.prone)}}class CoC7Link{static get CHECK_TYPE(){return{CHECK:"check",SANLOSS:"sanloss",ITEM:"item",EFFECT:"effect"}}static get LINK_TYPE(){return{CHARACTERISTIC:"characteristic",ATTRIBUTE:"attribute",SKILL:"skill"}}static init(){CONFIG.CoC7Link={documentClass:CoC7Link}}static bindEventsHandler(html){html.find("a.coc7-link:not(.hascoc7linked)").on("click",(event=>CoC7Link._onLinkClick(event))).on("dragstart",(event=>CoC7Link._onDragCoC7Link(event))).addClass("hascoc7linked")}static _linkFromEvent(event){const a=event.currentTarget,i=a.querySelector("[data-link-icon]"),data=duplicate(a.dataset),oldType=data.type;return data.type="CoC7Link",data.icon=null,oldType&&(data.linkType=oldType),data.object&&("string"==typeof data.object||data.object instanceof String)&&(data.object=JSON.parse(data.object)),i.dataset&&i.dataset.linkIcon&&"fas fa-dice"!==i.dataset.linkIcon&&(data.icon=i.dataset.linkIcon),data.displayName=a.dataset.displayName?a.innerText:null,data.difficulty&&(data.difficulty=CoC7Utilities.convertDifficulty(data.difficulty)),data}static _onDragCoC7Link(event){const data=CoC7Link._linkFromEvent(event);event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}static async fromDropData(data,options={}){const cls=new CoC7Link;cls.object=mergeObject({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.CHECK,linkType:CoC7Link.LINK_TYPE.SKILL,difficulty:CoC7Check.difficultyLevel.regular,modifier:0,object:{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",changes:[]}},data);for(const key of["name","displayName","icon","id","pack","sanMin","sanMax","sanReason"])cls.object[key]=cls.object[key]??"";return void 0!==cls.object.object.icon&&void 0!==cls.object.object.external&&["http","https"].includes(cls.object.object.external)&&(cls.object.object.icon=cls.object.object.external+"://"+cls.object.object.icon),cls.options=options,cls}static _createLink(match){const name=match[4]??void 0,options=match[3]??void 0,type=match[2]??void 0,data={cls:["coc7-link"],dataset:{check:type},icon:null,blind:!1,name};if(type===CoC7Link.CHECK_TYPE.EFFECT)data.effect=JSON.parse(options),data.dataset.object=options,void 0!==data.effect.icon&&void 0!==data.effect.external&&["http","https"].includes(data.effect.external)&&(data.effect.icon=data.effect.external+"://"+data.effect.icon);else{const matches=options.matchAll(/[^,]+/gi);for(const match of Array.from(matches)){let[key,value]=match[0].split(":");"icon"===key&&(data.icon=value),"blind"===key&&void 0===value&&(value=!0,data.blind=[CoC7Link.CHECK_TYPE.CHECK].includes(type.toLowerCase())),data.dataset[key]=value}void 0!==data.dataset.icon&&void 0!==data.dataset.external&&["http","https"].includes(data.dataset.external)&&(data.dataset.icon=data.dataset.external+"://"+data.dataset.icon,data.icon=data.dataset.icon)}let title;const difficulty=CoC7Check.difficultyString(data.dataset.difficulty);switch(type.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{let humanName=data.dataset.name;["attributes","attribute","attrib","attribs"].includes(data.dataset.type?.toLowerCase())&&("lck"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Luck")),"san"===data.dataset.name&&(humanName=game.i18n.localize("CoC7.Sanity"))),["charac","char","characteristic","characteristics"].includes(data.dataset.type?.toLowerCase())&&(humanName=CoC7Utilities.getCharacteristicNames(data.dataset.name)?.label),title=game.i18n.format(`CoC7.LinkCheck${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:humanName});break}case CoC7Link.CHECK_TYPE.SANLOSS:title=game.i18n.format(`CoC7.LinkSanLoss${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,sanMin:data.dataset.sanMin,sanMax:data.dataset.sanMax});break;case CoC7Link.CHECK_TYPE.ITEM:title=game.i18n.format(`CoC7.LinkItem${data.dataset.difficulty?"Diff":""}${data.dataset.modifier?"Modif":""}`,{difficulty,modifier:data.dataset.modifier,name:data.dataset.name});break;case CoC7Link.CHECK_TYPE.EFFECT:title=data.effect.label}name?data.dataset.displayName=!0:data.name=title;const a=document.createElement("a");a.title=game.user.isGM?data.name:title,a.classList.add(...data.cls);for(const[k,v]of Object.entries(data.dataset))a.dataset[k]=v;return a.draggable=!0,data.icon=data.icon??data.effect?.icon??"fas fa-dice",(data.icon.includes("\\")||data.icon.includes("."))&&(data.img=data.icon),data.blind&&(a.innerHTML+='<i class="fas fa-eye-slash"></i>'),data.img?a.innerHTML+=`<img data-link-icon="${data.icon}" src="${data.img}">`:a.innerHTML+=`<i data-link-icon="${data.icon}" class="link-icon ${data.icon}"></i>`,a.innerHTML+=`<span>${data.name}</span>`,a}_createDocumentLink(eventData,{relativeTo,label}={}){if(!eventData.check)return"";switch(eventData.check.toLowerCase()){case CoC7Link.CHECK_TYPE.CHECK:{if(!eventData.linkType||!eventData.name)return"";let options=`${eventData.blind?"blind,":""}type:${eventData.linkType},name:${eventData.name}`;if(void 0!==eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),void 0!==eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.check[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.SANLOSS:{if(!eventData.sanMax||!eventData.sanMin)return"";let options=`${eventData.blind?"blind,":""}sanMax:${eventData.sanMax},sanMin:${eventData.sanMin}`;if(eventData.sanReason&&(options+=`,sanReason:${eventData.sanReason}`),eventData.difficulty&&eventData.difficulty!==CoC7Check.difficultyLevel.regular&&(options+=`,difficulty:${eventData.difficulty}`),eventData.modifier&&0!==eventData.modifier&&(options+=`,modifier:${eventData.modifier}`),eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}let link=`@coc7.sanloss[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.ITEM:{if(!eventData.name)return"";let options=`${eventData.blind?"blind,":""}name:${eventData.name}`;if(eventData.icon){const parts=eventData.icon.match(/^(https?):\/\/(.+)$/);options+=parts?`,external:${parts[1]},icon:${parts[2]}`:`,icon:${eventData.icon}`}eventData.pack&&(options+=`,pack:${eventData.pack}`),eventData.id&&(options+=`,id:${eventData.id}`);let link=`@coc7.item[${options}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}case CoC7Link.CHECK_TYPE.EFFECT:{const parts=eventData.object.icon.match(/^(https?):\/\/(.+)$/);parts&&(eventData.object.external=parts[1],eventData.object.icon=parts[2]);let link=`@coc7.effect[${JSON.stringify(eventData.object)}]`;const displayName=eventData.displayName??label??"";return displayName&&(link+=`{${displayName}}`),link}}return"?"}static async _onLinkActorClick(actor,options,{shiftKey=!1}={}){switch(options.check){case CoC7Link.CHECK_TYPE.CHECK:if(["charac","char","characteristic","characteristics"].includes(options.linkType.toLowerCase()))return actor.characteristicCheck(options.name,shiftKey,options);if(["skill"].includes(options.linkType.toLowerCase()))return actor.skillCheck(options,shiftKey,options);if(["attributes","attribute","attrib","attribs"].includes(options.linkType.toLowerCase()))return actor.attributeCheck(options.name,shiftKey,options);break;case CoC7Link.CHECK_TYPE.SANLOSS:return void SanCheckCard.create(actor.actorKey,options,{fastForward:shiftKey});case CoC7Link.CHECK_TYPE.ITEM:return actor.weaponCheck(options,shiftKey);case CoC7Link.CHECK_TYPE.EFFECT:await actor.createEmbeddedDocuments("ActiveEffect",[{label:options.object.label,icon:options.object.icon,changes:options.object.changes}])}}static toChatMessage(options){const option={speaker:{alias:game.user.name}};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}),chatHelper.createMessage(null,message,option)}static toWhisperMessage(options,actors){for(const actor of actors){const option={speaker:{alias:game.user.name},whisper:actor.owners.map((a=>a.id))};let message;const link=(new CoC7Link)._createDocumentLink(options);message=options.check===CoC7Link.CHECK_TYPE.EFFECT?`<div class="effect-message">${link}</div>`:game.i18n.format("CoC7.MessageTargetCheckRequested",{name:actor.name,check:link}),chatHelper.createMessage(null,message,option)}}static async _onLinkClick(event){const options=CoC7Link._linkFromEvent(event);if(game.user.isGM){if(isCtrlKey(event))return void CoC7ContentLinkDialog.create(options);if(canvas.tokens.controlled.length){for(const token of canvas.tokens.controlled)CoC7Link._onLinkActorClick(token.actor,options,{shiftKey:event.shiftKey});return}const speaker=ChatMessage.getSpeaker(),actor=ChatMessage.getSpeakerActor(speaker);return actor?void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey}):void CoC7Link.toChatMessage(options)}{const speaker=ChatMessage.getSpeaker();let actor=ChatMessage.getSpeakerActor(speaker);if(!actor){const actors=game.actors.filter((a=>(a.ownership[game.user.id]??a.ownership.default)>=CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER));1===actors.length&&(actor=actors[0])}if(actor)return void CoC7Link._onLinkActorClick(actor,options,{shiftKey:event.shiftKey})}ui.notifications.warn(game.i18n.localize("CoC7.WarnNoControlledActor"))}setValue(key,value){this.object[key]=value}get link(){return this._createDocumentLink(this.object)}get id(){return this.object.id}get pack(){return this.object.pack}get checkType(){return this.object.check}get difficulty(){return this.object.difficulty}get icon(){return this.object.icon}get displayName(){return this.object.displayName}get modifier(){return this.object.modifier}get linkType(){return this.object.linkType}get sanMin(){return this.object.sanMin}get sanMax(){return this.object.sanMax}get sanReason(){return this.object.sanReason}get effect(){return this.object.object}get checkName(){if(this.isCharacteristicCheck){const characteristics=CoCActor.getCharacteristicDefinition();return characteristics.find((c=>c.key===this.object.name||c.shortName===this.object.name||c.label===this.object.name))?.key??""}return this.object.name}get isCheck(){return this.object.check===CoC7Link.CHECK_TYPE.CHECK}get isCharacteristicCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.CHARACTERISTIC}get isAttributeCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.ATTRIBUTE}get isSkillCheck(){return this.isCheck&&this.object.linkType===CoC7Link.LINK_TYPE.SKILL}get isItemCheck(){return this.object.check===CoC7Link.CHECK_TYPE.ITEM}get isSanLossCheck(){return this.object.check===CoC7Link.CHECK_TYPE.SANLOSS}get isEffect(){return this.object.check===CoC7Link.CHECK_TYPE.EFFECT}get isBlind(){return this.isCheck&&this.object.blind}}class CoC7Parser{static enrichHTML(content){const html=document.createElement("div");html.innerHTML=String(content);let text=[];text=TextEditor._getTextNodes(html);const rgx=new RegExp("@(coc7)\\.(check|effect|item|sanloss)\\[([^\\[\\]]*(?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\])*[^\\[\\]]*\\])*[^\\[\\]]*)\\](?:{([^}]+)})?","gi");return TextEditor._replaceTextContent(text,rgx,CoC7Link._createLink),html.innerHTML}static ParseSheetContent(app,html){for(const element of html.find("div.editor-content > *, p"))element.outerHTML.toLocaleLowerCase().includes("@coc7")&&(element.outerHTML=CoC7Parser.enrichHTML(element.outerHTML));CoC7Link.bindEventsHandler(html)}static ParseMessage(app,html,data){if(app.isContentVisible){if(data.message.content.toLocaleLowerCase().includes("@coc7")){const parsedContent=CoC7Parser.enrichHTML(data.message.content);html.find(".message-content").html(parsedContent),data.message.content=parsedContent}return!0}}}class CoC7Item extends Item{constructor(data,context){if(data.type in CONFIG.Item.documentClasses&&!context?.extended)return new CONFIG.Item.documentClasses[data.type](data,{extended:!0,...context});void 0===data.img&&("skill"===data.type?data.img="systems/CoC7/assets/icons/skills.svg":"status"===data.type?data.img="icons/svg/aura.svg":"weapon"===data.type&&(data.img="icons/svg/sword.svg")),super(data,context)}async _createDocumentLink(eventData,{relativeTo,label}={}){if("string"==typeof eventData.type&&"string"==typeof eventData.uuid&&"Item"===eventData.type&&eventData.uuid.match(/^Actor\./)&&relativeTo instanceof CONFIG.JournalEntryPage.documentClass){const item=await fromUuid(eventData.uuid);if(["skill","weapon"].includes(item.type))return"@coc7.check[type:"+item.type+",name:"+item.name+"]"}return super._createDocumentLink(eventData,{relativeTo,label})}static get iconLanguage(){return"systems/CoC7/assets/icons/skills/language.svg"}static get flags(){return{malfunction:"malfc"}}async toggleProperty(propertyId,override=!1){let fighting,firearms,checkedProps={};if(void 0!==COC7.eras[propertyId])return CoCIDEditor.eraToggle(this,propertyId);if("weapon"!==this.type||override){if("skill"===this.type&&!override){let modif=!1;if("combat"===propertyId&&(this.system.properties.combat?checkedProps={"system.properties.combat":!1,"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.specialization":"",name:this.system.skillName}:this.system.properties.firearm?firearms=!0:fighting=!0,modif=!0),"fighting"===propertyId&&(this.system.properties.fighting?(firearms=!0,fighting=!1):(firearms=!1,fighting=!0),modif=!0),"firearm"===propertyId&&(this.system.properties.firearm?(firearms=!1,fighting=!0):(firearms=!0,fighting=!1),modif=!0),modif){if(fighting){checkedProps={"system.properties.fighting":!0,"system.properties.firearm":!1,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.fightingSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}if(firearms){checkedProps={"system.properties.fighting":!1,"system.properties.firearm":!0,"system.properties.combat":!0,"system.properties.special":!0};const parts=CoC7Item.getNamePartsSpec(this.system.skillName,game.i18n.localize(COC7.firearmSpecializationName));checkedProps.name=parts.name,checkedProps.skillName=parts.skillName,checkedProps["system.specialization"]=parts.specialization}}}}else if("ahdb"===propertyId&&(checkedProps=this.system.properties.ahdb?{"system.properties.ahdb":!1}:{"system.properties.ahdb":!0,"system.properties.addb":!1}),"addb"===propertyId&&(checkedProps=this.system.properties.addb?{"system.properties.addb":!1}:{"system.properties.addb":!0,"system.properties.ahdb":!1}),"shotgun"===propertyId&&(checkedProps=this.system.properties.shotgun?{"system.properties.shotgun":!1,"system.range.extreme.value":null,"system.range.extreme.damage":null,"system.range.long.value":null,"system.range.long.damage":null}:{"system.properties.rngd":!0,"system.properties.melee":!1,"system.properties.shotgun":!0}),"melee"===propertyId||"rngd"===propertyId){let meleeWeapon;"melee"!==propertyId||this.system.properties.melee||(meleeWeapon=!0),"melee"===propertyId&&this.system.properties.melee&&(meleeWeapon=!1),"rngd"!==propertyId||this.system.properties.rngd||(meleeWeapon=!1),"rngd"===propertyId&&this.system.properties.rngd&&(meleeWeapon=!0),checkedProps=meleeWeapon?{"system.properties.melee":!0,"system.properties.rngd":!1,"system.properties.shotgun":!1,"system.properties.brst":!1,"system.properties.auto":!1,"system.properties.dbrl":!1}:{"system.properties.melee":!1,"system.properties.rngd":!0}}if("special"===propertyId&&(checkedProps=this.system.properties[propertyId]?{"system.properties.special":!1,"system.properties.fighting":!1,"system.properties.firearm":!1,"system.properties.combat":!1,"system.specialization":"",name:this.system.skillName}:{"system.properties.special":!0,name:this.system.specialization+" ("+this.system.skillName+")"}),Object.keys(checkedProps).length>0){return await this.update(checkedProps)}{const propName=`system.properties.${propertyId}`,propValue=!this.system.properties[propertyId];await this.update({[propName]:propValue}).then((item=>item))}}hasProperty(propertyId){return this.isIncludedInSet("properties",propertyId)}get shortName(){return this.system.properties.special?this.system.skillName:this.name}async updateRoll(roll){return"updateRoll"in this.sheet?await this.sheet.updateRoll(roll):"updateRoll"in this?await this.updateRoll(roll):void 0}static getNamePartsSpec(skillName,specialization){if(!specialization)return{name:skillName,specialization:"",skillName};const specNameRegex=new RegExp("^("+CoC7Utilities.quoteRegExp(specialization)+")\\s*\\((.+)\\)$","i"),match=skillName.match(specNameRegex);return match&&(specialization=match[1],skillName=match[2]),{name:specialization+" ("+skillName+")",specialization,skillName}}static getNameWithoutSpec(item){if(item instanceof CoC7Item){if(item.system?.properties?.special&&void 0!==item.system.skillName)return item.system.skillName}else if(item.properties?.special&&void 0!==item.skillName)return item.skillName;return item.name}static isAnySpec(item){return!("skill"!==item.type||!item.system.properties?.special)&&(!(!item.system.properties?.requiresname&&!item.system.properties?.picknameonly)||[game.i18n.localize("CoC7.AnySpecName").toLowerCase(),"any"].includes(CONFIG.Item.documentClasses.skill.guessNameParts(item.name).skillName.toLowerCase()))}async checkSkillProperties(){if("skill"!==this.type)return;const checkedProps={};return this.system.properties.combat?(this.system.properties.special||(this.system.properties.special=!0,checkedProps["system.properties.special"]=!0),this.system.properties.fighting||this.system.properties.firearm||(this.system.properties.fighting=!0,checkedProps["system.properties.fighting"]=!0),!this.system.properties.fighting||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.fightingSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.fightingSpecializationName)),!this.system.properties.firearm||this.system.specialization&&""!==this.system.specialization||(this.system.specialization=game.i18n.localize(COC7.firearmSpecializationName),checkedProps["system.specialization"]=game.i18n.localize(COC7.firearmSpecializationName))):(this.system.properties.fighting&&(this.system.properties.fighting=!1,checkedProps["system.properties.fighting"]=!1),this.system.properties.firearm&&(this.system.properties.firearm=!1,checkedProps["system.properties.firearm"]=!1)),Object.keys(checkedProps).length>0&&await this.update(checkedProps),checkedProps}isIncludedInSet(set,propertyId){this.system[set]||(this.system[set]=[]);return this.system[set].indexOf(propertyId)>-1}async flagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!0}))}async unflagForDevelopement(){(game.settings.get("CoC7","xpEnabled")||game.user.isGM)&&(this.system.flags||await this.update({"system.flags":{}}),await this.update({"system.flags.developement":!1}))}get developementFlag(){return this.getItemFlag("developement")}async toggleItemFlag(flagName,eraseAdjustment=!0){const flagValue=!this.getItemFlag(flagName),name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||flagValue||!eraseAdjustment?"developement"===flagName?game.settings.get("CoC7","xpEnabled")||game.user.isGM?await this.update({[name]:flagValue}):ui.notifications.info(game.i18n.localize("CoC7.SkillXpGainDisabled")):await this.update({[name]:flagValue}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:flagValue})}async setItemFlag(flagName){await this.update({[`system.flags.${flagName}`]:!0})}async unsetItemFlag(flagName,eraseAdjustment=!0){const name=`system.flags.${flagName}`;"occupation"!==flagName&&"archetype"!==flagName||!eraseAdjustment?await this.update({[name]:!1}):await this.update({[`system.adjustments.${flagName}`]:null,[name]:!1})}getItemFlag(flagName){return this.system.flags?!!this.system.flags[flagName]&&this.system.flags[flagName]:(this.system.flags={},this.system.flags.locked=!0,this.update({"system.flags":{}}),!1)}get usesAlternativeSkill(){return"weapon"===this.type&&(!0===this.system.properties?.auto||!0===this.system.properties?.brst||!0===this.system.properties?.thrown)}get maxUsesPerRound(){if("weapon"!==this.type)return null;const multiShot=parseInt(this.system.usesPerRound.max);return isNaN(multiShot)?0:multiShot}get usesPerRound(){if("weapon"!==this.type)return null;const singleShot=parseInt(this.system.usesPerRound.normal);return isNaN(singleShot)?0:singleShot}get usesPerRoundString(){let usesPerRound;return usesPerRound=this.system.usesPerRound.normal?this.system.usesPerRound.normal:"1",this.system.usesPerRound.max&&(usesPerRound+=`(${this.system.usesPerRound.max})`),this.system.properties.auto&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponAuto")}`),this.system.properties.brst&&(usesPerRound+=` ${game.i18n.localize("CoC7.WeaponBrst")}`,this.system.usesPerRound.burst&&(usesPerRound+=`(${this.system.usesPerRound.burst})`)),usesPerRound}get multipleShots(){return"weapon"!==this.type?null:!(this.maxUsesPerRound<=1)}get singleShot(){return"weapon"!==this.type?null:!!this.usesPerRound}get baseRange(){return parseInt(this.system.range.normal.value)}get longRange(){return parseInt(this.system.range.long.value)}get extremeRange(){return parseInt(this.system.range.extreme.value)}get skillProperties(){if("skill"!==this.type)return[];const skillProperties=[];for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&skillProperties.push(game.i18n.localize(value));return skillProperties}static async calculateBase(actor,data){if("skill"!==data.type)return null;if(String(data.system.base).includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.actor.")&&(parsed[key.substring(1)]=getProperty(actor,value.substring(11)));let value;try{value=Math.floor(new Roll(data.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return value}return isNaN(parseInt(data.system.base))?null:parseInt(data.system.base)}get _base(){if("skill"!==this.type)return[null,!1];if("string"!=typeof this.system.base)return[this.system.base,!1];if(this.system.base.includes("@")){const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));let value;try{value=Math.floor(new Roll(this.system.base,parsed).evaluate({maximize:!0}).total)}catch(err){value=0}return[value,!0]}return[isNaN(parseInt(this.system.base))?null:parseInt(this.system.base),!1]}async asyncBase(){const e=this._base;return e[1]&&(console.info(`[COC7] (${this.parent?.name}) Evaluating skill ${this.name}:${this.system.base} to ${e[0]}`),await this.update({"system.base":e[0]})),e[0]}get base(){const e=this._base;return e[1]&&this.update({"system.base":e[0]}),e[0]}getBulletLeft(){return"weapon"!==this.type?null:this.system.ammo?this.system.ammo:(this.setBullets(0),0)}async reload(){if("weapon"!==this.type)return null;const maxBullet=this.system.bullets?parseInt(this.system.bullets):1;await this.setBullets(maxBullet)}async setBullets(bullets){if("weapon"!==this.type)return null;await this.update({"system.ammo":bullets||0})}async addBullet(){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft(),maxBullets=this.system.bullets?parseInt(this.system.bullets):1;bullets+1>=maxBullets?await this.setBullets(maxBullets):await this.setBullets(bullets+1)}async shootBullets(x){if("weapon"!==this.type)return null;const bullets=await this.getBulletLeft();x>bullets?await this.setBullets(0):await this.setBullets(bullets-x)}static mergeOptionalSkills(skillList,options){return skillList.concat(options).reduce(((newArray,item)=>!CoC7Item.isAnySpec(item)&&newArray.find((skill=>skill.name===item.name))?newArray:[...newArray,item]),[]).sort(CoC7Utilities.sortByNameKey)}static _getChatCardActor(card){const tokenKey=card.dataset.tokenId;if(tokenKey){const[sceneId,tokenId]=tokenKey.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];{const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;return new Token(tokenData).actor}}const actorId=card.dataset.actorId;return game.actors.get(actorId)||null}getChatData(htmlOptions={}){htmlOptions.async=!1;const data=duplicate(this.system);"string"==typeof data.description&&(data.description={value:data.description,special:""}),void 0===data.description.value&&(data.description.value=""),void 0===data.description.special&&(data.description.special="");const labels=[];data.description.value=TextEditor.enrichHTML(data.description.value,htmlOptions),data.description.value=CoC7Parser.enrichHTML(data.description.value),data.description.special=TextEditor.enrichHTML(data.description.special,htmlOptions),data.description.special=CoC7Parser.enrichHTML(data.description.special);const props=[],fn=this[`_${this.type}ChatData`];if(fn&&fn.bind(this)(data,labels,props,htmlOptions),"skill"===this.type)for(const[key,value]of Object.entries(COC7.skillProperties))!0===this.system.properties[key]&&props.push(value);return data.properties=props.filter((p=>!!p)),data.labels=labels,data}_weaponChatData(data,labels,props){for(const[key,value]of Object.entries(COC7.weaponProperties))!0===this.system.properties[key]&&props.push(value);let skillLabel=game.i18n.localize("CoC7.Skill"),skillName="",found=!1;if(this.system.skill.main.id){const skill=this.actor?.items.get(this.system.skill.main.id);skill&&(skillName+=CoC7Item.getNameWithoutSpec(skill),found=!0)}if(this.usesAlternativeSkill&&this.system.skill.alternativ.id){skillLabel=game.i18n.localize("CoC7.Skills");const skill=this.actor?.items.get(this.system.skill.alternativ.id);skill&&(skillName+=`/${CoC7Item.getNameWithoutSpec(skill)}`,found=!0)}found||(skillName=this.system.skill.main.name,this.usesAlternativeSkill&&this.system.skill.alternativ.name&&(skillName+=`/${this.system.skill.alternativ.name}`)),skillName&&labels.push({name:skillLabel,value:skillName}),labels.push({name:game.i18n.localize("CoC7.WeaponUsesPerRound"),value:this.usesPerRoundString}),labels.push({name:game.i18n.localize("CoC7.WeaponMalfunction"),value:this.system.malfunction?this.system.malfunction:"-"}),this.system.bullets&&labels.push({name:game.i18n.localize("CoC7.WeaponBulletsInMag"),value:this.system.bullets})}canBePushed(){return!("skill"!==this.type||!this.system.properties.push)}get impale(){return this.system.properties.impl}get isDodge(){return"skill"===this.type&&this.name.toLowerCase()===game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.dodge").toLowerCase()}}class CoC7Check{constructor(actor=null,skill=null,item=null,diceMod=0,difficulty=null,flatThresholdModifier=0,flatDiceModifier=0){if(this.actor=actor,this.skill=skill,this.item=item,this.difficulty=difficulty,this.diceModifier=diceMod,this.rawValue=0,this.successLevel=null,this.referenceMessageId=null,this.pushing=!1,this.flatDiceModifier=flatDiceModifier,this.flatThresholdModifier=flatThresholdModifier,null===difficulty){const isUnknown="unknown"===game.settings.get("CoC7","defaultCheckDifficulty");this.difficulty=isUnknown?CoC7Check.difficultyLevel.unknown:CoC7Check.difficultyLevel.regular}}static get cardType(){return"rollCard"}static get difficultyLevel(){return{unknown:-1,regular:1,hard:2,extreme:3,critical:4,impossible:9}}static get successLevel(){return{fumble:-99,failure:0,regular:1,hard:2,extreme:3,critical:4}}static get type(){return{characteristic:"characteristic",attribute:"attribute",skill:"item",item:"item",value:"value"}}static difficultyString(difficultyLevel){switch(isNaN(Number(difficultyLevel))?difficultyLevel:Number(difficultyLevel)){case"?":return game.i18n.localize("CoC7.UnknownDifficulty");case"+":return game.i18n.localize("CoC7.HardDifficulty");case"++":return game.i18n.localize("CoC7.ExtremeDifficulty");case"+++":return game.i18n.localize("CoC7.CriticalDifficulty");case 0:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.localize("CoC7.UnknownDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.localize("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.localize("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.extreme:return game.i18n.localize("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.localize("CoC7.CriticalDifficulty");default:return null}}get rawValue(){if(this._rawValue||(this.characteristic&&(this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.rawValue=this.skill.value),this.attribute&&(this.rawValue=this.actor.system.attribs[this.attribute].value)),this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this._rawValue+this.flatThresholdModifier<1?1:this._rawValue+this.flatThresholdModifier:this._rawValue}set rawValue(x){this._rawValue=x}set uuid(x){this._uuid=x}get uuid(){return this._uuid||(this._uuid=foundry.utils.randomID(16)),this._uuid}get hasCard(){return ui.chat.collection.filter((message=>this.uuid===message.getFlag("CoC7","uuid")&&CoC7Check.cardType===message.getFlag("CoC7","type"))).length>0}get rawValueString(){if(this._rawValue)return this.flatThresholdModifier&&game.settings.get("CoC7","allowFlatThresholdModifier")?this.flatThresholdModifier<0?this._rawValue.toString()+this.flatThresholdModifier.toString():this._rawValue.toString()+"+"+this.flatThresholdModifier.toString():this._rawValue.toString()}get criticalThreshold(){return 1}get regularThreshold(){return this.rawValue?this.rawValue>=100?99:parseInt(this.rawValue):null}get hardThreshold(){return this.rawValue?Math.floor(this.rawValue/2):null}get extremeThreshold(){return this.rawValue?Math.floor(this.rawValue/5):null}get fumbleThreshold(){if(this.rawValue){if(this.difficulty){if(this.difficulty>=CoC7Check.difficultyLevel.extreme)return this.extremeThreshold<50?96:100;if(this.difficulty>=CoC7Check.difficultyLevel.hard)return this.hardThreshold<50?96:100}return this.rawValue<50?96:100}return null}get succesThreshold(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return this.extremeThreshold;case CoC7Check.difficultyLevel.hard:return this.hardThreshold;case CoC7Check.difficultyLevel.regular:return this.regularThreshold;case CoC7Check.difficultyLevel.critical:return this.criticalThreshold;case CoC7Check.difficultyLevel.unknown:return-1;default:return this.rawValue}return null}get difficultyString(){if(void 0!==this.difficulty)switch(this.difficulty){case CoC7Check.difficultyLevel.extreme:return game.i18n.format("CoC7.ExtremeDifficulty");case CoC7Check.difficultyLevel.hard:return game.i18n.format("CoC7.HardDifficulty");case CoC7Check.difficultyLevel.regular:return game.i18n.format("CoC7.RegularDifficulty");case CoC7Check.difficultyLevel.critical:return game.i18n.format("CoC7.CriticalDifficulty");case CoC7Check.difficultyLevel.unknown:return game.i18n.format("CoC7.UnknownDifficulty");default:return""}return""}get modifiedResult(){if(!this.standby){if(void 0!==this._modifiedResult)return this._modifiedResult;if(this.flatDiceModifier){const modified=this.dices.total+this.flatDiceModifier;return modified<1?1:modified>100?100:modified}return this.dices.total}}set modifiedResult(x){this._modifiedResult=x}get flatDiceModifierString(){return this.flatDiceModifier?this.flatDiceModifier>0?`+${this.flatDiceModifier}`:this.flatDiceModifier.toString():null}get isFumble(){if(!this.standby&&!this.isSimpleRoll)return this.modifiedResult>=this.fumbleThreshold}get isCritical(){if(!this.standby)return 1===this.modifiedResult}get isExtremeSuccess(){if(!this.standby)return this.successLevel>=CoC7Check.successLevel.extreme}get passed(){if(!this.standby&&!this.isSimpleRoll)return this.luckSpent?this.difficulty<=this.successLevel:this.succesThreshold>=this.modifiedResult||this.isCritical}get failed(){if(!this.standby&&!this.isSimpleRoll)return!this.passed}get isSimpleRoll(){return void 0===this.rawValue}get hasBonus(){return!!(this.diceModifier&&this.diceModifier>0)}get hasPenalty(){return!!(this.diceModifier&&this.diceModifier<0)}get hasModifier(){return!(!this.diceModifier||0===this.diceModifier)}get diceModifier(){return this._diceModifier?this._diceModifier:null}set diceModifier(x){this._diceModifier=parseInt(x)}get name(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.label;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.Sanity")}}return null}get shortName(){if(this.actor){if(this.skill)return this.skill.shortName;if(this.item)return this.item.name;if(this.characteristic)return CoC7Utilities.getCharacteristicNames(this.characteristic)?.short;if(this.attribute){if("lck"===this.attribute)return game.i18n.localize("CoC7.Luck");if("san"===this.attribute)return game.i18n.localize("CoC7.SAN")}}return null}get fullName(){const difficulty=this._difficulty!==CoC7Check.difficultyLevel.regular&&CoC7Check.difficultyString(this._difficulty),modifier=this._diceModifier>0?`+${this._diceModifier}`:this._diceModifier.toString();return game.i18n.format(`CoC7.LinkCheck${difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier,name:this.name})}get rolled(){return!!this.dice}static getFromCard(card){const rollResult=card.classList.contains("roll-result")?card:card.querySelector(".roll-result"),check=new CoC7Check;CoC7Roll.getFromElement(rollResult,check);const message=card.closest(".message");return check.messageId=message?message.dataset.messageId:null,check}static async push(card,publish=!0){const oldCheck=CoC7Check.getFromCard(card),actorId=card.dataset.tokenId?card.dataset.tokenId:card.dataset.actorId,skillId=card.dataset.skillId,charac=card.dataset.characteristic,itemId=card.dataset.itemId,diceMod=card.dataset.diceMod,difficulty=card.dataset.difficulty;let pushedRoll;if(skillId)pushedRoll=new CoC7Check(actorId,skillId,itemId,diceMod,difficulty);else{if(!charac)return;pushedRoll=new CoC7Check,pushedRoll.diceModifier=diceMod,pushedRoll.difficulty=difficulty,pushedRoll.actor=actorId,pushedRoll.characteristic=charac}oldCheck.uuid&&(pushedRoll.context=oldCheck.context,pushedRoll.uuid=oldCheck.uuid),oldCheck.parent&&(pushedRoll.parent=oldCheck.parent),pushedRoll.pushing=!0,await pushedRoll.roll(),publish&&pushedRoll.toMessage(!0,card)}get token(){return this.actor?chatHelper.getTokenFromKey(this.actorKey):null}set actor(x){if(this.actorKey=x,null!=x){if(x instanceof Actor)return this._actor=x,this._actor.alias=this.actor.name,void(x.token&&x.token.scene&&x.token.scene.id?this.actorKey=`${x.token.scene.id}.${x.token.id}`:this.actorKey=x.id);if(x.includes(".")){const[sceneId,tokenId]=x.split(".");if("TOKEN"===sceneId)this._actor=game.actors.tokens[tokenId],this._actor.alias=this._actor.name;else{const scene=game.scenes.get(sceneId);if(!scene)return;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return;const token=new Token(tokenData);this._actor=token.actor,this._actor.alias=token.name}}else this._actor=game.actors.get(x),this.actor.alias=this.actor.name}else this._actor=x}get successLevelIcons(){if(this.unknownDifficulty)return null;if(this.isSimpleRoll)return null;if(this.successLevel>=this.difficulty){const icons=[];for(let index=0;index<this.successLevel-this.difficulty+1;index++)icons.push(this.isCritical?"medal":"star");const successHint=game.i18n.format("CoC7.SuccesLevelHint",{value:this.successLevel-this.difficulty+1});return{success:!0,cssClass:this.isCritical?"critical":"success",hint:successHint,icons}}{const icons=[],successLevel=this.isFumble?-1:this.successLevel;for(let index=0;index<this.difficulty-successLevel;index++)icons.push(this.isFumble?"skull":"spider");const failureHint=game.i18n.format("CoC7.FailureLevelHint",{value:this.difficulty-successLevel});return{success:!1,cssClass:this.isFumble?"fumble":"failure",hint:failureHint,icons}}}get isBlind(){return void 0===this._isBlind&&(this._isBlind="blindroll"===this.rollMode),this._isBlind}set isBlind(x){this._isBlind=x}get unknownDifficulty(){return!(this.gmDifficultyCritical||this.gmDifficultyExtreme||this.gmDifficultyHard||this.gmDifficultyRegular)&&CoC7Check.difficultyLevel.unknown===this.difficulty}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}set skill(x){this._skill=this._getItemFromId(x),this.skillId=x}set item(x){this._item=this._getItemFromId(x),"weapon"===this._item?.type?this.itemId=x:(this._item=void 0,this.itemId=void 0)}_getItemFromId(x){return null==x?null:x instanceof Item?x:this._actor?this._actor.items.get(x):game.items.get(x)}get actor(){if(this._actor&&this._actor?.id){if("Object"===this._actor.constructor.name){const actor=new CoCActor(this._actor);this._actor=actor}}else if(this.actorKey&&(this._actor=chatHelper.getActorFromKey(this.actorKey)),this.actorId&&(this._actor=chatHelper.getActorFromKey(this.actorId)),!this._actor)return{isDummy:!0,name:this.actorName?this.actorName:void 0,id:void 0,img:"systems/CoC7/assets/icons/question-circle-regular.svg",portrait:"systems/CoC7/assets/icons/question-circle-regular.svg"};return this._actor}get skill(){return!this._skill&&this.skillId&&(this._skill=this.actor?.items.get(this.skillId)),!this._skill&&this.item&&this.item.system.skill&&(this.item.system.skill.main.id&&!this.weaponAltSkill?this._skill=this._actor.items.get(this.item.system.skill.main.id):this.item.system.skill.alternativ.id&&this.weaponAltSkill&&(this._skill=this._actor.items.get(this.item.system.skill.alternativ.id))),this._skill}get item(){return!this._item&&this.itemId&&this.actor&&(this._item=this.actor.items.get(this.itemId)),this._item}get displayResultType(){return game.settings.get("CoC7","displayResultType")}get displayCheckSuccessLevel(){return game.settings.get("CoC7","displayCheckSuccessLevel")}get displayBothSuccessLevel(){return this.displayResultType&&this.displayCheckSuccessLevel}get dontDisplaySuccessLevel(){return!this.displayResultType&&!this.displayCheckSuccessLevel}get image(){return this.skill?this.skill.img:this.item?this.item.img:void 0}get link(){return this.getLinkElement().outerHTML}get displayActorOnCard(){return game.settings.get("CoC7","displayActorOnCard")}getLinkElement(classes=null){const data={cls:["coc7-link","coc7-roll"].concat(classes),dataset:{check:"check"},icon:this.image?`<div style="background-image: url(${this.image})"></div>`:'<i class="fas fa-dice"></i>',blind:this.isBlind},difficulty=CoC7Check.difficultyString(this._difficulty),title=game.i18n.format(`CoC7.LinkCheck${this._difficulty?"Diff":""}${this._diceModifier?"Modif":""}`,{difficulty,modifier:this._diceModifier,name:this.name}),a=document.createElement("a");return a.title=title,a.classList.add(...data.cls),a.innerHTML=`${data.blind?'<i class="fas fa-eye-slash"></i>':""}${data.icon}${this.name}`,a}async roll(diceMod=null,difficulty=null,options={}){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.standby||await this._perform(options)}static createFromActorRollData(rollData){const roll={};switch(rollData.difficulty&&(roll.difficulty=rollData.difficulty),rollData.diceModifier&&(roll.diceModifier=rollData.diceModifier),!0===rollData.denyPush&&(roll.denyPush=!0),rollData.flatDiceModifier&&(roll.flatDiceModifier=rollData.flatDiceModifier),rollData.flatThresholdModifier&&(roll.flatThresholdModifier=rollData.flatThresholdModifier),rollData.actor?.actorKey?roll.actorKey=rollData.actor.actorKey:rollData.actor?.name&&(roll.actorName=rollData.actor.name),rollData.type){case CoC7Check.type.characteristic:roll.characteristic=rollData.value?.key;break;case CoC7Check.type.attribute:roll.attribute=rollData.value?.key;break;case CoC7Check.type.item:roll.actorKey=rollData.value.actor.actorKey,"skill"===rollData.value?.type?roll.skill=rollData.value.id:roll.item=rollData.value.id;break;case CoC7Check.type.skill:roll.actorKey=rollData.value.actor.actorKey,roll.skill=rollData.value.id;break;case CoC7Check.type.value:roll.displayName=rollData.value.name,roll.rawValue=rollData.value.threshold}return CoC7Check.create(roll)}static create({difficulty=CoC7Check.difficultyLevel.regular,diceModifier=null,actorKey=null,characteristic=null,attribute=null,rawValue=0,item=null,skill=null,flatDiceModifier=0,flatThresholdModifier=0,displayName=null,actorName=null,denyPush}={}){const check=new CoC7Check;return check.difficulty=difficulty,!0===denyPush&&(check.denyPush=!0),diceModifier&&(check.diceModifier=diceModifier),flatDiceModifier&&(check.flatDiceModifier=flatDiceModifier),flatThresholdModifier&&(check.flatThresholdModifier=flatThresholdModifier),displayName&&(check.displayName=displayName),actorKey&&(check.actor=actorKey),actorName&&(check.actorName=actorName),isNaN(Number(rawValue))||(check.rawValue=Number(rawValue)),check.actor&&!check.actor.isDummy&&(skill?check.skill=skill:characteristic?check.characteristic=characteristic:attribute?check.attribute=attribute:item&&(check.item=item)),check}async rollCharacteristic(char,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.characteristic=char,this.standby||await this._perform()}async rollAttribute(attrib,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.attribute=attrib,this.standby||await this._perform()}async rollValue(val,diceMod=null,difficulty=null){diceMod&&(this.diceModifier=diceMod),difficulty&&(this.difficulty=difficulty),this.rawValue=val,this.standby||await this._perform()}get rolledSuccessLevel(){return this.successLevel}async _perform(options={}){this.dice=options.roll||await CoC7Dice.roll(this.diceModifier,this.rollMode,this.isBlind),options.silent||game.modules.get("dice-so-nice")?.active||AudioHelper.play({src:CONFIG.sounds.dice},!0),options.forceDSN&&await CoC7Dice.showRollDice3d(this.dice.roll),this.dices={tens:[],unit:{value:this.dice.unit.total},total:this.dice.total,tenResult:this.dice.total-this.dice.unit.total,hasBonus:!!this.diceModifier,bonus:Math.abs(this.diceModifier),bonusType:this.diceModifier<0?game.i18n.format("CoC7.DiceModifierPenalty"):game.i18n.format("CoC7.DiceModifierBonus"),difficulty:this.difficulty};const max=0===this.dice.unit.total?100:90,min=0===this.dice.unit.total?10:0;let selected=this.dice.total-this.dice.unit.total;for(let i=0;i<this.dice.tens.results.length;i++){const die={};die.value=this.dice.tens.results[i],die.value===selected?(selected=101,die.selected=!0,this.dices.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck()}async computeCheck(){switch(this.isUnknown=this.unknownDifficulty,this.gmDifficultyRegular&&(this.difficulty=CoC7Check.difficultyLevel.regular),this.gmDifficultyHard&&(this.difficulty=CoC7Check.difficultyLevel.hard),this.gmDifficultyExtreme&&(this.difficulty=CoC7Check.difficultyLevel.extreme),this.gmDifficultyCritical&&(this.difficulty=CoC7Check.difficultyLevel.critical),this.tenOnlyOneDie=1===this.dices.tens.length,this.isValue=!1,this.isCharactiristic=!1,this.isSkill=!1,this.isItem=!1,this.isAttribute=!1,this.isSimpleRoll?(this.denyPush=!0,this.denyLuck=!0):null==this.actor?this.isValue=!0:(this.characteristic&&(this.isCharactiristic=!0,this.rawValue=this.actor.system.characteristics[this.characteristic].value),this.skill&&(this.isSkill=!0,this.rawValue=this.skill.value),this.attribute&&(this.isAttribute=!0,this.rawValue=this.actor.system.attribs[this.attribute].value)),this.luckSpent||this.isSimpleRoll||(this.modifiedResult<=this.rawValue&&(this.successLevel=CoC7Check.successLevel.regular),this.modifiedResult<=this.hardThreshold&&(this.successLevel=CoC7Check.successLevel.hard),this.modifiedResult<=this.extremeThreshold&&(this.successLevel=CoC7Check.successLevel.extreme),this.modifiedResult>this.rawValue&&(this.successLevel=CoC7Check.successLevel.failure),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.fumbleThreshold<=this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.fumble)),this.successLevel){case CoC7Check.successLevel.regular:this.resultType=game.i18n.format("CoC7.RegularSuccess");break;case CoC7Check.successLevel.hard:this.resultType=game.i18n.format("CoC7.HardSuccess");break;case CoC7Check.successLevel.extreme:this.resultType=game.i18n.format("CoC7.ExtremeSuccess");break;case CoC7Check.successLevel.critical:this.resultType=game.i18n.format("CoC7.CriticalSuccess");break;case CoC7Check.successLevel.fumble:this.resultType=game.i18n.format("CoC7.Fumble");break;case CoC7Check.successLevel.failure:this.resultType=game.i18n.format("CoC7.Failure")}if(this.unknownDifficulty?this.successRequired="":this.isSimpleRoll||(this.successRequired=game.i18n.format("CoC7.SuccessRequired",{successRequired:this.difficultyString})),1===this.modifiedResult&&(this.successLevel=CoC7Check.successLevel.critical),this.luckSpent||this.isUnknown||this.isSimpleRoll||(this.isFailure=this.failed,this.isSuccess=this.passed),this.hasMalfunction=!1,this.isFumble&&(this.successLevel=CoC7Check.successLevel.fumble),this.item&&(this.isItem=!0,this.item.system.malfunction&&Number(this.modifiedResult)>=Number(this.item.system.malfunction)&&(this.hasMalfunction=!0,this.malfunctionTxt=game.i18n.format("CoC7.Malfunction",{itemName:this.item.name}),await this.item.toggleItemFlag(CoC7Item.flags.malfunction))),void 0===this.canBePushed&&(this.canBePushed=!!this.skill&&this.skill.canBePushed(),null!=this.characteristic&&(this.canBePushed=!0),this.isFumble&&(this.canBePushed=!1),this.denyPush&&(this.canBePushed=!1)),!this.denyLuck&&this.actor){if(!(this.luckSpent||this.passed||this.isFumble||this.difficulty===CoC7Check.difficultyLevel.critical||this.unknownDifficulty)&&(this.skill||this.characteristic)){const luckNeeded=this.modifiedResult-this.succesThreshold;this.actor.luck>luckNeeded&&(this.hasEnoughLuck=!0,this.luckNeeded=luckNeeded,this.luckNeededTxt=game.i18n.format("CoC7.SpendLuck",{luckNeededValue:luckNeeded}))}if(!this.luckSpent&&(this.increaseSuccess=[],!this.pushing&&"lck"!==this.attribute&&"san"!==this.attribute)){if(this.unknownDifficulty&&this.modifiedResult>this.regularThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.RegularDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.regular,nextLevel.luckToSpend=this.modifiedResult-this.regularThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.regular&&this.modifiedResult>this.hardThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.HardDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.hard,nextLevel.luckToSpend=this.modifiedResult-this.hardThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}if(this.difficulty<=CoC7Check.difficultyLevel.hard&&this.modifiedResult>this.extremeThreshold){const nextLevel={};nextLevel.difficultyName=game.i18n.localize("CoC7.ExtremeDifficulty"),nextLevel.difficulty=CoC7Check.difficultyLevel.extreme,nextLevel.luckToSpend=this.modifiedResult-this.extremeThreshold,nextLevel.hasEnoughLuck=nextLevel.luckToSpend<=this.actor.luck,nextLevel.luckToSpend<=this.actor.luck&&this.increaseSuccess.push(nextLevel)}}this.canIncreaseSuccess=this.increaseSuccess.length>0,this.isFumble&&(this.canIncreaseSuccess=!1)}if(this.canAwardExperience=this.skill&&!this.skill.system.properties.noxpgain,!(this.passed&&this.diceModifier<=0&&this.skill)||this.skill.system.properties.noxpgain||this.luckSpent||this.forced||this.isBlind||this.isUnknown||this.flagForDevelopement(),this.parent){const parent=await fromUuid(this.parent);parent&&"updateRoll"in parent&&await parent.updateRoll(this.JSONRollString)}}showDiceRoll(){if(game.modules.get("dice-so-nice")?.active){const diceResults=[];for(const dieResult of this.dices.tens)diceResults.push(100===dieResult.value?0:dieResult.value/10);diceResults.push(this.dices.unit.value);const diceData={formula:`${this.dices.tens.length}d100+1d10`,results:diceResults,whisper:null,blind:!1};game.dice3d.show(diceData)}}get cssClass(){let cssClass="";return this.isSuccess&&(cssClass="success"),this.isFailure&&(cssClass="failure"),this.isCritical&&!this.isFailure&&(cssClass="success critical"),this.isFumble&&!this.isSuccess&&(cssClass="failure fumble"),CoC7Check.successLevel.regular===this.successLevel&&(cssClass+=" regular-success"),CoC7Check.successLevel.hard===this.successLevel&&(cssClass+=" hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&(cssClass+=" extreme-success"),cssClass}get cssClassList(){const cssClass=[];return this.isSuccess&&cssClass.push("success"),this.isFailure&&cssClass.push("failure"),this.isCritical&&!this.isFailure&&cssClass.push("success","critical"),this.isFumble&&!this.isSuccess&&cssClass.push("failure","fumble"),CoC7Check.successLevel.regular===this.successLevel&&cssClass.push("regular-success"),CoC7Check.successLevel.hard===this.successLevel&&cssClass.push("hard-success"),CoC7Check.successLevel.extreme===this.successLevel&&cssClass.push("extreme-success"),cssClass}get playerCssClass(){return this.isSuccess||this.forcedSuccess?"success":this.isFailure||this.forcedFailure?"failure":null}async upgradeCheck(upgradeindex,update=!0){const increasedSuccess=this.increaseSuccess[upgradeindex],luckAmount=parseInt(increasedSuccess.luckAmount)||parseInt(increasedSuccess.luckToSpend);if(!this.actor.spendLuck(luckAmount))return void ui.notifications.error(game.i18n.format("CoC7.ErrorNotEnoughLuck",{actor:this.actor.name}));this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount);const newSuccessLevel=parseInt(increasedSuccess.newSuccessLevel)||parseInt(increasedSuccess.difficulty);this.successLevel=newSuccessLevel,this.difficulty<=newSuccessLevel&&(this.isSuccess=!0,this.isFailure=!1);for(let index=0;index<upgradeindex+1;index++)this.increaseSuccess.shift();for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;return this.luckSpent=!0,this.computeCheck(),update?await this.updateChatCard():void 0}removeUpgrades(){this.canIncreaseSuccess=!1,this.increaseSuccess=[],this.luckNeeded=0,this.luckNeededTxt=null,this.canBePushed=!1}forcePass(luckAmount=null,update=!0){if(luckAmount){this.actor.spendLuck(luckAmount),this.successLevel=this.difficulty;for(const s of this.increaseSuccess)s.luckToSpend=s.luckToSpend-luckAmount;this.luckSpent=!0,this.isSuccess=!0,this.isFailure=!1,this.totalLuckSpent=parseInt(this.totalLuckSpent)?parseInt(this.totalLuckSpent):0,this.totalLuckSpent+=parseInt(luckAmount),this.computeCheck(),update&&this.updateChatCard()}else this.forced=!0,this.forcedSuccess=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.regular,update):this.forceSuccessLevel(this.difficulty,update)}forceFail(update=!0){this.forced=!0,this.forcedFailure=!0,this.isUnknown?this.forceSuccessLevel(CoC7Check.successLevel.failure,update):this.forceSuccessLevel(this.difficulty-1,update)}_forceCheck(high,low,update=!0){let total=Math.floor(Math.random()*(high-low))+low+1;const unitTotal=total%10;let tenTotal=Math.floor(total/10);const tens=[];let hasEnough=Math.abs(this.diceModifier)===tens.length;for(;!hasEnough;){let ten=Math.floor(10*Math.random()),roll=10*ten+unitTotal;0===roll&&(roll=100,ten=100),this.hasPenalty&&roll<=high&&(tens.push(ten),roll>total&&(total=roll)),this.hasBonus&&roll>low&&(tens.push(ten),roll<total&&(total=roll)),hasEnough=tens.length===Math.abs(this.diceModifier)}10===tenTotal&&0===unitTotal&&(tenTotal=100),tens.splice(Math.floor(Math.random()*tens.length+1),0,10===tenTotal?0:tenTotal),this.dices.tens=[],this.dices.unit.value=unitTotal,this.modifiedResult=total,this.dices.total=total,this.dices.tenResult=total-unitTotal;const max=0===unitTotal?100:90,min=0===unitTotal?10:0;let selected=total-unitTotal;for(let i=0;i<tens.length;i++){const die={};die.value=tens[i],die.value===selected?(selected=101,die.selected=!0,this.hasBonus?(die.isMax=!0,die.isMin=!1):(die.isMin=!0,die.isMax=!1)):(die.value===max?die.isMax=!0:die.isMax=!1,die.value===min?die.isMin=!0:die.isMin=!1),this.dices.tens.push(die)}this.computeCheck(),update&&this.updateChatCard()}forceSuccessLevel(successLevel,update=!0){let high,low;CoC7Check.successLevel.fumble===successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.failure===successLevel&&(high=this.regularThreshold===this.fumbleThreshold-1?100:this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.regular===successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.hard===successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.extreme===successLevel&&(high=this.extremeThreshold,low=1),CoC7Check.successLevel.critical===successLevel&&(high=1,low=0),high===low&&low--,0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}increaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.fumble===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold===this.fumbleThreshold-1?this.hardThreshold:this.regularThreshold),CoC7Check.successLevel.failure===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.regular===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.extremeThreshold,low=this.criticalThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.criticalThreshold,low=0),high===low&&low--,this._forceCheck(high,low,update)}decreaseSuccessLevel(update=!0){let high,low;CoC7Check.successLevel.failure===this.successLevel&&(high=100,low=this.fumbleThreshold-1),CoC7Check.successLevel.regular===this.successLevel&&(high=this.fumbleThreshold-1,low=this.regularThreshold),CoC7Check.successLevel.hard===this.successLevel&&(high=this.regularThreshold,low=this.hardThreshold),CoC7Check.successLevel.extreme===this.successLevel&&(high=this.hardThreshold,low=this.extremeThreshold),CoC7Check.successLevel.critical===this.successLevel&&(high=this.extremeThreshold,low=1),0===high&&(high=this.fumbleThreshold-1),this._forceCheck(high,low,update)}async flagForDevelopement(){this.flaggedForDevelopment=!0,this.skill&&await this.skill.flagForDevelopement()}set difficulty(x){this._difficulty=parseInt(x)}get difficulty(){return this._difficulty}set flavor(x){this._flavor=x}set context(x){this._context=x}get context(){if(this._context)return this._context}set parent(x){this.uuid||(this.uuid=foundry.utils.randomID(16)),this.parentUuid=x}get parent(){if(this.parentUuid)return this.parentUuid}get flavor(){if(this._flavor)return this._flavor;let flavor="";return this.actor?.system&&(this.skill?flavor=game.i18n.format("CoC7.CheckResult",{name:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.item?flavor=game.i18n.format("CoC7.ItemCheckResult",{item:this.item.name,skill:this.skill.name,value:this.rawValueString,difficulty:this.difficultyString}):this.characteristic?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(this.actor.system.characteristics[this.characteristic].label),value:this.rawValueString,difficulty:this.difficultyString}):this.attribute?flavor=game.i18n.format("CoC7.CheckResult",{name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`),value:this.rawValueString,difficulty:this.difficultyString}):this.displayName&&(flavor=game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}))),flavor||this.rawValue&&(flavor=this.displayName?game.i18n.format("CoC7.CheckResult",{name:this.displayName,value:this.rawValueString,difficulty:this.difficultyString}):game.i18n.format("CoC7.CheckRawValue",{rawvalue:this.rawValue,difficulty:this.difficultyString})),this.pushing&&(flavor=`${game.i18n.format("CoC7.Pushing")} ${flavor}`),flavor}get tooltipHeader(){return this.attribute?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.format(`CoC7.${this.actor.system.attribs[this.attribute].label}`)})+` (${this.actor.system.attribs[this.attribute].value}%)`:this.characteristic?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:game.i18n.localize(this.actor.system.characteristics[this.characteristic].label)})+` (${this.actor.system.characteristics[this.characteristic].value}%)`:this.skill?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.skill.name})+` (${this.skill.value}%)`:this.displayName?game.i18n.format(`CoC7.LinkCheck${this.difficulty===CoC7Check.difficultyLevel.regular?"":"Diff"}${this.diceModifier?"Modif":""}`,{difficulty:this.difficultyString,modifier:this.diceModifier,name:this.displayName})+` (${this.rawValueString}%)`:null}async getHtmlRollElement(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;const html=await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this);return html?$.parseHTML(html)[0]:null}async getHtmlRoll(options={}){this.options?this.options=mergeObject(this.options,options):this.options=options;return await renderTemplate("systems/CoC7/templates/chat/rolls/in-card-roll.html",this)||void 0}async toMessage(pushing=!1){this.pushing=pushing;const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this),speakerData={};let speaker;this.actor?(this.actor.isToken?speakerData.token=this.token.document:this.actor.isDummy?this.actor.name&&(speaker={alias:this.actor.name}):speakerData.actor=this.actor,speaker=ChatMessage.getSpeaker(speakerData)):speaker=ChatMessage.getSpeaker();const chatData={user:(this.actor?.user?this.actor.user:game.user).id,speaker,flavor:this.flavor,content:html,flags:{CoC7:{type:CoC7Check.cardType}}};if(this.uuid&&(chatData.flags.CoC7.uuid=this.uuid),this.context&&(chatData.flags.CoC7.context=this.context),"selfroll"===this.rollMode)if(game.user.isGM){if(chatData.user=game.user.id,chatData.flavor=`[${this.actor.name}] ${chatData.flavor}`,chatData.flags={CoC7:{GMSelfRoll:!0}},void 0!==chatData.speaker&&(chatData.flags.CoC7.originalSpeaker=duplicate(chatData.speaker)),game.user.isGM)switch(game.settings.get("CoC7","selfRollWhisperTarget")){case"owners":delete chatData.speaker,chatData.whisper=this.actor.owners,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;case"everyone":delete chatData.speaker,chatData.whisper=game.users.players,chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER;break;default:ChatMessage.applyRollMode(chatData,this.rollMode)}}else ChatMessage.applyRollMode(chatData,this.rollMode);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"blindroll"===this.rollMode&&(chatData.blind=!0),this.dice?.roll&&!this.dice?.hideDice&&(chatData.roll=this.dice.roll,chatData.type=CONST.CHAT_MESSAGE_TYPES.ROLL,chatData.rollMode=this.isBlind?"blindroll":this.rollMode),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({makePublic=!1,forceRoll=!1}={}){makePublic&&(this.rollMode=!1);const chatData={flavor:this.flavor};makePublic&&(chatData.whisper=[],chatData.blind=!1,ChatMessage.applyRollMode(chatData)),chatData.blind&&(this.isBlind=!0);const html=await renderTemplate("systems/CoC7/templates/chat/roll-result.html",this);let newContent=html;if(!this.messageId)return $.parseHTML(html)[0];const message=game.messages.get(this.messageId),htmlMessage=$.parseHTML(message.content)[0];if(!htmlMessage.classList.contains("roll-result")){const htmlCheck=$.parseHTML(html)[0],rollResultElement=htmlMessage.querySelector(".roll-result");null!==rollResultElement&&rollResultElement.replaceWith(htmlCheck),newContent=htmlMessage.outerHTML}chatData.content=newContent,CONST.CHAT_MESSAGE_TYPES.ROLL===message.type&&(message.whisper?.length?chatData.type=CONST.CHAT_MESSAGE_TYPES.WHISPER:chatData.type=CONST.CHAT_MESSAGE_TYPES.OTHER),forceRoll&&this.dice?.roll&&(game.user.isGM||!this.isBlind)&&await CoC7Dice.showRollDice3d(this.dice.roll);const msg=await message.update(chatData);return await ui.chat.updateMessage(msg,!1),msg}static async updateCardSwitch(event){const card=event.currentTarget.closest(".chat-card"),check=await CoC7Check.getFromCard(card);check.gmDifficultyRegular=!1,check.gmDifficultyHard=!1,check.gmDifficultyExtreme=!1,check.gmDifficultyCritical=!1,"gmDifficultyRegular"===event.currentTarget.dataset.flag&&(check.gmDifficultyRegular=!0),"gmDifficultyHard"===event.currentTarget.dataset.flag&&(check.gmDifficultyHard=!0),"gmDifficultyExtreme"===event.currentTarget.dataset.flag&&(check.gmDifficultyExtreme=!0),"gmDifficultyCritical"===event.currentTarget.dataset.flag&&(check.gmDifficultyCritical=!0),check.computeCheck(),check.updateChatCard()}get tooltip(){return renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",this)}get inlineCheck(){const a=document.createElement("a");return a.classList.add("coc7-inline-check"),a.classList.add("coc7-check-result"),a.classList.add("coc7-inline"),a.classList.add(...this.cssClassList),a.title=this.tooltipHeader,a.dataset.roll=escape(this.JSONRollString),a.innerHTML=`<i class="game-icon game-icon-d10"></i> ${this.modifiedResult||"??"}`,a}get rollToolTip(){if(this.standby)return;const parts=[],tens=this.dices.tens.map((r=>({result:r.value,selected:r.selected,classes:["die","d10",r.selected?null:"discarded",r.isMin?"min":null,r.isMax?"max":null].filter((c=>c)).join(" ")}))),unit=[{result:this.dices.unit.value,selected:!0,classes:"die d10"}];return parts.push({formula:this.tooltipHeader,total:this.modifiedResult,icons:this.successLevelIcons,class:this.cssClass,successRequired:this.successRequired,resultType:this.resultType,face:10,rolls:[...tens,...unit]}),renderTemplate("systems/CoC7/templates/chat/rolls/roll-tooltip.html",{parts})}get JSONRollData(){return JSON.parse(this.JSONRollString)}get JSONRollString(){return JSON.stringify(this,((key,value)=>{if(null===value)return;return["_actor","_skill","_item"].includes(key)?void 0:value}))}static fromData(data){return Object.assign(new CoC7Check,data)}static fromRollString(dataString){let data;try{data=JSON.parse(unescape(dataString))}catch(err){return ui.notifications.error(err.message),null}return CoC7Check.fromData(data)}static async alter(check,command,options={}){switch(command){case"useLuck":if(options.target.classList.contains("pass-check")){const luckAmount=parseInt(options.target.dataset.luckAmount);check.forcePass(luckAmount,options.update)}else{const upgradeIndex=parseInt(options.target.dataset.index);await check.upgradeCheck(upgradeIndex,options.update)}break;case"force-pass":check.forcePass(null,options.update);break;case"force-fail":check.forceFail(options.update);break;case"increase-success-level":check.increaseSuccessLevel(options.update);break;case"decrease-success-level":check.decreaseSuccessLevel(options.update);break;case"reveal-check":check.isBlind=!1,check.rollMode=!1,check.computeCheck(),options.update&&check.updateChatCard();break;case"flag-for-development":await check.flagForDevelopement(),check.computeCheck(),options.update&&check.updateChatCard();break;case"push":await check._perform(),check.pushing=!0,options.update&&check.updateChatCard()}}static async _onClickInlineRoll(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("coc7-check-result"))return a.classList.contains("expanded")?CoC7Check._collapseInlineResult(a):CoC7Check._expandInlineResult(a)}static _collapseInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(!a.classList.contains("expanded"))return;const tooltip=a.querySelector(".coc7-check-tooltip");return tooltip&&tooltip.remove(),a.classList.remove("expanded")}static async _expandInlineResult(a){if(!a.classList.contains("coc7-inline-check"))return;if(a.classList.contains("expanded"))return;const check=Object.assign(new CoC7Check,JSON.parse(unescape(a.dataset.roll)));if(check.standby)return;const tip=document.createElement("div");tip.innerHTML=await check.rollToolTip;const tooltip=tip.children[0];a.appendChild(tooltip),a.classList.add("expanded");const pa=a.getBoundingClientRect(),pt=tooltip.getBoundingClientRect();tooltip.style.left=`${Math.min(pa.x,window.innerWidth-(pt.width+3))}px`,tooltip.style.top=`${Math.min(pa.y+pa.height+3,window.innerHeight-(pt.height+3))}px`;const zi=getComputedStyle(a).zIndex;tooltip.style.zIndex=Number.isNumeric(zi)?zi+1:100}}class CoC7Utilities{static isFormula(x){return"string"==typeof x&&(!!isNaN(Number(x))&&Roll.validate(x))}static ParseChatEntry(html,content){const terms=content.match(/(\S+)/g);if(terms[0]?.toLowerCase().match(/^\/r(oll)?$/)&&terms[1]?.toLowerCase().startsWith("1d%"))return setTimeout((function(){CoC7Utilities._ExecCommand(content)}),200),!1}static async _ExecCommand(content){const options=content.toLowerCase().split(" ")?.join("")?.replace(/\/r(oll)?1d%/,""),check=new CoC7Check;if(options.length){let threshold,flatDiceModifier,flatThresholdModifier,escaped=options,difficulty=CoC7Check.difficultyLevel.regular,diceModifier=0,ask=!1;const thresholdStr=escaped.match(/[^(]+(?=\))/);if(thresholdStr&&thresholdStr.length){threshold=Number(thresholdStr[0]);for(const match of thresholdStr)escaped=escaped.replace(`(${match})`,"")}const difficultyStr=escaped.match(/[^[]+(?=\])/);if(difficultyStr&&difficultyStr.length){difficulty=CoC7Utilities.convertDifficulty(difficultyStr[0]);for(const match of difficultyStr)escaped=escaped.replace(`[${match}]`,"")}if(escaped.includes("?")&&(ask=!0,escaped=escaped.replace("?","")),isNaN(Number(escaped))||(diceModifier=Number(escaped)),ask){const dialogOptions={threshold,modifier:diceModifier,difficulty,askValue:!0},usage=await RollDialog.create(dialogOptions);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold"))||threshold,flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,threshold&&(check.rawValue=isNaN(threshold)?void 0:threshold)}const speaker=ChatMessage.getSpeaker();if(speaker.token&&speaker.scene){const actor=chatHelper.getActorFromKey(`${speaker.scene}.${speaker.token}`);actor&&(check.actor=actor)}else if(speaker.actor){const actor=game.actors.get(speaker.actor);actor&&(check.actor=actor)}await check.roll(),check.toMessage()}static async test(){ui.notifications.infos("Do some stuff")}static getActorFromString(actorString){let actor;return game.actors.tokens[actorString]?game.actors.tokens[actorString]:(actor=game.actors.get(actorString),actor||(actor=Object.values(game.actors.tokens).find((t=>t.name.toLowerCase()===actorString.toLowerCase())),actor||(actor=game.actors.find((a=>a.name.toLowerCase()===actorString.toLowerCase()))),actor||null))}static getCharacteristicNames(char){const charKey=char.toLowerCase();switch(charKey){case"str":return{short:game.i18n.localize("CHARAC.STR"),label:game.i18n.localize("CHARAC.Strength")};case"con":return{short:game.i18n.localize("CHARAC.CON"),label:game.i18n.localize("CHARAC.Constitution")};case"siz":return{short:game.i18n.localize("CHARAC.SIZ"),label:game.i18n.localize("CHARAC.Size")};case"dex":return{short:game.i18n.localize("CHARAC.DEX"),label:game.i18n.localize("CHARAC.Dexterity")};case"app":return{short:game.i18n.localize("CHARAC.APP"),label:game.i18n.localize("CHARAC.Appearance")};case"int":return{short:game.i18n.localize("CHARAC.INT"),label:game.i18n.localize("CHARAC.Intelligence")};case"pow":return{short:game.i18n.localize("CHARAC.POW"),label:game.i18n.localize("CHARAC.Power")};case"edu":return{short:game.i18n.localize("CHARAC.EDU"),label:game.i18n.localize("CHARAC.Education")};case"luck":return{short:game.i18n.localize("CoC7.Luck"),label:game.i18n.localize("CoC7.Luck")};default:for(const[,value]of Object.entries(game.system.template.Actor.templates.characteristics.characteristics))if(charKey===game.i18n.localize(value.short).toLowerCase())return{short:game.i18n.localize(value.short),label:game.i18n.localize(value.label)};return null}}static convertDifficulty(difficulty){if("0"===String(difficulty))return CoC7Check.difficultyLevel.regular;if("string"!=typeof difficulty)return difficulty;if(!isNaN(Number(difficulty)))return Number(difficulty);switch(difficulty){case"?":return CoC7Check.difficultyLevel.unknown;case"+":return CoC7Check.difficultyLevel.hard;case"++":return CoC7Check.difficultyLevel.extreme;case"+++":return CoC7Check.difficultyLevel.critical;default:return CoC7Check.difficultyLevel.regular}}static skillCheckMacro(skill,event,options={}){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;speaker.token&&(actor=game.actors.tokens[speaker.token]),actor||(actor=game.actors.get(speaker.actor)),actor?actor.skillCheck(skill,event.shiftKey,options):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static weaponCheckMacro(weapon,event){event.preventDefault();const speaker=ChatMessage.getSpeaker();let actor;if(speaker.token&&(actor=game.actors.tokens[speaker.token]),!actor)if(speaker.scene&&speaker.token){const baseActor=game.actors.get(speaker.actor),token=game.scenes.get(speaker.scene).tokens.get(speaker.token);actor=new(getDocumentClass("Actor"))(baseActor.toJSON(),{parent:token})}else actor=game.actors.get(speaker.actor);actor?actor.weaponCheck(weapon,event.shiftKey):ui.notifications.warn(game.i18n.localize("CoC7.WarnNoActorAvailable"))}static async checkMacro(threshold=void 0,event=null){await CoC7Utilities.rollDice(event,{threshold})}static createMacro(bar,data,slot){if("Item"!==data.type)return;const item=fromUuidSync(data.uuid,bar);if(!item)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroNoItemFound"));if("weapon"!==item.type&&"skill"!==item.type)return ui.notifications.warn(game.i18n.localize("CoC7.WarnMacroIncorrectType"));let command="";if("weapon"===item.type&&(command=`game.CoC7.macros.weaponCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`),"skill"===item.type){if(CoC7Item.isAnySpec(item))return ui.notifications.warn(game.i18n.localize("CoC7.WarnNoGlobalSpec"));command=`game.CoC7.macros.skillCheck({name:'${item.name}', uuid:'${data.uuid}'}, event);`}if(""!==command){const macro=game.macros.contents.find((m=>m.name===item.name&&m.command===command));return macro?(game.user.assignHotbarMacro(macro,slot),!1):(Macro.create(duplicate({name:item.name,type:"script",img:item.img,command})).then((macro=>{game.user.assignHotbarMacro(macro,slot)})),!1)}return!0}static async toggleDevPhase(toggle){await game.settings.set("CoC7","developmentEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.DevPhaseEnabled"):game.i18n.localize("CoC7.DevPhaseDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets()}static async toggleCharCreation(toggle){await game.settings.set("CoC7","charCreationEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.CharCreationEnabled"):game.i18n.localize("CoC7.CharCreationDisabled")),game.socket.emit("system.CoC7",{type:"updateChar"}),CoC7Utilities.updateCharSheets(),Hooks.call("toggleCharCreation",toggle)}static async getTarget(){const users=game.users.filter((user=>user.active)),actors=game.actors;let checkOptions=`<input type="checkbox" name="COCCheckAllPC" id="COCCheckAllPC">\n\n    <label for="COCCheckAllPC">${game.i18n.localize("CoC7.allActors")}</label>`;const playerTokenIds=users.map((u=>u.character?.id)).filter((id=>void 0!==id)),selectedPlayerIds=canvas.tokens.controlled.map((token=>token.actor.id));actors.forEach((actor=>{const checked=(selectedPlayerIds.includes(actor.id)||playerTokenIds.includes(actor.id))&&"checked";checkOptions+=`\n     <br>\n     <input type="checkbox" name="${actor.id}" id="${actor.id}" value="${actor.name}" ${checked}>\n\n     <label for="${actor.id}">${actor.name}</label>\n       `})),new Dialog({title:`${game.i18n.localize("CoC7.dreaming")}`,content:`${game.i18n.localize("CoC7.restTargets")}: ${checkOptions} <br>`,buttons:{whisper:{label:`${game.i18n.localize("CoC7.startRest")}`,callback:async html=>{const targets=[];let all=!1;const users=html.find('[type="checkbox"]');for(const user of users)"COCCheckAllPC"===user.name&&user.checked&&(all=!0),(user.checked||all)&&targets.push(user.id);await CoC7Utilities.startRest(targets)}}}}).render(!0)}static async startRest(targets){if(!targets.length)return;const actors=game.actors.filter((actor=>targets.includes(actor.id)));let chatContent=`<i>${game.i18n.localize("CoC7.dreaming")}...</i><br>`;for(const actor of actors)if(["character","npc","creature"].includes(actor.type)){let quickHealer=!1;for(const item of actor.items)"talent"===item.type&&item.name===`${game.i18n.localize("CoC7.quickHealer")}`&&(quickHealer=!0);const isCriticalWounds=!game.settings.get("CoC7","pulpRuleIgnoreMajorWounds")&&actor.hasConditionStatus(COC7.status.criticalWounds),dailySanityLoss=actor.system.attribs.san.dailyLoss,hpValue=actor.system.attribs.hp.value,hpMax=actor.system.attribs.hp.max,mpValue=actor.system.attribs.mp.value,mpMax=actor.system.attribs.mp.max,pow=actor.system.characteristics.pow.value;if(chatContent+=`<br><b>${actor.name}. </b>`,hpValue<hpMax)if(!0===isCriticalWounds)chatContent+=`<b style="color:darkred">${game.i18n.localize("CoC7.hasCriticalWounds")}. </b>`;else{let healAmount=1;game.settings.get("CoC7","pulpRuleFasterRecovery")&&(healAmount=2),!0===quickHealer&&healAmount++,healAmount=Math.min(healAmount,hpMax-hpValue),chatContent+=1===healAmount?`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.healthRecovered")}. </b>`:`<b style="color:darkolivegreen">${game.i18n.format("CoC7.pulpHealthRecovered",{number:healAmount})}. </b>`,actor.update({"system.attribs.hp.value":actor.system.attribs.hp.value+healAmount})}dailySanityLoss>0&&(chatContent+=`<b style="color:darkolivegreen">${game.i18n.localize("CoC7.dailySanLossRestarted")}.</b>`,actor.update({"system.attribs.san.dailyLoss":0,"system.attribs.san.dailyLimit":Math.floor(actor.system.attribs.san.value/5)}));const hours=7;if(hours>0&&mpValue<mpMax){let magicAmount=hours*Math.ceil(pow/100);magicAmount=Math.min(magicAmount,mpMax-mpValue),chatContent+=`<b style="color:darkolivegreen">${game.i18n.format("CoC7.magicPointsRecovered")}: ${magicAmount}.</b>`,actor.update({"system.attribs.mp.value":actor.system.attribs.mp.value+magicAmount})}}const chatData={user:game.user.id,speaker:ChatMessage.getSpeaker(),content:chatContent,type:CONST.CHAT_MESSAGE_TYPES.OTHER};ChatMessage.create(chatData)}static async toggleXPGain(toggle){await game.settings.set("CoC7","xpEnabled",toggle),ui.notifications.info(toggle?game.i18n.localize("CoC7.XPGainEnabled"):game.i18n.localize("CoC7.XPGainDisabled"))}static async rollDice(event,options={}){let diceModifier,difficulty,flatDiceModifier,flatThresholdModifier;options.askValue=!options.threshold;let threshold=options.threshold;if(void 0!==options.modifier&&(diceModifier=Number(options.modifier)),void 0!==options.difficulty&&(difficulty=CoC7Utilities.convertDifficulty(options.difficulty)),!event?.shiftKey&&!options.fastForward){const usage=await RollDialog.create(options);usage&&(diceModifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")),threshold=Number(usage.get("threshold")),flatDiceModifier=Number(usage.get("flatDiceModifier")),flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}const actors=[];if(game.user.isGM&&canvas.tokens.controlled.length)for(const token of canvas.tokens.controlled)actors.push(token.actor.tokenKey);else game.user.character&&actors.push(game.user.character.tokenKey);for(const tk of actors){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,check.actor=tk,await check.roll(),check.toMessage()}if(!actors.length){const check=new CoC7Check;check.diceModifier=diceModifier||0,check.difficulty=difficulty||CoC7Check.difficultyLevel.regular,check.rawValue=threshold,check.flatDiceModifier=flatDiceModifier,check.flatThresholdModifier=flatThresholdModifier,await check.roll(),check.toMessage()}}static updateCharSheets(){if(game.user.isGM)for(const a of game.actors.contents)"character"===a?.type&&a?.sheet&&a?.sheet?.rendered&&(a.update({"system.flags.locked":!0}),a.render(!1));else for(const a of game.actors.contents)a.isOwner&&(a.update({"system.flags.locked":!0}),a.render(!1))}static async getDataFromDropEvent(event,entityType="Item"){if(event.originalEvent)return[];try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if("Folder"===dataList.type&&dataList.documentName===entityType){const folder=await fromUuid(dataList.uuid);return folder?folder.contents:[]}if(dataList.type===entityType){const item=await fromUuid(dataList.uuid);return item?[item]:[]}return[]}catch(err){return[]}}static async copyToClipboard(text){try{if(navigator.clipboard&&window.isSecureContext)return navigator.clipboard.writeText(text);{const textArea=document.createElement("textarea");return textArea.value=text,textArea.style.position="fixed",textArea.style.left="-999px",textArea.style.top="-999px",document.body.appendChild(textArea),textArea.focus(),textArea.select(),new Promise(((resolve,reject)=>{document.execCommand("copy")?resolve():reject(new Error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))),textArea.remove()})).catch((err=>ui.notifications.error(err)))}}catch(err){ui.notifications.error(game.i18n.localize("CoC7.UnableToCopyToClipboard"))}}static quoteRegExp(string){const len=string.length;let qString="";for(let current,i=0;i<len;++i)if(current=string.charAt(i),current>=" "&&current<="~")"\\"!==current&&"'"!==current||(qString+="\\"),qString+=current.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&");else switch(current){case"\b":qString+="\\b";break;case"\f":qString+="\\f";break;case"\n":qString+="\\n";break;case"\r":qString+="\\r";break;case"\t":qString+="\\t";break;case"\v":qString+="\\v";break;default:qString+="\\u",current=current.charCodeAt(0).toString(16);for(let j=4;--j>=current.length;qString+="0");qString+=current}return qString}static setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}static getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}static SfromUuid(uuid){let doc,parts=uuid.split(".");if("Compendium"===parts[0])return null;{const[docName,docId]=parts.slice(0,2);parts=parts.slice(2);doc=CONFIG[docName].collection.instance.get(docId)}for(;doc&&parts.length>1;){const[embeddedName,embeddedId]=parts.slice(0,2);doc=doc.getEmbeddedDocument(embeddedName,embeddedId),parts=parts.slice(2)}return doc||null}static isDocumentUuidPack(uuid){return!!uuid.includes("Compendium")}static isDocumentUuid(uuid){const identifiers=["Actor","Scene","Token","Item","Compendium"];for(let i=0;i<identifiers.length;i++)if(uuid.includes(identifiers[i]))return!0;return!1}static getActorDocumentFromDropData(dropData){let docUuid,actor;return docUuid=dropData.tokenUuid?dropData.tokenUuid:void 0!==dropData.uuid?dropData.uuid:dropData.sceneId&&dropData.tokenId?`Scene.${dropData.sceneId}.Token.${dropData.tokenId}`:dropData.actorId||dropData.actorKey||dropData.id,"Token"===dropData.type?docUuid=dropData.uuid:docUuid&&(actor=CoC7Utilities.getActorFromKey(docUuid),actor||"Item"!==dropData.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid),docUuid}static getDocumentFromKey(key){if(!key)return null;if(CoC7Utilities.isDocumentUuid(key))return CoC7Utilities.isDocumentUuidPack(key)?fromUuid(key):CoC7Utilities.SfromUuid(key);if(key.includes(".")){const[sceneId,tokenId]=key.split(".");if("TOKEN"===sceneId)return game.actors.tokens[tokenId];const scene=game.scenes.get(sceneId);if(!scene)return null;const tokenData=scene.getEmbeddedDocument("Token",tokenId);if(!tokenData)return null;const token=new Token(tokenData);return token.scene||(token.scene=duplicate(scene)),token}return game.actors.get(key)||null}static getActorFromKey(key){const doc=CoC7Utilities.getDocumentFromKey(key);return doc?doc.actor?doc.actor:"CoCActor"===doc.constructor?.name?doc:null:null}static async createImportCharactersFolderIfNotExists(){let folderName=game.i18n.localize("CoC7.ImportedCharactersFolder");"CoC7.ImportedCharactersFolder"===folderName&&(folderName="Imported characters");let importedCharactersFolder=game.folders.find((entry=>entry.name===folderName&&"Actor"===entry.type));return null==importedCharactersFolder&&(importedCharactersFolder=await Folder.create({name:folderName,type:"Actor",parent:null}),ui.notifications.info(game.i18n.localize("CoC7.CreatedImportedCharactersFolder"))),importedCharactersFolder}static async guessItem(type,name,{combat=null,source="",fallbackAny=!1}={}){let existing=null;name=name.toLocaleLowerCase();for(let o=0,oM=source.length;o<oM;o++)switch(source.substring(o,o+1)){case"i":if(existing=game.items.find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing;break;case"w":case"m":case"s":for(const pack of game.packs)if("Item"===pack.metadata.type&&("w"===source[o]&&"world"===pack.metadata.package||"S"===source[o]&&"CoC7"===pack.metadata.package||"s"===source[o]&&!["world","CoC7"].includes(pack.metadata.package))){if(existing=(await pack.getDocuments()).find((item=>item.type===type&&item.name.toLowerCase()===name&&(null===combat||item.system.properties.combat===combat))),existing)return existing}}if(fallbackAny&&"skill"===type){const match=name.match(/^(.+ \()(?!any).+(\))$/);if(match)return await CoC7Utilities.guessItem(type,match[1]+"any"+match[2],{combat,source})}}static toKebabCase(s){if(!s)return"";const match=s.match(/[A-Z]{2,}(?=[A-Z][a-z]+[0-9]*|\b)|[A-Z]?[a-z]+[0-9]*|[A-Z]|[0-9]+/g);return match?match.join("-").toLowerCase():""}static sortByNameKey(a,b){return a.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase().localeCompare(b.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLocaleLowerCase())}}class CoCIDEditor extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-editor.hbs",width:900,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!0,submitOnChange:!0})}async getData(){const sheetData=super.getData();sheetData.supportedLanguages=CONFIG.supportedLanguages,this.options.editable=this.object.sheet.isEditable,sheetData.guessCode=game.system.api.cocid.guessId(this.object),sheetData.idPrefix=game.system.api.cocid.getPrefix(this.object),sheetData.cocidFlag=this.object.flags?.CoC7?.cocidFlag,sheetData.id=sheetData.cocidFlag?.id||"",sheetData.lang=sheetData.cocidFlag?.lang||game.i18n.lang,sheetData.priority=sheetData.cocidFlag?.priority||0,sheetData.eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData.eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(sheetData.cocidFlag?.eras??{})[key]});sheetData.eras.sort(CoC7Utilities.sortByNameKey);const CoCIDKeys=flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys??{}),prefix=new RegExp("^"+CoC7Utilities.quoteRegExp(sheetData.idPrefix));sheetData.existingKeys=Object.keys(CoCIDKeys).reduce(((obj,k)=>(k.match(prefix)&&obj.push({k,name:CoCIDKeys[k]}),obj)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.isSystemID=void 0!==CoCIDKeys[sheetData.id];const match=sheetData.id.match(/^([^\\.]+)\.([^\\.]*)\.(.+)/);if(sheetData._existing=match&&void 0!==match[3]?match[3]:"",sheetData.id&&sheetData.lang){const worldDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"world"}),usedEras={},uniqueWorldPriority={};sheetData.worldDocumentInfo=worldDocuments.map((d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueWorldPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueWorldPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:TextEditor.enrichHTML(d.link,{async:!1}),folder:d?.folder?.name}})),Object.entries(uniqueWorldPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateWorldPriority=!0),sheetData.worldDuplicates=worldDocuments.length??0;const compendiumDocuments=await game.system.api.cocid.fromCoCIDAll({cocid:sheetData.id,lang:sheetData.lang,scope:"compendiums"}),uniqueCompendiumPriority={};sheetData.compendiumDocumentInfo=compendiumDocuments.map((d=>{d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>(Object.prototype.hasOwnProperty.call(uniqueCompendiumPriority,d.flags.CoC7.cocidFlag.priority+"/"+e[0])||(uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]=0),uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/"+e[0]]++,!1))):uniqueCompendiumPriority[d.flags.CoC7.cocidFlag.priority+"/*"]=1;const eras=d.flags.CoC7.cocidFlag.eras?Object.entries(d.flags.CoC7.cocidFlag.eras).filter((e=>e[1])).map((e=>e[0])).sort():[];for(const era of eras)usedEras[era]=COC7.eras[era]??"?";return{eras:eras.reduce((function(all,current){return all[current]=!0,all}),{}),priority:d.flags.CoC7.cocidFlag.priority,lang:d.flags.CoC7.cocidFlag.lang??"en",link:TextEditor.enrichHTML(d.link,{async:!1}),folder:d?.folder?.name??""}})),Object.entries(uniqueCompendiumPriority).filter((c=>c[1]>1)).length>0&&(sheetData.warnDuplicateCompendiumPriority=!0),sheetData.compendiumDuplicates=compendiumDocuments.length??0,sheetData.usedEras=[];for(const[key,value]of Object.entries(usedEras))sheetData.usedEras.push({id:key,name:game.i18n.localize(value)});sheetData.usedEras.sort(CoC7Utilities.sortByNameKey)}else sheetData.compendiumDocumentInfo=[],sheetData.worldDocumentInfo=[],sheetData.worldDuplicates=0,sheetData.compendiumDuplicates=0,sheetData.warnDuplicateWorldPriority=!1,sheetData.warnDuplicateCompendiumPriority=!1;return sheetData}activateListeners(html){super.activateListeners(html),html.find("a.copy-to-clipboard").click((function(e){CoC7Utilities.copyToClipboard($(this).siblings("input").val())})),this.object.sheet.isEditable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find("input[name=_existing").change((function(e){const obj=$(this),prefix=obj.data("prefix");let value=obj.val();""!==value&&(value=prefix+CoC7Utilities.toKebabCase(value)),html.find("input[name=id]").val(value).trigger("change")})),html.find("select[name=known]").change((function(e){const obj=$(this);html.find("input[name=id]").val(obj.val())})),html.find("a[data-guess]").click((async function(e){e.preventDefault();const guess=$(this).data("guess");html.find("input[name=id]").val(guess).trigger("change")})))}static async eraToggle(document,propertyId){if("setup"===document.type){const update={[propertyId]:!0};if(void 0!==document.flags?.CoC7?.cocidFlag?.eras)for(const[key]of Object.entries(document.flags.CoC7.cocidFlag.eras))key!==propertyId&&(update["-="+key]=null);await document.update({"flags.CoC7.cocidFlag.eras":update})}else void 0===document.flags?.CoC7?.cocidFlag?.eras?.[propertyId]?void 0===document.flags?.CoC7?.cocidFlag?.eras?await document.update({"flags.CoC7.cocidFlag.eras":{[propertyId]:!0}}):await document.update({[`flags.CoC7.cocidFlag.eras.${propertyId}`]:!0}):await document.update({[`flags.CoC7.cocidFlag.eras.-=${propertyId}`]:null})}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await CoCIDEditor.eraToggle(this.object,propertyId),this.render()}async _updateObject(event,formData){const id=formData.id||"";await this.object.update({"flags.CoC7.cocidFlag.id":id,"flags.CoC7.cocidFlag.lang":formData.lang||game.i18n.lang,"flags.CoC7.cocidFlag.priority":formData.priority||0,"flags.CoC7.cocidFlag.eras":this.object.flags?.CoC7?.cocidFlag?.eras??{}});const html=$(this.object.sheet.element).find("header.window-header a.header-button.edit-coc-id-warning,header.window-header a.header-button.edit-coc-id-exisiting");html.length&&html.css({color:id?"var(--color-text-light-highlight)":"red"}),this.render()}}function addCoCIDSheetHeaderButton(headerButtons,sheet){if(game.user.isGM){const sheetCoCID=sheet.object.flags?.CoC7?.cocidFlag,CoCIDEditorButton={class:void 0===sheetCoCID||void 0===sheetCoCID.id||""===sheetCoCID.id?"edit-coc-id-warning":"edit-coc-id-exisiting",label:"CoC7.CoCIDFlag.id",icon:"fas fa-fingerprint",onclick:()=>{new CoCIDEditor(sheet.object,{}).render(!0,{focus:!0})}},numberOfButtons=headerButtons.length;headerButtons.splice(numberOfButtons-1,0,CoCIDEditorButton)}}class CoC7ActiveEffect extends ActiveEffect{apply(actor,change){"system.attribs.armor.value"===change.key?isNaN(change.value)||isNaN(actor.system.attribs.armor.value)||(actor.system.attribs.armor.value=Number(actor.system.attribs.armor.value)):"system.attribs.db.value"===change.key&&isNaN(change.value)&&!isNaN(actor.system.attribs.db.value)&&(actor.system.attribs.db.value=String(actor.system.attribs.db.value));return super.apply(actor,change)}static onManageActiveEffect(event,owner){event.preventDefault();const a=event.currentTarget,li=a.closest("li"),effect=li.dataset.effectId?owner.effects.get(li.dataset.effectId):null;switch(a.dataset.action){case"create":return owner.createEmbeddedDocuments("ActiveEffect",[{label:game.i18n.localize("CoC7.EffectNew"),icon:"icons/svg/aura.svg",origin:owner.uuid,"duration.rounds":"temporary"===li.dataset.effectType?1:void 0,disabled:"inactive"===li.dataset.effectType}]);case"edit":return effect.sheet.render(!0);case"delete":return effect.delete();case"toggle":return effect.update({disabled:!effect.disabled})}}_prepareDuration(){const duration=super._prepareDuration();return"seconds"===duration.type&&(duration.seconds>3600?duration.label=new Date(1e3*duration.seconds).toISOString().slice(11,19):duration.seconds>100&&(duration.label=new Date(1e3*duration.seconds).toISOString().slice(14,19))),duration}get isStatus(){const statusId=this.getFlag("core","statusId");return["tempoInsane","indefInsane","criticalWounds","dying","dead","unconscious","prone"].includes(statusId)}static prepareActiveEffectCategories(effects,{status=!0}={}){const categories={temporary:{type:"temporary",label:game.i18n.localize("Temporary"),effects:[]},passive:{type:"passive",label:game.i18n.localize("Passive"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]},suppressed:{type:"suppressed",label:game.i18n.localize("Suppressed"),effects:[],info:[game.i18n.localize("Unavailable")]}};status&&(categories.status={type:"status",label:game.i18n.localize("Status"),effects:[]});for(const e of effects)e._getSourceName(),e.isSuppressed?categories.suppressed.effects.push(e):e.isStatus?categories.status.effects.push(e):e.disabled?categories.inactive.effects.push(e):e.isTemporary?categories.temporary.effects.push(e):categories.passive.effects.push(e);return categories.suppressed.hidden=!categories.suppressed.effects.length,categories}static prepareNPCActiveEffectCategories(effects){let count=0;const categories={active:{type:"active",label:game.i18n.localize("Active"),effects:[]},inactive:{type:"inactive",label:game.i18n.localize("Inactive"),effects:[]}};for(const e of effects)count+=1,e._getSourceName(),e.isSuppressed||e.disabled?categories.inactive.effects.push(e):categories.active.effects.push(e);return count>0&&(categories.expended=!0),categories}}class CoC7ContextMenu{bind(menu,html,callback){this._callback=callback,this._html=html,this._menu=menu;try{const menuTrigger=html.find(`[data-context-menu=${menu.id}]`);if(0===menuTrigger.length)return;menuTrigger.contextmenu(this._onContextMenu.bind(this));const menuElement=CoC7ContextMenu.CreateMenu(menu);menuElement.on("click",".menu-action",this._onMenuAction.bind(this)),0!==this.menu.length?this.menu.replaceWith(menuElement):this.menuContainer.append(menuElement)}catch(error){console.error(error)}}get menuContainer(){let menuContainer=this._html.find(".menu-container");return 0===menuContainer.length&&(this._html.append('<div class="menu-container"></div>'),menuContainer=this._html.find(".menu-container")),menuContainer}get menu(){return this.menuContainer.find(`.context-menu-wrapper.${this._menu.id}`)}_onMenuAction(event){return this._callback(event,this.target)}static closeAll(){$("body").find(".menu-container").find(".context-menu-wrapper").each((function(i,m){m.style.visibility="hidden"}))}_onContextMenu(event){event.preventDefault(!0),CoC7ContextMenu.closeAll();const target=event?.currentTarget;if(this.target=target,!target)return;const menuName=target.dataset?.contextMenu;if(menuName===this._menu.id){const wrapper=this.menu;if(wrapper.length>0){const subMenu=wrapper.find(".sub-menu");let left=event.clientX,top=event.clientY;const menuHeight=wrapper.outerHeight(),menuWidth=wrapper.outerWidth();window.innerHeight<menuHeight+top&&(top-=menuHeight),window.innerWidth<menuWidth+left&&(left=window.innerWidth-menuWidth),subMenu.length>0&&(window.innerWidth<menuWidth+left+subMenu.outerWidth()?subMenu.css({right:menuWidth-5+"px",left:""}):subMenu.css({left:menuWidth-5+"px",right:""})),wrapper.css({left:`${left}px`,top:`${top}px`,visibility:"visible"})}}}static canSee(visibility){switch(visibility.toLowerCase()){case"gm":return game.user.isGM;case"trusted":return game.user.isTrusted;default:return!0}}static CreateMenu(menu){const classes="string"==typeof menu.classes?[menu.classes]:menu.classes;classes.push("context-menu-wrapper");const wrapper=$("<div></div>");if(wrapper.addClass(menu.id),classes.forEach((c=>wrapper.addClass(c))),menu.section)menu.section.forEach((s=>{const section=CoC7ContextMenu.CreateSection(s,{multi:!0});section&&wrapper.append(section)}));else{const section=CoC7ContextMenu.CreateSection(menu);section&&wrapper.append(section)}return wrapper}static CreateSection(s,{multi=!1,subMenu=!1}={}){if(!s.items)return null;if(s.visibility&&!CoC7ContextMenu.canSee(s.visibility))return null;const classes=s.classes?"string"==typeof s.classes?[s.classes]:s.classes:[];multi&&classes.push("menu-section"),subMenu&&classes.push("sub-menu");const section=$("<ul></ul>");return classes.forEach((c=>section.addClass(c))),s.items.forEach((i=>{const li=$("<li></li>");if(li.addClass("menu-item"),i.action&&(li.addClass("menu-action"),li.attr("data-action",i.action)),"string"==typeof i.label?li.append(`<span>${i.label}</span>`):(i.label.icon&&li.append(`<i class="${i.label.icon}"></i>`),i.label.text&&li.append(`<span>${i.label.text}</span>`)),i.subMenu){li.addClass("sub-menu-button"),li.append('<i class="fas fa-caret-right"></i>');const sub=CoC7ContextMenu.CreateSection(i.subMenu,{subMenu:!0});sub&&li.append(sub)}section.append(li)})),section}}class CoC7ActorSheet extends ActorSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu"),sheetData.canDragToken=!!this.token&&game.user.isGM,sheetData.linkedActor=!0===this.actor.prototypeToken?.actorLink,sheetData.isToken=this.actor.isToken,sheetData.itemsByType={},sheetData.skills={},sheetData.combatSkills={},sheetData.weapons={},sheetData.rangeWpn=[],sheetData.meleeWpn=[],sheetData.actorFlags={},sheetData.effects="character"===this.actor.type?CoC7ActiveEffect.prepareActiveEffectCategories(this.actor.effects):CoC7ActiveEffect.prepareNPCActiveEffectCategories(this.actor.effects),sheetData.permissionLimited=!game.user.isGM&&(this.actor.ownership[game.user.id]??this.actor.ownership.default)===CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED,sheetData.isKeeper=game.user.isGM,sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM||"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled"),"creation"===game.settings.get("CoC7","playerUnlockSheetMode")&&game.settings.get("CoC7","charCreationEnabled")&&(sheetData.data.system.flags.locked=!1),"vehicle"!==this.actor.type&&(sheetData.data.system.characteristics||(sheetData.data.system.characteristics={str:{value:null,short:"CHARAC.STR",label:"CHARAC.Strength",formula:null},con:{value:null,short:"CHARAC.CON",label:"CHARAC.Constitution",formula:null},siz:{value:null,short:"CHARAC.SIZ",label:"CHARAC.Size",formula:null},dex:{value:null,short:"CHARAC.DEX",label:"CHARAC.Dexterity",formula:null},app:{value:null,short:"CHARAC.APP",label:"CHARAC.Appearance",formula:null},int:{value:null,short:"CHARAC.INT",label:"CHARAC.Intelligence",formula:null},pow:{value:null,short:"CHARAC.POW",label:"CHARAC.Power",formula:null},edu:{value:null,short:"CHARAC.EDU",label:"CHARAC.Education",formula:null}}),sheetData.data.system.attribs||(sheetData.data.system.attribs={hp:{value:null,max:null,short:"HP",label:"Hit points",auto:!0},mp:{value:null,max:null,short:"HP",label:"Magic points",auto:!0},lck:{value:null,short:"LCK",label:"Luck"},san:{value:null,max:99,short:"SAN",label:"Sanity",auto:!0},mov:{value:null,short:"MOV",label:"Movement rate",auto:!0},db:{value:null,short:"DB",label:"Damage bonus",auto:!0},build:{value:null,short:"BLD",label:"Build",auto:!0},armor:{value:null,auto:!1}}),sheetData.data.system.biography||(sheetData.data.system.biography={personalDescription:{type:"string",value:""}}),sheetData.data.system.infos||(sheetData.data.system.infos={occupation:"",age:"",sex:"",residence:"",birthplace:"",archetype:"",organization:"",playername:""}),sheetData.data.system.flags||(sheetData.data.system.flags={locked:!0,manualCredit:!1}),sheetData.data.system.credit||(sheetData.data.system.credit={monetarySymbol:null,multiplier:null,spent:null,assetsDetails:null}),sheetData.data.system.development||(sheetData.data.system.development={personal:null,occupation:null,archetype:null}),sheetData.data.system.biography||(sheetData.data.system.biography=[]),sheetData.pulpRuleArchetype=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.pulpRuleOrganization=game.settings.get("CoC7","pulpRuleOrganization")),sheetData.isDead=this.actor.dead,sheetData.isDying=this.actor.dying,sheetData.items){for(const item of sheetData.items){if("skill"===item.type)if(item.system.properties.special&&(item.system.properties.fighting&&(item.system.specialization=game.i18n.localize("CoC7.FightingSpecializationName")),item.system.properties.firearm&&(item.system.specialization=game.i18n.localize("CoC7.FirearmSpecializationName"))),"character"!==this.actor.type){if(isNaN(Number(item.system.value))){let value=null;const parsed={};for(const[key,value]of Object.entries(COC7.formula.actorsheet))key.startsWith("@")&&value.startsWith("this.")&&(parsed[key.substring(1)]=getProperty(this,value.substring(5)));try{value=(await new Roll(item.system.value,parsed).evaluate({async:!0})).total}catch(err){console.warn(game.i18n.format("CoC7.ErrorUnableToParseSkillFormula",{value:item.system.value,name:item.name})),value=null}if(value){item.system.value=value;const itemToUpdate=this.actor.items.get(item._id);console.info(`[COC7] (Actor:${this.name}) Evaluating skill ${item.name}:${item.system.value} to ${value}`),await itemToUpdate.update({"system.value":value})}}const skill=this.actor.items.get(item._id),{base,rawValue,value}=skill.system;item.system.rawValue=rawValue||value||base,item.system.value=value||base}else{const skill=this.actor.items.get(item._id);if(item.system.base=await skill.asyncBase(),item.system.value){let updatedExp=(item.system.adjustments?.experience?parseInt(item.system.adjustments.experience):0)+parseInt(item.system.value)-skill.value;updatedExp<=0&&(updatedExp=null),console.info(`[COC7] Updating skill ${skill.name} experience. Experience missing: ${updatedExp}`),await this.actor.updateEmbeddedDocuments("Item",[{_id:item._id,"system.adjustments.experience":updatedExp,"system.value":null}]),item.system.adjustments||(item.system.adjustments={}),item.system.adjustments.experience=updatedExp,item.system.rawValue=skill.rawValue,item.system.value=skill.value}else item.system.value=skill.value,item.system.rawValue=skill.rawValue}let list=sheetData.itemsByType[item.type];list||(list=[],sheetData.itemsByType[item.type]=list),list.push(item)}for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey);sheetData.skills=sheetData.items.filter((item=>"skill"===item.type)).sort(CoC7Utilities.sortByNameKey),sheetData.meleeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.fighting)),sheetData.rangeSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat&&!0===skill.system.properties.firearm));const cbtSkills=sheetData.skills.filter((skill=>!0===skill.system.properties.combat));if(cbtSkills)for(const skill of cbtSkills)sheetData.combatSkills[skill._id]=skill;const weapons=sheetData.itemsByType.weapon;if(weapons)for(const weapon of weapons){if(weapon.usesAlternateSkill=!0===weapon.system.properties.auto||!0===weapon.system.properties.brst,weapon.system.ammo||(weapon.system.ammo=0),weapon.skillSet=!0,""===weapon.system.skill.main.id)weapon.skillSet=!1;else{if(sheetData.combatSkills[weapon.system.skill.main.id]){const skill=this.actor.items.get(weapon.system.skill.main.id);weapon.system.skill.main.name=skill.system.skillName,weapon.system.skill.main.value=skill.value}else weapon.skillSet=!1;if(""!==weapon.system.skill.alternativ.id&&sheetData.combatSkills[weapon.system.skill.alternativ.id]){const skill=this.actor.items.get(weapon.system.skill.alternativ.id);weapon.system.skill.alternativ.name=skill.system.skillName,weapon.system.skill.alternativ.value=skill.value}}weapon.system._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties)){const property={};property.id=key,property.name=value,property.value=!0===weapon.system.properties[key],weapon.system._properties.push(property)}sheetData.weapons[weapon._id]=weapon,weapon.system.properties.rngd?sheetData.rangeWpn.push(weapon):sheetData.meleeWpn.push(weapon)}const token=this.token;if(sheetData.tokenId=token?`${token.parent?.id?token.parent.id:"TOKEN"}.${token.id}`:null,sheetData.hasEmptyValueWithFormula=!1,sheetData.data.system.characteristics)for(const characteristic of Object.values(sheetData.data.system.characteristics))characteristic.value||(characteristic.editable=!0),characteristic.hard=Math.floor(characteristic.value/2),characteristic.extreme=Math.floor(characteristic.value/5),characteristic.value||characteristic.formula?characteristic.display=!0:characteristic.display=!1,!characteristic.value&&characteristic.formula&&(characteristic.hasEmptyValueWithFormula=!0),sheetData.hasEmptyValueWithFormula=sheetData.hasEmptyValueWithFormula||characteristic.hasEmptyValueWithFormula}if(["vehicle","container"].includes(this.actor.type))sheetData.data.system.attribs.hp.auto=!1,sheetData.data.system.attribs.mp.auto=!1,sheetData.data.system.attribs.san.auto=!1,sheetData.data.system.attribs.mov.auto=!1,sheetData.data.system.attribs.db.auto=!1,sheetData.data.system.attribs.build.auto=!1;else{const auto=this.actor.checkUndefinedAuto();sheetData.data.system=mergeObject(sheetData.data.system,auto)}return sheetData.data.system.attribs.mp.value<0&&(sheetData.data.system.attribs.mp.value=null),sheetData.data.system.attribs.san.value<0&&(sheetData.data.system.attribs.san.value=null),["vehicle"].includes(this.actor.type)||sheetData.data.system.biography instanceof Array&&sheetData.data.system.biography.length&&(sheetData.data.system.biography[0].isFirst=!0,sheetData.data.system.biography[sheetData.data.system.biography.length-1].isLast=!0),sheetData.showInventoryItems=!1,sheetData.showInventoryBooks=!1,sheetData.showInventorySpells=!1,sheetData.showInventoryTalents=!1,sheetData.showInventoryStatuses=!1,sheetData.showInventoryWeapons=!1,sheetData.hasConditions=this.actor.effects.size>0||void 0!==this.actor.system.conditions&&Object.keys(this.actor.system.conditions).filter((condition=>this.actor.system.conditions[condition].value)).length>0,sheetData}get tokenKey(){throw ui.notifications.error("DEPRECATED SHOULD NOT HAPPEN!"),new Error("base.js get tokenKey(): DEPRECATED SHOULD NOT HAPPEN!")}onCloseSheet(){}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const rollMenu={id:"skill-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"gm",items:[{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}},{action:"request-roll",label:"Request roll"}]}]},sanMenu={id:"san-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"encounter",label:"Encounter"},{action:"roll",label:"Roll"},{action:"opposed-roll",label:"Opposed roll"},{action:"combined-roll",label:"Combined roll"}]},{classes:"keeper",visibility:"trusted",items:[{action:"request-roll",label:"Request roll"},{label:{icon:"fas fa-link",text:"Link"},subMenu:{items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"},{action:"link-encounter",label:"Encounter"}]}}]}]},rollContextMenu=new CoC7ContextMenu;rollContextMenu.bind(rollMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(rollContextMenu);const sanContextMenu=new CoC7ContextMenu;sanContextMenu.bind(sanMenu,html,this._onContextMenuClick.bind(this)),this.menus.push(sanContextMenu)}else html.find(".characteristic-label").contextmenu(this._onOpposedRoll.bind(this)),html.find(".skill-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".attribute-label.rollable").contextmenu(this._onOpposedRoll.bind(this));if(html.find(".characteristic-label").click(this._onRollCharacteriticTest.bind(this)),html.find(".skill-name.rollable").click(this._onRollSkillTest.bind(this)),html.find(".skill-image").click(this._onRollSkillTest.bind(this)),html.find(".attribute-label.rollable").click(this._onRollAttribTest.bind(this)),html.find(".token-drag-handle").on("dragstart",this._onDragTokenStart.bind(this)),this.actor.isOwner&&!this.actor.compendium?.locked&&(html.find(".lock").click(this._onLockClicked.bind(this)),html.find(".flag").click(this._onFlagClicked.bind(this)),html.find(".formula").click(this._onFormulaClicked.bind(this))),this.actor.isOwner&&void 0===this.actor.compendium){html.find(".characteristic-label").on("dragstart",(event=>this._onDragCharacteristic(event))),html.find(".attribute-label").on("dragstart",(event=>this._onDragAttribute(event))),html.find(".san-check").on("dragstart",(event=>this._onDragSanCheck(event))),html.find(".weapon-name.rollable").contextmenu(this._onOpposedRoll.bind(this)),html.find(".roll-characteritics").click(this._onRollCharacteriticsValue.bind(this)),html.find(".average-characteritics").click(this._onAverageCharacteriticsValue.bind(this)),html.find(".toggle-switch").click(this._onToggle.bind(this)),html.find(".auto-toggle").click(this._onAutoToggle.bind(this)),(game.user.isGM||game.settings.get("CoC7","statusPlayerEditable"))&&(html.find(".reset-counter").click(this._onResetCounter.bind(this)),html.find(".condition-monitor").click(this._onConditionToggle.bind(this)),html.find(".is-dying").click(this.heal.bind(this)),html.find(".is-dead").click(this.revive.bind(this))),html.find(".dying-check").click(this.checkForDeath.bind(this)),html.find(".item .item-image").click((event=>this._onItemRoll(event))),html.find(".weapon-name.rollable").click((event=>this._onWeaponRoll(event))),html.find(".item-name.effect-name").click((event=>this._onEffect(event))),html.find(".weapon-skill.rollable").click((async event=>this._onWeaponSkillRoll(event))),html.find(".reload-weapon").click((event=>this._onReloadWeapon(event))),html.find(".reload-weapon").on("contextmenu",(event=>this._onReloadWeapon(event))),html.find(".add-ammo").click(this._onAddAmo.bind(this)),html.find(".read-only").dblclick(this._toggleReadOnly.bind(this)),html.on("click",".weapon-damage",this._onWeaponDamage.bind(this)),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".items-header").click(this._onItemHeader.bind(this)),html.find(".section-header").click(this._onSectionHeader.bind(this));const wheelInputs=html.find(".attribute-value");for(const wheelInput of wheelInputs)wheelInput.addEventListener("wheel",(event=>this._onWheel(event)),{passive:!0})}this.options.editable&&(html.find(".show-detail").click((event=>this._onItemSummary(event))),html.find(".item-popup").click(this._onItemPopup.bind(this)),html.find(".show-detail").dblclick((event=>this._onRenderItemSheet(event))),html.find(".item-edit").click((event=>this._onRenderItemSheet(event))),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.stopPropagation(),ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":{const properties={};ev.currentTarget.dataset.melee?properties.melee=!0:ev.currentTarget.dataset.rngd&&(properties.rngd=!0),this.actor.createEmptyWeapon(ev,properties)}}})),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".add-new-section").click((()=>{this.actor.createBioSection(),this.render()})),html.find(".delete-section").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.deleteBioSection(index)})),html.find(".move-section-up").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionUp(index)})),html.find(".move-section-down").click((ev=>{const index=parseInt(ev.currentTarget.closest(".bio-section").dataset.index);this.actor.moveBioSectionDown(index)})),html.find(".development-flag").dblclick((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("developement")})),html.find(".occupation-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("occupation")})),html.find(".archetype-skill-flag.clickable").click((ev=>{this.actor.items.get(ev.currentTarget.closest(".item").dataset.itemId).toggleItemFlag("archetype")})),html.find(".skill-developement").click((event=>{this.actor.developementPhase(event.shiftKey)})),html.find(".luck-development").click((event=>{event.detail&&1!==event.detail||this.actor.developLuck(event.shiftKey)})),html.find(".clear_conditions").click((event=>{if(void 0!==this.actor.system.conditions){const disable={};for(const condition in this.actor.system.conditions)void 0!==this.actor.system.conditions[condition].value&&!0===this.actor.system.conditions[condition].value&&(disable[`system.conditions.${condition}.value`]=!1);Object.keys(disable).length>0&&this.actor.update(disable)}const effects=this.actor.effects.map((effect=>effect.id));effects.length>0&&this.actor.deleteEmbeddedDocuments("ActiveEffect",effects)})),CoC7Link.bindEventsHandler(html),html.find(".test-trigger").click((async event=>{if(!game.settings.get("CoC7","hiddendevmenu"))return null})),html.find(".skill-name.rollable").mouseenter(this.toolTipSkillEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".characteristic-label").mouseenter(this.toolTipCharacteristicEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".attribute-label.rollable").mouseenter(this.toolTipAttributeEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".auto-toggle").mouseenter(this.toolTipAutoEnter.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".item-control.development-flag").mouseenter(this.toolTipFlagForDevelopment.bind(this)).mouseleave(game.CoC7Tooltips.toolTipLeave.bind(this)),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.actor))))}toolTipSkillEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const isCombat=game.CoC7Tooltips.ToolTipHover.classList?.contains("combat"),item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId);let toolTip=game.i18n.format(isCombat?"CoC7.ToolTipCombat":"CoC7.ToolTipSkill",{skill:skill.name,regular:skill.value,hard:Math.floor(skill.value/2),extreme:Math.floor(skill.value/5)});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipCharacteristicEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const char=game.CoC7Tooltips.ToolTipHover.closest(".char-box");if(void 0!==char&&char){const charId=char.dataset.characteristic,characteristic=sheet.actor.characteristics[charId];let toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:characteristic.label,regular:characteristic.value??0,hard:characteristic.hard??0,extreme:characteristic.extreme??0});game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}toolTipAttributeEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const attrib=game.CoC7Tooltips.ToolTipHover.closest(".attribute");if(void 0!==attrib){const attributeId=attrib.dataset.attrib;let toolTip="";const attributes=sheet.actor.system.attribs[attributeId];switch(attributeId){case"lck":toolTip=game.i18n.format("CoC7.ToolTipSkill",{skill:attributes.label,regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):""})),game.CoC7Tooltips.displayToolTip(toolTip);break;case"db":toolTip=game.i18n.localize("CoC7.ToolTipDB"),game.CoC7Tooltips.displayToolTip(toolTip);break;case"san":toolTip=game.i18n.format("CoC7.ToolTipSanity",{skill:"Sanity",regular:attributes.value??0,hard:Math.floor((attributes.value??0)/2),extreme:Math.floor((attributes.value??0)/5)}),game.user.isGM&&(toolTip+=game.i18n.format("CoC7.ToolTipKeeperSkill",{other:game.i18n.localize("CoC7.ToolTipKeeperSanity")+(game.settings.get("CoC7","stanbyGMRolls")&&sheet.actor.hasPlayerOwner?game.i18n.format("CoC7.ToolTipKeeperStandbySkill",{name:sheet.actor.name}):"")})),game.CoC7Tooltips.displayToolTip(toolTip)}}}}),delay)}}toolTipAutoEnter(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));delay>0&&(game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const toolTip=game.i18n.localize("CoC7.ToolTipAutoToggle");game.CoC7Tooltips.displayToolTip(toolTip)}}),delay))}toolTipFlagForDevelopment(event){const delay=parseInt(game.settings.get("CoC7","toolTipDelay"));if(delay>0){const sheet=this;game.CoC7Tooltips.ToolTipHover=event.currentTarget,game.CoC7Tooltips.toolTipTimer=setTimeout((function(){if(void 0!==game.CoC7Tooltips.ToolTipHover&&null!==game.CoC7Tooltips.ToolTipHover){const item=game.CoC7Tooltips.ToolTipHover.closest(".item");if(void 0!==item){const skillId=item.dataset.skillId,skill=sheet.actor.items.get(skillId),toolTip=game.i18n.format("CoC7.ToolTipSkillFlagToggle",{status:game.i18n.localize(skill.system.flags.developement?"CoC7.ToolTipSkillFlagged":"CoC7.ToolTipSkillUnflagged")});game.CoC7Tooltips.displayToolTip(toolTip)}}}),delay)}}_onContextMenuClick(event,target){const targetType=target.dataset?.targetType,rollOptions={preventStandby:!0,fastForward:!1,actor:this.actor};switch(targetType){case"skill":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_SKILL,rollOptions.skillId=target.closest(".item")?.dataset.skillId;break;case"characteristic":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,rollOptions.characteristic=target.closest(".char-box").dataset.characteristic;break;case"attribute":rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.attribute=target.closest(".attribute").dataset.attrib}switch(event.currentTarget.dataset.action){case"roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL;break;case"opposed-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_OPPOSED;break;case"combined-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED;break;case"request-roll":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NORMAL,rollOptions.preventStandby=!1;break;case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.sendToClipboard=!0;break;case"link-encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0;break;case"encounter":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_SAN_CHECK,rollOptions.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,rollOptions.fastForward=!0}CoC7ChatMessage.trigger(rollOptions)}_onRenderItemSheet(event){const li=$(event.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",message.actorTo=await new Promise((resolve=>{new Dialog({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,buttons:{confirm:{label:game.i18n.localize("CoC7.Validate"),callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)if("user"===name)return resolve(value)}}},default:"confirm",close:()=>{}}).render(!0)})),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onDragStart(event){if(super._onDragStart(event),this.token){const dragData=JSON.parse(event.dataTransfer.getData("text/plain"));dragData.tokenUuid=this.token.uuid,dragData.tokenId=this.token.id,dragData.sceneId=this.token.parent.id,event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}_onDragCharacteristic(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"characteristic",check:"check",type:"CoC7Link",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.characteristic,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragAttribute(event){const box=event.currentTarget.parentElement,data={CoC7Type:"link",linkType:"attribute",check:"check",type:"CoC7Link",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,name:box.dataset.attrib,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}_onDragSanCheck(event){const sanMin=event.currentTarget.querySelector(".san-value.pass"),sanMax=event.currentTarget.querySelector(".san-value.failed"),data={CoC7Type:"link",linkType:"coc7-link",check:"sanloss",hasPlayerOwner:this.actor.hasPlayerOwner,actorKey:this.actor.actorKey,sanMin:sanMin.innerText,sanMax:sanMax.innerText,icon:null,document:{type:this.document.type,uuid:this.document.uuid}};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onDrop(event){const dataString=event.dataTransfer.getData("text/plain");if(""===dataString)return!1;const data=JSON.parse(dataString);"CoC7Link"===data.type&&data.check===CoC7Link.CHECK_TYPE.EFFECT&&CoC7Link._onLinkActorClick(this.actor,data),await super._onDrop(event)}async _onConditionToggle(event){event.preventDefault(),event.currentTarget.dataset.condition&&await this.actor.toggleCondition(event.currentTarget.dataset.condition)}async revive(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dead)}async heal(){game.user.isGM&&this.actor.unsetCondition(COC7.status.dying)}async checkForDeath(event){const conCheck=new CoC7ConCheck(this.actor.isToken?this.actor.tokenKey:this.actor.id);conCheck.stayAlive=!0,conCheck.toMessage(event.shiftKey)}async _onDragTokenStart(event){const data={type:"Token",uuid:this.token.uuid};event.originalEvent.dataTransfer.setData("text/plain",JSON.stringify(data))}async _onResetCounter(event){event.preventDefault(),await this.actor.resetDailySanity()}async _onAutoToggle(event){if(event.currentTarget.closest(".attribute")){const attrib=event.currentTarget.closest(".attribute").dataset.attrib;this.actor.toggleAttribAuto(attrib)}}async _onToggle(event){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&weapon.toggleProperty(event.currentTarget.dataset.property,isCtrlKey(event))}async _onRollCharacteriticsValue(){await this.actor.rollCharacteristicsValue()}async _onAverageCharacteriticsValue(){this.actor.averageCharacteristicsValue()}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked,Hooks.call("actorLockClickedCoC7",[!isLocked])}async _onFlagClicked(event){event.preventDefault();const flagName=event.currentTarget.dataset.flag;this.actor.toggleActorFlag(flagName)}async _onFormulaClicked(event){event.preventDefault(),this.actor.toggleActorFlag("displayFormula")}async _onWheel(event){let value=parseInt(event.currentTarget.value)||null;switch(event.deltaY>0&&(value=0===value?0:value-1),event.deltaY<0&&(value+=1),event.currentTarget.name){case"system.attribs.hp.value":case"system.attribs.build.current":this.actor.setHp(value);break;case"system.attribs.mp.value":this.actor.setMp(value);break;case"system.attribs.san.value":this.actor.setSan(value);break;case"system.attribs.lck.value":this.actor.setLuck(value)}}_toggleReadOnly(event){event.currentTarget.readOnly=!event.currentTarget.readOnly,event.currentTarget.classList.toggle("read-only")}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>{summary.remove(),li.toggleClass("expanded")}))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Link.bindEventsHandler(div),div.slideDown(200,(()=>li.toggleClass("expanded")))}}async _onSectionHeader(event){event.preventDefault();const section=event.currentTarget.closest("section"),pannelClass=event.currentTarget.dataset.pannel;if(void 0===pannelClass)return;const pannel=$(section).find(`.pannel.${pannelClass}`);pannel.hasClass("expanded")?pannel.slideUp(200,(()=>pannel.toggleClass("expanded"))):pannel.slideDown(200,(()=>pannel.toggleClass("expanded")));const camelFlag=chatHelper.hyphenToCamelCase(`data.pannel.${pannelClass}.expanded`);this.actor.update({[camelFlag]:!pannel.hasClass("expanded")},{render:!1})}_onInventoryHeader(event){event.preventDefault();const li=$(event.currentTarget).siblings("li");li.is(":visible")?li.slideUp(200):li.slideDown(200)}_onItemHeader(event){event.preventDefault();const ol=$(event.currentTarget).next("ol");ol.is(":visible")?ol.slideUp(200):ol.slideDown(200)}async _onItemPopup(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id"));CoC7ActorSheet.popupSkill(item)}static async popupSkill(skill){skill.system.description.enrichedValue=TextEditor.enrichHTML(skill.system.description.value,{async:!1});new Dialog({title:game.i18n.localize("CoC7.SkillDetailsWindow"),content:skill,buttons:{},close:()=>{}},{classes:["coc7","sheet","skill"],width:520,height:480,scrollY:[".item-description"],template:"systems/CoC7/templates/apps/skill-details.html"}).render(!0)}async _onItemRoll(event){event.preventDefault()}async _onEffect(event){event.preventDefault();const effectId=event.currentTarget.closest("li").dataset.effectId,effect=this.actor.effects.get(effectId);isCtrlKey(event)&&game.user.isGM&&CoC7ContentLinkDialog.create({type:"CoC7Link",check:CoC7Link.CHECK_TYPE.EFFECT,object:effect})}async _onWeaponRoll(event){event.preventDefault();const itemId=event.currentTarget.closest("li").dataset.itemId,fastForward=event.shiftKey,weapon=this.actor.items.get(itemId);let actorKey;if(actorKey=this.token?this.actor.isToken&&game.actors.tokens[this.token.id]?`TOKEN.${this.token.id}`:`${this.token.parent.id}.${this.token.id}`:this.actor.id,isCtrlKey(event)&&game.user.isGM){const linkData={check:CoC7Link.CHECK_TYPE.ITEM,name:weapon.name};CoC7ContentLinkDialog.create(linkData,{actors:[this.actor]})}else{let proceedWithoutTarget;if(game.user.targets.size<=0&&(proceedWithoutTarget=await new Promise((resolve=>{const data={title:" ",content:game.i18n.format("CoC7.NoTargetSelected",{weapon:weapon.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>resolve(!0)}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)}))),game.user.targets.size>0||proceedWithoutTarget){if(!weapon.system.properties.rngd){game.user.targets.size>1&&ui.notifications.warn(game.i18n.localize("CoC7.WarnTooManyTarget"));new CoC7MeleeInitiator(actorKey,itemId,fastForward).createChatCard()}if(weapon.system.properties.rngd){new CoC7RangeInitiator(actorKey,itemId,fastForward).createChatCard()}}}}async _onReloadWeapon(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);0===event.button?event.shiftKey?await weapon.reload():await weapon.addBullet():2===event.button&&(event.shiftKey?await weapon.setBullets(0):await weapon.shootBullets(1))}async _onAddAmo(event){const itemId=event.currentTarget.closest(".item")?event.currentTarget.closest(".item").dataset.itemId:null;if(!itemId)return;const weapon=this.actor.items.get(itemId);await weapon.addBullet()}async _onWeaponSkillRoll(event){event.preventDefault();const skillId=event.currentTarget.dataset.skillId,actorId=event.currentTarget.closest("form").dataset.actorId,tokenKey=event.currentTarget.closest("form").dataset.tokenId,itemId=event.currentTarget.closest("li")?event.currentTarget.closest("li").dataset.itemId:null,check=new CoC7Check;if(!event.shiftKey){const usage=await RollDialog.create();usage&&(check.diceModifier=usage.get("bonusDice"),check.difficulty=usage.get("difficulty"),check.flatDiceModifier=Number(usage.get("flatDiceModifier")),check.flatThresholdModifier=Number(usage.get("flatThresholdModifier")))}check.actor=tokenKey||actorId,check.skill=skillId,check.item=itemId,await check.roll(),check.toMessage()}async _onWeaponDamage(event){event.preventDefault();const itemId=event.currentTarget.closest(".weapon").dataset.itemId,range=event.currentTarget.closest(".weapon-damage").dataset.range,damageChatCard=new DamageCard({fastForward:event.shiftKey,range});damageChatCard.actorKey=this.actor.tokenKey,damageChatCard.itemId=itemId,damageChatCard.updateChatCard()}async _onOpposedRoll(event){if(event.preventDefault(),"db"===event.currentTarget.parentElement.dataset.attrib)return;const data={rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_OPPOSED,event,actor:this.actor};event.currentTarget.classList.contains("characteristic-label")?data.rollType=CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC:event.currentTarget.classList.contains("attribute-label")&&(data.rollType=CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE),event.altKey&&(data.cardType=CoC7ChatMessage.CARD_TYPE_COMBINED),CoC7ChatMessage.trigger(data)}async _onRollCharacteriticTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,characteristic:event.currentTarget.closest(".char-box").dataset.characteristic,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _onRollAttribTest(event){event.preventDefault();const attrib=event.currentTarget.parentElement.dataset.attrib;if("db"!==attrib)game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_CHARACTERISTIC,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,attribute:event.currentTarget.closest(".attribute").dataset.attrib,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_ATTRIBUTE,cardType:event.altKey&&"san"===attrib?CoC7ChatMessage.CARD_TYPE_SAN_CHECK:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor});else if(!/^-{0,1}\d+$/.test(event.currentTarget.parentElement.dataset.rollFormula)){const r=new Roll(event.currentTarget.parentElement.dataset.rollFormula);await r.roll({async:!0}),isNaN(r.total)||void 0===r.total||r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:game.i18n.localize("CoC7.BonusDamageRoll")})}}_onRollSkillTest(event){event.preventDefault(),event.currentTarget.classList.contains("flagged4dev")||(game.settings.get("CoC7","useContextMenus")?CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,preventStandby:!0,fastForward:!0,skillId:event?.currentTarget.closest(".item")?.dataset.skillId,actor:this.actor}):CoC7ChatMessage.trigger({rollType:CoC7ChatMessage.ROLL_TYPE_SKILL,cardType:CoC7ChatMessage.CARD_TYPE_NORMAL,event,actor:this.actor}))}async _updateObject(event,formData){const overrides=foundry.utils.flattenObject(this.actor.overrides),name=event?.currentTarget?.name;if(name&&overrides&&overrides[name]&&ui.notifications.warn(game.i18n.format("CoC7.EffectAppliedCantOverride",{name})),event.currentTarget&&event.currentTarget.classList){if(event.currentTarget.classList.contains("skill-adjustment")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(item){const value=event.currentTarget.value?parseInt(event.currentTarget.value):null;if(event.currentTarget.value?isNaN(value)||await item.update({[event.currentTarget.name]:value}):await item.update({[event.currentTarget.name]:null}),game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.credit-rating")===item.name&&void 0!==this.actor.occupation?.system?.creditRating?.max){const creditValue=(item.value||0)-(item.system.adjustments?.experience||0);(creditValue>Number(this.actor.occupation.system.creditRating.max)||creditValue<Number(this.actor.occupation.system.creditRating.min))&&ui.notifications.warn(game.i18n.format("CoC7.CreditOutOfRange",{min:Number(this.actor.occupation.system.creditRating.min),max:Number(this.actor.occupation.system.creditRating.max)}))}}}if(event.currentTarget.classList.contains("attribute-value")){if("system.attribs.san.value"===event.currentTarget.name)return await this.actor.setSan(parseInt(event.currentTarget.value)),void this.render(!0);if("system.attribs.hp.value"===event.currentTarget.name)return await this.actor.setHp(parseInt(event.currentTarget.value)),void this.render(!0)}if(event.currentTarget.classList.contains("text-area"))return void this.actor.updateTextArea(event.currentTarget);if(event.currentTarget.classList.contains("bio-section-value")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);await this.actor.updateBioValue(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("bio-section-title")){const index=parseInt(event.currentTarget.closest(".bio-section").dataset.index);this.actor.updateBioTitle(index,event.currentTarget.value)}if(event.currentTarget.classList.contains("npc-skill-score")){const skill=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);skill&&await skill.updateValue(event.currentTarget.value)}if(event.currentTarget.classList.contains("skill-name")||event.currentTarget.classList.contains("item-name")){const item=this.actor.items.get(event.currentTarget.closest(".item").dataset.skillId);if(item){const data={};if(item.system.properties.special){const parts=CoC7Item.getNamePartsSpec(event.currentTarget.value,item.system.specialization);data.name=parts.name,data["system.skillName"]=parts.skillName,data["system.specialization"]=parts.specialization}else data["system.skillName"]=event.currentTarget.value,data.name=event.currentTarget.value;await item.update(data)}}if(event.currentTarget.classList.contains("characteristic-formula")&&0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("attribute-value")&&0!==event.currentTarget.value.length&&"db"===event.currentTarget.closest(".attribute").dataset.attrib){const r=new Roll(event.currentTarget.value);await r.roll({async:!0}),(isNaN(r.total)||void 0===r.total)&&(ui.notifications.error(game.i18n.format("CoC7.ErrorInvalidFormula",{value:event.currentTarget.value})),formData[event.currentTarget.name]=game.i18n.format("CoC7.ErrorInvalid"))}if(event.currentTarget.classList.contains("weapon-skill")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId),skill=this.actor.items.get(event.currentTarget.options[event.currentTarget.selectedIndex].value);if(weapon&&skill)switch(event.currentTarget.dataset.skill){case"main":await weapon.update({"system.skill.main.id":skill.id,"system.skill.main.name":skill.name});break;case"alternativ":await weapon.update({"system.skill.alternativ.id":skill.id,"system.skill.alternativ.name":skill.name})}}if(event.currentTarget.classList.contains("weapon-name")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);weapon&&await weapon.update({name:event.currentTarget.value})}if(event.currentTarget.classList.contains("damage-formula")){const weapon=this.actor.items.get(event.currentTarget.closest(".item").dataset.itemId);if(weapon)if(0!==event.currentTarget.value.length){const r=new Roll(event.currentTarget.value);if(await r.roll({async:!0}),isNaN(r.total)||void 0===r.total)ui.notifications.error(game.i18n.format("CoC7.ErrorUnableToParseFormula",{value:event.currentTarget.value}));else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":event.currentTarget.value});break;case"long":await weapon.update({"system.range.long.damage":event.currentTarget.value});break;case"extreme":await weapon.update({"system.range.extreme.damage":event.currentTarget.value})}}else switch(event.currentTarget.dataset.range){case"normal":await weapon.update({"system.range.normal.damage":null});break;case"long":await weapon.update({"system.range.long.damage":null});break;case"extreme":await weapon.update({"system.range.extreme.damage":null})}}}return this.object.update(formData)}}class CoC7NPCSheet extends CoC7ActorSheet{async getData(){const sheetData=await super.getData();return sheetData.allowFormula=!0,sheetData.displayFormula=this.actor.getActorFlag("displayFormula")||!1,sheetData.hasSan=null!==sheetData.data.system.attribs.san.value,sheetData.hasMp=null!==sheetData.data.system.attribs.mp.value,sheetData.hasLuck=null!==sheetData.data.system.attribs.lck.value,sheetData.isCreature=!1,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.showInventoryWeapons=!1,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBiographyPersonalDescription=TextEditor.enrichHTML(sheetData.data.system.biography.personalDescription?.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){if(super.activateListeners(html),game.settings.get("CoC7","useContextMenus")){this.menus||(this.menus=[]);const sanlossMenu={id:"san-loss-roll",classes:"roll-menu",section:[{classes:"main",items:[{action:"link-tool",label:"Open in link tool"},{action:"send-chat",label:"Send to chat"},{action:"copy-to-clipboard",label:"Copy to clip-board"}]}]},sanlossContextMenu=new CoC7ContextMenu;sanlossContextMenu.bind(sanlossMenu,html,this._onSanLossContextMenuClick.bind(this)),this.menus.push(sanlossContextMenu)}html.find(".roll-san").click(this._onSanCheck.bind(this))}async _onSanLossContextMenuClick(event){const rollOptions={rollType:CoC7ChatMessage.ROLL_TYPE_ENCOUNTER,preventStandby:!0,fastForward:!1,event,cardType:CoC7ChatMessage.CARD_TYPE_SAN_CHECK,actor:this.actor};switch(event.currentTarget.dataset.action){case"link-tool":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.openLinkTool=!0;break;case"send-chat":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToChat=!0;break;case"copy-to-clipboard":rollOptions.cardType=CoC7ChatMessage.CARD_TYPE_NONE,rollOptions.createEncounter=!0,rollOptions.sendToClipboard=!0}CoC7ChatMessage.trigger(rollOptions)}async _onSanCheck(event){if(event.preventDefault(),this.actor.system.special.sanLoss.checkPassed||this.actor.system.special.sanLoss.checkFailled)if(isCtrlKey(event)&&game.user.isGM){let difficulty,modifier;if(!event.shiftKey){const usage=await RollDialog.create({disableFlatDiceModifier:!0});usage&&(modifier=Number(usage.get("bonusDice")),difficulty=Number(usage.get("difficulty")))}const linkData={check:"sanloss",sanMin:this.actor.system.special.sanLoss.checkPassed,sanMax:this.actor.system.special.sanLoss.checkFailled,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};"blindroll"===game.settings.get("core","rollMode")&&(linkData.blind=!0),void 0!==modifier&&(linkData.modifier=modifier),void 0!==difficulty&&(linkData.difficulty=difficulty);const link=(new CoC7Link)._createDocumentLink(linkData);link&&chatHelper.createMessage(null,game.i18n.format("CoC7.MessageCheckRequestedWait",{check:link}))}else{const sanData={sanMax:this.actor.sanLossCheckFailled,sanMin:this.actor.sanLossCheckPassed,sanReason:this.actor.system.infos.type?.length?this.actor.system.infos.type:this.actor.name,tokenKey:this.actor.actorKey};SanCheckCard.checkTargets(sanData,event.shiftKey)}}onCloseSheet(){this.actor.unsetActorFlag("displayFormula"),super.onCloseSheet()}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc"],dragDrop:[{dragSelector:".item",dropSelector:null}],template:"systems/CoC7/templates/actors/npc-sheet.html",width:580,resizable:!1,minimizable:!0})}async _updateObject(event,formData){if(!(event.currentTarget&&event.currentTarget.classList&&event.currentTarget.classList.contains("characteristic-score")))return super._updateObject(event,formData);this.actor.setCharacteristic(event.currentTarget.name,event.currentTarget.value)}static forceAuto(app,html){html.height("auto")}setPosition(a){super.setPosition(a),CoC7NPCSheet.forceAuto(a,this._element)}}class CoC7CreatureSheet extends CoC7NPCSheet{async getData(){const sheetData=await super.getData();return sheetData.isCreature=!0,sheetData}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","npc","creature"]})}}class CoC7CreateMythosEncounter extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7"],title:game.i18n.localize("CoC7.SanityLossTypeDialogTitle"),template:"systems/CoC7/templates/apps/sanity-loss-type.hbs",height:"auto"})}async getData(){const data=await super.getData();return data.isImmunity="immunity"===data.object.type,data}activateListeners(html){html.find(".field_type").change(this._onSelectChange.bind(this)),html.find(".dialog-button").click(this._onButtonClick.bind(this)),super.activateListeners(html)}_onButtonClick(event){if("add"===event.currentTarget.dataset.button){const html=$(event.currentTarget).closest(".window-content"),type=html.find(".field_type").val(),name=html.find(".field_name").val(),value=parseInt(html.find(".field_value").val()),sanityLossEvents=this.object.actor.system.sanityLossEvents??[];sanityLossEvents.push({type:name,totalLoss:value,immunity:"immunity"===type}),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.object.actor.update({"data.sanityLossEvents":sanityLossEvents})}this.close()}_onSelectChange(event){const html=$(event.currentTarget).closest(".window-content");this.object.name=html.find(".field_name").val(),this.object.type=html.find(".field_type").val(),this.render(!0)}async _updateObject(event,formData){}}class CoC7CharacterSheet extends CoC7ActorSheet{_getHeaderButtons(){if("CoC7CharacterSheet"===this.constructor.name){this.summarized||(this.summarized=!1);let buttons=super._getHeaderButtons();return buttons=[{label:this.summarized?game.i18n.localize("CoC7.Maximize"):game.i18n.localize("CoC7.Summarize"),class:"test-extra-icon",icon:this.summarized?"fas fa-window-maximize":"fas fa-window-minimize",onclick:event=>this.toggleSheetMode(event)}].concat(buttons),buttons}return super._getHeaderButtons()}async toggleSheetMode(event){this.summarized=!this.summarized;let options=foundry.utils.duplicate(CoC7CharacterSheet.defaultOptions);this.summarized&&(options=foundry.utils.mergeObject(options,{classes:["coc7","actor","character","summarized"],height:200,resizable:!1,width:700})),options.token=this.options.token,await this.close(),await this.render(!0,options)}async getData(){const sheetData=await super.getData();this.isEditable&&void 0===this.actor.getFlag("CoC7","skillListMode")&&await this.actor.setFlag("CoC7","skillListMode",!1),this.isEditable&&void 0===this.actor.getFlag("CoC7","skillShowUncommon")&&await this.actor.setFlag("CoC7","skillShowUncommon",!0),sheetData.skillListModeValue=this.actor.getFlag("CoC7","skillListMode")??!1,sheetData.skillShowUncommon=this.actor.getFlag("CoC7","skillShowUncommon")??!0,sheetData.showIconsOnly=game.settings.get("CoC7","showIconsOnly"),this.actor.occupation?(sheetData.data.system.infos.occupation=this.actor.occupation.name,sheetData.data.system.infos.occupationSet=!0):sheetData.data.system.infos.occupationSet=!1,this.actor.archetype?(sheetData.data.system.infos.archetype=this.actor.archetype.name,sheetData.data.system.infos.archetypeSet=!0):sheetData.data.system.infos.archetypeSet=!1,sheetData.totalExperience=this.actor.experiencePoints,sheetData.totalOccupation=this.actor.occupationPointsSpent,sheetData.invalidOccupationPoints=Number(this.actor.occupationPointsSpent)!==Number(this.actor.system.development?.occupation),sheetData.totalArchetype=this.actor.archetypePointsSpent,sheetData.invalidArchetypePoints=Number(this.actor.archetypePointsSpent)!==Number(this.actor.system.development?.archetype),sheetData.totalPersonal=this.actor.personalPointsSpent,sheetData.invalidPersonalPoints=Number(this.actor.personalPointsSpent)!==Number(this.actor.system.development?.personal),sheetData.creditRatingMax=Number(this.actor.occupation?.system.creditRating.max),sheetData.creditRatingMin=Number(this.actor.occupation?.system.creditRating.min),sheetData.invalidCreditRating=this.actor.creditRatingSkill?.system.adjustments?.occupation>sheetData.creditRatingMax||this.actor.creditRatingSkill?.system.adjustments?.occupation<sheetData.creditRatingMin,sheetData.pulpTalentCount=sheetData.itemsByType.talent?.length?sheetData.itemsByType.talent?.length:0,sheetData.minPulpTalents=this.actor.archetype?.system.talents?this.actor.archetype?.system.talents:0,sheetData.invalidPulpTalents=sheetData.pulpTalentCount<sheetData.minPulpTalents,sheetData.hasDevelopmentPhase=this.actor.hasDevelopmentPhase,sheetData.allowDevelopment=game.settings.get("CoC7","developmentEnabled"),sheetData.allowCharCreation=game.settings.get("CoC7","charCreationEnabled"),sheetData.developmentRollForLuck=game.settings.get("CoC7","developmentRollForLuck"),sheetData.showDevPannel=sheetData.allowDevelopment||sheetData.allowCharCreation,sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});sheetData.manualCredit=this.actor.getActorFlag("manualCredit"),sheetData.manualCredit||(sheetData.monetary={spendingLevel:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.spendingLevel),assets:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.assets),cash:CoCActor.monetaryFormat(sheetData.data.system.monetary.format,sheetData.data.system.monetary.symbol,this.actor.cash)}),sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.summarized=this.summarized&&!sheetData.permissionLimited,sheetData.skillList=[];let previousSpec="";for(const skill of sheetData.skills)!sheetData.skillShowUncommon&&skill.system.properties.rarity||(skill.system.properties.special&&previousSpec!==skill.system.specialization&&(previousSpec=skill.system.specialization,sheetData.skillList.push({isSpecialization:!0,name:skill.system.specialization})),sheetData.skillList.push(skill));if(sheetData.skillsByValue=[...sheetData.skills].sort(((a,b)=>b.system.value-a.system.value)),sheetData.topSkills=[...sheetData.skillsByValue].slice(0,14),sheetData.skillsByValue=sheetData.skillsByValue.filter((skill=>sheetData.skillShowUncommon||!skill.system.properties.rarity)),sheetData.topWeapons=[...sheetData.meleeWpn,...sheetData.rangeWpn].sort(((a,b)=>a.system.skill.main?.value-b.system.skill.main?.value)).reverse().slice(0,3),sheetData.displayPlayerName=game.settings.get("CoC7","displayPlayerNameOnSheet"),sheetData.displayPlayerName&&!sheetData.data.system.infos.playername){const user=this.actor.characterUser;user&&(sheetData.data.system.infos.playername=user.name)}return sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryStatuses=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"status")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryStatuses||sheetData.showInventoryWeapons,sheetData.enrichedBackstory=TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}_saveScrollPositions(html){super._saveScrollPositions(html);this._scrollPositionsX=[".right-panel .tab.development ol"].reduce(((pos,sel)=>{const el=html.find(sel);return pos[sel]=Array.from(el).map((el=>el.scrollLeft)),pos}),{})}_restoreScrollPositions(html){super._restoreScrollPositions(html);const selectors=[".right-panel .tab.development ol"],positions=this._scrollPositionsX||{};for(const sel of selectors){html.find(sel).each(((i,el)=>{el.scrollLeft=positions[sel]?.[i]||0}))}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","character"],template:"systems/CoC7/templates/actors/character/index.html",width:687,height:623,resizable:!0,dragDrop:[{dragSelector:".item",dropSelector:null}],scrollY:[".right-panel .tab"],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"skills"}]})}activateListeners(html){super.activateListeners(html),this.actor.isOwner&&(html.find(".skill-name.rollable.flagged4dev").click((async event=>this._onSkillDev(event))),html.find(".reset-occupation").click((async()=>await this.actor.resetOccupation())),html.find(".reset-archetype").click((async()=>await this.actor.resetArchetype())),html.find(".open-item").click((event=>this._onItemDetails(event))),html.find(".toggle-list-mode").click((event=>{this.toggleSkillListMode(event)})),html.find(".toggle-uncommon-mode").click((event=>{this.toggleSkillUncommonMode(event)})),game.user.isGM&&(html.find(".sanity-loss-type-add").click(this._onAddSanityLossReason.bind(this)),html.find(".sanity-loss-type-delete").click(this._onDeleteSanityLossReason.bind(this)),html.find(".toggle-keeper-flags").click(this._onToggleKeeperFlags.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this))))}_onAddMonetary(){const values=this.actor.system.monetary.values?duplicate(this.actor.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.actor.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=duplicate(this.actor.system.monetary.values);values.splice(Number(div.dataset.index),1),this.actor.update({"system.monetary.values":values})}_onToggleKeeperFlags(event){switch(event.preventDefault(),event.currentTarget.dataset.flag){case"mythosInsanityExperienced":this.actor.setFlag("CoC7","mythosInsanityExperienced",!this.actor.mythosInsanityExperienced);break;case"mythosHardened":this.actor.setFlag("CoC7","mythosHardened",!this.actor.mythosHardened)}}async _onAddSanityLossReason(event){event.preventDefault(),new CoC7CreateMythosEncounter({actor:this.actor,type:event.currentTarget.dataset.type},{}).render(!0)}_onDeleteSanityLossReason(event){event.preventDefault();const offset=$(event.currentTarget).closest(".flexrow").data("offset"),sanityLossEvents=this.actor.system.sanityLossEvents??[];sanityLossEvents.splice(offset,1),sanityLossEvents.sort((function(left,right){return left.type.localeCompare(right.type)})),this.actor.update({"system.sanityLossEvents":sanityLossEvents})}async toggleSkillListMode(event){return await this.actor.setFlag("CoC7","skillListMode",!this.actor.getFlag("CoC7","skillListMode")),await this.render(!0)}async toggleSkillUncommonMode(event){return await this.actor.setFlag("CoC7","skillShowUncommon",!this.actor.getFlag("CoC7","skillShowUncommon")),await this.render(!0)}async _onSkillDev(event){event.preventDefault();const skillId=event.currentTarget.closest(".item").dataset.itemId;await this.actor.developSkill(skillId,event.shiftKey)}_onItemDetails(event){event.preventDefault();const type=event.currentTarget.dataset.type,item=this.actor[type];item&&item.sheet.render(!0)}_updateObject(event,formData){const system=expandObject(formData)?.system;system.monetary?.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),super._updateObject(event,formData)}static renderSheet(sheet,html){if(game.settings.get("CoC7","overrideSheetArtwork")){if(game.settings.get("CoC7","artWorkSheetBackground"))if("null"===game.settings.get("CoC7","artWorkSheetBackground").toLowerCase())sheet.element.css("--main-sheet-bg","url( './assets/images/void.webp')");else if(sheet.element.css("--main-sheet-bg",game.settings.get("CoC7","artWorkSheetBackground")),"slice"!==game.settings.get("CoC7","artWorkSheetBackgroundType")){let styleSheet,cssRuleIndex;for(let i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].href?.endsWith("coc7g.css")){styleSheet=document.styleSheets[i];break}if(styleSheet)for(let i=0;i<styleSheet.rules.length;i++)if(".sheetV2.character form"===styleSheet.rules[i].selectorText){cssRuleIndex=i;break}if(cssRuleIndex){const CSSStyle=styleSheet.rules[cssRuleIndex].style;switch(CSSStyle.removeProperty("border-image"),CSSStyle.setProperty("background",game.settings.get("CoC7","artWorkSheetBackground")),game.settings.get("CoC7","artWorkSheetBackgroundType")){case"auto":default:CSSStyle.setProperty("background-size","auto");break;case"contain":CSSStyle.setProperty("background-size","contain");break;case"cover":CSSStyle.setProperty("background-size","cover")}}}if(game.settings.get("CoC7","artWorkOtherSheetBackground")&&("null"===game.settings.get("CoC7","artWorkOtherSheetBackground").toLowerCase()?sheet.element.css("--other-sheet-bg","url( './assets/images/void.webp')"):sheet.element.css("--other-sheet-bg",game.settings.get("CoC7","artWorkOtherSheetBackground"))),game.settings.get("CoC7","artworkSheetImage")&&("null"===game.settings.get("CoC7","artworkSheetImage").toLowerCase()?sheet.element.css("--main-sheet-image","url( './assets/images/void.webp')"):sheet.element.css("--main-sheet-image",game.settings.get("CoC7","artworkSheetImage"))),game.settings.get("CoC7","artworkFrontColor")&&sheet.element.css("--main-sheet-front-color",game.settings.get("CoC7","artworkFrontColor")),game.settings.get("CoC7","artworkBackgroundColor")&&sheet.element.css("--main-sheet-back-color",game.settings.get("CoC7","artworkBackgroundColor")),game.settings.get("CoC7","artworkInteractiveColor")&&sheet.element.css("--main-sheet-interactive-color",game.settings.get("CoC7","artworkInteractiveColor")),game.settings.get("CoC7","artworkFixedSkillLength")||(sheet.element.css("--skill-length","auto"),sheet.element.css("--skill-specialization-length","auto")),game.settings.get("CoC7","artworkMainFont")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFont")).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontBold")){new FontFace("customSheetFont",game.settings.get("CoC7","artworkMainFontBold"),{weight:"bold"}).load().then((function(loadedFace){document.fonts.add(loadedFace)})).catch((function(error){ui.notifications.error(error)}))}if(game.settings.get("CoC7","artworkMainFontSize")){const size=`${game.settings.get("CoC7","artworkMainFontSize")}px`;size!==$(":root").css("font-size")&&$(":root").css("font-size",size)}}if(void 0!==sheet.actor?.system.pannel)for(const[key,value]of Object.entries(sheet.actor.system.pannel)){const pannelClass=chatHelper.camelCaseToHyphen(key),pannel=html.find(`.pannel.${pannelClass}`);value.expanded?pannel.addClass("expanded"):pannel.removeClass("expanded")}}}class CoC7Combat{static renderCombatTracker(app,html,data){const currentCombat=data.combats[data.currentIndex-1];currentCombat&&(html.find(".combatant").each(((i,el)=>{const combId=el.getAttribute("data-combatant-id"),combatantControlsDiv=el.querySelector(".combatant-controls"),combatant=currentCombat.combatants.get(combId);if(combatant.getFlag("CoC7","hasGun")?$(combatantControlsDiv).prepend(`<a class="combatant-control active add-init" title="${game.i18n.localize("CoC7.PutGunAway")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`):$(combatantControlsDiv).prepend(`<a class="combatant-control add-init" title="${game.i18n.localize("CoC7.DrawGun")}" data-control="drawGun"><i class="game-icon game-icon-revolver"></i></a>`),"optional"===game.settings.get("CoC7","initiativeRule")&&game.settings.get("CoC7","displayInitAsText")){if(combatant.initiative){const tokenInitiative=el.querySelector(".token-initiative"),initiativeTest=tokenInitiative.querySelector(".initiative"),roll=100*combatant.initiative-100*Math.floor(combatant.initiative);switch(Math.floor(combatant.initiative)){case CoC7Check.successLevel.fumble:tokenInitiative.classList.add("fumble"),initiativeTest.innerText=game.i18n.localize("CoC7.Fumble"),initiativeTest.title=roll;break;case CoC7Check.successLevel.failure:tokenInitiative.classList.add("failure"),initiativeTest.innerText=game.i18n.localize("CoC7.Failure"),initiativeTest.title=roll;break;case CoC7Check.successLevel.regular:tokenInitiative.classList.add("regular-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyRegular"),initiativeTest.title=roll;break;case CoC7Check.successLevel.hard:tokenInitiative.classList.add("hard-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyHard"),initiativeTest.title=roll;break;case CoC7Check.successLevel.extreme:tokenInitiative.classList.add("extreme-success"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyExtreme"),initiativeTest.title=roll;break;case CoC7Check.successLevel.critical:tokenInitiative.classList.add("critical"),initiativeTest.innerText=game.i18n.localize("CoC7.RollDifficultyCritical"),initiativeTest.title=roll}}}else if(combatant.initiative<0){const h4=el.querySelector(".token-name").querySelector("h4"),span=el.querySelector("span.initiative");h4.style.fontWeight="900",h4.style.textShadow="1px 1px 4px darkred",span.style.fontWeight="900",span.style.textShadow="1px 1px 4px darkred",el.style.color="darkred",el.style.background="black",el.style.fontWeight="900"}})),html.find(".add-init").click((event=>CoC7Combat._onToggleGun(event))))}static async _onToggleGun(event){event.preventDefault(),event.stopPropagation();const li=event.currentTarget.closest(".combatant"),c=await game.combat.combatants.get(li.dataset.combatantId);c.actor.isOwner&&(c.getFlag("CoC7","hasGun")?await c.setFlag("CoC7","hasGun",!1):await c.setFlag("CoC7","hasGun",!0));const newInit=await c.actor.rollInitiative(!!c.getFlag("CoC7","hasGun"));c.getFlag("CoC7","hasGun")?c.initiative<newInit&&game.combat.setInitiative(c.id,newInit):game.combat.setInitiative(c.id,newInit)}}async function rollInitiative(ids,{formula=null,updateTurn=!0,messageOptions={}}={}){const updates=[];for(const[,id]of ids.entries()){const combatant=this.combatants.get(id),roll=await combatant.actor.rollInitiative(!!combatant.getFlag("CoC7","hasGun"));updates.push({_id:id,initiative:roll})}return updates.length?(await this.updateEmbeddedDocuments("Combatant",updates),this):this}class CoCIDBatch extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","dialog","coc-id-editor"],template:"systems/CoC7/templates/apps/coc-id-batch.hbs",width:700,height:"auto",title:"CoC7.CoCIDFlag.title",closeOnSubmit:!1,submitOnClose:!1,submitOnChange:!1})}async getData(){const sheetData=super.getData();return sheetData.foundKeys=Object.keys(sheetData.object.foundKeys).reduce(((out,key)=>(out.push({name:key,key:sheetData.object.foundKeys[key]}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData.missingNames=Object.keys(sheetData.object.missingNames).reduce(((out,key)=>(out.push({key:sheetData.object.foundKeys[key]??"",name:key,custom:sheetData.object.missingNames[key],suffix:sheetData.object.missingNames[key].replace(this.object.suffixRegExp,"")}),out)),[]).sort(CoC7Utilities.sortByNameKey),sheetData}activateListeners(html){super.activateListeners(html),html.find(".existing").change(this.onSetName.bind(this)),html.find(".fa-wand-magic").click(this.onClickGuess.bind(this)),html.find("input").keyup(this.onKeyup.bind(this))}onSetName(event){const obj=$(event.currentTarget);this.object.missingNames[obj.closest("li").data("name")]=obj.val(),this.render(!0)}onClickGuess(event){const name=$(event.currentTarget).closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+CoC7Utilities.toKebabCase(name),this.render(!0)}onKeyup(event){const obj=$(event.currentTarget),name=obj.closest("li").data("name");this.object.missingNames[name]=this.object.idPrefix+obj.val()}async _updateObject(event,formData){event.submitter&&(this.object.typeName===game.i18n.localize("CoC7.Entities.Skill")&&(this.close(),await CoCIDBatch.processSkillKeys(this.object.updateList,this.object.missingNames)),this.object.resolve(!0))}static async processSkillKeys(updateList,missingNames){const items=[],actors={},scenes={};for(const update of updateList){update.cocidFlag.id=missingNames[update.name],void 0===update.cocidFlag.lang&&(update.cocidFlag.lang=game.i18n.lang),void 0===update.cocidFlag.priority&&(update.cocidFlag.priority=0),void 0===update.cocidFlag.eras&&(update.cocidFlag.eras={});const flags=flattenObject({flags:{CoC7:{cocidFlag:update.cocidFlag}}});if(void 0!==update.scene){if(void 0===scenes[update.scene]){const scene=game.scenes.get(update.scene);scenes[update.scene]=scene.toObject()}const tokenOffset=scenes[update.scene].tokens.findIndex((t=>t._id===update.token));if(tokenOffset>-1){const itemOffset=scenes[update.scene].tokens[tokenOffset].actorData.items.findIndex((i=>i._id===update.item));if(itemOffset>-1){const expandedFlags=expandObject(Object.entries(flags).reduce(((out,entry)=>(entry[0].match(/^flags\.CoC7\.cocidFlag/)&&(out[entry[0]]=entry[1]),out)),{}));scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset]=mergeObject(scenes[update.scene].tokens[tokenOffset].actorData.items[itemOffset],expandedFlags)}}}else if(void 0!==update.actor){void 0===actors[update.actor]&&(actors[update.actor]=[]);const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);actors[update.actor].push(item)}else{const item={_id:update.item};for(const key of Object.keys(flags))key.match(/^flags\.CoC7\.cocidFlag/)&&(item[key]=flags[key]);items.push(item)}}if(items.length&&await Item.updateDocuments(items),Object.keys(actors).length)for(const actorId of Object.keys(actors))await Item.updateDocuments(actors[actorId],{parent:game.actors.get(actorId)});if(Object.keys(scenes).length)for(const sceneId of Object.keys(scenes)){game.scenes.get(sceneId).update(scenes[sceneId])}return!0}static async populateSkillKeys(updateList,missingNames,foundKeys){for(const actor of game.actors.contents){const actorData=actor.toObject();if(actorData.items)for(const item of actorData.items){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({actor:actor._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}for(const item of game.items.contents){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}for(const scene of game.scenes){const sceneData=scene.toObject();for(const token of sceneData.tokens??[])if(token.actorId&&!token.actorLink){const actorData=duplicate(token.actorData);for(const item of actorData.items??[]){const itemData=item instanceof CONFIG.Item.documentClass?item.toObject():item;"skill"===itemData.type&&(itemData.flags.CoC7?.cocidFlag?.id?.match(/^i.skill/)?foundKeys[itemData.name]=itemData.flags.CoC7.cocidFlag.id:(void 0===missingNames[itemData.name]&&(missingNames[itemData.name]=""),updateList.push({scene:sceneData._id,token:token._id,item:itemData._id,name:itemData.name,cocidFlag:itemData.flags.CoC7?.cocidFlag??{}})))}}}if(Object.keys(missingNames).filter((key=>""===missingNames[key])).length>0){const items=await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\.skill\./,type:"i",era:!1});for(const item of items)foundKeys[item.name]=item.flags.CoC7.cocidFlag.id;for(const key in flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys??{}))foundKeys[game.i18n.format("CoC7.CoCIDFlag.keys."+key)]=key;for(const name in missingNames)void 0!==foundKeys[name]&&(missingNames[name]=foundKeys[name])}}static async create(type){const updateList=[],missingNames={},foundKeys={};let typeName="",idPrefix="",suffixRegExp=null;return"skill"===type&&(typeName=game.i18n.localize("CoC7.Entities.Skill"),idPrefix="i.skill.",suffixRegExp=/^i\.skill\./,await CoCIDBatch.populateSkillKeys(updateList,missingNames,foundKeys),0===Object.keys(missingNames).filter((key=>""===missingNames[key])).length?(await CoCIDBatch.processSkillKeys(updateList,missingNames),!0):new Promise((resolve=>{new CoCIDBatch({typeName,idPrefix,suffixRegExp,updateList,missingNames,foundKeys,resolve}).render(!0)})))}}class Updater{static async checkForUpdate(){let systemUpdateVersion=game.settings.get("CoC7","systemUpdateVersion");game.actors.size+game.scenes.size+game.items.size+game.journal.size+game.tables.size===0&&(systemUpdateVersion=game.system.version,await game.settings.set("CoC7","systemUpdateVersion",systemUpdateVersion));const runMigrate=isNewerVersion(game.system.version,systemUpdateVersion??"0");this.updatedModules=game.settings.get("CoC7","systemUpdatedModuleVersion")||{},this.currentModules={};for(const pack of game.packs)if(!["CoC7","world"].includes(pack.metadata.packageName)&&["Actor","Item","Scene"].includes(pack.metadata.type)&&!Object.prototype.hasOwnProperty.call(this.currentModules,pack.metadata.packageName)){const module=game.modules.get(pack.metadata.packageName);module&&(!runMigrate&&Object.prototype.hasOwnProperty.call(this.updatedModules,module.id)&&String(this.updatedModules[module.id])===String(module.version)||(this.currentModules[module.id]=module.version))}(runMigrate||Object.keys(this.currentModules).length>0)&&(game.user.isGM?new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format(0===Object.keys(this.currentModules).length?"CoC7.Migrate.Message":"CoC7.Migrate.WithModulesMessage",{version:game.system.version,modules:"<ul><li>"+Object.keys(this.currentModules).map((mod=>game.modules.get(mod).title)).join("</li><li>")+"</li></ul>"}),buttons:{update:{label:game.i18n.localize("CoC7.Migrate.ButtonUpdate"),callback:async()=>Updater.update()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0):new Dialog({title:game.i18n.localize("CoC7.Migrate.Title"),content:game.i18n.format("CoC7.Migrate.GMRequired",{version:game.system.version}),buttons:{OK:{label:game.i18n.localize("CoC7.Migrate.ButtonOkay")}}}).render(!0))}static async update(){await this.updateDocuments(),game.settings.get("CoC7","pulpRules")&&(game.settings.set("CoC7","pulpRuleDoubleMaxHealth",!0),game.settings.set("CoC7","pulpRuleDevelopmentRollLuck",!0),game.settings.set("CoC7","pulpRuleArchetype",!0),game.settings.set("CoC7","pulpRuleOrganization",!0),game.settings.set("CoC7","pulpRuleTalents",!0),game.settings.set("CoC7","pulpRuleFasterRecovery",!0),game.settings.set("CoC7","pulpRuleIgnoreMajorWounds",!0),game.settings.set("CoC7","pulpRuleIgnoreAgePenalties",!0)),await CoCIDBatch.create("skill");const settings=mergeObject(this.updatedModules||{},this.currentModules);game.settings.set("CoC7","systemUpdatedModuleVersion",settings),game.settings.set("CoC7","systemUpdateVersion",game.system.version),ui.notifications.info(game.i18n.format("CoC7.Migrate.Complete"),{permanent:!0})}static async updateDocuments(){for(const actor of game.actors.contents)try{const updateData=this.migrateActorData(actor.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Actor document ${actor.name}`),await actor.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorActor",{name:actor.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const item of game.items.contents)try{const updateData=Updater.migrateItemData(item.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Item document ${item.name}`),await item.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorItem",{name:item.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const table of game.tables.contents)try{const updateData=Updater.migrateTableData(table.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Table document ${table.name}`),await table.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorTable",{name:table.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const macro of game.macros.contents)try{const updateData=Updater.migrateMacroData(macro.toObject());foundry.utils.isEmpty(updateData)||(console.log(`Migrating Macro document ${macro.name}`),await macro.update(updateData,{enforceTypes:!1}))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorMacro",{name:macro.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const scene of game.scenes)try{const updateData=Updater.migrateSceneData(scene);foundry.utils.isEmpty(updateData)||(console.log(`Migrating Scene document ${scene.name}`),await scene.update(updateData,{enforceTypes:!1})),scene.tokens.forEach((t=>t._actor=null))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorScene",{name:scene.name,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}for(const pack of game.packs)"CoC7"!==pack.metadata.packageName&&["Actor","Item","Macro","RollTable","Scene"].includes(pack.metadata.type)&&await Updater.migrateCompendiumData(pack)}static migrateActorData(actor){const updateData={};if(Updater._migrateActorCharacterSanity(actor,updateData),Updater._migrateActorArtwork(actor,updateData),Updater._migrateActorKeeperNotes(actor,updateData),Updater._migrateActorNpcCreature(actor,updateData),Updater._migrateActorStatusEffectActive(actor,updateData),Updater._migrateActorSanLossReasons(actor,updateData),Updater._migrateActorMonetary(actor,updateData),actor.items){const items=actor.items.reduce(((arr,i)=>{const itemData=i instanceof CONFIG.Item.documentClass?i.toObject():i,itemUpdate=Updater.migrateItemData(itemData);return foundry.utils.isEmpty(itemUpdate)||(itemUpdate._id=itemData._id,arr.push(expandObject(itemUpdate))),arr}),[]);items.length>0&&(updateData.items=items)}return updateData}static async migrateCompendiumData(pack){const documentType=pack.metadata.type;if(!["Actor","Item","Macro","RollTable","Scene"].includes(documentType))return;const wasLocked=pack.locked;await pack.configure({locked:!1});try{await pack.migrate()}catch(err){console.log("pack migrate failed",pack,err)}const documents=await pack.getDocuments();for(const doc of documents){let updateData={};try{switch(documentType){case"Actor":updateData=Updater.migrateActorData(doc.toObject());break;case"Item":updateData=Updater.migrateItemData(doc.toObject());break;case"Macro":updateData=Updater.migrateMacroData(doc.toObject());break;case"RollTable":updateData=Updater.migrateTableData(doc.toObject());break;case"Scene":updateData=Updater.migrateSceneData(doc)}foundry.utils.isEmpty(updateData)||(console.log(`Migrated ${documentType} document ${doc.name} in Compendium ${pack.collection}`),await doc.update(updateData))}catch(err){console.log("Error details",err),err.message=game.i18n.format("CoC7.Migrate.ErrorDocumentPack",{name:doc.name,collection:pack.collection,message:err.message}),ui.notifications.error(err.message,{permanent:!0})}}await pack.configure({locked:wasLocked})}static migrateItemData(item){const updateData={};return Updater._migrateItemEmbeddedv10(item,updateData),Updater._migrateItemExperience(item,updateData),Updater._migrateItemArtwork(item,updateData),Updater._migrateItemBookAutomated(item,updateData),Updater._migrateItemKeeperNotes(item,updateData),Updater._migrateItemSpellAutomated(item,updateData),Updater._migrateItemKeeperNotesMerge(item,updateData),Updater._migrateItemEras(item,updateData),Updater._migrateItemv10(item,updateData),Updater._migrateItemBookUnits(item,updateData),updateData}static migrateMacroData(table){const updateData={};return Updater._migrateMacroArtwork(table,updateData),updateData}static migrateTableData(table){const updateData={};return Updater._migrateTableArtwork(table,updateData),updateData}static migrateSceneData(scene){const returns={tokens:[]};return void 0!==scene.tokens&&scene.tokens.length&&(returns.tokens=scene.tokens.map((token=>{const t=token.toObject(),updateData={};if(Updater._migrateTokenArtwork(t,updateData),Object.keys(updateData).length&&foundry.utils.mergeObject(t,updateData),!t.actorId||t.actorLink)t.actorData={};else if(game.actors.has(t.actorId)){if(!t.actorLink){const actorData=foundry.utils.duplicate(t.actorData);actorData.type=token.actor?.type;const update=Updater.migrateActorData(actorData);["items","effects"].forEach((embeddedName=>{if(!update[embeddedName]?.length)return;const updates=new Map(update[embeddedName].map((u=>[u._id,u])));t.actorData[embeddedName].forEach((original=>{const update=updates.get(original._id);update&&mergeObject(original,update)})),delete update[embeddedName]})),mergeObject(t.actorData,update)}}else t.actorId=null,t.actorData={};return t}))),returns}static _migrateItemKeeperNotes(item,updateData){return["archetype","chase","item","occupation","setup","skill","spell","status","talent","weapon"].includes(item.type)&&("string"==typeof item.system.description?updateData["system.description"]={value:item.system.description,keeper:""}:void 0===item.system.description||null===item.system.description?updateData["system.description"]={value:"",keeper:""}:void 0===item.system.description.keeper&&(updateData["system.description.keeper"]="")),updateData}static _migrateItemExperience(item,updateData){return"skill"===item.type&&void 0===item.system.adjustments?.experience&&(updateData["system.adjustments.experience"]=0),updateData}static _migrateItemArtwork(item,updateData){let image=String(item.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),"setup"===item.type)for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].img="systems/CoC7/assets/icons/"+image[1]))}else if("book"===item.type)for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.spells"]&&(updateData["system.spells"]=item.system.spells),updateData["system.spells"][k].img="systems/CoC7/assets/icons/"+image[1]));else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&(image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].img="systems/CoC7/assets/icons/"+image[1]));return updateData}static _migrateItemSpellAutomated(item,updateData){"spell"===item.type&&void 0!==item.system.cost&&(updateData["system.castingTime"]=item.system.castingTime||"",updateData["system.costs.hitPoints"]=item.system.cost.hp||0,updateData["system.costs.magicPoints"]=item.system.cost.mp||0,updateData["system.costs.sanity"]=item.system.cost.san||0,updateData["system.costs.power"]=item.system.cost.pow||0,updateData["system.costs.others"]="",updateData["system.-=cost"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null)}static _migrateItemBookAutomated(item,updateData){return"book"===item.type&&void 0!==item.system.description.unidentified&&(updateData["system.author"]=item.system.author||"",updateData["system.date"]=item.system.date||"",updateData["system.language"]=item.system.language||"",updateData["system.sanityLoss"]=item.system.sanLoss||0,updateData["system.mythosRating"]=Number(item.system.mythosRating)||0,updateData["system.content"]=item.system.description.unidentified,updateData["system.description.keeper"]=item.system.description.notes,updateData["system.difficultyLevel"]="regular",updateData["system.fullStudies"]=0,updateData["system.initialReading"]=!1,updateData["system.keeperNotes"]="",updateData["system.gains.cthulhuMythos.initial"]=Number(item.system.gain.cthulhuMythos.CMI)||0,updateData["system.gains.cthulhuMythos.final"]=Number(item.system.gain.cthulhuMythos.CMF)||0,updateData["system.gains.occult"]=Number(item.system.gain.occult)||0,updateData["system.gains.others"]=[],updateData["system.study"]={necessary:Number(item.system.weeksStudyTime)||0,progress:0,units:"CoC7.weeks"},updateData["system.-=sanLoss"]=null,updateData["system.-=weeksStudyTime"]=null,updateData["system.-=gain"]=null,updateData["system.description.-=unidentified"]=null,updateData["system.description.-=notes"]=null,updateData["system.gains.-=other"]=null,updateData["system.-=properties"]=null,updateData["system.-=flags"]=null),updateData}static _migrateItemBookUnits(item,updateData){"book"===item.type&&void 0!==item.system.study.necessary&&void 0===item.system.study.units&&(updateData["system.study.units"]="CoC7.weeks")}static _migrateItemKeeperNotesMerge(item,updateData){"spell"!==item.type&&"book"!==item.type||(void 0!==item.system.notes&&(void 0!==item.system.description.keeper?updateData["system.description.keeper"]=item.system.description.keeper+item.system.notes:updateData["system.description.keeper"]=item.system.notes,updateData["system.-=notes"]=null),void 0!==item.system.keeperNotes&&(void 0!==updateData["system.description.keeper"]?updateData["system.description.keeper"]=item.system.keeperNotes+updateData["system.description.keeper"]:updateData["system.description.keeper"]=item.system.keeperNotes,updateData["system.-=keeperNotes"]=null))}static _migrateItemEmbeddedv10(item,updateData){if("occupation"===item.type){let changed=!1;for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))"string"!=typeof v&&void 0===v.system&&(item.system.groups[o].skills[k].system=v.data,changed=!0);changed&&(updateData["system.groups"]=item.system.groups)}if(["setup"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.items))"string"!=typeof v&&void 0===v.system&&(item.system.items[k].system=v.data,changed=!0);changed&&(updateData["system.items"]=item.system.items)}if(["archetype","occupation"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.skills))"string"!=typeof v&&void 0===v.system&&(item.system.skills[k].system=v.data,changed=!0);changed&&(updateData["system.skills"]=item.system.skills)}if(["book"].includes(item.type)){let changed=!1;for(const[k,v]of Object.entries(item.system.spells))"string"!=typeof v&&void 0===v.system&&(item.system.spells[k].system=v.data,changed=!0);changed&&(updateData["system.spells"]=item.system.spells)}}static _migrateItemv10(item,updateData){if("skill"!==item.type||void 0!==item.system.skillName&&""!==item.system.skillName){if("setup"===item.type){for(const[k,v]of Object.entries(item.system.items))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.items"]&&(updateData["system.items"]=item.system.items),updateData["system.items"][k].name=v.name,"Uniki"===updateData["system.items"][k].name&&(updateData["system.items"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.items"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.items"][k].name=parts.name,updateData["system.items"][k].system.skillName=parts.skillName,updateData["system.items"][k].system.specialization=parts.specialization}}else if("occupation"===item.type){for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}for(const[o,g]of Object.entries(item.system.groups))for(const[k,v]of Object.entries(g.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.groups"]&&(updateData["system.groups"]=item.system.groups),updateData["system.groups"][o].skills[k].name=v.name,"Uniki"===updateData["system.groups"][o].skills[k].name&&(updateData["system.groups"][o].skills[k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.groups"][o].skills[k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.groups"][o].skills[k].name=parts.name,updateData["system.groups"][o].skills[k].system.skillName=parts.skillName,updateData["system.groups"][o].skills[k].system.specialization=parts.specialization}}else if("archetype"===item.type)for(const[k,v]of Object.entries(item.system.skills))if("string"!=typeof v&&"skill"===v.type&&(void 0===v.system.skillName||""===v.system.skillName)){void 0===updateData["system.skills"]&&(updateData["system.skills"]=item.system.skills),updateData["system.skills"][k].name=v.name,"Uniki"===updateData["system.skills"][k].name&&(updateData["system.skills"][k].name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData["system.skills"][k].name,"string"==typeof v.system.specialization?.group?v.system.specialization.group:v.system.specialization);updateData["system.skills"][k].name=parts.name,updateData["system.skills"][k].system.skillName=parts.skillName,updateData["system.skills"][k].system.specialization=parts.specialization}}else{updateData.name=item.name,"Uniki"===updateData.name&&(updateData.name="Unik");const parts=CoC7Item.getNamePartsSpec(updateData.name,"string"==typeof item.system.specialization?.group?item.system.specialization.group:item.system.specialization);updateData.name=parts.name,updateData["system.skillName"]=parts.skillName,updateData["system.specialization"]=parts.specialization}}static _migrateItemEras(item,updateData){if(void 0!==item.system.eras){let eras={};for(const[key,value]of Object.entries(item.system.eras))if(!0===value||"string"!=typeof value&&void 0!==value.selected)switch(key){case"1920":eras.standard=!0;break;case"mdrn":eras.modern=!0,eras.modernPulp=!0;break;case"pulp":eras.pulp=!0;break;case"ddts":eras.downDarkerTrails=!0,eras.downDarkerTrailsPulp=!0;break;case"drka":eras.darkAges=!0,eras.darkAgesPulp=!0;break;case"glit":eras.gasLight=!0;break;case"nvct":eras.invictus=!0}if("setup"===item.type){const key=Object.keys(eras)[0];eras=key?{[key]:!0}:{standard:!0}}const CoC7={cocidFlag:{id:"",lang:game.i18n.lang,priority:0,eras}};void 0===item.flags?.CoC7?(item.flags.CoC7=CoC7,updateData["flags.CoC7"]=CoC7):void 0===item.flags?.CoC7?.cocidFlag?(item.flags.CoC7.cocidFlag=CoC7.cocidFlag,updateData["flags.CoC7.cocidFlag"]=CoC7.cocidFlag):(item.flags.CoC7.cocidFlag.eras=CoC7.cocidFlag.eras,updateData["flags.CoC7.cocidFlag.eras"]=CoC7.cocidFlag.eras),updateData["system.-=eras"]=null}}static _migrateActorArtwork(actor,updateData){let image=String(actor.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);if(null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),void 0!==actor.prototypeToken&&void 0!==actor.prototypeToken.texture?.src&&(image=String(actor.prototypeToken.texture.src).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(updateData["prototypeToken.texture.src"]="systems/CoC7/assets/icons/"+image[1])),void 0!==actor.effects)for(const[k,v]of Object.entries(actor.effects))image=String(v.icon).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.effects&&(updateData.effects=actor.effects),updateData.effects[k].icon="systems/CoC7/assets/icons/"+image[1])}static _migrateActorKeeperNotes(actor,updateData){["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&void 0===actor.system.description&&(updateData["system.description"]={keeper:""})}static _migrateActorMonetary(actor,updateData){if("character"===actor.type&&void 0!==actor.system.credit?.multiplier){updateData["system.monetary.symbol"]=actor.system.credit?.monetarySymbol?actor.system.credit.monetarySymbol:"$",""===updateData["system.monetary.symbol"].toString().trim()&&(updateData["system.monetary.symbol"]="$");const multiplier=parseInt(actor.system.credit.multiplier)?parseInt(actor.system.credit.multiplier):1;if(updateData["system.monetary.spent"]=actor.system.credit.spent,updateData["system.monetary.assetsDetails"]=actor.system.credit.assetsDetails,updateData["system.monetary.spendingLevel"]=actor.system.credit.spendingLevel,updateData["system.monetary.cash"]=actor.system.credit.cash,updateData["system.monetary.assets"]=actor.system.credit.assets,updateData["system.monetary.values"]=duplicate(actor.system.monetary.values),1!==multiplier)for(const value of updateData["system.monetary.values"])value.cashValue=multiplier*value.cashValue,value.assetsValue=multiplier*value.assetsValue,value.spendingValue=multiplier*value.spendingValue;updateData["system.-=credit"]=null}}static _migrateActorSanLossReasons(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.encounteredCreatures){const groups={};for(const sanityLossEvent of actor.system.encounteredCreatures)sanityLossEvent.totalLoss>0&&(groups[sanityLossEvent.name]=Math.max(groups[sanityLossEvent.name]??0,sanityLossEvent.totalLoss));const sanityLossEvents=[];for(const name in groups)sanityLossEvents.push({type:name,totalLoss:groups[name],immunity:!1});updateData["system.sanityLossEvents"]=sanityLossEvents,updateData["system.-=encounteredCreatures"]=null}}static _migrateActorStatusEffectActive(actor,updateData){if(["character","npc","creature"].includes(actor.type)&&void 0!==actor.system&&(void 0!==actor.system.status||void 0===actor.system.conditions)){if(updateData["system.conditions.criticalWounds.value"]=!1,updateData["system.conditions.unconscious.value"]=!1,updateData["system.conditions.dying.value"]=!1,updateData["system.conditions.dead.value"]=!1,updateData["system.conditions.prone.value"]=!1,updateData["system.conditions.tempoInsane.value"]=!1,updateData["system.conditions.indefInsane.value"]=!1,void 0!==actor.system.status?.criticalWounds?.value&&actor.system.status?.criticalWounds.value&&(updateData["system.conditions.criticalWounds.value"]=!0),void 0!==actor.system.status?.unconscious?.value&&actor.system.status?.unconscious.value&&(updateData["system.conditions.unconscious.value"]=!0),void 0!==actor.system.status?.dying?.value&&actor.system.status?.dying.value&&(updateData["system.conditions.dying.value"]=!0),void 0!==actor.system.status?.dead?.value&&actor.system.status?.dead.value&&(updateData["system.conditions.dead.value"]=!0),void 0!==actor.system.status?.prone?.value&&actor.system.status?.prone.value&&(updateData["system.conditions.prone.value"]=!0),void 0!==actor.system.status?.tempoInsane?.value&&actor.system.status?.tempoInsane.value&&(updateData["system.conditions.tempoInsane.value"]=!0),void 0!==actor.system.status?.indefInsane?.value&&actor.system.status?.indefInsane.value&&(updateData["system.conditions.indefInsane.value"]=!0),void 0!==actor.effects){const effects=actor.effects;let changed=!1;for(let i=0,im=effects.length;i<im;i++){const effect=effects[i],match=effect.icon.match(/\/(hanging-spider|tentacles-skull|arm-sling|heart-beats|tombstone|knocked-out-stars|falling|skull|unconscious)\./);if(null!==match){let statusId="";switch(match[1]){case"hanging-spider":statusId="tempoInsane";break;case"tentacles-skull":statusId="indefInsane";break;case"arm-sling":statusId="criticalWounds";break;case"heart-beats":statusId="dying";break;case"tombstone":case"skull":statusId="dead";break;case"knocked-out-stars":case"unconscious":statusId="unconscious";break;case"falling":statusId="prone"}""!==statusId&&(updateData[`system.conditions.${statusId}.value`]||(updateData[`system.conditions.${statusId}.value`]=!0,changed=!0),effect.flags.core?.statusId!==statusId&&(effects[i]=mergeObject(effect,{flags:{core:{statusId}}}),changed=!0))}}changed&&(updateData.effects=effects)}updateData["system.-=status"]=null}return updateData}static _migrateActorNpcCreature(actor,updateData){return["npc"].includes(actor.type)&&void 0!==actor.system&&(void 0===actor.system.special&&(updateData["system.special"]={checkPassed:null,checkFailled:null}),void 0===actor.system.attacksPerRound&&(updateData["system.attacksPerRound"]=1)),updateData}static _migrateActorCharacterSanity(actor,updateData){if("character"===actor.type&&void 0!==actor.system?.attribs?.san){const oneFifthSanity=Math.ceil(actor.system.attribs.san.value/5);void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.attribs.san.oneFifthSanity&&null!==actor.system.attribs.san.oneFifthSanity||(updateData["system.attribs.san.oneFifthSanity"]=" / "+oneFifthSanity),void 0!==actor.system.attribs.san.dailyLoss&&null!==actor.system.attribs.san.dailyLoss||(updateData["system.attribs.san.dailyLoss"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.value&&null!==actor.system.indefiniteInsanityLevel.value||(updateData["system.indefiniteInsanityLevel.value"]=0),void 0!==actor.system.indefiniteInsanityLevel&&null!==actor.system.indefiniteInsanityLevel&&void 0!==actor.system.indefiniteInsanityLevel.max&&null!==actor.system.indefiniteInsanityLevel.max||(updateData["system.indefiniteInsanityLevel.max"]=oneFifthSanity),void 0!==actor.system.attribs.mp&&(void 0!==actor.system.attribs.mp.value&&null!==actor.system.attribs.mp.value||(updateData["system.attribs.mp.value"]=oneFifthSanity),void 0!==actor.system.attribs.mp.max&&null!==actor.system.attribs.mp.max||(updateData["system.attribs.mp.max"]=oneFifthSanity)),void 0!==actor.system.notes&&null!==actor.system.notes||(updateData["system.notes"]="")}return updateData}static _migrateMacroArtwork(table,updateData){const image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}static _migrateTableArtwork(table,updateData){let image=String(table.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]);for(const[k,v]of Object.entries(table.results))image=String(v.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/),null!==image&&(void 0===updateData.results&&(updateData.results=table.results),updateData.results[k].img="systems/CoC7/assets/icons/"+image[1]);return updateData}static _migrateTokenArtwork(token,updateData){const image=String(token.img).match(/systems\/CoC7\/artwork\/icons\/(.+)/);return null!==image&&(updateData.img="systems/CoC7/assets/icons/"+image[1]),updateData}}const nameCharacters="\\u3000\\u3400-\\u4DBF\\u4E00-\\u9FFF\\w\\(\\)\\-\\/&\"'"+CoC7Utilities.quoteRegExp("aeio"),keys={en:{description:"CoC7.English",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB)",halfdb:"(|half)",sectionCombats:"\n(?:combat|fighting attacks)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:skills(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:languages)[:\n]",sectionSpells:"\n(?:spells)[:\n]",handgun:"(?<type> Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Grenade|Dynamite)",example:"Example Character, age 27\nSTR 75 CON 60 SIZ 80 DEX 70 APP 60 INT 80\nPOW 50 EDU 85 SAN 55 HP 14 DB: 1D4\nBuild: 1 Move: 7 MP: 10 Luck: 40 Armor: 1\nAttacks per round: 3 SAN loss: 1d4/1d8\nCombat\nBite 50% (25/10), damage 1D6\nBrawl 30% (15/6), damage 1D3\nDerringer 40% (20/8), damage 1D8+1\nDodge 50% (25/10)\nSkills\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLanguages: English 80%, Eklo 5%.\nSpells: Summon NPC, Dispel NPC."},de:{description:"CoC7.German",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",diceShort:"w|d",fulldb:"(Schadensbonus|Sb)",halfdb:"(|1/2 Schadensbonus|Sb/2)",sectionCombats:"\n(?:Kampf|Angriff:|ANGRIFFE)[:\n]",newCombatHeader:"\nKampf\n",sectionSkills:"\n(?:Fertigkeiten(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Sprachen)[:\n]",sectionSpells:"\n(?:Zauber)[:\n]",handgun:"(?<type> Gun|Revolver|Pistole|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Gewehr|Schrotflinte|Carabiner|Karabiner|Gauge |Lee-Enfield|Elefanten)",smb:"(?<type>Submachine Gun|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Molotov|Granate|Dynamit)",example:"Vorname Nachname\nAlter: 29\nBeruf: Ein Beruf\nST 50\nMA 60\nKO 60\nGE 60\nGR 55\nER 65\nIN 80\nBI 85\nTrefferpunkte: 11\nGeistige Stabilitt: 60\nSchadensbonus: 0\nStatur: 0\nMagiepunkte: 12\nBewegungsweite: 8\n\nKampf\nAngriffe: 1\nHandgemenge 30% (15/6), Schaden 1D3\nMesser 30% (15/6), Schaden 1D4\nAusweichen 30% (15/6)\n\nFertigkeiten: Anthropologie 70% (35/14), Archologie 30% (15/6), Bibliotheksnutzung 50% (25/10), Erste Hilfe 50% (25/10), Finanzkraft 40% (20/8), Geschichte 60% (30/12), Klettern 50% (25/10)\n\nSprachen: Englisch 85% (42/17); Deutsch 45% (22/9), Latein 45% (22/9)"},pl:{description:"CoC7.Polish",dbNone:"brak",armorNone:"brak",attacksPerRoundNone:"brak",sanLossNone:"brak",diceShort:"k|d",fulldb:"(Modyfikator Obrae|MO)",halfdb:"(|1/2 MO|MO/2)",sectionCombats:"\n(?:Walka|Ataki)[:\n]",newCombatHeader:"\nWalka\n",sectionSkills:"\n(?:Umiejtnoci(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Jzyki)[:\n]",sectionSpells:"\n(?:Zaklcia)[:\n]",handgun:"(?<type> Pistolet|Rewolwer|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Karabin|Strzelba|Wiatrwka|Garand|Gauge |Lee-Enfield|Strzelba na sonie)",smb:"(?<type>Pistolet maszynowy|Thompson)",machineGun:"(?<type>Browning|Vickers)",launched:"(?<type>Mootowa|Granat|Laska dynamitu|Dynamit)",example:"Przykadowa posta, 27 lat\nBibliotekarz\nS 75 KON 60 BC 80 ZR 70 WYG 60 INT 80\nMOC 50 WYK 85 P 55 PW 14 MO: 1D4\nKrzepa: 1 Ruch: 7 PM: 10 Szczcie: 40 Pancerz: 1\nAtaki w rundzie: 3 Utrata Poczytalnoci: 1K4/1K8\nWalka\nUgryzienie 50% (25/10), obraenia 1K6\nWalka 30% (15/6), obraenia 1K3\nDerringer 40% (20/8), obraenia 1K8+1\nUnik 50% (25/10)\nUmiejtnoci\nTresura Zwierzt 55%, Urok Osobisty 30%, Pierwsza Pomoc 25%, Ukrywanie 20%,\nNasuchiwanie 50%, Medycyna 45%, Przekonywanie 25%, Psychologia 75%,\nNauka (Astronomia) 90%, Nauka (Botanika) 35%, Nauka (Zoologia) 10%,\nSpostrzegawczo 35%, Ukrywanie 10%\nJzyki: Angielski 80%, Eklo 5%.\nZaklcia: Przyzwanie NPC, Odesanie NPC."},fr:{description:"CoC7.French",dbNone:"Acune",armorNone:"(?:Acune|aucune)",attacksPerRoundNone:"Acune",sanLossNone:"Acune",fulldb:"(BD|Bonus aux dommages|Impact|Imp)",halfdb:"(|1/2 Imp|Imp/2)",sectionCombats:"\n(?:Combat|Armes|Attaques)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:Comptences(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Langues?)\\s*[:\n]",sectionSpells:"\n(?:Sortilges\\s*|Sorts)[:\n]",handgun:"(?<type>Revolver|Pistolet|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Carabine|Lee-Enfield|Fusil)",smb:"(?<type>SMG|Thompson)",machineGun:"(?<type>Browning|Vickers|Mitrailleuse)",launched:"(?<type>Boomerang de guerre|Javeline|Pierre|Shuriken|Bton de dynamite|Cocktail Molotov|Grenade  main|Molotov|Grenade|Dynamite)",example:"Example Character, 27 ans\nFOR 75 CON 60 TAI 80 DEX 70 APP 60 INT 80\nPOU 50 DU 85 SAN 55 PV 14 BD: 1D4\nCarrure: 1 Mvt: 7 PM: 10 Chance: 40 Armure: 1\nAttaques par round 3 Perte de SAN: 1d4/1d8\nAttaques\nBite 50% (25/10), dommage 1D6\nBrawl 30% (15/6), dommage 1D3\nDerringer 40% (20/8), dommage 1D8+1\nEsquiver 50% (25/10)\nComptences\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nLangue: English 80%, Eklo 5%.\nSortilges: Summon NPC, Dispel NPC."},es:{description:"CoC7.Spanish",dbNone:"ninguna",armorNone:"ninguna",attacksPerRoundNone:"ninguno",sanLossNone:"no",fulldb:"(BD|bd|bonificacin de dao)",halfdb:"(|medio dao|mitad|dao a la mitad)",sectionCombats:"\n(?:Combate|Armas)[:\n]",newCombatHeader:"\nCombate\n",sectionSkills:"\n(?:Habilidades(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Idiomas|Lenguajes|Lenguas)[:\n]",sectionSpells:"\n(?:Conjuros|Hechizos)[:\n]",handgun:"(?<type>Revolver|Pistola|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>Rifle|Carabina|Lee-Enfield|Caza Elefantes|Fusil|Escopeta|Galga|Recortada)",smb:"(?<type>Subfusil|Thompson)",machineGun:"(?<type>Browning|Vickers|Ametralladora)",launched:"(?<type>Molotov|Granada|Dinamita)",example:"Example Character, 27 aos\nFUE 75 CON 60 TAM 80 DES 70 APA 60 INT 80\nPOD 50 EDU 85 COR 55 PV 14 BD: 1D4\nCorpulencia: 1 Movimiento: 7 PM: 10 Suerte: 40 Armadura: 1\nNmero de Ataques 3 Prdida de cordura: 1d4/1d8\nCombate\nBite 50% (25/10), dao 1D6\nBrawl 30% (15/6), dao 1D3\nDerringer 40% (20/8), dao 1D8+1\nEsquivar 50% (25/10)\nHabilidades\nAnimal Handling 55%, Charm 30%, First Aid 25%, Disguise 20%,\nListen 50%, Medicine 45%, Persuade 25%, Psychology 75%,\nScience (Astronomy) 90%, Science (Botany) 35%, Science (Zoology) 10%,\nSpot Hidden 35%, Stealth 10%\nIdiomas: English 80%, Eklo 5%.\nConjuros: Summon NPC, Dispel NPC."},"zh-TW":{description:"CoC7.TraditionalChinese",dbNone:"none",armorNone:"none",attacksPerRoundNone:"none",sanLossNone:"none",fulldb:"(Damage Bonus|DB|)",halfdb:"(|half)",sectionCombats:"\n(?:combat|fighting attacks|||)[:\n]",newCombatHeader:"\nCombat\n",sectionSkills:"\n(?:(?:Skills|)(?:\\s*\\([^\\)]+\\))?)[:\n]",sectionLangauges:"\n(?:Languages|)[:\n]",sectionSpells:"\n(?:spells||)[:\n]",handgun:"(?<type> |\\.22|\\.25()|\\.327\\.65mm|\\.327\\.65mm|\\.357 Magnum|\\.389mm|\\.38|M9|17|9mm|P08|\\.41|\\.44|\\.45|\\.45||Gun|Revolver|Pistol|Handgun|Derringer|Beretta|Luger|Desert Eagle| \\.38)",rifle:"(?<type>||||Rifle|Shotgun|Carbine|Gauge |Lee-Enfield|Elephant)",smb:"(?<type>Submachine Gun|Thompson|)",machineGun:"(?<type>Browning|Vickers|)",launched:"(?<type>Molotov|Grenade|Dynamite||)",example:",  27\n 75  60  80  70  60  80\n 50  85 SAN 55 HP 14 DB: 1D4\n: 1 Move: 7 MP: 10 : 40 : 1\n: 3 : 1d4/1d8\n\n 50% (25/10),  1D6\n 30% (15/6),  1D3\n 40% (20/8),  1D8+1\n 50% (25/10)\n\n 55%,  30%,  25%,  20%,\n 50%,  45%,  25%,  75%,\n () 90%,  () 35%, \n 35%,  10%\n:  80%,  5%.\n:  NPC,  NPC."}},translations={en:{age:"(?<![a-z])age(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.en.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.en.dbNone+")[,\\s\n]*",build:"(?<![a-z])Build(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor(\\s*:)?\\s+(?<armor>"+keys.en.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks)(\\s*:)?\\s+(?<attacksPerRound>"+keys.en.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss)(\\s*:)?\\s+(?<sanLoss>"+keys.en.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*damage)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.en.fulldb+"|"+keys.en.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Fighting|Firearms|Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.en.sectionCombats+"|"+keys.en.sectionSkills+"|"+keys.en.sectionLangauges+"|"+keys.en.sectionSpells+")"},de:{age:"(?<![a-z])Alter(\\s*:)?\\s+(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Beruf(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])ST(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KO(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])GR(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])IN(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MA(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])GE(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])ER(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])BI(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:gS|STA|Geistige Stabilitt)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:TP|Trefferpunkte)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magiepunkte)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.de.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|W\\d+)?|"+keys.de.dbNone+")[,\\s\n]*",build:"(?<![a-z])(?:Statur|Stat.)(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Panzerung(\\s*:)?\\s+(?<armor>"+keys.de.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:BW|Bewegungsweite)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Glck(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Angriffe pro Runde|Angriffe|Pro Runde)(\\s*:)?\\s+(?<attacksPerRound>"+keys.de.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Stabilittsverlust)(\\s*:)?\\s+(?<sanLoss>"+keys.de.sanLossNone+"|\\d[DW]?[+\\d]*\\/\\d[DW]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*Schaden)?\\s+(?<damage>(:?(:?\\d+w|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.de.fulldb+"|"+keys.de.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d|w)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Ausweichen)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,;]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Angriffe|Handgemenge|Nahkampf|Faustfeuerwaffe|Beien)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.de.sectionCombats+"|"+keys.de.sectionSkills+"|"+keys.de.sectionLangauges+"|"+keys.de.sectionSpells+")"},pl:{age:"(?<age>\\d+)\\s+(?:lata|lat|rok)[,\\s]*",occupation:"[,\\s]*Zawd(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])S(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])KON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])BC(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])MOC(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])ZR(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])WYG(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])WYK(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:P|Poczytalno)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PW|Punkty Wytrzymaoci)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Punkty Magii)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.pl.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D|K\\d+)?|"+keys.pl.dbNone+")[,\\s\n]*",build:"(?<![a-z])Krzepa(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Pancerz(\\s*:)?\\s+(?<armor>"+keys.pl.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Ruch(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Szczcie(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Ataki w rundzie|# Ataki)(\\s*:)?\\s+(?<attacksPerRound>"+keys.pl.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Utrata Poczytalnoci|utrata P)(\\s*:)?\\s+(?<sanLoss>"+keys.pl.sanLossNone+"|\\d[DK]?[+\\d]*\\/\\d[DK]?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*obraenia)?\\s+(?<damage>(:?(:?\\d+k|d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.pl.fulldb+"|"+keys.pl.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Unik)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Walka|Bro Palna|Bijatyka|Ugryzienie)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.pl.sectionCombats+"|"+keys.pl.sectionSkills+"|"+keys.pl.sectionLangauges+"|"+keys.pl.sectionSpells+")"},fr:{age:"(?<age>\\d+)\\s*ans(?![a-z])[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FOR(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAI(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POU(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])DU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<!([a-z]|de\\s))(?:SAN|Sant Mentale)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Points de vie)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Points de magie)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.fr.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.fr.dbNone+")[,\\s\n]*",build:"(?<![a-z])Carrure(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])(?:Armure|Protection)(\\s*:)?\\s+(?<armor>"+keys.fr.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])(?:Mvt|Mouvement|Dplacement)(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Chance(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attaques par round)(\\s*:)?\\s+(?<attacksPerRound>"+keys.fr.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Perte de Sant mentale|Perte de SAN)(\\s*:)?\\s+(?<sanLoss>"+keys.fr.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:dommage|dgts))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.fr.fulldb+"|"+keys.fr.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquiver?)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Au contact| distance|Combat rapproch|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.fr.sectionCombats+"|"+keys.fr.sectionSkills+"|"+keys.fr.sectionLangauges+"|"+keys.fr.sectionSpells+")"},es:{age:"(?<age>\\d+)\\s*a[]os(?![a-z])[,\\s]*",occupation:"[,\\s]*Ocupacin(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])FUE(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])TAM(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POD(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DES(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APA(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:COR|Cordura)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:PV|Puntos de vida|P\\. ?V\\.)(\\s*:)?\\s+(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:PM|Puntos Mgicos|Puntos de Magia)(\\s*:)?\\s+(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys.es.fulldb+")(\\s*:)?\\s+(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys.es.dbNone+")[,\\s\n]*",build:"(?<![a-z])Corpulencia(\\s*:)?\\s+(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armadura(\\s*:)?\\s+(?<armor>"+keys.es.armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Movimiento(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Suerte(\\s*:)?\\s+(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Nmero de Ataques)(\\s*:)?\\s+(?<attacksPerRound>"+keys.es.attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Prdida de cordura|Prdida de COR)(\\s*:)?\\s+(?<sanLoss>"+keys.es.sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*dao)?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys.es.fulldb+"|"+keys.es.halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Esquivar)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(Combatir|Armas de fuego|Pelea|Mordisco)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys.es.sectionCombats+"|"+keys.es.sectionSkills+"|"+keys.es.sectionLangauges+"|"+keys.es.sectionSpells+")"},"zh-TW":{age:"(?<![a-z])age|(\\s*:)?\\s*(?<age>\\d+)[,\\s]*",occupation:"[,\\s]*Occupation(\\s*:)?\\s+(?<occupation>.+)[,\\s\n]*",str:"(?<![a-z])STR|(\\s*:)?\\s*(?<str>\\d+|-)[,\\s\n]*",con:"(?<![a-z])CON|(\\s*:)?\\s*(?<con>\\d+|-)[,\\s\n]*",siz:"(?<![a-z])SIZ|(\\s*:)?\\s*(?<siz>\\d+|-)[,\\s\n]*",int:"(?<![a-z])INT|(\\s*:)?\\s*(?<int>\\d+|-)[,\\s\n]*",pow:"(?<![a-z])POW|(\\s*:)?\\s*(?<pow>\\d+|-)[,\\s\n]*",dex:"(?<![a-z])DEX|(\\s*:)?\\s*(?<dex>\\d+|-)[,\\s\n]*",app:"(?<![a-z])APP|(\\s*:)?\\s*(?<app>\\d+|-)[,\\s\n]*",edu:"(?<![a-z])EDU|(\\s*:)?\\s*(?<edu>\\d+|-)[,\\s\n]*",san:"(?<![a-z])(?:SAN|Sanity|)(\\s*:)?\\s*(?<san>\\d+|-)[,\\s\n]*",hp:"(?<![a-z])(?:HP|Hit points|)(\\s*:)?\\s*(?<hp>\\d+|-)[,\\s\n]*",mp:"(?<![a-z])(?:MP|Magic points)(\\s*:)?\\s*(?<mp>\\d+|-)[,\\s\n]*",db:"(?<![a-z])(?:"+keys["zh-TW"].fulldb+")(\\s*:)?\\s*(?<db>[+-]?\\d+(?:d\\d+|D\\d+)?|"+keys["zh-TW"].dbNone+")[,\\s\n]*",build:"(?<![a-z])Build|(\\s*:)?\\s*(?<build>[+-]?\\d+)[,\\s\n]*",armor:"(?<![a-z])Armor|(\\s*:)?\\s*(?<armor>"+keys["zh-TW"].armorNone+"|\\d+)[,\\s\n]*",mov:"(?<![a-z])Move(\\s*:)?\\s*(?<mov>\\d+)[,\\s\n]*",lck:"(?<![a-z])Luck|(\\s*:)?\\s*(?<lck>\\d+|-)[,\\s\n]*",attacksPerRound:"(?<![a-z])(?:Attacks per round|# Attacks||# )(\\s*:)?\\s*(?<attacksPerRound>"+keys["zh-TW"].attacksPerRoundNone+"|\\d+(?!d))[,\\s\n]*",sanLoss:"(?<![a-z])(?:Sanity loss|SAN loss||SAN|SAN|SAN)(\\s*:)?\\s*(?<sanLoss>"+keys["zh-TW"].sanLossNone+"|\\dD?[+\\d]*\\/\\dD?[+\\d]*)[,\\s\n]*",weapon:"(^|\\n)(?<name>[.\\t "+nameCharacters+"]+)(\\**,?\\s+|\\*)(?:\\(|(?<percentage>\\d+)%,?(?:\\s*\\(\\d+\\/\\d+\\)\\s*,?)?)?(\\s*(?:damage|))?\\s+(?<damage>(:?(:?\\d+d)?\\d+(\\s*/\\s*|\\s*[+-]\\s*(?:"+keys["zh-TW"].fulldb+"|"+keys["zh-TW"].halfdb+")\\s*|\\s*[+-]\\s*(:?\\d+d)?\\d+)*)+)\\)?",weaponDodge:"(?<name>Dodge||)(\\s*:)?\\s+\\(?(?<percentage>\\d+)\\)?\\s*%?(?:\\s*\\(\\d+\\/\\d+\\))?",skill:"^(?<name>[:\\*.\\s"+nameCharacters+"]+(?<!The player has|but they regenerate))\\s+\\(?(?<percentage>\\d+)[^d]%?\\)?(\\s*\\(\\d+/\\d+\\))?[\\.,]?\\s*",guessStartCombat:"(^|(?<!,)\n)(||Brawl|Bite)",name:"^(?<name>[\\.\\s"+nameCharacters+"]+)[,\\s\n]+",sections:"("+keys["zh-TW"].sectionCombats+"|"+keys["zh-TW"].sectionSkills+"|"+keys["zh-TW"].sectionLangauges+"|"+keys["zh-TW"].sectionSpells+")"}};class CoC7ActorImporterRegExp{static checkLanguage(lang=null){return lang||(lang=game.i18n.lang),void 0===translations[lang]&&(lang="en"),lang}static getExampleText(lang){let example=keys.en.example;return void 0!==keys[lang]&&(example=keys[lang].example),example}static getTranslations(){const output={};for(const key in keys)output[key]=keys[key].description;return output}static getKeys(lang){return keys[lang]||keys.en}static getRegularExpressions(lang){return translations[lang]||translations.en}}class CoC7ActorImporter{constructor(){this.parsed={},this.itemLocations=""}static get asNumber(){return"n"}static get asString(){return"s"}getRegEx(regex,modifiers="iu"){return"RegExp"===regex.constructor?.name?regex:new RegExp(regex,modifiers)}cleanString(s){return s.replace(/(\n|\r)/g," ").replace(/^\s*/,"").replace(/\s*\.?\s*\.?$/,"")}translateRoll(s){if(void 0===s)return s;if(void 0!==this.keys.diceShort){const regEx=new RegExp("(?<n1>\\d+)"+this.keys.diceShort+"(?<n2>\\d+)","iug");return s.replace(regEx,"$<n1>D$<n2>")}return s}toHTML(s){return 0===s.trim().length||0===(s=s.trim().split("\n").map((text=>text.trim().replace(/^[,.\s]+$/,""))).filter((text=>text)).join("</p><p>")).length?"":"<p>"+s+"</p>"}check(regExKey,{removeFromText=!0,saveKeys=!0,type=CoC7ActorImporter.asString,text=!1,requiredGroup=!1}={}){let output=!1,regExp=!1;if(void 0!==this.regEx[regExKey]?regExp=this.getRegEx(this.regEx[regExKey]):void 0!==this.keys[regExKey]&&(regExp=this.getRegEx(this.keys[regExKey])),!1!==regExp){!1===text&&(text=this.text);const check=regExp.exec(text);let value=null;if(null!==check&&(!1===requiredGroup||void 0!==(check.groups||{})[requiredGroup])){if(output=check.groups||{},removeFromText&&(this.text=this.text.replace(check[0].trim(),"\n").trim()),saveKeys)for(const key of Object.keys(check.groups))switch(type){case CoC7ActorImporter.asString:this.parsed[key]=String(check.groups[key]).replace("\n"," ");break;case CoC7ActorImporter.asNumber:value=Number(check.groups[key]),isNaN(value)||(this.parsed[key]=Number(check.groups[key]))}output["-source"]=check[0],output["-index"]=check.index}}return output}processCombat(text){if(0===text.trim().length)return;let weapon,dodge,newline;CONFIG.debug.CoC7Importer&&console.log("combat text",text);let lastPercent=!1,maxLoops=40;do{if(maxLoops--,text=text.trim(),dodge=this.check("weaponDodge",{saveKeys:!1,text}))text=text.replace(dodge["-source"],"\n"),void 0===this.parsed.skills&&(this.parsed.skills=[]),this.parsed.skills.push({name:this.cleanString(dodge.name),value:Number(dodge.percentage),push:!1});else if(weapon=this.check("weapon",{saveKeys:!1,text,requiredGroup:!1===lastPercent&&"percentage"})){text=text.replace(weapon["-source"],"\n");const name=this.cleanString(weapon.name||"");let damage=this.translateRoll(this.cleanString(weapon.damage||""));const isRanged=!!(this.check("handgun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("rifle",{text:name,removeFromText:!1,saveKeys:!1})||this.check("smb",{text:name,removeFromText:!1,saveKeys:!1})||this.check("machineGun",{text:name,removeFromText:!1,saveKeys:!1})||this.check("launched",{text:name,removeFromText:!1,saveKeys:!1}));let found;lastPercent=null===weapon.percentage||void 0===weapon.percentage||Number(weapon.percentage);let ahdb=!1,addb=!1;do{found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.halfdb+")\\s*("+this.keys.fulldb+")?[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found?(ahdb=!0,damage=damage.replace(found[0],"")):(found=this.getRegEx("\\s*[+-]?\\s*("+this.keys.fulldb+")\\s*[-+]?\\s*("+this.parsed.db.replace(/^[-+]/,"")+")?").exec(damage),found&&(addb=!0,damage=damage.replace(found[0],"")))}while(found);const damages=damage.split("/"),isShotgun=3===damages.length,data={name,type:"weapon",system:{skill:{id:lastPercent},properties:{},range:{normal:{value:isShotgun?10:0,damage:damages[0]},long:{value:isShotgun?20:0,damage:isShotgun?damages[1]:""},extreme:{value:isShotgun?50:0,damage:isShotgun?damages[2]:""}}}};data.system.properties.shotgun=isShotgun,data.system.properties.rngd=isRanged||isShotgun,data.system.properties.melee=!data.system.properties.rngd,data.system.properties.ahdb=ahdb,data.system.properties.addb=addb,void 0===this.parsed.attacks&&(this.parsed.attacks=[]),this.parsed.attacks.push(data)}else(newline=text.match(/^(.+)\n/))?text=text.replace(newline[0],"\n"):(newline=text.match(/^[^\n]+$/))&&(text="")}while(maxLoops>0&&(weapon||dodge||text));0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedWeaponText")),console.debug("Unexpected weapons:",text))}processSkills(text,key="skills"){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);let skill;breaks.length>1&&(text=breaks[0]);let maxLoops=40;do{maxLoops--,text=text.trim(),skill=this.check("skill",{saveKeys:!1,text}),skill&&(text=text.replace(skill["-source"],"\n"),void 0===this.parsed[key]&&(this.parsed[key]=[]),this.parsed[key].push({name:this.cleanString(skill.name),value:Number(skill.percentage)}))}while(maxLoops>0&&skill);0===maxLoops&&(ui.notifications.warn(game.i18n.localize("CoC7.ErrorUnexpectedSkillsText")),console.debug("Unexpected skills:",text))}processSpells(text){if(0===text.trim().length)return;const breaks=text.split(/\.\r?\n/);breaks.length>1&&(text=breaks[0]);const spellsArr=text.replace(/([\n\r]+)/g," ").split(/(?<!\([^)]+),/);this.text=this.text.replace(text.trim(),"\n");for(const spell of spellsArr)void 0===this.parsed.spells&&(this.parsed.spells=[]),this.parsed.spells.push(this.cleanString(spell))}async parseCharacter(text){this.text=String(text).trim().replace(/\u2013|\u2014|\u2212/g,"-").replace(/\u2019/g,"'").replace(/[\udbc0-\udbfe][\udc00-\udfff]/g,"");let header,min=this.text.length,check=this.check("str",{type:CoC7ActorImporter.asNumber})["-index"];if(isNaN(check)||(min=Math.min(min,check)),check=this.check("con",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("siz",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("int",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("pow",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("dex",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("app",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("edu",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("san",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("hp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),check=this.check("mp",{type:CoC7ActorImporter.asNumber})["-index"],isNaN(check)||(min=Math.min(min,check)),min>0){if(header=this.text.substr(0,min),check=this.check("name",{text:header}),!1===check?this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter"):header=header.replace(check["-source"],"\n"),check=this.check("age",{text:header}),!1!==check&&(header=header.replace(check["-source"],"\n")),!this.check("occupation",{text:header})&&""!==header.trim()){let occupation=header;header.indexOf(".")>-1&&(occupation=header.substr(0,header.indexOf(".")+1)),this.parsed.occupation=occupation.replace(/([\n\r]+)/g," ").trim().replace(/,$/,""),this.text=this.text.replace(occupation.trim(),"\n")}}else this.parsed.name=game.i18n.localize("CoC7.ImportedUnnamedCharacter");if(void 0!==this.parsed.occupation&&void 0===this.parsed.age){const occupationAge=this.parsed.occupation.match(/^(?<age>\d+),(?<occupation>.+)$/);occupationAge&&(this.parsed.age=occupationAge.groups.age,this.parsed.occupation=occupationAge.groups.occupation.trim())}this.check("db")&&!this.check("dbNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.db})||(this.parsed.db="0"),this.parsed.db=this.translateRoll(this.parsed.db),this.check("build"),this.check("armor")&&!this.check("armorNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.armor})||(this.parsed.armor="0"),this.check("mov",{type:CoC7ActorImporter.asNumber}),this.check("lck",{type:CoC7ActorImporter.asNumber}),this.check("sanLoss"),this.parsed.sanLoss=this.translateRoll(this.parsed.sanLoss),this.check("attacksPerRound")&&this.check("attacksPerRoundNone",{removeFromText:!1,saveKeys:!1,text:this.parsed.attacksPerRound})&&(this.parsed.attacksPerRound="0"),this.text="\n"+this.text;let sections=this.getRegEx("("+this.keys.sectionCombats+")","i");null===this.text.match(sections)&&(sections=this.check("guessStartCombat",{saveKeys:!1,removeFromText:!1}),sections&&(this.text=[this.text.slice(0,sections["-index"]),this.keys.newCombatHeader,this.text.slice(sections["-index"])].join("")));const regExpSections=this.getRegEx(this.regEx.sections,"i");if(sections=this.text.split(regExpSections),null!==sections)for(let i=0,im=sections.length;i<im;i++)null!==sections[i].match(this.getRegEx("("+this.keys.sectionCombats+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processCombat(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSkills+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1]),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionLangauges+")","i"))&&void 0!==sections[i+1]?(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSkills(sections[i+1],"languages"),i++):null!==sections[i].match(this.getRegEx("("+this.keys.sectionSpells+")","i"))&&void 0!==sections[i+1]&&(this.text=("\n"+this.text+"\n").replace(sections[i],"\n").trim(),this.processSpells(sections[i+1]),i++);return this.parsed.gmnotes=this.toHTML(this.text),this.parsed}disableAttribAuto(key,attribValue,check,updateData){const value=Math.max(0,Number(attribValue));return value!==Number(check)&&(updateData[`system.attribs.${key}.auto`]=!1,updateData[`system.attribs.${key}.value`]=value,"build"===key?updateData[`system.attribs.${key}.current`]=value:updateData[`system.attribs.${key}.max`]=value),updateData}async createEntity(characterData,entityType){const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();"npc"!==entityType&&(entityType="creature");const actorData={name:characterData.name,type:entityType,folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);await npc.createEmbeddedDocuments("Item",characterData.items,{renderSheet:!1});const updateData={};let value=0;void 0!==characterData.actor.attribs.hp?.value&&this.disableAttribAuto("hp",characterData.actor.attribs.hp.value,npc.hpMax,updateData),void 0!==characterData.actor.attribs.mp?.value&&this.disableAttribAuto("mp",characterData.actor.attribs.mp.value,npc.mpMax,updateData),void 0!==characterData.actor.attribs.mov?.value&&this.disableAttribAuto("mov",characterData.actor.attribs.mov.value,npc.mov,updateData),void 0!==characterData.actor.attribs.build?.value&&this.disableAttribAuto("build",characterData.actor.attribs.build.value,npc.build,updateData),void 0!==characterData.actor.attribs.db?.value&&(value=String(characterData.actor.attribs.db.value).replace(/^\+\s*/,""),value!==String(npc.db)&&(updateData["system.attribs.db.auto"]=!1,updateData["system.attribs.db.value"]=value)),Object.keys(updateData).length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateData:",updateData),await npc.update(updateData));const updateItemData=[];let lastWeaponSkill=null;for(const pair of this.weaponSkills){!1!==pair[0]&&(lastWeaponSkill=npc.items.filter((i=>i.name===pair[0].name&&"skill"===i.type&&Number(i.system.value)===Number(pair[0].system.value))));const weapon=npc.items.filter((i=>i.name===pair[1].name&&"weapon"===i.type&&i.system.range.normal.damage===pair[1].system.range.normal.damage));lastWeaponSkill[0]&&weapon[0]&&updateItemData.push({_id:weapon[0].id,"system.skill.main.id":lastWeaponSkill[0].id,"system.skill.main.name":lastWeaponSkill[0].name})}return updateItemData.length>0&&(CONFIG.debug.CoC7Importer&&console.debug("updateItemData:",updateItemData),await npc.updateEmbeddedDocuments("Item",updateItemData)),npc}actorData(pc){const data={characteristics:{},attribs:{},infos:{},special:{},description:{keeper:""},flags:{locked:!1,displayFormula:!1}};for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==pc[key]&&(data.characteristics[key]={value:Number(pc[key])});for(const key of["san","mov","build","armor","lck","hp","mp"])void 0!==pc[key]&&(data.attribs[key]={value:Number(pc[key])});void 0!==pc.db&&(data.attribs.db={value:pc.db});for(const key of["age","occupation"])void 0!==pc[key]&&(data.infos[key]=pc[key]);if(void 0!==pc.sanLoss){const[passed,failed]=pc.sanLoss.split("/");data.special.sanLoss={checkPassed:passed,checkFailled:failed}}return void 0!==pc.attacksPerRound&&(data.special.attacksPerRound=Number(pc.attacksPerRound)),data.description.keeper=pc.gmnotes,CONFIG.debug.CoC7Importer&&console.debug("actorData:",data),data}async itemsData(pc){const items=[];if(this.weaponSkills=[],void 0!==pc.attacks)for(const attack of pc.attacks){let skill=!1;!0!==attack.system?.skill?.id&&(skill=await this.weaponSkill(attack),items.push(skill)),attack.system.skill.id=null,items.push(attack),this.weaponSkills.push([skill,attack])}if(void 0!==pc.skills)for(const skill of pc.skills){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,void 0!==skill.push&&(cloned.system.properties.push=skill.push),items.push(duplicate(cloned))}else{const options={};void 0!==skill.push&&(options.push=skill.push),items.push(CoCActor.emptySkill(skill.name,skill.value,options))}}if(void 0!==pc.languages)for(const skill of pc.languages){const existing=await CoC7Utilities.guessItem("skill",skill.name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();cloned.system.base=skill.value,items.push(duplicate(cloned))}else items.push(CoCActor.emptySkill(skill.name,skill.value,{img:CoC7Item.iconLanguage,specialization:"Language"}))}if(void 0!==pc.spells)for(const name of pc.spells){const existing=await CoC7Utilities.guessItem("spell",name,{source:this.itemLocations});if(void 0!==existing){const cloned=existing.toObject();items.push(duplicate(cloned))}else items.push(CoCActor.emptySpell(name))}return items}async weaponSkill(weapon){let skill=null;if(this.getRegEx("handgun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Handgun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Handgun skill: ${skill}`)):this.getRegEx("rifle").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Rifle/Shotgun",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Rifle",{combat:!0,source:this.itemLocations}),skill||(skill=await CoC7Utilities.guessItem("skill","Shotgun",{combat:!0,source:this.itemLocations}))),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Rifle skill: ${skill}`)):this.getRegEx("smb").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Submachine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Submachine Gun skill: ${skill}`)):this.getRegEx("machineGun").exec(weapon.name)?(skill=await CoC7Utilities.guessItem("skill","Machine Gun",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Machine Gun skill: ${skill}`)):this.getRegEx("launched").exec(weapon.name)&&(skill=await CoC7Utilities.guessItem("skill","Launch",{combat:!0,source:this.itemLocations}),CONFIG.debug.CoC7Importer&&console.debug(`${weapon.name} uses Launch skill: ${skill}`)),null!=skill){return skill.clone({system:{value:weapon.system?.skill?.id}})}const firearms=weapon.system?.properties?.rngd,parts=CoC7Item.getNamePartsSpec(weapon.name,game.i18n.localize(firearms?"CoC7.FirearmSpecializationName":"CoC7.FightingSpecializationName")),newSkill={type:"skill",name:parts.name,system:{skillName:parts.skillName,specialization:parts.specialization,properties:{special:!0,fighting:!firearms,firearm:firearms,combat:!0},base:weapon.system?.skill?.id,value:weapon.system?.skill?.id}};return CONFIG.debug.CoC7Importer&&console.debug(`Weapon skill not found for ${weapon.name}, creating a new one`,newSkill),newSkill}needsConversion(npc){let needsConversionResult=!0;for(const key of["str","con","siz","dex","app","int","pow","edu"])void 0!==npc[key]&&npc[key]>30&&(needsConversionResult=!1);return CONFIG.debug.CoC7Importer&&console.debug("needsConversion:",needsConversionResult),needsConversionResult}async createActor(inputs){CONFIG.debug.CoC7Importer&&console.debug("createActor:",inputs);const lang=CoC7ActorImporterRegExp.checkLanguage(inputs.lang);this.keys=CoC7ActorImporterRegExp.getKeys(lang),this.regEx=CoC7ActorImporterRegExp.getRegularExpressions(lang),this.itemLocations=inputs.source,CONFIG.debug.CoC7Importer&&console.debug("Regular Expressions:",lang,this.keys,this.regEx);let character=await this.parseCharacter(inputs.text);CONFIG.debug.CoC7Importer&&console.debug("parseCharacter:",character),("coc-guess"===inputs.convertFrom6E&&this.needsConversion(character)||"coc-convert"===inputs.convertFrom6E)&&(character=await this.convert7E(character));const characterData={name:character.name,actor:this.actorData(character),items:await this.itemsData(character)};if(void 0!==inputs.testMode&&!0===inputs.testMode)return characterData;return await this.createEntity(characterData,inputs.entity)}async convert7E(creature){CONFIG.debug.CoC7Importer&&console.debug("Converting npc",creature);for(const key of["str","con","siz","dex","app","int","pow"])void 0!==creature[key]&&(creature[key]*=5);return void 0!==creature.edu&&(creature.edu<=18?creature.edu*=5:creature.edu<=26?creature.edu=creature.edu+90-18:creature.edu=99),void 0!==creature.db&&("-1d4"===creature.db?creature.db=-1:"-1d6"===creature.db&&(creature.db=-2)),CONFIG.debug.CoC7Importer&&console.debug("convert7E: ",creature),creature}}class CoC7DirectoryPicker extends FilePicker{get title(){return game.i18n.localize("CoC7.PickDirectory")}_onSubmit(event){event.preventDefault();const path=event.target.target.value,activeSource=this.activeSource,bucket=event.target.bucket?event.target.bucket.value:null;this.field.value=CoC7DirectoryPicker.format({activeSource,bucket,path}),this.close()}static DefaultDirectory(val){return null===val?"":String(val)}static format(value){return null!==value.bucket?`[${value.activeSource}:${value.bucket}] ${value.path}`:`[${value.activeSource}] ${value.path}`}static parse(raw){const str=raw??"",matches=str.match(/^\[([^:]+)(:(.+))?\]\s*(.+)?$/u);return matches?{activeSource:matches[1],bucket:matches[3]??"",current:matches[4]}:{activeSource:"data",bucket:null,current:str}}static processHtml(html){$(html).find('input[data-dtype="DefaultDirectory"]').each(((i,el)=>{const input=$(el);if(input.prop("readonly",!0),!input.next().length){const picker=new CoC7DirectoryPicker({field:input[0],...CoC7DirectoryPicker.parse(input.val())}),pickerButton=$('<button type="button" class="file-picker" title="'+game.i18n.localize("CoC7.PickDirectory")+'"><i class="fas fa-file-import fa-fw"></i></button>');CoC7DirectoryPicker.createDefaultDirectory(),pickerButton.on("click",(()=>{picker.render(!0)})),input.parent().append(pickerButton)}}))}activateListeners(html){super.activateListeners(html),$(html).find("ol.files-list").remove(),$(html).find("footer div").remove(),$(html).find("footer button").text(game.i18n.localize("CoC7.PickDirectory"))}static async createDefaultDirectory(){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));try{return await CoC7DirectoryPicker.createDirectory(parsed.activeSource,parsed.current,{bucket:parsed.bucket}),!0}catch(e){if(!e.message.startsWith("EEXIST"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1}}static async uploadToDefaultDirectory(file,filename){const parsed=CoC7DirectoryPicker.parse(game.settings.get("CoC7","dholeUploadDirectory"));return(await FilePicker.upload(parsed.activeSource,parsed.current,new File([file],filename,{type:"image/png"}),{bucket:parsed.bucket})).path?parsed.current+"/"+filename:(ui.notifications.error(game.i18n.localize("CoC7.FileUploadError")),!1)}}class CoC7DholeHouseActorImporter{static getBackstory(backstoryJSON){const sections=[["description","Description"],["traits","Traits"],["ideology","Ideology"],["injurues","Injuries","injuries"],["people","People"],["phobias","Phobias"],["locations","Locations"],["tomes","Tomes"],["possessions","Possessions"],["encounters","Encounters"]],backstory={block:[],sections:[]};for(const section of sections)null!==backstoryJSON[section[0]]&&(void 0!==section[2]&&""!==section[2]||(section[2]=section[0]),backstory.block.push(`<h3>${section[1]}</h3>\n<div class="${section[2]}">\n${backstoryJSON[section[0]]}\n</div>`),backstory.sections.push({title:section[1],value:backstoryJSON[section[0]]}));return backstory.block="<h2>Backstory</h2>\n"+backstory.block.join("\n",backstory.block),backstory}static async convertDholeHouseCharacterData(dholeHouseData,options){CONFIG.debug.CoC7Importer&&console.log("Source:",dholeHouseData),dholeHouseData=dholeHouseData.Investigator;const backstories=CoC7DholeHouseActorImporter.getBackstory(dholeHouseData.Backstory);return{name:dholeHouseData.PersonalDetails.Name,actor:{characteristics:{str:{value:parseInt(dholeHouseData.Characteristics.STR,10)},con:{value:parseInt(dholeHouseData.Characteristics.CON,10)},siz:{value:parseInt(dholeHouseData.Characteristics.SIZ,10)},dex:{value:parseInt(dholeHouseData.Characteristics.DEX,10)},app:{value:parseInt(dholeHouseData.Characteristics.APP,10)},int:{value:parseInt(dholeHouseData.Characteristics.INT,10)},pow:{value:parseInt(dholeHouseData.Characteristics.POW,10)},edu:{value:parseInt(dholeHouseData.Characteristics.EDU,10)}},attribs:{san:{value:parseInt(dholeHouseData.Characteristics.Sanity,10),max:parseInt(dholeHouseData.Characteristics.SanityMax,10),dailyLimit:Math.floor(dholeHouseData.Characteristics.Sanity/5)},hp:{value:parseInt(dholeHouseData.Characteristics.HitPts,10),max:parseInt(dholeHouseData.Characteristics.HitPtsMax,10)},mp:{value:parseInt(dholeHouseData.Characteristics.MagicPts,10),max:parseInt(dholeHouseData.Characteristics.MagicPtsMax,10)},lck:{value:parseInt(dholeHouseData.Characteristics.Luck,10)},mov:{value:parseInt(dholeHouseData.Characteristics.Move,10),max:parseInt(dholeHouseData.Characteristics.Move,10)},db:{value:dholeHouseData.Characteristics.DamageBonus},build:{value:parseInt(dholeHouseData.Characteristics.Build,10)}},infos:{occupation:dholeHouseData.PersonalDetails.Occupation,age:dholeHouseData.PersonalDetails.Age,sex:dholeHouseData.PersonalDetails.Gender,residence:dholeHouseData.PersonalDetails.Residence,birthplace:dholeHouseData.PersonalDetails.Birthplace},backstory:backstories.block,biography:backstories.sections,description:{keeper:game.i18n.localize("CoC7.DholeHouseActorImporterSource")}},skills:await CoC7DholeHouseActorImporter.extractSkills(dholeHouseData.Skills.Skill??[],options),possesions:await CoC7DholeHouseActorImporter.extractPossessions(dholeHouseData.Possessions?.item??[],options)}}static makeSkillName(name,specialization){return"None"===specialization&&(specialization="Any"),"Language (Other)"===name||"Language (Own)"===name?name="Language":"Operate Heavy Machine"===name?name="Operate Heavy Machinery":"Throw"===name&&""===specialization&&(name="Fighting",specialization="Throw"),{skillName:""===specialization?name:specialization,specialization:""===specialization?"":name,name:name+(""===specialization?"":" ("+specialization+")")}}static async extractSkills(dholeHouseskills,options){const skills=[];for(const skill of dholeHouseskills){if("None"===skill.subskill&&"1"===skill.value&&"0"===skill.half&&"0"===skill.fifth)continue;const parts=CoC7DholeHouseActorImporter.makeSkillName(skill.name,skill.subskill??""),existing=await CoC7Utilities.guessItem("skill",parts.name,{source:options.source,fallbackAny:!0});let cloned=null;void 0!==existing?(cloned=duplicate(existing.toObject()),cloned.name=parts.name,cloned.system.skillName=parts.skillName,cloned.system.specialization=parts.specialization):(cloned=CoCActor.emptySkill(parts.skillName,parseInt(skill.value??0,10),{specialization:""!==parts.specialization&&parts.specialization}),cloned.system.properties=cloned.system.properties??{},"Fighting"===parts.specialization?(cloned.system.properties.fighting=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Firearms"===parts.specialization?(cloned.system.properties.firearm=!0,cloned.system.properties.combat=!0,cloned.system.properties.push=!1):"Dodge"===parts.skillName&&(cloned.system.properties.push=!1)),"Any"===cloned.system.skillName&&(cloned.name=cloned.name.replace(" (Any)"," (None)"),cloned.system.skillName="None"),cloned.system.base=parseInt(skill.value??0,10),cloned.system.value=parseInt(skill.value??0,10),cloned.system.flags=cloned.system.flags??{},cloned.system.flags.occupation=!0===skill.occupation||"true"===skill.occupation,skills.push(cloned)}return skills}static findWeaponSkillId(skillName,character){const skills=character.getEmbeddedCollection("Item"),checkName=skillName.replace(/^\((.+)\)$/,"$1");return skills.find((i=>i.system?.skillName===checkName||i.system?.skillName?.indexOf(checkName)>-1))}static async extractPossessions(dholehousePossessions,options){const items=[];Array.isArray(dholehousePossessions)||null==dholehousePossessions||(dholehousePossessions=[dholehousePossessions]);for(const item of dholehousePossessions){const existing=await CoC7Utilities.guessItem("item",item.description,{source:options.source});let cloned=null;cloned=void 0!==existing?duplicate(existing.toObject()):{name:item.description,type:"item"},items.push(cloned)}return items}static async extractWeapons(dholehouseWeapons,character,options){const weapons=[];Array.isArray(dholehouseWeapons)||(dholehouseWeapons=[dholehouseWeapons]);for(const weapon of dholehouseWeapons){const skill=CoC7DholeHouseActorImporter.findWeaponSkillId(weapon.skillname,character),damage=weapon.damage.replace(/\+DB/i,""),addb=damage!==weapon.damage,existing=await CoC7Utilities.guessItem("weapon",weapon.name,{source:options.source});let cloned=null;void 0!==existing?(cloned=duplicate(existing.toObject()),cloned.system.skill.main.name=skill?.name??"",cloned.system.skill.main.id=skill?.id??"",cloned.system.range=cloned.system.range??{},cloned.system.range.normal=cloned.system.range.normal??{},cloned.system.range.normal.damage=damage,cloned.system.ammo=weapon.ammo,cloned.system.malfunction=weapon.malf,cloned.system.properties=cloned.system.properties??{},cloned.system.properties.melee=skill?.system.properties?.fighting??!1,cloned.system.properties.rngd=skill?.system.properties?.firearm??!1,cloned.system.properties.addb=addb):cloned={name:weapon.name,type:"weapon",system:{skill:{main:{name:skill?.name??"",id:skill?.id??""}},range:{normal:{damage}},ammo:weapon.ammo,malfunction:weapon.malf,properties:{melee:skill?.system.properties?.fighting??!1,rngd:skill?.system.properties?.firearm??!1,addb}}},weapons.push(cloned)}return weapons}static async savePortrait(base64Portrait,fileName){const base64Response=await fetch("data:image/png;base64,"+base64Portrait),imageBlob=await base64Response.blob();return CoC7DirectoryPicker.uploadToDefaultDirectory(imageBlob,fileName)}static async createNPCFromDholeHouse(dholeHouseCharacterData,options){if(!game.user?.can("FILES_UPLOAD"))return ui.notifications.error(game.i18n.localize("CoC7.ActorImporterUploadError")),!1;const characterData=await CoC7DholeHouseActorImporter.convertDholeHouseCharacterData(dholeHouseCharacterData,options);CONFIG.debug.CoC7Importer&&console.log("Character Data:",characterData);const importedCharactersFolder=await CoC7Utilities.createImportCharactersFolderIfNotExists();if(!CoC7DirectoryPicker.createDefaultDirectory())return!1;const actorData={name:characterData.name,type:"character",folder:importedCharactersFolder.id,data:characterData.actor},npc=await Actor.create(actorData);if(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait?.length>10){const fileName="avatar-"+npc.id+".png",portrait=await CoC7DholeHouseActorImporter.savePortrait(dholeHouseCharacterData.Investigator.PersonalDetails.Portrait,fileName);!1!==portrait&&npc.update({img:portrait})}CONFIG.debug.CoC7Importer&&console.log("Items: ",characterData.items),await npc.createEmbeddedDocuments("Item",characterData.skills,{renderSheet:!1}),await npc.createEmbeddedDocuments("Item",characterData.possesions,{renderSheet:!1});const weapons=await CoC7DholeHouseActorImporter.extractWeapons(dholeHouseCharacterData.Investigator.Weapons?.weapon??[],npc,options);return CONFIG.debug.CoC7Importer&&console.log("Weapons: ",weapons),await npc.createEmbeddedDocuments("Item",weapons,{renderSheet:!1}),npc}}class CoC7ActorImporterDialog extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","dialog","actor-importer"],title:game.i18n.localize("CoC7.ActorImporter"),template:"systems/CoC7/templates/apps/actor-importer.html",closeOnSubmit:!1,width:600,height:"auto"})}async getData(){const data=await super.getData();return data.importType=data.object.importType,data.convert6E=data.object.convert6E,data.source=data.object.source,data.characterData=data.object.characterData,data.canUpload=game.user?.can("FILES_UPLOAD"),["npc","creature"].includes(data.importType)&&(data.languages=CoC7ActorImporterRegExp.getTranslations(),data.language=CoC7ActorImporterRegExp.checkLanguage(data.object.language),data.placeholder=CoC7ActorImporterRegExp.getExampleText(data.language)),data}activateListeners(html){super.activateListeners(html),html.find("#dholehouse-character-preview").hide(),html.find("#coc-entity-type,#coc-entity-lang").change(this._onChangeSubmit.bind(this)),html.find("#dholehouse-json-file-picker").change(this._onJSONFileSelected.bind(this)),html.find("#coc-pasted-character-data").on("keyup",(function(e){const charactersTooExtended=$(this).val().match(/[\udbc0-\udbfe][\udc00-\udfff]/),prompt=$("#coc-prompt");prompt.data("extended")&&charactersTooExtended?prompt.html(game.i18n.localize("CoC7.TextFieldInvalidCharacters")).addClass("error"):prompt.html(prompt.data("text")).removeClass("error")})).trigger("keyup"),html.find(".submit-button").click(this._onClickSubmit.bind(this)),html.find("form").submit((e=>{e.preventDefault()}))}static getInputs(form){const inputs={};return inputs.entity=form.find("#coc-entity-type").val().trim(),CONFIG.debug.CoC7Importer&&console.debug("entity type:",inputs.entity),form.find("#coc-convert-6E").length>0&&(inputs.convertFrom6E=form.find("#coc-convert-6E").val().trim()),form.find("#coc-entity-lang").length>0&&(inputs.lang=CoC7ActorImporterRegExp.checkLanguage(form.find("#coc-entity-lang").val().trim())),form.find("#source").length>0&&(inputs.source=form.find("#source").val().trim()),form.find("#coc-pasted-character-data").length>0&&(inputs.text=form.find("#coc-pasted-character-data").val().trim()),CONFIG.debug.CoC7Importer&&console.debug("received text","##"+inputs.text+"##"),inputs}_onJSONFileSelected(event){const jsonFileInput=document.getElementById("dholehouse-json-file-picker"),portraitImage=document.getElementById("dholehouse-character-portrait"),characterName=document.getElementById("dholehouse-character-name"),preview=document.getElementById("dholehouse-character-preview"),file=jsonFileInput.files[0],dialog=this,fileReader=new FileReader;fileReader.onload=function(e){try{dialog.characterJSON=JSON.parse(fileReader.result)}catch(e){return $("#coc-prompt").html(game.i18n.localize("CoC7.TextFieldInvalidJSON")).addClass("error"),void event.preventDefault()}const personalDetails=dialog.characterJSON?.Investigator?.PersonalDetails;personalDetails?(characterName.textContent=personalDetails.Name,portraitImage.src="data:image/png;base64,"+personalDetails.Portrait,preview.style.display="block",$(".dialog.actor-importer").height("auto")):ui.notifications.error(game.i18n.localize("CoC7.DholeHouseInvalidActor"))},fileReader.readAsText(file)}_onChangeSubmit(event){this._onSubmit(event)}async _onClickSubmit(event){const id=event.currentTarget.dataset.button;if("no"===id)this.close();else if("getExampleNow"===id){const content=CoC7ActorImporterRegExp.getExampleText(this.object.language);CoC7Utilities.copyToClipboard(content).then((()=>ui.notifications.info(game.i18n.localize("CoC7.Copied"))))}else if("import"===id){const app=$(event.currentTarget).closest("div.dialog.actor-importer");app.hide();const form=$(event.currentTarget).closest("form"),inputs=CoC7ActorImporterDialog.getInputs(form);if("dholehouse"===inputs.entity&&this.characterJSON){const character=await CoC7DholeHouseActorImporter.createNPCFromDholeHouse(this.characterJSON,{source:inputs.source});!1!==character?(CONFIG.debug.CoC7Importer&&console.debug("character:",character),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:game.i18n.localize("CoC7.Entities.Character"),actorName:character.name})),await character.sheet.render(!0),this.close()):app.show()}else inputs.text&&""!==inputs.text?(CoC7ActorImporterDialog.importActor(inputs),this.close()):app.show()}}async _updateObject(event,formData){this.object.importType=formData["coc-entity-type"],this.object.characterData=formData["coc-pasted-character-data"]?.trim(),void 0!==formData["coc-convert-6E"]&&(this.object.convert6E=formData["coc-convert-6E"]),void 0!==formData["coc-entity-lang"]&&(this.object.language=formData["coc-entity-lang"]),void 0!==formData.source&&(this.object.source=formData.source),this.render(!0)}static async importActor(inputs){"."!==inputs.text[inputs.text.length]&&(inputs.text+=".");const actor=new CoC7ActorImporter,createdActor=await actor.createActor(inputs);CONFIG.debug.CoC7Importer&&console.debug("createdActor:",createdActor),ui.notifications.info(game.i18n.format("CoC7.ActorImported",{actorType:createdActor.type?.toUpperCase(),actorName:createdActor.name})),await createdActor.sheet.render(!0)}static async create(options={}){options.importType=options.importType??"npc",options.language=options.language??CoC7ActorImporterRegExp.checkLanguage(null),options.convert6E=options.language??"coc-guess",options.source=options.source??"iwms",options.characterData=options.characterData??"",new CoC7ActorImporterDialog(options).render(!0)}}Hooks.once("ready",(()=>{game.modules.get("CoC7-Importer-Tests")?.active&&(window.CoC7ActorImporter=CoC7ActorImporter)}));class DropCoCID extends Dialog{static processForm(response,element,resolve){element.find("input").is(":checked")&&game.settings.set("CoC7","dropCoCID",response?"Y":"N"),resolve(response)}static processItem(response,item){return response&&item.flags?.CoC7?.cocidFlag?.id?item.flags.CoC7.cocidFlag.id:duplicate(item)}static async create(){switch(game.settings.get("CoC7","dropCoCID")){case"":return new Promise((resolve=>{new DropCoCID({title:game.i18n.format("CoC7.Settings.DropCoCID.Name"),content:"<p>"+game.i18n.format("CoC7.Settings.DropCoCID.Dialog")+'</p><p><input type="checkbox" id="rememberthis" style="vertical-align: sub;"><label for="rememberthis">'+game.i18n.format("CoC7.Settings.DropCoCID.Remember")+"</label></p>",classes:["coc7","app","dialog"],buttons:{yes:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("Yes"),callback:element=>{DropCoCID.processForm(!0,element,resolve)}},no:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("No"),callback:element=>{DropCoCID.processForm(!1,element,resolve)}}}}).render(!0)}));case"Y":return!0;case"N":return!1}}}class CoC7OccupationSheet extends ItemSheet{activateListeners(html){if(super.activateListeners(html),!this.options.editable)return;html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))),html.find(".group-item-delete").click(this._onGroupItemDelete.bind(this)),html.find(".group-control").click(this._onGroupControl.bind(this));new DragDrop({dropSelector:".droppable",callbacks:{drop:this._onDrop.bind(this)}}).bind(html[0])}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const optionalSkill=event?.currentTarget?.classList?.contains("optional-skills"),ol=event?.currentTarget?.closest("ol"),index=ol?.dataset?.group,dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[],groups=this.item.system.groups?duplicate(this.item.system.groups):[];for(const item of dataList)if(item&&item.system&&[type].includes(item.type))if(optionalSkill){if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;if(groups[index].skills.find((el=>el.name===item.name)))continue}0===useCoCID&&(useCoCID=await DropCoCID.create()),groups[index].skills=groups[index].skills.concat([DropCoCID.processItem(useCoCID,item)])}else{if(!CoC7Item.isAnySpec(item)){if(collection.find((el=>el.name===item.name)))continue;for(let i=0;i<groups.length;i++){const index=groups[i].skills.findIndex((el=>el.name===item.name));-1!==index&&groups[i].skills.splice(index,1)}}0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))}await this.item.update({"system.groups":groups}),await this.item.update({[`system.${collectionName}`]:collection})}async _onGroupControl(event){event.preventDefault();const a=event.currentTarget;if(a.classList.contains("add-group")){await this._onSubmit(event);const groups=this.item.system.groups;await this.item.update({"system.groups":groups.concat([{options:0,skills:[]}])})}if(a.classList.contains("remove-group")){await this._onSubmit(event);const groups=duplicate(this.item.system.groups),ol=a.closest(".item-list.group");groups.splice(Number(ol.dataset.group),1),await this.item.update({"system.groups":groups})}}_onItemSummary(event,collectionName="items"){event.preventDefault();const obj=$(event.currentTarget),li=obj.parents(".item"),group=obj.closest(".group");let item;if(item=group.length?this.item.system.groups[group.data("group")][collectionName].find((s=>s._id===li.data("item-id"))):this.item.system[collectionName].find((s=>s._id===li.data("item-id"))),!item)return;const chatData=item.system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}async _onGroupItemDelete(event){const item=$(event.currentTarget).closest(".item"),group=Number(item.closest(".item-list.group").data("group")),groups=duplicate(this.item.system.groups);if(void 0!==groups[group]){const itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=groups[group].skills.findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));itemIndex>-1&&(groups[group].skills.splice(itemIndex,1),await this.item.update({"system.groups":groups}))}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/occupation.html",width:525,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey);for(let index=0,len=sheetData.data.system.groups.length;index<len;index++)sheetData.data.system.groups[index].skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.groups[index].skills}),sheetData.data.system.groups[index].isEmpty=0===sheetData.data.system.groups[index].skills.length,sheetData.data.system.groups[index].skills.sort(CoC7Utilities.sortByNameKey);sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(sheetData.data.system.occupationSkillPoints),sheetData.itemProperties=[];for(const[key,value]of Object.entries(sheetData.data.system.type))value&&sheetData.itemProperties.push(COC7.occupationProperties[key]?COC7.occupationProperties[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}static occupationPointsString(occupationSkillPoints){const optionnal=[],mandatory=[];for(const[key,carac]of Object.entries(occupationSkillPoints))if(carac.multiplier){const caracName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);carac.selected&&carac.optional&&optionnal.push(`${caracName}x${carac.multiplier}`),carac.selected&&!carac.optional&&mandatory.push(`${caracName}x${carac.multiplier}`)}let occupationPointsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return mandatory.length&&(occupationPointsString+=mandatory.join(" + ")),optionnal.length&&mandatory.length&&(occupationPointsString+=` + (${optionnal.join(orString)})`),optionnal.length&&!mandatory.length&&(occupationPointsString+=optionnal.join(orString)),occupationPointsString}_updateObject(event,formData){const system=expandObject(formData)?.system;if(system.groups){formData["system.groups"]=Object.values(system.groups||[]);for(let index=0;index<this.item.system.groups.length;index++)formData[`system.groups.${index}.skills`]=duplicate(this.item.system.groups[index].skills)}super._updateObject(event,formData)}}class CoC7InvestigatorWizard extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{id:"investigator-wizard-application",classes:["coc7","dialog","investigator-wizard"],title:game.i18n.localize("CoC7.InvestigatorWizard.Title"),template:"systems/CoC7/templates/apps/investigator-wizard.hbs",width:520,height:600,closeOnSubmit:!1,scrollY:[".scrollsection"],dragDrop:[{dragSelector:".draggable",dropSelector:null}]})}get pageList(){return{PAGE_NONE:-1,PAGE_INTRODUCTION:0,PAGE_CONFIGURATION:1,PAGE_SETUPS:2,PAGE_ARCHETYPES:3,PAGE_CHARACTISTICS:4,PAGE_ATTRIBUTES:5,PAGE_VIEW_ATTRIBUTES:6,PAGE_OCCUPATIONS:7,PAGE_OCCUPATION_SKILLS:8,PAGE_ARCHETYPE_SKILLS:9,PAGE_POINTS_SKILLS:10,PAGE_INVESTIGATOR:11,PAGE_BACKSTORY:12,PAGE_CREATE:13}}get characteristicsMethods(){return{METHOD_DEFAULT:1,METHOD_ROLL:1,METHOD_POINTS:2,METHOD_VALUES:3}}get cocidCreditRating(){return"i.skill.credit-rating"}get cocidLanguageOwn(){return"i.skill.language-own"}get pageOrder(){const pages=this.pageList;let pageOrder=[pages.PAGE_INTRODUCTION];return game.user.isGM&&pageOrder.push(pages.PAGE_CONFIGURATION),""===this.object.defaultSetup&&pageOrder.push(pages.PAGE_SETUPS),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPES),pageOrder.push(pages.PAGE_CHARACTISTICS),game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")||pageOrder.push(pages.PAGE_ATTRIBUTES),pageOrder=pageOrder.concat([pages.PAGE_VIEW_ATTRIBUTES,pages.PAGE_OCCUPATIONS,pages.PAGE_OCCUPATION_SKILLS]),game.settings.get("CoC7","pulpRuleArchetype")&&pageOrder.push(pages.PAGE_ARCHETYPE_SKILLS),pageOrder=pageOrder.concat([pages.PAGE_POINTS_SKILLS,pages.PAGE_INVESTIGATOR,pages.PAGE_BACKSTORY,pages.PAGE_CREATE]),pageOrder}static async loadCacheItemByCoCID(){return new Promise(((resolve,reject)=>{game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^i\./,type:"i",showLoading:!0}).then((items=>{const list={};for(const item of items)list[item.flags.CoC7.cocidFlag.id]=item;resolve(list)}))}))}async filterCacheItemByCoCID(regexp){return Object.entries(await this.object.cacheCoCID).filter((entry=>entry[0].match(regexp))).map((entry=>entry[1]))}async getCacheItemByCoCID(id){return(await this.object.cacheCoCID)[id]??!1}async expandItemArray(itemList){const items=itemList.filter((it=>"string"!=typeof it)),cocids=itemList.filter((it=>"string"==typeof it));if(cocids.length){const source=await this.object.cacheCoCID,missing=[];for(const cocid of cocids)void 0!==source[cocid]?items.push(source[cocid]):missing.push(cocid);if(missing.length){const era=game.i18n.format(COC7.eras[this.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:this.object.defaultEra});ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:missing.join(", "),lang:game.i18n.lang,era}))}}return items}getAgeAdjustments(){for(const key in this.object.setupModifiers)this.object.setupModifiers[key]=0;if(!game.settings.get("CoC7","pulpRuleIgnoreAgePenalties")){if(this.object.age>=40){const key=Math.floor(this.object.age/10);this.object.requiresAgeAdjustments={edu:{total:key-2>4?4:key-2,rolled:!1},deduct:{total:key>1?5*Math.pow(2,key-4):0,from:["str","con","dex"],values:{}},reduce:{total:5*(key-3),from:"app"}}}else this.object.age>=20?this.object.requiresAgeAdjustments={edu:{total:1,rolled:!1}}:this.object.age>=15&&(this.object.requiresAgeAdjustments={deduct:{total:5,from:["str","siz"],values:{}},reduce:{total:5,from:"edu"},luck:!0});void 0!==this.object.requiresAgeAdjustments.reduce&&(this.object.setupModifiers[this.object.requiresAgeAdjustments.reduce.from]=-this.object.requiresAgeAdjustments.reduce.total)}}async getData(){const sheetData=await super.getData();let setup,archetype,occupation;sheetData.isKeeper=game.user.isGM,sheetData.pages=this.pageList,sheetData.canNext=!1,sheetData.createButton=!1;let showMonetary=!1;switch(sheetData.object.step){case sheetData.pages.PAGE_INTRODUCTION:sheetData.era=game.i18n.format(COC7.eras[sheetData.object.defaultEra]??"CoC7.CoCIDFlag.error.unknown-era",{era:sheetData.object.defaultEra}),sheetData.canNext=!0;break;case sheetData.pages.PAGE_CONFIGURATION:if(game.user.isGM){sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.defaultSetup)),void 0===setup?(sheetData.object.defaultSetup="",sheetData.object.setup=""):sheetData.description=CoC7Parser.enrichHTML(setup.system.description.value),sheetData.ownership={[CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE]:"OWNERSHIP.NONE",[CONST.DOCUMENT_OWNERSHIP_LEVELS.LIMITED]:"OWNERSHIP.LIMITED",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OBSERVER]:"OWNERSHIP.OBSERVER",[CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER]:"OWNERSHIP.OWNER"},sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value)});sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_DEFAULT,sheetData.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.hasArchetypes=game.settings.get("CoC7","pulpRuleArchetype"),sheetData.canNext=!0}break;case sheetData.pages.PAGE_SETUPS:""===sheetData.object.defaultSetup&&(sheetData.setups=await this.filterCacheItemByCoCID(/^i\.setup\./),sheetData.setups.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.setup&&(setup=sheetData.setups.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.setup)),void 0!==setup&&(sheetData.description=CoC7Parser.enrichHTML(setup.system.description.value),sheetData.canNext=!0)));break;case sheetData.pages.PAGE_ARCHETYPES:if(sheetData.archetypes=await this.filterCacheItemByCoCID(/^i\.archetype\./),0===sheetData.archetypes.length)sheetData.canNext=!0;else if(sheetData.archetypes.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.archetype&&(archetype=sheetData.archetypes.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.archetype)),void 0!==archetype)){sheetData.description=CoC7Parser.enrichHTML(archetype.system.description.value),sheetData.bonusPoints=archetype.system.bonusPoints;const coreCharacteristics=[];for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&coreCharacteristics.push(coreCharacteristic);0===coreCharacteristics.length?this.object.coreCharacteristic="":1===coreCharacteristics.length&&(this.object.coreCharacteristic=coreCharacteristics[0]),sheetData.coreCharacteristic=coreCharacteristics.map((c=>c.toLocaleUpperCase())).join(" "+game.i18n.localize("CoC7.Or")+" ");const skills=[];archetype.system.skills=await this.expandItemArray(archetype.system.skills);for(const skill of archetype.system.skills)skills.push(skill.name);sheetData.skills=skills.join(", "),sheetData.suggestedOccupations=CoC7Parser.enrichHTML(archetype.system.suggestedOccupations),sheetData.suggestedTraits=CoC7Parser.enrichHTML(archetype.system.suggestedTraits),sheetData.canNext=!0}break;case sheetData.pages.PAGE_CHARACTISTICS:if(sheetData.characteristicsMethods=this.characteristicsMethods,sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_ROLL,""!==sheetData.object.setup&&(setup=await this.getCacheItemByCoCID(this.object.setup),void 0!==setup)){if(setup.system.characteristics.points.enabled||this.object.enforcePointBuy?sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_POINTS:this.object.quickFireValues.length&&(sheetData.characteristicsMethod=sheetData.characteristicsMethods.METHOD_VALUES),sheetData.setup={total:0,points:setup.system.characteristics.points.value,characteristics:[{key:"str",roll:setup.system.characteristics.rolls.str,label:"CHARAC.Strength"},{key:"con",roll:setup.system.characteristics.rolls.con,label:"CHARAC.Constitution"},{key:"siz",roll:setup.system.characteristics.rolls.siz,label:"CHARAC.Size"},{key:"dex",roll:setup.system.characteristics.rolls.dex,label:"CHARAC.Dexterity"},{key:"app",roll:setup.system.characteristics.rolls.app,label:"CHARAC.Appearance"},{key:"int",roll:setup.system.characteristics.rolls.int,label:"CHARAC.Intelligence"},{key:"pow",roll:setup.system.characteristics.rolls.pow,label:"CHARAC.Power"},{key:"edu",roll:setup.system.characteristics.rolls.edu,label:"CHARAC.Education"}],luck:{roll:setup.system.characteristics.rolls.luck,label:"CoC7.Luck"}},sheetData.coreCharacteristics=[],""!==sheetData.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype),void 0!==archetype)){for(const coreCharacteristic in archetype.system.coreCharacteristics)archetype.system.coreCharacteristics[coreCharacteristic]&&sheetData.coreCharacteristics.push({key:coreCharacteristic,name:game.i18n.format(sheetData.setup.characteristics.find((c=>c.key===coreCharacteristic))?.label??"Unknown")});sheetData.coreCharacteristics.sort(CoC7Utilities.sortByNameKey),""!==this.object.coreCharacteristic&&archetype.system.coreCharacteristicsFormula.enabled&&(sheetData.setup.characteristics.find((c=>c.key===this.object.coreCharacteristic)).roll=archetype.system.coreCharacteristicsFormula.value)}let empties=!1;for(const key in sheetData.object.setupPoints)""!==sheetData.object.setupPoints[key]?"luck"!==key&&(sheetData.setup.total+=parseInt(sheetData.object.setupPoints[key],10)):empties=!0;this.object.coreCharacteristic&&(sheetData.coreCharacteristic=this.object.coreCharacteristic.toLocaleUpperCase()),!empties&&this.object.age>=15&&([sheetData.characteristicsMethods.METHOD_ROLL,sheetData.characteristicsMethods.METHOD_VALUES].includes(sheetData.characteristicsMethod)||sheetData.setup.total.toString()===sheetData.setup.points.toString())&&(sheetData.canNext=!0)}break;case sheetData.pages.PAGE_ATTRIBUTES:sheetData.pulpRuleIgnoreAgePenalties=game.settings.get("CoC7","pulpRuleIgnoreAgePenalties"),sheetData.canNext=!0,sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),min:1-parseInt(this.object.setupPoints[key],10),label:CoC7Utilities.getCharacteristicNames(key).label};if(void 0===this.object.requiresAgeAdjustments.edu||this.object.requiresAgeAdjustments.edu.rolled||(sheetData.canNext=!1),void 0!==this.object.requiresAgeAdjustments.deduct){sheetData.deductTotal=0;for(const key of this.object.requiresAgeAdjustments.deduct.from)sheetData.deductTotal=sheetData.deductTotal-parseInt(this.object.setupModifiers[key],10);sheetData.deductFrom=this.object.requiresAgeAdjustments.deduct.from.map((n=>game.i18n.localize("CHARAC."+n.toUpperCase()))).join(", ").replace(/(, )([^,]+)$/,"$1"+game.i18n.localize("CoC7.Or")+" $2").replace(/^([^,]+),([^,]+)$/,"$1$2"),sheetData.deductTotal!==this.object.requiresAgeAdjustments.deduct.total&&(sheetData.canNext=!1)}void 0!==this.object.requiresAgeAdjustments.reduce&&(sheetData.reduceFrom=game.i18n.localize("CHARAC."+this.object.requiresAgeAdjustments.reduce.from.toUpperCase())),void 0!==this.object.requiresAgeAdjustments.luck&&(sheetData.luckValue=Math.max(this.object.setupPoints.luck,this.object.setupModifiers.luck),0===this.object.setupModifiers.luck&&(sheetData.canNext=!1));break;case sheetData.pages.PAGE_VIEW_ATTRIBUTES:sheetData.points={};for(const key in this.object.setupModifiers)sheetData.points[key]={value:parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10),prefix:"",suffix:"%",label:CoC7Utilities.getCharacteristicNames(key).label};sheetData.points.db={value:CoCActor.dbFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.BonusDamage"},(isNaN(sheetData.points.db.value)||Number(sheetData.points.db.value)>=0)&&(sheetData.points.db.prefix="+"),sheetData.points.build={value:CoCActor.buildFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.Build"},Number(sheetData.points.build.value)>=0&&(sheetData.points.build.prefix="+"),sheetData.points.hp={value:CoCActor.hpFromCharacteristics(sheetData.points,"character"),prefix:"",suffix:"",label:"CoC7.HitPoints"},sheetData.points.hp.prefix=sheetData.points.hp.value+"/",sheetData.points.mp={value:CoCActor.mpFromCharacteristics(sheetData.points),prefix:"",suffix:"",label:"CoC7.MagicPoints"},sheetData.points.mp.prefix=sheetData.points.mp.value+"/",sheetData.points.san={value:sheetData.points.pow.value,prefix:"",suffix:"/99",label:"CoC7.Sanity"},sheetData.points.mov={value:CoCActor.movFromCharacteristics(sheetData.points,"character",this.object.age),prefix:"",suffix:"",label:"CoC7.Movement"},sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATIONS:if(sheetData.occupations=await this.filterCacheItemByCoCID(/^i\.occupation\./),sheetData.occupations.sort(CoC7Utilities.sortByNameKey),""!==sheetData.object.occupation&&(occupation=sheetData.occupations.find((s=>s.flags.CoC7.cocidFlag.id===sheetData.object.occupation)),void 0!==occupation)){sheetData.description=CoC7Parser.enrichHTML(occupation.system.description.value),sheetData.occupationPointsString=CoC7OccupationSheet.occupationPointsString(occupation.system.occupationSkillPoints),sheetData.creditRating=occupation.system.creditRating,sheetData.personal=occupation.system.personal,sheetData.personalText=occupation.system.personalText,sheetData.skills=await this.expandItemArray(occupation.system.skills),sheetData.groups={};for(let index=0;index<occupation.system.groups.length;index++)sheetData.groups[index]={options:occupation.system.groups[index].options,skills:[]},sheetData.groups[index].skills=await this.expandItemArray(occupation.system.groups[index].skills);sheetData.points=0;const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.points+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.points+=Math.max(...options)),sheetData.canNext=!0}break;case sheetData.pages.PAGE_INVESTIGATOR:sheetData.language=void 0!==this.object.skillItems[this.cocidLanguageOwn],sheetData.language?sheetData.languageName=this.object.skillItems[this.cocidLanguageOwn].item.name:sheetData.languageName="",sheetData.canNext=!0;break;case sheetData.pages.PAGE_OCCUPATION_SKILLS:sheetData.default=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isOccupationDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.default++):!1!==sheetData.object.skillItems[key].rows[index].inOccupationGroup?(group=sheetData.object.skillItems[key].rows[index].inOccupationGroup,isMultiple&&(isPickable=!0)):group="other";let toggle=sheetData.object.skillItems[key].rows[index].occupationToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].archetypeToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:sheetData.object.skillItems[key].rows[index].isCreditRating,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.max=(parseInt(sheetData.default,10)||0)+(parseInt(sheetData.object.personal,10)||0)+Object.values(sheetData.object.occupationGroups).reduce(((s,v)=>s+(parseInt(v,10)||0)),0),sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_ARCHETYPE_SKILLS:sheetData.max=0,sheetData.selected=0,sheetData.skillItems=[];for(const key in this.object.skillItems){let group="other";const rows=sheetData.object.skillItems[key].rows.length,isMultiple=sheetData.object.skillItems[key].flags.isMultiple;isMultiple&&sheetData.skillItems.push({key,index:-1,name:sheetData.object.skillItems[key].item.name,group,toggle:!1,isCreditRating:!1,isMultiple:!0,isPickable:!1});for(let index=0;index<rows;index++){let isPickable=!1;sheetData.object.skillItems[key].rows[index].isArchetypeDefault?(group="default",isMultiple&&(isPickable=!0),sheetData.max++):group="other";let toggle=sheetData.object.skillItems[key].rows[index].archetypeToggle;isPickable&&(toggle=!1);let specialization=sheetData.object.skillItems[key].item.system.specialization,skillName=sheetData.object.skillItems[key].item.system.skillName,picked=!1,deleteable=!1;"string"==typeof sheetData.object.skillItems[key].rows[index].selected?(picked=!0,skillName=sheetData.object.skillItems[key].rows[index].selected):!1!==sheetData.object.skillItems[key].rows[index].selected&&(picked=!0,specialization=sheetData.object.skillItems[key].rows[index].selected.system.specialization,skillName=sheetData.object.skillItems[key].rows[index].selected.system.skillName),(toggle||isPickable&&picked)&&sheetData.selected++;let name=sheetData.object.skillItems[key].item.name;(key===this.cocidLanguageOwn||!isPickable&&picked)&&(name=specialization+" ("+skillName+")"),!isPickable&&picked&&(deleteable=!sheetData.object.skillItems[key].rows[index].occupationToggle),sheetData.skillItems.push({key,index,name,group:group.toString(),toggle,isCreditRating:!1,isMultiple:!1,isPickable,picked,deleteable,specialization,skillName})}}sheetData.skillItems.sort(CoC7Utilities.sortByNameKey),sheetData.selected===sheetData.max&&(sheetData.canNext=!0);break;case sheetData.pages.PAGE_POINTS_SKILLS:if(sheetData.skills=[],sheetData.creditRatingOkay=!(this.object.creditRating.max>0),sheetData.personal={count:0,total:2*(parseInt(this.object.setupPoints.int,10)+parseInt(this.object.setupModifiers.int,10)),remaining:0},sheetData.occupation={count:0,total:0,remaining:0},sheetData.archetype={count:0,total:0,remaining:0},""!==sheetData.object.setup&&(showMonetary=(await this.getCacheItemByCoCID(sheetData.object.setup)).system.monetary.values.length>0),""!==sheetData.object.occupation&&(occupation=await this.getCacheItemByCoCID(this.object.occupation),occupation)){const options=[];for(const[key,carac]of Object.entries(occupation.system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))):sheetData.occupation.total+=carac.multiplier*(parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10)));options.length>0&&(sheetData.occupation.total+=Math.max(...options))}if(""!==this.object.archetype){const archetype=await game.system.api.cocid.fromCoCID(this.object.archetype);1===archetype.length&&(sheetData.archetype.total=archetype[0].system.bonusPoints)}if(Object.keys(this.object.skillItems).length>0){for(const key in this.object.skillItems){const skill=this.object.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=duplicate(row.selected));let base=item.system.base;if(!Number.isNumeric(base))for(const key in this.object.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(this.object.setupPoints[key],10)+parseInt(this.object.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new Roll(base).evaluate({async:!1}).total));let totalPoints=parseInt(base,10);if(Number(row.personalPoints)>0){const num=Number(row.personalPoints);sheetData.personal.count+=num,totalPoints+=num}if(Number(row.occupationPoints)>0){const num=Number(row.occupationPoints);sheetData.occupation.count+=num,totalPoints+=num}if(Number(row.archetypePoints)>0){const num=Number(row.archetypePoints);sheetData.archetype.count+=num,totalPoints+=num}if(Number(row.experiencePoints)>0){totalPoints+=Number(row.experiencePoints)}let name=item.name;key===this.cocidLanguageOwn?name=item.system.specialization+" ("+item.system.skillName+")":skill.flags.isCreditRating?(name=name+" ["+this.object.creditRating.min+" - "+this.object.creditRating.max+"]",totalPoints>=this.object.creditRating.min&&totalPoints<=this.object.creditRating.max&&(sheetData.creditRatingOkay=!0)):"string"==typeof row.selected&&(name=item.system.specialization+" ("+row.selected+")"),sheetData.skills.push({key,index,name,isOccupation:row.occupationToggle,isArchetype:row.archetypeToggle,base,personalPoints:row.personalPoints,occupationPoints:row.occupationPoints,archetypePoints:row.archetypePoints,experiencePoints:row.experiencePoints,totalPoints,showCreditRating:showMonetary&&key===this.cocidCreditRating})}}}sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData.creditRatingOkay&&(sheetData.canNext=!0)}sheetData.personal.remaining=sheetData.personal.total-sheetData.personal.count,sheetData.occupation.remaining=sheetData.occupation.total-sheetData.occupation.count,sheetData.archetype.remaining=sheetData.archetype.total-sheetData.archetype.count;break;case sheetData.pages.PAGE_BACKSTORY:{const allBackstories=await this.object.cacheBackstories;sheetData.backstories={};for(let index=0;index<this.object.bioSections.length;index++)sheetData.backstories[index]={index,name:this.object.bioSections[index].name,rolls:game.system.api.cocid.findCocIdInList(this.object.bioSections[index].key,allBackstories).length?this.object.bioSections[index].key:"",value:this.object.bioSections[index].value}}sheetData.canNext=!0,sheetData.createButton=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;break;case sheetData.pages.PAGE_CREATE:sheetData.canNext=!0,sheetData.createButton=!0}return sheetData}activateListeners(html){super.activateListeners(html),html.keypress((e=>/textarea/i.test((e.target||e.srcElement).tagName)||13!==(e.keyCode||e.which||e.charCode||0))),html.find(".submit_on_change").change(this._onChangeSubmit.bind(this)),html.find(".roll-characteristic").click(this._onRollCharacteristic.bind(this)),html.find(".increase-10-characteristic").click(this._onIncreaseCharacteristic10.bind(this)),html.find(".increase-characteristic").click(this._onIncreaseCharacteristic.bind(this)),html.find(".decrease-characteristic").click(this._onDecreaseCharacteristic.bind(this)),html.find(".decrease-10-characteristic").click(this._onDecreaseCharacteristic10.bind(this)),html.find("button.roll_all").click(this._onRollAll.bind(this)),html.find("button.roll_edu").click(this._onRollEdu.bind(this)),html.find("button.roll_luck").click(this._onRollLuck.bind(this)),html.find(".item input.submit_on_blur").blur(this._onChangeSubmit.bind(this)),html.find(".item input.save-characteristic-on-blur").blur(this._onChangeSaveCharacteristic.bind(this)),html.find(".item.toggleable").click(this._onToggleSkill.bind(this)),html.find(".item.clickable").click(this._onClickPickSkill.bind(this)),html.find(".skills-list input").click(this._onClickSkillSpecial.bind(this)),html.find(".skills-list .remove-skill").click(this._onClickRemoveSkill.bind(this)),html.find(".item input.skill-adjustment").blur(this._onChangeSkillPoints.bind(this)),html.find("textarea.backstory-text").keyup(this._onChangeBackstoryText.bind(this)),html.find("button.backstory-roll").click(this._onRollBackstory.bind(this)),html.find("button.backstory-reset").click(this._onResetBackstory.bind(this))}async rollMessage(rolls){if(rolls.length){const html=[];for(const roll of rolls)html.push(await renderTemplate(Roll.CHAT_TEMPLATE,{formula:(CoC7Utilities.getCharacteristicNames(roll[0])?.label??roll[0])+": "+roll[1],tooltip:await roll[2].getTooltip(),total:roll[2].total}));ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html.join("<div>&nbsp;</div>"),whisper:ChatMessage.getWhisperRecipients("GM")})}}addItemToList(item,{isOccupationDefault=!1,inOccupationGroup=!1,occupationToggle=!1,isArchetypeDefault=!1,archetypeToggle=!1,isCreditRating=!1}={}){const key=item.flags.CoC7?.cocidFlag?.id??item.name;if("skill"!==item.type)return void this.object.investigatorItems.push(item);const isMultiple=!(!item.system.properties.special||!(item.system.properties.requiresname&&!item.system.properties.onlyone||item.system.properties.picknameonly||item.name===game.i18n.format("CoC7.AnySpecName"))),flags={isOccupationDefault,inOccupationGroup,isArchetypeDefault,isCreditRating,occupationToggle,archetypeToggle},rows={occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected:!1};if(void 0===this.object.skillItems[key])this.object.skillItems[key]={item,flags:mergeObject(flags,{isMultiple},{inplace:!1}),rows:[]},isMultiple&&!1===isOccupationDefault&&!1===inOccupationGroup&&!1===isArchetypeDefault||this.object.skillItems[key].rows.push(mergeObject(flags,rows,{inplace:!1}));else{if(isMultiple)this.object.skillItems[key].rows.push(mergeObject(flags,rows,{inplace:!1}));else for(const flag in flags)this.object.skillItems[key].rows[0][flag]=this.object.skillItems[key].rows[0][flag]||flags[flag];for(const flag in flags)this.object.skillItems[key].flags[flag]=this.object.skillItems[key].flags[flag]||flags[flag]}!isMultiple&&flags.isCreditRating&&(this.object.skillItems[key].rows[0].occupationPoints=this.object.creditRating.min)}clearSetupPoints(){for(const key in this.object.setupPoints)this.object.setupPoints[key]=""}async setSkillLists(){this.object.skillItems={},this.object.occupationGroups={},this.object.investigatorItems=[],this.object.placeable=duplicate(this.object.quickFireValues);const setup=await this.getCacheItemByCoCID(this.object.setup),occupation=await this.getCacheItemByCoCID(this.object.occupation);let archetype=!1;if(""!==this.object.archetype&&(archetype=await this.getCacheItemByCoCID(this.object.archetype)),setup&&occupation&&(!game.settings.get("CoC7","pulpRuleArchetype")||archetype)){this.object.bioSections=[];for(let index=0;index<setup.system.bioSections.length;index++)this.object.bioSections.push({name:setup.system.bioSections[index],value:"",key:"rt..backstory-"+CoC7Utilities.toKebabCase(setup.system.bioSections[index])});this.object.personal=occupation.system.personal,this.object.personalText=occupation.system.personalText,this.object.creditRating=occupation.system.creditRating;let items=[];items=await this.expandItemArray(setup.system.items);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index]);items=await this.expandItemArray(occupation.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isOccupationDefault:!0,occupationToggle:!0});for(let group=0,gm=occupation.system.groups.length;group<gm;group++){this.object.occupationGroups[group]=occupation.system.groups[group].options,items=await this.expandItemArray(occupation.system.groups[group].skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{inOccupationGroup:group})}if(archetype){items=await this.expandItemArray(archetype.system.skills);for(let index=0,im=items.length;index<im;index++)this.addItemToList(items[index],{isArchetypeDefault:!0,archetypeToggle:!0})}if(Number(this.object.creditRating.max)>0){const nameCreditRating=game.i18n.format("CoC7.CoCIDFlag.keys."+this.cocidCreditRating),flags={isOccupationDefault:!0,occupationToggle:!0,isCreditRating:!0};if(void 0!==this.object.skillItems[this.cocidCreditRating])this.addItemToList(this.object.skillItems[this.cocidCreditRating].item,flags);else if(void 0!==this.object.skillItems[nameCreditRating])this.addItemToList(this.object.skillItems[nameCreditRating].item,flags);else{const skill=await game.system.api.cocid.fromCoCID(this.cocidCreditRating);skill.length&&this.addItemToList(skill[0],flags)}}}}_onDragStart(event){if(event.currentTarget.dataset.characteristicKey){const dragData={type:"investigatorCharacteristic",key:event.currentTarget.dataset.characteristicKey,value:event.currentTarget.dataset.value};event.dataTransfer.setData("text/plain",JSON.stringify(dragData))}}async _onDrop(event){try{const dataList=JSON.parse(event.dataTransfer.getData("text/plain"));if(void 0!==dataList.type&&"investigatorCharacteristic"===dataList.type){if(dataList.destination=event.target.closest("li").dataset.characteristicKey,dataList.okay=!1,"-"===dataList.key&&void 0!==this.object.setupPoints[dataList.destination]){const index=this.object.placeable.indexOf(parseInt(dataList.value,10));-1!==index&&this.object.placeable.splice(index,1),""!==this.object.setupPoints[dataList.destination]&&this.object.placeable.push(parseInt(this.object.setupPoints[dataList.destination],10)),this.object.setupPoints[dataList.destination]=parseInt(dataList.value,10),this.object.placeable.sort().reverse(),dataList.okay=!0}else if(void 0!==this.object.setupPoints[dataList.key]&&"-"===dataList.destination)""!==this.object.setupPoints[dataList.key]&&(this.object.placeable.push(parseInt(this.object.setupPoints[dataList.key],10)),this.object.setupPoints[dataList.key]="",this.object.placeable.sort().reverse(),dataList.okay=!0);else if(void 0!==this.object.setupPoints[dataList.key]&&void 0!==this.object.setupPoints[dataList.destination]){const temp=""===this.object.setupPoints[dataList.key]?"":parseInt(this.object.setupPoints[dataList.key],10);this.object.setupPoints[dataList.key]=""===this.object.setupPoints[dataList.destination]?"":parseInt(this.object.setupPoints[dataList.destination],10),this.object.setupPoints[dataList.destination]=temp,dataList.okay=!0}if(dataList.okay)return void this.render(!0)}}catch(err){}const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if([this.pageList.PAGE_ARCHETYPE_SKILLS,this.pageList.PAGE_OCCUPATION_SKILLS].includes(this.object.step))for(const item of dataList)"skill"===item.type&&(this.addItemToList(item),this.render(!0))}_onClickSkillSpecial(event){event.stopPropagation()}_onClickRemoveSkill(event){event.stopPropagation();const key=event.currentTarget?.parentNode?.dataset?.key,index=event.currentTarget?.parentNode?.dataset?.index;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows.splice(index,index),this.render(!0))}async _onToggleSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;void 0!==this.object.skillItems[key]?.rows[index]&&(this.object.skillItems[key].rows[index][toggleKey]=!this.object.skillItems[key].rows[index][toggleKey],this.render(!0))}async _onClickPickSkill(event){const key=event.currentTarget?.dataset?.key,index=event.currentTarget?.dataset?.index,toggleKey=event.currentTarget?.dataset?.toggleKey;if(void 0!==this.object.skillItems[key]){index>-1&&(this.object.skillItems[key].rows[index][toggleKey]=!1,this.object.skillItems[key].rows[index].selected=!1,this.render(!0));let skillList=[];const group=game.system.api.cocid.guessGroupFromKey(key);group&&(skillList=(await game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(group)+".+$"),type:"i"})).filter((item=>!(item.system.properties?.special&&(item.system.properties?.requiresname||item.system.properties?.picknameonly)))),skillList.length>1&&skillList.sort(CoC7Utilities.sortByNameKey));const skillData=await SkillSpecializationSelectDialog.create({skills:skillList,allowCustom:this.object.skillItems[key].item.system.properties?.requiresname??!1,fixedBaseValue:!0,specializationName:this.object.skillItems[key].item.system.specialization,label:this.object.skillItems[key].item.name});if(index>-1)""!==skillData.selected?(this.object.skillItems[key].rows[index].selected=skillList.find((i=>i.id===skillData.selected)),this.object.skillItems[key].rows[index][toggleKey]=!0):""!==skillData.name&&(this.object.skillItems[key].rows[index].selected=skillData.name,this.object.skillItems[key].rows[index][toggleKey]=!0);else{let selected=!1;""!==skillData.selected?selected=skillList.find((i=>i.id===skillData.selected)):""!==skillData.name&&(selected=skillData.name),this.object.skillItems[key].rows.push({isOccupationDefault:!1,inOccupationGroup:!1,isArchetypeDefault:!1,isCreditRating:!1,occupationToggle:"occupationToggle"===toggleKey,archetypeToggle:"archetypeToggle"===toggleKey,occupationPoints:"",archetypePoints:"",experiencePoints:"",personalPoints:"",selected})}this.render(!0)}}async _onChangeSkillPoints(event){const input=$(event.currentTarget),adjustment=input.data("adjustment"),li=input.closest("li"),key=li.data("key"),index=li.data("index");void 0!==this.object.skillItems[key]?.rows[index][adjustment]&&(this.object.skillItems[key].rows[index][adjustment]=input.val()),this.render(!0)}async _onChangeBackstoryText(event){const textarea=$(event.currentTarget),index=textarea.data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=textarea.val())}async _onRollBackstory(event){const button=$(event.currentTarget),index=button.data("index"),key=button.data("key");if(void 0!==this.object.bioSections[index]){const rolltable=await game.system.api.cocid.fromCoCID(key);if(1===rolltable.length){const tableResult=await rolltable[0].roll();tableResult.results[0].type===CONST.TABLE_RESULT_TYPES.TEXT&&(this.object.bioSections[index].value=(this.object.bioSections[index].value+"\n"+tableResult.results[0].text.trim()).trim())}}this.render(!0)}async _onResetBackstory(event){const index=$(event.currentTarget).data("index");void 0!==this.object.bioSections[index]&&(this.object.bioSections[index].value=""),this.render(!0)}async _onRollLuck(event){const setup=await this.getCacheItemByCoCID(this.object.setup);if(setup){const die=await new Roll(setup.system.characteristics.rolls.luck.toString()).evaluate({async:!0});this.object.setupModifiers.luck=[die.total];const html=await renderTemplate(Roll.CHAT_TEMPLATE,{formula:game.i18n.localize("CoC7.InvestigatorWizard.RollTwiceForLuck")+": "+setup.system.characteristics.rolls.luck.toString(),tooltip:await die.getTooltip(),total:die.total});ChatMessage.create({user:game.user.id,speaker:{alias:game.user.name},content:html,whisper:ChatMessage.getWhisperRecipients("GM")}),this.render(!0)}}async _onRollEdu(event){if(event.preventDefault(),void 0!==this.object.requiresAgeAdjustments.edu&&!this.object.requiresAgeAdjustments.edu.rolled&&this.object.requiresAgeAdjustments.edu.total){let value=parseInt(this.object.setupPoints.edu,10);const message=[];for(let rolls=this.object.requiresAgeAdjustments.edu.total;rolls>0;rolls--){const die=await new Roll("1d100").evaluate({async:!0});if(die.total>value){const augmentDie=await new Roll("1d10").evaluate({async:!0});message.push(`<span class="upgrade-success">${game.i18n.format("CoC7.DevSuccess",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value,augment:augmentDie.total})}</span><br>`),value+=parseInt(augmentDie.total,10)}else message.push(`<span class="upgrade-failed">${game.i18n.format("CoC7.DevFailure",{item:game.i18n.localize("CHARAC.Education"),die:die.total,score:value})}</span><br>`)}ChatMessage.create({flavor:game.i18n.localize("CoC7.RollAll4Dev"),user:game.user.id,speaker:{alias:game.user.name},content:message.join(""),whisper:ChatMessage.getWhisperRecipients("GM")}),this.object.setupModifiers.edu=value-parseInt(this.object.setupPoints.edu,10),this.object.requiresAgeAdjustments.edu.rolled=!0,this.render(!0)}}async _onRollAll(event){event.preventDefault();const rolls=[];for(const key of["str","con","siz","dex","app","int","pow","edu","luck"]){const result=await this.rollCharacteristic(key);!1!==result&&rolls.push(result)}this.rollMessage(rolls),this.render(!0)}async _onIncreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,10),this.render(!0)}async _onIncreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,1),this.render(!0)}async _onDecreaseCharacteristic(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-1,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-1),this.render(!0)}_onDecreaseCharacteristic10(event){event.preventDefault();const li=event.currentTarget.closest(".item");void 0!==li.dataset.offset&&void 0!==li.dataset.min&&void 0!==li.dataset.max?this.modifyOffset(li.dataset.offset,-10,li.dataset.min,li.dataset.max):void 0!==li.dataset.key&&this.modifyCharacteristic(li.dataset.key,-10),this.render(!0)}modifyOffset(key,value,min,max){this.object.setupModifiers[key]=Math.max(Math.min(parseInt(this.object.setupModifiers[key],10)+value,parseInt(max,10)),parseInt(min,10))}modifyCharacteristic(key,value){const li=this._element[0].querySelector(`li.item[data-key=${key}]`),input=li?.querySelector("input");input&&(input.value=Number(input.value)+value,this.object.setupPoints[key]=Number(input.value))}async _onRollCharacteristic(event){event.preventDefault();const characKey=event.currentTarget.closest(".item").dataset.key,result=await this.rollCharacteristic(characKey);!1!==result&&this.rollMessage([result]),this.render(!0)}async rollCharacteristic(key){const li=$(`#investigator-wizard-application li.item[data-key=${key}]`),input=li.find("input"),formula=li.data("roll");if(input&&formula&&(this.object.rerollsEnabled||""===this.object.setupPoints[key])){const roll=new Roll(formula.toString());return await roll.evaluate({async:!0}),input.val(roll.total),this.object.setupPoints[key]=Number(roll.total),[key,formula.toString(),roll]}return!1}_onChangeSubmit(event){this._onSubmit(event)}_onChangeSaveCharacteristic(event){const obj=$(event.currentTarget),name=obj.prop("name");if(void 0!==this.object.setupPoints[name]){this.object.setupPoints[name]=obj.val();let empties=!1,total=0;for(const key in this.object.setupPoints)""!==this.object.setupPoints[key]?"luck"!==key&&(total+=parseInt(this.object.setupPoints[key],10)):empties=!0;const objTotal=obj.closest("ol.item-list").find("span.total"),max=parseInt(objTotal.siblings("span.value").text(),10);objTotal.text(total),total!==max||empties?obj.closest("form").find("button.submit-button[data-button=next]").length>0&&this.render(!0):0===obj.closest("form").find("button.submit-button[data-button=next]").length&&this.render(!0)}}getPageNumber(direction){const pageOrder=this.pageOrder,key=parseInt(Object.keys(pageOrder).find((key=>pageOrder[key]===this.object.step)),10)+direction;return pageOrder[key]}async _updateObject(event,formData){if(["back","next"].includes(event.submitter?.dataset.button)){if(event.submitter.className.indexOf("currently-submitting")>-1)return;event.submitter.className=event.submitter.className+" currently-submitting"}if(void 0!==formData["default-setup"]&&void 0!==formData["world-era"]&&void 0!==formData["default-ownership"]){if(this.object.defaultSetup!==formData["default-setup"]&&(this.object.defaultSetup=formData["default-setup"],game.settings.set("CoC7","InvestigatorWizardSetup",this.object.defaultSetup),this.object.setup=this.object.defaultSetup,this.clearSetupPoints(),await this.setSkillLists()),this.object.defaultOwnership!==formData["default-ownership"]&&(this.object.defaultOwnership=formData["default-ownership"],game.settings.set("CoC7","InvestigatorWizardOwnership",this.object.defaultOwnership)),this.object.defaultEra!==formData["world-era"]){const obj=$(this.element.find("form")),started=Date.now();obj.find(".dialog-buttons:first").hide(),obj.find(".scrollsection:first").hide(),obj.find(".erachange:first").show(),this.object.defaultEra=formData["world-era"],await game.settings.set("CoC7","worldEra",this.object.defaultEra),this.object.cacheCoCID=await CoC7InvestigatorWizard.loadCacheItemByCoCID();const buffer=500-(Date.now()-started);buffer>10&&await new Promise((resolve=>setTimeout(resolve,buffer)))}if(void 0!==formData["characteristics-method"]){const type=Number(formData["characteristics-method"]);type===this.characteristicsMethods.METHOD_DEFAULT?(this.object.enforcePointBuy=!1,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_POINTS?(this.object.enforcePointBuy=!0,this.object.quickFireValues=[]):type===this.characteristicsMethods.METHOD_VALUES&&(this.object.enforcePointBuy=!1,game.settings.get("CoC7","pulpRuleArchetype")?this.object.quickFireValues=[90,80,70,60,60,50,50,40]:this.object.quickFireValues=[80,70,60,60,50,50,50,40]),game.settings.set("CoC7","InvestigatorWizardPointBuy",this.object.enforcePointBuy),game.settings.set("CoC7","InvestigatorWizardQuickFire",this.object.quickFireValues)}this.object.rerollsEnabled="string"==typeof formData["rerolls-enabled"],game.settings.set("CoC7","InvestigatorWizardRerolls",this.object.rerollsEnabled);for(let i=0,im=this.object.quickFireValues.length;i<im;i++){const num=Number(formData["quick-fire-values-"+i]);num>0&&(this.object.quickFireValues[i]=num)}this.object.quickFireValues.sort().reverse(),this.object.placeable=duplicate(this.object.quickFireValues),"string"==typeof formData["default-enabled"]?"0"===this.object.defaultQuantity.toString()?(this.object.defaultQuantity=1,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):(this.object.defaultQuantity=formData["default-quantity"],game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity)):"0"!==this.object.defaultQuantity.toString()&&(this.object.defaultQuantity=0,game.settings.set("CoC7","InvestigatorWizardQuantity",this.object.defaultQuantity))}else if(void 0!==formData["coc-setup"])this.object.setup!==formData["coc-setup"]&&(this.object.setup=formData["coc-setup"],this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-archetype"])this.object.archetype!==formData["coc-archetype"]&&(this.object.archetype=formData["coc-archetype"],this.object.coreCharacteristic="",this.clearSetupPoints(),await this.setSkillLists());else if(void 0!==formData["coc-occupation"])this.object.occupation!==formData["coc-occupation"]&&(this.object.occupation=formData["coc-occupation"],await this.setSkillLists());else{for(const key in this.object.setupPoints)void 0!==formData[key]&&this.object.setupPoints[key]!==formData[key]&&(this.object.setupPoints[key]=formData[key]);void 0!==formData["coc-core-characteristic"]&&this.object.coreCharacteristic!==formData["coc-core-characteristic"]&&(this.object.coreCharacteristic=formData["coc-core-characteristic"],this.clearSetupPoints(),this.object.placeable=duplicate(this.object.quickFireValues))}const flatKeys=["name","age","residence","birthplace","language","avatar","token"];for(const key of flatKeys)void 0!==formData[key]&&this.object[key]!==formData[key]&&(this.object[key]=formData[key],"age"===key&&this.getAgeAdjustments());if("back"===event.submitter?.dataset.button){const pageNumber=this.getPageNumber(-1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}else if("next"===event.submitter?.dataset.button){if(this.object.step===this.pageList.PAGE_CREATE||this.object.step===this.pageList.PAGE_BACKSTORY&&game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole)return void this.attemptToCreate();{const pageNumber=this.getPageNumber(1);if(void 0!==pageNumber){this.object.step=pageNumber;const obj=this.element.find(".scrollsection");obj.length&&obj[0].scrollTop&&(obj[0].scrollTop=0)}}}this.render(!0)}async attemptToCreate(){const actorData=await this.normalizeCharacterData(this.object);if(game.user.isGM||game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole){(await CoC7InvestigatorWizard.createCharacter(actorData)).sheet.render(!0),this.close()}else{const keepers=game.users.filter((u=>u.active&&u.isGM));if(keepers.length){actorData.ownership[game.user.id]=CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER;const data={type:"character-wizard",listener:keepers[0].id,payload:actorData};game.socket.emit("system.CoC7",data),ui.notifications.info(game.i18n.localize("CoC7.InvestigatorWizard.CreatingInvestigator")),this.close()}else ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}async normalizeCharacterData(data){const weaponSkills={melee:{},rngd:{}},items=[];for(const key in data.skillItems){const skill=data.skillItems[key];for(let index=0,im=skill.rows.length;index<im;index++){const row=skill.rows[index];if(!skill.flags.isMultiple||!1!==row.selected){let item=duplicate(skill.item);!1!==row.selected&&"string"!=typeof row.selected&&(item=duplicate(row.selected),row.selected=!1),row.occupationToggle&&(item.system.flags.occupation=!0),row.archetypeToggle&&(item.system.flags.archetype=!0);let base=item.system.base;if(!Number.isNumeric(base))for(const key in data.setupPoints){const regEx=new RegExp("@"+key,"i");base=base.replace(regEx,parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))}Number.isNumeric(base)||(base=Math.floor(new Roll(base).evaluate({async:!1}).total)),item.system.base=base,item.system.adjustments=item.system.adjustments??{},Number(row.personalPoints)>0&&(item.system.adjustments.personal=parseInt(row.personalPoints,10)),Number(row.occupationPoints)>0&&(item.system.adjustments.occupation=parseInt(row.occupationPoints,10)),Number(row.archetypePoints)>0&&(item.system.adjustments.archetype=parseInt(row.archetypePoints,10)),Number(row.experiencePoints)>0&&(item.system.adjustments.experience=parseInt(row.experiencePoints,10)),key===this.cocidLanguageOwn?(item.system.skillName=data.language,item.name=item.system.specialization+" ("+item.system.skillName+")"):"string"==typeof row.selected&&(item.system.skillName=row.selected,item._id=randomID(),item.name=item.system.specialization+" ("+item.system.skillName+")",void 0!==item.flags.CoC7?.cocidFlag?.id&&(item.flags.CoC7.cocidFlag.id=game.system.api.cocid.guessId(item))),item.system.properties?.fighting?(weaponSkills.melee[item.name]=item._id,weaponSkills.melee[item.system.skillName]=item._id):item.system.properties?.firearm&&(weaponSkills.rngd[item.name]=item._id,weaponSkills.rngd[item.system.skillName]=item._id),items.push(item)}}}for(const sourceItem of data.investigatorItems){const item=duplicate(sourceItem);item.system.properties.melee?(void 0!==weaponSkills.melee[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.melee[item.system.skill.main.name]),void 0!==weaponSkills.melee[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.melee[item.system.skill.alternativ.name])):item.system.properties.rngd&&(void 0!==weaponSkills.rngd[item.system.skill.main.name]&&(item.system.skill.main.id=weaponSkills.rngd[item.system.skill.main.name]),void 0!==weaponSkills.rngd[item.system.skill.alternativ.name]&&(item.system.skill.alternativ.id=weaponSkills.rngd[item.system.skill.alternativ.name])),items.push(item)}let monetary={};const setup=await this.getCacheItemByCoCID(this.object.setup);setup&&(monetary=duplicate(setup.system.monetary));const development={personal:2*(parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)),occupation:0,archetype:0};if(""!==data.archetype){const archetype=await game.system.api.cocid.fromCoCID(data.archetype);1===archetype.length&&(items.push(archetype[0].toObject()),development.archetype=archetype[0].system.bonusPoints)}if(""!==data.occupation){const occupation=await game.system.api.cocid.fromCoCID(data.occupation);if(1===occupation.length){items.push(occupation[0].toObject());const options=[];for(const[key,carac]of Object.entries(occupation[0].system.occupationSkillPoints))carac.selected&&(carac.optional?options.push(carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10))):development.occupation+=carac.multiplier*(parseInt(data.setupPoints[key],10)+parseInt(data.setupModifiers[key],10)));options.length>0&&(development.occupation+=Math.max(...options))}}const biography=[];for(let index=0,im=data.bioSections.length;index<im;index++)biography.push({title:data.bioSections[index].name,value:data.bioSections[index].value});return{type:"character",name:data.name,img:data.avatar,system:{characteristics:{str:{value:parseInt(data.setupPoints.str,10)+parseInt(data.setupModifiers.str,10)},con:{value:parseInt(data.setupPoints.con,10)+parseInt(data.setupModifiers.con,10)},siz:{value:parseInt(data.setupPoints.siz,10)+parseInt(data.setupModifiers.siz,10)},dex:{value:parseInt(data.setupPoints.dex,10)+parseInt(data.setupModifiers.dex,10)},app:{value:parseInt(data.setupPoints.app,10)+parseInt(data.setupModifiers.app,10)},int:{value:parseInt(data.setupPoints.int,10)+parseInt(data.setupModifiers.int,10)},pow:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)},edu:{value:parseInt(data.setupPoints.edu,10)+parseInt(data.setupModifiers.edu,10)}},attribs:{lck:{value:Math.max(parseInt(data.setupPoints.luck,10),parseInt(data.setupModifiers.luck,10))},san:{value:parseInt(data.setupPoints.pow,10)+parseInt(data.setupModifiers.pow,10)}},infos:{age:data.age,residence:data.residence,birthplace:data.birthplace},development,biography,monetary},prototypeToken:{name:data.name,actorLink:!0,texture:{src:data.token},disposition:CONST.TOKEN_DISPOSITIONS.FRIENDLY,sight:{enabled:!0}},items,ownership:{default:parseInt(data.defaultOwnership,10)}}}static async createCharacterFromData(actorData){const actor=await CoC7InvestigatorWizard.createCharacter(actorData),functionId=Hooks.on("renderActorSheet",((app,html,data)=>{app.object.id===actor.id&&(game.socket.emit("system.CoC7",{type:"open-character",listener:Object.keys(actorData.ownership).find((k=>"default"!==k)),payload:actor.id}),Hooks.off("renderActorSheet",functionId))}));actor.sheet.render(!0)}static async createCharacter(actorData){const actor=await Actor.create(actorData);return await actor.update({"system.attribs.hp.value":actor.rawHpMax,"system.attribs.mp.value":actor.rawMpMax,"system.attribs.san.max":actor.rawMpMax}),await actor.resetDailySanity(),actor}static async create(options={}){options=mergeObject({step:0,defaultSetup:game.settings.get("CoC7","InvestigatorWizardSetup"),defaultQuantity:game.settings.get("CoC7","InvestigatorWizardQuantity"),defaultOwnership:game.settings.get("CoC7","InvestigatorWizardOwnership"),defaultEra:game.settings.get("CoC7","worldEra"),rerollsEnabled:game.settings.get("CoC7","InvestigatorWizardRerolls"),enforcePointBuy:game.settings.get("CoC7","InvestigatorWizardPointBuy"),quickFireValues:game.settings.get("CoC7","InvestigatorWizardQuickFire"),placeable:duplicate(game.settings.get("CoC7","InvestigatorWizardQuickFire")),cacheCoCID:CoC7InvestigatorWizard.loadCacheItemByCoCID(),cacheBackstories:game.system.api.cocid.fromCoCIDRegexBest({cocidRegExp:/^rt\.\.backstory-/,type:"rt"}),cacheItems:{},setup:game.settings.get("CoC7","InvestigatorWizardSetup"),skillItems:{},occupationGroups:{},investigatorItems:[],setupPoints:{str:"",con:"",siz:"",dex:"",app:"",int:"",pow:"",edu:"",luck:""},setupModifiers:{str:0,con:0,siz:0,dex:0,app:0,int:0,pow:0,edu:0,luck:0},archetype:"",coreCharacteristic:"",occupation:"",bioSections:[],personal:0,personalText:"",creditRating:{min:0,max:0},name:"",age:"",requiresAgeAdjustments:!1,residence:"",birthplace:"",language:"",avatar:"icons/svg/mystery-man.svg",token:"icons/svg/mystery-man.svg"},options),new CoC7InvestigatorWizard(options).render(!0)}}class CoC7MenuLayer extends PlaceablesLayer{constructor(){super(),this.objects={}}static get layerOptions(){return foundry.utils.mergeObject(super.layerOptions,{name:"coc7menu",zIndex:60})}static get documentName(){return"Token"}get placeables(){return[]}}class CoC7Menu{static getButtons(controls){canvas.coc7gmtools=new CoC7MenuLayer;const isKeeper=game.user.isGM,showHiddenDevMenu=game.settings.get("CoC7","hiddendevmenu");controls.push({name:"coc7menu",title:"CoC7.GmTools",layer:"coc7gmtools",icon:"game-icon game-icon-tentacle-strike",visible:isKeeper,tools:[{toggle:!0,icon:"fas fa-angle-double-up",name:"devphase",active:game.settings.get("CoC7","developmentEnabled"),title:"CoC7.DevPhase",onClick:async toggle=>await CoC7Utilities.toggleDevPhase(toggle)},{toggle:!0,icon:"fas fa-user-edit",name:"charcreate",active:game.settings.get("CoC7","charCreationEnabled"),title:"CoC7.CharCreationMode",onClick:async toggle=>await CoC7Utilities.toggleCharCreation(toggle)},{button:!0,icon:"fas fa-user-plus",name:"actor-import",title:"CoC7.ActorImporter",onClick:async()=>await CoC7ActorImporterDialog.create()},{button:!0,icon:"fas fa-user-check",name:"investigator-wizard",title:"CoC7.InvestigatorWizard.Title",onClick:async()=>await CoC7InvestigatorWizard.create()},{toggle:!0,icon:"fas fa-certificate",class:"xp_toggle",name:"xptoggle",active:game.settings.get("CoC7","xpEnabled"),title:"CoC7.toggleXP",onClick:async toggle=>await CoC7Utilities.toggleXPGain(toggle)},{button:!0,icon:"game-icon game-icon-card-joker",name:"fakeroll",title:"CoC7.FakeRoll",onClick:CoC7Chat.fakeRollMessage},{button:!0,icon:"fas fa-moon",name:"startrest",title:"CoC7.startRest",onClick:async()=>await CoC7Utilities.getTarget()}]}),showHiddenDevMenu&&(canvas.coc7DevTools=new CoC7MenuLayer,controls.push({name:"coc7DevMenu",title:"Dev tools. If you don't know what it is, you don't need it and you shouldn't use it !!",layer:"coc7DevTools",icon:"game-icon game-icon-police-badge",visible:isKeeper,tools:[{toggle:!0,icon:"game-icon game-icon-dice-fire",name:"alwaysCrit",active:game.CoC7.dev.dice.alwaysCrit,title:"All rolls will crit",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=!1,game.CoC7.dev.dice.alwaysCrit=toggle}},{toggle:!0,icon:"game-icon game-icon-fire-extinguisher",name:"alwaysFumble",active:game.CoC7.dev.dice.alwaysFumble,title:"All rolls will fumble",onClick:toggle=>{game.CoC7.dev.dice.alwaysFumble=toggle,game.CoC7.dev.dice.alwaysCrit=!1}}]}))}static renderControls(app,html,data){const isKeeper=game.user.isGM,keeperMenu=html.find(".game-icon-tentacle-strike").parent();keeperMenu.addClass("coc7-menu"),isKeeper&&keeperMenu.after('<li class="scene-control coc7-menu coc7-create-link" title="'+game.i18n.localize("CoC7.CreateLink")+'"><i class="fas fa-link"></i></li>'),keeperMenu.after('<li class="scene-control coc7-menu coc7-dice-roll" title="'+game.i18n.localize("CoC7.RollDice")+'"><i class="game-icon game-icon-d10"></i></li>'),html.find(".coc7-menu.coc7-dice-roll").click((event=>CoC7Utilities.rollDice(event))),html.find(".coc7-menu.coc7-create-link").click((event=>CoC7ContentLinkDialog.create(event)))}}class CoC7Canvas{static get COC7_TYPES_SUPPORTED(){return["CoC7Link","locator","getToken"]}static async onDropSomething(canvas,data){if(data.type&&CoC7Canvas.COC7_TYPES_SUPPORTED.includes(data.type)){const gridSize=canvas.scene.grid.size,x=data.x-gridSize/2,y=data.y-gridSize/2,height=gridSize,width=gridSize;let dropTargetTokens=canvas.tokens.placeables.filter((obj=>{const c=obj.center;return Number.between(c.x,x,x+width)&&Number.between(c.y,y,y+height)}));switch(dropTargetTokens.length||(dropTargetTokens=canvas.tokens.controlled),data.type){case"CoC7Link":if(data.check===CoC7Link.CHECK_TYPE.EFFECT){if(dropTargetTokens.length)for(const token of dropTargetTokens)CoC7Link._onLinkActorClick(token.actor,data)}else dropTargetTokens.length?CoC7Link.toWhisperMessage(data,dropTargetTokens.filter((t=>t.actor.owners.length)).map((t=>t.actor))):CoC7Link.toWhisperMessage(data,game.users.players.filter((u=>!!u.character)).map((u=>u.character)));break;case"getToken":void 0!==data.appId&&"string"==typeof data.callBack&&void 0!==ui.windows[data.appId]&&"function"==typeof ui.windows[data.appId][data.callBack]&&ui.windows[data.appId][data.callBack](dropTargetTokens);break;default:if(data.docUuid&&data.callBack){const doc=CoC7Utilities.SfromUuid(data.docUuid);if(doc[data.callBack]&&"function"==typeof doc[data.callBack])try{data.scene=canvas.scene.uuid,doc[data.callBack](data)}catch(error){console.warn(error.message)}}}}}}class CoC7SettingsDirectory extends Settings{activateListeners(html){super.activateListeners(html),game.user.isGM&&(html.find("#settings-game").append('<button class="trigger-data-migration"><i class="fas fa-wrench"></i> '+game.i18n.localize("CoC7.Migrate.TriggerButton")+"</button>"),html.find("#settings-documentation").append('<button class="trigger-system-manual"><i class="fas fa-books"></i> '+game.i18n.localize("CoC7.System.Documentation")+"</button>"),html.find(".trigger-data-migration").click((()=>{new Dialog({title:game.i18n.localize("CoC7.Migrate.TriggerTitle"),content:game.i18n.localize("CoC7.Migrate.TriggerContents"),buttons:{migrate:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Migrate.TriggerRestart"),callback:async()=>{await game.settings.set("CoC7","systemUpdateVersion",0),window.location.reload()}},close:{icon:'<i class="fas fa-ban"></i>',label:game.i18n.localize("Cancel"),callback:()=>{}}},default:"close"},{}).render(!0)})),html.find(".trigger-system-manual").click((async()=>{(await game.packs.get("CoC7.system-doc").getDocument(CONFIG.CoC7.Manual))?.sheet.render(!0)})))}}class CoC7CompendiumDirectory extends CompendiumDirectory{activateListeners(html){super.activateListeners(html);let translated=!1;if("en"===game.i18n.lang)translated=!0;else if(void 0!==game.babele)for(const v of Object.values(game.babele.modules))v.lang===game.i18n.lang&&(translated=!0);translated||(html.find("footer.directory-footer").append('<a class="compendium-translation" title="'+game.i18n.localize("CoC7.HowToTranslateTitle")+'">'+game.i18n.localize("CoC7.HowToTranslateTitle")+"</a>"),html.find(".compendium-translation").click((()=>{const message="<p>"+game.i18n.localize("CoC7.HowToTranslateWarning")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallBabele")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateInstallTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateEnableTranslation")+"</p><p>"+game.i18n.localize("CoC7.HowToTranslateNoTranslation")+"</p>";new Dialog({title:game.i18n.localize("CoC7.HowToTranslateTitle"),content:message,buttons:{},default:"close"},{}).render(!0)})))}}class CoC7ActorDirectory extends ActorDirectory{activateListeners(html){super.activateListeners(html);let allowWizard=game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole;if(!allowWizard){const allowed=game.settings.get("CoC7","InvestigatorWizardQuantity");if(allowed>0){allowWizard=game.actors.filter((a=>[a.ownership.default,a.ownership[game.user.id]??CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE].includes(CONST.DOCUMENT_OWNERSHIP_LEVELS.OWNER))).length<allowed}}allowWizard&&(html.find("footer.directory-footer").append('<a class="investigator-wizard">'+game.i18n.localize("CoC7.InvestigatorWizard.Title")+"</a>"),html.find(".investigator-wizard").click((()=>{CoC7InvestigatorWizard.create()}))),game.user.role>=CONST.USER_PERMISSIONS.ACTOR_CREATE.defaultRole&&(html.find("footer.directory-footer").append('<a class="actor-import">'+game.i18n.localize("CoC7.ActorImporter")+"</a>"),html.find(".actor-import").click((()=>{CoC7ActorImporterDialog.create()})))}}class CoC7DecaderDSNFaces{construtor(){this.selected=""}setFaces(){let selected=game.user.getFlag("dice-so-nice","appearance")?.global.system;if(selected!==this.selected){let data,destination,sourceDie=game.dice3d.DiceFactory.systems[selected]?.dice.find((d=>"d100"===d.type));void 0===sourceDie&&(sourceDie=game.dice3d.DiceFactory.systems.standard.dice.find((d=>"d100"===d.type)),selected="standard"),void 0!==sourceDie&&(destination=game.dice3d.DiceFactory.systems.standard.dice.findIndex((d=>"dt"===d.type)),data=Object.assign({},sourceDie),data.type="dt",game.dice3d.DiceFactory.systems.standard.dice[destination]=Object.assign(sourceDie.constructor.prototype,data)),this.selected=selected}}}class CoC7Spell extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/pentagram-rose.svg"),super(data,context),this.context=context}async cast(){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));const costs=this.system.costs,losses=[];let convertSurplusIntoHitPoints;if(costs.magicPoints=CoC7Utilities.isFormula(costs.magicPoints)?(await new Roll(costs.magicPoints).roll({async:!0})).total:parseInt(costs.magicPoints),costs.magicPoints&&costs.magicPoints>this.actor.system.attribs.mp.value&&(convertSurplusIntoHitPoints=await new Promise((resolve=>{const convertedHitPoints=costs.magicPoints-this.actor.system.attribs.mp.value,convertedMagicPoints=costs.magicPoints-convertedHitPoints,data={title:" ",content:game.i18n.format("CoC7.NotEnoughMagicPoints",{actorMagicPoints:this.actor.system.attribs.mp.value,convertedHitPoints,convertedMagicPoints,originalMagicPoints:costs.magicPoints,spell:this.name}),buttons:{cancel:{icon:'<i class="fas fa-times"></i>',label:game.i18n.localize("CoC7.Cancel"),callback:()=>resolve(!1)},proceed:{icon:'<i class="fas fa-check"></i>',label:game.i18n.localize("CoC7.Proceed"),callback:()=>(costs.hitPoints=convertedHitPoints,costs.magicPoints=convertedMagicPoints,resolve(!0))}},default:"cancel",classes:["coc7","dialog"]};new Dialog(data).render(!0)})),!convertSurplusIntoHitPoints))return;for(const[key,value]of Object.entries(costs))value&&0!==Number(value)&&losses.push(await this.resolveLosses(key,value));const description=this.system.description.value,html=await renderTemplate("systems/CoC7/templates/items/spell/chat.html",{description,losses});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:this.name,content:html})}async resolveLosses(characteristic,value){let characteristicName,loss;loss=CoC7Utilities.isFormula(value)?(await new Roll(value).roll({async:!0})).total:parseInt(value);const actorData=this.actor.system;switch(characteristic){case"hitPoints":characteristicName=game.i18n.localize("CoC7.HitPoints"),this.actor.dealDamage(loss,{ignoreArmor:!0});break;case"sanity":characteristicName=game.i18n.localize("CoC7.SanityPoints"),this.grantSanityLoss(loss);break;case"magicPoints":characteristicName=game.i18n.localize("CoC7.MagicPoints"),this.actor.setMp(actorData.attribs.mp.value-loss);break;case"power":characteristicName=game.i18n.localize("CHARAC.Power"),this.actor.update({"system.characteristics.pow.value":actorData.characteristics.pow.value-loss})}return{characteristicName,loss}}async grantSanityLoss(value){const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.CastingSpell",{spell:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=value;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async update(data,context){if(void 0!==this.context.parent&&void 0!==this.context.bookId){let item,book;null===this.context.parent?(item=game.items.get(this.context.bookId),book=item.toObject()):book=this.context.parent.items.get(this.context.bookId).toObject();for(let i=0,im=book.system.spells.length;i<im;i++)book.system.spells[i]._id===this.id&&(book.system.spells[i]=mergeObject(book.system.spells[i],data));null===this.context.parent?(await item.update({"system.spells":book.system.spells}),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)):(await this.context.parent.updateEmbeddedDocuments("Item",[book]),this.sheet.object=new CoC7Spell(book.system.spells.find((spell=>spell._id===this.id)),this.context)),this.sheet.render(!0)}else await super.update(data,context)}}class CoC7Book extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/secret-book.svg"),super(data,context)}static convertDifficulty(difficulty){switch(difficulty){case"hard":return CoC7Check.difficultyLevel.hard;case"extreme":return CoC7Check.difficultyLevel.extreme;case"critical":return CoC7Check.difficultyLevel.critical;case"unreadable":return CoC7Check.difficultyLevel.impossible;default:return CoC7Check.difficultyLevel.regular}}async addSpells(spells){const collection=this.system.spells?duplicate(this.system.spells):[];for(const spell of spells)collection.push(spell);return await this.update({"system.spells":collection})}async spellDetail(index){const isKeeper=game.user.isGM,data=this.system.spells[index],parent=this.actor?this.actor:null,spell=new CoC7Spell(data,{parent,bookId:this.id});if(isKeeper||spell.system.learned)return await spell.sheet.render(!0)}async attemptInitialReading(){const difficulty=CoC7Book.convertDifficulty(this.system.difficultyLevel),language=this.system.language,skill=this.actor?.getSkillsByName(language);if(skill){if(0===skill.length)return ui.notifications.error(game.i18n.format("CoC7.UnknownLanguage",{actor:this.actor.name}));{const check=new CoC7Check;return check.actor=this.actor,check.skill=skill[0].id,check.difficulty=difficulty,check.parent=this.uuid,check.context="INITIAL_READING",check.flavor=game.i18n.format("CoC7.ReadAttempt",{book:this.name,language,difficulty:this.system.difficultyLevel}),await check.roll(),await check.toMessage()}}return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"))}async changeProgress(mode,value){if(!this.isOwned&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading&&"reset"!==mode)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));if(!this.system.type.mythos&&"reset"!==mode)return ui.notifications.error(game.i18n.localize("CoC7.NotMythosTome"));const necessary=this.system.study.necessary;let fullStudy=this.system.fullStudy,progress=this.system.study.progress;if(isNaN(progress))return await this.update({"system.study.progress":0});if(value&&progress>value)return await this.update({"system.fullStudy":++fullStudy,"system.study.progress":value}),await this.completeFullStudy();if("increase"===mode&&progress<necessary){if(!1!==await this.checkExhaustion())return;if(await this.update({"system.study.progress":++progress}),progress===necessary)return await this.update({"system.fullStudy":++fullStudy}),await this.grantFullStudy()}else if("decrease"===mode&&progress>0)return await this.update({"system.study.progress":--progress})}async checkExhaustion(){const actorMythosValue=this.actor?.cthulhuMythos,mythosRating=this.system.mythosRating;if(this.system.initialReading)return actorMythosValue>=mythosRating&&(await this.update({"system.study.progress":this.system.study.necessary}),ui.notifications.warn(game.i18n.format("CoC7.BookHasNothingMoreToTeach",{actor:this.actor.name,book:this.name})))}async grantFullStudy(){if(!this.system.type.mythos)return;if(!1!==await this.checkExhaustion())return;const actorMythosValue=this.actor.cthulhuMythos,developments=[],mythosRating=this.system.mythosRating;let mythosFinal=this.system.gains.cthulhuMythos.final;if(actorMythosValue+mythosFinal>mythosRating)for(let index=1;index<=mythosFinal;index++)actorMythosValue+mythosFinal-index<=mythosRating&&(mythosFinal-=index);return developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythosFinal)},{name:this.system.language,gain:"development"}),await this.grantSkillDevelopment(developments),await this.rollSanityLoss(),await this.update({"system.fullStudies":++this.system.fullStudies})}async grantInitialReading(){if(this.system.initialReading)return;const developments=[],mythos={gains:this.system.gains.cthulhuMythos.initial,type:this.system.type.mythos},occult={gains:this.system.gains.occult,type:this.system.type.occult},other_gains=this.system.gains.others,other_type=this.system.type.other;if(mythos.type&&mythos.gains&&developments.push({name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.cthulhu-mythos"),gain:parseInt(mythos.gains)}),occult.type&&occult.gains&&developments.push({name:game.i18n.localize("CoC7.Occult"),gain:parseInt(occult.gains)}),other_type)for(const skill of other_gains){const pattern=skill.name.match(/^(.+) \((.+)\)$/);pattern&&(skill.specialization=pattern[1],skill.name=pattern[2]),"development"!==skill.value&&(skill.value=(await new Roll(skill.value).roll({async:!0})).total),skill.value&&developments.push({name:skill.name,gain:skill.value,specialization:skill.specialization})}return await this.grantSkillDevelopment(developments),(mythos.type||occult.type)&&this.system.sanityLoss&&await this.rollSanityLoss(),await this.update({"system.initialReading":!0})}async grantSpellLearning(spelllearned){for(const spell of this.system.spells)if(spell._id===spelllearned._id){spell.system.learned=!0;await this.actor.items.find((item=>"spell"===item.type&&item.name===spelllearned.name))?ui.notifications.warn(game.i18n.format("CoC7.SpellAlreadyLearned",{spell:spelllearned.name,book:this.name})):spelllearned.system.learned=!0;break}await this.update({"system.spells":this.system.spells}),spelllearned.system.learned&&(ui.notifications.info(game.i18n.format("CoC7.SpellSuccessfullyLearned",{spell:spelllearned.name,book:this.name})),await this.actor.createEmbeddedDocuments("Item",[duplicate(spelllearned)]))}async grantSkillDevelopment(developments){if(0!==developments.length){for(const development of developments){if(!development.gain)continue;let skill=await this.actor.getSkillsByName(development.name);if(0===skill.length){const existingSkill=await game.items.find((item=>"skill"===item.type&&item.name===development.name));existingSkill?skill=await this.actor.createEmbeddedDocuments("Item",[duplicate(existingSkill)]):(skill=await this.actor.createSkill(development.name,0),development.specialization&&await skill[0].update({"system.properties.special":!0,"system.specialization":development.specialization}))}if(skill=skill[0],"development"===development.gain)await skill.flagForDevelopement();else{if(skill.value+development.gain>99)for(let index=1;index<=development.gain;index++)skill.value+development.gain-index<=99&&(development.gain-=index,await skill.increaseExperience(development.gain));await skill.increaseExperience(development.gain)}}return this.showDevelopmentsTable(developments)}}async redoFullStudy(){return await this.update({"system.study.progress":0}),await this.update({"system.study.necessary":2*this.system.study.necessary})}async rollSanityLoss(){const value=this.system.sanityLoss;if(!value||""===value)return;const template=SanCheckCard.template;let html=await renderTemplate(template,{});const message=await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.ReadingMythosTome",{book:this.name}),content:html}),card=await message.getHTML();if(void 0!==card.length&&1===card.length){const sanityLoss=(await new Roll(value).roll({async:!0})).total;html=card.find(".chat-card")[0],html.dataset.object=escape(JSON.stringify({actorKey:this.actor.id,fastForward:!1,sanData:{sanMin:sanityLoss,sanMax:sanityLoss}}));const sanityCheck=SanCheckCard.getFromCard(html);await sanityCheck.bypassRollSan(),await sanityCheck.rollSanLoss(),sanityCheck.updateChatCard()}}async showDevelopmentsTable(developments){for(const development of developments)development.specialization&&(development.name=`${development.specialization} (${development.name})`),"development"===development.gain?development.gain=game.i18n.localize("CoC7.MarkedForDevelopment"):development.gain=`+${development.gain} ${game.i18n.localize("CoC7.Points")}`;const html=await renderTemplate("systems/CoC7/templates/items/book/development.html",{developments});return await ChatMessage.create({user:game.user.id,speaker:ChatMessage.getSpeaker({actor:this.actor}),flavor:game.i18n.format("CoC7.GainsForReading",{book:this.name}),content:html})}async attemptSpellLearning(id){if(!this.isOwned)return ui.notifications.error(game.i18n.localize("CoC7.NotOwned"));if(!this.system.initialReading)return ui.notifications.error(game.i18n.format("CoC7.InitialReadingNeeded",{actor:this.actor.name,book:this.name}));const spell=this.system.spells.find((spell=>spell._id===id));if(spell){const check=new CoC7Check;check.actor=this.actor,check.difficulty=CoC7Check.difficultyLevel.hard,check.parent=this.uuid,check.flavor=game.i18n.format("CoC7.LearnSpellAttempt",{book:this.name,spell:spell.name}),check.context="SPELL_LEARNING",check.spell=spell,await check.rollCharacteristic("int"),await check.toMessage()}}async updateRoll(roll){const check=CoC7Check.fromRollString(roll);if(check.passed){if("INITIAL_READING"===check.context)return await this.grantInitialReading();if("SPELL_LEARNING"===check.context)return await this.grantSpellLearning(check.spell)}}}const ECC_CLASS="enhanced-chat-card",PERMISSION_TYPE_GM="gm",PERMISSION_TYPE_NOT_GM="!gm",PERMISSION_TYPE_SPEAKER="speaker",PERMISSION_TYPE_USER="user",PERMISSION_TYPE_BLACKLIST="blacklist",STATE_ON="switched-on",STATE_OFF="switched-off";async function updateMessage(messageId,newContent){const chatMessage=game.messages.get(messageId);await chatMessage.update({content:newContent})}async function GMUpdate(data,options,cardClassName,messageId=void 0){const card=await EnhancedChatCard.fromData(data,options,cardClassName,messageId);return await card.GMUpdate(),card.toObject()}async function advise(){}class EnhancedChatCardLib{constructor(){this.types=new Map,this.socket=null}static injectCSS(){let style=$("head").find("style");style?.length||($("head").append($('<style  type="text/css"></style>')),style=$("head").find("style")),style.append(".ecc-restricted {color: red}\n    .ecc-restricted:hover {cursor: not-allowed}")}static set socket(x){game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.socket=x}static get socket(){if(game.enhancedChatCardsLib){if(game.enhancedChatCardsLib.socket)return game.enhancedChatCardsLib.socket;ui.notifications.error("ECC no socket")}else ui.notifications.error("ECC not Initialized")}static get types(){return game.enhancedChatCardsLib||(game.enhancedChatCardsLib=new EnhancedChatCardLib),game.enhancedChatCardsLib.types}static register(cardConstructors){cardConstructors.forEach((cardConstructor=>{EnhancedChatCardLib.types.get(cardConstructor.name)||EnhancedChatCardLib.types.set(cardConstructor.name,cardConstructor)}))}}function setByPath(obj,path,value){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++)o[parts[i]]||(o[parts[i]]={}),o=o[parts[i]];o[parts[parts.length-1]]=value}function getByPath(obj,path){const parts=path.split(".");let o=obj;if(parts.length>1)for(let i=0;i<parts.length-1;i++){if(!o[parts[i]])return;o=o[parts[i]]}return o[parts[parts.length-1]]}class EnhancedChatCard{constructor(data={},options={}){this.data=data,this.data.flags||(this.data.flags={}),this._options=options}async initialize(){}get options(){return mergeObject(this.constructor.defaultOptions,this._options)}set options(x){this._options=x}get template(){return this.options.template}get cssClasses(){return this.options.classes?.join(" ")}get speaker(){return this.options.ooc?game.user:this.options.speaker&&ChatMessage.getSpeakerActor(this.options.speaker)?ChatMessage.getSpeakerActor(this.options.speaker):game.user}async getData(){return{card:this,flags:this.flags,data:this.toObject(),options:this.options,css:this.cssClasses,user:game.user,speaker:this.speaker}}toObject(){if(!this.data)return;const data={};for(const k of Object.keys(this.data)){const v=this.data[k];data[k]=v instanceof Object?v.toObject?v.toObject():deepClone(v):v}return data}async toMessage(optionnalChatData={}){await this.initialize();const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$(html)[0];this.options.attachObject&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes);const speaker=this.options.speaker&&!this.options.ooc?ChatMessage.getSpeaker(this.options.speaker):{},chatData=foundry.utils.mergeObject({user:game.user.id,speaker,flavor:game.i18n.localize(this.options.title),content:htmlCardElement.outerHTML},optionnalChatData);["gmroll","blindroll"].includes(this.rollMode)&&(chatData.whisper=ChatMessage.getWhisperRecipients("GM")),"selfroll"===this.rollMode&&(chatData.whisper=[game.user.id]),"blindroll"===this.rollMode&&(chatData.blind=!0),ChatMessage.create(chatData).then((msg=>msg))}async updateChatCard({attachObject=!0}={}){if(this.options.compute&&await this.localCompute(),this.options.GMUpdate&&await this.ExecuteGMUpdate(),this.messageId){const data=await this.getData(),html=await renderTemplate(this.template,data),htmlCardElement=$.parseHTML(html)[0];attachObject&&!this.data.EEC_ACTION?.detachData&&(htmlCardElement.dataset.object=escape(this.objectDataString)),htmlCardElement.dataset.eccClass=this.constructor.name,htmlCardElement.classList.add(...this.options.classes),game.enhancedChatCardsLib.socket.executeAsGM("updateMessage",this.messageId,htmlCardElement.outerHTML)}else this.toMessage()}async activateListeners(html){html.on("change","input,select,textarea",this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} .ecc-switch`,this._onToggle.bind(this)),html.on("click",`.${ECC_CLASS} .submit`,this._onSubmit.bind(this)),html.on("focusout",`.${ECC_CLASS} input`,this._onChange.bind(this)),html.on("click",`.${ECC_CLASS} button`,this._onButton.bind(this)),html.on("keydown",`.${ECC_CLASS} form`,this._onKey.bind(this)),html.find("[data-ecc-visibility]").each((async(i,el)=>await this.setVisibility(el))),html.find("[data-ecc-permissions]").each((async(i,el)=>await this.setPermission(el))),html.find(`.${ECC_CLASS} .ecc-switch`).each(((i,el)=>this.setState(el))),html.find(`.${ECC_CLASS} input[type="radio"]`).each(((i,el)=>this.setRadioState(el)))}setState(element){if(element&&(element.dataset.flag&&element.classList.add(this.flags[element.dataset.flag]?STATE_ON:STATE_OFF),element.dataset.name)){const value=getByPath(this,element.dataset.name);element.classList.add(value?STATE_ON:STATE_OFF)}}setRadioState(element){if(!element||!element.name)return;const splited=element.name.split(".");"data"===splited[0].toLowerCase()&&this.data&&void 0!==this.data[splited[1]]&&this.data[splited[1]]===element.value&&(element.checked=!0)}async setVisibility(element){if(!element.dataset.eccVisibility)return;await this.hasPerm(element.dataset.eccVisibility,!0)||(element.style.display="none")}async setPermission(element){if(!element.dataset.eccPermissions)return;await this.hasPerm(element.dataset.eccPermissions)||(element.classList.add("ecc-restricted"),$(element).is("input")&&("range"===element.type?$(element).attr("disabled",!0):$(element).attr("readonly",!0)),$(element).is("select")&&$(element).attr("disabled",!0))}async hasPerm(restrictedTo,vision=!1){if(!restrictedTo.length)return!0;let permissionsArray=restrictedTo.split(" ");const whiteList=!permissionsArray.includes(PERMISSION_TYPE_BLACKLIST);if(whiteList||(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_BLACKLIST))),game.user.isGM){if(!vision)return!0;if(permissionsArray.includes(PERMISSION_TYPE_GM))return whiteList;if(permissionsArray.includes(PERMISSION_TYPE_NOT_GM))return!whiteList}if(permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_GM)),permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_NOT_GM)),permissionsArray.includes(PERMISSION_TYPE_USER)){if(this.message.isAuthor)return whiteList;permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_USER))}if(permissionsArray.includes(PERMISSION_TYPE_SPEAKER)){const speaker=this.message.data.speaker;if(speaker.token&&speaker.scene){const actor=await fromUuid(`Scene.${speaker.scene}.Token.${speaker.token}`);if(actor&&actor.isOwner)return whiteList}else if(speaker.actor){const actor=game.actors.get(speaker.actor);if(actor&&actor.isOwner)return whiteList}permissionsArray=permissionsArray.filter((e=>e!==PERMISSION_TYPE_SPEAKER))}if(permissionsArray.length)for(let i=0;i<permissionsArray.length;i++){const uuid=permissionsArray[i];let actor=await fromUuid(uuid);if(actor||(actor=game.actors.get(uuid)),actor)return actor.isOwner;ui.notifications.error(`Unable to find actor ${uuid}`)}return!whiteList}static async bindListeners(html){const htmlCardElement=html[0].querySelector(`.${ECC_CLASS}`);if(!htmlCardElement)return;const card=await EnhancedChatCard.fromHTMLCardElement(htmlCardElement);card&&card.activateListeners(html)}get flags(){return this.data.flags}async assignObjects(){}async localCompute(){}async GMUpdate(){}async ExecuteGMUpdate(){const newData=await game.enhancedChatCardsLib.socket.executeAsGM("GMUpdate",this.toObject(),this._options,this.constructor.name,this.messageId);this.data=newData,await this.assignObjects()}async _onButton(event){event.preventDefault();const target=event.currentTarget;target.style.display="none";const action=target.dataset.action;let formUpdate,actionUpdate=!1;const card=target.closest(`.${ECC_CLASS}`);card?formUpdate=this._update(card):console.error(`Could not find a EEC class for this card: ${this.constructor.name}`);const originalDisplayStyle=target.style.display;(action||(console.warn("no action associated with this button"),formUpdate))&&(this[action]||(console.warn(`no ${action} action found for this card`),formUpdate))&&(this[action]&&(actionUpdate=await this[action]({event,updateCard:!1})),formUpdate||actionUpdate?await this.updateChatCard():target.style.display=originalDisplayStyle)}_onKey(event){return"Enter"===event.key&&this._onSubmit(event),"Enter"!==event.key}_onChange(event){if(this.options.submitOnChange)return this._onSubmit(event)}_onSubmit(event){const target=event.currentTarget;if("BUTTON"===target.tagName&&"action"in target.dataset)return;event.preventDefault();const card=target.closest(`.${ECC_CLASS}`);if(!card)return;this._update(card)&&this.updateChatCard()}_update(card){const forms=card.querySelectorAll("form");let updates=!1;for(let i=0;i<forms.length;i++){const form=forms[i],data=new FormDataExtended(form).object;for(const[key,value]of Object.entries(data)){getByPath(this,key)!==value&&(setByPath(this,key,value),updates=!0)}}return updates}get message(){return this._message?this._message:this._messageId?game.messages.get(this._messageId):void 0}set message(x){this._message=x}get messageId(){return this._messageId?this._messageId:this._message?this._message.id:void 0}set messageId(x){this._messageId=x}static get defaultOptions(){return{attachObject:!0,classes:[ECC_CLASS],exclude:[],excludeStartWith:"_",submitOnChange:!0,speaker:ChatMessage.getSpeaker(),ooc:!1,compute:!0,GMUpdate:!1}}get objectDataString(){const saveData={data:this.data,options:this._options};return JSON.stringify(saveData,((key,value)=>{if(null!==value&&!this.options.exclude?.includes(key)&&!key.startsWith(this.options.excludeStartWith))return value}))}get rollMode(){return this._rollMode||(this._rollMode=game.settings.get("core","rollMode")),this._rollMode}set rollMode(x){!1===x&&(this._rollMode=game.settings.get("core","rollMode")),this._rollMode=x}static async fromMessageId(messageId){const message=game.messages.get(messageId);if(!message)return;const card=await this.fromMessage(message);return card.messageId=messageId,card}static async fromMessage(message){const cardElement=$(message.data.content)[0];if(!cardElement)return;const card=await this.fromHTMLCardElement(cardElement);return card.message=message,card}static async fromHTMLCardElement(htmmlCard){if(!htmmlCard)return;if(!htmmlCard.dataset.eccClass)return;if(!htmmlCard.dataset.object)return;const cardData=JSON.parse(unescape(htmmlCard.dataset.object)),message=htmmlCard.closest(".message"),messageId=message?.dataset?.messageId;return await this.fromData(cardData.data,cardData.options,htmmlCard.dataset.eccClass,messageId)}static async fromData(data,options,cardClassName,messageId=void 0){const CardClass=game.enhancedChatCardsLib.types.get(cardClassName);if(!CardClass)return void console.error(`Unknown chat card type: ${cardClassName}`);const card=new CardClass(data,options);return messageId&&(card.messageId=messageId),await card.assignObjects(),card}setData(name){(name||"string"===$.type(name))&&setByPath(this,name,!0)}unsetData(name){(name||"string"===$.type(name))&&setByPath(this,name,!1)}toggleData(name){if(!name&&"string"!==$.type(name))return;setByPath(this,name,!getByPath(this,name))}async _onToggle(event){event.preventDefault();const target=event.currentTarget;if("action"in target.dataset)return this._onButton(event);if(target&&target.classList.contains("gm-select-only")&&!game.user.isGM)return;const name=target.dataset.flag?`data.flags.${target.dataset.flag}`:target.dataset.name;if(!name)return;const toggle=target.closest(".ecc-radio");if(toggle){const buttons=toggle.querySelectorAll(".ecc-switch");for(const b of buttons){const bName=b.dataset.flag?`data.flags.${b.dataset.flag}`:b.dataset.name;this.unsetData(bName)}this.setData(name)}else this.toggleData(name);const card=target.closest(`.${ECC_CLASS}`);this.options.submitOnChange&&card&&this._update(card),await this.updateChatCard()}}class _participant{constructor(data={}){this.data=data}_fetch(){if(!this._doc&&this.data.docUuid&&(this._doc=CoC7Utilities.getDocumentFromKey(this.data.docUuid)),!this._actor)if(this._doc)switch(this._doc.constructor?.name){case"TokenDocument":this._actor=this._doc.actor;break;case"CoCActor":this._actor=this._doc}else this._actor=CoC7Utilities.getActorFromKey(this.data.docUuid)}get actor(){return this._fetch(),this._actor}get isActor(){return this.hasActor||this.hasVehicle}get isActive(){return this.data.active||!1}get key(){return this.hasVehicle?this.vehicle.actorKey:this.hasActor?this.actor.actorKey:void 0}get icon(){return this.isActor?this.hasVehicle?this.vehicle.img:this.hasActor?this.actor.img:void 0:"systems/CoC7/assets/icons/question-circle-regular.svg"}get driver(){return this._driver||(this._driver=CoC7Utilities.getActorFromKey(this.data.docUuid)),this._driver}get vehicle(){return this.data.vehicleKey&&(this._vehicle=chatHelper.getActorFromKey(this.data.vehicleKey)),this._vehicle}get hasActor(){return!!this.actor}get hasVehicle(){return!!this.vehicle}get name(){return this.hasVehicle?this.vehicle.name:this.hasActor?this.actor.name:this.data.name||void 0}get mov(){return this.data.mov||(this.hasVehicle?this.data.mov=this.vehicle.mov:this.hasActor&&(this.data.mov=this.actor.mov)),this.data.mov&&(isNaN(Number(this.data.mov))?(this.data.hasValidMov=!1,this.data.mov=void 0):this.data.hasValidMov=!0),this.data.mov}get uuid(){return this.data.uuid}get hasMaxBonusDice(){return this.bonusDice>=2}get bonusDice(){return isNaN(this.data.bonusDice)||this.data.bonusDice<0||this.data.bonusDice>2?0:this.data.bonusDice}set bonusDice(x){isNaN(x)?ui.notifications.error("Bonus dice can Only be a number"):x>2?ui.notifications.error("Max 2 bonus dice"):x<0?ui.notifications.error("No negativ bonus dice"):this.data.bonusDice=x}get hp(){return this.data.hp||(this.data.hp=0),this.actor&&(this.data.hp=this.actor.hp),this.data.hp}set hp(x){this.data.hp=x,this.actor&&this.actor.setHp(x)}addBonusDice(){this.data.bonusDice>=2?ui.notifications.error("Already have max bonus dice"):this.data.bonusDice+=1}removeBonusDice(){this.data.bonusDice<=0?ui.notifications.error("Already have 0 bonus dice"):this.data.bonusDice-=1}resetBonusDice(){this.data.bonusDice=0}get hasBonusDice(){return this.hasOneBonusDice||this.hasTwoBonusDice}get hasOneBonusDice(){return this.bonusDice>=1}get hasTwoBonusDice(){return this.bonusDice>=2}get canAssist(){return this.assist?.length>0}get canBeCautious(){return!this.hasMaxBonusDice}get assist(){return this.data.assist||[]}get dex(){return this.data.dex||(this.hasVehicle&&this.hasDriver?this.data.dex=this.driver.characteristics.dex.value:this.hasActor&&(this.data.dex=this.actor.characteristics.dex.value)),this.data.dex&&(isNaN(Number(this.data.dex))?(this.data.hasValidDex=!1,this.data.dex=0):this.data.hasValidDex=!0),this.data.dex}get hasAGunReady(){return this.data.hasAGunReady||!1}get initiative(){let init=this.dex;return this.hasAGunReady&&(init+=50),init}get isChaser(){return!!this.data.chaser}get isPrey(){return!this.isChaser}get isValid(){return this.hasValidDex&&this.hasValidMov}get hasValidDex(){return!isNaN(Number(this.data.dex))}get hasValidMov(){return!isNaN(Number(this.data.mov))}get hasDriver(){return this.hasVehicle&&this.hasActor}get movAdjustment(){if(this.data.speedCheck?.rollDataString){const roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString);if(roll&&!roll.standby){if(roll.successLevel>=CoC7Check.successLevel.extreme)return 1;if(roll.failed)return-1}}return 0}get adjustedMov(){if(void 0!==this.mov&&!isNaN(Number(this.mov)))return Number(this.mov)+this.movAdjustment}get hasMovAdjustment(){return this.hasBonusMov||this.hasMalusMov}get hasBonusMov(){return this.data.movAdjustment>0}get hasMalusMov(){return this.data.movAdjustment<0}tooSlow(){this.data.excluded=!0}includeInChase(){this.data.excluded=!1,this.data.escaped=!1}escaped(){this.data.escaped=!0}set slowest(x){this.data.slowest=x}get slowest(){return this.data.slowest}set fastest(x){this.data.fastest=x}get fastest(){return this.data.fastest}calculateMovementActions(minMov){void 0===this.movementAction||void 0===this.adjustedMov||isNaN(minMov)?this.movementAction=0:this.movementAction=this.adjustedMov-minMov+1}set movementAction(x){this.data.movementAction=x}get movementAction(){return this.data.movementAction}set currentMovementActions(x){this.data.currentMovementActions=x}get currentMovementActions(){return this.data.currentMovementActions||0}get hasMaxMvtActions(){return this.currentMovementActions>=this.movementAction}get hasNoMvtActions(){return this.currentMovementActions<=0}addMovementActions(x=1){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}alterMovementActions(x){this.currentMovementActions+=x,this.currentMovementActions>this.movementAction&&(this.currentMovementActions=this.movementAction)}get movementActionArray(){const baseArray=Array(this.movementAction).fill("base");if(this.currentMovementActions>=0){for(let i=0;i<this.currentMovementActions;i++)baseArray[i]="base available";return baseArray}if(this.currentMovementActions<0){return Array(Math.abs(this.currentMovementActions)).fill("deficit").concat(baseArray)}}get cssClass(){const cssClasses=[];return this.isChaser?cssClasses.push("chaser"):cssClasses.push("prey"),this.data.excluded&&cssClasses.push("excluded","too_slow"),this.data.escaped&&cssClasses.push("escaped"),this.data.fastest&&cssClasses.push("fastest"),this.data.slowest&&cssClasses.push("slowest"),this.data.active&&cssClasses.push("active"),this.data.currentMovementActions<=0&&cssClasses.push("no-actions"),cssClasses.join(" ")}get speedCheck(){const check={};if(this.data.speedCheck?.name&&(check.name=this.data.speedCheck.name),this.data.speedCheck?.score&&(check.score=this.data.speedCheck.score),check.cssClasses="",this.data.speedCheck?.rollDataString&&(check.roll=CoC7Check.fromRollString(this.data.speedCheck.rollDataString),check.roll&&(check.roll.standby&&!check.roll.hasCard||(check.rolled=!0,check.inlineRoll=check.roll.inlineCheck.outerHTML,check.cssClasses+="rolled",check.roll.standby||(check.roll.successLevel>=CoC7Check.successLevel.extreme?check.modifierCss="upgrade":check.roll.failed&&(check.modifierCss="downgrade"),(check.roll.successLevel>=CoC7Check.successLevel.extreme||check.roll.failed)&&(check.hasModifier=!0))))),this.hasActor){check.options=[];for(const c of["con"]){const characteristic=this.actor.getCharacteristic(c);characteristic?.value&&check.options.push(characteristic.label)}for(const s of this.actor.driveSkills)check.options.push(s.name);for(const s of this.actor.pilotSkills)check.options.push(s.name);if(check.hasOptions=!!check.options.length,this.data.speedCheck?.id){let item=this.actor.find(this.data.speedCheck.id);if(!item){const gameItem=game.items.get(this.data.speedCheck.id);gameItem&&(item=this.actor.find(gameItem.name))}item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}else if(this.data.speedCheck?.name){const item=this.actor.find(this.data.speedCheck.name);item&&("item"===item.type&&"skill"===item.value.data?.type&&(check.ref=item.value,check.name=item.value.name,check.type="skill",check.isSkill=!0,check.refSet=!0,check.score=item.value.value),"characteristic"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="characteristic",check.isCharacteristic=!0,check.refSet=!0,check.score=item.value.value),"attribute"===item.type&&(check.ref=item.value,check.name=item.value.label,check.type="attribute",check.isAttribute=!0,check.refSet=!0,check.score=item.value.value))}}else if(this.data.speedCheck?.id){const item=game.items.get(this.data.speedCheck.id);item&&"skill"===item.data?.type&&(check.ref=item,check.name=item.name,check.type="skill",check.isSkill=!0,check.refSet=!1,check.score=item.base)}else this.data.speedCheck?.name&&this.data.speedCheck?.score&&(check.name=this.data.speedCheck.name,check.score=this.data.speedCheck.score,check.refSet=!1);return check.canBeRolled=!0,check.rolled||check.score||(check.cssClasses+=" invalid",check.canBeRolled=!1),check.isValid=check.rolled&&!isNaN(check.score),check}}function sortByRoleAndDex(a,b){return!a&&b?1:!b&&a?-1:a||b?b.chaser&&!a.chaser?1:a.chaser&&!b.chaser?-1:a.dex-b.dex:0}class ChaseObstacleCard extends EnhancedChatCard{static get defaultOptions(){const options=mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/chat/cards/chase-obstacle.html",GMUpdate:!0});return options.classes.push("obstacle-card"),options}async getData(){const data=await super.getData();if(data.status=[],data.strings={},data.displayActorOnCard=game.settings.get("CoC7","displayActorOnCard"),data.status.push({name:game.i18n.localize("CoC7.ActionCost")+` :${this.data.totalActionCost}`}),data.card.breakableObstacle=data.data.obstacle?.barrier&&data.data.obstacle.hasHitPoints,data.card.validCheck=!1,data.data.states?.obstacleDefined&&(data.data.obstacle.hazard||data.data.obstacle.barrier&&!data.data.obstacle.hasHitPoints)&&(data.data.states.tryToNegotiate=!0,data.data.states.tryToBreak=!1,data.data.states.breakOrNegotiateDefined=!0),this.participant?.actor?(data.skill=this.participant.actor.find(data.data.obstacle.checkName),data.checkOptions=this.chase.getActorSkillsAndCharacteristics(this.data.participantUuid),data.skill?(data.validCheck=!0,data.validSkill=!0):data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)):(data.checkOptions=this.chase.allSkillsAndCharacteristics,data.dummyActor=!0,data.data.obstacle.checkName&&data.data.checkThreshold&&(data.validCheck=!0)),data.data.bonusDice||(data.data.bonusDice=0),data.data.bonusDice<2&&data.data.totalActionCost<data.data.movementAction&&(data.canTakeCautiousApproach=!0),data.customWeapon=!1,"0"===this.data.weaponChoice&&(data.customWeapon=!0),data.validCheck){let checkName,value;data.skill?(checkName=data.skill.value.name,value=data.skill.value.value):(checkName=data.data.obstacle.checkName,value=data.data.checkThreshold),data.strings.checkRollRequest=game.i18n.format("CoC7.AskRoll",{name:checkName,value}),0!==data.data.bonusDice&&(data.data.bonusDice>0?data.strings.checkRollRequest+=` (+${data.data.bonusDice})`:data.strings.checkRollRequest+=` (${data.data.bonusDice})`)}if(data.data.states?.obstacleDefined){if(data.strings.obstacleDefined=game.i18n.format("CoC7.FacingObstacle",{type:data.data.obstacle.barrier?game.i18n.localize("CoC7.ABarrier"):game.i18n.localize("CoC7.AHazard")}),data.data.obstacle.name&&(data.strings.obstacleDefined+=` (${data.data.obstacle.name})`),data.data.states.canAskRoll=!0,data.data.obstacle.barrier&&(data.status.push({name:game.i18n.localize("CoC7.Barrier")}),data.data.obstacle.hasHitPoints&&data.status.push({name:game.i18n.localize("CoC7.Breakable")})),data.data.obstacle.hazard&&data.status.push({name:game.i18n.localize("CoC7.Hazard")}),this.data.states.tryToNegotiate&&(data.validCheck?data.validSkill||data.status.push({name:game.i18n.localize("CoC7.NoValidSkill"),css:"warning"}):(data.status.push({name:game.i18n.localize("CoC7.NoValidCheck"),css:"error"}),data.strings.EnterValueTitle=game.i18n.format("CoC7.SkillSelectBase",{name:data.data.obstacle.checkName}),data.data.checkThreshold||(data.data.states.canAskRoll=!1))),this.data.states.tryToBreak){let damageStatus=game.i18n.localize("CoC7.BreakDown");this.data.objects?.obstacleDamageRoll?.total&&(damageStatus+=` : ${this.data.objects.obstacleDamageRoll.total}`),data.status.push({name:damageStatus}),this.data.states.obstacleDamageRolled&&(this.data.objects?.obstacleDamageRoll?.total<=0?data.strings.obstacleDamage=game.i18n.localize("CoC7.NoDamageDealt"):(data.inlineDamageRoll=createInlineRoll(this.data.objects.obstacleDamageRoll)?.outerHTML,data.strings.obstacleDamage=game.i18n.format("CoC7.DamageDealt",{value:data.inlineDamageRoll})))}if(this.data.states.tryToNegotiate&&data.status.push({name:game.i18n.localize("CoC7.Negotiate")}),this.data.totalCautiousApproach){const cautiousStatus={name:game.i18n.localize("CoC7.Cautious"),css:""};this.data.totalCautiousApproach>1?(cautiousStatus.css="strong",data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingVeryCautious")):data.strings.cautiousApproachType=game.i18n.localize("CoC7.BeingCautious"),this.data.flags.consumeBonusDice&&(cautiousStatus.css+=" consume"),data.status.push(cautiousStatus)}this.data.objects?.check&&(this.data.obstacle.hazard&&(this.data.movePlayer=!0),this.data.objects.check.passed?(void 0===this.data.movePlayer&&(this.data.movePlayer=!0),data.strings.obstaclePassed=game.i18n.localize("CoC7.ObstaclePassed"),this.data.objects.check.luckSpent&&(data.strings.obstaclePassed+=` (${game.i18n.localize("CoC7.GotLucky")})`),data.status.push({name:game.i18n.localize("CoC7.Success"),css:"success"})):this.data.objects.check.isFumble?(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFumble"),data.status.push({name:game.i18n.localize("CoC7.Fumble"),css:"fumble"})):(data.strings.checkFailed=game.i18n.localize("CoC7.ObstacleFail"),data.status.push({name:game.i18n.localize("CoC7.Failure"),css:"failure"})))}if(this.data.states.playerActionDefined&&(this.data.obstacle.hazard?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToNegotiateHazard"):this.data.obstacle.barrier&&(this.data.states.tryToNegotiate?data.strings.playerIntentions=game.i18n.localize("CoC7.TryToGetPastBarriers"):this.data.states.tryToBreak&&(data.strings.playerIntentions=game.i18n.localize("CoC7.TryToBreak")))),this.data.states.checkRolled&&(this.data.states.cardResolved?data.htmlCheck=await(this.data.objects.check.inlineCheck?.outerHTML):data.htmlCheck=await this.data.objects.check.getHtmlRoll()),this.data.states.cardResolved){data.playerDamageTaken=!1,data.obstalceDefinitionChanged=!1;this.listChanges().changes&&(data.obstalceDefinitionChanged=!0),this.data.obstacle.hasDamage&&this.data.objects?.check?.isFailure&&(data.playerDamageTaken=!0,data.inlineDamageTakenRoll=createInlineRoll(this.data.objects.failedDamageRoll)?.outerHTML,0===data.data.totalPlayerDamageTaken?data.strings.damageTaken=game.i18n.localize("CoC7.YouTakeNoDamage"):data.strings.damageTaken=game.i18n.format("CoC7.YouTakeSomeDamage",{amount:data.data.totalPlayerDamageTaken}),data.status.push({name:game.i18n.localize("CoC7.TotalDamage")+` :${data.data.totalPlayerDamageTaken}`})),this.data.obstacle.hasActionCost&&this.data.obstacle.hazard&&this.data.objects?.check?.isFailure&&(data.actionLost=!0,data.strings.actionLost=game.i18n.localize("CoC7.YouLostTime"),data.inlineActionLostRoll=createInlineRoll(this.data.objects.failedActionRoll)?.outerHTML),data.status.push({name:game.i18n.localize("CoC7.CardResolved")})}return this.data.states.closed&&(this.data.movePlayer?data.strings.finalOutcome=game.i18n.localize("CoC7.MoveToLocation"):data.strings.finalOutcome=game.i18n.localize("CoC7.DontMoveToLocation")),data}async GMUpdate(){if(game.user.isGM){if(this.data.states.cardResolved){if(this.data.objects?.failedDamageRoll?.total){const totalDamage=this.data.objects.failedDamageRoll.total,armorValue=this.data.flags.ignoreArmor?0:this.data.armor;CoC7Utilities.isFormula(armorValue)?this.data.armor=(await new Roll(armorValue).roll({async:!0})).total:isNaN(Number(armorValue))||(this.data.armor=Number(armorValue)),void 0===this.data.totalPlayerDamageTaken&&(this.data.totalPlayerDamageTaken=totalDamage-this.data.armor,this.data.totalPlayerDamageTaken<0&&(this.data.totalPlayerDamageTaken=0))}void 0===this.data.reflectObstaleChanges&&(this.data.reflectObstaleChanges=!0),void 0===this.data.movePlayer&&(this.data.movePlayer=(this.data.states.tryToNegotiate||this.data.obstacle.hazard)&&!this.data.states.failedConsequencesRolled),this.data.obstacle.barrier&&this.data.obstacle.hasHitPoints&&this.data.objects?.obstacleDamageRoll?.total&&(void 0===this.data.totalObstacleDamage&&(this.data.totalObstacleDamage=this.data.objects.obstacleDamageRoll.total),void 0===this.data.flags.obstacleDestoyed&&(this.data.flags.obstacleDestoyed=this.data.obstacle.HitPoints-this.data.totalObstacleDamage<=0))}this.data.states.closed&&(this.data.movementActionArray=duplicate(this.participant.movementActionArray),this.data.EEC_ACTION={detachData:!0})}else console.error("CoC7: GMUpdate called from non GM user")}async localCompute(){}async assignObjects(){this.data.objects?.check&&"Object"===this.data.objects.check?.constructor?.name&&(this.data.objects.check=CoC7Check.fromData(this.data.objects.check)),this.data.objects?.obstacleDamageRoll&&"Object"===this.data.objects.obstacleDamageRoll?.constructor?.name&&(this.data.objects.obstacleDamageRoll=Roll.fromData(this.data.objects.obstacleDamageRoll)),this.data.objects?.failedDamageRoll&&"Object"===this.data.objects.failedDamageRoll?.constructor?.name&&(this.data.objects.failedDamageRoll=Roll.fromData(this.data.objects.failedDamageRoll)),this.data.objects?.failedActionRoll&&"Object"===this.data.objects.failedActionRoll?.constructor?.name&&(this.data.objects.failedActionRoll=Roll.fromData(this.data.objects.failedActionRoll))}async initialize(){this.chase&&void 0!==this.chase.activeParticipantData?.uuid&&(void 0===this.data&&(this.data={}),void 0===this.data.states&&(this.data.states={}),this.data.obstacle=this.location?.obstacleDetails,this.data.participantUuid=this.chase.activeParticipantData.uuid,this.participantData?.bonusDice>0&&(this.data.bonusDice=this.participantData.bonusDice,this.data.flags.consumeBonusDice=!0,this.data.flags.hasBonusDice=this.participant.hasBonusDice),this.data.movementActionArray=duplicate(this.participant.movementActionArray),this.data.movementAction=this.participant.currentMovementActions,this.data.totalActionCost=0)}get participant(){if(this.participantData)return new _participant(this.participantData)}get participantData(){if(this.chase&&this.data.participantUuid)return this.chase.getParticipantData(this.data.participantUuid)}get location(){if(this.chase)return this.chase.getLocationData(this.data.locationUuid)}get obstacle(){if(this.location)return this.location.obstacleDetails}get chase(){if(this.data.chaseUuid)return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.data.chaseUuid)),this._chase}get roll(){let rollData;if(this.participant.actor&&this.data.obstacle.checkName){const actorSkill=this.participant.actor.find(this.data.obstacle.checkName);rollData=void 0!==actorSkill?actorSkill:{type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold}},rollData.actor={actorKey:this.participant.actor.id}}else this.data.obstacle.checkName&&this.data.checkThreshold&&(rollData={type:"value",value:{name:this.data.obstacle.checkName,threshold:this.data.checkThreshold},actor:{name:this.participant.name}});return rollData&&(rollData.diceModifier=this.data?.bonusDice||0,rollData.difficulty=CoC7Check.difficultyLevel.regular,rollData.denyPush=!0),rollData||void 0}get validFailedRolls(){if(!this.data.objects?.check?.isFailure)return!1;if(this.data.obstacle.hasDamage){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;if(!this.data.obstacle.failedCheckDamage)return!1;if(this.data.obstacle.failedCheckDamage&&!Roll.validate(damage))return!1}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;if(!this.data.obstacle.failedActionCost)return!1;if(this.data.obstacle.failedActionCost&&!Roll.validate(actionCost))return!1}return!0}get weaponsOptions(){const weapons=[];if(this.participant.actor?.itemTypes?.weapon?.forEach((w=>{let formula=w.data.data.range.normal.damage,db=this.participant.actor.db;db=null===db||0===Number(db)?"":`${db}`,db&&!db.startsWith("-")&&(db="+"+db),w.data.data.properties.addb&&(formula+=db),w.data.data.properties.ahbd&&(formula=formula+db+"/2"),weapons.push({name:`${w.data.name} (${formula})`,damage:formula,uuid:w.uuid})})),weapons.sort(CoC7Utilities.sortByNameKey),!weapons.find((w=>w.name.toUpperCase().startsWith(game.i18n.localize("CoC7.UnarmedWeaponName")?.toUpperCase())))){let db="";this.participant.actor&&(db=this.participant.actor.db,db&&!db.startsWith("-")&&(db="+"+db),null!==db&&0!==Number(db)||(db="")),weapons.unshift({name:`${game.i18n.localize("CoC7.UnarmedWeaponName")} (1D3${db})`,damage:`1D3${db}`,uuid:"unarmed"})}return weapons.push({name:game.i18n.localize("CoC7.Other"),damage:this.data?.customWeaponDamage||null,uuid:0}),weapons}get usedWeapon(){if(!this.data?.weaponChoice){if(!this.weaponsOptions)return;this.data||(this.data={}),this.data.weaponChoice=this.weaponsOptions[0].uuid}if(this.data.weaponChoice){const weapon=this.weaponsOptions.find((e=>e.uuid===this.data.weaponChoice));if(weapon)return weapon}}get inflictedDamageFormula(){if(this.usedWeapon){const weapon=this.usedWeapon;return weapon&&weapon.damage&&Roll.validate(weapon.damage)?weapon.damage:void 0}}get validObstacleDamage(){return!!(this.data.obstacle.hasHitPoints&&!isNaN(Number(this.data.obstacle.HitPoints))&&Number(this.data.obstacle.HitPoints)>0&&this.inflictedDamageFormula)}get strings(){const strings={};return strings.damageRollRequest=this.usedWeapon.name,strings}async validateCard(options){let loactionChanged,participantChaged=!1;const obstacleUpdate={obstacleDetails:{}},participantUpdate={};this.data.flags.obstacleDestoyed&&(loactionChanged=!0,obstacleUpdate.obstacle=!1,obstacleUpdate.obstacleDetails.hazard=!1,obstacleUpdate.obstacleDetails.barrier=!1);const diff=this.listChanges();if(diff.changes&&this.data.reflectObstaleChanges)for(const[key,value]of Object.entries(diff.obstacle))"type"!==key&&(obstacleUpdate.obstacleDetails[value.key]=value.new,loactionChanged=!0);if(this.data.totalObstacleDamage>0&&this.data.obstacle.hasHitPoints){let remainingHp=this.data.obstacle.HitPoints;remainingHp-=this.data.totalObstacleDamage,remainingHp<0&&(remainingHp=0),this.obstacle.HitPoints!==remainingHp&&(obstacleUpdate.obstacleDetails.HitPoints=remainingHp,this.data.obstacle.HitPoints=remainingHp,loactionChanged=!0)}if(this.data.totalPlayerDamageTaken>0&&(participantChaged=!0,this.participant.actor?await this.participant.actor.dealDamage(this.data.totalPlayerDamageTaken,{ignoreArmor:!0}):(participantUpdate.hp=this.participantData.hp,participantUpdate.hp-=this.data.totalPlayerDamageTaken,participantUpdate.hp<0&&(participantUpdate.hp=0))),this.data.totalActionCost>0&&(participantChaged=!0,participantUpdate.currentMovementActions=this.participantData.currentMovementActions,participantUpdate.currentMovementActions-=this.data.totalActionCost),void 0===this.data.flags.consumeBonusDice&&(this.data.flags.consumeBonusDice=!0),this.data.flags.consumeBonusDice?(participantChaged=!0,participantUpdate.bonusDice=0):isNaN(this.data.bonusDice)||this.data.bonusDice===this.participant.bonusDice||(participantUpdate.bonusDice=this.data.bonusDice),this.data.movePlayer){let targetLocation;targetLocation=this.data.forward?this.location:this.chase.getLocationShift(this.location.uuid,{skip:-1}),targetLocation.uuid&&await this.chase.moveParticipantToLocation(this.participantData.uuid,targetLocation.uuid,{scrollToLocation:!0,activateLocation:!1,render:!1})}return loactionChanged&&await this.chase.updateLocation(this.location.uuid,obstacleUpdate,{render:!1}),participantChaged&&await this.chase.updateParticipant(this.participantData.uuid,participantUpdate,{render:!1}),this.data.states.closed=!0,await this.chase.activateNextParticipantTurn(),!0}async defineObstacle(options){return this.data.states||(this.data.states={}),this.data.states.obstacleDefined=!0,!0}async tryToNegotiateObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!0,this.data.states.tryToBreak=!1,!0}async tryToBreakDownObstacle(options){return this.data.states.breakOrNegotiateDefined=!0,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!0,!0}async cancelObstacleDefinition(options){return this.data.states.obstacleDefined=!1,this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0}async cancelBreakOrPassChoice(options){return this.data.obstacle.hasHitPoints?(this.data.states.breakOrNegotiateDefined=!1,this.data.states.tryToNegotiate=!1,this.data.states.tryToBreak=!1,!0):this.cancelObstacleDefinition()}async requestRoll(options){return this.data.states.playerActionDefined=!0,!0}async takeCautiousApproach(options){return this.data.totalCautiousApproach||(this.data.totalCautiousApproach=0),this.data.totalCautiousApproach+=1,this.data.bonusDice+=1,this.data.totalActionCost+=1,this.data.flags.consumeBonusDice||(this.data.flags.consumeBonusDice=!0),this.data.flags.hasBonusDice||(this.data.flags.hasBonusDice=!0),this.data.movementAction<=this.data.totalActionCost&&(this.data.flags.consumeBonusDice=!1,this.data.states.cardResolved=!0,this.data.movePlayer=!1),!0}async rollSkillCheck(options){const target=options.event.currentTarget;if(!target.classList.contains("disabled")){if(target.classList.toggle("disabled"),this.roll)return this.data.objects||(this.data.objects={}),this.data.objects.check=CoC7Check.createFromActorRollData(this.roll),!!this.data.objects.check&&(this.data.objects.check.denyPush=!0,await this.data.objects.check._perform({forceDSN:!0}),this.data.totalActionCost+=1,this.data.states.checkRolled=!0,target.classList.toggle("disabled"),this.data.objects.check.passed?(this.data.movePlayer=!0,this.data.states.cardResolved=!0):void 0===this.data.armor&&this.participant.actor&&(this.data.armor=this.participant.actor.data.data.attribs.armor.value||0),!0);ui.notifications.error(game.i18n.localize("CoC7.NothingToRoll"))}}async useLuck(options){return await CoC7Check.alter(this.data.objects.check,"useLuck",{target:options.event.currentTarget,update:!1}),this.data.objects.check.passed&&(this.data.states.cardResolved=!0,this.data.movePlayer=!0,this.data.totalActionCost+=1),!0}async rollFailConsequences(options){if(this.data.objects||(this.data.objects={}),this.data.obstacle.hasDamage&&this.data.objects.check?.isFailure){const damage="number"==typeof this.data.obstacle.failedCheckDamage?`${this.data.obstacle.failedCheckDamage}`:this.data.obstacle.failedCheckDamage;this.data.objects.failedDamageRoll=new Roll(damage),await this.data.objects.failedDamageRoll.evaluate({async:!0})}if(this.data.obstacle.hazard&&this.data.obstacle.hasActionCost&&this.data.objects.check?.isFailure){const actionCost="number"==typeof this.data.obstacle.failedActionCost?`${this.data.obstacle.failedActionCost}`:this.data.obstacle.failedActionCost;this.data.objects.failedActionRoll=new Roll(actionCost),await this.data.objects.failedActionRoll.evaluate({async:!0}),this.data.totalActionCost+=this.data.objects.failedActionRoll.total-1}return this.data.states.failedConsequencesRolled=!0,this.data.states.cardResolved=!0,!0}async askRollObstacleDamage(options){return this.data.states.playerActionDefined=!0,!0}async rollObstacleDamage(options){return this.data.objects||(this.data.objects={}),this.data.objects.obstacleDamageRoll=new Roll(this.usedWeapon?.damage),await this.data.objects.obstacleDamageRoll.evaluate({async:!0}),await CoC7Dice.showRollDice3d(this.data.objects.obstacleDamageRoll),this.data.states.obstacleDamageRolled=!0,this.data.totalActionCost+=1,this.data.states.cardResolved=!0,!0}listChanges(validate=!1){const diff={obstacle:{},player:{},changes:!1},names={barrier:game.i18n.localize("CoC7.Type"),hazard:game.i18n.localize("CoC7.Type"),hasHitPoints:game.i18n.localize("CoC7.Breakable"),HitPoints:game.i18n.localize("CoC7.HitPoints"),hasActionCost:game.i18n.localize("CoC7.ActionCost"),failedActionCost:game.i18n.localize("CoC7.ActionCost"),hasDamage:game.i18n.localize("CoC7.FightBack"),failedCheckDamage:game.i18n.localize("CoC7.WeaponDamage"),checkName:game.i18n.localize("CoC7.Check"),name:game.i18n.localize("CoC7.Name")};validate&&!this.data.validation&&(this.data.validation={});const newObstacle=foundry.utils.diffObject(this.obstacle,this.data.obstacle);for(const[key]of Object.entries(newObstacle))""===newObstacle[key]&&null===this.obstacle[key]||!isNaN(Number(newObstacle[key]))&&Number(newObstacle[key])===this.obstacle[key]||(diff.changes=!0,diff.obstacle[key]={old:this.obstacle[key],new:newObstacle[key],name:names[key],key},validate&&(this.data.validation[key]=!0));return diff}}class CoC7Chase extends CoC7Item{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/running-solid.svg"),super(data,context),this.context=context}get participants(){const pList=[],preys=this.system.participants.filter((p=>!p.chaser)).map((p=>new _participant(p))),chasers=this.system.participants.filter((p=>p.chaser)).map((p=>new _participant(p)));return this.system.participants.forEach((p=>{p.assist=[],p.chaser?p.assist=chasers.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name}))):p.assist=preys.filter((c=>c.uuid!==p.uuid&&!c.hasMaxBonusDice)).map((c=>({uuid:c.uuid,name:c.name})));const particpant=new _participant(p);pList.push(particpant)})),pList}get participantsObject(){const participants=this.participants;return participants.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),participants}get activeParticipantData(){return this.system.participants.find((p=>p.active))}get activeActor(){const p=this.activeParticipantData;if(p)return p.docUuid?CoC7Utilities.getActorFromKey(p.docUuid):void 0}get participantsByAdjustedMov(){const pList=this.actualParticipants.sort(((a,b)=>a.adjustedMov-b.adjustedMov));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get participantsByInitiative(){const pList=this.actualParticipants.sort(((a,b)=>b.initiative-a.initiative));return pList.forEach((p=>{p.location=this.getParticipantLocation(p.uuid)})),pList}get preys(){return this.participants.filter((p=>!p.isChaser&&p.isValid))||[]}get chasers(){return this.participants.filter((p=>p.isChaser&&p.isValid))||[]}get allHaveValidMov(){return this.participants.every((e=>e.hasValidMov))}get allHaveSpeedRoll(){return this.participants.every((p=>p.speedCheck?.rolled))}getParticipantLocation(participantUuid){if(!this.system.locations?.list?.length)return;if(!this.started)return;const location=this.locations.find((l=>{const lp=l.participants?.find((p=>participantUuid===p.uuid));return!!lp}));return location||void 0}getParticipantData(participantUuid){const participant=this.system.participants.find((p=>participantUuid===p.uuid));if(participant)return foundry.utils.duplicate(participant)}getParticipant(participantUuid){const participantData=this.getParticipantData(participantUuid);if(participantData)return new _participant(participantData)}get nextActiveParticipant(){if(this.started)return this.participantsByInitiative.find((p=>p.data.currentMovementActions>0))}get slowestPrey(){const preys=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isPrey));if(preys.length>0)return preys[0]}get fastestChaser(){const chasers=this.participants.sort(((a,b)=>a.adjustedMov-b.adjustedMov))?.filter((p=>p.isChaser));if(chasers.length>0)return chasers.slice(-1).pop()}get actualParticipants(){const slowestPrey=this.slowestPrey,fastestChaser=this.fastestChaser;let pList=this.participants;return!this.system.includeLatecomers&&slowestPrey&&(pList=pList.filter((p=>p.isPrey||p.isChaser&&p.adjustedMov>=slowestPrey.adjustedMov))),!this.system.includeEscaped&&fastestChaser&&(pList=pList.filter((p=>p.isChaser||p.isPrey&&p.adjustedMov<=fastestChaser.adjustedMov))),pList}get slowestParticipant(){const pList=this.participantsByAdjustedMov;if(pList.length>0)return pList[0]}async updateParticipants(list,{render=!0}={}){const participantsData=this.cleanParticipantList(list);return await this.update({"system.participants":participantsData},{render})}async updateParticipant(particiantUuid,updateData,{render=!0}={}){const participants=foundry.utils.duplicate(this.system.participants),update=foundry.utils.duplicate(updateData),participantIndex=participants.findIndex((p=>particiantUuid===p.uuid));-1!==participantIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(participants[participantIndex],update,{overwrite:!0}),await this.updateParticipants(participants,{render}))}cleanParticipantList(list){const participantsData=list||foundry.utils.duplicate(this.system.participants);return list.forEach((p=>{let data;data="_participant"===p.constructor.name?p.data:p;const index=this.findIndex(participantsData,data.uuid);-1===index?(participantsData.push(data),ui.notifications.warn(game.i18n.localize("CoC7.ParticipantDataMissing"))):participantsData[index]=data})),participantsData}async assistParticipant(assistantUuid,beneficiaryUuid,{useMovementActions=!0,render=!0}={}){const assistant=this.getParticipant(assistantUuid),beneficiary=this.getParticipant(beneficiaryUuid),participantsData=foundry.utils.duplicate(this.system.participants),assistantIndex=participantsData.findIndex((p=>assistantUuid===p.uuid)),beneficiaryIndex=participantsData.findIndex((p=>beneficiaryUuid===p.uuid));if(assistant&&beneficiary)if(beneficiary.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorBeneficiaryAtMaxBonus",{name:beneficiary.name}));else{if(useMovementActions){if(assistant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid,actions:assistant.currentMovementActions}));assistant.alterMovementActions(-1),participantsData[assistantIndex]=foundry.utils.duplicate(assistant.data)}beneficiary.addBonusDice(),participantsData[beneficiaryIndex]=foundry.utils.duplicate(beneficiary.data),await this.update({"system.participants":participantsData},{render})}else ui.notifications.error(game.i18n.localize("CoC7.ParticipantNotFound"))}async toggleBonusDice(participantUuid,diceNumber,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.bonusDice>=diceNumber?participant.removeBonusDice():participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async cautiousApproach(participantUuid,{useMovementActions=!0,render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(participant.hasMaxBonusDice)ui.notifications.error(game.i18n.format("CoC7.ErrorParticipantAtMaxBonus",{participantUuid}));else{if(useMovementActions){if(participant.currentMovementActions<1)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(-1)}participant.addBonusDice(),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}}async alterParticipantMovementAction(participantUuid,count,{render=!0}={}){const participant=this.getParticipant(participantUuid);if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid}));const participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));participant.alterMovementActions(count),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render})}async activateNextParticipantTurn({scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const activeParticipant=this.nextActiveParticipant,options={scrollToLocation,activateLocation,render,html};return activeParticipant?this.activateParticipant(activeParticipant.uuid,options):this.activateParticipant(void 0,options)}async activateParticipant(participantUuid,{scrollToLocation=!0,activateLocation=!0,render=!0,html=null}={}){const dataUpdate=this.getActivateParticipantUpdateData(participantUuid,{scrollToLocation,activeLocation:activateLocation,html});await this.update(dataUpdate,{render})}getActivateParticipantUpdateData(participantUuid,{scrollToLocation=!0,activateLocation=!0,html=null}={}){const pUuid=participantUuid,participantsDataUpdate={},participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{delete p.active,pUuid&&pUuid===p.uuid&&(p.active=!0)})),participantsDataUpdate["system.participants"]=participants;const participantLocation=this.getParticipantLocation(pUuid);let locationsDataUpdate=null;return participantLocation?activateLocation?locationsDataUpdate=this.getActivateLocationUpdateData(participantLocation.uuid,{scrollToLocation,html}):scrollToLocation&&(locationsDataUpdate={},locationsDataUpdate["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,locationsDataUpdate["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(participantLocation.uuid,{html})):locationsDataUpdate=this.getActivateLocationUpdateData(void 0,{scrollToLocation}),locationsDataUpdate?foundry.utils.mergeObject(participantsDataUpdate,locationsDataUpdate):participantsDataUpdate}activeParticipantObstacleCheck(locationUuid,{moveParticipant=!0}={}){new ChaseObstacleCard({chaseUuid:this.uuid,locationUuid,moveParticipant,forward:locationUuid!==this.activeLocation.uuid}).toMessage()}async progressToNextRound({render=!0}={}){const participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[];participants.forEach((p=>{p.currentMovementActions<p.movementAction&&(p.currentMovementActions+=p.movementAction,p.currentMovementActions>p.movementAction&&(p.currentMovementActions=p.movementAction))})),await this.updateParticipants(participants,{render:!1}),this.activateNextParticipantTurn({render})}async updateRoll(rollString){if(game.user.isGM){const roll=CoC7Check.fromRollString(rollString),participants=this.system.participants?foundry.utils.duplicate(this.system.participants):[],index=participants.findIndex((p=>p.rollUuid===roll.uuid));index>=0&&(participants[index].speedCheck.rollDataString=roll.JSONRollString,await this.update({"system.participants":participants}))}else{const data={data:rollString,type:"invoke",method:"updateRoll",item:this.uuid};game.socket.emit("system.CoC7",data)}}get locations(){const locations=this.started?this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[]:this.initTrack;return this.processLocations(locations),locations}getLocationData(locationUuid,{duplicateData=!0}={}){return(duplicateData?foundry.utils.duplicate(this.locations):this.locations).find((l=>locationUuid===l.uuid))}processLocations(locations){if(locations?.length){locations[0].first=!0;for(let index=0;index<locations.length;index++){const classes=[],location=locations[index];location.name||classes.push("empty"),location.active&&classes.push("active"),location.init&&!this.started&&classes.push("init"),location.cssClasses=classes.join(" ")}locations.length>1&&(locations[locations.length-1].last=!0),locations.forEach((l=>{if(l.participants&&l.participants.length){l.participants=l.participants.filter((p=>!(null===p)));for(let i=0;i<l.participants.length;i++){const elem=l.participants[i];let p;"string"==typeof elem||elem instanceof String?p=this.system.participants.find((p=>elem===p.uuid)):"_participant"===elem?.constructor?.name?(p=void 0,ui.notifications.warn(game.i18n.localize("CoC7.ParticipantAlreadyProcessed"))):p=void 0,void 0!==p?l.participants[i]=new _participant(p):console.error("Undefined paticipant while processing participants array")}l.participants.sort(sortByRoleAndDex)}}))}}get initTrack(){if(!this.system.locations.list||0===this.system.locations.list.length)return;const locations=[],init=this.startingLine;let locationsIndexStart,initIndexStart,locationsLength;if(locationsIndexStart=init.length<=0||this.system.startingIndex>=init.length?0:init.length-this.system.startingIndex,initIndexStart=this.system.startingIndex<=0||this.system.startingIndex<=init.length?0:this.system.startingIndex-init.length,locationsLength=0===locationsIndexStart?this.system.locations.list.length:this.system.locations.list.length+locationsIndexStart,0!==init.length&&this.system.startingIndex<0)for(let index=0;index<Math.abs(this.system.startingIndex);index++)init.push({uuid:this.generateNewUuid(),init:!0,participants:[]});const chaseLocations=foundry.utils.duplicate(this.system.locations);for(let index=0;index<locationsLength;index++){let location={};const participants=[];index>=locationsIndexStart&&index-locationsIndexStart<chaseLocations.list.length&&(location=foundry.utils.duplicate(chaseLocations.list[index-locationsIndexStart]),location.init=!1,location.participants?.forEach((p=>{null!=p&&participants.push(p)}))),index>=initIndexStart&&index-initIndexStart<init.length&&(mergeObject(location,init[index-initIndexStart],{overwrite:!1}),init[index-initIndexStart].participants?.forEach((p=>{null!=p&&participants.push(p)})),location.participants=participants),location.first=!1,location.end=!1,locations.push(location)}return locations}get startingLine(){const preys=this.system.includeEscaped?this.preys:this.preys?.filter((p=>!p.data.escaped)),chasers=this.system.includeLatecomers?this.chasers:this.chasers?.filter((c=>!c.data.excluded)),chaseTrack=[],chasersMinMov=this.findMinMov(chasers),chasersMaxMov=this.findMaxMov(chasers),preysMinMov=this.findMinMov(preys),preysMaxMov=this.findMaxMov(preys);if(-1!==chasersMinMov&&-1!==chasersMaxMov){for(let mov=chasersMinMov;mov<=chasersMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};chasers.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}for(let index=0;index<this.system.startingRange;index++)chaseTrack.push({uuid:this.generateNewUuid(),init:!0,participants:[]})}if(-1!==preysMinMov&&-1!==preysMaxMov)for(let mov=preysMinMov;mov<=preysMaxMov;mov++){const location={uuid:this.generateNewUuid(),init:!0,participants:[]};preys.filter((p=>mov===p.adjustedMov)).sort(((a,b)=>a.dex-b.dex)).forEach((p=>location.participants.push(p.uuid))),chaseTrack.push(location)}return chaseTrack}async updateLocationsList(list,{render=!0}={}){const updatedList=this.cleanLocationsList(list);await this.update({"system.locations.list":updatedList},{render})}async updateLocation(locationUuid,updateData,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),update=foundry.utils.duplicate(updateData),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));-1!==locationIndex&&(update.uuid&&delete update.uuid,foundry.utils.mergeObject(locations[locationIndex],update,{overwrite:!0}),await this.updateLocationsList(locations,{render}))}cleanLocationsList(list){const updatedList=foundry.utils.duplicate(list),partipantsUuidArray=this.system.participants.map((p=>p.uuid));return updatedList.forEach((l=>{if(delete l.cssClasses,delete l.first,delete l.last,delete l.end,l.participants&&l.participants.length){for(let i=0;i<l.participants.length;i++)l.participants=l.participants.filter((p=>!(null===p))),l.participants[i].data?.uuid&&(l.participants[i]=l.participants[i].data.uuid);l.participants=l.participants.filter((uuid=>partipantsUuidArray.includes(uuid)))}})),updatedList}async insertLocation(insertAtUuid,{shift=0,locData={},render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list);locations.forEach((l=>{delete l.active}));const locationIndex=locations.findIndex((l=>insertAtUuid===l.uuid));if(-1===locationIndex)return!1;const newLocationIndex=locationIndex+shift;if(newLocationIndex>locations.length)return!1;const newLocation=foundry.utils.duplicate(locData);return newLocation.uuid=this.generateNewUuid(),newLocation.init=locations[locationIndex].init,newLocation.active=!0,locations.splice(newLocationIndex,0,newLocation),await this.updateLocationsList(locations,{render})}async removeLocation(uuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>uuid===l.uuid));if(locations.splice(locationIndex,1),locations.forEach((l=>{delete l.active})),locations.length>0){let index=locationIndex-1;index<0&&(index=0),locations[index].active=!0}return await this.updateLocationsList(locations,{render})}async activateLocation(locationUuid,{scrollToLocation=!0,render=!0}={}){const updateData=this.getActivateLocationUpdateData(locationUuid,{scrollToLocation});await this.update(updateData,{render})}getClearActiveLocationUpdateData({scrollToLocation=!0,html=null}={}){const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=0,updateData["system.scroll.chaseTrack.to"]=-1),updateData}getActivateLocationUpdateData(locationUuid,{scrollToLocation=!0,html=null}={}){if(!locationUuid)return this.getClearActiveLocationUpdateData({scrollToLocation});const updateData={},locations=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];return locations.forEach((l=>{delete l.active,locationUuid===l.uuid&&(l.active=!0)})),updateData["system.locations.list"]=this.cleanLocationsList(locations),scrollToLocation&&(updateData["system.scroll.chaseTrack.from"]=this.chaseTrackCurrentScrollPosition,updateData["system.scroll.chaseTrack.to"]=this.getChaseTrackLocationScrollPosition(locationUuid,{html})),updateData}get activeLocation(){if(!this.locations)return;const location=this.locations.find((l=>l.active));if(!location)return;location.participants?.length&&(location.hasParticipant=!0);const actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get previousLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(0===activeIndex)return;const location=this.locations[activeIndex-1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}get nextLocation(){if(!this.locations)return;const activeIndex=this.locations.findIndex((l=>l.active));if(-1===activeIndex)return;if(activeIndex===this.locations.length-1)return;const location=this.locations[activeIndex+1],actor=this.activeActor;if(actor){const test=actor.find(location.obstacleDetails?.checkName);test&&(location.activeActorHasSkill=!0,location.activeActorTest=test)}return location}async locatorDropped(data){await this.setLocationCoordinates(data.locationUuid,data.x,data.y,data.scene)}async setLocationCoordinates(locationUuid,x,y,sceneId,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return locations[locationIndex].coordinates={x,y,scene:sceneId},await this.updateLocationsList(locations,{render})}async clearActiveLocationCoordinates({render=!0}={}){if(this.activeLocation)return await this.clearLocationCoordinates(this.activeLocation.uuid,{render})}async clearLocationCoordinates(locationUuid,{render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),locationIndex=locations.findIndex((l=>locationUuid===l.uuid));return delete locations[locationIndex].coordinates,await this.updateLocationsList(locations,{render})}async cutToTheChase(){if(this.allHaveSpeedRoll){if(this.actualParticipants?.length<2)ui.notifications.warn(game.i18n.localize("CoC7.NeedMin2Participants"));else if(this.allHaveValidMov){const participants=this.participants,minMov=this.findMinMov(this.actualParticipants);participants.forEach((p=>{p.calculateMovementActions(minMov),p.currentMovementActions=p.movementAction,p.bonusDice=0})),await this.updateParticipants(participants,{render:!1}),await this.updateLocationsList(this.locations,{render:!1}),await this.start()}}else ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"))}async restart(){const locations=this.locations.filter((l=>!l.init));for(let i=0;i<locations.length;i++)locations[i].participants&&(locations[i].participants=[]),locations[i].active&&delete locations[i].active;const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];for(let i=0;i<participantsData.length;i++)participantsData[i].active&&delete participantsData[i].active;await this.setchaseTrackScroll(0,0,{render:!1}),await this.updateLocationsList(locations,{render:!1}),await this.updateParticipants(participantsData,{render:!1}),await this.stop()}getLocationShift(locationUuid,{skip=1}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destinationIndex=locations.findIndex((l=>locationUuid===l.uuid))+skip;return 0===locations.length?null:destinationIndex>=locations.length?locations[locations.length-1]:destinationIndex<0?locations[0]:locations[destinationIndex]}async removeParticipant(participantUuid,{render=!0}={}){const p=this.getParticipant(participantUuid);await Dialog.confirm({title:game.i18n.localize("CoC7.RemoveParticipant"),content:`<p>${game.i18n.format("CoC7.RemoveParticipantHint",{name:p.name})}</p>`,yes:async()=>{const newParticipantsData=foundry.utils.duplicate(this.system.participants).filter((p=>participantUuid!==p.uuid)),locationsData=foundry.utils.duplicate(this.system.locations.list);locationsData.forEach((l=>{l.participants&&l.participants.length&&(l.participants=l.participants.filter((uuid=>participantUuid!==uuid)))})),await this.updateParticipants(newParticipantsData,{render:!1}),await this.updateLocationsList(locationsData,{render})}})}async addParticipant(participant,{render=!0,locationUuid=null,recalculateMovementActions=!0,update=!1}={}){const participantsData=this.system.participants?foundry.utils.duplicate(this.system.participants):[];if(participant.data.chaseUuid&&delete participant.data.chaseUuid,participant.data.locationUuid&&delete participant.data.locationUuid,participant.data.update&&delete participant.data.update,!participant.uuid){let unique=!1;for(;!unique;)participant.data.uuid=foundry.utils.randomID(16),unique=0===participantsData.filter((p=>p.uuid===participant.uuid)).length}if(update){participant.currentMovementActions>participant.movementAction&&(participant.currentMovementActions=participant.movementAction);const index=participantsData.findIndex((p=>p.uuid===participant.uuid));participantsData[index]=participant.data}else participantsData.push(participant.data);if(await this.updateParticipants(participantsData,{render:render&&!this.started&&!this.recalculateMovementActions}),recalculateMovementActions){const slowest=this.slowestParticipant?.adjustedMov,participants=this.participants;participants.forEach((p=>p.calculateMovementActions(slowest))),await this.updateParticipants(participants,{render:render&&!this.started})}if(this.started&&!participant.data.escaped&&!participant.data.excluded){const locationsData=this.system.locations.list?foundry.utils.duplicate(this.system.locations.list):[];0===locationsData.length&&ui.notifications.error(game.i18n.localize("CoC7.ErrorEmptyLocationsList"));let locationIndex=locationsData.findIndex((l=>locationUuid===l.uuid));-1===locationIndex&&(locationIndex=0),locationsData[locationIndex].participants||(locationsData[locationIndex].participants=[]),-1===locationsData[locationIndex].participants.findIndex((p=>p===participant.uuid))&&locationsData[locationIndex].participants.push(participant.uuid),await this.updateLocationsList(locationsData,{render})}}async editParticipant(participantUuid,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){}async moveParticipant(participantUuid,locationMoved,{useMovementActions=!0,scrollToLocation=!0,activateLocation=!0,activateParticipant=!0,render=!0}={}){let modified=!1;const locations=foundry.utils.duplicate(this.system.locations.list),originIndex=locations.findIndex((l=>l.participants?.includes(participantUuid)));let destinationIndex=originIndex+locationMoved;destinationIndex>locations.length-1&&(destinationIndex=locations.length-1),destinationIndex<0&&(destinationIndex=0);const totalMove=destinationIndex-originIndex,participant=this.getParticipant(participantUuid),participantsData=foundry.utils.duplicate(this.system.participants),participantIndex=participantsData.findIndex((p=>participantUuid===p.uuid));if(useMovementActions){if(!participant)return void ui.notifications.error(game.i18n.format("CoC7.ParticipantUuidNotFound",{participantUuid:this.participantUuid}));if(participant.currentMovementActions<Math.abs(totalMove))return void ui.notifications.error(game.i18n.format("CoC7.ParticipantNotEnoughMovement",{assistantUuid:participantUuid,actions:participant.currentMovementActions}));participant.alterMovementActions(0-Math.abs(totalMove)),participantsData[participantIndex]=foundry.utils.duplicate(participant.data),await this.update({"system.participants":participantsData},{render:!1}),modified=!0}return 0!==totalMove&&(await this.moveParticipantToLocation(participantUuid,locations[destinationIndex].uuid,{render:!1}),modified=!0),activateParticipant&&(await this.activateParticipant(participantUuid,{scrollToLocation,activateLocation,render:!1}),modified=!0),activateLocation&&!activateParticipant&&(await this.activateLocation(locations[destinationIndex].uuid,{scrollToLocation,render:!1}),modified=!0),modified&&render&&await this.sheet.render(!0),totalMove}async moveParticipantToLocation(participantUuid,locationUuid,{scrollToLocation=!0,activateLocation=!0,animate=null,moveToken=!0,render=!0}={}){const locations=foundry.utils.duplicate(this.system.locations.list),destination=locations.find((l=>locationUuid===l.uuid));if(!destination)return void console.error(`Failed to move ${participantUuid}. Location ${locationUuid} unknown`);const origin=locations.find((l=>l.participants?.includes(participantUuid)));if(!origin)return void console.error(`Failed to find ${participantUuid} in locations`);if(destination.participants||(destination.participants=[]),destination.participants.includes(participantUuid))return;destination.participants.push(participantUuid);const oldParticipantsList=origin.participants.filter((p=>participantUuid!==p));if(origin.participants=oldParticipantsList,moveToken&&destination.coordinates){const participant=this.getParticipant(participantUuid);let particpantDocument=CoC7Utilities.getDocumentFromKey(participant?.data?.docUuid);if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token)){const foundTokens=canvas.scene.tokens.filter((d=>d.actorLink&&d.actor?.id===particpantDocument.id));1===foundTokens.length&&(particpantDocument=foundTokens[0])}if(particpantDocument&&!(particpantDocument instanceof TokenDocument||particpantDocument?.object instanceof Token))console.warn("No token associated with this actor");else if(destination.coordinates.scene!==game.scenes.viewed.uuid&&console.warn("Caution the scene is not the active scene"),particpantDocument.parent?.uuid!==destination.coordinates.scene)ui.notifications.error(game.i18n.localize("CoC7.ErrorTokenNotOnScene"));else{const scene=CoC7Utilities.getDocumentFromKey(destination.coordinates.scene);let x=destination.coordinates.x;const y=destination.coordinates.y;let targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize();const update=[];let foundFreeSpace=!1;for(;!foundFreeSpace;){const overlapingToken=scene.tokens.find((t=>t.id!==particpantDocument.id&&t.object.bounds.intersects(targetRect)));overlapingToken?(x=overlapingToken.object.bounds.right+1,targetRect=new PIXI.Rectangle(x,y,particpantDocument.object.width,particpantDocument.object.height).normalize()):foundFreeSpace=!0}update.push({_id:particpantDocument.id,x,y});const showTokenMovement="boolean"==typeof animate?animate:this.system.showTokenMovement;await particpantDocument.parent.updateEmbeddedDocuments("Token",update,{animate:showTokenMovement})}}await this.updateLocationsList(locations,{render})}async setchaseTrackScroll({from,to=-1,render=!0}={}){await this.update({"system.scroll.chaseTrack.from":void 0===from?this.chaseTrackCurrentScrollPosition:from,"system.scroll.chaseTrack.to":void 0===to?this.chaseTrackCurrentScrollPosition:to},{render})}get chaseTrackCurrentScrollPosition(){const html=this.sheet?._element;if(!html)return-1;const chaseTrack=html[0].querySelector(".chase-track");return chaseTrack?chaseTrack.scrollLeft:-1}get chaseTrackActiveLocationScrollPosition(){return this.activeLocation?this.getChaseTrackLocationScrollPosition(this.activeLocation.uuid):-1}getChaseTrackLocationScrollPosition(locationUuid,{html=null}){const htmlElement=html||this.sheet?._element;if(!htmlElement||!htmlElement[0])return-1;const chaseTrack=htmlElement[0].querySelector(".chase-track");if(!chaseTrack)return-1;const activeLocationElement=chaseTrack.querySelector(`.chase-location[data-uuid="${locationUuid}"]`);if(!activeLocationElement)return-1;const leftScroll=activeLocationElement.offsetLeft+activeLocationElement.clientWidth/2-chaseTrack.clientWidth/2;return leftScroll<0?0:Math.floor(leftScroll)}findMinMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1}findMaxMov(list){return list?.length?list.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}get started(){return this.getFlag("CoC7","started")}async start(){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px","")),pCount=this.actualParticipants.length,width=Math.max((11.2*pCount+3)*remSize,40*remSize);this.sheet._tabs[0].active="setup",this.sheet.position.width=width,await this.setFlag("CoC7","started",!0),await this.activateNextParticipantTurn()}async stop(){return this.unsetFlag("CoC7","started")}generateNewUuid(){return foundry.utils.randomID(16)}getActorSkillsAndCharacteristics(participantUuid){const participant=this.getParticipant(participantUuid);if(!participant.actor)return;const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),participant.actor.skills.forEach((s=>list.push(s.name))),list}get activeActorSkillsAndCharacteristics(){const particicpantData=this.activeParticipantData;if(particicpantData)return this.getActorSkillsAndCharacteristics(particicpantData.uuid)}get allSkillsAndCharacteristics(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${game.i18n.localize("CoC7.Characteristics")} (${c.shortName})`))),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.Luck")})`),list.push(`${game.i18n.localize("CoC7.Attribute")} (${game.i18n.localize("CoC7.SAN")})`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}get allSkillsAndCharacteristicsShort(){const list=[];return CoCActor.getCharacteristicDefinition().forEach((c=>list.push(`${c.label}`))),list.push(`${game.i18n.localize("CoC7.Luck")}`),list.push(`${game.i18n.localize("CoC7.SAN")}`),game.CoC7.skillList?.forEach((s=>{list.includes(s.name)||s.name.toLowerCase().includes(`(${game.i18n.localize("CoC7.AnySpecName")})`.toLowerCase())||list.push(s.name)})),this.participants.forEach((p=>{p.actor&&p.actor.skills.forEach((s=>{list.includes(s.name)||list.push(s.name)}))})),list.sort(Intl.Collator().compare)}}class CoC7Skill extends CoC7Item{constructor(data,context){if(void 0===data.system?.skillName){const skill=CoC7Skill.guessNameParts(data.name),{name,skillName,specialization,...newProperties}=skill;data.name=name,data.system||={};const properties={...data.system.properties,...newProperties};data.system={...data.system,skillName,specialization,properties}}super(data,context)}static guessNameParts(skillName){const output={combat:!1,fighting:!1,firearm:!1,name:skillName,skillName,special:!1,specialization:""},match=skillName.match(/^(.+)\s*\(([^)]+)\)$/);if(match){output.skillName=match[2].trim(),output.special=!0;const specialization=match[1].trim();output.specialization=specialization,output.name=specialization+" ("+output.skillName+")",output.fighting=specialization===game.i18n.localize("CoC7.FightingSpecializationName"),output.firearm=specialization===game.i18n.localize("CoC7.FirearmSpecializationName"),output.combat=output.fighting||output.firearm}return output}get hasActiveEffects(){return this.activeEffects.length>0}get activeEffects(){if(this.parent&&this.parent.effects){const effectKeyFull=`skill.${this.name}`.toLowerCase(),effectKeyShort=`skill.${this.system.skillName}`.toLowerCase();let changes=this.parent.effects.reduce(((changes,e)=>e.disabled||e.isSuppressed?changes:changes.concat(e.data.changes.map((c=>((c=foundry.utils.duplicate(c)).effect=e,c.priority=c.priority??10*c.mode,c))))),[]);return changes.sort(((a,b)=>a.priority-b.priority)),changes=changes.filter((e=>e.key.toLowerCase()===effectKeyShort||e.key.toLowerCase()===effectKeyFull)),changes}return[]}get itemIdentifier(){return this.name}get rawValue(){let value=0;return"character"===this.actor.type?(value=this.base,value+=this.system.adjustments?.personal?parseInt(this.system.adjustments?.personal):0,value+=this.system.adjustments?.occupation?parseInt(this.system.adjustments?.occupation):0,value+=this.system.adjustments?.experience?parseInt(this.system.adjustments?.experience):0,game.settings.get("CoC7","pulpRuleArchetype")&&this.system.adjustments?.archetype&&(value+=parseInt(this.system.adjustments?.archetype))):value=parseInt(this.system.value),isNaN(value)?null:value}get value(){const value=this.parent?.system.skills?.[`${this.itemIdentifier}`]?.value;return value||this.rawValue}async updateValue(value){if("character"===this.actor.type){const delta=parseInt(value)-this.rawValue,exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+delta;await this.update({"system.adjustments.experience":exp>0?exp:0})}else await this.update({"system.value":value})}async increaseExperience(x){if("skill"!==this.type)return null;if("character"===this.actor.type){const exp=(this.system.adjustments?.experience?parseInt(this.system.adjustments.experience):0)+parseInt(x);await this.update({"system.adjustments.experience":exp>0?exp:0})}}}class CoC7Vehicle extends CoCActor{constructor(data,context){void 0===data.img&&(data.img="systems/CoC7/assets/icons/jeep.svg"),super(data,context)}get rawBuild(){return this.build}get build(){const build=parseInt(this.system.attribs.build.value);return isNaN(build)?null:build}get hp(){if(null===this.system.attribs.build.current||void 0===this.system.attribs.build.current||""===this.system.attribs.build.current)return this.build;if(this.system.attribs.build.current>this.system.attribs.build.value)return this.build;const hp=parseInt(this.system.attribs.build.current);return isNaN(hp)?null:hp}get hpMax(){return this.build}get rawHpMax(){return this.build}async setHp(value){return value>this.build&&(value=this.build),await this.update({"system.attribs.build.current":value})}get rawDb(){return this.db}get db(){const db=parseInt(this.system.attribs.db?.value);return isNaN(db)?null:db}get rawMov(){return this.mov}get mov(){const mov=parseInt(this.system.attribs.mov?.value);return isNaN(mov)?null:mov}get mpMax(){return parseInt(this.system.attribs?.mp?.max)||0}get rawMpMax(){return this.mpMax}get sanMax(){return null}get rawSanMax(){return null}}class CoC7DecaderDie extends DiceTerm{constructor(termData){super(termData),this.faces=10}get total(){const total=super.total;return 10===total?0:10*total}static get DENOMINATION(){return"t"}}class CoC7DecaderDieOther extends CoC7DecaderDie{static get DENOMINATION(){return"o"}}const SETTINGS={pulpRules:{name:"",hint:"",scope:"world",config:!1,default:!1,type:Boolean},initiativeRule:{name:"SETTINGS.InitiativeRule",hint:"SETTINGS.InitiativeRuleHint",scope:"world",config:!1,default:"basic",type:String,choices:{basic:"SETTINGS.InitiativeRuleBasic",optional:"SETTINGS.InitiativeRuleOptional"},onChange:rule=>_setInitiativeOptions(rule)},developmentRollForLuck:{name:"SETTINGS.developmentRollForLuck",hint:"SETTINGS.developmentRollForLuckHint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDoubleMaxHealth:{name:"CoC7.Settings.PulpRules.DoubleMaxHealth.Name",hint:"CoC7.Settings.PulpRules.DoubleMaxHealth.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleDevelopmentRollLuck:{name:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Name",hint:"CoC7.Settings.PulpRules.DevelopmentRollLuck.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleArchetype:{name:"CoC7.Settings.PulpRules.Archetype.Name",hint:"CoC7.Settings.PulpRules.Archetype.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleOrganization:{name:"CoC7.Settings.PulpRules.Organization.Name",hint:"CoC7.Settings.PulpRules.Organization.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleTalents:{name:"CoC7.Settings.PulpRules.Talents.Name",hint:"CoC7.Settings.PulpRules.Talents.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleFasterRecovery:{name:"CoC7.Settings.PulpRules.FasterRecovery.Name",hint:"CoC7.Settings.PulpRules.FasterRecovery.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreMajorWounds:{name:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Name",hint:"CoC7.Settings.PulpRules.IgnoreMajorWounds.Hint",scope:"world",config:!1,default:!1,type:Boolean},pulpRuleIgnoreAgePenalties:{name:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Name",hint:"CoC7.Settings.PulpRules.IgnoreAgePenalties.Hint",scope:"world",config:!1,default:!1,type:Boolean},opposedRollTieBreaker:{name:"SETTINGS.OpposedRollTieBreaker",hint:"SETTINGS.OpposedRollTieBreakerHint",scope:"world",config:!1,default:!1,type:Boolean}};function _setInitiativeOptions(rule){let decimals=0;switch(rule){case"optional":decimals=2;break;case"basic":decimals=0}CONFIG.Combat.initiative={formula:null,decimals}}class CoC7GameRuleSettings extends FormApplication{static get defaultOptions(){return mergeObject(super.defaultOptions,{title:"SETTINGS.TitleRules",id:"rules-settings",template:"systems/CoC7/templates/system/rule-settings.html",width:550,height:"auto",closeOnSubmit:!0})}getData(){const options={},pulpRules={true:!1,false:!1};for(const[k,v]of Object.entries(SETTINGS))options[k]={value:game.settings.get("CoC7",k),setting:v},k.match(/^pulpRule.{2,}$/)&&(pulpRules[options[k].value]=!0);return options.pulpSelection=pulpRules.true?pulpRules.false?"some":"all":"none",options}static registerSettings(){for(const[k,v]of Object.entries(SETTINGS))game.settings.register("CoC7",k,v);_setInitiativeOptions(game.settings.get("CoC7","initiativeRule"))}activateListeners(html){super.activateListeners(html),html.find("#pulpRulesSelect").on("change",(event=>this.onChangePulpSelect(event))),html.find("input.pulpRulesSelect[type=checkbox]").on("click",(event=>this.onClickPulp(event))),html.find("button[name=reset]").on("click",(event=>this.onResetDefaults(event)))}onChangePulpSelect(event){const val=$(event.currentTarget).val();"none"!==val&&"all"!==val||$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){const checkbox=$(this);"none"===val?checkbox.prop("checked",!1):checkbox.prop("checked",!0)}))}onClickPulp(event){const pulpRules={true:!1,false:!1};$("#rules-settings").find("input.pulpRulesSelect[type=checkbox]").each((function(){$(this).prop("checked")?pulpRules.true=!0:pulpRules.false=!0})),$("#pulpRulesSelect").val(pulpRules.true?pulpRules.false?"some":"all":"none")}async onResetDefaults(event){event.preventDefault();for await(const[k,v]of Object.entries(SETTINGS))await game.settings.set("CoC7",k,v?.default);return this.render()}async _updateObject(event,data){const pulpRules={true:!1,false:!1};for await(const key of Object.keys(SETTINGS))game.settings.set("CoC7",key,data[key]),key.match(/^pulpRule.{2,}$/)&&(pulpRules[data[key]]=!0);game.settings.set("CoC7","pulpRules",pulpRules.true&&!pulpRules.false)}}class CoC7ArchetypeSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"skills"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"skills"))))}async _onDrop(event,type="skill",collectionName="skills"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&[type].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=item.system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","occupation"],template:"systems/CoC7/templates/items/archetype.html",width:520,height:480,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const coreCharacteristics=[];for(const[key,selected]of Object.entries(sheetData.data.system.coreCharacteristics))if(selected){const characName=game.i18n.localize(`CHARAC.${key.toUpperCase()}`);coreCharacteristics.push(characName)}sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedSuggestedOccupations=TextEditor.enrichHTML(sheetData.data.system.suggestedOccupations,{async:!1,secrets:sheetData.editable}),sheetData.enrichedSuggestedTraits=TextEditor.enrichHTML(sheetData.data.system.suggestedTraits,{async:!1,secrets:sheetData.editable}),sheetData.data.system.skills=await game.system.api.cocid.expandItemArray({itemList:sheetData.data.system.skills}),sheetData.skillListEmpty=0===sheetData.data.system.skills.length,sheetData.data.system.skills.sort(CoC7Utilities.sortByNameKey),sheetData.coreCharacteristicsString="";const orString=` ${game.i18n.localize("CoC7.Or")} `;return coreCharacteristics.length&&(sheetData.coreCharacteristicsString+=coreCharacteristics.join(orString)),sheetData.itemProperties=[],sheetData.itemProperties.push(`${game.i18n.localize("CoC7.PulpTalents")}: ${sheetData.data.system.talents}`),sheetData.itemProperties.push(`${game.i18n.localize("CoC7.BonusPoints")}: ${sheetData.data.system.bonusPoints}`),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7BookSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/book/main.html",classes:["coc7","item","book"],width:500,height:"auto",resizable:!1,dragDrop:[{dragSelector:".spells",dropSelector:null}],scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.initialReading=this.item.system.initialReading,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.spellsLearned=this.spellsLearned,sheetData.exhausted=!1!==await this.item.checkExhaustion(),sheetData.studyCompleted=this.item.system.study.progress===this.item.system.study.necessary,sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.spellListEmpty=0===this.item.system.spells.length,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedContent=TextEditor.enrichHTML(sheetData.data.system.content,{async:!1,secrets:sheetData.editable}),sheetData}get spellsLearned(){let amount=0;const spells=this.item.system.spells;for(const spell of spells)spell.system.learned&&amount++;return`${amount} / ${spells.length}`}activateListeners(html){super.activateListeners(html),html.find("#attempt-initial-reading").click((event=>{event.preventDefault(),this.item.attemptInitialReading()})),html.find(".delete-spell").click((event=>this._onDelete(event))),html.find(".edit-spell").click((event=>this._onSpellDetail(event))),html.find(".spell-name").click((event=>this._onSpellDetail(event))),html.find(".teach-spell").click((event=>{const id=$(event.currentTarget).parents("li").data("id");this.item.attemptSpellLearning(id)})),html.find('[name="system.study.necessary"]').change((event=>{const value=parseInt(event.currentTarget.value);this.item.changeProgress("reset",value)})),html.find("#increase-progress").click((()=>{this.item.changeProgress("increase")})),html.find("#decrease-progress").click((()=>{this.item.changeProgress("decrease")})),html.find(".add-other-gains").click((event=>{this.modifyOthersGains(event,"add")})),html.find(".change-other-gains").change((event=>{this.modifyOthersGains(event,"change")})),html.find("#redo-full-study").click((()=>{this.item.redoFullStudy()})),html.find(".remove-other-gains").click((event=>{this.modifyOthersGains(event,"remove")})),html.find(".option").click((event=>this.modifyType(event)))}async _onSpellDetail(event){event.preventDefault();const index=$(event.currentTarget).parents("li").data("index");return await this.item.spellDetail(index)}async _onDelete(event){if(!game.user.isGM)return;event.preventDefault();const index=$(event.currentTarget).parents("li").data("index"),spells=this.item.system.spells?duplicate(this.item.system.spells):[];return index>=0&&spells.splice(index,1),await this.item.update({"system.spells":spells})}async _onDrop(event,type="spell"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item"),spells=[];for(const item of dataList)item&&["skill","spell"].includes(item.type)&&("spell"===item.type?spells.push(item):"skill"===item.type&&this.item.system.type.other&&this.modifyOthersGains(null,"add",{name:item.name}));await this.item.addSpells(spells)}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}async modifyOthersGains(event,mode,options={}){let index=null,element=null;event&&(event.preventDefault(),element=$(event.currentTarget),index=element.parents("tr").data("index"));const skills=this.item.system.gains.others?duplicate(this.item.system.gains.others):[];switch(mode){case"add":skills.push({name:options.name||game.i18n.localize("CoC7.NewSkillName"),value:"development"});break;case"change":skills[index]={name:element.is("input")?element.val():skills[index].name,value:element.is("select")?element.val():skills[index].value};break;case"remove":index>=0&&skills.splice(index,1)}return await this.item.update({"system.gains.others":skills})}}class CoC7ContainerSheet extends ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","actor","storage"],template:"systems/CoC7/templates/actors/storage-sheet.html",width:672,height:765,dragDrop:[{dragSelector:".item",dropSelector:null}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"items"}]})}async _onDrop(event){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");if(!this.options.editable)return;const items=this.actor.items.toObject()||[];for(const item of dataList)item&&item.system&&["book","item","spell","weapon"].includes(item.type)&&items.push(item.toObject());await this.actor.update({items})}onCloseSheet(){}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=await super.getData();if(sheetData.isKeeper=game.user.isGM,sheetData.editable=this.isEditable,sheetData.itemsByType={},sheetData.items){for(const item of sheetData.items)Object.prototype.hasOwnProperty.call(sheetData.itemsByType,item.type)||(sheetData.itemsByType[item.type]=[]),sheetData.itemsByType[item.type].push(item);for(const itemType in sheetData.itemsByType)sheetData.itemsByType[itemType].sort(CoC7Utilities.sortByNameKey)}return sheetData.allowUnlock="always"===game.settings.get("CoC7","playerUnlockSheetMode")||game.user.isGM,sheetData.showInventoryItems=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"item")||!sheetData.data.system.flags.locked,sheetData.showInventoryBooks=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"book")||!sheetData.data.system.flags.locked,sheetData.showInventorySpells=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"spell")||!sheetData.data.system.flags.locked,sheetData.showInventoryTalents=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"talent")||!sheetData.data.system.flags.locked&&game.settings.get("CoC7","pulpRuleTalents"),sheetData.showInventoryWeapons=Object.prototype.hasOwnProperty.call(sheetData.itemsByType,"weapon")||!sheetData.data.system.flags.locked,sheetData.hasInventory=sheetData.showInventoryItems||sheetData.showInventoryBooks||sheetData.showInventorySpells||sheetData.showInventoryTalents||sheetData.showInventoryWeapons,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".item-edit").click((ev=>{const li=$(ev.currentTarget).parents(".item");this.actor.items.get(li.data("itemId")).sheet.render(!0)})),html.find(".inventory-header").click(this._onInventoryHeader.bind(this)),html.find(".item-trade").click(this._onTradeItem.bind(this)),html.find(".show-detail").click(this._onItemSummary.bind(this)),html.find(".item-delete").click((async ev=>{const li=$(ev.currentTarget).parents(".item"),itemToDelete=this.actor.items.get(li.data("itemId"),{strict:!0});await itemToDelete.delete(),li.slideUp(200,(()=>this.render(!1)))})),html.find(".add-item").click((ev=>{switch(ev.currentTarget.dataset.type){case"book":this.actor.createEmptyBook(ev);break;case"item":this.actor.createEmptyItem(ev);break;case"skill":this.actor.createEmptySkill(ev);break;case"spell":this.actor.createEmptySpell(ev);break;case"weapon":this.actor.createEmptyWeapon(ev)}})),html.find(".lock").click(this._onLockClicked.bind(this))}async _onLockClicked(event){event.preventDefault();const isLocked=this.actor.locked;this.actor.locked=!isLocked}async _onTradeItem(event){const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("itemId"));let content="<p>"+game.i18n.localize("CoC7.MessageSelectUserToGiveTo");const message={actorFrom:this.actor.id,scene:null,actorTo:this.actor.id,item:item.id};this.token?.actor&&(message.actorFrom=this.token.id,message.scene=this.token.parent.id);const actors=game.actors.filter((e=>{if(!["character","npc","creature","container"].includes(e.type))return!1;if(this.actor.id===e.id)return!1;let visible=!1;for(const[k,v]of Object.entries(e.ownership))"default"!==k&&k!==game.user.id||(visible=visible||v!==CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE);return visible}));content+='<form id="selectform"><select name="user">';for(const actor of actors)content=content+'<option value="'+actor.id+'">'+actor.name+"</option>";content+="</select></form></p>",await Dialog.prompt({title:game.i18n.localize("CoC7.MessageTitleSelectUserToGiveTo"),content,callback:html=>{const formData=new FormData(html[0].querySelector("#selectform"));for(const[name,value]of formData)"user"===name&&(message.actorTo=value)}}),await game.CoC7socket.executeAsGM("gmtradeitemto",message)}_onItemSummary(event){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.actor.items.get(li.data("item-id")),chatData=item.getChatData({secrets:this.actor.isOwner});if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$('<div class="item-summary"></div>'),labels=$('<div class="item-labels"></div>');for(const p of chatData.labels)labels.append(`<div class="item-label"><span class="label-name">${p.name} :</span><span class="label-value">${p.value}</span></div>`);if(div.append(labels),div.append($(`<div class="item-description">${chatData.description.value}</div>`)),item.system.properties?.spcl){const specialDiv=$(`<div class="item-special">${chatData.description.special}</div>`);div.append(specialDiv)}const props=$('<div class="item-properties"></div>');for(const p of chatData.properties)props.append(`<div class="tag item-property">${game.i18n.localize(p)}</div>`);div.append(props),li.append(div.hide()),CoC7Link.bindEventsHandler(div),div.slideDown(200)}li.toggleClass("expanded")}_onInventoryHeader(event){event.preventDefault(),$(event.currentTarget).siblings("li").slideToggle(200)}}class CoC7ChaseParticipantImporter extends FormApplication{static get defaultOptions(){return foundry.utils.mergeObject(super.defaultOptions,{title:game.i18n.localize("CoC7.AddActorToChase"),template:"systems/CoC7/templates/apps/chase-participant-importer.html",classes:["coc7","dialog","chase-participant-importer"],editable:!0,resizable:!1,submitOnChange:!0,closeOnSubmit:!1,width:300,height:"auto"})}activateListeners(html){super.activateListeners(html);new DragDrop({dropSelector:".form-container",permissions:{drop:game.user.isGM},callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);new DragDrop({dragSelector:".chase-token",permissions:{dragstart:game.user.isGM},callbacks:{dragstart:this._onTokenSelectorDragStart.bind(this)}}).bind(html[0]),html.find(".reset-participant").click((async()=>{this.object={},this._actor=null,await this.render(!0)})),html.find(".food-chain").click((async()=>{this.object.chaser=!this.object.chaser,await this.render(!0)})),html.find("[data-action]").click(this._onAction.bind(this))}async _onTokenSelectorDragStart(event){const data={type:"getToken",appId:this.appId,callBack:"addTokenToChase"};event.dataTransfer.setData("text/plain",JSON.stringify(data))}async getData(){if(!this.object.initiative){const init=CoCActor.getCharacteristicDefinition().find((c=>"dex"===c.key));this.object.initiative=init.label}if(!this.object.speedCheck){const speedCheck=CoCActor.getCharacteristicDefinition().find((c=>"con"===c.key));this.object.speedCheck={name:speedCheck.label}}this.validateParticipant();const data=await super.getData();if(data.participant=new _participant(this.object),data.object.speedCheck.name&&this.actor){const speedCheck=this.actor.find(data.object.speedCheck.name);speedCheck?(data.object.speedCheck.score=speedCheck.value.value,data.speedCheckReadOnly=!0):data.participant.speedCheck.score&&!this.object.speedCheck?.score&&(data.object.speedCheck.score=data.participant.speedCheck.score)}if(data.object.initiative&&this.actor){const initiative=this.actor.find(data.object.initiative);initiative?(data.object.dex=initiative.value.value,data.initReadOnly=!0):data.object.dex=data.participant.initiative}return data.actor=this.actor,data.chase=this.chase,data.data=this.data,data.optionsList={},this.chase&&(data.skillsAndCharacteristicsList=this.chase.allSkillsAndCharacteristicsShort),this.actor&&(data.skillsAndCharacteristicsList=[],CoCActor.getCharacteristicDefinition().forEach((c=>data.skillsAndCharacteristicsList.push(`${c.label}`))),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.Luck")}`),data.skillsAndCharacteristicsList.push(`${game.i18n.localize("CoC7.SAN")}`),this.actor.skills.forEach((s=>data.skillsAndCharacteristicsList.push(s.name)))),data}get chase(){return this._chase||(this._chase=CoC7Utilities.SfromUuid(this.object.chaseUuid)),this._chase}get actor(){return this.object.docUuid?(this._actor||(this._actor=CoC7Utilities.getActorFromKey(this.object.docUuid)),this._actor):null}async _updateObject(event,formData){foundry.utils.mergeObject(this,formData),await this.render(!0)}async _onDropParticipant(event){const dropString=event.dataTransfer.getData("text/plain"),dropData=JSON.parse(dropString),docUuid=CoC7Utilities.getActorDocumentFromDropData(dropData);this.object.docUuid=docUuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)}async addTokenToChase(tokens){1===tokens.length?(this.object.docUuid=tokens[0].document?.uuid,this.object.chaser=0===this.actor?.owners?.filter((u=>!u.isGM)).length,this.object.speedCheck.rollDataString&&delete this.object.speedCheck.rollDataString,await this.render(!0)):ui.notifications.warn(game.i18n.localize("CoC7.ErrorTokenIncorrect"))}async _onAction(event){event.preventDefault();switch(event.currentTarget.dataset.action){case"chase-cancel":this.close();break;case"chase-add":{const participant=new _participant(this.object);if(this.chase.started){if(!(participant.movementAction&&participant.movementAction>0))return void ui.notifications.warn(game.i18n.localize("CoC7.DoesNotMeetMinimumReqToBeAdded"));if(this.data.overrideMovementAction){const slowest=this.chase.slowestParticipant;isNaN(participant.adjustedMov)&&(participant.mov=slowest.adjustedMov),this.data.recalculationNeeded=!1}}await this.chase.addParticipant(participant,{locationUuid:this.object.locationUuid,recalculateMovementActions:this.data.recalculationNeeded,update:this.object.update}),this.close()}break;case"roll-speed-check":{const participant=new _participant(this.object);if(participant.speedCheck.refSet){const roll=new CoC7Check;participant.data.rolled=!0,roll.actor=participant.actor.actorKey,participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);await roll.roll(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0}foundry.utils.mergeObject(this.object,participant.data),this.render(!0)}}}validateParticipant(){const participant=new _participant(this.object);if(this.data||(this.data={}),this.object.excluded=!1,this.object.escaped=!1,this.data.recalculationNeeded=!1,this.data.participantExcluded=!1,this.data.movementActionDelta=0,!this.data.overrideMovementAction){const slowestPrey=this.chase.slowestPrey,fastestChaser=this.chase.fastestChaser,slowest=this.chase.slowestParticipant;participant.adjustedMov<slowest?.adjustedMov?(this.data.recalculationNeeded=!0,participant.movementAction=1):(this.data.recalculationNeeded=!1,participant.calculateMovementActions(slowest?.adjustedMov)),participant.isChaser&&slowestPrey&&!this.chase.system.includeLastCommers&&participant.adjustedMov<slowestPrey.adjustedMov&&(this.object.excluded=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooSlow"),this.data.recalculationNeeded=!1),participant.isPrey&&fastestChaser&&!this.chase.system.includeEscaped&&participant.adjustedMov>fastestChaser.adjustedMov&&(this.object.escaped=!0,this.data.participantExcluded=!0,this.data.excludedBecause=game.i18n.localize("CoC7.TooFast"),this.data.recalculationNeeded=!1)}}static async create(data){if(data.dropData){const docUuid=CoC7Utilities.getActorDocumentFromDropData(data.dropData);docUuid&&(data.docUuid=docUuid),delete data.dropData}return new CoC7ChaseParticipantImporter(data).render(!0)}}class CoC7ChaseSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item","chase"],template:"systems/CoC7/templates/items/chase.html",width:550,height:500,resizable:!0,tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"participants"}]})}static get type(){return"coc7ChaseSheet"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(options={}){const sheetData=super.getData(options);return sheetData.participants=this.item.participantsObject,sheetData.participantsByInitiative=this.item.participantsByInitiative,sheetData.preys=this.item.preys,sheetData.chasers=this.item.chasers,sheetData.preysMinMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.preysMaxMov=sheetData.preys.length?sheetData.preys.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMinMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov<current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasersMaxMov=sheetData.chasers.length?sheetData.chasers.reduce(((prev,current)=>prev.adjustedMov>current.adjustedMov?prev:current)).adjustedMov:-1,sheetData.chasers.forEach((p=>{p.adjustedMov<sheetData.preysMinMov?p.tooSlow():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.chasersMaxMov,p.slowest=p.adjustedMov===sheetData.chasersMinMov})),sheetData.preys.forEach((p=>{p.adjustedMov>sheetData.chasersMaxMov?p.escaped():p.includeInChase(),p.fastest=p.adjustedMov===sheetData.preysMaxMov,p.slowest=p.adjustedMov===sheetData.preysMinMov})),sheetData.locations=this.item.locations,sheetData.allHaveValidMov=this.allHaveValidMov,sheetData.activeLocation=this.item.activeLocation,sheetData.activeLocation&&(sheetData.activeLocation.title=sheetData.activeLocation.coordinates?game.i18n.format("CoC7.LocationCoordinate",{x:sheetData.activeLocation.coordinates.x,y:sheetData.activeLocation.coordinates.y}):game.i18n.localize("CoC7.DragOnCanvas")),sheetData.previousLocation=this.item.previousLocation,sheetData.nextLocation=this.item.nextLocation,sheetData.started=this.item.started,sheetData.isKeeper=game.user.isGM,sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".dropdown-element").on("click",(event=>this._onDropDownElementSelected(event))),html.find(".dropbtn").click((event=>{event.preventDefault(),event.stopPropagation();event.currentTarget.closest(".dropdown").querySelector(".dropdown-content").classList.toggle("show")})),html.find(".dropdown").mouseleave((event=>event.currentTarget.querySelector(".dropdown-content").classList.remove("show"))),html.on("dblclick",".open-actor",CoC7Chat._onOpenActor.bind(this)),html.find(".pin-location").contextmenu(this.clearActiveLocationCoordinates.bind(this)),html.find(".participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".p-side").click(this._onChangeSide.bind(this)),html.find(".delete-participant").click(this._onDeleteParticipant.bind(this)),html.find(".reset-roll").click(this._onResetRoll.bind(this)),html.find(".delete-driver").click(this._onDeleteDriver.bind(this)),html.find(".new-participant").on("dragenter",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragover",(event=>this._onDragEnterParticipant(event))),html.find(".new-participant").on("dragleave",(event=>this._onDragLeaveParticipant(event))),html.find(".new-participant").on("drop",(event=>this._onDragLeaveParticipant(event))),html.find(".add-sign").click(this._onAddParticipant.bind(this)),html.find(".roll-participant").click(this._onRollParticipant.bind(this)),html.find(".button").click(this._onButtonClick.bind(this)),html.find(".name-container").click(this._onLocationClick.bind(this)),html.find(".obstacle-type").click(this._onObstacleTypeClick.bind(this)),html.find(".toggle").click(this._onToggle.bind(this)),html.find(".participant-control").click(this._onParticipantControlClicked.bind(this)),html.find(".chase-control").click(this._onChaseControlClicked.bind(this)),html.find(".location-control").click(this._onLocationControlClick.bind(this));new DragDrop({dragSelector:".pin-location",permissions:{dragstart:this._canPinLocationDragStart.bind(this)},callbacks:{dragstart:this._onPinLocationDragStart.bind(this)}}).bind(html[0]);new DragDrop({dropSelector:".participant",callbacks:{drop:this._onDropParticipant.bind(this)}}).bind(html[0]);if(new DragDrop({dropSelector:".new-participant",callbacks:{drop:this._onAddParticipant.bind(this)}}).bind(html[0]),this.item.started){html.find(".chase-location .chase-participant").click(this._onChaseParticipantClick.bind(this));new DragDrop({dragSelector:".chase-participant",dropSelector:".chase-location",permissions:{dragstart:this._canChaseParticipantDragStart.bind(this),drop:this._canChaseParticipantDragDrop.bind(this)},callbacks:{dragstart:this._onChaseParticipantDragStart.bind(this),drop:this._onChaseParticipantDragDrop.bind(this),dragover:this._onDragEnter.bind(this)}}).bind(html[0]),html.find(".chase-location").on("dragleave",(event=>this._onDragLeave(event)))}}_getSubmitData(updateData={}){let data=new FormDataExtended(this.form,{editors:this.editors}).object;if(data=updateData?mergeObject(data,updateData):expandObject(data),this.item.system.locations?.list?.length&&data.system.startingIndex>this.item.system.locations.list.length&&(data.system.startingIndex=this.item.system.locations.list.length),data.system.participants){const participants=duplicate(this.item.system.participants);for(const[k,v]of Object.entries(data.system.participants)){const index=participants.findIndex((p=>p.uuid===k));if(-1===index)ui.notifications.error("Participant table corrupted");else{const original=participants[index],cleaned=clean(v);mergeObject(original,cleaned),participants[index]=original}}data.system.participants=participants}if(data.locations){const locations=duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}delete data.locations,data.system.locations={list:locations}}return flattenObject(data)}async _updateObject(event,formData){const target=event.currentTarget,override="true"===target?.dataset?.override;if(target?.name?.includes(".hp")){const[,,uuid]=target.name.split("."),participant=this.item.getParticipant(uuid);participant&&participant.actor&&(isNaN(Number(target.value))||await participant.actor.setHp(Number(target.value)))}if(override){const[,type,uuid,subType,data]=target.name.split("."),index=this.findParticipantIndex(uuid);if("participants"===type&&!isNaN(index)&&"speed-check"===subType&&"name"===data){const participants=this.item.system.participants?duplicate(this.item.system.participants):[];return participants[index].speedCheck?(delete participants[index].speedCheck.id,delete participants[index].speedCheck.type):participants[index].speedCheck={},participants[index].speedCheck.name=target.value,void await this.item.update({"system.participants":participants})}}super._updateObject(event,formData)}static async setScroll(app,html,data){if(!data.editable)return;const initialOpening=html[0].classList.contains("window-app"),chaseTrack=html[0].querySelector(".chase-track");if(!chaseTrack)return;let start=data.data.scroll?.chaseTrack.from,end=data.data.scroll?.chaseTrack.to;if(void 0===start&&(start=0),void 0===end&&(end=-1),initialOpening){const remString=$(":root").css("font-size"),remSize=Number(remString.replace("px",""));if(app.item.started){const pCount=app.item.actualParticipants?.length,width=(11.2*pCount+3)*remSize;app.activateTab("setup"),app.position.width=Math.max(width,40*remSize)}else app.position.width=45*remSize;return await app.item.activateNextParticipantTurn({html})}start&&-1!==start&&chaseTrack.scrollTo({top:0,left:start,behavior:"instant"}),-1!==end&&chaseTrack.scrollTo({top:0,left:end,behavior:"smooth"})}static onClose(app,html){app.item.update({"system.trackScrollPosition":-1})}findParticipantIndex(uuid){return this.item.system.participants.findIndex((p=>p.uuid===uuid))}findLocationIndex(uuid){return this.item.system.locations.list.findIndex((p=>p.uuid===uuid))}findLocation(uuid){return this.item.system.locations.list.find((p=>p.uuid===uuid))}findIndex(list,uuid){return list.findIndex((p=>p.uuid===uuid))}async _onDropDownElementSelected(event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget;target.closest(".dropdown-content")?.classList.toggle("show");const assistantUuid=target.closest(".initiative-block")?.dataset?.uuid,beneficiaryUuid=target.dataset.beneficiaryUuid;await this.item.assistParticipant(assistantUuid,beneficiaryUuid)}async _onToggle(event){const target=event.currentTarget,toggle=target.getAttribute("toggle"),data=expandObject({[toggle]:!target.classList.contains("switched-on")});if(data.locations){const locations=duplicate(this.item.system.locations.list);for(const[key,value]of Object.entries(data.locations)){const locationIndex=locations.findIndex((l=>l.uuid===key));if(-1===locationIndex)ui.notifications.error("Locations table corrupted");else{const originalLocation=locations[locationIndex],cleaned=clean(value);mergeObject(originalLocation,cleaned),locations[locationIndex]=originalLocation}}await this.item.updateLocationsList(locations)}}async _onObstacleTypeClick(event){const target=event.currentTarget,uuid=target.closest(".obstacle").dataset.uuid,locations=duplicate(this.item.system.locations.list),locationIndex=this.findIndex(locations,uuid);locations[locationIndex].obstacleDetails||(locations[locationIndex].obstacleDetails={});const obstacle=locations[locationIndex].obstacleDetails,type=target.classList.contains("barrier")?"barrier":"hazard",active=obstacle[type];obstacle.barrier=!1,obstacle.hazard=!1,obstacle[type]=!active,locations[locationIndex].obstacle=!active,await this.item.updateLocationsList(locations)}async _onLocationClick(event){const lUuid=event.currentTarget.closest(".chase-location").dataset.uuid;await this.item.activateLocation(lUuid)}async _onLocationControlClick(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;const action=target.dataset.action,lUuid=target.closest(".chase-location").dataset.uuid;switch(action){case"remove":await this.item.removeLocation(lUuid);break;case"add-after":await this.item.insertLocation(lUuid,{shift:1});break;case"add-before":await this.item.insertLocation(lUuid,{shift:0});break;case"add-participant":CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid:lUuid,dropData:{}})}}async _onChaseParticipantClick(event){const pUuid=event.currentTarget.dataset?.uuid;await this.item.activateParticipant(pUuid)}async _onParticipantControlClicked(event){event.preventDefault();const target=event.currentTarget;if(target.classList.contains("inactive"))return;if(target.classList.contains("dropdown"))return;event.stopPropagation();const participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(participantUuid){switch(target.dataset.action){case"drawGun":await this.toggleParticipantGun(participantUuid);break;case"decreaseActions":await this._onChangeMovementActions(-1,event);break;case"increaseActions":await this._onChangeMovementActions(1,event);break;case"moveBackward":await this.item.moveParticipant(participantUuid,-1,{render:!0});break;case"moveForward":await this.item.moveParticipant(participantUuid,1,{render:!0});break;case"activateParticipant":return await this.item.activateParticipant(participantUuid);case"bonusDice":{const diceNumber=target.dataset.count;await this.item.toggleBonusDice(participantUuid,diceNumber),this.item.activateNextParticipantTurn()}break;case"cautiousApproach":await this.item.cautiousApproach(participantUuid);break;case"editParticipant":{const participant=this.item.getParticipant(participantUuid),location=this.item.getParticipantLocation(participantUuid);participant.data.chaseUuid=this.item.uuid,participant.data.locationUuid=location.uuid,participant.data.update=!0,CoC7ChaseParticipantImporter.create(participant.data)}break;case"removeParticipant":await this.item.removeParticipant(participantUuid)}this.item.activateNextParticipantTurn()}}async _onChaseControlClicked(event){event.preventDefault();const target=event.currentTarget;event.stopPropagation();const locationUuid=target.closest(".obstacle")?.dataset?.uuid;if(locationUuid)return"obstacle-skill-check"===target.dataset.action?this.item.activeParticipantObstacleCheck(locationUuid):void 0}async _onChangeMovementActions(count,event){event.preventDefault(),event.stopPropagation();const target=event.currentTarget,participantUuid=target.closest(".initiative-block")?.dataset?.uuid;if(!participantUuid)return;const participants=this.item.participants,participant=participants.find((p=>participantUuid===p.uuid));participant.hasMaxMvtActions&&count>0||(participant.alterMovementActions(count),await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}async _onButtonClick(event){const target=event.currentTarget,action=target.dataset?.action;if(action)switch(action){case"init":if(!isNaN(this.item.system.locations.total)&&this.item.system.locations.total>0){const locations=Array.apply(null,Array(this.item.system.locations.total)).map((function(){return{uuid:foundry.utils.randomID(16)}}));locations[0].name="Start",locations.length>1&&(locations[locations.length-1].name="End"),await this.item.updateLocationsList(locations)}break;case"reset":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmResetChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmResetChaseHint")}</p>`,yes:async()=>{await this.item.updateLocationsList([]),await this.item.stop()}});break;case"cut2chase":this.item.allHaveSpeedRoll?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmCut2Chase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmCut2ChaseHint")}</p>`,yes:()=>this.item.cutToTheChase()}):ui.notifications.warn(game.i18n.localize("CoC7.NotAllHaveSpeedRoll"));break;case"restart":Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmRestartChase")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmRestartChaseHint")}</p>`,yes:()=>this.item.restart()});break;case"nextRound":this.item.nextActiveParticipant?Dialog.confirm({title:`${game.i18n.localize("CoC7.ConfirmNextChaseRound")}`,content:`<p>${game.i18n.localize("CoC7.ConfirmNextChaseRoundHint")}</p>`,yes:()=>this.item.progressToNextRound()}):this.item.progressToNextRound()}}_canPinLocationDragStart(selector){return!!game.user.isGM}async _onPinLocationDragStart(event){const a=event.currentTarget,i=a.querySelector("i.icon"),dragIcon=a.querySelector(".pin-image");event.dataTransfer.setDragImage(dragIcon,0,dragIcon.height);const locationElement=a.closest(".chase-location"),data={type:"locator",CoC7Type:"chase"};data.icon=i.dataset.linkIcon,data.locationUuid=locationElement.dataset.uuid,data.docUuid=this.item.uuid,data.callBack="locatorDropped",event.dataTransfer.setData("text/plain",JSON.stringify(data))}_canChaseParticipantDragStart(selector){return!!game.user.isGM}_canChaseParticipantDragDrop(selector){return!!game.user.isGM}async _onChaseParticipantDragStart(dragEvent){const dragData={uuid:dragEvent.currentTarget.dataset.uuid,type:"participant"};dragEvent.dataTransfer.setData("text/plain",JSON.stringify(dragData))}async _onChaseParticipantDragDrop(dragEvent){const dataString=dragEvent.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);this._onDragLeave(dragEvent);const locationUuid=dragEvent.currentTarget.dataset.uuid;if("participant"===data.type){const oldLocation=this.findLocation(locationUuid);if(oldLocation&&oldLocation.participants?.includes(data.uuid))return;await this.item.setchaseTrackScroll({render:!1}),await this.item.moveParticipantToLocation(data.uuid,locationUuid)}else CoC7ChaseParticipantImporter.create({chaseUuid:this.item.uuid,locationUuid,dropData:data})}_onDragOver(dragEvent){this._onDragEnter(dragEvent)}_onDragEnter(dragEvent){dragEvent.currentTarget.classList.add("drag-over")}_onDragLeave(dragEvent){const target=dragEvent.currentTarget;target.classList?.remove("drag-over")}async _onDropParticipant(event){const target=event.currentTarget,uuid=target.dataset?.uuid,dataString=event.dataTransfer.getData("text/plain"),data=JSON.parse(dataString);await this.alterParticipant(data,uuid)}async _onAddParticipant(event){event.preventDefault();const data={chaseUuid:this.item.uuid};if(event.dataTransfer){const dataString=event.dataTransfer.getData("text/plain");data.dropData=JSON.parse(dataString)}CoC7ChaseParticipantImporter.create(data)}async _onRollParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[],participant=new _participant(participants[index]);if(participant.speedCheck.refSet){const roll=new CoC7Check;roll.parent=this.item.uuid,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid,roll.actor=participant.actor.actorKey,!event.shiftKey&&participant.actor.player&&(roll.standby=!0,roll.standbyText="CoC7.Chase",roll.standbyRightIcon="systems/CoC7/assets/icons/running-solid.svg"),participant.speedCheck.isCharacteristic?(await roll.rollCharacteristic(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isSkill?(roll.skill=participant.speedCheck.ref,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString):participant.speedCheck.isAttribute&&(await roll.rollAttribute(participant.speedCheck.ref.key),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString)}else if(participant.speedCheck.score){const rollData={rawValue:participant.speedCheck.score,displayName:participant.speedCheck.name,actorName:participant.name?participant.name:void 0};participant.hasActor&&(rollData.actor=participant.actor.actorKey);const roll=CoC7Check.create(rollData);roll.parent=this.item.uuid,await roll.roll(),await roll.toMessage(),participant.data.speedCheck.rollDataString=roll.JSONRollString,participant.data.rolled=!0,participant.data.rollUuid=roll.uuid}await this.item.update({"data.participants":participants})}_onDragEnterParticipant(event){event.currentTarget.classList.add("drag-over")}_onDragLeaveParticipant(event){event.currentTarget.classList.remove("drag-over")}async _onChangeSide(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];participants[index].chaser=!participants[index].chaser,await this.item.update({"data.participants":participants})}async _onDeleteDriver(event){const uuid=event.currentTarget.closest(".driver").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];delete participants[index].docUuid,await this.item.update({"data.participants":participants})}async _onDeleteParticipant(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];participants.splice(index,1),await this.item.update({"data.participants":participants})}async _onResetRoll(event){const uuid=event.currentTarget.closest(".participant").dataset.uuid,index=this.findParticipantIndex(uuid),participants=this.item.system.participants?duplicate(this.item.system.participants):[];delete participants[index].speedCheck.rollDataString,await this.item.update({"data.participants":participants})}async alterParticipant(data,uuid){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}const participants=this.item.system.participants?duplicate(this.item.system.participants):[],oldParticipant=participants[this.findParticipantIndex(uuid)];oldParticipant.mov&&delete oldParticipant.mov,mergeObject(oldParticipant,participant),await this.item.update({"data.participants":participants})}async clearActiveLocationCoordinates(){await this.item.clearActiveLocationCoordinates()}async addParticipant(data){let docUuid,actor;docUuid=data.tokenUuid?data.tokenUuid:data.sceneId&&data.tokenId?`Scene.${data.sceneId}.Token.${data.tokenId}`:data.actorId||data.actorKey||data.id,"Token"===data.type?docUuid=data.uuid:docUuid&&(actor=chatHelper.getActorFromKey(docUuid),actor||"Item"!==data.type||(docUuid=null)),actor&&docUuid!==actor.uuid&&(docUuid=actor.uuid);const participant={};switch(docUuid&&(participant.docUuid=docUuid),data.type?.toLowerCase()){case"actor":default:break;case"item":if(data.id){const item=game.items.get(data.id);if("skill"!==item?.data?.type)return}participant.speedCheck={id:data.data?._id||data.id,type:"item"};break;case"characteristic":participant.speedCheck={id:data.name,type:"characteristic"};break;case"attribute":participant.speedCheck={id:data.name,type:"attribute"}}participant.speedCheck||(this.item.system.vehicle?participant.speedCheck={type:"item",name:game.i18n.localize("CoC7.CoCIDFlag.keys.i.skill.drive-auto")}:participant.speedCheck={id:"con",type:"characteristic",name:game.i18n.localize("CHARAC.Constitution")});const participants=this.item.system.participants?duplicate(this.item.system.participants):[];let unique=!1;for(;!unique;)participant.uuid=foundry.utils.randomID(16),unique=0===participants.filter((p=>p.uuid===participant.uuid)).length;participants.push(participant),await this.item.update({"data.participants":participants})}async toggleParticipantGun(participantUuid){const participants=this.item.system.participants?duplicate(this.item.system.participants):[],participant=participants.find((p=>participantUuid===p.uuid));participant&&(participant.hasAGunReady=!participant.hasAGunReady,await this.item.setchaseTrackScroll({render:!1}),await this.item.updateParticipants(participants))}}function clean(obj){for(const propName in obj){const tp=getType(obj[propName]);"Object"===tp&&(obj[propName]=clean(obj[propName])),("Object"!==tp||Object.entries(obj[propName]).length)&&("string"!==tp||obj[propName].length)?"string"!==tp||isNaN(Number(obj[propName]))||(obj[propName]=Number(obj[propName])):obj[propName]=null}return obj}class CoC7ItemSheetV2 extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","item"],template:"systems/CoC7/templates/items/item-sheetV2.html",width:500,height:450,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(options={}){const sheetData=super.getData(options);return sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}}class CoC7ItemSheet extends CoC7ItemSheetV2{static get defaultOptions(){return mergeObject(super.defaultOptions,{width:525,height:506})}}class CoC7JournalSheet extends JournalSheet{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7MacroConfig extends MacroConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7PlaylistConfig extends PlaylistConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7RollTableConfig extends RollTableConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SceneConfig extends SceneConfig{_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}}class CoC7SetupSheet extends ItemSheet{activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".item .item-name h4").click((event=>this._onItemSummary(event,"items"))),html.find(".item-delete").click((event=>this._onItemDelete(event,"items"))),html.find(".add-bio").click((async()=>await this._onAddBio())),html.find(".remove-section").click(this._onRemoveSection.bind(this)),html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".add-monetary").click(this._onAddMonetary.bind(this)),html.find(".remove-monetary").click(this._onRemoveMonetary.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onDrop(event,collectionName="items"){event.preventDefault(),event.stopPropagation();const dataList=await CoC7Utilities.getDataFromDropEvent(event,"Item");let useCoCID=0;const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];for(const item of dataList)item&&item.system&&["item","weapon","skill","book","spell"].includes(item.type)&&(!CoC7Item.isAnySpec(item)&&collection.find((el=>el.name===item.name))||(0===useCoCID&&(useCoCID=await DropCoCID.create()),collection.push(DropCoCID.processItem(useCoCID,item))));await this.item.update({[`system.${collectionName}`]:collection})}async _onRemoveSection(event){const div=event.currentTarget.closest(".item"),bio=duplicate(this.item.system.bioSections);bio.splice(Number(div.dataset.index),1),await this.item.update({"system.bioSections":bio})}async _onAddBio(){const bio=this.item.system.bioSections?duplicate(this.item.system.bioSections):[];bio.push(null),await this.item.update({"system.bioSections":bio})}_onAddMonetary(){const values=this.item.system.monetary.values?duplicate(this.item.system.monetary.values):[];values.push({name:"",min:null,max:null,cashType:0,cashValue:"",assetsType:0,assetsValue:"",spendingType:0,spendingValue:""}),this.item.update({"system.monetary.values":values})}_onRemoveMonetary(event){const div=event.currentTarget.closest(".item"),values=duplicate(this.item.system.monetary.values);values.splice(Number(div.dataset.index),1),this.item.update({"system.monetary.values":values})}_onItemSummary(event,collectionName="items"){event.preventDefault();const li=$(event.currentTarget).parents(".item"),item=this.item.system[collectionName].find((s=>s._id===li.data("item-id")));if(!item)return;const chatData=item.system.description;if(li.hasClass("expanded")){const summary=li.children(".item-summary");summary.slideUp(200,(()=>summary.remove()))}else{const div=$(`<div class="item-summary">${chatData.value}</div>`),props=$('<div class="item-properties"></div>');div.append(props),li.append(div.hide()),div.slideDown(200)}li.toggleClass("expanded")}async _onItemDelete(event,collectionName="items"){const item=$(event.currentTarget).closest(".item"),itemId=item.data("item-id"),CoCId=item.data("cocid"),itemIndex=this.item.system[collectionName].findIndex((i=>itemId&&i._id===itemId||CoCId&&i===CoCId));if(itemIndex>-1){const collection=this.item.system[collectionName]?duplicate(this.item.system[collectionName]):[];collection.splice(itemIndex,1),await this.item.update({[`system.${collectionName}`]:collection})}}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","setup"],template:"systems/CoC7/templates/items/setup.html",width:565,height:530,dragDrop:[{dragSelector:".item"}],scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded;const era=Object.entries(this.item.flags?.CoC7?.cocidFlag?.eras??{}).filter((e=>e[1])).map((e=>e[0])),items=await game.system.api.cocid.expandItemArray({itemList:this.item.system.items,era:void 0===era[0]||era[0]});sheetData.skills=items.filter((it=>"skill"===it.type)),sheetData.otherItems=items.filter((it=>"skill"!==it.type)),sheetData.skillListEmpty=0===sheetData.skills.length,sheetData.itemsListEmpty=0===sheetData.otherItems.length,sheetData.skills.sort(CoC7Utilities.sortByNameKey),sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData._monetaryFormats=[];for(const key in COC7.monetaryFormats)sheetData._monetaryFormats.push({key,val:game.i18n.localize(COC7.monetaryFormats[key])});sheetData.showCurrencySymbol=["decimalLeft","decimalRight","integerLeft","integerRight"].includes(sheetData.data.system.monetary.format),sheetData._monetaryTypes=[];for(const key in COC7.monetaryTypes)(0===COC7.monetaryTypes[key].filter.length||COC7.monetaryTypes[key].filter.includes(sheetData.data.system.monetary.format))&&sheetData._monetaryTypes.push({key,val:game.i18n.localize(COC7.monetaryTypes[key].name)});return sheetData.oneBlockBackStory=game.settings.get("CoC7","oneBlockBackstory"),sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.enrichedBackstory=TextEditor.enrichHTML(sheetData.data.system.backstory,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}_updateObject(event,formData){const system=expandObject(formData)?.system;system.bioSections&&(formData["system.bioSections"]=Object.values(system.bioSections||[])),system.monetary.values&&(formData["system.monetary.values"]=Object.values(system.monetary.values||[])),"system.characteristics.points.enabled"===event.currentTarget?.name&&(formData["system.characteristics.rolls.enabled"]=!event.currentTarget.checked),"system.characteristics.rolls.enabled"===event.currentTarget?.name&&(formData["system.characteristics.points.enabled"]=!event.currentTarget.checked),super._updateObject(event,formData)}}class CoC7SkillSheet extends ItemSheet{constructor(...args){super(...args),this._sheetTab="items"}static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:520,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}get template(){return`systems/CoC7/templates/items/${this.item.type}-sheet.html`}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hadNonCharacterOwner=sheetData.hasOwner&&"character"!==this.actor?.type,sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.skillProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.isSpecialized=this.item.system.properties.special,sheetData.canModifySpec=!this.item.system.properties.firearm&&!this.item.system.properties.fighting,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&html.find(".toggle-switch").click(this._onClickToggle.bind(this))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _updateObject(event,formData){const skillName=formData["system.skillName"]||this.item.system.skillName;if(this.item.system.properties?.special){const specialization=formData["system.specialization"]||this.item.system.specialization;formData.name=specialization+" ("+skillName+")"}else formData.name=skillName;return super._updateObject(event,formData)}}class CoC7SpellSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{template:"systems/CoC7/templates/items/spell/main.html",classes:["coc7","item","spell"],width:500,height:"auto",resizable:!1,scrollY:[".body"],tabs:[{navSelector:".navigation",contentSelector:".body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}async getData(){const sheetData=super.getData();return sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.isKeeper=game.user.isGM,sheetData.isOwner=this.item.isOwner,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".option").click((event=>this.modifyType(event))),html.find("#cast-spell").click((event=>{event.preventDefault(),this.item.cast()}))}modifyType(event){event.preventDefault(),event.stopPropagation();return $(event.currentTarget).prev().trigger("click")}}class CoC7StatusSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","status"],template:"systems/CoC7/templates/items/status.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}activateListeners(html){super.activateListeners(html),html.find(".effect-control").click((ev=>CoC7ActiveEffect.onManageActiveEffect(ev,this.item)))}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.effects=CoC7ActiveEffect.prepareActiveEffectCategories(this.item.effects,{status:!1}),sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.statusType[key]?COC7.statusType[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7TalentSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","talent"],template:"systems/CoC7/templates/items/talent.html",width:525,height:480,scrollY:[".tab.description"],tabs:[{navSelector:".sheet-navigation",contentSelector:".sheet-body",initial:"description"}]})}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.itemProperties=[];for(const[key,value]of Object.entries(this.item.system.type))value&&sheetData.itemProperties.push(COC7.talentType[key]?COC7.talentType[key]:null);return sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}}class CoC7VehicleSheet extends CoC7ActorSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheetV2","actor","item","vehicle"],width:555,height:420,resizable:!0,template:"systems/CoC7/templates/actors/vehicle.html",dragDrop:[{dragSelector:".actor",dropSelector:".dropZone"}],tabs:[{navSelector:".sheet-nav",contentSelector:".sheet-body",initial:"description"}]})}async getData(){const sheetData=await super.getData();sheetData.properties=[],this.actor.system.properties.armed&&sheetData.properties.push(game.i18n.localize("CoC7.ArmedVehicle"));const expanded=this.actor.getFlag("CoC7","expanded");return sheetData.expanded=void 0===expanded||expanded,sheetData.expanded?sheetData.options.height=420:sheetData.options.height="auto",sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionNotes=TextEditor.enrichHTML(sheetData.data.system.description.notes,{async:!1,secrets:sheetData.editable}),sheetData}activateListeners(html){super.activateListeners(html),html.find(".add-armor").click((async()=>await this._onAddArmor())),html.find(".remove-armor").click((async event=>await this._onRemoveArmor(event))),html.find(".expand-button").click(this._onToggleExpand.bind(this))}async _onToggleExpand(){const expanded=this.actor.getFlag("CoC7","expanded");expanded?(this.oldSize=this.position.height,this.position.height="auto"):this.position.height=this.oldSize||420,await this.actor.setFlag("CoC7","expanded",!expanded)}async _onAddArmor(){const locations=duplicate(this.actor.system.attribs.armor.locations||[]);locations.push({name:null,value:null}),await this.actor.update({"system.attribs.armor.locations":locations})}async _onRemoveArmor(event){const index=event.currentTarget.closest(".armor").dataset.index,locations=duplicate(this.actor.system.attribs.armor.locations||null);locations&&(locations.splice(index,1),await this.actor.update({"system.attribs.armor.locations":locations}))}onCloseSheet(){super.onCloseSheet()}_updateObject(event,formData){const system=expandObject(formData)?.system;system.attribs.armor.locations&&(formData["system.attribs.armor.locations"]=Object.values(system.attribs.armor.locations||[])),super._updateObject(event,formData)}}class CoC7WeaponSheet extends ItemSheet{static get defaultOptions(){return mergeObject(super.defaultOptions,{classes:["coc7","sheet","item"],width:545,height:480,tabs:[{navSelector:".sheet-tabs",contentSelector:".sheet-body",initial:"skills"}]})}get template(){return"systems/CoC7/templates/items/weapon-sheet.html"}_getHeaderButtons(){const headerButtons=super._getHeaderButtons();return addCoCIDSheetHeaderButton(headerButtons,this),headerButtons}getData(){const sheetData=super.getData();sheetData.combatSkill=[],sheetData.hasOwner=!0===this.item.isEmbedded,sheetData.hasOwner&&(sheetData.firearmSkills=this.actor.firearmSkills,sheetData.fightingSkills=this.actor.fightingSkills,sheetData.combatSkill=this.item.actor.items.filter((item=>!("skill"!==item.type||!item.system.properties.combat))),sheetData.combatSkill.sort(CoC7Utilities.sortByNameKey)),sheetData._properties=[];for(const[key,value]of Object.entries(COC7.weaponProperties))sheetData._properties.push({id:key,name:value,isEnabled:!0===this.item.system.properties[key]});sheetData._eras=[];for(const[key,value]of Object.entries(COC7.eras))sheetData._eras.push({price:this.item.system.price[key]??0,id:key,name:game.i18n.localize(value),isEnabled:!0===(this.item.flags?.CoC7?.cocidFlag?.eras??{})[key]});return sheetData._eras.sort(CoC7Utilities.sortByNameKey),sheetData.usesAlternateSkill=!0===this.item.system.properties.auto||!0===this.item.system.properties.brst||!0===this.item.system.properties.thrown,sheetData.enrichedDescriptionValue=TextEditor.enrichHTML(sheetData.data.system.description.value,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionSpecial=TextEditor.enrichHTML(sheetData.data.system.description.special,{async:!1,secrets:sheetData.editable}),sheetData.enrichedDescriptionKeeper=TextEditor.enrichHTML(sheetData.data.system.description.keeper,{async:!1,secrets:sheetData.editable}),sheetData.isKeeper=game.user.isGM,sheetData}activateListeners(html){super.activateListeners(html),this.options.editable&&(html.find(".toggle-switch").click(this._onClickToggle.bind(this)),html.find(".weapon-property").click(this._onPropertyClick.bind(this)))}async _onClickToggle(event){event.preventDefault();const propertyId=event.currentTarget.closest(".toggle-switch").dataset.property;await this.item.toggleProperty(propertyId,isCtrlKey(event))}async _onPropertyClick(event){event.preventDefault();const propertyId=event.currentTarget.closest(".weapon-property").dataset.property;await this.item.toggleProperty(propertyId)}}async function performFilter(e){const appId=e.currentTarget.name.replace(/^coc7[^0-9]+(\d+)$/,"$1"),app=$("div.app[data-appid="+appId+"]"),type=app.find("select[name=coc7type"+appId+"]").val(),name=app.find("input[name=search]").val(),eraElement=app.find("select[name=coc7era"+appId+"]");let era="";switch(type){case"setup":case"skill":case"weapon":eraElement.closest("div.era_select").show(),era=eraElement.val();break;default:eraElement.closest("div.era_select").hide()}const items=await(game.packs.get(app.data("packId"))?.getDocuments());if(void 0===items)return;const show=[],nameFilter=new RegExp(RegExp.escape(name),"i");for(const[,item]of Object.entries(items)){let filter=!0;if(filter&&""!==name&&(filter=item.name.match(nameFilter)),filter&&""!==type&&(filter=item.type===type),filter&&""!==era){const eras=item.flags?.CoC7?.cocidFlag?.eras;eras&&Object.keys(eras).length>0&&!eras[era]&&(filter=!1)}filter&&show.push(item.id)}app.find("ol.directory-list li").each((function(){this.style.display=show.includes(this.dataset.documentId)?"flex":"none"}))}class CoCID{static init(){CONFIG.Actor.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Item.compendiumIndexFields.push("system.base"),CONFIG.Item.compendiumIndexFields.push("system.properties"),CONFIG.JournalEntry.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Macro.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Playlist.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.RollTable.compendiumIndexFields.push("flags.CoC7.cocidFlag"),CONFIG.Scene.compendiumIndexFields.push("flags.CoC7.cocidFlag"),game.system.api={cocid:CoCID}}static regExKey(){return new RegExp("^("+Object.keys(CoCID.gamePropertyLookup).join("|")+")\\.(.*?)\\.(.+)$")}static getPrefix(document){for(const type in CoCID.documentNameLookup)if(document instanceof CoCID.documentNameLookup[type])return type+"."+(document.type??"")+".";return""}static guessId(document){return CoCID.getPrefix(document)+CoC7Utilities.toKebabCase(document.name)}static guessGroupFromKey(id){if(id){const key=id.replace(/([^\\.-]+)$/,"");if("-"===key.substr(-1))return key}return""}static guessGroupFromDocument(document){return CoCID.guessGroupFromKey(document.flags?.CoC7?.cocidFlag?.id)}static eraText(era){return!1===era?game.i18n.localize("CoC7.Any"):(!0===era&&(era=game.settings.get("CoC7","worldEra")),game.i18n.format(COC7.eras[era]??"CoC7.CoCIDFlag.error.unknown-era",{era}))}static async expandItemArray({itemList,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){let items=[];const cocids=itemList.filter((it=>"string"==typeof it));if(items=itemList.filter((it=>"string"!=typeof it)),cocids.length){const found=await CoCID.fromCoCIDRegexBest({cocidRegExp:CoCID.makeGroupRegEx(cocids),type:"i",lang,era,langFallback,showLoading}),all=[];for(const cocid of cocids){const item=found.find((i=>i.flags.CoC7.cocidFlag.id===cocid));item&&all.push(item)}if(all.length<cocids.length){const notmissing=[];for(const doc of all)notmissing.push(doc.flags.CoC7.cocidFlag.id);!0===era&&(era=game.settings.get("CoC7","worldEra")),ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.documents-not-found",{cocids:cocids.filter((x=>!notmissing.includes(x))).join(", "),lang,era:CoCID.eraText(era)}))}items=items.concat(all)}return items}static findCocIdInList(cocid,list){let itemName="";const CoCIDKeys=flattenObject(game.i18n.translations.CoC7.CoCIDFlag.keys);return void 0!==CoCIDKeys[cocid]&&(itemName=CoCIDKeys[cocid]),(void 0===list.filter?Object.values(list):list).filter((i=>i.flags?.CoC7?.cocidFlag?.id===cocid||""!==itemName&&itemName===i.name))}static makeGroupRegEx(cocids){if("string"==typeof cocids)cocids=[cocids];else if(void 0===cocids||"function"!=typeof cocids.filter)return;const splits={},rgx=CoCID.regExKey();for(const i of cocids){const key=i.match(rgx);key&&(void 0===splits[key[1]]&&(splits[key[1]]={}),void 0===splits[key[1]][key[2]]&&(splits[key[1]][key[2]]=[]),splits[key[1]][key[2]].push(key[3]))}const regExParts=[];for(const t in splits){const row=[];for(const s in splits[t])splits[t][s].length>1?row.push(s+"\\.("+splits[t][s].join("|")+")"):row.push(s+"\\."+splits[t][s].join(""));row.length>1?regExParts.push(t+"\\.("+row.join("|")+")"):regExParts.push(t+"\\."+row.join(""))}return regExParts.length>1?new RegExp("^("+regExParts.join("|")+")$"):new RegExp("^"+regExParts.join("")+"$")}static async fromCoCIDRegexAll({cocidRegExp,type,lang=game.i18n.lang,era=!1,scope="match",langFallback=!0,showLoading=!1}={}){if(!cocidRegExp)return[];const result=[];let count=0;if(showLoading&&(["match","all","world"].includes(scope)&&count++,["match","all","compendiums"].includes(scope)&&(count+=game.packs.size)),["match","all","world"].includes(scope)){const worldDocuments=await CoCID.documentsFromWorld({cocidRegExp,type,lang,era,langFallback,progressBar:count});if("match"===scope&&worldDocuments.length)return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),this.filterAllCoCID(worldDocuments,langFallback&&"en"!==lang);result.splice(0,0,...worldDocuments)}if(["match","all","compendiums"].includes(scope)){const compendiaDocuments=await CoCID.documentsFromCompendia({cocidRegExp,type,lang,era,langFallback,progressBar:count});result.splice(result.length,0,...compendiaDocuments)}return showLoading&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:100}),this.filterAllCoCID(result,langFallback&&"en"!==lang)}static async fromCoCIDAll({cocid,lang=game.i18n.lang,era=!1,scope="match",langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];const parts=cocid.match(CoCID.regExKey());return parts?(""===lang&&(lang=game.i18n.lang),CoCID.fromCoCIDRegexAll({cocidRegExp:new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$"),type:parts[1],lang,era,scope,langFallback,showLoading})):[]}static async fromCoCIDRegexBest({cocidRegExp,type,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!1===era)return ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[];const allDocuments=await this.fromCoCIDRegexAll({cocidRegExp,type,lang,era,scope:"all",langFallback,showLoading});return this.filterBestCoCID(allDocuments)}static fromCoCID(cocid,lang=game.i18n.lang,era=!0,langFallback=!0){return!1===era?(ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[]):CoCID.fromCoCIDBest({cocid,lang,era,langFallback})}static fromCoCIDBest({cocid,lang=game.i18n.lang,era=!0,langFallback=!0,showLoading=!1}={}){if(!cocid||"string"!=typeof cocid)return[];if(!1===era)return ui.notifications.error(game.i18n.format("CoC7.CoCIDFlag.error.unknown-era",{era:game.i18n.localize("CoC7.Any")})),[];const type=cocid.split(".")[0],cocidRegExp=new RegExp("^"+CoC7Utilities.quoteRegExp(cocid)+"$");return CoCID.fromCoCIDRegexBest({cocidRegExp,type,lang,era,langFallback,showLoading})}static filterBestCoCID(documents){const bestMatchDocuments=new Map;for(const doc of documents){const docCoCID=doc.getFlag("CoC7","cocidFlag")?.id;if(docCoCID){const currentDoc=bestMatchDocuments.get(docCoCID);if(void 0===currentDoc){bestMatchDocuments.set(docCoCID,doc);continue}if(!(""===(doc.pack??"")||""!==(currentDoc?.pack??"")))continue;let docPriority=parseInt(doc.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER,10);docPriority=isNaN(docPriority)?Number.MIN_SAFE_INTEGER:docPriority;let existingPriority=parseInt(currentDoc.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER,10);existingPriority=isNaN(existingPriority)?Number.MIN_SAFE_INTEGER:existingPriority;if(!(docPriority>=existingPriority))continue;bestMatchDocuments.set(docCoCID,doc)}}return[...bestMatchDocuments.values()]}static filterAllCoCID(documents,langFallback){if(!langFallback)return documents;const bestMatchDocuments=new Map;for(const doc of documents){const docCoCID=doc.getFlag("CoC7","cocidFlag")?.id;if(docCoCID){const docEras=Object.entries(doc.getFlag("CoC7","cocidFlag")?.eras??{}).filter((e=>e[1])).map((e=>e[0])).sort().join("/");let docPriority=parseInt(doc.getFlag("CoC7","cocidFlag")?.priority??Number.MIN_SAFE_INTEGER,10);docPriority=isNaN(docPriority)?Number.MIN_SAFE_INTEGER:docPriority;const key=docCoCID+"/"+docEras+"/"+(isNaN(docPriority)?Number.MIN_SAFE_INTEGER:docPriority),currentDoc=bestMatchDocuments.get(key);if(void 0===currentDoc){bestMatchDocuments.set(key,doc);continue}const docLang=doc.getFlag("CoC7","cocidFlag")?.lang??"en",existingLang=currentDoc?.getFlag("CoC7","cocidFlag")?.lang??"en";"en"===existingLang&&existingLang!==docLang&&bestMatchDocuments.set(key,doc)}}return[...bestMatchDocuments.values()]}static async documentsFromWorld({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}={}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra")),progressBar>0&&SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100/progressBar)});const gameProperty=CoCID.getGameProperty(`${type}..`),candidateDocuments=game[gameProperty]?.filter((d=>{const cocidFlag=d.getFlag("CoC7","cocidFlag");if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));return void 0===candidateDocuments?[]:candidateDocuments.sort(CoCID.compareCoCIDPrio)}static async documentsFromCompendia({cocidRegExp,type,lang=game.i18n.lang,era=!1,langFallback=!0,progressBar=0}){if(!cocidRegExp)return[];""===lang&&(lang=game.i18n.lang),!0===era&&(era=game.settings.get("CoC7","worldEra"));const eraText=CoCID.eraText(era),documentType=CoCID.getDocumentType(type).schema.name,candidateDocuments=[];let count=1;for(const pack of game.packs)if(progressBar>0&&(SceneNavigation.displayProgressBar({label:game.i18n.localize("SETUP.PackagesLoading"),pct:Math.floor(100*count/progressBar)}),count++),pack.documentName===documentType){pack.indexed||await pack.getIndex();const indexInstances=pack.index.filter((i=>{const cocidFlag=i.flags?.CoC7?.cocidFlag;if(void 0===cocidFlag)return!1;const eras=cocidFlag.eras??[],matchingEras=!1===era||0===Object.entries(eras).length||Object.prototype.hasOwnProperty.call(eras,era)&&eras[era];return cocidRegExp.test(cocidFlag.id)&&[lang,langFallback?"en":"-"].includes(cocidFlag.lang)&&matchingEras}));for(const index of indexInstances){const document=await pack.getDocument(index._id);if(!document){const msg=game.i18n.format("CoC7.CoCIDFlag.error.document-not-found",{cocid:cocidRegExp,lang,era:eraText});throw ui.notifications.error(msg),console.log("CoC7 |",msg,index),new Error}candidateDocuments.push(document)}}return candidateDocuments.sort(CoCID.compareCoCIDPrio)}static compareCoCIDPrio(a,b){return b.getFlag("CoC7","cocidFlag")?.priority-a.getFlag("CoC7","cocidFlag")?.priority}static getGameProperty(cocid){const type=cocid.split(".")[0],gameProperty=CoCID.gamePropertyLookup[type];if(!gameProperty)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return gameProperty}static get gamePropertyLookup(){return{a:"actors",c:"cards",i:"items",je:"journal",m:"macros",p:"playlists",rt:"tables",s:"scenes"}}static getDocumentType(cocid){const type=cocid.split(".")[0],documentType=CoCID.documentNameLookup[type];if(!documentType)throw ui.notifications.warn(game.i18n.format("CoC7.CoCIDFlag.error.incorrect.type")),console.log("CoC7 | ",cocid),new Error;return documentType}static get documentNameLookup(){return{a:Actor,c:Card,i:Item,je:JournalEntry,m:Macro,p:Playlist,rt:RollTable,s:Scene}}}function init_listen(){Hooks.once("init",(async()=>{CONFIG.ActiveEffect.documentClass=CoC7ActiveEffect,CONFIG.Actor.documentClass=CoCActor,CONFIG.Actor.documentClasses={vehicle:CoC7Vehicle},CONFIG.Item.documentClass=CoC7Item,CONFIG.Item.documentClasses={book:CoC7Book,spell:CoC7Spell,chase:CoC7Chase,skill:CoC7Skill},async function(){loadTemplates(["systems/CoC7/templates/actors/parts/npc-skills.html","systems/CoC7/templates/actors/parts/npc-combat.html","systems/CoC7/templates/actors/parts/actor-inventory.html","systems/CoC7/templates/actors/parts/actor-inventory-items.html","systems/CoC7/templates/actors/parts/actor-background.html","systems/CoC7/templates/common/active-effects.hbs","systems/CoC7/templates/actors/parts/actor-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-keeper-mythos-enounters.hbs","systems/CoC7/templates/actors/parts/actor-skills-v2.html","systems/CoC7/templates/actors/parts/character-development-v2.html","systems/CoC7/templates/actors/parts/development-controls.html","systems/CoC7/templates/actors/parts/vitals.html","systems/CoC7/templates/actors/parts/combat.html","systems/CoC7/templates/actors/character-sheet-v2.html","systems/CoC7/templates/actors/character/summary.html","systems/CoC7/templates/items/book/details.html","systems/CoC7/templates/items/spell/details.html","systems/CoC7/templates/apps/investigator-wizard/introduction.hbs","systems/CoC7/templates/apps/investigator-wizard/configuration.hbs","systems/CoC7/templates/apps/investigator-wizard/select-setup.hbs","systems/CoC7/templates/apps/investigator-wizard/select-archetype.hbs","systems/CoC7/templates/apps/investigator-wizard/select-occupation.hbs","systems/CoC7/templates/apps/investigator-wizard/set-characteristics.hbs","systems/CoC7/templates/apps/investigator-wizard/set-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/view-attributes.hbs","systems/CoC7/templates/apps/investigator-wizard/set-investigator.hbs","systems/CoC7/templates/apps/investigator-wizard/set-occupation-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/toggle-skill.hbs","systems/CoC7/templates/apps/investigator-wizard/set-archetype-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/points-skills.hbs","systems/CoC7/templates/apps/investigator-wizard/backstory.hbs","systems/CoC7/templates/apps/investigator-wizard/create.hbs"])}(),function(){if(game.settings.registerMenu("CoC7","gameRules",{name:"CoC7.Settings.Rules.Name",label:"CoC7.Settings.Rules.Label",hint:"CoC7.Settings.Rules.Hint",icon:"fas fa-book",type:CoC7GameRuleSettings,restricted:!0}),CoC7GameRuleSettings.registerSettings(),game.settings.register("CoC7","useContextMenus",{name:"SETTINGS.UseContextMenus",hint:"SETTINGS.UseContextMenusHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","dholeUploadDirectory",{name:"CoC7.Settings.DholeUpload.Directory.Name",hint:"CoC7.Settings.DholeUpload.Directory.Hint",scope:"world",config:!0,type:CoC7DirectoryPicker.DefaultDirectory,default:"[data] worlds/"+game.world.id+"/dhole-images"}),game.settings.register("CoC7","worldEra",{name:"CoC7.Settings.WorldEra.Name",hint:"CoC7.Settings.WorldEra.Hint",scope:"world",config:!0,default:"standard",type:String,choices:COC7.eras,onChange:()=>{ui.players.render(!0)}}),game.settings.register("CoC7","dropCoCID",{name:"CoC7.Settings.DropCoCID.Name",hint:"CoC7.Settings.DropCoCID.Hint",scope:"world",config:!0,default:"",type:String,choices:{"":"CoC7.Settings.DropCoCID.Prompt",Y:"CoC7.Settings.DropCoCID.UseCoCID",N:"CoC7.Settings.DropCoCID.IgnoreCoCID"}}),game.settings.register("CoC7","displayInitDices",{name:"SETTINGS.displayInitDices",hint:"SETTINGS.displayInitDicesHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayInitAsText",{name:"SETTINGS.displayInitAsText",hint:"SETTINGS.displayInitAsTextHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","stanbyGMRolls",{name:"SETTINGS.StanbyGMRolls",hint:"SETTINGS.StanbyGMRollsHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","allowFlatDiceModifier",{name:"SETTINGS.AllowFlatDiceModifier",hint:"SETTINGS.AllowFlatDiceModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","allowFlatThresholdModifier",{name:"SETTINGS.AllowFlatThresholdModifier",hint:"SETTINGS.AllowFlatThresholdModifierHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","defaultCheckDifficulty",{name:"SETTINGS.DefaultDifficulty",hint:"SETTINGS.DefaultDifficultyHint",scope:"world",config:!0,default:"regular",type:String,choices:{regular:"SETTINGS.CheckDifficultyRegular",unknown:"SETTINGS.CheckDifficultyUnknown"}}),game.settings.register("CoC7","selfRollWhisperTarget",{name:"SETTINGS.SelfRollWhisperTarget",hint:"SETTINGS.SelfRollWhisperTargetHint",scope:"world",config:!0,default:"everyone",type:String,choices:{nobody:"SETTINGS.DoNotAdvise",owners:"SETTINGS.AdviseOwnersOnly",everyone:"SETTINGS.AdviseAllPlayer"}}),game.settings.register("CoC7","trustedCanModfyChatCard",{name:"SETTINGS.TrustedCanModfyChatCard",hint:"SETTINGS.TrustedCanModfyChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","trustedCanSeeChatCard",{name:"SETTINGS.TrustedCanSeeChatCard",hint:"SETTINGS.TrustedCanSeeChatCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayActorOnCard",{name:"SETTINGS.DisplayActorOnCard",hint:"SETTINGS.DisplayActorOnCardHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","displayCheckSuccessLevel",{name:"SETTINGS.DisplayCheckSuccessLevel",scope:"client",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","displayResultType",{name:"SETTINGS.DisplayResultType",scope:"client",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","useToken",{name:"SETTINGS.UseToken",hint:"SETTINGS.UseTokenHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","enableStatusIcons",{name:"SETTINGS.EnableStatusIcons",hint:"SETTINGS.EnableStatusIconsHint",scope:"world",config:!0,type:Boolean,default:!0}),game.settings.register("CoC7","gridSpaces",{name:"SETTINGS.RestrictGridSpaces",hint:"SETTINGS.RestrictGridSpacesHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","distanceElevation",{name:"SETTINGS.CheckElevation",hint:"SETTINGS.CheckElevationHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","distanceTheatreOfTheMind",{name:"SETTINGS.SceneDistanceNotCalcualtedNoError",hint:"SETTINGS.SceneDistanceNotCalcualtedNoErrorHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideGameArtwork",{name:"SETTINGS.OverrideGameArtwork",hint:"SETTINGS.OverrideGameArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideGameArtwork")&&(game.settings.register("CoC7","artPauseImage",{name:"SETTINGS.ArtPauseImage",hint:"SETTINGS.ArtPauseImageHint",scope:"world",config:!0,default:"systems/CoC7/assets/icons/time-trap.svg",type:String}),game.settings.register("CoC7","artPauseText",{name:"SETTINGS.ArtPauseText",hint:"SETTINGS.ArtPauseTextHint",scope:"world",config:!0,default:"The Blind Idiot God is dreaming...",type:String})),game.settings.register("CoC7","displayPlayerNameOnSheet",{name:"SETTINGS.displayPlayerNameOnSheet",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","toolTipDelay",{name:"CoC7.toolTipDelay",scope:"world",config:!0,default:2e3,type:Number}),game.settings.register("CoC7","showIconsOnly",{name:"SETTINGS.showIconsOnly",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","playerUnlockSheetMode",{name:"SETTINGS.PlayerUnlockSheetMode",scope:"world",config:!0,default:"always",type:String,choices:{always:"SETTINGS.AlwaysEditable",creation:"SETTINGS.CreationModeOnly",never:"SETTINGS.NeverEditable"}}),game.settings.register("CoC7","statusPlayerEditable",{name:"SETTINGS.StatusPlayerEditable",hint:"SETTINGS.StatusPlayerEditableHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","oneBlockBackstory",{name:"SETTINGS.OneBlockBackStory",hint:"SETTINGS.OneBlockBackStoryHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","overrideSheetArtwork",{name:"SETTINGS.OverrideSheetArtwork",hint:"SETTINGS.OverrideSheetArtworkHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.get("CoC7","overrideSheetArtwork")){function _setRootFontSize(size){$(":root").css("font-size",size),ui.sidebar.render(!0);for(const[,w]of Object.entries(ui.windows))w.render(!0)}game.settings.register("CoC7","artWorkSheetBackground",{name:"SETTINGS.ArtWorkSheetBackground",hint:"SETTINGS.ArtWorkSheetBackgroundHint",scope:"world",config:!0,default:"url('./assets/images/background.webp') 4 repeat",type:String}),game.settings.register("CoC7","artWorkSheetBackgroundType",{name:"SETTINGS.ArtWorkSheetBackgroundType",scope:"world",config:!0,default:"slice",type:String,choices:{slice:"SETTINGS.BackgroundSlice",auto:"SETTINGS.BackgroundAuto",contain:"SETTINGS.BackgroundContain",cover:"SETTINGS.BackgroundCover"}}),game.settings.register("CoC7","artWorkOtherSheetBackground",{name:"SETTINGS.ArtWorkOtherSheetBackground",hint:"SETTINGS.ArtWorkOtherSheetBackgroundHint",scope:"world",config:!0,default:"url( './assets/images/background.webp')",type:String}),game.settings.register("CoC7","artworkSheetImage",{name:"SETTINGS.ArtworkSheetImage",hint:"SETTINGS.ArtworkSheetImageHint",scope:"world",config:!0,default:"url('./assets/images/tentacles.webp')",type:String}),game.settings.register("CoC7","artworkFrontColor",{name:"SETTINGS.ArtworkFrontColor",hint:"SETTINGS.ArtworkFrontColorHint",scope:"world",config:!0,default:"rgba(43,55,83,1)",type:String}),game.settings.register("CoC7","artworkBackgroundColor",{name:"SETTINGS.ArtworkBackgroundColor",hint:"SETTINGS.ArtworkBackgroundColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkInteractiveColor",{name:"SETTINGS.ArtworkInteractiveColor",hint:"SETTINGS.ArtworkInteractiveColorHint",scope:"world",config:!0,default:"rgba(103,11,11,1)",type:String}),game.settings.register("CoC7","artworkFixedSkillLength",{name:"SETTINGS.ArtworkFixedSkillLength",hint:"SETTINGS.ArtworkFixedSkillLengthHint",scope:"world",config:!0,default:!0,type:Boolean}),game.settings.register("CoC7","artworkMainFont",{name:"SETTINGS.ArtworkMainFont",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontBold",{name:"SETTINGS.ArtworkMainFontBold",scope:"world",config:!0,default:"",type:String}),game.settings.register("CoC7","artworkMainFontSize",{name:"SETTINGS.ArtworkMainFontSize",scope:"world",config:!0,default:16,type:Number,onChange:size=>_setRootFontSize(size)})}if(game.settings.register("CoC7","disregardUsePerRound",{name:"SETTINGS.DisregardUsePerRound",hint:"SETTINGS.DisregardUsePerRoundHint",scope:"world",config:!0,default:!1,type:Boolean}),game.settings.register("CoC7","disregardAmmo",{name:"SETTINGS.DisregardAmmo",hint:"SETTINGS.DisregardAmmoHint",scope:"world",config:!0,default:!1,type:Boolean}),game.modules.get("dice-so-nice")?.active){game.settings.register("CoC7","syncDice3d",{name:"SETTINGS.SyncDice3D",hint:"SETTINGS.SyncDice3DHint",scope:"world",config:!0,default:!0,type:Boolean});const[version]=game.modules.get("dice-so-nice")?.version.split(".");!isNaN(Number(version))&&Number(version)>=3&&(game.settings.register("CoC7","tenDieBonus",{name:"SETTINGS.TenDieBonus",hint:"SETTINGS.TenDieBonusHint",scope:"client",config:!0,default:"bronze",type:String}),game.settings.register("CoC7","tenDiePenalty",{name:"SETTINGS.TenDiePenalty",hint:"SETTINGS.TenDiePenaltyHint",scope:"client",config:!0,default:"bloodmoon",type:String}))}game.settings.register("CoC7","debugmode",{name:"SETTINGS.DebugMode",hint:"SETTINGS.DebugModeHint",scope:"client",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","experimentalFeatures",{name:"SETTINGS.ShowExperimentalFeatures",hint:"SETTINGS.ShowExperimentalFeaturesHint",scope:"world",config:!0,type:Boolean,default:!1}),game.settings.register("CoC7","hiddendevmenu",{name:"Hidden dev menu",hint:"Use at your own risk",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","developmentEnabled",{name:"Dev phased allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","showWelcomeMessage",{name:"SETTINGS.showWelcomeMessage",hint:"SETTINGS.showWelcomeMessage",scope:"world",config:!1,default:!0,type:Boolean}),game.settings.register("CoC7","charCreationEnabled",{name:"Char creation allowed",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","systemUpdateVersion",{name:"System update version",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","systemUpdatedModuleVersion",{scope:"world",config:!1,default:{}}),game.settings.register("CoC7","xpEnabled",{name:"Enable XP gain",scope:"world",config:!1,type:Boolean,default:!0}),game.settings.register("CoC7","showInstructions",{name:"Show changelog/instructions",scope:"world",config:!1,type:String,default:"0"}),game.settings.register("CoC7","InvestigatorWizardSetup",{name:"Force specific setup CoC ID for Investigator Wizard",scope:"world",config:!1,type:String,default:""}),game.settings.register("CoC7","InvestigatorWizardQuantity",{name:"Number of investigators a single user without create actor rights can own",scope:"world",config:!1,type:Number,default:0}),game.settings.register("CoC7","InvestigatorWizardOwnership",{name:"Default permissions for non owner players",scope:"world",config:!1,type:Number,default:CONST.DOCUMENT_OWNERSHIP_LEVELS.NONE}),game.settings.register("CoC7","InvestigatorWizardRerolls",{name:"Allow players to reroll characteristics",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardPointBuy",{name:"Force point buy instead of setup choice",scope:"world",config:!1,type:Boolean,default:!1}),game.settings.register("CoC7","InvestigatorWizardQuickFire",{name:"Quick fire setup values",scope:"world",config:!1,type:Array,default:[]}),CONFIG.Combat.initiative={formula:"@characteristics.dex.value",decimals:4},CONFIG.debug.hooks=!!game.settings.get("CoC7","debugmode"),CONFIG.Dice.terms.t=CoC7DecaderDie,CONFIG.Dice.terms.o=CoC7DecaderDieOther}(),Actors.unregisterSheet("core",ActorSheet),Actors.registerSheet("CoC7",CoC7NPCSheet,{types:["npc"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7VehicleSheet,{types:["vehicle"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CreatureSheet,{types:["creature"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7ContainerSheet,{types:["container"],makeDefault:!0}),Actors.registerSheet("CoC7",CoC7CharacterSheet,{types:["character"],makeDefault:!0}),Items.unregisterSheet("core",ItemSheet),Items.registerSheet("CoC7",CoC7SkillSheet,{types:["skill"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7WeaponSheet,{types:["weapon"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7BookSheet,{types:["book"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SpellSheet,{types:["spell"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7TalentSheet,{types:["talent"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7StatusSheet,{types:["status"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7OccupationSheet,{types:["occupation"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ArchetypeSheet,{types:["archetype"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7SetupSheet,{types:["setup"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ChaseSheet,{types:["chase"],makeDefault:!0}),Items.registerSheet("CoC7",CoC7ItemSheet,{types:["item"]}),Items.registerSheet("CoC7",CoC7ItemSheetV2,{types:["item"],makeDefault:!0}),Scenes.unregisterSheet("core",SceneConfig),Scenes.registerSheet("CoC7",CoC7SceneConfig,{makeDefault:!0}),Journal.unregisterSheet("core",JournalSheet),Journal.registerSheet("CoC7",CoC7JournalSheet,{makeDefault:!0}),RollTables.unregisterSheet("core",RollTableConfig),RollTables.registerSheet("CoC7",CoC7RollTableConfig,{makeDefault:!0}),Macros.unregisterSheet("core",MacroConfig),Macros.registerSheet("CoC7",CoC7MacroConfig,{makeDefault:!0}),Playlists.unregisterSheet("core",PlaylistConfig),Playlists.registerSheet("CoC7",CoC7PlaylistConfig,{makeDefault:!0}),Handlebars.registerHelper("rollActorImg",(function(actorKey){return chatHelper.getActorImgFromKey(actorKey)||"../icons/svg/mystery-man-black.svg"})),function(){Hooks.on("renderCompendium",(async(app,html,data)=>{if("Item"===app.collection.documentName){await app.collection.getIndex();const types=[...new Set(data.index.filter((i=>"#[CF_tempEntity]"!==i.name)).map((item=>item.type)))],select=[];select.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>"),types.includes("archetype")&&select.push('<option value="archetype">'+game.i18n.localize("CoC7.Entities.Archetype")+"</option>"),types.includes("book")&&select.push('<option value="book">'+game.i18n.localize("CoC7.Entities.Book")+"</option>"),types.includes("item")&&select.push('<option value="item">'+game.i18n.localize("CoC7.Entities.Item")+"</option>"),types.includes("occupation")&&select.push('<option value="occupation">'+game.i18n.localize("CoC7.Entities.Occupation")+"</option>"),types.includes("setup")&&select.push('<option value="setup">'+game.i18n.localize("CoC7.Entities.Setup")+"</option>"),types.includes("skill")&&select.push('<option value="skill">'+game.i18n.localize("CoC7.Entities.Skill")+"</option>"),types.includes("spell")&&select.push('<option value="spell">'+game.i18n.localize("CoC7.Entities.Spell")+"</option>"),types.includes("status")&&select.push('<option value="status">'+game.i18n.localize("CoC7.Entities.Status")+"</option>"),types.includes("talent")&&select.push('<option value="talent">'+game.i18n.localize("CoC7.Entities.Talent")+"</option>"),types.includes("weapon")&&select.push('<option value="weapon">'+game.i18n.localize("CoC7.Entities.Weapon")+"</option>");const eras=[];eras.push('<option value="">'+game.i18n.localize("CoC7.All")+"</option>");for(const era of Object.entries(COC7.eras).map((e=>({id:e[0],name:game.i18n.localize(e[1])}))).sort(CoC7Utilities.sortByNameKey))eras.push('<option value="'+era.id+'">'+era.name+"</option>");html.data("packId",app.metadata.id);let uncommon=game.i18n.localize("CoC7.SkillRarityShort");"CoC7.SkillRarityShort"===uncommon&&(uncommon="??"),html.find("li.directory-item").each((function(){const row=$(this);let item=[];item=void 0!==data.index?data.index.find((i=>i._id===row.data("document-id"))):app.collection.index.get(row.data("document-id")),item&&"skill"===item.type&&row.find("a").html(item.name+" ("+(item.system?.base??"?")+"%"+(item.system?.properties?.rarity?" "+uncommon:"")+")")})),html.find("header.directory-header").after('<div class="compendiumfilter"><div class="header-search flexrow"><i class="fas fa-layer-group"></i><select name="coc7type'+app.appId+'" style="">'+select.join("")+'</select></div><div class="header-search flexrow era_select" style="display:none"><i class="fas fa-layer-group"></i><select name="coc7era'+app.appId+'" style="">'+eras.join("")+"</select></div></div>"),html.find("select").change(performFilter.bind(this)),html.find("input").keyup(performFilter.bind(this))}}))}(),CoCID.init(),CoC7Link.init()}))}class CoC7Tooltips{constructor(){this.ToolTipHover=null,this.toolTipTimer=null}displayToolTip(toolTip){if(void 0!==this.ToolTipHover){const bounds=this.ToolTipHover.getBoundingClientRect();if(!isNaN(bounds.left||"")&&!isNaN(bounds.top||"")){let left=bounds.left,top=bounds.top;const heightText=$(this.ToolTipHover).outerHeight();$("body").append('<div id="help-tooltip">'+toolTip+"</div>");const tip=$("#help-tooltip"),heightTip=tip.outerHeight(),widthTip=tip.outerWidth();window.innerHeight<1.5*heightText+heightTip+top?top-=heightTip:top+=1.5*heightText,window.innerWidth<widthTip+left&&(left=window.innerWidth-widthTip),tip.css({left:left+"px",top:top+"px"})}}}toolTipLeave(event){game.CoC7Tooltips.ToolTipHover===event.currentTarget&&(clearTimeout(game.CoC7Tooltips.toolTipTimer),game.CoC7Tooltips.ToolTipHover=null,$("#help-tooltip").remove())}}let CoC7Tour=class{};"undefined"!=typeof Tour&&(CoC7Tour=class extends Tour{async waitForElement(selector){return new Promise(((resolve,reject)=>{if(document.querySelector(selector))return void resolve();new MutationObserver(((mutations,observer)=>{document.querySelectorAll(selector).forEach((el=>{resolve(),observer.disconnect()}))})).observe(document.body,{childList:!0,subtree:!0})}))}async _preStep(){if(await super._preStep(),0===this.stepIndex)for(const app of Object.values(ui.windows))app.close();await this.waitForElement(this.currentStep.selector),void 0!==this.currentStep.sidebarTab&&ui.sidebar.activateTab(this.currentStep.sidebarTab)}async _postStep(){if(await super._postStep(),!(this.stepIndex<0)&&this.hasNext&&this.currentStep.action)if(this.isResetting)this.isResetting=!1;else if("click"===this.currentStep.action)document.querySelector(this.currentStep.selector).click()}async reset(){"completed"!==this.status&&(this.isResetting=!0),await super.reset()}});class EnableVariantRulesEn extends CoC7Tour{constructor(config){super(mergeObject({title:"Enable optional/variant rules.",description:"Learn how to enable Pulp Cthulhu rules, or other variant rules",canBeResumed:!1,display:!0,steps:[{id:"goto-settings",selector:'.tabs>a[data-tab="settings"]',title:"COC7.Tour.GotoSettingsTitle",content:"COC7.Tour.GotoSettingsContent",sidebarTab:"settings"},{id:"goto-configure",selector:'[data-action="configure"]',title:"COC7.Tour.GotoConfigureTitle",content:"COC7.Tour.GotoConfigureContent",action:"click"},{id:"goto-system-settings",selector:'[data-tab="system"]',title:"COC7.Tour.GotoSystemSettingsTitle",content:"COC7.Tour.GotoSystemSettingsContent",action:"click"},{id:"goto-game-rules",selector:'[data-category="system"] [data-key="CoC7.gameRules"]',title:"COC7.Tour.GotoGameRulesTitle",content:"COC7.Tour.GotoGameRulesContent",action:"click"},{id:"save-game-rules",selector:"#rules-settings [name=submit]",title:"COC7.Tour.SaveGameRulesTitle",content:"COC7.Tour.SaveGameRulesContent"}],localization:{"COC7.Tour.GotoSettingsTitle":"Game Settings","COC7.Tour.GotoSettingsContent":"Go to the Game Settings tab","COC7.Tour.GotoConfigureTitle":"Configure Settings","COC7.Tour.GotoConfigureContent":"Click on the Configure Settings button","COC7.Tour.GotoSystemSettingsTitle":"System Settings","COC7.Tour.GotoSystemSettingsContent":"Go to the System Settings tab","COC7.Tour.GotoGameRulesTitle":"Configure Variant/Optional Rules","COC7.Tour.GotoGameRulesContent":"Click on the Configure Variant/Optional Rules button","COC7.Tour.SaveGameRulesTitle":"Save rule changes","COC7.Tour.SaveGameRulesContent":"Once you have made your changes click on the Save Changes button"}},config))}}class EnableVariantRulesFr extends EnableVariantRulesEn{constructor(config){super({title:"Activez les rgles optionnelles.",description:"Activez les rgles optionelles et Pulp Cthulhu",localization:{"COC7.Tour.GotoSettingsTitle":"Paramtres","COC7.Tour.GotoSettingsContent":'Ouvrir l\'onglet "Paramtres"',"COC7.Tour.GotoConfigureTitle":"Configuration des options","COC7.Tour.GotoConfigureContent":'Cliquez sur "Configuration des options"',"COC7.Tour.GotoSystemSettingsTitle":"Systme de jeu","COC7.Tour.GotoSystemSettingsContent":'Ouvrez l\'onglet "Systme de jeu"',"COC7.Tour.GotoGameRulesTitle":"Configurer les variantes/rgles optionnelles","COC7.Tour.GotoGameRulesContent":'Clickez sur le boutton "Configurer les variantes/rgles optionnelles"',"COC7.Tour.SaveGameRulesTitle":"Sauvegarder les modifications","COC7.Tour.SaveGameRulesContent":'Apres avoir choisis les options cliquez sur le bouton "Sauvegarder les modifications"'}})}}function ready_listen(){Hooks.once("ready",(async()=>{console.log("Call of Cthulhu 7th Edition | Ready"),game.settings.get("CoC7","showWelcomeMessage")&&game.user.isGM,game.CoC7Tooltips=new CoC7Tooltips;const instructionsVersion=game.settings.get("CoC7","showInstructions");let lang=game.i18n.lang;const readMe={en:"sxB2OXbfwV6M0nyQ",fr:"tdakyzTVOQsAMdSm"};void 0===readMe[lang]&&(lang="en"),CONFIG.CoC7=CONFIG.CoC7??{},CONFIG.CoC7.Manual=readMe[lang],isNewerVersion(game.system.version,instructionsVersion??"0")&&((await game.packs.get("CoC7.system-doc").getDocument(CONFIG.CoC7.Manual))?.sheet.render(!0),game.settings.set("CoC7","showInstructions",game.system.version)),async function(){try{let lang=game.i18n.lang;const tours={en:{"enable-variant-rules":EnableVariantRulesEn},fr:{"enable-variant-rules":EnableVariantRulesFr}};void 0===tours[lang]&&(lang="en");for(const tourName in tours[lang])game.tours.register("CoC7",tourName,new tours[lang][tourName])}catch(err){console.error("TOUR ERROR",err)}}()}))}const CoC7Hooks={listen(){Hooks.on("createToken",(async(tokenDocument,options,actorId)=>{"icons/svg/mystery-man.svg"===tokenDocument.texture.src&&tokenDocument.texture.src!==tokenDocument._object.actor.img&&(tokenDocument.texture.src=tokenDocument._object.actor.img),(tokenDocument._object.actor.hasRollableCharacteristics||tokenDocument._object.actor.hosRollableSkills)&&new Dialog({title:game.i18n.localize("CoC7.TokenCreationRoll.Title"),content:game.i18n.localize("CoC7.TokenCreationRoll.Prompt"),buttons:{roll:{label:game.i18n.localize("CoC7.TokenCreationRoll.ButtonRoll"),callback:async()=>await tokenDocument._object.actor.rollCharacteristicsValue()},average:{label:game.i18n.localize("CoC7.TokenCreationRoll.ButtonAverage"),callback:async()=>await tokenDocument._object.actor.averageCharacteristicsValue()},skip:{label:game.i18n.localize("CoC7.Migrate.ButtonSkip")}}}).render(!0)})),Hooks.once("diceSoNiceReady",(dice3d=>{dice3d.addDicePreset({type:"dt",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),dice3d.addDicePreset({type:"do",labels:["10","20","30","40","50","60","70","80","90","00"],fontScale:.75,system:"standard"}),game.CoC7DecaderDSNFaces=new CoC7DecaderDSNFaces})),Hooks.on("diceSoNiceRollStart",(dice3d=>{game.CoC7DecaderDSNFaces.setFaces()})),init_listen(),ready_listen(),Hooks.on("renderActorSheet",(async(data,html,options)=>{})),Hooks.on("renderChatMessage",((app,html,data)=>{CoC7Chat.renderMessageHook(app,html,data),CoC7Chat.renderChatMessageHook(app,html,data),CoC7Parser.ParseMessage(app,html,data),CoC7Link.bindEventsHandler(html)})),Hooks.on("renderDialog",((dialog,html)=>{const form=html.find("form");if(form.is("#document-create")&&0!==form.find("select").length){const entityCreateSelectTag=form.find("[name='type']"),entitySortedList=[],showExperimental=!!game.settings.get("CoC7","experimentalFeatures");entityCreateSelectTag.children().each(((o,entityOption)=>{const key=entityOption.textContent?.capitalize();game.i18n.has(`CoC7.Entities.${key}`)&&(entityOption.textContent=game.i18n.localize(`CoC7.Entities.${key}`)),!showExperimental&&["vehicle"].includes(entityOption.value)||entitySortedList.push(entityOption)})),entityCreateSelectTag.empty(),entityCreateSelectTag.append(entitySortedList.sort(((first,second)=>first.innerText.localeCompare(second.innerText)))),"actor"===entityCreateSelectTag.val()?entityCreateSelectTag.val("character"):"book"===entityCreateSelectTag.val()&&entityCreateSelectTag.val("item")}})),Hooks.on("renderItemSheet",(async(data,html,options)=>{})),Hooks.on("renderPause",(async(data,html,options)=>{game.settings.get("CoC7","overrideGameArtwork")&&("null"===game.settings.get("CoC7","artPauseImage").toLowerCase()&&html.find("img").remove(),""!==game.settings.get("CoC7","artPauseImage")&&html.find("img").attr("src",game.settings.get("CoC7","artPauseImage")),""!==game.settings.get("CoC7","artPauseText")&&html.find("h3").html(game.settings.get("CoC7","artPauseText")))})),Hooks.on("renderPlayerList",((playerList,html,data)=>{$("<h4>").append('<div><i class="fa-regular fa-calendar"></i>'+game.i18n.format(COC7.eras[game.settings.get("CoC7","worldEra")]??"CoC7.CoCIDFlag.error.unknown-era",{era:game.settings.get("CoC7","worldEra")})+"</div>").insertAfter($("h3",html))})),Hooks.on("renderSettingsConfig",((app,html,user)=>{CoC7DirectoryPicker.processHtml(html)}))}};async function gmcreatemessageas(data){const meleeTarget=new CoC7MeleeTarget(data.targetKey,data.messageId,data.fastForward);meleeTarget.initiatorKey=data.actorKey;return await meleeTarget.createChatCard()}async function gmtradeitemto(data){try{let actor;actor=data.scene?game.scenes.get(data.scene).tokens.get(data.actorFrom).actor:game.actors.get(data.actorFrom);const item=actor.items.get(data.item);await game.actors.get(data.actorTo).createEmbeddedDocuments("Item",[item.toJSON()])&&actor.deleteEmbeddedDocuments("Item",[item.id])}catch(e){return ui.notifications.error(e),!1}return!0}class CoC7SystemSocket{static async callSocket(data){if(void 0!==data.listener){if(game.user.id===data.listener)switch(data.type){case"character-wizard":CoC7InvestigatorWizard.createCharacterFromData(data.payload);break;case"open-character":game.actors.get(data.payload).sheet.render(!0)}}else{if(game.user.isGM)switch(data.type){case OpposedCheckCard.defaultConfig.type:OpposedCheckCard.dispatch(data);break;case CombinedCheckCard.defaultConfig.type:CombinedCheckCard.dispatch(data);break;case"invoke":(await fromUuid(data.item))[data.method](data.data)}if("updateChar"===data.type)CoC7Utilities.updateCharSheets()}}static requestKeeperAction(data){if(game.user.isGM)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const keepers=game.users.filter((u=>u.active&&u.isGM));keepers.length?(data.listener=keepers[0].id,game.socket.emit("system.CoC7",data)):ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingKeeperUser"))}}static requestUserAction(data,{userId=null,errorIfMissing=!0,includeSelf=!0}={}){if(userId&&void 0!==userId)if(userId===game.user.id)data.listener=game.user.id,CoC7SystemSocket.callSocket(data);else{const user=game.users.get(userId);void 0!==user.id&&user.active?(data.listener=user.id,game.socket.emit("system.CoC7",data)):errorIfMissing&&ui.notifications.error(game.i18n.localize("CoC7.ErrorMissingUser"))}else includeSelf&&CoC7SystemSocket.callSocket(data),game.socket.emit("system.CoC7",data)}}function _onLeftClick(event){return event.shiftKey}Hooks.on("renderSettingsConfig",((app,html,options)=>{const systemTab=$(app.form).find(".tab[data-tab=system]");systemTab.find("input[name=CoC7\\.displayInitDices]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleInitiative")+"</h2>"),systemTab.find("input[name=CoC7\\.stanbyGMRolls]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRoll")+"</h2>"),systemTab.find("input[name=CoC7\\.trustedCanModfyChatCard]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleChatCards")+"</h2>"),systemTab.find("input[name=CoC7\\.enableStatusIcons]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleScene")+"</h2>"),systemTab.find("input[name=CoC7\\.overrideGameArtwork]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleGameArtwork")+"</h2>"),systemTab.find("input[name=CoC7\\.displayPlayerNameOnSheet]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleSheet")+"</h2>"),systemTab.find("input[name=CoC7\\.disregardUsePerRound]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleWeapon")+"</h2>"),systemTab.find("input[name=CoC7\\.syncDice3d]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDiceSoNice")+"</h2>"),systemTab.find("input[name=CoC7\\.debugmode]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleDeveloperDebug")+"</h2>"),systemTab.find("select[name=CoC7\\.boutOfMadnessSummaryTable]").closest("div.form-group").before('<h2 class="setting-header">'+game.i18n.localize("SETTINGS.TitleRollTable")+"</h2>")})),Hooks.once("init",(async function(){game.CoC7={macros:{skillCheck:CoC7Utilities.skillCheckMacro,weaponCheck:CoC7Utilities.weaponCheckMacro,check:CoC7Utilities.checkMacro},cards:{DamageCard},dev:{dice:{alwaysCrit:!1,alwaysFumble:!1}},eras:(era,name)=>{COC7.eras[era]=name}},Combat.prototype.rollInitiative=rollInitiative})),function(...cardclass){Hooks.on("renderChatLog",((app,html,data)=>EnhancedChatCardLib.injectCSS(app,html,data))),Hooks.once("socketlib.ready",(function(){EnhancedChatCardLib.register(cardclass),EnhancedChatCardLib.socket=socketlib.registerSystem(game.system.id),EnhancedChatCardLib.socket.register("updateMessage",updateMessage),EnhancedChatCardLib.socket.register("GMUpdate",GMUpdate),EnhancedChatCardLib.socket.register("advise",advise)})),Hooks.on("renderChatMessage",((app,html,data)=>EnhancedChatCard.bindListeners(html)))}(ChaseObstacleCard),Hooks.on("renderCombatTracker",((app,html,data)=>CoC7Combat.renderCombatTracker(app,html,data))),Hooks.on("chatMessage",((html,content)=>{if(content.match(/^\/(cbr|cc)/i)){const commands=content.match(/(\d+)/g);return commands?new Roll("1d100").roll({async:!0}).then((r=>{const s=r.result,res=commands.map((m=>{let res="";return res=s<=1?game.i18n.localize("CoC7.CriticalSuccess"):s>=100?game.i18n.localize("CoC7.Fumble"):s<=m/5?game.i18n.localize("CoC7.ExtremeSuccess"):s<=m/2?game.i18n.localize("CoC7.HardSuccess"):s<=m?game.i18n.localize("CoC7.RegularSuccess"):s>=96&&m<50?game.i18n.localize("CoC7.Fumble"):game.i18n.localize("CoC7.Failure"),res+=" "+game.i18n.localize("CoC7.Value")+" "+m,res})).join(" / ");r.toMessage({speaker:ChatMessage.getSpeaker(),flavor:res})})):ui.notifications.error("Incorrect usage of command"),!1}})),CoC7Hooks.listen(),Hooks.once("socketlib.ready",(function(){game.CoC7socket=socketlib.registerSystem("CoC7"),game.CoC7socket.register("gmcreatemessageas",gmcreatemessageas),game.CoC7socket.register("gmtradeitemto",gmtradeitemto)})),Hooks.once("setup",(function(){const toLocalize=["spellProperties","bookType","talentType","occupationProperties","statusType"];for(const o of toLocalize){const localized=Object.entries(COC7[o]).map((e=>[e[0],game.i18n.localize(e[1])]));COC7[o]=localized.reduce(((obj,e)=>(obj[e[0]]=e[1],obj)),{})}let effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.dead));-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/tombstone.svg"),effectIndex=CONFIG.statusEffects.findIndex((t=>t.id===COC7.status.unconscious)),-1!==effectIndex&&(CONFIG.statusEffects[effectIndex].icon="systems/CoC7/assets/icons/knocked-out-stars.svg"),CONFIG.statusEffects.unshift({id:COC7.status.tempoInsane,label:"CoC7.BoutOfMadnessName",icon:"systems/CoC7/assets/icons/hanging-spider.svg"},{id:COC7.status.indefInsane,label:"CoC7.InsanityName",icon:"systems/CoC7/assets/icons/tentacles-skull.svg"},{id:COC7.status.criticalWounds,label:"CoC7.CriticalWounds",icon:"systems/CoC7/assets/icons/arm-sling.svg"},{id:COC7.status.dying,label:"CoC7.Dying",icon:"systems/CoC7/assets/icons/heart-beats.svg"})})),Hooks.on("createActiveEffect",((data,options,userId)=>{if(game.userId===userId&&void 0!==data.flags.core&&void 0!==data.flags.core.statusId)switch(data.flags.core.statusId){case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.setCondition(data.flags.core.statusId,{forceValue:!0});break;case COC7.status.tempoInsane:{const realTime=data.flags.CoC7?.realTime;let duration=null;!0===realTime?duration=data.duration?.rounds:!1===realTime&&(duration=data.duration?.seconds,isNaN(duration)||(duration=Math.floor(duration/3600))),data.parent.setCondition(COC7.status.tempoInsane,{forceValue:!0,realTime,duration})}}})),Hooks.on("deleteActiveEffect",((data,options,userId)=>{if(game.userId===userId&&void 0!==data.flags.core&&void 0!==data.flags.core.statusId)switch(data.flags.core.statusId){case COC7.status.tempoInsane:case COC7.status.indefInsane:case COC7.status.unconscious:case COC7.status.criticalWounds:case COC7.status.dying:case COC7.status.prone:case COC7.status.dead:data.parent.unsetCondition(data.flags.core.statusId,{forceValue:!0})}})),Hooks.on("changeSidebarTab",(directory=>{if(directory instanceof ItemDirectory){const item=game.items.find((i=>"__CoC7InternalItem__"===i.name));if(item){const itemElement=directory._element.find(`[data-document-id='${item.id}']`);itemElement&&(itemElement[0].style.display="none")}}})),Hooks.on("hotbarDrop",((bar,data,slot)=>CoC7Utilities.createMacro(bar,data,slot))),Hooks.on("renderChatLog",((app,html,data)=>CoC7Chat.chatListeners(app,html,data))),Hooks.on("updateChatMessage",((chatMessage,chatData,diff,speaker)=>CoC7Chat.onUpdateChatMessage(chatMessage,chatData,diff,speaker))),Hooks.on("ready",(async()=>{function _tableSettingsChanged(table,id){game.CoC7.tables[table]="none"===id?null:game.tables.get(id)}await Updater.checkForUpdate(),function(){const body=$("body");document.addEventListener("click",CoC7ContextMenu.closeAll),body.on("click","a.coc7-inline-check",CoC7Check._onClickInlineRoll),document.addEventListener("mousedown",_onLeftClick)}(),game.CoC7.skillList=await(game.packs.get("CoC7.skills")?.getDocuments()),game.socket.on("system.CoC7",(async data=>{CoC7SystemSocket.callSocket(data)}));const tableChoice={none:"SETTINGS.LetKeeperDecide"};for(const t of game.tables)tableChoice[t._id]=t.name;game.settings.register("CoC7","boutOfMadnessSummaryTable",{name:"SETTINGS.BoutOfMadnessSummaryTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_Summary",id)}),game.settings.register("CoC7","boutOfMadnessRealTimeTable",{name:"SETTINGS.BoutOfMadnessRealTimeTable",scope:"world",config:!0,default:"none",type:String,choices:tableChoice,onChange:id=>_tableSettingsChanged("boutOfMadness_RealTime",id)}),game.CoC7.tables={boutOfMadness_Summary:"none"===game.settings.get("CoC7","boutOfMadnessSummaryTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessSummaryTable")),boutOfMadness_RealTime:"none"===game.settings.get("CoC7","boutOfMadnessRealTimeTable")?null:game.tables.get(game.settings.get("CoC7","boutOfMadnessRealTimeTable"))}})),Hooks.on("renderCoC7ChaseSheet",((app,html,data)=>CoC7ChaseSheet.setScroll(app,html,data))),Hooks.on("closeCoC7ChaseSheet",((app,html)=>CoC7ChaseSheet.onClose(app,html))),Hooks.on("closeActorSheet",(characterSheet=>characterSheet.onCloseSheet())),Hooks.on("renderCoC7CreatureSheet",((app,html,data)=>CoC7CreatureSheet.forceAuto(app,html,data))),Hooks.on("renderCoC7NPCSheet",((app,html,data)=>CoC7NPCSheet.forceAuto(app,html,data))),Hooks.on("chatMessage",CoC7Utilities.ParseChatEntry),Hooks.on("getSceneControlButtons",(()=>{})),Hooks.on("renderItemSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderJournalPageSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderActorSheet",CoC7Parser.ParseSheetContent),Hooks.on("renderActorSheet",CoC7CharacterSheet.renderSheet),Hooks.on("renderItemSheet",CoC7CharacterSheet.renderSheet),Hooks.on("getSceneControlButtons",CoC7Menu.getButtons),Hooks.on("renderSceneControls",CoC7Menu.renderControls),Hooks.on("dropCanvasData",CoC7Canvas.onDropSomething),Hooks.on("dropActorSheetData",(function(actor,sheet,data){if("Item"===data.type&&data.actorId){if(actor.data._id===data.actorId)return;let actorFrom=null;switch(actorFrom=data.sceneId&&data.tokenId?game.scenes.get(data.sceneId).tokens.get(data.tokenId).actor:game.actors.get(data.actorId),actor.data.type){case"character":case"npc":case"creature":if(!["chase"].includes(data.data.type))return;break;case"vehicle":return;case"container":if(!["book","item","spell","weapon"].includes(data.data.type))return}actorFrom&&actorFrom.deleteEmbeddedDocuments("Item",[data.data._id])}})),CONFIG.ui.settings=CoC7SettingsDirectory,CONFIG.ui.compendium=CoC7CompendiumDirectory,CONFIG.ui.actors=CoC7ActorDirectory})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1zTixLQUFLNDNCLE1BQVE1M0IsS0FBS3VLLFFBQzFCLE9BRUYsSUFBSWlqRCxVQUFZLEtBTWhCLE9BSkVBLFVBREV4dEQsS0FBSzRELFNBQVc1RCxLQUFLNkQsUUFDWHRQLEtBQUs2USxPQUFPM1EsSUFBSXVMLEtBQUs0RCxTQUFTdEUsT0FBTzdLLElBQUl1TCxLQUFLNkQsU0FBU25SLE1BRXZENkIsS0FBSzhILE9BQU81SCxJQUFJdUwsS0FBS3VLLFNBRTNCN1gsTUFBTXNOLEtBQUtqQixNQUNqQixJQUFLLFlBQ0wsSUFBSyxNQUNMLElBQUssV0FDSCxJQUFLLENBQUMsU0FBUzdJLFNBQVM4SixLQUFLQSxLQUFLakIsTUFDaEMsT0FFRixNQUNGLElBQUssVUFDSCxPQUNGLElBQUssWUFDSCxJQUFLLENBQUMsT0FBUSxPQUFRLFFBQVMsVUFBVTdJLFNBQVM4SixLQUFLQSxLQUFLakIsTUFDMUQsT0FHRnl1RCxXQUNGQSxVQUFVMWhCLHdCQUF3QixPQUFRLENBQUM5ckMsS0FBS0EsS0FBSzQzQixLQUV6RCxDQUNGLElGZ2RBOWhDLE9BQU8wSixHQUFHN0ssU0FBVytpRixzQkFDckI1aEYsT0FBTzBKLEdBQUdtcUQsV0FBYW11Qix3QkFDdkJoaUYsT0FBTzBKLEdBQUduRCxPQUFTNjdFLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvZGljZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvaGVscGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3JvbGwtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmRzL3JvbGwtY2FyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2ludGVyYWN0aXZlLWNoYXQtY2FyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9kYW1hZ2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NhcmQtYWN0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NhbmRhdGEtZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctY2hhdC1tZXNzYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGF0L2NvbmNoZWNrLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3NraWxsLXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvcG9pbnQtc2VsZWN0aW9uLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jaGFyLXNlbGVjdGlvbi1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY2hhci1yb2xsLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvc2tpbGwtc3BlY2lhbGl6YXRpb24tc2VsZWN0LWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9za2lsbC12YWx1ZS1kaWFsb2cuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLXJlc29sdXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NoYXQvY29tYmF0L21lbGVlLXRhcmdldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9yYW5nZWNvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvYWN0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvY29jNy1saW5rLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctcGFyc2VyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9pdGVtLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jaGVjay5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdXRpbGl0aWVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYy1pZC1lZGl0b3IuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0aXZlLWVmZmVjdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29udGV4dC1tZW51LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2Jhc2UuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NyZWF0dXJlLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NyZWF0ZS1teXRob3MtZW5jb3VudGVycy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvbWJhdC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2MtaWQtYmF0Y2guanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3VwZGF0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kaG9sZWhvdXNlX2ltcG9ydGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kcm9wLWNvYy1pZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL29jY3VwYXRpb24uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvbWVudS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jYW52YXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NldHRpbmdzLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY29tcGVuZGl1bS1kaXJlY3RvcnkuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2FjdG9yLWRpcmVjdG9yeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kZWNhZGVyLWRzbi1mYWNlcy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc3BlbGwvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvYm9vay9kYXRhLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9jb21tb24vY2hhdGNhcmRsaWIvc3JjL2NoYXRjYXJkbGliLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9jaGFzZS9wYXJ0aWNpcGFudC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvY2hhdC9jYXJkcy9jaGFzZS1vYnN0YWNsZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvY2hhc2UvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2tpbGwvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYWN0b3JzL3ZlaGljbGUvZGF0YS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kZWNhZGVyLWRpZS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9kZWNhZGVyLWRpZS1vdGhlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9nYW1lLXJ1bGVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvYXJjaGV0eXBlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9ib29rL3NoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL2NvbnRhaW5lci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jaGFzZS1wYXJ0aWNpcGFudC1pbXBvcnRlci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvY2hhc2Uvc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0VjIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy9pdGVtLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1qb3VybmFsLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zaGVldHMvY29jNy1tYWNyby1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LXBsYXlsaXN0LWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2hlZXRzL2NvYzctcm9sbC10YWJsZS1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NoZWV0cy9jb2M3LXNjZW5lLWNvbmZpZy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaXRlbXMvc2hlZXRzL3NldHVwLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc2tpbGwuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NwZWxsL3NoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvc3RhdHVzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9pdGVtcy9zaGVldHMvdGFsZW50LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hY3RvcnMvc2hlZXRzL3ZlaGljbGUuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2l0ZW1zL3NoZWV0cy93ZWFwb24tc2hlZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29tcGVuZGl1bS1maWx0ZXIuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvY29jLWlkLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9pbml0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvbG9hZC10ZW1wbGF0ZXMuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItc2V0dGluZ3MuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3NjcmlwdHMvcmVnaXN0ZXItc2hlZXRzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9zY3JpcHRzL2hhbmRsZWJhcnMtaGVscGVyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL3Rvb2x0aXBzLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9hcHBzL2NvYzctdG91ci5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvdG91cnMvZW5hYmxlLXZhcmlhbnQtcnVsZXMtZW4uanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWZyLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZWFkeS5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvc2NyaXB0cy9yZWdpc3Rlci10b3Vycy5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2NyZWF0ZS10b2tlbi5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvZGljZS1zby1uaWNlLXJlYWR5LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9kaWNlLXNvLW5pY2Utcm9sbC1zdGFydC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLWFjdG9yLXNoZWV0LmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItY2hhdC1tZXNzYWdlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItZGlhbG9nLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItaXRlbS1zaGVldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvaG9va3MvcmVuZGVyLXBhdXNlLmpzIiwid2VicGFjazovL2Z2dHQtY29jNy8uL21vZHVsZS9ob29rcy9yZW5kZXItcGxheWVyLWxpc3QuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3JlbmRlci1zZXR0aW5ncy1jb25maWcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL3NvY2tldC5qcyIsIndlYnBhY2s6Ly9mdnR0LWNvYzcvLi9tb2R1bGUvYXBwcy9jb2M3LXN5c3RlbS1zb2NrZXQuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2NvYzcuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2RpY2Vib3QuanMiLCJ3ZWJwYWNrOi8vZnZ0dC1jb2M3Ly4vbW9kdWxlL2hvb2tzL2Ryb3AtYWN0b3Itc2hlZXQtZGF0YS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBOYW1lc3BhY2UgQ09DNyBDb25maWd1cmF0aW9uIFZhbHVlc1xuZXhwb3J0IGNvbnN0IENPQzcgPSB7fVxuXG4vLyBDdXN0b20gY2hhdE1lc3NhZ2Vcbi8vIENPTkZJRy5DaGF0TWVzc2FnZS50ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2hhdC1tZXNzYWdlLmh0bWwnO1xuXG4vKipcbiAqIFRoZSBzZXQgb2YgRXJhcyB1c2VkIHdpdGhpbiB0aGUgc3lzdGVtXG4gKiBAdHlwZSB7T2JqZWN0fVxuICovXG5DT0M3LmVyYXMgPSB7XG4gIHN0YW5kYXJkOiAnQ29DNy5FcmExOTIwJyxcbiAgbW9kZXJuOiAnQ29DNy5FcmFNb2Rlcm4nLFxuICBtb2Rlcm5QdWxwOiAnQ29DNy5FcmFNb2Rlcm5QdWxwJyxcbiAgcHVscDogJ0NvQzcuRXJhUHVscCcsXG4gIGRvd25EYXJrZXJUcmFpbHM6ICdDb0M3LkVyYURvd25EYXJrZXJUcmFpbHMnLFxuICBkb3duRGFya2VyVHJhaWxzUHVscDogJ0NvQzcuRXJhRG93bkRhcmtlclRyYWlsc1B1bHAnLFxuICBkYXJrQWdlczogJ0NvQzcuRXJhRGFya0FnZXMnLFxuICBkYXJrQWdlc1B1bHA6ICdDb0M3LkVyYURhcmtBZ2VzUHVscCcsXG4gIHJlZ2VuY3k6ICdDb0M3LkVyYVJlZ2VuY3knLFxuICByZWdlbmN5UHVscDogJ0NvQzcuRXJhUmVnZW5jeVB1bHAnLFxuICAvLyBSZWlnbiBvZiBUZXJyb3JcbiAgZ2FzTGlnaHQ6ICdDb0M3LkVyYUdhc0xpZ2h0JyxcbiAgaW52aWN0dXM6ICdDb0M3LkVyYUludmljdHVzJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cyA9IHtcbiAgZGVjaW1hbExlZnQ6ICdkZWNpbWFsTGVmdCcsXG4gIGRlY2ltYWxSaWdodDogJ2RlY2ltYWxSaWdodCcsXG4gIGludGVnZXJMZWZ0OiAnaW50ZWdlckxlZnQnLFxuICBpbnRlZ2VyUmlnaHQ6ICdpbnRlZ2VyUmlnaHQnLFxuICBsc2Q6ICdsc2QnLFxuICByb21hbjogJ3JvbWFuJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5Rm9ybWF0cyA9IHtcbiAgZGVjaW1hbExlZnQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0RGVjaW1hbExlZnQnLFxuICBkZWNpbWFsUmlnaHQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0RGVjaW1hbFJpZ2h0JyxcbiAgaW50ZWdlckxlZnQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0SW50ZWdlckxlZnQnLFxuICBpbnRlZ2VyUmlnaHQ6ICdDb0M3Lk1vbmV0YXJ5Rm9ybWF0SW50ZWdlclJpZ2h0JyxcbiAgbHNkOiAnQ29DNy5Nb25ldGFyeUZvcm1hdExzZCcsXG4gIHJvbWFuOiAnQ29DNy5Nb25ldGFyeUZvcm1hdFJvbWFuJ1xufVxuXG5DT0M3Lm1vbmV0YXJ5VHlwZUtleXMgPSB7XG4gIG5vbmU6ICdub25lJyxcbiAgYXNzZXM6ICdhc3NlcycsXG4gIHNlc3RlcnRpaTogJ3Nlc3RlcnRpaScsXG4gIHF1aW5hcmlpOiAncXVpbmFyaWknLFxuICBkZW5hcmlpOiAnZGVuYXJpaScsXG4gIGQ6ICdkJyxcbiAgczogJ3MnLFxuICB2YWx1ZTogJ3ZhbHVlJyxcbiAgbXVsdGlwbGllcjogJ211bHRpcGxpZXInXG59XG5cbkNPQzcubW9uZXRhcnlUeXBlcyA9IHtcbiAgbm9uZToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZU5vbmUnLFxuICAgIGZpbHRlcjogW11cbiAgfSxcbiAgYXNzZXM6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVBc3NlcycsXG4gICAgZmlsdGVyOiBbJ3JvbWFuJ11cbiAgfSxcbiAgc2VzdGVydGlpOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlU2VzdGVydGlpJyxcbiAgICBmaWx0ZXI6IFsncm9tYW4nXVxuICB9LFxuICBxdWluYXJpaToge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZVF1aW5hcmlpJyxcbiAgICBmaWx0ZXI6IFsncm9tYW4nXVxuICB9LFxuICBkZW5hcmlpOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlRGVuYXJpaScsXG4gICAgZmlsdGVyOiBbJ3JvbWFuJ11cbiAgfSxcbiAgZDoge1xuICAgIG5hbWU6ICdDb0M3Lk1vbmV0YXJ5VHlwZURlbmllcnMnLFxuICAgIGZpbHRlcjogWydsc2QnXVxuICB9LFxuICBzOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlU291cycsXG4gICAgZmlsdGVyOiBbJ2xzZCddXG4gIH0sXG4gIHZhbHVlOiB7XG4gICAgbmFtZTogJ0NvQzcuTW9uZXRhcnlUeXBlT25lJyxcbiAgICBmaWx0ZXI6IFtdXG4gIH0sXG4gIG11bHRpcGxpZXI6IHtcbiAgICBuYW1lOiAnQ29DNy5Nb25ldGFyeVR5cGVDcmVkaXRSYXRpbmcnLFxuICAgIGZpbHRlcjogW11cbiAgfVxufVxuXG5DT0M3LmNoYXJhY3RlcmlzdGljcyA9IHtcbiAgc3RyOiAnQ29DNy5DaGFyYWNTdHInLFxuICBjb246ICdDb0M3LkNoYXJhY0NvbicsXG4gIHNpejogJ0NvQzcuQ2hhcmFjU2l6JyxcbiAgZGV4OiAnQ29DNy5DaGFyYWNEZXgnLFxuICBhcHA6ICdDb0M3LkNoYXJhY0FwcCcsXG4gIGludDogJ0NvQzcuQ2hhcmFjSW50JyxcbiAgcG93OiAnQ29DNy5DaGFyYWNQb3cnLFxuICBlZHU6ICdDb0M3LkNoYXJhY0VkdSdcbn1cblxuLyoqXG4gKiBUaGUgc2V0IG9mIFNraWxscyBhdHRyaWJ1dGVzIHVzZWQgd2l0aGluIHRoZSBzeXN0ZW1cbiAqIEB0eXBlIHtPYmplY3R9XG4gKi9cbkNPQzcuc2tpbGxQcm9wZXJ0aWVzID0ge1xuICBub2FkanVzdG1lbnRzOiAnQ29DNy5Ta2lsbE5vQWRqdXN0bWVudHMnLFxuICBub3hwZ2FpbjogJ0NvQzcuU2tpbGxOb1hwR2FpbicsXG4gIHNwZWNpYWw6ICdDb0M3LlNraWxsU3BlY2lhbCcsXG4gIHJhcml0eTogJ0NvQzcuU2tpbGxSYXJpdHknLFxuICBwdXNoOiAnQ29DNy5Ta2lsbFB1c2gnLFxuICBjb21iYXQ6ICdDb0M3LlNraWxsQ29tYmF0JyxcbiAgZmlnaHRpbmc6ICdDb0M3LlNraWxsRmlnaHRpbmcnLFxuICBmaXJlYXJtOiAnQ29DNy5Ta2lsbEZpcmVhcm0nLFxuICByZXF1aXJlc25hbWU6ICdDb0M3LlNraWxsUmVxdWlyZXNOYW1lJyxcbiAga2VlcGJhc2V2YWx1ZTogJ0NvQzcuU2tpbGxLZWVwQmFzZVZhbHVlJyxcbiAgcGlja25hbWVvbmx5OiAnQ29DNy5Ta2lsbFBpY2tOYW1lT25seScsXG4gIG9ubHlvbmU6ICdDb0M3LlNraWxsU3BlY2lhbGl6YXRpb25Jc1VuaXF1ZSdcbn1cblxuQ09DNy53ZWFwb25Qcm9wZXJ0aWVzID0ge1xuICBtZWxlZTogJ0NvQzcuV2VhcG9uLlByb3BlcnR5Lk1lbGVlJyxcbiAgcm5nZDogJ0NvQzcuV2VhcG9uUm5nZCcsXG4gIG1udnI6ICdDb0M3LldlYXBvblByb3BlcnlNYW5ldXZlcicsXG4gIHRocm93bjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LlRocm93bicsXG4gIHNob3RndW46ICdDb0M3LldlYXBvbi5Qcm9wZXJ0eS5TaG90Z3VuJyxcbiAgZGJybDogJ0NvQzcuV2VhcG9uRGJybCcsXG4gIGltcGw6ICdDb0M3LldlYXBvbkltcGwnLFxuICBicnN0OiAnQ29DNy5XZWFwb25CcnN0JyxcbiAgYXV0bzogJ0NvQzcuV2VhcG9uQXV0bycsXG4gIGFoZGI6ICdDb0M3LldlYXBvbkFoZGInLFxuICBhZGRiOiAnQ29DNy5XZWFwb25BZGRiJyxcbiAgc2xudDogJ0NvQzcuV2VhcG9uU2xudCcsXG4gIHNwY2w6ICdDb0M3LldlYXBvblNwY2wnLFxuICBtb250OiAnQ29DNy5XZWFwb25Nb250JyxcbiAgYmxzdDogJ0NvQzcuV2VhcG9uQmxzdCcsXG4gIHN0dW46ICdDb0M3LldlYXBvblN0dW4nLFxuICByYXJlOiAnQ29DNy5XZWFwb25SYXJlJyxcbiAgYnVybjogJ0NvQzcuV2VhcG9uLlByb3BlcnR5LkJ1cm4nXG59XG5cbkNPQzcuc3BlbGxQcm9wZXJ0aWVzID0ge1xuICBjYWxsOiAnQ29DNy5DYWxsU3BlbGwnLFxuICBkaXNtaXNzOiAnQ29DNy5EaXNtaXNzU3BlbGwnLFxuICBjb250YWN0OiAnQ29DNy5Db250YWN0U3BlbGwnLFxuICBzdW1tb246ICdDb0M3LlN1bW1vblNwZWxsJyxcbiAgYmluZDogJ0NvQzcuQmluZFNwZWxsJyxcbiAgZW5jaGFudG1lbnQ6ICdDb0M3LkVuY2hhbnRtZW50U3BlbGwnLFxuICBnYXRlOiAnQ29DNy5HYXRlU3BlbGwnLFxuICBjb21iYXQ6ICdDb0M3LkNvbWJhdFNwZWxsJ1xufVxuXG5DT0M3LmJvb2tUeXBlID0ge1xuICBteXRob3M6ICdDb0M3Lk15dGhvc0Jvb2snLFxuICBvY2N1bHQ6ICdDb0M3Lk9jY3VsdEJvb2snLFxuICBvdGhlcjogJ0NvQzcuT3RoZXInXG59XG5cbkNPQzcudGFsZW50VHlwZSA9IHtcbiAgcGh5c2ljYWw6ICdDb0M3LlBoeXNpY2FsVGFsZW50JyxcbiAgbWVudGFsOiAnQ29DNy5NZW50YWxUYWxlbnQnLFxuICBjb21iYXQ6ICdDb0M3LkNvbWJhdFRhbGVudCcsXG4gIG1pc2NlbGxhbmVvdXM6ICdDb0M3Lk1pc2NlbGxhbmVvdXNUYWxlbnQnLFxuICBiYXNpYzogJ0NvQzcuQmFzaWNUYWxlbnQnLFxuICBpbnNhbmU6ICdDb0M3Lkluc2FuZVRhbGVudCcsXG4gIG90aGVyOiAnQ29DNy5PdGhlclRhbGVudCdcbn1cblxuQ09DNy5zdGF0dXNUeXBlID0ge1xuICBtYW5pYTogJ0NvQzcuTWFuaWEnLFxuICBwaG9iaWE6ICdDb0M3LlBob2JpYSdcbn1cblxuQ09DNy5vY2N1cGF0aW9uUHJvcGVydGllcyA9IHtcbiAgY2xhc3NpYzogJ0NvQzcuQ2xhc3NpYycsXG4gIGxvdmVjcmFmdGlhbjogJ0NvQzcuTG92ZWNyYWZ0aWFuJyxcbiAgbW9kZXJuOiAnQ29DNy5Nb2Rlcm4nLFxuICBwdWxwOiAnQ29DNy5QdWxwJ1xufVxuXG5DT0M3LmZvcm11bGEgPSB7fVxuXG5DT0M3LmZvcm11bGEuYWN0b3IgPSB7XG4gICdAU1RSJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zdHIudmFsdWUnLFxuICAnQENPTic6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlJyxcbiAgJ0BTSVonOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnNpei52YWx1ZScsXG4gICdAREVYJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5kZXgudmFsdWUnLFxuICAnQEFQUCc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuYXBwLnZhbHVlJyxcbiAgJ0BJTlQnOiAndGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmludC52YWx1ZScsXG4gICdAUE9XJzogJ3RoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUnLFxuICAnQEVEVSc6ICd0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZWR1LnZhbHVlJ1xufVxuXG5DT0M3LmZvcm11bGEuYWN0b3JzaGVldCA9IHtcbiAgJ0BTVFInOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZScsXG4gICdAQ09OJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUnLFxuICAnQFNJWic6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlJyxcbiAgJ0BERVgnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZScsXG4gICdAQVBQJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5hcHAudmFsdWUnLFxuICAnQElOVCc6ICd0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuaW50LnZhbHVlJyxcbiAgJ0BQT1cnOiAndGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvdy52YWx1ZScsXG4gICdARURVJzogJ3RoaXMuYWN0b3Iuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5lZHUudmFsdWUnXG59XG5cbkNPQzcuc3RhdHVzID0ge1xuICB0ZW1wb0luc2FuZTogJ3RlbXBvSW5zYW5lJyxcbiAgaW5kZWZJbnNhbmU6ICdpbmRlZkluc2FuZScsXG4gIHVuY29uc2Npb3VzOiAndW5jb25zY2lvdXMnLFxuICBjcml0aWNhbFdvdW5kczogJ2NyaXRpY2FsV291bmRzJyxcbiAgZHlpbmc6ICdkeWluZycsXG4gIHByb25lOiAncHJvbmUnLFxuICBkZWFkOiAnZGVhZCdcbn1cblxuQ09DNy5uZXdCb29rTmFtZSA9ICdDb0M3Lk5ld0Jvb2tOYW1lJ1xuQ09DNy5uZXdTa2lsbE5hbWUgPSAnQ29DNy5OZXdTa2lsbE5hbWUnXG5DT0M3Lm5ld1NwZWxsTmFtZSA9ICdDb0M3Lk5ld1NwZWxsTmFtZSdcbkNPQzcubmV3SXRlbU5hbWUgPSAnQ29DNy5OZXdJdGVtTmFtZSdcbkNPQzcubmV3V2VhcG9uTmFtZSA9ICdDb0M3Lk5ld1dlYXBvbk5hbWUnXG5cbkNPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsID0gJ0NvQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsJ1xuXG5DT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lID0gJ0NvQzcuRmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUnXG5DT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUgPSAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuXG5DT0M3LmNvbWJhdENhcmRzID0ge1xuICBmaWdodEJhY2s6ICdDb0M3LkZpZ2h0QmFjaycsXG4gIGRvZGdlOiAnQ29DNy5Eb2RnZScsXG4gIG1hbmV1dmVyOiAnQ29DNy5NYW5ldXZlcicsXG4gIG5vUmVzcG9uc2U6ICdDb0M3Lk5vUmVzcG9uc2UnXG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIENPTkZJRywgZ2FtZSwgUm9sbCAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN0RpY2Uge1xuICBzdGF0aWMgYXN5bmMgcm9sbCAobW9kaWYgPSAwLCByb2xsTW9kZSA9IG51bGwsIGhpZGVEaWNlID0gZmFsc2UpIHtcbiAgICBsZXQgYWx0ZXJuYXRpdmVEaWNlID0gJydcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgaWYgKG1vZGlmIDwgMCkge1xuICAgICAgICBhbHRlcm5hdGl2ZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0ZW5EaWVQZW5hbHR5JylcbiAgICAgIH0gZWxzZSBpZiAobW9kaWYgPiAwKSB7XG4gICAgICAgIGFsdGVybmF0aXZlRGljZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZUJvbnVzJylcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IHJvbGxcbiAgICBpZiAoXG4gICAgICBnYW1lLkNvQzcuZGV2LmRpY2UuYWx3YXlzQ3JpdCAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG4gICAgKSB7XG4gICAgICByb2xsID0gUm9sbC5mcm9tRGF0YShDb0M3RGljZS5jcml0MDEpXG4gICAgfSBlbHNlIGlmIChcbiAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKVxuICAgICkge1xuICAgICAgcm9sbCA9IFJvbGwuZnJvbURhdGEoQ29DN0RpY2UuZnVtYmxlOTkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHJvbGwgPSBhd2FpdCBuZXcgUm9sbChcbiAgICAgICAgJzFkdCcgK1xuICAgICAgICAgIChhbHRlcm5hdGl2ZURpY2UgIT09ICcnXG4gICAgICAgICAgICA/ICcrMWRvWycgKyBhbHRlcm5hdGl2ZURpY2UgKyAnXSdcbiAgICAgICAgICAgIDogJysxZHQnXG4gICAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMobW9kaWYpKSArXG4gICAgICAgICAgJysxZDEwJ1xuICAgICAgKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICB1bml0OiB7XG4gICAgICAgIHRvdGFsOiAwLFxuICAgICAgICByZXN1bHRzOiBbXVxuICAgICAgfSxcbiAgICAgIHRlbnM6IHtcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJlc3VsdHM6IFtdXG4gICAgICB9LFxuICAgICAgdG90YWw6IDAsXG4gICAgICByb2xsXG4gICAgfVxuXG4gICAgaWYgKHJvbGxNb2RlKSByZXN1bHQucm9sbE1vZGUgPSByb2xsTW9kZVxuICAgIGlmIChoaWRlRGljZSkgcmVzdWx0LmhpZGVEaWNlID0gaGlkZURpY2VcbiAgICBmb3IgKGNvbnN0IGQgb2Ygcm9sbC5kaWNlKSB7XG4gICAgICBpZiAoZCBpbnN0YW5jZW9mIENPTkZJRy5EaWNlLnRlcm1zLnQpIHtcbiAgICAgICAgcmVzdWx0LnRlbnMucmVzdWx0cy5wdXNoKGQudG90YWwpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQudW5pdC50b3RhbCA9IGQudG90YWwgPT09IDEwID8gMCA6IGQudG90YWxcbiAgICAgICAgcmVzdWx0LnVuaXQucmVzdWx0cy5wdXNoKHJlc3VsdC51bml0LnRvdGFsKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAobW9kaWYgPCAwKSB7XG4gICAgICByZXN1bHQudGVucy50b3RhbCA9XG4gICAgICAgIHJlc3VsdC51bml0LnRvdGFsID09PSAwICYmIHJlc3VsdC50ZW5zLnJlc3VsdHMuaW5jbHVkZXMoMClcbiAgICAgICAgICA/IDEwMFxuICAgICAgICAgIDogTWF0aC5tYXgoLi4ucmVzdWx0LnRlbnMucmVzdWx0cylcbiAgICB9IGVsc2UgaWYgKHJlc3VsdC51bml0LnRvdGFsID09PSAwKSB7XG4gICAgICBjb25zdCBkaWNlID0gcmVzdWx0LnRlbnMucmVzdWx0cy5maWx0ZXIodCA9PiB0ID4gMClcbiAgICAgIHJlc3VsdC50ZW5zLnRvdGFsID0gZGljZS5sZW5ndGggPT09IDAgPyAxMDAgOiBNYXRoLm1pbiguLi5kaWNlKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHQudGVucy50b3RhbCA9IE1hdGgubWluKC4uLnJlc3VsdC50ZW5zLnJlc3VsdHMpXG4gICAgfVxuICAgIHJlc3VsdC50b3RhbCA9IHJlc3VsdC51bml0LnRvdGFsICsgcmVzdWx0LnRlbnMudG90YWxcbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2hvd1JvbGxEaWNlM2QgKHJvbGwpIHtcbiAgICBpZiAoZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgY29uc3Qgc3luY0RpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzeW5jRGljZTNkJylcblxuICAgICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICAgIHdoaXNwZXI6IG51bGwsXG4gICAgICAgIGJsaW5kOiBmYWxzZVxuICAgICAgfVxuICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcblxuICAgICAgYXdhaXQgZ2FtZS5kaWNlM2Quc2hvd0ZvclJvbGwoXG4gICAgICAgIHJvbGwsXG4gICAgICAgIGdhbWUudXNlcixcbiAgICAgICAgc3luY0RpY2UsXG4gICAgICAgIGNoYXREYXRhLndoaXNwZXIsXG4gICAgICAgIGNoYXREYXRhLmJsaW5kXG4gICAgICApXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNvbWJpbmVkUm9sbCAob3B0aW9ucykge1xuICAgIG9wdGlvbnMucG9vbCA9IG9wdGlvbnMucG9vbCA/PyB7fVxuICAgIG9wdGlvbnMucG9vbFsnMCddID0gZmFsc2VcbiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMob3B0aW9ucy5wb29sKS5tYXAodiA9PiBwYXJzZUludCh2LCAxMCkpXG4gICAgbGV0IHBlbmFsdHlEaWNlID0gTWF0aC5hYnMoTWF0aC5taW4oMCwgTWF0aC5taW4oLi4ua2V5cykpKVxuICAgIGxldCBib251c0RpY2UgPSBNYXRoLm1heCgwLCBNYXRoLm1heCguLi5rZXlzKSlcbiAgICBjb25zdCBoYXNEU04gPSBnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlXG5cbiAgICBjb25zdCBwb29sID0gW11cbiAgICBwb29sLnB1c2goJzFkdCsxZDEwJylcblxuICAgIGlmIChwZW5hbHR5RGljZSA+IDApIHtcbiAgICAgIHBvb2wucHVzaChcbiAgICAgICAgKGhhc0RTTlxuICAgICAgICAgID8gJysxZG9bJyArIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3RlbkRpZVBlbmFsdHknKSArICddJ1xuICAgICAgICAgIDogJzFkdCdcbiAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMocGVuYWx0eURpY2UpKVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoYm9udXNEaWNlID4gMCkge1xuICAgICAgcG9vbC5wdXNoKFxuICAgICAgICAoaGFzRFNOXG4gICAgICAgICAgPyAnKzFkb1snICsgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndGVuRGllQm9udXMnKSArICddJ1xuICAgICAgICAgIDogJzFkdCdcbiAgICAgICAgKS5yZXBlYXQoTWF0aC5hYnMoYm9udXNEaWNlKSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgcm9sbCA9IGF3YWl0IG5ldyBSb2xsKHBvb2wuam9pbignJykpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgIGNvbnN0IHJlc3VsdCA9IHtcbiAgICAgIGdyb3Vwczoge1xuICAgICAgICBiYXNlRGllOiAwLFxuICAgICAgICBwZW5hbHR5RGljZTogW10sXG4gICAgICAgIGJvbnVzRGljZTogW11cbiAgICAgIH0sXG4gICAgICB1bml0OiAwLFxuICAgICAgcm9sbFxuICAgIH1cbiAgICBsZXQgYmFzZVNldCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBkIG9mIHJvbGwuZGljZSkge1xuICAgICAgaWYgKGQgaW5zdGFuY2VvZiBDT05GSUcuRGljZS50ZXJtcy50KSB7XG4gICAgICAgIGlmICghYmFzZVNldCkge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMuYmFzZURpZSA9IGQudG90YWxcbiAgICAgICAgICBiYXNlU2V0ID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHBlbmFsdHlEaWNlID4gMCkge1xuICAgICAgICAgIHJlc3VsdC5ncm91cHMucGVuYWx0eURpY2UucHVzaChkLnRvdGFsKVxuICAgICAgICAgIHBlbmFsdHlEaWNlLS1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJvbnVzRGljZS5wdXNoKGQudG90YWwpXG4gICAgICAgICAgYm9udXNEaWNlLS1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnVuaXQgPSBkLnRvdGFsID09PSAxMCA/IDAgOiBkLnRvdGFsXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3Qgb3V0cHV0ID0ge31cblxuICAgIGZvciAoY29uc3Qga2V5IGluIG9wdGlvbnMucG9vbCkge1xuICAgICAgb3V0cHV0W2tleV0gPSB7XG4gICAgICAgIHVuaXQ6IHtcbiAgICAgICAgICB0b3RhbDogcmVzdWx0LnVuaXQsXG4gICAgICAgICAgcmVzdWx0czogW3Jlc3VsdC51bml0XVxuICAgICAgICB9LFxuICAgICAgICB0ZW5zOiB7XG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgcmVzdWx0czogW11cbiAgICAgICAgfSxcbiAgICAgICAgdG90YWw6IDAsXG4gICAgICAgIHJvbGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IG1vZGlmID0gcGFyc2VJbnQoa2V5LCAxMClcbiAgICAgIGxldCBtb2RpZmllciA9IG1vZGlmXG4gICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChyZXN1bHQuZ3JvdXBzLmJhc2VEaWUpXG4gICAgICBmb3IgKGNvbnN0IG9mZnNldCA9IE1hdGguYWJzKG1vZGlmaWVyKTsgbW9kaWZpZXIgPCAwOyBtb2RpZmllcisrKSB7XG4gICAgICAgIG91dHB1dFtrZXldLnRlbnMucmVzdWx0cy5wdXNoKFxuICAgICAgICAgIHJlc3VsdC5ncm91cHMucGVuYWx0eURpY2VbbW9kaWZpZXIgKyBvZmZzZXRdXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qgb2Zmc2V0ID0gbW9kaWZpZXI7IG1vZGlmaWVyID4gMDsgbW9kaWZpZXItLSkge1xuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMucHVzaChcbiAgICAgICAgICByZXN1bHQuZ3JvdXBzLmJvbnVzRGljZVtNYXRoLmFicyhtb2RpZmllciAtIG9mZnNldCldXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChtb2RpZiA8IDApIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9XG4gICAgICAgICAgb3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCAmJiBvdXRwdXRba2V5XS50ZW5zLnJlc3VsdHMuaW5jbHVkZXMoMClcbiAgICAgICAgICAgID8gMTAwXG4gICAgICAgICAgICA6IE1hdGgubWF4KC4uLm91dHB1dFtrZXldLnRlbnMucmVzdWx0cylcbiAgICAgIH0gZWxzZSBpZiAob3V0cHV0W2tleV0udW5pdC50b3RhbCA9PT0gMCkge1xuICAgICAgICBjb25zdCBkaWNlID0gb3V0cHV0W2tleV0udGVucy5yZXN1bHRzLmZpbHRlcih0ID0+IHQgPiAwKVxuICAgICAgICBvdXRwdXRba2V5XS50ZW5zLnRvdGFsID0gZGljZS5sZW5ndGggPT09IDAgPyAxMDAgOiBNYXRoLm1pbiguLi5kaWNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3V0cHV0W2tleV0udGVucy50b3RhbCA9IE1hdGgubWluKC4uLm91dHB1dFtrZXldLnRlbnMucmVzdWx0cylcbiAgICAgIH1cbiAgICAgIG91dHB1dFtrZXldLnRvdGFsID0gb3V0cHV0W2tleV0udW5pdC50b3RhbCArIG91dHB1dFtrZXldLnRlbnMudG90YWxcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dFxuICB9XG5cbiAgLy8gUHJlZGV0ZXJtaW5lZCB2YWx1ZSBvZiBkaWNlLCB1c2VkIG9ubHkgZm9yIERFViBhbmQgdGVzdCBwdXJwb3Nlc1xuICBzdGF0aWMgZnVtYmxlOTkgPSB7XG4gICAgY2xhc3M6ICdSb2xsJyxcbiAgICBvcHRpb25zOiB7fSxcbiAgICBkaWNlOiBbXSxcbiAgICBmb3JtdWxhOiAnMWR0ICsgMWQxMCcsXG4gICAgdGVybXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdDb0M3RGVjYWRlckRpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiA5LFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ09wZXJhdG9yVGVybScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG9wZXJhdG9yOiAnKydcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGNsYXNzOiAnRGllJyxcbiAgICAgICAgb3B0aW9uczoge30sXG4gICAgICAgIGV2YWx1YXRlZDogdHJ1ZSxcbiAgICAgICAgbnVtYmVyOiAxLFxuICAgICAgICBmYWNlczogMTAsXG4gICAgICAgIG1vZGlmaWVyczogW10sXG4gICAgICAgIHJlc3VsdHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICByZXN1bHQ6IDksXG4gICAgICAgICAgICBhY3RpdmU6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cbiAgICBdLFxuICAgIHRvdGFsOiA5OSxcbiAgICBldmFsdWF0ZWQ6IHRydWVcbiAgfVxuXG4gIHN0YXRpYyBjcml0MDEgPSB7XG4gICAgY2xhc3M6ICdSb2xsJyxcbiAgICBvcHRpb25zOiB7fSxcbiAgICBkaWNlOiBbXSxcbiAgICBmb3JtdWxhOiAnMWR0ICsgMWQxMCcsXG4gICAgdGVybXM6IFtcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdDb0M3RGVjYWRlckRpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiAxMCxcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3M6ICdPcGVyYXRvclRlcm0nLFxuICAgICAgICBvcHRpb25zOiB7fSxcbiAgICAgICAgZXZhbHVhdGVkOiB0cnVlLFxuICAgICAgICBvcGVyYXRvcjogJysnXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBjbGFzczogJ0RpZScsXG4gICAgICAgIG9wdGlvbnM6IHt9LFxuICAgICAgICBldmFsdWF0ZWQ6IHRydWUsXG4gICAgICAgIG51bWJlcjogMSxcbiAgICAgICAgZmFjZXM6IDEwLFxuICAgICAgICBtb2RpZmllcnM6IFtdLFxuICAgICAgICByZXN1bHRzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmVzdWx0OiAxLFxuICAgICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9XG4gICAgXSxcbiAgICB0b3RhbDogMSxcbiAgICBldmFsdWF0ZWQ6IHRydWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ09OU1QsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgbWVyZ2VPYmplY3QsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29udGVudExpbmtEaWFsb2cgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGlkOiAnbGluay1jcmVhdGlvbicsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnYWN0aXZlLWVmZmVjdC1zaGVldCddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DcmVhdGVMaW5rJyksXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiBudWxsLCBkcm9wU2VsZWN0b3I6ICcuY29udGFpbmVyJyB9XSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2xpbmstY3JlYXRpb24uaHRtbCcsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHdpZHRoOiA1NjAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnRhYnMnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5lZmZlY3Qtb3B0aW9ucycsXG4gICAgICAgICAgaW5pdGlhbDogJ2RldGFpbHMnXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvLyBQcmVwYXJlIGNoZWNrIHR5cGVcbiAgICBzaGVldERhdGEuY2hlY2tUeXBlID0gW1xuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0ssXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hlY2snKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1MsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuaXR5Q2hlY2snKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5DSEVDS19UWVBFLklURU0sXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSXRlbVdlYXBvbicpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNULFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdFRkZFQ1QuVGFiRWZmZWN0cycpXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gUHJlcGFyZSAnY2hlY2snIGxpbmsgdHlwZVxuICAgIHNoZWV0RGF0YS5saW5rVHlwZSA9IFtcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWMnKVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAga2V5OiBDb0M3TGluay5MSU5LX1RZUEUuQVRUUklCVVRFLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6IENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTCxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbCcpXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gUHJlcGFyZSAnY2hlY2snICdhdHRyaWJ1dGUnIHR5cGVzXG4gICAgc2hlZXREYXRhLmF0dHJpYnV0ZVR5cGUgPSBbXG4gICAgICB7XG4gICAgICAgIGtleTogJ2xjaycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBrZXk6ICdzYW4nLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpXG4gICAgICB9XG4gICAgXVxuXG4gICAgLy8gUHJlcGFyZSBlZmZlY3QgbW9kZSB0eXBlc1xuICAgIHNoZWV0RGF0YS5lZmZlY3RNb2RlcyA9IE9iamVjdC5lbnRyaWVzKENPTlNULkFDVElWRV9FRkZFQ1RfTU9ERVMpLnJlZHVjZShcbiAgICAgIChvYmosIGUpID0+IHtcbiAgICAgICAgb2JqW2VbMV1dID0gZ2FtZS5pMThuLmxvY2FsaXplKCdFRkZFQ1QuTU9ERV8nICsgZVswXSlcbiAgICAgICAgcmV0dXJuIG9ialxuICAgICAgfSxcbiAgICAgIHt9XG4gICAgKVxuXG4gICAgLy8gUHJlcGFyZSAnY2hlY2snICdjaGFyYWN0ZXJpc3RpYycgdHlwZXNcbiAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNUeXBlID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClcblxuICAgIHNoZWV0RGF0YS5saW5rID0gc2hlZXREYXRhLm9iamVjdC5saW5rXG5cbiAgICBzaGVldERhdGEuZnJvbUdhbWUgPSBzaGVldERhdGEubGluay5pc0l0ZW1DaGVjayB8fCBzaGVldERhdGEubGluay5pc1NraWxsQ2hlY2tcblxuICAgIHNoZWV0RGF0YS5mcm9tRGlyZWN0b3J5ID0gKHNoZWV0RGF0YS5vYmplY3QuaGFzSUQgPT09ICdmcm9tRGlyZWN0b3J5JylcbiAgICBzaGVldERhdGEuZnJvbUNvbXBlbmRpdW0gPSAoc2hlZXREYXRhLm9iamVjdC5oYXNJRCA9PT0gJ2Zyb21Db21wZW5kaXVtJylcblxuICAgIHNoZWV0RGF0YS5pc1NldEZyb21HYW1lID0gKHNoZWV0RGF0YS5saW5rLmlkICYmIChzaGVldERhdGEuZnJvbURpcmVjdG9yeSB8fCBzaGVldERhdGEuZnJvbUNvbXBlbmRpdW0pKVxuXG4gICAgc2hlZXREYXRhLmRpZmZpY3VsdHlMZXZlbCA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWxcblxuICAgIHNoZWV0RGF0YS5hY3Rvck5hbWVzID0gc2hlZXREYXRhLm9iamVjdC5hY3RvcnMubWFwKGEgPT4gYS5uYW1lKS5qb2luKCcsICcpXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnc2VsZWN0W25hbWU9dHlwZV0sc2VsZWN0W25hbWU9Y2hlY2tdLHNlbGVjdFtuYW1lPWF0dHJpYnV0ZUtleV0sc2VsZWN0W25hbWU9Y2hhcmFjdGVyaXN0aWNLZXldLGlucHV0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgIC5jaGFuZ2UodGhpcy5fb25DaGFuZ2VTdWJtaXQuYmluZCh0aGlzKSlcblxuICAgIC8vIEhhbmRsaW5nIGVmZmVjdHNcbiAgICBodG1sLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpLmNsaWNrKHRoaXMuX29uRWZmZWN0Q29udHJvbC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgX29uQ2hhbmdlU3VibWl0IChldmVudCkge1xuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lKSB7XG4gICAgICBjYXNlICdmcm9tQ29tcGVuZGl1bSc6XG4gICAgICBjYXNlICdmcm9tRGlyZWN0b3J5JzpcbiAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lID09PSB0aGlzLm9iamVjdC5oYXNJRCA/ICcnIDogZXZlbnQuY3VycmVudFRhcmdldC5uYW1lKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgfVxuXG4gIF9vbkVmZmVjdENvbnRyb2wgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBzd2l0Y2ggKGJ1dHRvbi5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAnYWRkJzpcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZEVmZmVjdENoYW5nZSgpXG4gICAgICBjYXNlICdkZWxldGUnOlxuICAgICAgICBidXR0b24uY2xvc2VzdCgnLmVmZmVjdC1jaGFuZ2UnKS5yZW1vdmUoKVxuICAgICAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICB9XG4gIH1cblxuICBhc3luYyBfYWRkRWZmZWN0Q2hhbmdlICgpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLm9iamVjdC5saW5rLmVmZmVjdC5jaGFuZ2VzLmxlbmd0aFxuICAgIHJldHVybiB0aGlzLnN1Ym1pdCh7XG4gICAgICBwcmV2ZW50Q2xvc2U6IHRydWUsXG4gICAgICB1cGRhdGVEYXRhOiB7XG4gICAgICAgIFtgZWZmZWN0LmNoYW5nZXMuJHtpZHh9YF06IHtcbiAgICAgICAgICBrZXk6ICcnLFxuICAgICAgICAgIG1vZGU6IENPTlNULkFDVElWRV9FRkZFQ1RfTU9ERVMuQURELFxuICAgICAgICAgIHZhbHVlOiAnJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGxldCBoYXNFZmZlY3QgPSBmYWxzZVxuICAgIGNvbnN0IGVmZmVjdCA9IHtcbiAgICAgIGR1cmF0aW9uOiB7fSxcbiAgICAgIGNoYW5nZXM6IFtdXG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IGluIGZvcm1EYXRhKSB7XG4gICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICBjYXNlICdjaGVja05hbWUnOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCBmb3JtRGF0YS5jaGVja05hbWUpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYmxpbmQnOlxuICAgICAgICBjYXNlICdkaWZmaWN1bHR5JzpcbiAgICAgICAgY2FzZSAnZGlzcGxheU5hbWUnOlxuICAgICAgICBjYXNlICdpY29uJzpcbiAgICAgICAgY2FzZSAnaWQnOlxuICAgICAgICBjYXNlICdtb2RpZmllcic6XG4gICAgICAgIGNhc2UgJ3BhY2snOlxuICAgICAgICBjYXNlICdzYW5NaW4nOlxuICAgICAgICBjYXNlICdzYW5NYXgnOlxuICAgICAgICBjYXNlICdzYW5SZWFzb24nOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoa2V5LCBmb3JtRGF0YVtrZXldKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2hhc01vZGlmaWVycyc6XG4gICAgICAgIGNhc2UgJ2hhc0xhYmVsJzpcbiAgICAgICAgY2FzZSAnaGFzSWNvbic6XG4gICAgICAgICAgdGhpcy5vYmplY3Rba2V5XSA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QubGFiZWwnOlxuICAgICAgICAgIGVmZmVjdC5sYWJlbCA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgICBoYXNFZmZlY3QgPSB0cnVlXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZWZmZWN0Lmljb24nOlxuICAgICAgICAgIGVmZmVjdC5pY29uID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QudGludCc6XG4gICAgICAgICAgZWZmZWN0LnRpbnQgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kaXNhYmxlZCc6XG4gICAgICAgICAgZWZmZWN0LmRpc2FibGVkID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlZmZlY3QuZHVyYXRpb24uc2Vjb25kcyc6XG4gICAgICAgICAgZWZmZWN0LmR1cmF0aW9uLnNlY29uZHMgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kdXJhdGlvbi5yb3VuZHMnOlxuICAgICAgICAgIGVmZmVjdC5kdXJhdGlvbi5yb3VuZHMgPSBmb3JtRGF0YVtrZXldXG4gICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ2VmZmVjdC5kdXJhdGlvbi50dXJucyc6XG4gICAgICAgICAgZWZmZWN0LmR1cmF0aW9uLnR1cm5zID0gZm9ybURhdGFba2V5XVxuICAgICAgICAgIGhhc0VmZmVjdCA9IHRydWVcbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgY29uc3QgbWF0Y2ggPSBrZXkubWF0Y2goL15lZmZlY3RcXC5jaGFuZ2VzXFwuKFxcZCspXFwua2V5JC8pXG4gICAgICAgICAgaWYgKG1hdGNoKSB7XG4gICAgICAgICAgICBlZmZlY3QuY2hhbmdlcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5OiBmb3JtRGF0YVtrZXldLFxuICAgICAgICAgICAgICBtb2RlOiBmb3JtRGF0YVsnZWZmZWN0LmNoYW5nZXMuJyArIG1hdGNoWzFdICsgJy5tb2RlJ10sXG4gICAgICAgICAgICAgIHZhbHVlOiBmb3JtRGF0YVsnZWZmZWN0LmNoYW5nZXMuJyArIG1hdGNoWzFdICsgJy52YWx1ZSddXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaGFzRWZmZWN0ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGFzRWZmZWN0KSB7XG4gICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCdvYmplY3QnLCBlZmZlY3QpXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAodGFyZ2V0KSB7XG4gICAgICBzd2l0Y2ggKHRhcmdldC5uYW1lKSB7XG4gICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2NoZWNrJywgdGFyZ2V0LnZhbHVlKVxuICAgICAgICAgIGlmICh0YXJnZXQudmFsdWUgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0spIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2xpbmtUeXBlJywgQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMKVxuICAgICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbmFtZScsICcnKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdjaGVjayc6XG4gICAgICAgICAgdGhpcy5vYmplY3QubGluay5zZXRWYWx1ZSgnbGlua1R5cGUnLCB0YXJnZXQudmFsdWUpXG4gICAgICAgICAgaWYgKHRhcmdldC52YWx1ZSA9PT0gQ29DN0xpbmsuTElOS19UWVBFLkNIQVJBQ1RFUklTVElDKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClbMF0ua2V5KVxuICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0LnZhbHVlID09PSBDb0M3TGluay5MSU5LX1RZUEUuQVRUUklCVVRFKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgJ2xjaycpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCAnJylcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnYXR0cmlidXRlS2V5JzpcbiAgICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWNLZXknOlxuICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ25hbWUnLCB0YXJnZXQudmFsdWUpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGlmIChldmVudC50eXBlID09PSAnc3VibWl0Jykge1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LnN1Ym1pdHRlci5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgICAgIGNhc2UgJ2NsaXBib2FyZCc6XG4gICAgICAgICAgICBDb0M3VXRpbGl0aWVzLmNvcHlUb0NsaXBib2FyZCh0aGlzLm9iamVjdC5saW5rLmxpbmspXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ2NoYXQnOlxuICAgICAgICAgICAgQ29DN0xpbmsudG9DaGF0TWVzc2FnZSh0aGlzLm9iamVjdC5saW5rLm9iamVjdClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnd2hpc3Blci1vd25lcic6XG4gICAgICAgICAgICBDb0M3TGluay50b1doaXNwZXJNZXNzYWdlKHRoaXMub2JqZWN0Lmxpbmsub2JqZWN0LCB0aGlzLm9iamVjdC5hY3RvcnMpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ3doaXNwZXItc2VsZWN0ZWQnOlxuICAgICAgICAgICAgaWYgKCFjYW52YXMudG9rZW5zLmNvbnRyb2xsZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JOb1Rva2Vuc1NlbGVjdGVkJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UodGhpcy5vYmplY3QubGluay5vYmplY3QsIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5maWx0ZXIodCA9PiB0LmFjdG9yLm93bmVycy5sZW5ndGgpLm1hcCh0ID0+IHQuYWN0b3IpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50KSB7XG4gICAgY29uc3QgZGF0YVN0cmluZyA9IGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJylcbiAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShkYXRhU3RyaW5nKVxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdDb0M3TGluaycpIHtcbiAgICAgIHRoaXMuc2V0TGluayhhd2FpdCBDb0M3TGluay5mcm9tRHJvcERhdGEoZGF0YSkpXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoKGRhdGEudHlwZSA9PT0gJ0ZvbGRlcicgJiYgZGF0YS5kb2N1bWVudE5hbWUgPT09ICdBY3RvcicpIHx8IFsnSXRlbScsICdBY3RvciddLmluY2x1ZGVzKGRhdGEudHlwZSkpIHtcbiAgICAgICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCBkYXRhLmRvY3VtZW50TmFtZSA/PyBkYXRhLnR5cGUpXG4gICAgICAgIGlmIChkYXRhLmRvY3VtZW50TmFtZSA/PyBkYXRhLnR5cGUgPT09ICdBY3RvcicpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5hY3RvcnMgPSBkYXRhTGlzdC5maWx0ZXIoYSA9PiBhLm93bmVycy5sZW5ndGgpXG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfSBlbHNlIGlmIChkYXRhTGlzdC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBpZiAoWydza2lsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhkYXRhTGlzdFswXS50eXBlKSkge1xuICAgICAgICAgICAgaWYgKGRhdGFMaXN0WzBdLnBhY2spIHtcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbUNvbXBlbmRpdW0nXG4gICAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ3BhY2snLCBkYXRhTGlzdFswXS5wYWNrKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5vYmplY3QuaGFzSUQgPSAnZnJvbURpcmVjdG9yeSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMub2JqZWN0Lmxpbmsuc2V0VmFsdWUoJ2lkJywgZGF0YUxpc3RbMF0uaWQpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5saW5rLnNldFZhbHVlKCduYW1lJywgZGF0YUxpc3RbMF0ubmFtZSlcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc2V0TGluayAobGluaykge1xuICAgIHRoaXMub2JqZWN0LmxpbmsgPSBsaW5rXG4gICAgaWYgKGxpbmsucGFjayAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gJ2Zyb21Db21wZW5kaXVtJ1xuICAgIH0gZWxzZSBpZiAobGluay5pZCAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0lEID0gJ2Zyb21EaXJlY3RvcnknXG4gICAgfVxuICAgIGlmIChsaW5rLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciB8fCBwYXJzZUludChsaW5rLm1vZGlmaWVyLCAxMCkgIT09IDApIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc01vZGlmaWVycyA9IHRydWVcbiAgICB9XG4gICAgaWYgKGxpbmsuZGlzcGxheU5hbWUgIT09ICcnKSB7XG4gICAgICB0aGlzLm9iamVjdC5oYXNMYWJlbCA9IHRydWVcbiAgICB9XG4gICAgaWYgKGxpbmsuaWNvbiAhPT0gJycpIHtcbiAgICAgIHRoaXMub2JqZWN0Lmhhc0ljb24gPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAobGlua0RhdGEgPSB7fSwgb3B0aW9uID0ge30pIHtcbiAgICBjb25zdCBvYmplY3QgPSBtZXJnZU9iamVjdCh7XG4gICAgICBsaW5rOiBudWxsLFxuICAgICAgaGFzSUQ6ICcnLFxuICAgICAgaGFzTW9kaWZpZXJzOiBmYWxzZSxcbiAgICAgIGhhc0xhYmVsOiBmYWxzZSxcbiAgICAgIGhhc0ljb246IGZhbHNlLFxuICAgICAgYWN0b3JzOiBbXVxuICAgIH0sIG9wdGlvbilcbiAgICBjb25zdCBkaWFsb2cgPSBuZXcgQ29DN0NvbnRlbnRMaW5rRGlhbG9nKG9iamVjdCwge30pXG4gICAgZGlhbG9nLnNldExpbmsoYXdhaXQgQ29DN0xpbmsuZnJvbURyb3BEYXRhKGxpbmtEYXRhKSlcbiAgICBkaWFsb2cucmVuZGVyKHRydWUpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBDT05TVCwgZHVwbGljYXRlLCBmcm9tVXVpZCwgZ2FtZSwgUmF5LCBUb2tlbiwgdWkgKi9cblxuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIFJldHVybiA8YT4gZWxlbWVudCBvZiBhIHJvbGwgaW5zdGFuY2UuIGZvdW5kcnkuanMgcmVmOlRleHRFZGl0b3IuX2NyZWF0ZUlubGluZVJvbGxcbiAqIEBwYXJhbSB7Um9sbH0gcm9sbCAgICAgIFRoZSByb2xsIG9iamVjdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlSW5saW5lUm9sbCAocm9sbCkge1xuICBjb25zdCBkYXRhID0ge1xuICAgIGNsczogWydpbmxpbmUtcm9sbCddLFxuICAgIGRhdGFzZXQ6IHt9XG4gIH1cblxuICB0cnkge1xuICAgIGRhdGEuY2xzLnB1c2goJ2lubGluZS1yZXN1bHQnKVxuICAgIGRhdGEucmVzdWx0ID0gcm9sbC50b3RhbFxuICAgIGRhdGEudGl0bGUgPSByb2xsLmZvcm11bGFcbiAgICBkYXRhLmRhdGFzZXQucm9sbCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShyb2xsKSlcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8vIENvbnN0cnVjdCBhbmQgcmV0dXJuIHRoZSBmb3JtZWQgbGluayBlbGVtZW50XG4gIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgYS5jbGFzc0xpc3QuYWRkKC4uLmRhdGEuY2xzKVxuICBhLnRpdGxlID0gZGF0YS50aXRsZVxuICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgYS5kYXRhc2V0W2tdID0gdlxuICB9XG4gIGEuaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmFzIGZhLWRpY2UtZDIwXCI+PC9pPiAke2RhdGEucmVzdWx0fWBcbiAgcmV0dXJuIGFcbn1cblxuLyoqXG4gKiBGdW5jdGlvbiB1c2VkIGZvciBKU09OLnN0cmluZ2lmeSByZXBsYWNlci5cbiAqIEV4Y2x1ZGUgYW55IGtleSBzdGFydGluZyB3aXRoIF9cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfIChrZXksIHZhbHVlKSB7XG4gIC8vIGNvbnZlcnQgUmVnRXhwIHRvIHN0cmluZ1xuICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ18nKSkge1xuICAgIHJldHVybiB1bmRlZmluZWQgLy8gcmVtb3ZlIGZyb20gcmVzdWx0XG4gIH1cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG4vKipcbiAqIEZ1bmN0aW9uIHVzZWQgZm9yIEpTT04uc3RyaW5naWZ5IHJlcGxhY2VyLlxuICogRXhjbHVkZSBhbnkga2V5IHN0YXJ0aW5nIHdpdGggX19cbiAqIEBwYXJhbSB7Kn0ga2V5ICAgICBUaGUgb2JqZWN0J3MgcHJvcGVydHkgS2V5XG4gKiBAcGFyYW0geyp9IHZhbHVlICAgVGhlIGFzc29jaWF0ZWQgdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGV4Y2x1ZGVfXyAoa2V5LCB2YWx1ZSkge1xuICAvLyBjb252ZXJ0IFJlZ0V4cCB0byBzdHJpbmdcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuICByZXR1cm4gdmFsdWUgLy8gcmV0dXJuIGFzIGlzXG59XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaXMgQ1RSTCBrZXkgaXMgcHJlc3NlZFxuICogVXNlZCBmb3IgTUFDIGNvbXBhdC5cbiAqIEBwYXJhbSB7Uy5FdmVudH0gZXZlbnRcbiAqIEByZXR1cm5zXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0N0cmxLZXkgKGV2ZW50KSB7XG4gIGlmIChldmVudCA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gKFxuICAgIGV2ZW50Lm1ldGFLZXkgfHxcbiAgICBldmVudC5jdHJsS2V5IHx8XG4gICAgZXZlbnQua2V5Q29kZSA9PT0gOTEgfHxcbiAgICBldmVudC5rZXlDb2RlID09PSAyMjRcbiAgKVxufVxuXG5leHBvcnQgY2xhc3MgY2hhdEhlbHBlciB7XG4gIHN0YXRpYyBoeXBoZW5Ub0NhbWVsQ2FzZSAoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKC8tKFthLXpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gc3RyaW5nWzFdLnRvVXBwZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU1lc3NhZ2UgKHRpdGxlLCBtZXNzYWdlLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBtZXNzYWdlRGF0YSA9IHt9XG4gICAgbWVzc2FnZURhdGEuZmxhdm9yID0gdGl0bGVcbiAgICBtZXNzYWdlRGF0YS5zcGVha2VyID0gb3B0aW9ucy5zcGVha2VyIHx8IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGlmIChvcHRpb25zLndoaXNwZXIpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgbWVzc2FnZURhdGEud2hpc3BlciA9IG9wdGlvbnMud2hpc3BlclxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucm9sbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG1lc3NhZ2VEYXRhLnJvbGwgPSBvcHRpb25zLnJvbGxcbiAgICAgIG1lc3NhZ2VEYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuUk9MTFxuICAgICAgbWVzc2FnZURhdGEucm9sbE1vZGUgPSBDT05TVC5ESUNFX1JPTExfTU9ERVMuU0VMRlxuICAgIH1cbiAgICBtZXNzYWdlRGF0YS51c2VyID0gZ2FtZS51c2VyLmlkXG4gICAgbWVzc2FnZURhdGEuY29udGVudCA9IG1lc3NhZ2VcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShtZXNzYWdlRGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgY2FtZWxDYXNlVG9IeXBoZW4gKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvKFtBLVpdKS9nLCBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gJy0nICsgc3RyaW5nLnRvTG93ZXJDYXNlKClcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgaWYgKCFrZXkpIHJldHVybiBudWxsXG4gICAgLy8gQ2FzZSAwIC0gYSBkb2N1bWVudCBVdWlkXG4gICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWQoa2V5KSkge1xuICAgICAgaWYgKENvQzdVdGlsaXRpZXMuaXNEb2N1bWVudFV1aWRQYWNrKGtleSkpIHJldHVybiBmcm9tVXVpZChrZXkpIC8vIFRPRE8gQ2hlY2sgd2UgY2FuIGRvIHRoYXRcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZChrZXkpXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfVxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShrZXkpXG4gICAgICByZXR1cm4gdG9rZW4/LmFjdG9yXG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoa2V5KSB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0U3BlYWtlckZyb21LZXkgKGFjdG9yS2V5KSB7XG4gICAgY29uc3Qgc3BlYWtlciA9IHt9XG4gICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgaWYgKGFjdG9yS2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGFjdG9yS2V5LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBzcGVha2VyLnRva2VuID0gdG9rZW5JZFxuICAgICAgc3BlYWtlci5zY2VuZSA9IHNjZW5lSWRcbiAgICAgIGlmIChhY3Rvci50b2tlbj8ubmFtZSkgc3BlYWtlci5hbGlhcyA9IGFjdG9yLnRva2VuLm5hbWVcbiAgICAgIHNwZWFrZXIuYWN0b3IgPSBhY3Rvci5pZFxuICAgIH0gZWxzZSB7XG4gICAgICBzcGVha2VyLmFjdG9yID0gYWN0b3JLZXlcbiAgICAgIHNwZWFrZXIuYWxpYXMgPSBhY3Rvci5uYW1lXG4gICAgfVxuICAgIHJldHVybiBzcGVha2VyXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoT2JqZWN0VG9FbGVtZW50IChvYmplY3QsIGVsZW1lbnQsIG9iamVjdE5hbWUgPSAnJykge1xuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhvYmplY3QpKSB7XG4gICAgICBpZiAoIXByb3Auc3RhcnRzV2l0aCgnXycpKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0W3Byb3BdID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KFxuICAgICAgICAgICAgb2JqZWN0W3Byb3BdLFxuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIGAke29iamVjdE5hbWV9OiR7cHJvcH06YFxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbGVtZW50LmRhdGFzZXRbYCR7b2JqZWN0TmFtZX0ke3Byb3B9YF0gPSBvYmplY3RbcHJvcF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRPYmplY3RGcm9tRWxlbWVudCAob2JqZWN0LCBlbGVtZW50KSB7XG4gICAgZnVuY3Rpb24gZGVzZXJpYWxpemUgKG9iaiwga2V5LCB2YWx1ZSkge1xuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKCc6JykpIHtcbiAgICAgICAgY29uc3QgcyA9IGtleS5zbGljZSgxKVxuICAgICAgICBjb25zdCBvYmpQcm9wID0gcy5zbGljZShzLmluZGV4T2YoJzonKSArIDEpXG4gICAgICAgIGNvbnN0IG9iak5hbWUgPSBzLnN1YnN0cmluZygwLCBzLmluZGV4T2YoJzonKSlcbiAgICAgICAgaWYgKHR5cGVvZiBvYmpbb2JqTmFtZV0gPT09ICd1bmRlZmluZWQnKSBvYmpbb2JqTmFtZV0gPSB7fVxuICAgICAgICBkZXNlcmlhbGl6ZShvYmpbb2JqTmFtZV0sIG9ialByb3AsIHZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSAndHJ1ZScpIG9ialtrZXldID0gdHJ1ZVxuICAgICAgICBlbHNlIGlmICh2YWx1ZSA9PT0gJ2ZhbHNlJykgb2JqW2tleV0gPSBmYWxzZVxuICAgICAgICBlbHNlIGlmIChOdW1iZXIodmFsdWUpLnRvU3RyaW5nKCkgPT09IHZhbHVlKSBvYmpba2V5XSA9IE51bWJlcih2YWx1ZSlcbiAgICAgICAgZWxzZSBvYmpba2V5XSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFlbGVtZW50IHx8ICFvYmplY3QpIHJldHVyblxuICAgIGZvciAoY29uc3QgcHJvcCBvZiBPYmplY3Qua2V5cyhlbGVtZW50LmRhdGFzZXQpKSB7XG4gICAgICBpZiAocHJvcCA9PT0gJ3RlbXBsYXRlJykgcmV0dXJuXG4gICAgICBkZXNlcmlhbGl6ZShvYmplY3QsIHByb3AsIGVsZW1lbnQuZGF0YXNldFtwcm9wXSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW5Gcm9tS2V5IChrZXkpIHtcbiAgICBpZiAoIWtleSkgcmV0dXJuIG51bGxcbiAgICBpZiAoa2V5LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgaWYgKCF0b2tlbi5zY2VuZSkgdG9rZW4uc2NlbmUgPSBkdXBsaWNhdGUoc2NlbmUuZG9jdW1lbnQpXG4gICAgICAgIHJldHVybiB0b2tlblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChrZXkpXG4gICAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvclRva2VuKGFjdG9yKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvclRva2VuIChhY3Rvcikge1xuICAgIGlmICghYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGFjdG9yLnRva2VuIHx8IGFjdG9yLnByb3RvdHlwZVRva2VuXG4gICAgLyoqKioqKioqKioqKioqKioqKiovXG4gICAgLy8gLy8gQ2FzZSAwIC0gQWN0b3IgaXMgYSB0b2tlbiAoc3ludGhldGljIGFjdG9yKSwgcmV0dXJuIHRoYXQgdG9rZW4uXG4gICAgLy8gaWYoYWN0b3IuaXNUb2tlbikgcmV0dXJuIGFjdG9yLnRva2VuO1xuICAgIC8vIGVsc2V7XG4gICAgLy8gIC8vIENhc2UgMSAtIEFjdG9yIGlzIG5vdCBhIHRva2VuLCBmaW5kIGlmIGEgdG9rZW4gZXhpc3QgZm9yIHRoYXQgYWN0b3IuXG4gICAgLy8gIGNvbnN0IGFjdG9yVG9rZW5zID0gYWN0b3IuZ2V0QWN0aXZlVG9rZW5zKCk7XG4gICAgLy8gIGlmKCBhY3RvclRva2Vucy5sZW5ndGgpe1xuICAgIC8vICAgIC8vIENhc2UgMS4xIC0gSWYgaGUgaGFzIG9ubHkgb25lIFRva2VuIHJldHVybiBpdC5cbiAgICAvLyAgICBpZiggMSA9PT0gYWN0b3JUb2tlbnMubGVuZ3RoKSByZXR1cm4gYWN0b3JUb2tlbnNbMF07XG5cbiAgICAvLyAgICAvLyBDYXNlIDEuMiAtIEFjdG9yIGhhcyBtdWx0aXBsZSB0b2tlbnMsIGZpbmQgaWYgb25lIG9mIHRoZW0gaXMgdGhlIGNvbnRyb2xsZWQgdG9rZW4uXG4gICAgLy8gICAgY29uc3QgY29udHJvbGxlZFRva2VucyA9IGFjdG9yVG9rZW5zLmZpbHRlciggdCA9PiB0Ll9jb250cm9sbGVkKTtcbiAgICAvLyAgICBpZiggY29udHJvbGxlZFRva2Vucy5sZW5ndGgpe1xuICAgIC8vICAgICAgLy8gUmV0dXJuIHRoZSAxc3QgY29udHJvbGxlZCB0b2tlbiwgcmlzZSBhIHdhcm5pbmcgaWYgaGUgaGFzIG11bHRpcGxlIGNvbnRyb2xsZWQgdG9rZW5zLlxuICAgIC8vICAgICAgaWYoIHZlcmJvc2UgJiYgY29udHJvbGxlZFRva2Vucy5sZW5ndGggPiAxKSB1aS5ub3RpZmljYXRpb25zLndhcm4oIGBBY3RvciAke2FjdG9yLm5hbWV9IGhhcyAke2NvbnRyb2xsZWRUb2tlbnMubGVuZ3RofSBjb250cm9sbGVkIHRva2Vucy4gVXNpbmcgdGhlIGZpcnN0IGZvdW5kYCk7XG4gICAgLy8gICAgICByZXR1cm4gY29udHJvbGxlZFRva2Vuc1swXTtcbiAgICAvLyAgICB9XG5cbiAgICAvLyAgICAvLyBDYXNlIDEuMyBhY3RvciBkb2Vzbid0IGhhdmUgYW55IGFjdGl2ZSB0b2tlbi4gUmV0dXJuIHRoZSBmaXJzdCB2YWxpZCB0b2tlbiBmb3IgdGhhdCBhY3RvciBhbmQgcmFpc2UgYSB3YXJuaW5nLlxuICAgIC8vICAgIGlmKCB2ZXJib3NlKSB1aS5ub3RpZmljYXRpb25zLndhcm4oIGBBY3RvciAke2FjdG9yLm5hbWV9IGRvZXNuJ3QgaGF2ZSBhbnkgY29udHJvbGxlZCB0b2tlbi4gVXNpbmcgZmlyc3QgdG9rZW4gZm91bmQuYCk7XG4gICAgLy8gICAgcmV0dXJuIGFjdG9yVG9rZW5zWzBdO1xuICAgIC8vICB9XG5cbiAgICAvLyAgaWYoIHZlcmJvc2UpIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoIGBDb3VsZCBub3QgZmluIGFueSB0b2tlbiBmb3IgJHthY3Rvci5uYW1lfS5gKTtcbiAgICAvLyAgcmV0dXJuIG51bGw7XG4gICAgLy8gfVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9ySW1nRnJvbUtleSAoYWN0b3JLZXkpIHtcbiAgICBpZiAoIWFjdG9yS2V5KSByZXR1cm4gbnVsbFxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSB7XG4gICAgICAvLyBUcnkgdG8gZmluZCBhIHRva2VuLlxuICAgICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleShhY3RvcktleSlcbiAgICAgIGlmICh0b2tlbikge1xuICAgICAgICBpZiAoKHRva2VuLmRvY3VtZW50IHx8IHRva2VuKS50ZXh0dXJlLnNyYykge1xuICAgICAgICAgIGlmICgodG9rZW4uZG9jdW1lbnQgfHwgdG9rZW4pLnRleHR1cmUuc3JjLmluZGV4T2YoJyonKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiAodG9rZW4uZG9jdW1lbnQgfHwgdG9rZW4pLnRleHR1cmUuc3JjXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VUb2tlbicpKSB7XG4gICAgICAvLyBpZiBubyB0b2tlbiBmb3VuZCBmb3IgdGhhdCBhY3RvciByZXR1cm4gdGhlIHByb3RvdHlwZSB0b2tlbiBpbWFnZS5cbiAgICAgIGlmIChhY3Rvci5wcm90b3R5cGVUb2tlbikge1xuICAgICAgICBpZiAoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMpIHtcbiAgICAgICAgICBpZiAoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmM/LmluZGV4T2YoJyonKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBhY3Rvci5wcm90b3R5cGVUb2tlbi50ZXh0dXJlLnNyY1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0b3IuaW1nXG4gIH1cblxuICBzdGF0aWMgZ2V0RGlzdGFuY2UgKHN0YXJ0VG9rZW4sIGVuZFRva2VuKSB7XG4gICAgLy8gc3RhcnRUb2tlbi51cGRhdGVTb3VyY2UoKTtcbiAgICAvLyBjYW52YXMuc2lnaHQuaW5pdGlhbGl6ZVRva2VucygpO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiBlbmRUb2tlbi5jZW50ZXIgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgZW5kVG9rZW4uaWQgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBpZiAoc3RhcnRUb2tlbi5zY2VuZT8uaWQgfHwgZmFsc2UpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc3RhcnRUb2tlbi5zY2VuZS5pZClcbiAgICAgICAgaWYgKHR5cGVvZiBzY2VuZT8udG9rZW5zICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IHRva2VucyA9IHNjZW5lPy50b2tlbnNcbiAgICAgICAgICAgIC5maWx0ZXIodG9rZW4gPT4gdG9rZW4uYWN0b3IuaWQgPT09IGVuZFRva2VuLmRhdGEuZG9jdW1lbnQuaWQpXG4gICAgICAgICAgICAubWFwKHRva2VuID0+IHRva2VuLm9iamVjdClcbiAgICAgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgZW5kVG9rZW4gPSB0b2tlbnNbMF1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IGRpc3RhbmNlID0ge1xuICAgICAgZ3JpZFVuaXQ6IDAsXG4gICAgICB2YWx1ZTogMCxcbiAgICAgIHVuaXQ6IGNhbnZhcy5zY2VuZS5ncmlkLnVuaXRzXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHR5cGVvZiBzdGFydFRva2VuICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIHN0YXJ0VG9rZW4uY2VudGVyICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGVuZFRva2VuICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGVuZFRva2VuLmNlbnRlciAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IHJheSA9IG5ldyBSYXkoc3RhcnRUb2tlbi5jZW50ZXIsIGVuZFRva2VuLmNlbnRlcilcbiAgICAgIGNvbnN0IHNlZ21lbnQgPSBbeyByYXkgfV1cbiAgICAgIGRpc3RhbmNlID0ge1xuICAgICAgICBncmlkVW5pdDogcmF5LmRpc3RhbmNlIC8gY2FudmFzLnNjZW5lLmdyaWQuc2l6ZSxcbiAgICAgICAgLy8gdmFsdWU6IChyYXkuZGlzdGFuY2UvY2FudmFzLnNjZW5lLmRhdGEuZ3JpZCkqY2FudmFzLnNjZW5lLmRhdGEuZ3JpZERpc3RhbmNlLFxuICAgICAgICB2YWx1ZTogY2FudmFzLmdyaWQubWVhc3VyZURpc3RhbmNlcyhzZWdtZW50LCB7XG4gICAgICAgICAgZ3JpZFNwYWNlczogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZ3JpZFNwYWNlcycpXG4gICAgICAgIH0pWzBdLFxuICAgICAgICB1bml0OiBjYW52YXMuc2NlbmUuZ3JpZC51bml0c1xuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3RhbmNlRWxldmF0aW9uJykpIHtcbiAgICAgICAgY29uc3QgZWxldmF0aW9uID0gTWF0aC5hYnMoXG4gICAgICAgICAgKHN0YXJ0VG9rZW4uZG9jdW1lbnQuZWxldmF0aW9uIHx8IDApIC0gKGVuZFRva2VuLmRvY3VtZW50LmVsZXZhdGlvbiB8fCAwKVxuICAgICAgICApXG4gICAgICAgIGRpc3RhbmNlLnZhbHVlID0gTWF0aC5zcXJ0KFxuICAgICAgICAgIGRpc3RhbmNlLnZhbHVlICogZGlzdGFuY2UudmFsdWUgKyBlbGV2YXRpb24gKiBlbGV2YXRpb25cbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3RhbmNlVGhlYXRyZU9mVGhlTWluZCcpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlRGlzdGFuY2VDYWxjdWxhdGlvbkZhaWx1cmUnKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gZGlzdGFuY2VcbiAgfVxuXG4gIHN0YXRpYyB0b1lhcmRzIChkaXN0YW5jZSkge1xuICAgIHN3aXRjaCAoZGlzdGFuY2UudW5pdCkge1xuICAgICAgY2FzZSAnZnQnOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWUgLyAzXG5cbiAgICAgIGNhc2UgJ3lkJzpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG5cbiAgICAgIGNhc2UgJ20nOlxuICAgICAgICByZXR1cm4gZGlzdGFuY2UudmFsdWVcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlLnZhbHVlXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3Um9sbCB7XG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHJvbGxEaXYgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJ2Rpdi5kaWNlLXJvbGwnKVxuICAgIGlmICghcm9sbERpdikgcmV0dXJuIG51bGxcblxuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgcm9sbERpdilcblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBnZXQgcmVzdWx0VHlwZSAoKSB7XG4gICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBwYXJzZUludCh0aGlzLnN1Y2Nlc3NMZXZlbClcbiAgICBzd2l0Y2ggKHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQ6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GdW1ibGUnKVxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmUnKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3JLZXkpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIGlmICh0aGlzLml0ZW1JZCAmJiB0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtSWQpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgaWYgKHRoaXMuc2tpbGxJZCAmJiB0aGlzLmFjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy5za2lsbElkKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzaG93RGljZVJvbGwgKCkge1xuICAgIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdkaWNlLXNvLW5pY2UnKT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBkaWNlUmVzdWx0cyA9IFtdXG4gICAgICBmb3IgKGNvbnN0IGRpZVJlc3VsdCBvZiB0aGlzLmRpY2VzLnRlbnMpIHtcbiAgICAgICAgZGljZVJlc3VsdHMucHVzaChkaWVSZXN1bHQudmFsdWUgPT09IDEwMCA/IDAgOiBkaWVSZXN1bHQudmFsdWUgLyAxMClcbiAgICAgIH1cbiAgICAgIGRpY2VSZXN1bHRzLnB1c2godGhpcy5kaWNlcy51bml0LnZhbHVlKVxuXG4gICAgICBjb25zdCBkaWNlRGF0YSA9IHtcbiAgICAgICAgZm9ybXVsYTogYCR7dGhpcy5kaWNlcy50ZW5zLmxlbmd0aH1kMTAwKzFkMTBgLFxuICAgICAgICByZXN1bHRzOiBkaWNlUmVzdWx0cyxcbiAgICAgICAgd2hpc3BlcjogbnVsbCxcbiAgICAgICAgYmxpbmQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLmRpY2UzZC5zaG93KGRpY2VEYXRhKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgY29uc3Qgcm9sbCA9IG9iamVjdCB8fCBuZXcgQ29DN1JvbGwoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgZWxlbWVudClcbiAgICByb2xsLmRpY2VzID0ge1xuICAgICAgdGVuczogW10sXG4gICAgICB1bml0OiB7fVxuICAgIH1cbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KFxuICAgICAgcm9sbC5kaWNlcyxcbiAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRpY2UtcmVzdWx0JylcbiAgICApXG4gICAgcm9sbC5kaWNlcy5oYXNCb251cyA9IHJvbGwuZGljZU1vZGlmaWVyICE9PSAwXG4gICAgcm9sbC5kaWNlcy5ib251cyA9IE1hdGguYWJzKHJvbGwuZGljZU1vZGlmaWVyKVxuICAgIHJvbGwuZGljZXMuYm9udXNUeXBlID1cbiAgICAgIHJvbGwuZGljZU1vZGlmaWVyIDwgMFxuICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyUGVuYWx0eScpXG4gICAgICAgIDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJCb251cycpXG4gICAgY29uc3QgdGVuRGljZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnRlbi1kaWNlJylcbiAgICBpZiAodGVuRGljZSkge1xuICAgICAgZm9yIChjb25zdCBkIG9mIHRlbkRpY2UucXVlcnlTZWxlY3RvckFsbCgnbGknKSkge1xuICAgICAgICBjb25zdCBkaWUgPSB7XG4gICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGlzTWF4OiBmYWxzZSxcbiAgICAgICAgICBpc01pbjogZmFsc2UsXG4gICAgICAgICAgdmFsdWU6IC0xXG4gICAgICAgIH1cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChkaWUsIGQpXG4gICAgICAgIHJvbGwuZGljZXMudGVucy5wdXNoKGRpZSlcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgdW5pdERpZSA9IGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnVuaXQtZGllJylcbiAgICAgID8gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudW5pdC1kaWUnKS5xdWVyeVNlbGVjdG9yKCdsaScpXG4gICAgICA6IG51bGxcbiAgICByb2xsLmRpY2VzLnVuaXQudmFsdWUgPSB1bml0RGllID8gcGFyc2VJbnQodW5pdERpZS5kYXRhc2V0LnZhbHVlKSA6IG51bGxcblxuICAgIHJvbGwuaW5jcmVhc2VTdWNjZXNzID0gW11cbiAgICBjb25zdCBpbmNyZWFzZVN1Y2Nlc3MgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5pbmNyZWFzZS1zdWNjZXNzJylcbiAgICBpZiAoaW5jcmVhc2VTdWNjZXNzICYmIGluY3JlYXNlU3VjY2Vzcy5xdWVyeVNlbGVjdG9yQWxsKCdidXR0b24nKSkge1xuICAgICAgZm9yIChjb25zdCBpc2wgb2YgaW5jcmVhc2VTdWNjZXNzLnF1ZXJ5U2VsZWN0b3JBbGwoJ2J1dHRvbicpKSB7XG4gICAgICAgIGNvbnN0IG5ld1N1Y2Nlc0xldmVsID0ge31cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChuZXdTdWNjZXNMZXZlbCwgaXNsKVxuICAgICAgICByb2xsLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5ld1N1Y2Nlc0xldmVsKVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyb2xsLmx1Y2tOZWVkZWQpIHtcbiAgICAgIHJvbGwubHVja05lZWRlZFR4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbmRMdWNrJywge1xuICAgICAgICBsdWNrTmVlZGVkVmFsdWU6IHJvbGwubHVja05lZWRlZFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKCFvYmplY3QpIHJldHVybiByb2xsXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNoZWNrIChjaGVjaykge1xuICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN1JvbGwoKVxuXG4gICAgcm9sbC5yb2xsVHlwZSA9IGNoZWNrLnJvbGxUeXBlXG4gICAgcm9sbC5zaWRlID0gY2hlY2suc2lkZVxuICAgIHJvbGwuYWN0aW9uID0gY2hlY2suYWN0aW9uXG4gICAgcm9sbC5yZWZNZXNzYWdlSWQgPSBjaGVjay5yZWZNZXNzYWdlSWRcbiAgICByb2xsLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZFxuXG4gICAgcm9sbC5zdWNjZXNzTGV2ZWwgPSBjaGVjay5zdWNjZXNzTGV2ZWxcbiAgICByb2xsLmRpZmZpY3VsdHkgPSBjaGVjay5kaWZmaWN1bHR5XG4gICAgcm9sbC5za2lsbElkID0gY2hlY2suc2tpbGwgPyBjaGVjay5za2lsbC5pZCA6IG51bGxcbiAgICByb2xsLml0ZW1JZCA9IGNoZWNrLml0ZW0gPyBjaGVjay5pdGVtLmlkIDogbnVsbFxuICAgIHJvbGwuZGljZU1vZCA9IGNoZWNrLmRpY2VNb2RpZmllclxuICAgIHJvbGwudmFsdWUgPSBwYXJzZUludChjaGVjay5yYXdWYWx1ZSlcbiAgICByb2xsLmZ1bWJsZSA9IGNoZWNrLmlzRnVtYmxlXG4gICAgcm9sbC5jcml0aWNhbCA9IGNoZWNrLmlzQ3JpdGljYWxcbiAgICByb2xsLmNoYXJhY3RlcmlzdGljID0gY2hlY2suY2hhcmFjdGVyaXN0aWMgPyBjaGVjay5jaGFyYWN0ZXJpc3RpYyA6IG51bGxcbiAgICByb2xsLnJlc3VsdCA9IGNoZWNrLmRpY2UudG90YWxcblxuICAgIHJvbGwuYWN0b3JLZXkgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcblxuICAgIGlmIChjaGVjay5hY3Rvci5pc1Rva2VuKSB7XG4gICAgICByb2xsLnRva2VuSWQgPSBjaGVjay5hY3Rvci50b2tlbktleSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIHJvbGwuYWN0b3JJZCA9IG51bGxcbiAgICB9IGVsc2Uge1xuICAgICAgcm9sbC50b2tlbktleSA9IG51bGxcbiAgICAgIHJvbGwuYWN0b3JJZCA9IGNoZWNrLmFjdG9yLnRva2VuS2V5IC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIH1cblxuICAgIHJldHVybiByb2xsXG4gIH1cblxuICBzdGF0aWMgYXR0YWNoQ2hlY2tUb0VsZW1lbnQgKGh0bWxFbGVtZW50LCBjaGVjaykge1xuICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2soY2hlY2spXG4gICAgcm9sbC5hdHRhY2hUb0VsZW1lbnQoaHRtbEVsZW1lbnQpXG5cbiAgICByZXR1cm4gcm9sbFxuICB9XG5cbiAgYXR0YWNoVG9FbGVtZW50IChodG1sRWxlbWVudCkge1xuICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KHRoaXMsIGh0bWxFbGVtZW50KVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBDb0M3RGFtYWdlIHtcbiAgc3RhdGljIGdldE1haW5EaWUgKGRhbWFnZVN0cmluZykge1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDIwJykpIHJldHVybiAnZDIwJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEyJykpIHJldHVybiAnZDEyJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDEwJykpIHJldHVybiAnZDEwJ1xuICAgIGlmIChkYW1hZ2VTdHJpbmcudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnZDgnKSkgcmV0dXJuICdkOCdcbiAgICBpZiAoZGFtYWdlU3RyaW5nLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Q0JykpIHJldHVybiAnZDQnXG4gICAgcmV0dXJuICdkNidcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tRWxlbWVudCAoZWxlbWVudCwgb2JqZWN0ID0gbnVsbCkge1xuICAgIGlmICghZWxlbWVudCkgcmV0dXJuXG4gICAgY29uc3QgZGFtYWdlID0gb2JqZWN0IHx8IHt9XG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChkYW1hZ2UsIGVsZW1lbnQpXG4gICAgY29uc3Qgcm9sbHMgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGxzJykucXVlcnlTZWxlY3RvckFsbCgnbGknKVxuICAgIGRhbWFnZS5yb2xscyA9IFtdXG4gICAgZm9yIChjb25zdCByIG9mIHJvbGxzKSB7XG4gICAgICBjb25zdCByb2xsID0ge31cbiAgICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQocm9sbCwgcilcbiAgICAgIGRhbWFnZS5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuXG4gICAgaWYgKCFvYmplY3QpIHJldHVybiBkYW1hZ2VcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4vY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcblxuZXhwb3J0IGNsYXNzIFJvbGxEaWFsb2cge1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbCA9IHt9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID0gdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIG9wdGlvbnMuZGlmZmljdWx0eUxldmVsLmhhcmQgPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgb3B0aW9ucy5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gaWYoIHVuZGVmaW5lZCA9PSBvcHRpb25zLmFza1ZhbHVlKSBvcHRpb25zLmFza1ZhbHVlID0gdHJ1ZTtcbiAgICBpZiAob3B0aW9ucy5uYW1lICYmICFvcHRpb25zLmRpc3BsYXlOYW1lKSBvcHRpb25zLmRpc3BsYXlOYW1lID0gb3B0aW9ucy5uYW1lXG4gICAgY29uc3QgdW5rbm93bkRpZmZpY3VsdHlEZWZhdWx0ID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGFsbG93RmxhdERpY2VNb2RpZmllcjpcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0RGljZU1vZGlmaWVyJykgJiZcbiAgICAgICAgIW9wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIsXG4gICAgICBhbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcjpcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKSAmJlxuICAgICAgICAhb3B0aW9ucy5kaXNhYmxlRmxhdFRocmVzaG9sZE1vZGlmaWVyLFxuICAgICAgZGlmZmljdWx0eTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCxcbiAgICAgIHVua25vd25EaWZmaWN1bHR5RGVmYXVsdCxcbiAgICAgIGhpZGVEaWZmaWN1bHR5OiBvcHRpb25zLmhpZGVEaWZmaWN1bHR5ID8/IGZhbHNlLFxuICAgICAgb3B0aW9uc1xuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICghb3B0aW9ucy5mb3JjZWRDYXJkVHlwZSA/PyB0cnVlKVxuICAgICkge1xuICAgICAgZGF0YS5jYXJkVHlwZXMgPSBDb0M3Q2hhdE1lc3NhZ2UuY2FyZFR5cGVzKG9wdGlvbnMpXG4gICAgfVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvYm9udXMuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Cb251c1NlbGVjdGlvbldpbmRvd05hbWVkJywge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQm9udXNTZWxlY3Rpb25XaW5kb3cnKSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIHJvbGw6IHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbERpY2UnKSxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjYm9udXMtcm9sbC1mb3JtJykpXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ3JvbGwnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbi8vIGltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vLi4vYWN0b3JzL2FjdG9yLmpzJztcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgUm9sbENhcmQge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5yb2xscyA9IFtdXG4gICAgdGhpcy5pbml0aWF0b3IgPSBudWxsXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5mcm9tRGF0YShjYXJkRGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IGNhcmQgPSBPYmplY3QuYXNzaWduKG5ldyB0aGlzKCksIGRhdGEpXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNhcmQucm9sbHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICBpZiAoY2FyZC5yb2xsc1tpbmRleF0/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgICBjYXJkLnJvbGxzW2luZGV4XSA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBjYXJkLnJvbGxzW2luZGV4XSlcbiAgICAgICAgaWYgKGNhcmQucm9sbHNbaW5kZXhdLnJvbGxlZCkge1xuICAgICAgICAgIGNhcmQucm9sbHNbaW5kZXhdLl9odG1sUm9sbCA9IGF3YWl0IGNhcmQucm9sbHNbaW5kZXhdLmdldEh0bWxSb2xsKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBzcGFuID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGlmIChzcGFuICYmIHNwYW4uY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IG1lc3NhZ2UgPSBzcGFuLmNsb3Nlc3QoJy5jaGF0LW1lc3NhZ2UnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21NZXNzYWdlSWQobWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZClcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IGZsYWcgPSBzcGFuLmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gc3Bhbi5jbG9zZXN0KCcudG9nZ2xlJylcbiAgICBpZiAoIXRvZ2dsZSkge1xuICAgICAgY2FyZC50b2dnbGVGbGFnKGZsYWcpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGJ1dHRvbnMgPSB0b2dnbGUucXVlcnlTZWxlY3RvckFsbCgnLnRvZ2dsZS1zd2l0Y2gnKVxuICAgICAgZm9yIChjb25zdCBiIG9mIGJ1dHRvbnMpIHtcbiAgICAgICAgY2FyZC51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpXG4gICAgICB9XG4gICAgICBjYXJkLnNldEZsYWcoZmxhZylcbiAgICB9XG4gICAgY2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZGlzcGF0Y2ggKGRhdGEpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGxldCBtZXNzYWdlcyA9IHVpLmNoYXQuY29sbGVjdGlvbi5maWx0ZXIobWVzc2FnZSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0aGlzLmRlZmF1bHRDb25maWcudHlwZSA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3R5cGUnKSAmJlxuICAgICAgICAgIG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdzdGF0ZScpICE9PSAncmVzb2x2ZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIGlmIChbJ2NvbWJpbmVkQ2FyZCddLmluY2x1ZGVzKHRoaXMuZGVmYXVsdENvbmZpZy50eXBlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2UuZ2V0RmxhZygnQ29DNycsICdpbml0aWF0b3InKSA9PT0gZGF0YS5yb2xsLmluaXRpYXRvclxuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcblxuICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCkge1xuICAgICAgICAvLyBPbGQgbWVzc2FnZXMgY2FuJ3QgYmUgdXNlZCBpZiBtZXNzYWdlIGlzIG1vcmUgdGhhbiBhIGRheSBvbGQgbWFyayBpdCBhcyByZXNvbHZlZFxuICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZShtZXNzYWdlc1swXS50aW1lc3RhbXApXG4gICAgICAgIGNvbnN0IG5vdyA9IG5ldyBEYXRlKClcbiAgICAgICAgY29uc3QgdGltZURpZmZTZWMgPSAobm93IC0gdGltZXN0YW1wKSAvIDEwMDBcbiAgICAgICAgaWYgKDI0ICogNjAgKiA2MCA8IHRpbWVEaWZmU2VjKSB7XG4gICAgICAgICAgYXdhaXQgbWVzc2FnZXNbMF0uc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG4gICAgICAgICAgbWVzc2FnZXMgPSBbXVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGxldCBjYXJkXG4gICAgICBpZiAoIW1lc3NhZ2VzLmxlbmd0aCkgY2FyZCA9IG5ldyB0aGlzKClcbiAgICAgIGVsc2UgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZXNbMF0pXG4gICAgICBpZiAodHlwZW9mIGRhdGEuX3JvbGxNb2RlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjYXJkLl9yb2xsTW9kZSA9IGRhdGEuX3JvbGxNb2RlXG4gICAgICB9XG4gICAgICBhd2FpdCBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICB9IGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy5jb25maWcudGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJChodG1sKVxuICAgIGh0bWxDYXJkRWxlbWVudFswXS5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMuY29uZmlnLnRpdGxlKSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudFswXS5vdXRlckhUTUwsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgdHlwZTogdGhpcy5jb25maWcudHlwZSxcbiAgICAgICAgICBzdGF0ZTogJ2luaXRpYXRlZCcsXG4gICAgICAgICAgaW5pdGlhdG9yOiB0aGlzLmluaXRpYXRvclxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgYXdhaXQgdGhpcy5jb21wdXRlKClcbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSB7XG4gICAgICBhd2FpdCB0aGlzLnRvTWVzc2FnZSgpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLmNvbmZpZy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgbWVzc2FnZS5cbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgICBpZiAodGhpcy5jbG9zZWQpIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnc3RhdGUnLCAncmVzb2x2ZWQnKVxuXG4gICAgICBjb25zdCBtc2cgPSBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgICB9KVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgdXBkYXRlUm9sbCAoZGF0YSkge1xuICAgIGlmICghZGF0YS5mcm9tR00pIHtcbiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5yb2xsc1tkYXRhLnJhbmtdLCBkYXRhLnJvbGwpXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbERhdGEgKGRhdGEpIHtcbiAgICBjb25zdCBjaGVjayA9IE9iamVjdC5hc3NpZ24obmV3IENvQzdDaGVjaygpLCBkYXRhLnJvbGwpXG4gICAgdGhpcy5yb2xscy5wdXNoKGNoZWNrKVxuICAgIGlmICh0aGlzLmNvbmZpZy50eXBlID09PSAnY29tYmluZWRDYXJkJykge1xuICAgICAgdGhpcy5pbml0aWF0b3IgPSBkYXRhLnJvbGwuaW5pdGlhdG9yXG4gICAgfVxuICB9XG5cbiAgYWRkUm9sbCAoZGF0YSkge1xuICAgIHRoaXMucm9sbHMucHVzaChkYXRhKVxuICB9XG5cbiAgcmVtb3ZlUm9sbCAocmFuaykge1xuICAgIHRoaXMucm9sbHMuc3BsaWNlKHJhbmssIDEpXG4gIH1cblxuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCBtZXNzYWdlICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2VcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5fbWVzc2FnZUlkKVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZSA9IHhcbiAgfVxuXG4gIGdldCBtZXNzYWdlSWQgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiB0aGlzLl9tZXNzYWdlSWRcbiAgICBpZiAodGhpcy5fbWVzc2FnZSkgcmV0dXJuIHRoaXMuX21lc3NhZ2UuaWRcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZUlkICh4KSB7XG4gICAgdGhpcy5fbWVzc2FnZUlkID0geFxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRDb25maWcgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gIGdldCB3aW5uZXJzICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb2xscy5maWx0ZXIociA9PiByLndpbm5lcilcbiAgfVxuXG4gIGdldCB3aW5uZXIgKCkge1xuICAgIGlmICh0aGlzLndpbm5lcnMubGVuZ3RoKSByZXR1cm4gdGhpcy53aW5uZXJzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGxvb3NlcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzLmZpbHRlcihyID0+ICFyLndpbm5lcilcbiAgfVxuXG4gIGdldCBsb29zZXIgKCkge1xuICAgIGlmICh0aGlzLmxvb3NlcnMubGVuZ3RoKSByZXR1cm4gdGhpcy5sb29zZXJzWzBdXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGhhc1dpbm5lciAoKSB7XG4gICAgaWYgKHRoaXMud2lubmVycy5sZW5ndGggPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGlzS2VlcGVyICgpIHtcbiAgICByZXR1cm4gZ2FtZS51c2VyLmlzR01cbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMuY29uZmlnLmV4Y2x1ZGU/LmluY2x1ZGVzKGtleSkpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCh0aGlzLmNvbmZpZy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEF1ZGlvSGVscGVyLCBDT05GSUcsIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IFJvbGxDYXJkIH0gZnJvbSAnLi9yb2xsLWNhcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb21iaW5lZENoZWNrQ2FyZCBleHRlbmRzIFJvbGxDYXJkIHtcbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZXJuZXJzIChodG1sKSB7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5jb21iaW5lZCAudG9nZ2xlLXN3aXRjaCcsXG4gICAgICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgKVxuICAgIC8vIGh0bWwuZmluZCgnLnJvbGwtY2FyZCBhJykuY2xpY2soYXN5bmMgKGV2ZW50KSA9PiBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljayggZXZlbnQpKTtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIGEnLFxuICAgICAgQ29tYmluZWRDaGVja0NhcmQuX29uQ2xpY2suYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLmNvbWJpbmVkIGJ1dHRvbicsXG4gICAgICBDb21iaW5lZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0Q29uZmlnICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdENvbmZpZywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5odG1sJyxcbiAgICAgIHR5cGU6ICdjb21iaW5lZENhcmQnLFxuICAgICAgdGl0bGU6ICdDb0M3LkNvbWJpbmVkUm9sbENhcmQnXG4gICAgfSlcbiAgfVxuXG4gIGdldCBjb25maWcgKCkge1xuICAgIHJldHVybiBDb21iaW5lZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnXG4gIH1cblxuICBnZXQgc3VjY2Vzc0NvdW50ICgpIHtcbiAgICBpZiAodGhpcy5yb2xsZWQpIHtcbiAgICAgIGxldCBjb3VudCA9IDBcbiAgICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICAgIGlmIChyLnBhc3NlZCkgY291bnQgKz0gMVxuICAgICAgfVxuICAgICAgcmV0dXJuIGNvdW50XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBtYWluQWN0b3JLZXkgKCkge1xuICAgIHJldHVybiB0aGlzLnJvbGxzWzBdPy5hY3Rvcj8uYWN0b3JLZXkgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgc3VjY2VzcyAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLnN1Y2Nlc3NDb3VudCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5hbnkpIHtcbiAgICAgIGlmICh0aGlzLnN1Y2Nlc3NDb3VudCA+IDApIHJldHVybiB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgaWYgKHRoaXMuYWxsKSB7XG4gICAgICBpZiAodGhpcy5zdWNjZXNzQ291bnQgPT09IHRoaXMucm9sbHMubGVuZ3RoKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBmYWlsdXJlICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuc3VjY2VzcyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gIXRoaXMuc3VjY2Vzc1xuICB9XG5cbiAgZ2V0IGNoZWNrR01Jbml0aWF0b3IgKCkge1xuICAgIHJldHVybiBnYW1lLnVzZXJzLmdldCh0aGlzLmluaXRpYXRvcik/LmlzR01cbiAgfVxuXG4gIGFzeW5jIGdldEh0bWxSb2xsICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbGVkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSh7XG4gICAgICByb2xsOiB0aGlzLl9yb2xsW2NoZWNrLmRpY2VNb2RpZmllciB8fCAwXSxcbiAgICAgIHNpbGVudDogdHJ1ZVxuICAgIH0pXG4gICAgcmV0dXJuIGF3YWl0IGNoZWNrLmdldEh0bWxSb2xsKHsgaGlkZVN1Y2Nlc3M6IHRydWUgfSlcbiAgfVxuXG4gIHByb2Nlc3MgKGRhdGEpIHtcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XG4gICAgICBjYXNlICduZXcnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwnOlxuICAgICAgICB0aGlzLmFkZFJvbGxEYXRhKGRhdGEpXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3VwZGF0ZVJvbGwnOiB7XG4gICAgICAgIHRoaXMudXBkYXRlUm9sbChkYXRhKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdhc3NpZ25Sb2xsJzoge1xuICAgICAgICB0aGlzLmFzc2lnblJvbGwoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICAgIGVsc2UgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICB9XG5cbiAgYXN5bmMgYXNzaWduUm9sbCAoZGF0YSkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnJvbGxlZCkge1xuICAgICAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5fcm9sbCA9IGRhdGEucm9sbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb25cbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGkuYWN0b3Itcm9sbCcpXG4gICAgY29uc3QgbWVzc2FnZSA9IGEuY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBhLmNsb3Nlc3QoJ2Rpdi5yb2xsLWNhcmQnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBDb21iaW5lZENoZWNrQ2FyZC5mcm9tSFRNTENhcmRFbGVtZW50KGNhcmRFbGVtZW50KVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIGNvbnN0IHJhbmsgPSBOdW1iZXIobGk/LmRhdGFzZXQ/LnJhbmspXG5cbiAgICBzd2l0Y2ggKGFjdGlvbikge1xuICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOiB7XG4gICAgICAgIGNhcmQucmVtb3ZlUm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnY2xvc2UtY2FyZCc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jYXJkJzoge1xuICAgICAgICBjb25zdCBwb29sID0ge31cbiAgICAgICAgZm9yIChjb25zdCBkaWNlIG9mIGNhcmQucm9sbHMpIHtcbiAgICAgICAgICBjb25zdCBkaWNlTW9kaWZpZXIgPSBwYXJzZUludChkaWNlLmRpY2VNb2RpZmllciwgMTApXG4gICAgICAgICAgaWYgKCFpc05hTihkaWNlTW9kaWZpZXIpKSB7XG4gICAgICAgICAgICBwb29sW2RpY2VNb2RpZmllcl0gPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBDb0M3RGljZS5jb21iaW5lZFJvbGwoeyBwb29sIH0pXG4gICAgICAgIHJvbGwuaW5pdGlhdG9yID0gZ2FtZS51c2VyLmlkXG5cbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0eXBlOiB0aGlzLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICBhY3Rpb246ICdhc3NpZ25Sb2xsJyxcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNLFxuICAgICAgICAgIHJvbGxcbiAgICAgICAgfVxuICAgICAgICBBdWRpb0hlbHBlci5wbGF5KHsgc3JjOiBDT05GSUcuc291bmRzLmRpY2UgfSwgdHJ1ZSlcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgICAgICB1cGRhdGU6IGZhbHNlLFxuICAgICAgICAgIGRhdGE6IGEuZGF0YXNldCxcbiAgICAgICAgICBjbGFzc2VzOiBhLmNsYXNzTGlzdCxcbiAgICAgICAgICB0YXJnZXQ6IGFcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIoY2FyZC5yb2xsc1tyYW5rXSwgYWN0aW9uLCBvcHRpb25zKVxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6IHRoaXMuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgIGFjdGlvbjogJ3VwZGF0ZVJvbGwnLFxuICAgICAgICAgIHJhbmssXG4gICAgICAgICAgZnJvbUdNOiBnYW1lLnVzZXIuaXNHTSxcbiAgICAgICAgICByb2xsOiB7XG4gICAgICAgICAgICBpbml0aWF0b3I6IGdhbWUudXNlci5pZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWdhbWUudXNlci5pc0dNKSBkYXRhLnJvbGwgPSBjYXJkLnJvbGxzW3JhbmtdLkpTT05Sb2xsRGF0YVxuICAgICAgICBjYXJkLnByb2Nlc3MoZGF0YSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBjb21wdXRlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGwpIHJldHVyblxuXG4gICAgdGhpcy5yb2xscyA9IHRoaXMucm9sbHMuZmlsdGVyKHJvbGwgPT4ge1xuICAgICAgcmV0dXJuIHR5cGVvZiByb2xsLmFjdG9yLmRhdGEgIT09ICd1bmRlZmluZWQnIC8vIHJlbW92ZSBhbnkgYWN0b3JzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0XG4gICAgfSlcblxuICAgIGZvciAoY29uc3QgciBvZiB0aGlzLnJvbGxzKSB7XG4gICAgICBpZiAoIXIucm9sbGVkKSB7XG4gICAgICAgIHIubW9kaWZpZXIgPSByLmRpY2VNb2RpZmllciB8fCAwXG4gICAgICAgIHIuZGlmZmljdWx0eSA9IHIuZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgci5mbGF0RGljZU1vZGlmaWVyID0gci5mbGF0RGljZU1vZGlmaWVyIHx8IDBcbiAgICAgICAgci5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSByLmZsYXRUaHJlc2hvbGRNb2RpZmllciB8fCAwXG4gICAgICAgIGF3YWl0IHIuX3BlcmZvcm0oeyByb2xsOiB0aGlzLl9yb2xsW3IubW9kaWZpZXJdLCBzaWxlbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvbGxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAodGhpcy5yb2xsc1tpXS5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5yb2xsc1tpXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW2ldLmdldEh0bWxSb2xsKHtcbiAgICAgICAgICBoaWRlRGljZVJlc3VsdDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2h0bWxSb2xsID0gYXdhaXQgdGhpcy5nZXRIdG1sUm9sbCgpXG4gIH1cblxuICBjbG9zZUNhcmQgKCkge1xuICAgIHRoaXMuY2xvc2VkID0gdHJ1ZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGRpZmZPYmplY3QsIGV4cGFuZE9iamVjdCwgRm9ybURhdGFFeHRlbmRlZCwgZ2FtZSwgbWVyZ2VPYmplY3QsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgSW50ZXJhY3RpdmVDaGF0Q2FyZCB7XG4gIGNvbnN0cnVjdG9yIChvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLl9vcHRpb25zID0gb3B0aW9uc1xuICB9XG5cbiAgZ2V0IG9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdCh0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRPcHRpb25zLCB0aGlzLl9vcHRpb25zKVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRlbXBsYXRlXG4gIH1cblxuICBnZXQgY3NzQ2xhc3NlcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc2VzXG4gIH1cblxuICBhc3luYyB0b01lc3NhZ2UgKG9wdGlvbm5hbENoYXREYXRhID0ge30pIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkKGh0bWwpWzBdXG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMuZGF0YVN0cmluZylcbiAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzZXMpXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IG1lcmdlT2JqZWN0KFxuICAgICAge1xuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKHRoaXMub3B0aW9ucy50aXRsZSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0sXG4gICAgICBvcHRpb25uYWxDaGF0RGF0YVxuICAgIClcblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChvcHRpb25zLmNvbXB1dGUpIHRoaXMuY29tcHV0ZSgpXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkge1xuICAgICAgdGhpcy50b01lc3NhZ2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgc2FuQ2hlY2tDYXJkIG9iamVjdCB0byB0aGUgbWVzc2FnZS5cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZSh0aGlzLmRhdGFTdHJpbmcpXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuZGF0YXNldC5jYXJkQ2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICAgIGh0bWxDYXJkRWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLnRoaXMuY3NzQ2xhc3NlcylcblxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcbiAgICAgIGlmICh0aGlzLmNsb3NlZCkgYXdhaXQgY2hhdE1lc3NhZ2Uuc2V0RmxhZygnQ29DNycsICdzdGF0ZScsICdyZXNvbHZlZCcpXG5cbiAgICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICAgIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIH0pXG4gICAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICAgIHJldHVybiBtc2dcbiAgICB9XG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5pbnRlcmFjdGl2ZS1jYXJkIC5pYy1yYWRpby1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCAuaWMtc3dpdGNoJywgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdjbGljaycsICcuaW50ZXJhY3RpdmUtY2FyZCAuc3VibWl0JywgdGhpcy5fb25TdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdmb2N1c291dCcsICdpbnB1dCcsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCAnLmludGVyYWN0aXZlLWNhcmQgYnV0dG9uJywgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgICBodG1sLm9uKCdrZXlkb3duJywgJ2Zvcm0nLCB0aGlzLl9vbktleS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBjb25zdCBodG1sTWVzc2FnZUVsZW1lbnQgPSBodG1sWzBdXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gaHRtbE1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNhcmQnKVxuICAgIGlmICghaHRtbENhcmRFbGVtZW50KSByZXR1cm5cbiAgICBpZiAoIWh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzcykgcmV0dXJuXG4gICAgaWYgKFxuICAgICAgIU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGdhbWUuQ29DNy5jYXJkcykuaW5jbHVkZXMoXG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc1xuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBJbnRlcmFjdGl2ZUNoYXRDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoaHRtbENhcmRFbGVtZW50KVxuICAgIGNvbnN0IHR5cGVkQ2FyZCA9IE9iamVjdC5hc3NpZ24oXG4gICAgICBuZXcgZ2FtZS5Db0M3LmNhcmRzW2h0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmNhcmRDbGFzc10oKSxcbiAgICAgIGNhcmRcbiAgICApXG4gICAgdHlwZWRDYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgdHlwZWRDYXJkLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gcmVhc3NpZ24gb2JqZWN0IHR5cGVcbiAgICogQHJldHVybnNcbiAgICovXG4gIGFzc2lnbk9iamVjdCAoKSB7fVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50IHdpbGwgY2hlY2sgZm9yIGFuIGFjdGlvbiAoZGF0YS1hY3Rpb24pXG4gICAqIGlmIGEgbWV0aG9kIHdpdGggdGhhdCBuYW1lIGV4aXN0IGl0IHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgKi9cbiAgX29uQnV0dG9uIChldmVudCkge1xuICAgIGNvbnN0IGJ1dHRvbiA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBidXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJyAvL0F2b2lkIG11bHRpcGxlIHB1c2hcbiAgICBjb25zdCBhY3Rpb24gPSBidXR0b24uZGF0YXNldC5hY3Rpb25cbiAgICBpZiAodGhpc1thY3Rpb25dKSB0aGlzW2FjdGlvbl0oeyBldmVudCwgdXBkYXRlOiB0cnVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKiBAcmV0dXJucyBmYWxzZSBpZiBrZXkgaXMgZW50ZXIgdG8gYXZvaWQgZ2xvYmFsIHN1Ym1pc3Npb25cbiAgICovXG4gIF9vbktleSAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgICByZXR1cm4gZXZlbnQua2V5ICE9PSAnRW50ZXInXG4gIH1cblxuICBfb25TdWJtaXQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdCgnLmludGVyYWN0aXZlLWNhcmQnKVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY29uc3QgdXBkYXRlcyA9IHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIGlmICh1cGRhdGVzKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIF91cGRhdGUgKGNhcmQpIHtcbiAgICBjb25zdCBmb3JtcyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnZm9ybScpXG4gICAgbGV0IHVwZGF0ZXMgPSBmYWxzZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZm9ybXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZvcm0gPSBmb3Jtc1tpXVxuICAgICAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZChmb3JtKVxuICAgICAgbGV0IGRhdGEgPSBmZC50b09iamVjdCgpXG4gICAgICBkYXRhID0gZGlmZk9iamVjdCh0aGlzLCBleHBhbmRPYmplY3QoZGF0YSkpXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICB0aGlzW2tleV0gPSB2YWx1ZVxuICAgICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlc1xuICB9XG5cbiAgZ2V0IG1lc3NhZ2UgKCkge1xuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZVxuICAgIGlmICh0aGlzLl9tZXNzYWdlSWQpIHJldHVybiBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLl9tZXNzYWdlSWQpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2UgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlID0geFxuICB9XG5cbiAgZ2V0IG1lc3NhZ2VJZCAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIHRoaXMuX21lc3NhZ2VJZFxuICAgIGlmICh0aGlzLl9tZXNzYWdlKSByZXR1cm4gdGhpcy5fbWVzc2FnZS5pZFxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIHNldCBtZXNzYWdlSWQgKHgpIHtcbiAgICB0aGlzLl9tZXNzYWdlSWQgPSB4XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xhc3NlczogWydpbnRlcmFjdGl2ZS1jYXJkJ10sXG4gICAgICBleGNsdWRlOiBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nLCAnX21lc3NhZ2UnLCAnX2h0bWxSb2xsJ10sXG4gICAgICBleGNsdWRlU3RhcnRXaXRoOiAnX18nXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRhdGEgKCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKHRoaXMuZGF0YVN0cmluZylcbiAgfVxuXG4gIGdldCBkYXRhU3RyaW5nICgpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcywgKGtleSwgdmFsdWUpID0+IHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKHRoaXMub3B0aW9ucy5leGNsdWRlPy5pbmNsdWRlcyhrZXkpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgodGhpcy5vcHRpb25zLmV4Y2x1ZGVTdGFydFdpdGgpKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgICByZXR1cm4gdmFsdWVcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBjb25zdCBjYXJkID0gYXdhaXQgdGhpcy5mcm9tTWVzc2FnZShtZXNzYWdlKVxuICAgIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tTWVzc2FnZSAobWVzc2FnZSkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoY2FyZCkge1xuICAgIGNvbnN0IGNhcmREYXRhID0gSlNPTi5wYXJzZSh1bmVzY2FwZShjYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICBpZiAoIWNhcmREYXRhLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgICAgY2FyZERhdGEubWVzc2FnZUlkID0gbWVzc2FnZT8uZGF0YXNldD8ubWVzc2FnZUlkXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKGNhcmREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21EYXRhIChkYXRhKSB7XG4gICAgY29uc3QgY2FyZCA9IE9iamVjdC5hc3NpZ24obmV3IHRoaXMoKSwgZGF0YSlcbiAgICBhd2FpdCBjYXJkLmFzc2lnbk9iamVjdCgpXG4gICAgcmV0dXJuIGNhcmRcbiAgfVxuXG4gIC8vLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICBzZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gdHJ1ZVxuICB9XG5cbiAgdW5zZXRGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghZmxhZ05hbWUgJiYgISgkLnR5cGUoZmxhZ05hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIHRoaXNbZmxhZ05hbWVdID0gZmFsc2VcbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgdGhpc1tmbGFnTmFtZV0gPSAhdGhpc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKCdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gdGhpcy5fb25CdXR0b24oZXZlbnQpXG4gICAgaWYgKFxuICAgICAgdGFyZ2V0ICYmXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmXG4gICAgICAhZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBmbGFnID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGlmICghZmxhZykgcmV0dXJuXG4gICAgY29uc3QgdG9nZ2xlID0gdGFyZ2V0LmNsb3Nlc3QoJy5pYy1yYWRpbycpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlRmxhZyhmbGFnKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5pYy1yYWRpby1zd2l0Y2gnKVxuICAgICAgZm9yIChjb25zdCBiIG9mIGJ1dHRvbnMpIHtcbiAgICAgICAgdGhpcy51bnNldEZsYWcoYi5kYXRhc2V0LmZsYWcpXG4gICAgICB9XG4gICAgICB0aGlzLnNldEZsYWcoZmxhZylcbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KCcuaW50ZXJhY3RpdmUtY2FyZCcpXG4gICAgaWYgKGNhcmQpIHRoaXMuX3VwZGF0ZShjYXJkKVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLy8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuaXRlbUlkKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XG4gICAgcmV0dXJuIFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgaXNUYXJnZXRPd25lciAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0LmlzT3duZXJcbiAgfVxuXG4gIGdldCBpc0tlZXBlciAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlci5pc0dNXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0QWN0b3IgPVxuICAgICAgICAgIHRoaXMudGFyZ2V0VG9rZW4uYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuYWN0b3IgfHxcbiAgICAgICAgICB0aGlzLnRhcmdldFRva2VuLmRhdGEuZG9jdW1lbnRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3RhcmdldEFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEFjdG9yXG4gIH1cblxuICBnZXQgdGFyZ2V0S2V5ICgpIHtcbiAgICBpZiAoIXRoaXMudGFyZ2V0VG9rZW4gJiYgIXRoaXMudGFyZ2V0QWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldEtleVxuICB9XG5cbiAgZ2V0IGhhc1RhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgc2V0IHRhcmdldEtleSAoeCkge1xuICAgIHRoaXMuX3RhcmdldEtleSA9IHhcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLmdldFdlYXBvblNraWxscyh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB0YXJnZXRJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMudGFyZ2V0S2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gIH1cblxuICBnZXQgdGFyZ2V0TmFtZSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldCkgcmV0dXJuICdkdW1teSdcbiAgICByZXR1cm4gdGhpcy50YXJnZXQubmFtZVxuICB9XG5cbiAgZ2V0IGFjdG9ySW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBEaWFsb2csIGdhbWUsIG1lcmdlT2JqZWN0LCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi8uLi9kaWNlLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4uL2ludGVyYWN0aXZlLWNoYXQtY2FyZC5qcydcbmltcG9ydCB7IGNyZWF0ZUlubGluZVJvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBEYW1hZ2VDYXJkIGV4dGVuZHMgSW50ZXJhY3RpdmVDaGF0Q2FyZCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgZXhjbHVkZTogW1xuICAgICAgICAnX3RhcmdldFRva2VuJyxcbiAgICAgICAgJ190YXJnZXRBY3RvcicsXG4gICAgICAgICdfaHRtbFJvbGwnLFxuICAgICAgICAnX2h0bWxJbmxpbmVSb2xsJ1xuICAgICAgXS5jb25jYXQoc3VwZXIuZGVmYXVsdE9wdGlvbnMuZXhjbHVkZSksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9kYW1hZ2UuaHRtbCdcbiAgICB9KVxuICB9XG5cbiAgLy8gYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgLy8gICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAvLyB9XG5cbiAgYXN5bmMgYXNzaWduT2JqZWN0ICgpIHtcbiAgICBpZiAodGhpcy5kYW1hZ2VSb2xsICYmIHRoaXMuZGFtYWdlUm9sbC5jb25zdHJ1Y3Rvci5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgdGhpcy5kYW1hZ2VSb2xsID0gUm9sbC5mcm9tRGF0YSh0aGlzLmRhbWFnZVJvbGwpXG4gICAgfVxuICB9XG5cbiAgX29uQnV0dG9uIChldmVudCkge1xuICAgIHN1cGVyLl9vbkJ1dHRvbihldmVudClcbiAgfVxuXG4gIGdldCBjcml0aWNhbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jcml0aWNhbFxuICB9XG5cbiAgc2V0IGNyaXRpY2FsICh4KSB7XG4gICAgdGhpcy5fb3B0aW9ucy5jcml0aWNhbCA9IHhcbiAgfVxuXG4gIGdldCBpbXBhbGUgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5faW1wYWxlID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMud2VhcG9uLmltcGFsZVxuICAgIHJldHVybiB0aGlzLl9pbXBhbGVcbiAgfVxuXG4gIHNldCBpbXBhbGUgKHgpIHtcbiAgICB0aGlzLl9pbXBhbGUgPSB4XG4gIH1cblxuICBnZXQgaXNEYW1hZ2VGb3JtdWxhICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGFtYWdlRm9ybXVsYSAhPT0gJ3N0cmluZycpIHJldHVybiBmYWxzZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuZGFtYWdlRm9ybXVsYSkpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gUm9sbC52YWxpZGF0ZSh0aGlzLmRhbWFnZUZvcm11bGEpXG4gIH1cblxuICBnZXQgaXNEYW1hZ2VOdW1iZXIgKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGFtYWdlRm9ybXVsYSkpXG4gIH1cblxuICBnZXQgaXNBcm1vckZvcnVsYSAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmFybW9yICE9PSAnc3RyaW5nJykgcmV0dXJuIGZhbHNlXG4gICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5hcm1vcikpKSByZXR1cm4gZmFsc2VcbiAgICByZXR1cm4gUm9sbC52YWxpZGF0ZSh0aGlzLmFybW9yKVxuICB9XG5cbiAgZ2V0IHRvdGFsRGFtYWdlU3RyaW5nICgpIHtcbiAgICBsZXQgZGFtYWdlID0gTnVtYmVyKFxuICAgICAgdGhpcy5pc0RhbWFnZU51bWJlciA/IHRoaXMuZGFtYWdlRm9ybXVsYSA6IHRoaXMucm9sbC50b3RhbFxuICAgIClcbiAgICBpZiAoIXRoaXMuaWdub3JlQXJtb3IpIHtcbiAgICAgIGlmIChpc05hTihOdW1iZXIodGhpcy5hcm1vcikpIHx8IE51bWJlcih0aGlzLmFybW9yKSA+IDApIHtcbiAgICAgICAgZGFtYWdlID0gZGFtYWdlIC0gTnVtYmVyKHRoaXMuYXJtb3IpXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmFybW9yKSkpIHtcbiAgICAgICAgaWYgKGRhbWFnZSA8PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Bcm1vckFic29yYnNEYW1hZ2UnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYW1hZ2VcbiAgfVxuXG4gIGdldCBub0RhbWFnZSAoKSB7XG4gICAgaWYgKHRoaXMucm9sbGVkKSB7XG4gICAgICBjb25zdCBkYW1hZ2UgPSB0aGlzLmlzRGFtYWdlTnVtYmVyID8gdGhpcy5kYW1hZ2VGb3JtdWxhIDogdGhpcy5yb2xsLnRvdGFsXG4gICAgICBpZiAoIXRoaXMuaWdub3JlQXJtb3IpIHtcbiAgICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5hcm1vcikpKSB7XG4gICAgICAgICAgcmV0dXJuICEhKGRhbWFnZSAtIE51bWJlcih0aGlzLmFybW9yKSA8PSAwKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuICEhKGRhbWFnZSA8PSAwKVxuICAgICAgfVxuICAgIH0gZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmZhc3RGb3J3YXJkICYmICF0aGlzLnJvbGwgJiYgIXRoaXMuaXNEYW1hZ2VOdW1iZXIpIHtcbiAgICAgIGF3YWl0IHRoaXMucm9sbERhbWFnZSh7IHVwZGF0ZTogZmFsc2UgfSlcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5pc0RhbWFnZU51bWJlciB8fFxuICAgICAgKHRoaXMucm9sbCAmJiB0aGlzLnJvbGwudG90YWwgIT0gbnVsbCkgfHxcbiAgICAgIHRoaXMuaGFyZHJvbGxlZFxuICAgICkge1xuICAgICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgICB9XG4gICAgaWYgKHRoaXMub3B0aW9ucy5mYXN0Rm9yd2FyZCAmJiAhdGhpcy5kYW1hZ2VJbmZsaWN0ZWQgJiYgIXRoaXMubm9EYW1hZ2UpIHtcbiAgICAgIGF3YWl0IHRoaXMuZGVhbERhbWFnZSh7IHVwZGF0ZTogZmFsc2UgfSlcbiAgICB9XG5cbiAgICBpZiAodGhpcy5yb2xsZWQgJiYgdGhpcy5yb2xsKSB7XG4gICAgICBpZiAodGhpcy5yb2xsLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICAgIHRoaXMucm9sbCA9IFJvbGwuZnJvbURhdGEodGhpcy5yb2xsKVxuICAgICAgfVxuICAgICAgY29uc3QgYSA9IGNyZWF0ZUlubGluZVJvbGwodGhpcy5yb2xsKVxuICAgICAgdGhpcy5faHRtbElubGluZVJvbGwgPSBhLm91dGVySFRNTFxuICAgICAgdGhpcy5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGwucmVuZGVyKClcbiAgICB9XG4gICAgYXdhaXQgc3VwZXIudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgYXN5bmMgcm9sbERhbWFnZSAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICB0aGlzLnJvbGwgPSBhd2FpdCBuZXcgUm9sbCh0aGlzLmRhbWFnZUZvcm11bGEgfHwgJzAnKS5ldmFsdWF0ZSh7XG4gICAgICBhc3luYzogdHJ1ZVxuICAgIH0pXG4gICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5yb2xsKVxuICAgIHRoaXMuaGFyZHJvbGxlZCA9IHRydWVcbiAgICBvcHRpb25zLnVwZGF0ZSA9XG4gICAgICB0eXBlb2Ygb3B0aW9ucy51cGRhdGUgPT09ICd1bmRlZmluZWQnID8gdHJ1ZSA6IG9wdGlvbnMudXBkYXRlXG4gICAgaWYgKG9wdGlvbnMudXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxBcm1vciAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBjb25zdCByb2xsID0gYXdhaXQgbmV3IFJvbGwodGhpcy5hcm1vcikuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgIHRoaXMuYXJtb3IgPSByb2xsLnRvdGFsXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBhc3luYyBkZWFsRGFtYWdlVG9TZWxlY3RlZFRhcmdldCAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBpZiAodGhpcy5pc0FybW9yRm9ydWxhKSBhd2FpdCB0aGlzLnJvbGxBcm1vcigpXG4gICAgaWYgKGlzTmFOKE51bWJlcih0aGlzLnRvdGFsRGFtYWdlU3RyaW5nKSkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yRXZhbHVhdGluZ0RhbWFnZScpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IHRhcmdldHMgPSBbXVxuICAgIGNvbnN0IHRhcmdldE5hbWUgPSBbXVxuICAgIGNvbnN0IHNlbGVjdGVkUGxheWVycyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodG9rZW4gPT4ge1xuICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgfSlcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2VsZWN0ZWRQbGF5ZXJzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMuYWN0b3IuaWQgPT09IHNlbGVjdGVkUGxheWVyc1tpbmRleF0uaWQpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIHRhcmdldE5hbWUucHVzaChzZWxlY3RlZFBsYXllcnNbaW5kZXhdLm5hbWUpXG4gICAgICB0YXJnZXRzLnB1c2goc2VsZWN0ZWRQbGF5ZXJzW2luZGV4XSlcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHRpdGxlOiAnICcsXG4gICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRlYWxEYW1hZ2UnLCB7XG4gICAgICAgIGRhbWFnZTogdGhpcy50b3RhbERhbWFnZVN0cmluZyxcbiAgICAgICAgdGFyZ2V0OiB0YXJnZXROYW1lXG4gICAgICB9KSxcbiAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgb25lOiB7XG4gICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Qcm9jZWVkJyksXG4gICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29uZmlybURhbWFnZSh0YXJnZXRzKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgdHdvOiB7XG4gICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DYW5jZWwnKSxcbiAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge31cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGRlZmF1bHQ6ICd0d28nXG4gICAgfVxuICAgIGlmICh0YXJnZXROYW1lLmxlbmd0aCA+IDApIHtcbiAgICAgIG5ldyBEaWFsb2coZGF0YSkucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29uZmlybURhbWFnZSAodGFyZ2V0cykge1xuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0YXJnZXRzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgYXdhaXQgdGFyZ2V0c1tpbmRleF0uZGVhbERhbWFnZShOdW1iZXIodGhpcy50b3RhbERhbWFnZVN0cmluZyksIHtcbiAgICAgICAgaWdub3JlQXJtb3I6IGZhbHNlXG4gICAgICB9KVxuICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EYW1hZ2VEZWFsVG8nLCB7XG4gICAgICAgICAgbmFtZTogdGFyZ2V0c1tpbmRleF0ubmFtZSxcbiAgICAgICAgICBkYW1hZ2U6IHRoaXMudG90YWxEYW1hZ2VTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgZGVhbERhbWFnZSAob3B0aW9ucyA9IHsgdXBkYXRlOiB0cnVlIH0pIHtcbiAgICBpZiAodGhpcy5pc0FybW9yRm9ydWxhKSBhd2FpdCB0aGlzLnJvbGxBcm1vcigpXG4gICAgbGV0IGRhbWFnZSA9IHRoaXMudG90YWxEYW1hZ2VTdHJpbmdcbiAgICBpZiAoaXNOYU4oTnVtYmVyKGRhbWFnZSkpKSB7XG4gICAgICBpZiAoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybW9yQWJzb3Jic0RhbWFnZScpID09PSBkYW1hZ2UpIHtcbiAgICAgICAgZGFtYWdlID0gMFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignRXJyb3IgZXZhbHVhdGluZyBkYW1hZ2UnKVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMudGFyZ2V0QWN0b3IpIHtcbiAgICAgIGF3YWl0IHRoaXMudGFyZ2V0QWN0b3IuZGVhbERhbWFnZShOdW1iZXIoZGFtYWdlKSwge1xuICAgICAgICBpZ25vcmVBcm1vcjogdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgdGhpcy5kYW1hZ2VJbmZsaWN0ZWQgPSB0cnVlXG4gICAgb3B0aW9ucy51cGRhdGUgPVxuICAgICAgdHlwZW9mIG9wdGlvbnMudXBkYXRlID09PSAndW5kZWZpbmVkJyA/IHRydWUgOiBvcHRpb25zLnVwZGF0ZVxuICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gIH1cblxuICBnZXQgcmFuZ2UgKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMucmFuZ2UgfHwgJ25vcm1hbCdcbiAgfVxuXG4gIHNldCByYW5nZSAoeCkge1xuICAgIGNvbnN0IHJhbmdlcyA9IFsnbm9ybWFsJywgJ2xvbmcnLCAnZXh0cmVtZSddXG4gICAgaWYgKCFyYW5nZXMuaW5jbHVlcyh4LnRvTG93ZXJDYXNlKCkpKSByZXR1cm5cbiAgICB0aGlzLl9vcHRpb25zLnJhbmdlID0geFxuICB9XG5cbiAgZ2V0IGRhbWFnZUZvcm11bGEgKCkge1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5yYW5nZVxuICAgIGxldCBmb3JtdWxhID0gdGhpcy53ZWFwb24/LnN5c3RlbT8ucmFuZ2VbcmFuZ2VdPy5kYW1hZ2VcbiAgICBsZXQgZGIgPSB0aGlzLmFjdG9yLmRiXG4gICAgZGIgPSAoKGRiID8/ICcnKS50b1N0cmluZygpLnRyaW0oKSA9PT0gJycgPyAwIDogZGIpLnRvU3RyaW5nKCkudHJpbSgpXG5cbiAgICBpZiAoIWRiLnN0YXJ0c1dpdGgoJy0nKSkgZGIgPSAnKycgKyBkYlxuICAgIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hZGRiKSBmb3JtdWxhID0gZm9ybXVsYSArIGRiXG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmFoZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgJysgZmxvb3IoJyArIGRiICsgJy8yKSdcblxuICAgIGlmIChmb3JtdWxhKSB7XG4gICAgICBjb25zdCBtYXhEYW1hZ2UgPSBuZXcgUm9sbChmb3JtdWxhKS5ldmFsdWF0ZSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICBsZXQgcm9sbFN0cmluZ1xuICAgICAgaWYgKHRoaXMuY3JpdGljYWwpIHtcbiAgICAgICAgaWYgKHRoaXMuaW1wYWxlKSB7XG4gICAgICAgICAgcm9sbFN0cmluZyA9IGZvcm11bGEgKyAnKycgKyBtYXhEYW1hZ2VcbiAgICAgICAgICByZXR1cm4gcm9sbFN0cmluZ1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBtYXhEYW1hZ2VcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZvcm11bGFcbiAgICAgIH1cbiAgICB9IGVsc2UgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGFybW9yICgpIHtcbiAgICBpZiAodW5kZWZpbmVkICE9PSB0aGlzLl9hcm1vciAmJiB0aGlzLl9hcm1vciAhPT0gJycpIHJldHVybiB0aGlzLl9hcm1vclxuICAgIGlmICh0aGlzLnRhcmdldCkge1xuICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0QWN0b3Iuc3lzdGVtLmF0dHJpYnMuYXJtb3IudmFsdWVcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNldCBhcm1vciAoeCkge1xuICAgIHRoaXMuX2FybW9yID0geFxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IERhbWFnZUNhcmQgfSBmcm9tICcuL2RhbWFnZS5qcydcbmltcG9ydCB7IFJvbGxDYXJkIH0gZnJvbSAnLi9yb2xsLWNhcmQuanMnXG5cbmV4cG9ydCBjbGFzcyBPcHBvc2VkQ2hlY2tDYXJkIGV4dGVuZHMgUm9sbENhcmQge1xuICBzdGF0aWMgYXN5bmMgYmluZExpc3Rlcm5lcnMgKGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucm9sbC1jYXJkLm9wcG9zZWQgLnRvZ2dsZS1zd2l0Y2gnLFxuICAgICAgdGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKVxuICAgIClcbiAgICAvLyBzdXBlci5iaW5kTGlzdGVybmVycyggaHRtbCk7XG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLnJvbGwtY2FyZC5vcHBvc2VkIGEnLFxuICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNhcmQub3Bwb3NlZCBidXR0b24nLFxuICAgICAgT3Bwb3NlZENoZWNrQ2FyZC5fb25DbGljay5iaW5kKHRoaXMpXG4gICAgKVxuICB9XG5cbiAgc3RhdGljIGdldCBkZWZhdWx0Q29uZmlnICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdENvbmZpZywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvb3Bwb3NlZC1yb2xsLmh0bWwnLFxuICAgICAgdHlwZTogJ29wcG9zZWRDYXJkJ1xuICAgIH0pXG4gIH1cblxuICBnZXQgY29uZmlnICgpIHtcbiAgICByZXR1cm4gT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnXG4gIH1cblxuICBnZXQgYXR0YWNrZXJSb2xsICgpIHtcbiAgICBpZiAodGhpcy5jb21iYXQpIHtcbiAgICAgIGlmICh0aGlzLnJvbGxzPy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgYXR0YWNrZXIgPSB0aGlzLnJvbGxzLmZpbHRlcihyID0+IHIuaW5kZXggPT09IDAgfHwgci5hdHRhY2tlcilcbiAgICAgICAgaWYgKGF0dGFja2VyLmxlbmd0aCkgcmV0dXJuIGF0dGFja2VyWzBdXG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBkZWZlbmRlclJvbGwgKCkge1xuICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgaWYgKHRoaXMucm9sbHM/Lmxlbmd0aCkge1xuICAgICAgICBjb25zdCBkZWZlbmRlciA9IHRoaXMucm9sbHMuZmlsdGVyKHIgPT4gci5pbmRleCAhPT0gMCB8fCAhci5hdHRhY2tlcilcbiAgICAgICAgaWYgKGRlZmVuZGVyLmxlbmd0aCkgcmV0dXJuIGRlZmVuZGVyWzBdXG4gICAgICB9XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBkZWZlbmRlcklzRG9kZ2luZyAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5kZWZlbmRlclJvbGw/LmFjdG9yPy5kb2RnZVNraWxsPy5uYW1lICYmXG4gICAgICB0aGlzLmRlZmVuZGVyUm9sbD8uc2tpbGw/Lm5hbWVcbiAgICApIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLmRvZGdlU2tpbGwubmFtZS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICB0aGlzLmRlZmVuZGVyUm9sbC5za2lsbC5uYW1lLnRvTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgYWR2YW50YWdlQXR0YWNrZXIgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5fYWEgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwpIHtcbiAgICAgICAgcmV0dXJuICF0aGlzLmRlZmVuZGVySXNEb2RnaW5nXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FhXG4gIH1cblxuICBnZXQgd2lubmVyUm9sbHNEYW1hZ2UgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29tYmF0ICYmXG4gICAgICB0aGlzLnJvbGxzLmxlbmd0aCA+PSAyICYmXG4gICAgICB0aGlzLmhhc1dpbm5lciAmJlxuICAgICAgdGhpcy53aW5uZXI/Lml0ZW0/LnR5cGUgPT09ICd3ZWFwb24nXG4gICAgKSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHNldCBhZHZhbnRhZ2VBdHRhY2tlciAoeCkge1xuICAgIHRoaXMuX2FhID0gdHJ1ZVxuICAgIHRoaXMuX2FkID0gZmFsc2VcbiAgfVxuXG4gIGdldCBhZHZhbnRhZ2VEZWZlbmRlciAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLl9hZCA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB0aGlzLmRlZmVuZGVySXNEb2RnaW5nXG4gICAgcmV0dXJuIHRoaXMuX2FkXG4gIH1cblxuICBzZXQgYWR2YW50YWdlRGVmZW5kZXIgKHgpIHtcbiAgICB0aGlzLl9hZCA9IHRydWVcbiAgICB0aGlzLl9hYSA9IGZhbHNlXG4gIH1cblxuICBnZXQgaXNUaWUgKCkge1xuICAgIHJldHVybiB0aGlzLndpbm5lckNvdW50ID4gMVxuICB9XG5cbiAgZ2V0IG5lZWRzVGllQnJlYWtlciAoKSB7XG4gICAgaWYgKCF0aGlzLmNvbWJhdCkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKFxuICAgICAgdGhpcy5hdHRhY2tlclJvbGwgJiZcbiAgICAgIHRoaXMuZGVmZW5kZXJSb2xsICYmXG4gICAgICB0aGlzLmF0dGFja2VyUm9sbC5zdWNjZXNzTGV2ZWwgPT09IHRoaXMuZGVmZW5kZXJSb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgd2lubmVyQ291bnQgKCkge1xuICAgIGxldCBjb3VudCA9IDBcbiAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgaWYgKHIud2lubmVyKSBjb3VudCArPSAxXG4gICAgfVxuICAgIHJldHVybiBjb3VudFxuICB9XG5cbiAgZ2V0IGlzQXR0YWNrTWFuZXV2ZXIgKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29tYmF0ICYmXG4gICAgICB0aGlzLmF0dGFja2VyUm9sbCAmJlxuICAgICAgKCF0aGlzLmF0dGFja2VyUm9sbD8uaXRlbSB8fFxuICAgICAgICB0aGlzLmF0dGFja2VyUm9sbD8uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ubW52cilcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHJlc3VsdFRleHQgKCkge1xuICAgIGlmICh0aGlzLmNvbWJhdCAmJiB0aGlzLmF0dGFja2VyUm9sbCAmJiB0aGlzLmRlZmVuZGVyUm9sbCkge1xuICAgICAgaWYgKCF0aGlzLmF0dGFja2VyUm9sbC53aW5uZXIgJiYgIXRoaXMuZGVmZW5kZXJSb2xsLndpbm5lcikge1xuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vV2lubmVyJylcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmF0dGFja2VyUm9sbC53aW5uZXIpIHtcbiAgICAgICAgaWYgKHRoaXMuYXR0YWNrZXJSb2xsLm1hbmV1dmVyKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWFuZXV2ZXJTdWNjZXNzJywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5hdHRhY2tlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQXR0YWNrU3VjY2VzcycsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmF0dGFja2VyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5kZWZlbmRlclJvbGwud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLmRlZmVuZGVyUm9sbC5tYW5ldXZlcikge1xuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGVmZW5kZXJSb2xsLmFjdG9yLm5hbWVcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRlZmVuZGVySXNEb2RnaW5nKSB7XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRG9kZ2VTdWNjZXNzJywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kZWZlbmRlclJvbGwuYWN0b3IubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQXR0YWNrU3VjY2VzcycsIHtcbiAgICAgICAgICBuYW1lOiB0aGlzLmRlZmVuZGVyUm9sbC5hY3Rvci5uYW1lXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGFzeW5jIHByb2Nlc3MgKGRhdGEpIHtcbiAgICBzd2l0Y2ggKGRhdGEuYWN0aW9uKSB7XG4gICAgICBjYXNlICduZXcnOlxuICAgICAgICBpZiAoIXRoaXMucm9sbHM/Lmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuY29tYmF0ID0gZGF0YS5jb21iYXQgfHwgdW5kZWZpbmVkXG4gICAgICAgICAgaWYgKHRoaXMuY29tYmF0KSB7XG4gICAgICAgICAgICBkYXRhLnJvbGwuYXR0YWNrZXIgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRhdGEucm9sbC5pbmRleCA9IHRoaXMucm9sbHMubGVuZ3RoXG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAncm9sbCc6XG4gICAgICAgIHRoaXMuYWRkUm9sbERhdGEoZGF0YSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAndXBkYXRlUm9sbCc6XG4gICAgICAgIHRoaXMudXBkYXRlUm9sbChkYXRhKVxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgYXdhaXQgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgZWxzZSBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gIH1cblxuICBhc3luYyByb2xsIChyYW5rKSB7XG4gICAgYXdhaXQgdGhpcy5yb2xsc1tyYW5rXS5fcGVyZm9ybSgpXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHR5cGU6IHRoaXMuY29uZmlnLnR5cGUsXG4gICAgICBhY3Rpb246ICd1cGRhdGVSb2xsJyxcbiAgICAgIHJhbmssXG4gICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNXG4gICAgfVxuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIGRhdGEucm9sbCA9IHRoaXMucm9sbHNbcmFua10uSlNPTlJvbGxEYXRhXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGljayAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb25cbiAgICBjb25zdCBsaSA9IGEuY2xvc2VzdCgnbGkuYWN0b3Itcm9sbCcpXG4gICAgY29uc3QgbWVzc2FnZSA9IGEuY2xvc2VzdCgnLmNoYXQtbWVzc2FnZScpXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBhLmNsb3Nlc3QoJ2Rpdi5yb2xsLWNhcmQnKVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBPcHBvc2VkQ2hlY2tDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlSWQgPSBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgY29uc3QgcmFuayA9IE51bWJlcihsaT8uZGF0YXNldD8ucmFuaylcblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICd0b2dnbGUtY29tYmF0Jzoge1xuICAgICAgICBjYXJkLmNvbWJhdCA9ICFjYXJkLmNvbWJhdFxuICAgICAgICAvLyBpZiggIWNhcmQuYWR2YW50YWdlQXR0YWNrZXIgJiYgIWNhcmQuYWR2YW50YWdlRGVmZW5kZXIpIGNhcmQuYWR2YW50YWdlQXR0YWNrZXIgPSB0cnVlO1xuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVtb3ZlLXJvbGwnOiB7XG4gICAgICAgIGNhcmQucmVtb3ZlUm9sbChyYW5rKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnY2xvc2UtY2FyZCc6IHtcbiAgICAgICAgY2FyZC5jbG9zZUNhcmQoKVxuICAgICAgICBhd2FpdCBjYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jaGVjayc6IHtcbiAgICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgICBpZiAoIWNhcmQucm9sbHNbcmFua10uYWN0b3JLZXkpIHtcbiAgICAgICAgICBjYXJkLnJvbGxzW3JhbmtdLmFjdG9yS2V5ID0gYCR7c3BlYWtlci5zY2VuZX0uJHtzcGVha2VyLnRva2VufWBcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBjYXJkLnJvbGwocmFuaylcbiAgICAgICAgYXdhaXQgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtZGFtYWdlJzoge1xuICAgICAgICBjYXJkLmNsb3NlQ2FyZCgpXG4gICAgICAgIGF3YWl0IGNhcmQudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBjb25zdCBkYW1hZ2VDaGF0Q2FyZCA9IG5ldyBEYW1hZ2VDYXJkKHtcbiAgICAgICAgICBjcml0aWNhbDogY2FyZC53aW5uZXIuaXNFeHRyZW1lU3VjY2VzcyxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgfSlcbiAgICAgICAgZGFtYWdlQ2hhdENhcmQuYWN0b3JLZXkgPSBjYXJkLndpbm5lci5hY3Rvci5hY3RvcktleVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC50YXJnZXRLZXkgPSBjYXJkLmxvb3Nlci5hY3Rvci5hY3RvcktleVxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5pdGVtSWQgPSBjYXJkLndpbm5lci5pdGVtSWRcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIGRhbWFnZUNoYXRDYXJkLm1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgIHVwZGF0ZTogZmFsc2UsXG4gICAgICAgICAgZGF0YTogYS5kYXRhc2V0LFxuICAgICAgICAgIGNsYXNzZXM6IGEuY2xhc3NMaXN0LFxuICAgICAgICAgIHRhcmdldDogYVxuICAgICAgICB9XG4gICAgICAgIGF3YWl0IENvQzdDaGVjay5hbHRlcihjYXJkLnJvbGxzW3JhbmtdLCBhY3Rpb24sIG9wdGlvbnMpXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogdGhpcy5kZWZhdWx0Q29uZmlnLnR5cGUsXG4gICAgICAgICAgYWN0aW9uOiAndXBkYXRlUm9sbCcsXG4gICAgICAgICAgcmFuayxcbiAgICAgICAgICBmcm9tR006IGdhbWUudXNlci5pc0dNXG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgZGF0YS5yb2xsID0gY2FyZC5yb2xsc1tyYW5rXS5KU09OUm9sbERhdGFcbiAgICAgICAgY2FyZC5wcm9jZXNzKGRhdGEpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY29tcHV0ZSAocmFuayA9IHVuZGVmaW5lZCkge1xuICAgIHRoaXMucm9sbHMgPSB0aGlzLnJvbGxzLmZpbHRlcihyb2xsID0+IHtcbiAgICAgIHJldHVybiB0eXBlb2Ygcm9sbC5hY3Rvci5hY3RvcktleSAhPT0gJ3VuZGVmaW5lZCcgLy8gcmVtb3ZlIGFueSBhY3RvcnMgdGhhdCBubyBsb25nZXIgZXhpc3RcbiAgICB9KVxuXG4gICAgaWYgKCFyYW5rKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9sbHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZGVsZXRlIHRoaXMucm9sbHNbaV0ubWFuZXV2ZXJcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRoaXMuY29tYmF0ICYmXG4gICAgICAgICAgKCF0aGlzLnJvbGxzW2ldLml0ZW0gfHxcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ubW52cikgJiZcbiAgICAgICAgICAoKHRoaXMucm9sbHNbaV0/LmFjdG9yPy5kb2RnZVNraWxsPy5uYW1lICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzW2ldPy5za2lsbD8ubmFtZSAmJlxuICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5hY3Rvci5kb2RnZVNraWxsLm5hbWUudG9Mb3dlckNhc2UoKSAhPT1cbiAgICAgICAgICAgICAgdGhpcy5yb2xsc1tpXS5za2lsbC5uYW1lLnRvTG93ZXJDYXNlKCkpIHx8XG4gICAgICAgICAgICAhdGhpcy5yb2xsc1tpXT8uYWN0b3I/LmRvZGdlU2tpbGw/Lm5hbWUpXG4gICAgICAgICkge1xuICAgICAgICAgIHRoaXMucm9sbHNbaV0ubWFuZXV2ZXIgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMucm9sbHNbaV0ucm9sbGVkKSB7XG4gICAgICAgICAgdGhpcy5yb2xsc1tpXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW2ldLmdldEh0bWxSb2xsKHtcbiAgICAgICAgICAgIGhpZGVEaWNlUmVzdWx0OiB0cnVlXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5yb2xsc1tyYW5rXS5yb2xsZWQpIHtcbiAgICAgICAgdGhpcy5yb2xsc1tyYW5rXS5faHRtbFJvbGwgPSBhd2FpdCB0aGlzLnJvbGxzW3JhbmtdLmdldEh0bWxSb2xsKHtcbiAgICAgICAgICBoaWRlRGljZVJlc3VsdDogdHJ1ZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbWJhdCkge1xuICAgICAgLy8gU29ydCBjb21iYXQgcm9sbHMgYnkgaW5kZXguXG4gICAgICB0aGlzLnJvbGxzLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEuaW5kZXggPiBiLmluZGV4KSByZXR1cm4gMVxuICAgICAgICBpZiAoYS5pbmRleCA8IGIuaW5kZXgpIHJldHVybiAtMVxuICAgICAgICByZXR1cm4gMFxuICAgICAgfSlcblxuICAgICAgLy8gQ29tYmF0IHJvbGwgaW5jbHVkZXMgb25seSAyIHBlcnNvbnMsIHJlbW92ZSB0aGUgcmVzdC5cbiAgICAgIGlmICh0aGlzLnJvbGxzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgdGhpcy5yb2xscyA9IFt0aGlzLnJvbGxzWzBdLCB0aGlzLnJvbGxzWzFdXVxuICAgICAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5yb2xscykge1xuICAgICAgICAgIGRlbGV0ZSByLndpbm5lclxuICAgICAgICAgIGRlbGV0ZSByLnRpZVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEZpcnN0IHBlcnNvbiBhZGRlZCBpcyB0aGUgYXR0YWNrZXIuXG4gICAgICBpZiAodGhpcy5yb2xsc1swXSkgdGhpcy5yb2xsc1swXS5hdHRhY2tlciA9IHRydWVcblxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0/LnJvbGxlZCAmJiB0aGlzLnJvbGxzWzFdPy5yb2xsZWQpIHtcbiAgICAgICAgaWYgKHRoaXMucm9sbHNbMF0ucGFzc2VkIHx8IHRoaXMucm9sbHNbMV0ucGFzc2VkKSB7XG4gICAgICAgICAgaWYgKHRoaXMucm9sbHNbMF0uc3VjY2Vzc0xldmVsID4gdGhpcy5yb2xsc1sxXS5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgIHRoaXMucm9sbHNbMF0ud2lubmVyID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsc1sxXS5zdWNjZXNzTGV2ZWwgPiB0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgICAgdGhpcy5yb2xsc1sxXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmFkdmFudGFnZUF0dGFja2VyKSB0aGlzLnJvbGxzWzBdLndpbm5lciA9IHRydWVcbiAgICAgICAgICAgIGVsc2UgdGhpcy5yb2xsc1sxXS53aW5uZXIgPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucm9sbHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBpZiAoYS5yb2xsZWQgJiYgIWIucm9sbGVkKSByZXR1cm4gLTFcbiAgICAgICAgaWYgKCFhLnJvbGxlZCAmJiBiLnJvbGxlZCkgcmV0dXJuIDFcbiAgICAgICAgaWYgKCFhLnJvbGxlZCAmJiAhYi5yb2xsZWQpIHJldHVybiAwXG4gICAgICAgIGlmIChhLnN1Y2Nlc3NMZXZlbCA+IGIuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgfVxuICAgICAgICBpZiAoYS5zdWNjZXNzTGV2ZWwgPCBiLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3Bwb3NlZFJvbGxUaWVCcmVha2VyJykpIHtcbiAgICAgICAgICBpZiAoYS5tb2RpZmllZFJlc3VsdCA+IGIubW9kaWZpZWRSZXN1bHQpIHtcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGEubW9kaWZpZWRSZXN1bHQgPCBiLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGEucmF3VmFsdWUgPiBiLnJhd1ZhbHVlKSB7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgICAgICAgICAgcmV0dXJuIC0xXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChhLnJhd1ZhbHVlIDwgYi5yYXdWYWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAwXG4gICAgICB9KVxuXG4gICAgICB0aGlzLndpbkNvdW50ID0gMFxuICAgICAgaWYgKHRoaXMucm9sbHNbMF0gJiYgdGhpcy5yb2xsc1swXS5yb2xsZWQgJiYgIXRoaXMucm9sbHNbMF0uZmFpbGVkKSB7XG4gICAgICAgIHRoaXMud2luQ291bnQgPSAxXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0gJiZcbiAgICAgICAgICAgIHRoaXMucm9sbHNbaV0ucm9sbGVkICYmXG4gICAgICAgICAgICB0aGlzLnJvbGxzWzBdLnN1Y2Nlc3NMZXZlbCA9PT0gdGhpcy5yb2xsc1tpXS5zdWNjZXNzTGV2ZWwgJiZcbiAgICAgICAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvcHBvc2VkUm9sbFRpZUJyZWFrZXInKVxuICAgICAgICAgICAgICA/IHRoaXMucm9sbHNbMF0ubW9kaWZpZWRSZXN1bHQgPT09IHRoaXMucm9sbHNbaV0ubW9kaWZpZWRSZXN1bHRcbiAgICAgICAgICAgICAgOiB0aGlzLnJvbGxzWzBdLnJhd1ZhbHVlID09PSB0aGlzLnJvbGxzW2ldLnJhd1ZhbHVlKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy53aW5Db3VudCA9IHRoaXMud2luQ291bnQgKyAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5yb2xscy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnJvbGxzW2ldLndpbm5lciA9IGkgPCB0aGlzLndpbkNvdW50XG4gICAgICAgIHRoaXMucm9sbHNbaV0udGllID0gdGhpcy5yb2xsc1tpXS53aW5uZXIgJiYgdGhpcy53aW5Db3VudCA+IDFcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBjbG9zZUNhcmQgKCkge1xuICAgIHRoaXMuY2xvc2VkID0gdHJ1ZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUgKi9cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgdGhpcy5hY3RvcktleSA9IGFjdG9yS2V5XG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gIH1cblxuICBnZXQgZGlzcGxheUFjdG9yT25DYXJkICgpIHtcbiAgICByZXR1cm4gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICBpZiAoIXRoaXMucm9sbE1vZGUpIHJldHVybiBudWxsXG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5faXNCbGluZCkge1xuICAgICAgdGhpcy5faXNCbGluZCA9IHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9pc0JsaW5kXG4gIH1cblxuICBzZXQgaXNCbGluZCAoeCkge1xuICAgIHRoaXMuX2lzQmxpbmQgPSB4XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5hY3RvcktleSkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5hY3RvcikgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5hY3RvcktleSlcbiAgfVxuXG4gIGdldCBpdGVtICgpIHtcbiAgICBpZiAoIXRoaXMuaXRlbUlkKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRlZFRva2VucyAoKSB7XG4gICAgcmV0dXJuIFsuLi5nYW1lLnVzZXIudGFyZ2V0c11cbiAgfVxuXG4gIGdldCB0YXJnZXQgKCkge1xuICAgIGlmICh0aGlzLnRhcmdldFRva2VuKSByZXR1cm4gdGhpcy50YXJnZXRUb2tlblxuICAgIHJldHVybiB0aGlzLnRhcmdldEFjdG9yXG4gIH1cblxuICAvKipcbiAgICogSWYgYSB0YXJnZXRLZXkgd2FzIHByb3ZpZGVkIHRyeSB0byBmaW5kIGEgdG9rZW4gd2l0aCB0aGF0IGtleSBhbmQgdXNlIGl0LlxuICAgKiBJZiBub3QgdGFyZ2V0S2V5IHByb3ZpZGVkIHJldHVybiB0aGUgZmlyc3QgdGFyZ2V0LlxuICAgKi9cbiAgZ2V0IHRhcmdldFRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldFRva2VuKSB7XG4gICAgICBpZiAodGhpcy5fdGFyZ2V0S2V5KSB7XG4gICAgICAgIHRoaXMuX3RhcmdldFRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy5fdGFyZ2V0S2V5KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fdGFyZ2V0VG9rZW4gPSB0aGlzLnRhcmdldGVkVG9rZW5zLnBvcCgpXG4gICAgICAgIGlmICh0aGlzLl90YXJnZXRUb2tlbikge1xuICAgICAgICAgIHRoaXMuX3RhcmdldEtleSA9IGAke3RoaXMuX3RhcmdldFRva2VuLnNjZW5lLmlkfS4ke3RoaXMuX3RhcmdldFRva2VuLmlkfWBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgICB0aGlzLl90YXJnZXRUb2tlbiA9IG51bGxcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0VG9rZW5cbiAgfVxuXG4gIGdldCB0YXJnZXRBY3RvciAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRBY3Rvcikge1xuICAgICAgaWYgKHRoaXMudGFyZ2V0VG9rZW4pIHRoaXMuX3RhcmdldEFjdG9yID0gdGhpcy50YXJnZXRUb2tlbi5hY3RvclxuICAgICAgZWxzZSB0aGlzLl90YXJnZXRBY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuX3RhcmdldEtleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRBY3RvclxuICB9XG5cbiAgZ2V0IHRhcmdldEtleSAoKSB7XG4gICAgaWYgKCF0aGlzLnRhcmdldFRva2VuICYmICF0aGlzLnRhcmdldEFjdG9yKSByZXR1cm4gbnVsbFxuICAgIHJldHVybiB0aGlzLl90YXJnZXRLZXlcbiAgfVxuXG4gIGdldCBoYXNUYXJnZXQgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXRUb2tlbiAmJiAhdGhpcy50YXJnZXRBY3RvcikgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHNldCB0YXJnZXRLZXkgKHgpIHtcbiAgICB0aGlzLl90YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgc2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3Rvci5nZXRXZWFwb25Ta2lsbHModGhpcy5pdGVtSWQpXG4gIH1cblxuICBnZXQgdGFyZ2V0SW1nICgpIHtcbiAgICBjb25zdCBpbWcgPSBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLnRhcmdldEtleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLnRva2VuKSByZXR1cm4gdGhpcy50b2tlbi5uYW1lXG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICB9XG5cbiAgZ2V0IHRhcmdldE5hbWUgKCkge1xuICAgIGlmICghdGhpcy50YXJnZXQpIHJldHVybiAnZHVtbXknXG4gICAgcmV0dXJuIHRoaXMudGFyZ2V0Lm5hbWVcbiAgfVxuXG4gIGdldCBhY3RvckltZyAoKSB7XG4gICAgY29uc3QgaW1nID0gY2hhdEhlbHBlci5nZXRBY3RvckltZ0Zyb21LZXkodGhpcy5hY3RvcktleSlcbiAgICBpZiAoaW1nKSByZXR1cm4gaW1nXG4gICAgcmV0dXJuICcuLi9pY29ucy9zdmcvbXlzdGVyeS1tYW4tYmxhY2suc3ZnJ1xuICB9XG5cbiAgYXN5bmMgc2F5IChtZXNzYWdlLCBmbGF2b3IgPSBudWxsKSB7XG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgaWYgKHRoaXMudG9rZW4pIHtcbiAgICAgICAgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuLmRvY3VtZW50XG4gICAgICB9XG4gICAgICBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICB9IGVsc2Uge1xuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSB0aGlzLmFjdG9yLnVzZXIgPyB0aGlzLmFjdG9yLnVzZXIgOiBnYW1lLnVzZXJcblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBmbGF2b3IsXG4gICAgICBjb250ZW50OiBtZXNzYWdlXG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXMoZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKSlcbiAgICApIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKSAvLyBDaGFuZ2UgZm9yIHVzZXJcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdibGluZHJvbGwnKSBjaGF0RGF0YS5ibGluZCA9IHRydWVcblxuICAgIENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSkudGhlbihtc2cgPT4ge1xuICAgICAgcmV0dXJuIG1zZ1xuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IENoYXRDYXJkQWN0b3IgfSBmcm9tICcuLi9jYXJkLWFjdG9yLmpzJ1xuaW1wb3J0IHsgY3JlYXRlSW5saW5lUm9sbCwgY2hhdEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci5qcydcblxuZnVuY3Rpb24gcmVwbGFjZXIgKGtleSwgdmFsdWUpIHtcbiAgaWYgKGtleS5zdGFydHNXaXRoKCdfXycpKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZCAvLyByZW1vdmUgZnJvbSByZXN1bHRcbiAgfVxuXG4gIGNvbnN0IGV4Y2x1ZGUgPSBbJ19hY3RvciddXG4gIGlmIChleGNsdWRlLmluY2x1ZGVzKGtleSkpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBjb25zdCBjaGVja3MgPSBbJ3NhbkNoZWNrJywgJ2ludENoZWNrJ11cbiAgaWYgKGNoZWNrcy5pbmNsdWRlcyhrZXkpKSB7XG4gICAgcmV0dXJuIHZhbHVlLkpTT05Sb2xsRGF0YVxuICB9XG5cbiAgcmV0dXJuIHZhbHVlIC8vIHJldHVybiBhcyBpc1xufVxuXG5leHBvcnQgY2xhc3MgU2FuQ2hlY2tDYXJkIGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSA9IG51bGwsIHNhbkRhdGEgPSB7fSwgb3B0aW9ucyA9IHt9KSB7XG4gICAgc3VwZXIoXG4gICAgICBhY3RvcktleSxcbiAgICAgIHR5cGVvZiBvcHRpb25zLmZhc3RGb3J3YXJkICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICA/IEJvb2xlYW4ob3B0aW9ucy5mYXN0Rm9yd2FyZClcbiAgICAgICAgOiBmYWxzZVxuICAgIClcbiAgICBzYW5EYXRhLnNhblJlYXNvbiA9IHNhbkRhdGEuc2FuUmVhc29uID8/ICcnXG4gICAgdGhpcy5zYW5EYXRhID0gc2FuRGF0YVxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnNcbiAgICBpZiAoc2FuRGF0YS5tb2RpZmllciAmJiAhaXNOYU4oTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbk1vZGlmaWVyID0gTnVtYmVyKHNhbkRhdGEubW9kaWZpZXIpXG4gICAgfVxuICAgIGlmIChzYW5EYXRhLmRpZmZpY3VsdHkgJiYgIWlzTmFOKE51bWJlcihzYW5EYXRhLmRpZmZpY3VsdHkpKSkge1xuICAgICAgdGhpcy5vcHRpb25zLnNhbkRpZmZpY3VsdHkgPSBOdW1iZXIoc2FuRGF0YS5kaWZmaWN1bHR5KVxuICAgIH1cbiAgICB0aGlzLnN0YXRlID0ge31cbiAgfVxuXG4gIGdldCBpc0JsaW5kICgpIHtcbiAgICByZXR1cm4gdHlwZW9mIHRoaXMub3B0aW9ucy5pc0JsaW5kICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyBCb29sZWFuKHRoaXMub3B0aW9ucy5pc0JsaW5kKVxuICAgICAgOiBzdXBlci5pc0JsaW5kXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLm9wdGlvbnMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgID8gdGhpcy5vcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgIDogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIHJldHVybiB0eXBlb2YgdGhpcy5vcHRpb25zLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJ1xuICAgICAgPyB0aGlzLm9wdGlvbnMubW9kaWZpZXJcbiAgICAgIDogMFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NTb3VyY2UgKCkge1xuICAgIGlmICghdGhpcy5zYW5EYXRhLnRva2VuS2V5KSByZXR1cm4gbnVsbFxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLnNhbkRhdGEudG9rZW5LZXkpXG4gIH1cblxuICBnZXQgaW52b2x1bnRhcnlBY3Rpb24gKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhdGUuc2FuUm9sbGVkICYmXG4gICAgICAodGhpcy5zYW5DaGVjay5pc0ZhaWx1cmUgfHwgdGhpcy5zYW5DaGVjay5pc0Z1bWJsZSlcbiAgICApIHtcbiAgICAgIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IHNhbkxvc3NGb3JtdWxhICgpIHtcbiAgICBpZiAodGhpcy5zdGF0ZS5zYW5Sb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuTWF4ICYmIHRoaXMuc2FuQ2hlY2suZmFpbGVkKSB7XG4gICAgICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpKVxuICAgICAgICAgID8gTnVtYmVyKHRoaXMuc2FuRGF0YS5zYW5NYXgpXG4gICAgICAgICAgOiB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5zYW5EYXRhLnNhbk1pbiAmJiB0aGlzLnNhbkNoZWNrLnBhc3NlZCkge1xuICAgICAgICByZXR1cm4gIWlzTmFOKE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKSlcbiAgICAgICAgICA/IE51bWJlcih0aGlzLnNhbkRhdGEuc2FuTWluKVxuICAgICAgICAgIDogdGhpcy5zYW5EYXRhLnNhbk1pblxuICAgICAgfVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBzYW5Mb3N0VG9SZWFzb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLnNhbkxvc3RUb1JlYXNvbih0aGlzLnNhbkRhdGEuc2FuUmVhc29uKVxuICB9XG5cbiAgZ2V0IG1heFBvc3NpYmxlU2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgdGhpcy5zYW5EYXRhLnNhblJlYXNvbixcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICApXG4gIH1cblxuICBnZXQgbWF4U2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuRGF0YS5zYW5NYXgudG9TdHJpbmcoKSkuZXZhbHVhdGUoe1xuICAgICAgbWF4aW1pemU6IHRydWVcbiAgICB9KS50b3RhbFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3Iuc2FuTG9zc1JlYXNvbkVuY291bnRlcmVkKHRoaXMuc2FuRGF0YS5zYW5SZWFzb24pXG4gIH1cblxuICBnZXQgZmlyc3RFbmNvdW50ZXIgKCkge1xuICAgIHJldHVybiAhdGhpcy5hY3Rvci5teXRob3NJbnNhbml0eUV4cGVyaWVuY2VkXG4gIH1cblxuICBnZXQgaXNBY3Rvckxvb3NpbmdTYW4gKCkge1xuICAgIC8vIE5vIHNhbiBsb3NzIGR1cmluZyBib3V0IG9mIG1hZC5cbiAgICBpZiAodGhpcy5hY3Rvci5oYXNUZW1wb0luc2FuZSkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgLy8gVGhlIHNhbiBsb3NzIGlzIGEgMFxuICAgIGlmICh0aGlzLnNhbkxvc3NGb3JtdWxhID09PSAwKSByZXR1cm4gZmFsc2VcblxuICAgIGlmIChcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24gJiZcbiAgICAgIHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApID09PSAwXG4gICAgKSB7XG4gICAgICB0aGlzLnN0YXRlLmltbXVuZVRvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IGJvdXREdXJhdGlvblRleHQgKCkge1xuICAgIGlmICh0aGlzLmJvdXREdXJhdGlvbikge1xuICAgICAgaWYgKHRoaXMuYm91dFJlYWxUaW1lKSB7XG4gICAgICAgIHJldHVybiBgJHt0aGlzLmJvdXREdXJhdGlvbn0gJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucm91bmRzJyl9YFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYm91dFN1bW1hcnkpIHtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMuYm91dER1cmF0aW9ufSAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5ob3VycycpfWBcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB5b3VHYWluQ3RodWxodU15dGhvc1N0cmluZyAoKSB7XG4gICAgaWYgKHRoaXMubXl0aG9zR2Fpbikge1xuICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuWW91R2FpbmVkQ3RodWxodU15dGhvcycsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMubXl0aG9zR2FpblxuICAgICAgfSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIGFkdmFuY2VTdGF0ZSAoc3RhdGUpIHtcbiAgICBzd2l0Y2ggKHN0YXRlKSB7XG4gICAgICBjYXNlICdrZWVwQ3JlYXR1cmVTYW5EYXRhJzoge1xuICAgICAgICB0aGlzLnN0YXRlLmtlZXBDcmVhdHVyZVNhbkRhdGEgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdpbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCc6IHtcbiAgICAgICAgdGhpcy5zdGF0ZVtzdGF0ZV0gPSB0cnVlXG4gICAgICAgIGlmICghdGhpcy5pc0FjdG9yTG9vc2luZ1NhbikgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdzYW5Mb3NzQXBwbGllZCc6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hcHBseVNhbkxvc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnZW50ZXJCb3V0T2ZNYWRuZXNzUmVhbFRpbWUnOiB7XG4gICAgICAgIHRoaXMuYm91dER1cmF0aW9uID0gKGF3YWl0IG5ldyBSb2xsKCcxRDEwJykucm9sbCh7IGFzeW5jOiB0cnVlIH0pKS50b3RhbFxuICAgICAgICB0aGlzLmJvdXRSZWFsVGltZSA9IHRydWVcbiAgICAgICAgdGhpcy5ib3V0U3VtbWFyeSA9IGZhbHNlXG4gICAgICAgIHRoaXMuYm91dFJlc3VsdCA9IGF3YWl0IHRoaXMuYWN0b3IuZW50ZXJCb3V0T2ZNYWRuZXNzKFxuICAgICAgICAgIHRydWUsXG4gICAgICAgICAgdGhpcy5ib3V0RHVyYXRpb25cbiAgICAgICAgKVxuICAgICAgICB0aGlzLnN0YXRlLmJvdXRPZk1hZG5lc3NSZXNvbHZlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IGZhbHNlXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdlbnRlckJvdXRPZk1hZG5lc3NTdW1tYXJ5Jzoge1xuICAgICAgICB0aGlzLmJvdXREdXJhdGlvbiA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgICAgdGhpcy5ib3V0UmVhbFRpbWUgPSBmYWxzZVxuICAgICAgICB0aGlzLmJvdXRTdW1tYXJ5ID0gdHJ1ZVxuICAgICAgICB0aGlzLmJvdXRSZXN1bHQgPSBhd2FpdCB0aGlzLmFjdG9yLmVudGVyQm91dE9mTWFkbmVzcyhcbiAgICAgICAgICBmYWxzZSxcbiAgICAgICAgICB0aGlzLmJvdXREdXJhdGlvblxuICAgICAgICApXG4gICAgICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc1Jlc29sdmVkID0gdHJ1ZVxuICAgICAgICBhd2FpdCB0aGlzLnRyaWdnZXJJbnNhbml0eSgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdib3V0T2ZNYWRuZXNzT3Zlcic6IHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSlcbiAgICAgICAgYXdhaXQgdGhpcy50cmlnZ2VySW5zYW5pdHkoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAnbm9NeXRob3NHYWluZWQnOiB7XG4gICAgICAgIHRoaXMuc3RhdGUuY3RodWxodU15dGhvc0F3YXJkZWQgPSB0cnVlXG4gICAgICAgIHRoaXMubXl0aG9zR2FpbiA9IDBcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2N0aHVsaHVNeXRob3NBd2FyZGVkJzoge1xuICAgICAgICBsZXQgYW1vdW50R2FpbmVkID0gMVxuICAgICAgICBpZiAoIXRoaXMuYWN0b3IubXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCkge1xuICAgICAgICAgIGFtb3VudEdhaW5lZCA9IDVcbiAgICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLmV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5KClcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN0YXRlLmN0aHVsaHVNeXRob3NBd2FyZGVkID0gdHJ1ZVxuICAgICAgICBjb25zdCBjdGh1bGh1TXl0aG9zU2tpbGwgPSB0aGlzLmFjdG9yLmN0aHVsaHVNeXRob3NTa2lsbFxuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9XG4gICAgICAgICAgY3RodWxodU15dGhvc1NraWxsLmRhdGEuZGF0YS5hZGp1c3RtZW50cy5leHBlcmllbmNlIHx8IDBcbiAgICAgICAgaWYgKGN0aHVsaHVNeXRob3NTa2lsbCkge1xuICAgICAgICAgIGF3YWl0IGN0aHVsaHVNeXRob3NTa2lsbC51cGRhdGUoe1xuICAgICAgICAgICAgJ2RhdGEuYWRqdXN0bWVudHMuZXhwZXJpZW5jZSc6IG9sZFZhbHVlICsgYW1vdW50R2FpbmVkXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm15dGhvc0dhaW4gPSBhbW91bnRHYWluZWRcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyBieXBhc3NSb2xsU2FuICgpIHtcbiAgICB0aGlzLmlzQnlwYXNzZWQgPSB0cnVlXG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuaWdub3JlU2FuQ2hlY2sgPSB0cnVlXG4gICAgdGhpcy5zYW5Mb3NzID0gdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICB9XG5cbiAgYXN5bmMgcm9sbFNhbiAoKSB7XG4gICAgdGhpcy5zYW5DaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuc2FuQ2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5zYW5DaGVjay5hdHRyaWJ1dGUgPSAnc2FuJ1xuICAgIHRoaXMuc2FuQ2hlY2suZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLm9wdGlvbnMuc2FuRGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB0aGlzLnNhbkNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMub3B0aW9ucy5zYW5Nb2RpZmllciB8fCAwXG4gICAgYXdhaXQgdGhpcy5zYW5DaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5zdGF0ZS5zYW5Sb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5zdGF0ZS5pbnZvbHVudGFyeUFjdGlvblBlcmZvcm1lZCA9IHRoaXMuc2FuQ2hlY2sucGFzc2VkXG4gICAgaWYgKCF0aGlzLmlzQWN0b3JMb29zaW5nU2FuKSB7XG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmFjdG9yLmhhc1RlbXBvSW5zYW5lKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaW1tdW5lQWxyZWFkeUluQm91dCA9IHRydWVcbiAgICAgICAgaWYgKCF0aGlzLnNhbkNoZWNrLnBhc3NlZCkgdGhpcy5zdGF0ZS5maW5pc2ggPSBmYWxzZVxuICAgICAgfVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzUm9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5zYW5Mb3NzQXBwbGllZCA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IGZhbHNlXG4gICAgICB0aGlzLnNhbkxvc3MgPSAwXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5zYW5Mb3NzRm9ybXVsYSA9PT0gJ251bWJlcicpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgICAgdGhpcy5zYW5Mb3NzRm9ybXVsYVxuICAgICAgICApXG4gICAgICAgIGlmICh0aGlzLnNhbkxvc3MgPCB0aGlzLnNhbkxvc3NGb3JtdWxhKSB7XG4gICAgICAgICAgdGhpcy5zdGF0ZS5saW1pdGVkTG9zc1RvQ3JlYXR1cmUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuc2FuTG9zc0Zvcm11bGFcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuc2FuQ2hlY2suaXNGdW1ibGUpIHtcbiAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgIHRoaXMuc2FuTG9zcyA9IHRoaXMuYWN0b3IubWF4TG9zc1RvU2FuUmVhc29uKFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuUmVhc29uLFxuICAgICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgICApXG4gICAgfSBlbHNlIGlmICh0aGlzLnNhbkRhdGEuc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBtaW4gPSBuZXcgUm9sbCh0aGlzLnNhbkxvc3NGb3JtdWxhKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1pbmltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgICAgY29uc3QgbWF4ID0gdGhpcy5hY3Rvci5tYXhMb3NzVG9TYW5SZWFzb24oXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICAgIHRoaXMuc2FuRGF0YS5zYW5NYXhcbiAgICAgIClcbiAgICAgIGlmIChtaW4gPj0gbWF4KSB7XG4gICAgICAgIHRoaXMuc3RhdGUuc2FuTG9zc1JvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zYW5Mb3NzID0gbWF4XG4gICAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxTYW5Mb3NzICgpIHtcbiAgICB0aGlzLnNhbkxvc3NSb2xsID0gbmV3IFJvbGwoYCR7dGhpcy5zYW5Mb3NzRm9ybXVsYX1gKVxuXG4gICAgYXdhaXQgdGhpcy5zYW5Mb3NzUm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcblxuICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuc2FuTG9zc1JvbGwpXG5cbiAgICBjb25zdCBtYXggPSB0aGlzLmFjdG9yLm1heExvc3NUb1NhblJlYXNvbihcbiAgICAgIHRoaXMuc2FuRGF0YS5zYW5SZWFzb24sXG4gICAgICB0aGlzLnNhbkRhdGEuc2FuTWF4XG4gICAgKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zc1JvbGwudG90YWwgPiBtYXgpIHtcbiAgICAgIHRoaXMuc3RhdGUubGltaXRlZExvc3NUb0NyZWF0dXJlID0gdHJ1ZVxuICAgIH1cblxuICAgIHRoaXMuc2FuTG9zcyA9IE1hdGgubWluKHRoaXMuc2FuTG9zc1JvbGwudG90YWwsIG1heClcbiAgICB0aGlzLnN0YXRlLnNhbkxvc3NSb2xsZWQgPSB0cnVlXG4gIH1cblxuICBhc3luYyBhcHBseVNhbkxvc3MgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3IubG9vc2VTYW4odGhpcy5zYW5EYXRhLnNhblJlYXNvbiwgdGhpcy5zYW5Mb3NzKVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA+IDApIHRoaXMuc3RhdGUuYWN0b3JMb3N0U2FuID0gdHJ1ZVxuICAgIHRoaXMuc3RhdGUuc2FuTG9zc0FwcGxpZWQgPSB0cnVlXG4gICAgaWYgKHRoaXMuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5ib3V0T2ZNYWRuZXNzT3ZlciA9IHRydWVcblxuICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUucGVybWFuZW50bHlJbnNhbmUgPSB0cnVlXG5cbiAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gdHJ1ZVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc2FuTG9zcyA8IDUpIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaGFzSW5kZWZJbnNhbmUpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICAgIHRoaXMuc3RhdGUuZmluaXNoID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gZmFsc2VcbiAgICAgICAgdGhpcy5zdGF0ZS5zaGFrZW4gPSB0cnVlXG4gICAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IHRydWVcbiAgICAgICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW50Um9sbGVkID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hY3Rvci5kYWlseVNhbkxvc3MgPj0gdGhpcy5hY3Rvci5kYWlseVNhbkxpbWl0KSB7XG4gICAgICAvLyB0aGlzLmFjdG9yLnNhbi81XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS5pbnRSb2xsZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLnRlbXBvcmFyeUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IHRydWVcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHlUYWJsZVJvbGxlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IGZhbHNlXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbEludCAoKSB7XG4gICAgdGhpcy5pbnRDaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIHRoaXMuaW50Q2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yS2V5XG4gICAgdGhpcy5pbnRDaGVjay5jaGFyYWN0ZXJpc3RpYyA9ICdpbnQnXG4gICAgdGhpcy5pbnRDaGVjay5kaWZmaWN1bHR5ID1cbiAgICAgIHRoaXMub3B0aW9ucy5pbnREaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIHRoaXMuaW50Q2hlY2suZGljZU1vZGlmaWVyID0gdGhpcy5vcHRpb25zLmludE1vZGlmaWVyIHx8IDBcbiAgICBhd2FpdCB0aGlzLmludENoZWNrLl9wZXJmb3JtKHsgZm9yY2VEU046IHRydWUgfSlcbiAgICB0aGlzLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICBpZiAodGhpcy5pbnRDaGVjay5wYXNzZWQgfHwgdGhpcy5zdGF0ZS5hbHJlYWR5SW5zYW5lKSB7XG4gICAgICB0aGlzLnN0YXRlLmluc2FuaXR5ID0gdHJ1ZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmluZGVmaW5pdGVseUluc2FuZSA9IGZhbHNlXG4gICAgICB0aGlzLnN0YXRlLm1lbW9yeVJlcHJlc3NlZCA9IGZhbHNlXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3RhdGUuaW5zYW5pdHkgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS50ZW1wb3JhcnlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5pbmRlZmluaXRlbHlJbnNhbmUgPSBmYWxzZVxuICAgICAgdGhpcy5zdGF0ZS5tZW1vcnlSZXByZXNzZWQgPSB0cnVlXG4gICAgICB0aGlzLnN0YXRlLmZpbmlzaCA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB0cmlnZ2VySW5zYW5pdHkgKCkge1xuICAgIHRoaXMuc3RhdGUuYm91dE9mTWFkbmVzc092ZXIgPSB0cnVlXG4gICAgaWYgKHRoaXMuc3RhdGUuaW5kZWZpbml0ZWx5SW5zYW5lKSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSlcbiAgICB9XG4gICAgdGhpcy5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gIH1cblxuICBhc3luYyBjbGVhclNhbkxvc3NSZWFzb24gKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0UmVhc29uU2FuTG9zcyh0aGlzLnNhbkRhdGEuc2FuUmVhc29uLCAwKVxuICAgIGlmICghdGhpcy5zYW5Mb3NzUmVhc29uRW5jb3VudGVyZWQpIHtcbiAgICAgIHRoaXMuc3RhdGUua2VlcENyZWF0dXJlU2FuRGF0YSA9IHRydWVcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgLy8gQXR0YWNoZSB0aGUgc2FuQ2hlY2sgcmVzdWx0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGlmICh0aGlzLnN0YXRlLnNhblJvbGxlZCkge1xuICAgICAgdGhpcy5fX2lubGluZVNhbkNoZWNrID0gdGhpcy5zYW5DaGVjay5pbmxpbmVDaGVjay5vdXRlckhUTUxcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zYW5Mb3NzUm9sbCkge1xuICAgICAgY29uc3QgYSA9IGNyZWF0ZUlubGluZVJvbGwodGhpcy5zYW5Mb3NzUm9sbClcbiAgICAgIHRoaXMuX19pbmxpbmVTYW5Mb3NzUm9sbCA9IGEub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdGUuaW50Um9sbGVkICYmIHRoaXMuaW50Q2hlY2spIHtcbiAgICAgIHRoaXMuX19pbmxpbmVJbnRDaGVjayA9IHRoaXMuaW50Q2hlY2suaW5saW5lQ2hlY2sub3V0ZXJIVE1MXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgdGhpcylcbiAgICBjb25zdCBodG1sQ2FyZEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgLy8gQXR0YWNoIHRoZSBzYW5DaGVja0NhcmQgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeSh0aGlzLCByZXBsYWNlcikpXG5cbiAgICAvLyBVcGRhdGUgdGhlIG1lc3NhZ2UuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7XG4gICAgICBjb250ZW50OiBodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MXG4gICAgfSlcbiAgICBhd2FpdCB1aS5jaGF0LnVwZGF0ZU1lc3NhZ2UobXNnLCBmYWxzZSlcbiAgICByZXR1cm4gbXNnXG4gIH1cblxuICBzdGF0aWMgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jYXJkcy9zYW4tY2hlY2suaHRtbCdcbiAgfVxuXG4gIHN0YXRpYyBjaGVja1RhcmdldHMgKHNhbkRhdGEsIGZhc3RGb3J3YXJkID0gZmFsc2UpIHtcbiAgICBjb25zdCB0YXJnZXRzID0gWy4uLmdhbWUudXNlci50YXJnZXRzXVxuICAgIGlmICh0YXJnZXRzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCB0IG9mIHRhcmdldHMpIHtcbiAgICAgICAgaWYgKHQuYWN0b3IuaXNUb2tlbikge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci50b2tlbktleSwgc2FuRGF0YSwge1xuICAgICAgICAgICAgZmFzdEZvcndhcmRcbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFNhbkNoZWNrQ2FyZC5jcmVhdGUodC5hY3Rvci5pZCwgc2FuRGF0YSwgeyBmYXN0Rm9yd2FyZCB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vVGFyZ2V0c1NhbkNoZWNrJykpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoLi4uYXJncykge1xuICAgIGNvbnN0IGNoYXRDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCguLi5hcmdzKVxuICAgIGlmIChjaGF0Q2FyZC5hY3Rvci5oYXNJbmRlZkluc2FuZSkge1xuICAgICAgY2hhdENhcmQuc3RhdGUuYWxyZWFkeUluc2FuZSA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoY2hhdENhcmQuYWN0b3Iuc2FuIDw9IDApIHtcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmludFJvbGxlZCA9IHRydWVcbiAgICAgIGNoYXRDYXJkLnN0YXRlLmJvdXRPZk1hZG5lc3NPdmVyID0gdHJ1ZVxuXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5pbnNhbml0eSA9IHRydWVcbiAgICAgIGNoYXRDYXJkLnN0YXRlLnBlcm1hbmVudGx5SW5zYW5lID0gdHJ1ZVxuXG4gICAgICBjaGF0Q2FyZC5zdGF0ZS5maW5pc2ggPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFNhbkNoZWNrQ2FyZC50ZW1wbGF0ZSwgY2hhdENhcmQpXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gJC5wYXJzZUhUTUwoaHRtbClbMF1cblxuICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0Lm9iamVjdCA9IGVzY2FwZShKU09OLnN0cmluZ2lmeShjaGF0Q2FyZCwgcmVwbGFjZXIpKVxuICAgIGF3YWl0IGNoYXRDYXJkLnNheShodG1sQ2FyZEVsZW1lbnQub3V0ZXJIVE1MKVxuICB9XG5cbiAgc3RhdGljIGdldEZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgY29uc3QgaHRtbE1lc3NhZ2UgPSAkLnBhcnNlSFRNTChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBodG1sQ2FyZCA9IGh0bWxNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5jaGF0LWNhcmQnKVxuXG4gICAgcmV0dXJuIFNhbkNoZWNrQ2FyZC5nZXRGcm9tQ2FyZChodG1sQ2FyZClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCkge1xuICAgIGNvbnN0IHNhbkNoZWNrQ2FyZERhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuXG4gICAgY29uc3Qgc2FuQ2hlY2tDYXJkID0gbmV3IFNhbkNoZWNrQ2FyZCgpXG4gICAgT2JqZWN0LmFzc2lnbihzYW5DaGVja0NhcmQsIHNhbkNoZWNrQ2FyZERhdGEpXG4gICAgaWYgKCFzYW5DaGVja0NhcmQubWVzc2FnZUlkKSB7XG4gICAgICBzYW5DaGVja0NhcmQubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfVxuXG4gICAgaWYgKHNhbkNoZWNrQ2FyZC5zYW5DaGVjaz8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBzYW5DaGVja0NhcmQuc2FuQ2hlY2sgPSBPYmplY3QuYXNzaWduKFxuICAgICAgICBuZXcgQ29DN0NoZWNrKCksXG4gICAgICAgIHNhbkNoZWNrQ2FyZC5zYW5DaGVja1xuICAgICAgKVxuICAgIH1cblxuICAgIGlmIChzYW5DaGVja0NhcmQuaW50Q2hlY2s/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0Jykge1xuICAgICAgc2FuQ2hlY2tDYXJkLmludENoZWNrID0gT2JqZWN0LmFzc2lnbihcbiAgICAgICAgbmV3IENvQzdDaGVjaygpLFxuICAgICAgICBzYW5DaGVja0NhcmQuaW50Q2hlY2tcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCcpIHtcbiAgICAgIHNhbkNoZWNrQ2FyZC5zYW5Mb3NzUm9sbCA9IFJvbGwuZnJvbURhdGEoc2FuQ2hlY2tDYXJkLnNhbkxvc3NSb2xsKVxuICAgIH1cblxuICAgIHJldHVybiBzYW5DaGVja0NhcmRcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5cbmV4cG9ydCBjbGFzcyBTYW5EYXRhRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnOmNoZWNrYm94JykuY2xpY2soKCkgPT4gdGhpcy5fdG9nZ2xlSW5wdXQoaHRtbCkpXG4gIH1cblxuICBfdG9nZ2xlSW5wdXQgKGh0bWwpIHtcbiAgICBodG1sLmZpbmQoJypbbmFtZT1cImN1c3RvbW5hbWVcIl0nKS50b2dnbGUoKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9zYW5kYXRhLmh0bWwnLFxuICAgICAgb3B0aW9uc1xuICAgIClcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBTYW5EYXRhRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IG9wdGlvbnMuZGlzcGxheU5hbWVcbiAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2FuRGF0YVNlbGVjdGlvbldpbmRvd05hbWVkJywge1xuICAgICAgICAgICAgbmFtZTogb3B0aW9ucy5kaXNwbGF5TmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2FuRGF0YVNlbGVjdGlvbldpbmRvdycpLCAvLyBUT0RPOiBSZW1vdmUgU2FuRGF0YVNlbGVjdGlvbldpbmRvd05hbWVkXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICBWYWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNzYW4tZGF0YS1mb3JtJykpXG4gICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGZvcm1EYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ1ZhbGlkYXRlJyxcbiAgICAgICAgY2xvc2U6ICgpID0+IHt9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q29udGVudExpbmtEaWFsb2cgfSBmcm9tICcuL2NvYzctY29udGVudC1saW5rLWRpYWxvZy5qcydcbmltcG9ydCB7IGlzQ3RybEtleSB9IGZyb20gJy4uL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4vcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgU2FuRGF0YURpYWxvZyB9IGZyb20gJy4vc2FuZGF0YS1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGF0TWVzc2FnZSB7XG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0FUVFJJQlVURSAoKSB7XG4gICAgcmV0dXJuICdSL0FUJ1xuICB9XG5cbiAgc3RhdGljIGdldCBST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMgKCkge1xuICAgIHJldHVybiAnUi9DSCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0NPTUJBVCAoKSB7XG4gICAgcmV0dXJuICdSL0NPJ1xuICB9XG5cbiAgc3RhdGljIGdldCBST0xMX1RZUEVfU0tJTEwgKCkge1xuICAgIHJldHVybiAnUi9TSydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgUk9MTF9UWVBFX0VOQ09VTlRFUiAoKSB7XG4gICAgcmV0dXJuICdSL0VDJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfQ09NQklORUQgKCkge1xuICAgIHJldHVybiAnQy9DTydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX0dST1VQICgpIHtcbiAgICByZXR1cm4gJ0MvR1InXG4gIH1cblxuICBzdGF0aWMgZ2V0IENBUkRfVFlQRV9OT1JNQUwgKCkge1xuICAgIHJldHVybiAnQy9OTydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX09QUE9TRUQgKCkge1xuICAgIHJldHVybiAnQy9PUCdcbiAgfVxuXG4gIHN0YXRpYyBnZXQgQ0FSRF9UWVBFX1NBTl9DSEVDSyAoKSB7XG4gICAgcmV0dXJuICdDL1NDJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDQVJEX1RZUEVfTk9ORSAoKSB7XG4gICAgcmV0dXJuICdDL05PJ1xuICB9XG5cbiAgLy8gc3RhdGljIGdldCBST0xMX1RPX0NIQVQgKCkge1xuICAvLyAgIHJldHVybiAnUi9DSCdcbiAgLy8gfVxuXG4gIC8vIHN0YXRpYyBnZXQgUk9MTF9UT19DTElQQk9BUkQgKCkge1xuICAvLyAgIHJldHVybiAnUi9DTCdcbiAgLy8gfVxuXG4gIHN0YXRpYyBjYXJkVHlwZXMgKGNvbmZpZykge1xuICAgIGlmIChjb25maWcucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUKSB7XG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICBjb25zdCBzZWxlY3QgPSB7XG4gICAgICBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxdOiAnQ29DNy5SZWd1bGFyUm9sbENhcmQnLFxuICAgICAgW0NvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfQ09NQklORURdOiAnQ29DNy5Db21iaW5lZFJvbGxDYXJkJyxcbiAgICAgIFtDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX09QUE9TRURdOiAnQ29DNy5PcHBvc2VkUm9sbENhcmQnXG4gICAgICAvLyBbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9HUk9VUF06ICdDb0M3Lkdyb3VwUm9sbENhcmQnIC0gTllJXG4gICAgfVxuICAgIGlmIChcbiAgICAgIGNvbmZpZy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUgJiZcbiAgICAgIGNvbmZpZy5hdHRyaWJ1dGUgPT09ICdzYW4nXG4gICAgKSB7XG4gICAgICBzZWxlY3RbQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9TQU5fQ0hFQ0tdID0gJ0NvQzcuU2FuaXR5TG9zc0VuY291bnRlcidcbiAgICB9XG4gICAgcmV0dXJuIHNlbGVjdFxuICB9XG5cbiAgc3RhdGljIG5vcm1hbGl6ZVJlcXVlc3QgKG9wdGlvbnMpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5ldmVudCA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIG9wdGlvbnMuYWN0b3IgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAodHlwZW9mIG9wdGlvbnMuc2tpbGxJZCAhPT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5hdHRyaWJ1dGUgIT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmNoYXJhY3RlcmlzdGljICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBvcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUilcbiAgICApIHtcbiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5za2lsbElkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAob3B0aW9ucy5hY3Rvci5pdGVtcy5nZXQob3B0aW9ucy5za2lsbElkKSkge1xuICAgICAgICAgIG9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9wdGlvbnMuc2tpbGxOYW1lICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBza2lsbElkcyA9IG9wdGlvbnMuYWN0b3IuZ2V0U2tpbGxzQnlOYW1lKG9wdGlvbnMuc2tpbGxOYW1lKVxuICAgICAgICBpZiAoc2tpbGxJZHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIG9wdGlvbnMuc2tpbGxJZCA9IHNraWxsSWRzWzBdLmlkXG4gICAgICAgICAgb3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTExcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgdHlwZW9mIG9wdGlvbnMuYXR0cmlidXRlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBbJ2xjaycsICdzYW4nXS5pbmNsdWRlcyhvcHRpb25zLmF0dHJpYnV0ZSlcbiAgICAgICkge1xuICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIHR5cGVvZiBvcHRpb25zLmNoYXJhY3RlcmlzdGljICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2Ygb3B0aW9ucy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW1xuICAgICAgICAgIG9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICkge1xuICAgICAgICBvcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoXG4gICAgICB0eXBlb2Ygb3B0aW9ucy5ldmVudCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiBvcHRpb25zLmNhcmRUeXBlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgdHlwZW9mIG9wdGlvbnMucm9sbFR5cGUgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yTm90Rm91bmQnLCB7XG4gICAgICAgICAgdmFsdWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsJylcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBpZiAoXG4gICAgICAhW1xuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVELFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0dST1VQLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VELFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLmNhcmRUeXBlKVxuICAgICkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JJbnZhbGlkQ2FyZFR5cGUnKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChcbiAgICAgICFbXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUlxuICAgICAgXS5pbmNsdWRlcyhvcHRpb25zLnJvbGxUeXBlKVxuICAgICkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JJbnZhbGlkUm9sbFR5cGUnKVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgY2FyZFR5cGU6IG9wdGlvbnMuY2FyZFR5cGUsXG4gICAgICAgIHNoaWZ0S2V5OiBvcHRpb25zLmZhc3RGb3J3YXJkID8/IG9wdGlvbnMuZXZlbnQ/LnNoaWZ0S2V5ID8/IG9wdGlvbnMuZmFzdEZvcndhcmQgPz8gZmFsc2UsXG4gICAgICAgIGFsdEtleTogb3B0aW9ucy5ldmVudD8uYWx0S2V5ID8/IGZhbHNlLFxuICAgICAgICBpc0N0cmxLZXk6IGlzQ3RybEtleShvcHRpb25zLmV2ZW50ID8/IGZhbHNlKSxcbiAgICAgICAgY3JlYXRlRW5jb3VudGVyOiBvcHRpb25zLmNyZWF0ZUVuY291bnRlciA/PyBmYWxzZSxcbiAgICAgICAgb3BlbkxpbmtUb29sOiBvcHRpb25zLm9wZW5MaW5rVG9vbCA/PyBmYWxzZSxcbiAgICAgICAgc2VuZFRvQ2hhdDogb3B0aW9ucy5zZW5kVG9DaGF0ID8/IGZhbHNlLFxuICAgICAgICBzZW5kVG9DbGlwYm9hcmQ6IG9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID8/IGZhbHNlLFxuICAgICAgICBpc0NvbWJhdDpcbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdD8uY29udGFpbnMoJ2NvbWJhdCcpID8/IGZhbHNlLFxuICAgICAgICBwcmV2ZW50U3RhbmRieTogb3B0aW9ucy5wcmV2ZW50U3RhbmRieSA/PyBmYWxzZSxcbiAgICAgICAgYm9udXNEaWNlOiAwXG4gICAgICB9LFxuICAgICAgZGlhbG9nT3B0aW9uczoge1xuICAgICAgICByb2xsVHlwZTogb3B0aW9ucy5yb2xsVHlwZSxcbiAgICAgICAgY2FyZFR5cGU6IG9wdGlvbnMuY2FyZFR5cGUsXG4gICAgICAgIGF0dHJpYnV0ZTogJycsXG4gICAgICAgIGNoYXRNZXNzYWdlOiBvcHRpb25zLmNoYXRNZXNzYWdlID8/IHRydWUsXG4gICAgICAgIGZvcmNlZENhcmRUeXBlOiBvcHRpb25zLmZvcmNlZENhcmRUeXBlID8/IGZhbHNlLFxuICAgICAgICBoaWRlRGlmZmljdWx0eTogb3B0aW9ucy5oaWRlRGlmZmljdWx0eSA/PyBmYWxzZVxuICAgICAgfVxuICAgIH1cbiAgICBzd2l0Y2ggKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEw6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUM6XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0VOQ09VTlRFUjpcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuc2tpbGxJZCA9XG4gICAgICAgICAgb3B0aW9ucy5za2lsbElkID8/XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuaXRlbUlkID1cbiAgICAgICAgICBvcHRpb25zLmV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmRhdGFzZXQuaXRlbUlkXG4gICAgICAgIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljID1cbiAgICAgICAgICBvcHRpb25zLmNoYXJhY3RlcmlzdGljID8/XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlID1cbiAgICAgICAgICBvcHRpb25zLmF0dHJpYnV0ZSA/P1xuICAgICAgICAgIG9wdGlvbnMuZXZlbnQ/LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LmF0dHJpYlxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5hdHRyaWJ1dGUgPSBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVcbiAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3JJZCA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkID8/XG4gICAgICAgICAgb3B0aW9ucy5hY3Rvci5pZFxuICAgICAgICBjb25maWcub3B0aW9ucy50b2tlbktleSA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkID8/XG4gICAgICAgICAgb3B0aW9ucy5hY3Rvci50b2tlbktleVxuICAgICAgICBjb25maWcub3B0aW9ucy53ZWFwb25BbHRTa2lsbCA9XG4gICAgICAgICAgb3B0aW9ucy5ldmVudD8uY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2FsdGVybmF0aXYtc2tpbGwnKVxuICAgICAgICBjb25maWcub3B0aW9ucy5hY3RvciA9IG9wdGlvbnMuYWN0b3JcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMICYmXG4gICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDb21iYXRcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGNvbmZpZy5vcHRpb25zLmFjdG9yLml0ZW1zLmdldChjb25maWcub3B0aW9ucy5pdGVtSWQpXG4gICAgICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLndlYXBvbk5hbWUgPSBpdGVtLm5hbWVcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBjb25maWcub3B0aW9ucy5hY3RvcklkID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgICh0eXBlb2YgY29uZmlnLm9wdGlvbnMudG9rZW5LZXkgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgICB0eXBlb2YgY29uZmlnLm9wdGlvbnMuYWN0b3IgPT09ICd1bmRlZmluZWQnKVxuICAgICAgICApIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yQWN0b3InKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMICYmXG4gICAgICAgICAgdHlwZW9mIGNvbmZpZy5vcHRpb25zLnNraWxsSWQgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9ySW52YWxpZEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2tpbGwnKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICApXG4gICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09XG4gICAgICAgICAgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWMnKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgICFnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgICAgIWNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbXG4gICAgICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBdPy52YWx1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkF0dHJpYnV0ZScpXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgIWdhbWUudXNlci5pc0dNICYmXG4gICAgICAgICAgICAhY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXVxuICAgICAgICAgICAgICA/LnZhbHVlXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ09NQkFUXG4gICAgICAgICkge1xuICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuaXRlbUlkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuV2VhcG9uJylcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLm9wdGlvbnMuYWx0S2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLm9wdGlvbnMuaGFzUGxheWVyT3duZXIgPVxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmFjdG9yLmhhc1BsYXllck93bmVyID8/IGZhbHNlXG4gICAgICAgIGlmIChcbiAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT1cbiAgICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpc2FibGVGbGF0VGhyZXNob2xkTW9kaWZpZXIgPVxuICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5XG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIgPVxuICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuaXNDdHJsS2V5XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZhbHNlXG4gICAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlzYWJsZUZsYXREaWNlTW9kaWZpZXIgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gMFxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5kaWZmaWN1bHR5ID1cbiAgICAgICAgICBvcHRpb25zLmRpZmZpY3VsdHkgPz9cbiAgICAgICAgICBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsW1xuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVmYXVsdENoZWNrRGlmZmljdWx0eScpXG4gICAgICAgICAgXVxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyID0gMFxuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSAwXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHJldHVybiBjb25maWdcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0cmlnZ2VyIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjb25maWcgPSBDb0M3Q2hhdE1lc3NhZ2Uubm9ybWFsaXplUmVxdWVzdChvcHRpb25zKVxuICAgIGlmIChjb25maWcgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgaWYgKFxuICAgICAgKGNvbmZpZy5vcHRpb25zLmlzQ3RybEtleSkgJiZcbiAgICAgIGdhbWUudXNlci5pc0dNICYmXG4gICAgICBbXG4gICAgICAgIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgXS5pbmNsdWRlcyhjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSlcbiAgICApIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS5jcmVhdGVMaW5rKGNvbmZpZylcbiAgICB9IGVsc2UgaWYgKFxuICAgICAgKGNvbmZpZy5vcHRpb25zLnNlbmRUb0NoYXQgfHwgY29uZmlnLm9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkIHx8IGNvbmZpZy5vcHRpb25zLm9wZW5MaW5rVG9vbCB8fCBjb25maWcub3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIpICYmXG4gICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FID09PSBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZVxuICAgICkge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLmNyZWF0ZUxpbmsoY29uZmlnKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmFjdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBib251c0RpY2UgPSBjb25maWcub3B0aW9ucy5hY3Rvci5zeXN0ZW0/LmF0dHJpYnM/Lltjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVdPy5ib251c0RpY2VcbiAgICAgICAgICBpZiAoYm9udXNEaWNlKSB7XG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IGJvbnVzRGljZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgYm9udXNEaWNlID0gY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtPy5jaGFyYWN0ZXJpc3RpY3M/Lltjb25maWcub3B0aW9ucy5jaGFyYWN0ZXJpc3RpY10/LmJvbnVzRGljZVxuICAgICAgICAgIGlmIChib251c0RpY2UpIHtcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gYm9udXNEaWNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBjb25maWcub3B0aW9ucy5pdGVtSWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgaXRlbU1vZGlmaWVycyA9IE9iamVjdC52YWx1ZXMoY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLnNraWxscykuZmluZChrID0+IGsuZm91bmRyeUlEID09PSBjb25maWcub3B0aW9ucy5pdGVtSWQpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtTW9kaWZpZXJzLmJvbnVzRGljZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyID0gaXRlbU1vZGlmaWVycy5ib251c0RpY2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXIgPSBNYXRoLm1pbihNYXRoLm1heChjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciwgLTIpLCAyKVxuICAgICAgfVxuICAgICAgaWYgKCFjb25maWcub3B0aW9ucy5zaGlmdEtleSkge1xuICAgICAgICBhd2FpdCBDb0M3Q2hhdE1lc3NhZ2UuY3JlYXRlUm9sbChjb25maWcpXG4gICAgICB9XG4gICAgICByZXR1cm4gQ29DN0NoYXRNZXNzYWdlLnJ1blJvbGwoY29uZmlnKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVMaW5rIChjb25maWcpIHtcbiAgICBzd2l0Y2ggKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlKSB7XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDOlxuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NPTUJBVDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9FTkNPVU5URVI6XG4gICAgICAgIHtcbiAgICAgICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgICAgIHR5cGU6ICdDb0M3TGluaydcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tcbiAgICAgICAgICAgIGxpbmtEYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMXG4gICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMuYWN0b3IuaXRlbXMuZ2V0KGNvbmZpZy5vcHRpb25zLnNraWxsSWQpPy5zaG9ydE5hbWVcbiAgICAgICAgICAgIGlmICghbGlua0RhdGEubmFtZSkgcmV0dXJuXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQykge1xuICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXG4gICAgICAgICAgICBsaW5rRGF0YS5saW5rVHlwZSA9IENvQzdMaW5rLkxJTktfVFlQRS5DSEFSQUNURVJJU1RJQ1xuICAgICAgICAgICAgbGlua0RhdGEubmFtZSA9IGNvbmZpZy5vcHRpb25zLmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEUpIHtcbiAgICAgICAgICAgIGlmICgoY29uZmlnLm9wdGlvbnMuYWx0S2V5IHx8IGNvbmZpZy5vcHRpb25zLmNyZWF0ZUVuY291bnRlcikgJiYgY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlID09PSAnc2FuJykge1xuICAgICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TU1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgbGlua0RhdGEuY2hlY2sgPSBDb0M3TGluay5DSEVDS19UWVBFLkNIRUNLXG4gICAgICAgICAgICAgIGxpbmtEYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkFUVFJJQlVURVxuICAgICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMuYXR0cmlidXRlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DT01CQVQpIHtcbiAgICAgICAgICAgIGxpbmtEYXRhLmNoZWNrID0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNXG4gICAgICAgICAgICBsaW5rRGF0YS5uYW1lID0gY29uZmlnLm9wdGlvbnMud2VhcG9uTmFtZVxuICAgICAgICAgIH0gZWxzZSBpZiAoY29uZmlnLmRpYWxvZ09wdGlvbnMucm9sbFR5cGUgPT09IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5jaGVjayA9IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TU1xuICAgICAgICAgICAgbGlua0RhdGEuc2FuTWluID0gY29uZmlnLm9wdGlvbnMuYWN0b3I/LnN5c3RlbT8uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tQYXNzZWRcbiAgICAgICAgICAgIGxpbmtEYXRhLnNhbk1heCA9IGNvbmZpZy5vcHRpb25zLmFjdG9yPy5zeXN0ZW0/LnNwZWNpYWw/LnNhbkxvc3M/LmNoZWNrRmFpbGxlZFxuICAgICAgICAgICAgbGlua0RhdGEuc2FuUmVhc29uID0gY29uZmlnLm9wdGlvbnMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGU/Lmxlbmd0aFxuICAgICAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlXG4gICAgICAgICAgICAgIDogY29uZmlnLm9wdGlvbnMuYWN0b3IubmFtZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykgPT09ICdibGluZHJvbGwnKSB7XG4gICAgICAgICAgICBsaW5rRGF0YS5ibGluZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNvbmZpZy5vcHRpb25zLnNlbmRUb0NoYXQpIHtcbiAgICAgICAgICAgIENvQzdMaW5rLnRvQ2hhdE1lc3NhZ2UobGlua0RhdGEpXG4gICAgICAgICAgfSBlbHNlIGlmIChjb25maWcub3B0aW9ucy5zZW5kVG9DbGlwYm9hcmQpIHtcbiAgICAgICAgICAgIENvQzdMaW5rLmZyb21Ecm9wRGF0YShsaW5rRGF0YSkudGhlbihsaW5rID0+IHtcbiAgICAgICAgICAgICAgQ29DN1V0aWxpdGllcy5jb3B5VG9DbGlwYm9hcmQobGluay5saW5rKVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZShsaW5rRGF0YSwgeyBhY3RvcnM6IFtjb25maWcub3B0aW9ucy5hY3Rvcl0uZmlsdGVyKGEgPT4gYS5vd25lcnMubGVuZ3RoKSwgaGFzTW9kaWZpZXJzOiBjb25maWcub3B0aW9ucy5zaGlmdEtleSB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVSb2xsIChjb25maWcpIHtcbiAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKGNvbmZpZy5kaWFsb2dPcHRpb25zKVxuICAgIGlmICh1c2FnZSkge1xuICAgICAgY29uc3QgY2FyZFR5cGUgPSB1c2FnZS5nZXQoJ2NhcmRUeXBlJylcbiAgICAgIGlmIChjYXJkVHlwZSkge1xuICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSA9IGNhcmRUeXBlXG4gICAgICB9XG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5tb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgIHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpXG4gICAgICApXG4gICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcnVuUm9sbCAoY29uZmlnKSB7XG4gICAgc3dpdGNoIChjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDSzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHNhbkRhdGEgPSBhd2FpdCBTYW5EYXRhRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgICBwcm9tcHRMYWJlbDogdHJ1ZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgaWYgKHNhbkRhdGEpIHtcbiAgICAgICAgICAgIGxldCBzYW5NaW4gPSBzYW5EYXRhLmdldCgnc2FuTWluJykgfHwgMFxuICAgICAgICAgICAgbGV0IHNhbk1heCA9IHNhbkRhdGEuZ2V0KCdzYW5NYXgnKSB8fCAwXG4gICAgICAgICAgICBjb25zdCBzYW5SZWFzb24gPSBzYW5EYXRhLmdldCgnc2FuUmVhc29uJylcblxuICAgICAgICAgICAgaWYgKCFpc05hTihOdW1iZXIoc2FuTWluKSkpIHNhbk1pbiA9IE51bWJlcihzYW5NaW4pXG4gICAgICAgICAgICBpZiAoIWlzTmFOKE51bWJlcihzYW5NYXgpKSkgc2FuTWF4ID0gTnVtYmVyKHNhbk1heClcblxuICAgICAgICAgICAgU2FuQ2hlY2tDYXJkLmNyZWF0ZShcbiAgICAgICAgICAgICAgY29uZmlnLm9wdGlvbnMuYWN0b3IuYWN0b3JLZXksXG4gICAgICAgICAgICAgIHsgc2FuTWluLCBzYW5NYXgsIHNhblJlYXNvbiB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2FuTW9kaWZpZXI6IGNvbmZpZy5kaWFsb2dPcHRpb25zLm1vZGlmaWVyLFxuICAgICAgICAgICAgICAgIHNhbkRpZmZpY3VsdHk6IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHksXG4gICAgICAgICAgICAgICAgZmFzdEZvcndhcmQ6IGNvbmZpZy5vcHRpb25zLnNoaWZ0S2V5XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUw6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gY29uZmlnLmRpYWxvZ09wdGlvbnMubW9kaWZpZXJcbiAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmRpZmZpY3VsdHlcbiAgICAgICAgY2hlY2suYWN0b3IgPSAhY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICA/IGNvbmZpZy5vcHRpb25zLmFjdG9ySWRcbiAgICAgICAgICA6IGNvbmZpZy5vcHRpb25zLnRva2VuS2V5XG4gICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBjb25maWcuZGlhbG9nT3B0aW9ucy5mbGF0RGljZU1vZGlmaWVyXG4gICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGNvbmZpZy5kaWFsb2dPcHRpb25zLmZsYXRUaHJlc2hvbGRNb2RpZmllclxuICAgICAgICBjaGVjay5zdGFuZGJ5ID1cbiAgICAgICAgICAhY29uZmlnLm9wdGlvbnMucHJldmVudFN0YW5kYnkgJiZcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICBnYW1lLnVzZXIuaXNHTSAmJlxuICAgICAgICAgIGNvbmZpZy5vcHRpb25zLmhhc1BsYXllck93bmVyXG4gICAgICAgIGlmIChjb25maWcuZGlhbG9nT3B0aW9ucy5yb2xsVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCkge1xuICAgICAgICAgIGNoZWNrLnNraWxsID0gY29uZmlnLm9wdGlvbnMuc2tpbGxJZFxuICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIGNvbmZpZy5kaWFsb2dPcHRpb25zLnJvbGxUeXBlID09PSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICApIHtcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsQXR0cmlidXRlKGNvbmZpZy5vcHRpb25zLmF0dHJpYnV0ZSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNvbmZpZy5kaWFsb2dPcHRpb25zLmNoYXRNZXNzYWdlKSB7XG4gICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHJlc3VsdDogY2hlY2subW9kaWZpZWRSZXN1bHQsXG4gICAgICAgICAgc3VjY2Vzc0xldmVsOiBjaGVjay5yb2xsZWRTdWNjZXNzTGV2ZWwsXG4gICAgICAgICAgaXNGdW1ibGU6IGNoZWNrLmlzRnVtYmxlLFxuICAgICAgICAgIGlzQ3JpdGljYWw6IGNoZWNrLmlzQ3JpdGljYWwsXG4gICAgICAgICAgc3VjY2Vzc0xldmVsczoge1xuICAgICAgICAgICAgMTogY2hlY2sucmVndWxhclRocmVzaG9sZCxcbiAgICAgICAgICAgIDI6IGNoZWNrLmhhcmRUaHJlc2hvbGQsXG4gICAgICAgICAgICAzOiBjaGVjay5leHRyZW1lVGhyZXNob2xkXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwYXNzZWQ6IGNoZWNrLnBhc3NlZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjYXNlIENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRDpcbiAgICAgIGNhc2UgQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9DT01CSU5FRDpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgICAgICAgY2hlY2suYWN0b3IgPSAhY29uZmlnLm9wdGlvbnMudG9rZW5LZXlcbiAgICAgICAgICAgID8gY29uZmlnLm9wdGlvbnMuYWN0b3JJZFxuICAgICAgICAgICAgOiBjb25maWcub3B0aW9ucy50b2tlbktleVxuICAgICAgICAgIGNoZWNrLmNoYXJhY3RlcmlzdGljID0gY29uZmlnLm9wdGlvbnMuY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICBjaGVjay5hdHRyaWJ1dGUgPSBjb25maWcub3B0aW9ucy5hdHRyaWJ1dGVcbiAgICAgICAgICBjaGVjay5za2lsbElkID0gY29uZmlnLm9wdGlvbnMuc2tpbGxJZFxuICAgICAgICAgIGNoZWNrLnJvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgICAgICAgIGNoZWNrLmluaXRpYXRvciA9IGdhbWUudXNlci5pZFxuICAgICAgICAgIGxldCBkYXRhID0ge31cbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICB0eXBlOiBPcHBvc2VkQ2hlY2tDYXJkLmRlZmF1bHRDb25maWcudHlwZSxcbiAgICAgICAgICAgICAgY29tYmF0OiBjb25maWcub3B0aW9ucy5pc0NvbWJhdCxcbiAgICAgICAgICAgICAgYWN0aW9uOiAnbmV3J1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hlY2suaXRlbSA9IGNvbmZpZy5vcHRpb25zLml0ZW1JZFxuICAgICAgICAgICAgY2hlY2sud2VhcG9uQWx0U2tpbGwgPSBjb25maWcub3B0aW9ucy53ZWFwb25BbHRTa2lsbFxuICAgICAgICAgICAgY2hlY2suZGVueVB1c2ggPSB0cnVlIC8vIE9wcG9zZWQgcm9sbGVkIGNhbid0IGJlIHB1c2hlZC5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLl9wZXJmb3JtKClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YSA9IHtcbiAgICAgICAgICAgICAgdHlwZTogQ29tYmluZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlLFxuICAgICAgICAgICAgICBhY3Rpb246ICduZXcnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gY29uZmlnLmRpYWxvZ09wdGlvbnMuZGlmZmljdWx0eVxuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhLnJvbGwgPSBjaGVjay5KU09OUm9sbERhdGFcbiAgICAgICAgICBkYXRhLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBjb25maWcuZGlhbG9nT3B0aW9ucy5jYXJkVHlwZSA9PT0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9PUFBPU0VEXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvbWJpbmVkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuL2hlbHBlci5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDb25DaGVjayB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcklkID0gbnVsbCwgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgIHRoaXMuY2hlY2sgPSBuZXcgQ29DN0NoZWNrKGFjdG9ySWQpXG4gICAgdGhpcy5jaGVjay5jaGFyYWN0ZXJpc3RpYyA9ICdjb24nXG4gICAgdGhpcy5jaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuY2hlY2suZGVueVB1c2ggPSB0cnVlXG4gICAgdGhpcy5hY3RvcklkID0gYWN0b3JJZFxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IHJvbGxNb2RlICgpIHtcbiAgICBpZiAoIXRoaXMuX3JvbGxNb2RlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICByZXR1cm4gdGhpcy5fcm9sbE1vZGVcbiAgfVxuXG4gIHNldCByb2xsTW9kZSAoeCkge1xuICAgIGlmICh4ID09PSBmYWxzZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgdGhpcy5fcm9sbE1vZGUgPSB4XG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICh0aGlzLmFjdG9ySWQpIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9ySWQpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBzZXQgYWN0b3JJZCAoeCkge1xuICAgIHRoaXMuX2FjdG9ySWQgPSB4XG4gICAgdGhpcy5jaGVjay5hY3RvciA9IHhcbiAgfVxuXG4gIGdldCBhY3RvcklkICgpIHtcbiAgICBpZiAodGhpcy5fYWN0b3JJZCkgcmV0dXJuIHRoaXMuX2FjdG9ySWRcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHRva2VuS2V5ICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvci5pc1Rva2VuKSByZXR1cm4gdGhpcy5hY3Rvci50b2tlbktleVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaXNTdWNjZXNzICgpIHtcbiAgICBpZiAodGhpcy5jaGVjaykgcmV0dXJuIHRoaXMuY2hlY2suaXNTdWNjZXNzXG4gICAgZWxzZSByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBpc1JvbGxlZCAoKSB7XG4gICAgaWYgKHRoaXMuY2hlY2sgJiYgdGhpcy5jaGVjay5kaWNlcyAmJiB0aGlzLmNoZWNrLmRpY2VzLnRvdGFsKSByZXR1cm4gdHJ1ZVxuICAgIGVsc2UgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCBjb25DaGVjayA9IG5ldyBDb0M3Q29uQ2hlY2soKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoY29uQ2hlY2ssIGNhcmQpXG4gICAgY29uc3QgaHRtbENoZWNrID0gY2FyZC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgIENvQzdSb2xsLmdldEZyb21FbGVtZW50KGh0bWxDaGVjaywgY29uQ2hlY2suY2hlY2spXG4gICAgY29uQ2hlY2subWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgcmV0dXJuIGNvbkNoZWNrXG4gIH1cblxuICBhc3luYyBnZXRDaGVja0VsZW1lbnQgKCkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0ZW1wbGF0ZSwgdGhpcy5jaGVjaylcbiAgICBjb25zdCBodG1sRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG4gICAgaWYgKGh0bWxFbGVtZW50KSB7XG4gICAgICBodG1sRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdjaGF0LWNhcmQnLCAnaXRlbS1jYXJkJywgJ3JvbGwtY2FyZCcpXG4gICAgICByZXR1cm4gaHRtbEVsZW1lbnRcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb24tY2hlY2suaHRtbCdcblxuICAgIGlmIChmYXN0Rm9yd2FyZCkge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsQ29uKClcbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgaWYgKGZhc3RGb3J3YXJkKSB7XG4gICAgICBjb25zdCBjaGVjayA9IGh0bWxFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgICBjaGVjay5yZXBsYWNlV2l0aChhd2FpdCB0aGlzLmdldENoZWNrRWxlbWVudCgpKVxuICAgIH1cblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBsZXQgc3BlYWtlclxuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBpZiAodGhpcy50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuXG4gICAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHtcbiAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICBzcGVha2VyLFxuICAgICAgZmxhdm9yOiB0aGlzLmZsYXZvcixcbiAgICAgIGNvbnRlbnQ6IGh0bWxFbGVtZW50Lm91dGVySFRNTFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG4gICAgKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJykgLy8gQ2hhbmdlIGZvciB1c2VyXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgcm9sbENvbiAoKSB7XG4gICAgdGhpcy5jaGVjay5oaWRlRGljZVJlc3VsdCA9IHRydWVcbiAgICBhd2FpdCB0aGlzLmNoZWNrLl9wZXJmb3JtKClcbiAgICBpZiAoIXRoaXMuaXNCbGluZCAmJiAhdGhpcy5pc1JvbGxlZCAmJiAhdGhpcy5pc1N1Y2Nlc3MpIHtcbiAgICAgIGlmICh0aGlzLnN0YXlBbGl2ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5kZWFkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudW5jb25zY2lvdXMpXG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuYXBwbGllZCA9IHRydWVcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUNoYXRDYXJkICgpIHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29uLWNoZWNrLmh0bWwnXG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHRoaXMpXG4gICAgY29uc3QgaHRtbEVsZW1lbnQgPSAkLnBhcnNlSFRNTChodG1sKVswXVxuXG4gICAgY29uc3QgY2hlY2sgPSBodG1sRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucm9sbC1yZXN1bHQnKVxuICAgIGNoZWNrLnJlcGxhY2VXaXRoKGF3YWl0IHRoaXMuZ2V0Q2hlY2tFbGVtZW50KCkpXG5cbiAgICBpZiAoIXRoaXMuaXNCbGluZCAmJiB0aGlzLmlzUm9sbGVkICYmICF0aGlzLmlzU3VjY2Vzcykge1xuICAgICAgaWYgKHRoaXMuc3RheUFsaXZlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmRlYWQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhd2FpdCB0aGlzLmFjdG9yLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIXRoaXMubWVzc2FnZUlkKSByZXR1cm5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgY2hhdE1lc3NhZ2UudXBkYXRlKHsgY29udGVudDogaHRtbEVsZW1lbnQub3V0ZXJIVE1MIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCByZW5kZXJUZW1wbGF0ZSAqL1xuZXhwb3J0IGNsYXNzIFNraWxsU2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5zZWxlY3Qtc2tpbGwnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0U2tpbGxDbGlja2VkKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdFNraWxsQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCB0aGlzLmRhdGEuZGF0YS5hY3RvcklkKTtcbiAgICAvLyBhd2FpdCBhY3Rvci5hZGRTa2lsbCggdGhpcy5kYXRhLmRhdGEuc2tpbGxzW051bWJlcihsaS5kYXRhc2V0LmluZGV4KV0sIHRoaXMuZGF0YS5kYXRhLnR5cGUpO1xuICAgIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLnNlbGVjdGVkID0gdHJ1ZVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgIGlmICghdGhpcy5kYXRhLmRhdGEuYWRkZWQpIHRoaXMuZGF0YS5kYXRhLmFkZGVkID0gMFxuICAgIHRoaXMuZGF0YS5kYXRhLmFkZGVkKytcbiAgICBjb25zdCBmb3JtID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuc2tpbGwtc2VsZWN0b3InKVxuICAgIGNvbnN0IGRpdkNvdW50ID0gZm9ybS5xdWVyeVNlbGVjdG9yKCcuY291bnQnKVxuICAgIGRpdkNvdW50LmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmFkZGVkXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmFkZGVkID49IHRoaXMuZGF0YS5kYXRhLm9wdGlvbnNDb3VudCkge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtc2VsZWN0Lmh0bWwnLFxuICAgICAgZGF0YVxuICAgICkgLy8gUmVuZGVyIHRlbXBsYXRlIGJ1ZyBhdmVjIGNlcnRhaW5lcyBkYXRhXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IFNraWxsU2VsZWN0RGlhbG9nKFxuICAgICAgICB7XG4gICAgICAgICAgdGl0bGU6IGRhdGEudGl0bGUsXG4gICAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgICBkYXRhLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWRhdGEuYWRkZWQgPj0gZGF0YS5vcHRpb25zQ291bnQpIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgICAgY29uc3Qgc2VsZWN0ZWQgPSBkYXRhLnNraWxscy5maWx0ZXIoc2tpbGwgPT4gc2tpbGwuc2VsZWN0ZWQpXG4gICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShzZWxlY3RlZClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHsgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdza2lsbC1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIERpYWxvZywgcmVuZGVyVGVtcGxhdGUgKi9cblxuZXhwb3J0IGNsYXNzIFBvaW50U2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLW5hbWUnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25CdXR0b25DbGlja2VkKGV2ZW50KSlcbiAgfVxuXG4gIGFzeW5jIF9vblNlbGVjdENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgaXRlbUxpc3QgPSBsaS5jbG9zZXN0KCcuaXRlbS1saXN0JylcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbUxpc3QucXVlcnlTZWxlY3RvckFsbCgnLnNlbGVjdGFibGUnKSkge1xuICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbaXRlbS5kYXRhc2V0LmtleV0uc2VsZWN0ZWQgPSBmYWxzZVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzW2l0ZW0uZGF0YXNldC5rZXldLm9wdGlvbmFsID0gZmFsc2VcbiAgICB9XG4gICAgJChsaSkudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJylcbiAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLnNlbGVjdGVkID0gdHJ1ZVxuICAgIGNvbnN0IHRvdGFsUG9pbnRzID0gbGlcbiAgICAgIC5jbG9zZXN0KCcjc2tpbGwtc2VsZWN0aW9uLWZvcm0nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5wb2ludHMnKVxuICAgIHRvdGFsUG9pbnRzLmlubmVyVGV4dCA9XG4gICAgICB0aGlzLmRhdGEuZGF0YS50b3RhbCArXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLm11bHRpcGxpZXIgKlxuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3NbbGkuZGF0YXNldC5rZXldLnZhbHVlXG4gICAgY29uc3QgYnV0dG9uID0gbGlcbiAgICAgIC5jbG9zZXN0KCcjc2tpbGwtc2VsZWN0aW9uLWZvcm0nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbi52YWxpZGF0ZScpXG4gICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcbiAgICB0aGlzLmRhdGEuZGF0YS5yZXNvbHZlZCA9IHRydWVcbiAgICAvLyBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldCggdGhpcy5kYXRhLmRhdGEuYWN0b3JJZCk7XG4gICAgLy8gYXdhaXQgYWN0b3IuYWRkU2tpbGwoIHRoaXMuZGF0YS5kYXRhLnNraWxsc1tOdW1iZXIobGkuZGF0YXNldC5pbmRleCldLCB0aGlzLmRhdGEuZGF0YS50eXBlKTtcbiAgICAvLyBldmVudC5jdXJyZW50VGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgLy8gaWYoICF0aGlzLmRhdGEuZGF0YS5hZGRlZCkgdGhpcy5kYXRhLmRhdGEuYWRkZWQgPSAwO1xuICAgIC8vIHRoaXMuZGF0YS5kYXRhLmFkZGVkKys7XG4gICAgLy8gY29uc3QgZm9ybSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvaW50LXNlbGVjdG9yJyk7XG4gICAgLy8gY29uc3QgZGl2Q291bnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoJy5jb3VudCcpO1xuICAgIC8vIGRpdkNvdW50LmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmFkZGVkO1xuICAgIC8vIGlmKCB0aGlzLmRhdGEuZGF0YS5hZGRlZCA+PSB0aGlzLmRhdGEuZGF0YS5vcHRpb25zKSB0aGlzLmNsb3NlKCk7XG4gICAgLy8gcmV0dXJuIGV2ZW50O1xuICB9XG5cbiAgYXN5bmMgX29uQnV0dG9uQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbmFjdGl2ZScpKSByZXR1cm5cbiAgICBzdXBlci5jbG9zZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9wb2ludC1zZWxlY3QuaHRtbCcsXG4gICAgICBkYXRhXG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBQb2ludFNlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEucmVzb2x2ZWQpIHJldHVybiByZXNvbHZlKGRhdGEpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgQ2hhcmFjU2VsZWN0RGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLW5hbWUnKVxuICAgICAgLmNsaWNrKGFzeW5jIGV2ZW50ID0+IHRoaXMuX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMoZXZlbnQpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0Q2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICB0aGlzLmRhdGEuZGF0YS5zZWxlY3RlZCA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5jbG9zZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKFxuICAgICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jaGFyLXNlbGVjdC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENoYXJhY1NlbGVjdERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICBidXR0b25zOiB7fSxcbiAgICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRhdGEuc2VsZWN0ZWQpIHJldHVybiByZXNvbHZlKGRhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgICBlbHNlIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgeyBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXItc2VsZWN0J10gfVxuICAgICAgKVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWFsb2csIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsICovXG5leHBvcnQgY2xhc3MgQ2hhcmFjUm9sbERpYWxvZyBleHRlbmRzIERpYWxvZyB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBvcHRpb25zKSB7XG4gICAgc3VwZXIoZGF0YSwgb3B0aW9ucylcblxuICAgIHRoaXMucm9sbGVkID0gZGF0YS5yb2xsZWQgfHwge31cbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLm9uKCdjaGFuZ2UnLCAnaW5wdXQnLCB0aGlzLl9vbkNoYW5nZUlucHV0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignc3VibWl0JywgJ2Zvcm0nLCB0aGlzLl9vblN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yb2xsLWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uUm9sbENoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmluY3JlYXNlLWNoYXJhY3RlcmlzdGljJyxcbiAgICAgIHRoaXMuX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5kZWNyZWFzZS1jaGFyYWN0ZXJpc3RpYycsXG4gICAgICB0aGlzLl9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcucmVzZXQtY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgdGhpcy5fb25SZXNldENoYXJhY3RlcmlzdGljLmJpbmQodGhpcylcbiAgICApXG4gICAgaHRtbC5vbignY2xpY2snLCAnYnV0dG9uJywgdGhpcy5fb25CdXR0b24uYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICB0aGlzLmluY3JlYXNlQ2hhcmFjdGVyaXN0aWMoY2hhcmFjS2V5KVxuICB9XG5cbiAgYXN5bmMgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBjaGFyYWNLZXkgPSBsaS5kYXRhc2V0LmtleVxuICAgIHRoaXMuZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gIH1cblxuICBhc3luYyBfb25SZXNldENoYXJhY3RlcmlzdGljIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGNoYXJhY0tleSA9IGxpLmRhdGFzZXQua2V5XG4gICAgdGhpcy5yZXNldENoYXJhY3RlcmlzdGljKGNoYXJhY0tleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkJ1dHRvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBhY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgaWYgKGFjdGlvbiA9PT0gJ3JvbGwnKSB7XG4gICAgICBmb3IgKGNvbnN0IGNoYXIgb2YgW1xuICAgICAgICAnc3RyJyxcbiAgICAgICAgJ2NvbicsXG4gICAgICAgICdzaXonLFxuICAgICAgICAnZGV4JyxcbiAgICAgICAgJ2FwcCcsXG4gICAgICAgICdpbnQnLFxuICAgICAgICAncG93JyxcbiAgICAgICAgJ2VkdScsXG4gICAgICAgICdsdWNrJ1xuICAgICAgXSkge1xuICAgICAgICBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoXG4gICAgICBhY3Rpb24gPT09ICd2YWxpZGF0ZScgJiZcbiAgICAgICFldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKVxuICAgICkge1xuICAgICAgdGhpcy5jaGVja1RvdGFsKClcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJvbGxDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGNvbnN0IGZvcm11bGEgPSB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHNba2V5XVxuICAgIGlmIChpbnB1dCAmJiBmb3JtdWxhKSB7XG4gICAgICBpZiAoaXNOYU4oTnVtYmVyKGZvcm11bGEpKSkge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZm9ybXVsYSlcbiAgICAgICAgYXdhaXQgcm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgIHJvbGwudG9NZXNzYWdlKHtcbiAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZVJvbGxpbmdDaGFyYWN0ZXJpc3RpYycsIHtcbiAgICAgICAgICAgIGxhYmVsOiB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MubGlzdFtrZXldLmxhYmVsLFxuICAgICAgICAgICAgZm9ybXVsYVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIGlucHV0LnZhbHVlID0gcm9sbC50b3RhbFxuICAgICAgfSBlbHNlIGlucHV0LnZhbHVlID0gTnVtYmVyKGZvcm11bGEpXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgICBpZiAoIXRoaXMucm9sbGVkKSB0aGlzLnJvbGxlZCA9IHt9XG4gICAgICB0aGlzLnJvbGxlZFtrZXldID0gdHJ1ZVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgaW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpICsgMVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCAmJiBOdW1iZXIoaW5wdXQudmFsdWUpID4gMCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpIC0gMVxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldID0gTnVtYmVyKGlucHV0LnZhbHVlKVxuICAgIH1cbiAgICB0aGlzLmNoZWNrVG90YWwoKVxuICB9XG5cbiAgYXN5bmMgcmVzZXRDaGFyYWN0ZXJpc3RpYyAoa2V5KSB7XG4gICAgY29uc3QgbGkgPSB0aGlzLl9lbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoYGxpLml0ZW1bZGF0YS1rZXk9JHtrZXl9XWApXG4gICAgY29uc3QgaW5wdXQgPSBsaT8ucXVlcnlTZWxlY3RvcignaW5wdXQnKVxuICAgIGlmIChpbnB1dCkge1xuICAgICAgaW5wdXQudmFsdWUgPSBudWxsXG4gICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzW2tleV0gPSAwXG4gICAgfVxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VJbnB1dCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaW5wdXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoaW5wdXQudmFsdWUpXG4gICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgIHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy52YWx1ZXNbaW5wdXQubmFtZV0gPSB2YWx1ZVxuICAgIH1cblxuICAgIHRoaXMuY2hlY2tUb3RhbCgpXG4gIH1cblxuICBjaGVja1RvdGFsICgpIHtcbiAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsID0gMFxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1xuICAgICkpIHtcbiAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICB0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnRvdGFsICs9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignLnBvaW50cycpXG4gICAgaWYgKHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCkge1xuICAgICAgaWYgKFxuICAgICAgICBOdW1iZXIodGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCkgIT09XG4gICAgICAgIE51bWJlcih0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIHZhbGlkYXRpb24uY2xhc3NMaXN0LmFkZCgnd2FybmluZycpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWxpZGF0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ3dhcm5pbmcnKVxuICAgICAgICBjb25zdCB2YWxpZGF0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcignYnV0dG9uLnZhbGlkYXRlJylcbiAgICAgICAgdmFsaWRhdGVCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaW5hY3RpdmUnKVxuICAgICAgICB0aGlzLmRhdGEuZGF0YS52YWxpZGF0ZSA9IHRydWVcbiAgICAgIH1cbiAgICAgIGNvbnN0IHZhbHVlID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudmFsdWUnKVxuICAgICAgdmFsdWUuaW5uZXJUZXh0ID0gdGhpcy5kYXRhLmRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZVxuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsID0gdmFsaWRhdGlvbi5xdWVyeVNlbGVjdG9yKCcudG90YWwnKVxuICAgIHRvdGFsLmlubmVyVGV4dCA9IHRoaXMuZGF0YS5kYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWxcblxuICAgIGlmICh0aGlzLmRhdGEuZGF0YS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCkge1xuICAgICAgaWYgKHRoaXMucm9sbGVkKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlID1cbiAgICAgICAgICAhT2JqZWN0LmVudHJpZXModGhpcy5yb2xsZWQpLmZpbmQoZWwgPT4gIWVsKSAmJlxuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKHRoaXMucm9sbGVkKS5sZW5ndGggPT09IDlcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5kYXRhLnZhbGlkYXRlKSB7XG4gICAgICAgICAgY29uc3QgdmFsaWRhdGVCdXR0b24gPVxuICAgICAgICAgICAgdGhpcy5fZWxlbWVudFswXS5xdWVyeVNlbGVjdG9yKCdidXR0b24udmFsaWRhdGUnKVxuICAgICAgICAgIHZhbGlkYXRlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2luYWN0aXZlJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChkYXRhKSB7XG4gICAgY29uc3Qgcm9sbGVkID0ge31cbiAgICBkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwgPSAwXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZGF0YS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzKSkge1xuICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy50b3RhbCArPSB2YWx1ZSB8fCAwXG4gICAgICB9XG4gICAgICBpZiAoIWlzTmFOKHZhbHVlKSAmJiB2YWx1ZSA+IDApIHtcbiAgICAgICAgcm9sbGVkW2tleV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEuY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkKSB7XG4gICAgICBpZiAoXG4gICAgICAgIE51bWJlcihkYXRhLmNoYXJhY3RlcmlzdGljcy5wb2ludHMudG90YWwpICE9PVxuICAgICAgICBOdW1iZXIoZGF0YS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLnZhbHVlKVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEucG9pbnRzV2FybmluZyA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2NoYXItcm9sbC5odG1sJyxcbiAgICAgIGRhdGFcbiAgICApXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IENoYXJhY1JvbGxEaWFsb2coXG4gICAgICAgIHtcbiAgICAgICAgICB0aXRsZTogZGF0YS50aXRsZSxcbiAgICAgICAgICBjb250ZW50OiBodG1sLFxuICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgcm9sbGVkLFxuICAgICAgICAgIGJ1dHRvbnM6IHt9LFxuICAgICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoZGF0YS52YWxpZGF0ZSkgcmV0dXJuIHJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgIGVsc2UgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7IGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY2hhci1zZWxlY3QnXSB9XG4gICAgICApXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERpYWxvZywgRm9ybURhdGEsIGdhbWUsIHJlbmRlclRlbXBsYXRlICovXG5leHBvcnQgY2xhc3MgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoXG4gICAgc2tpbGxzLFxuICAgIHNwZWNpYWxpemF0aW9uTmFtZSxcbiAgICBiYXNlVmFsdWUgPSBudWxsLFxuICAgIG5hbWUgPSBudWxsXG4gICkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvc2tpbGwtc3BlYy1zZWxlY3QuaHRtbCcsXG4gICAgICB7XG4gICAgICAgIGhhc1NraWxsczogc2tpbGxzLmxlbmd0aCA+IDAsXG4gICAgICAgIHNraWxscyxcbiAgICAgICAgYmFzZTogYmFzZVZhbHVlLFxuICAgICAgICBuYW1lXG4gICAgICB9XG4gICAgKVxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIGxldCBmb3JtRGF0YSA9IG51bGxcbiAgICAgIGNvbnN0IGRsZyA9IG5ldyBEaWFsb2coe1xuICAgICAgICB0aXRsZTogbmFtZVxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNlbGVjdEJhc2UnLCB7IG5hbWUgfSlcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxTcGVjU2VsZWN0VGl0bGUnLCB7XG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogc3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICAgICAgfSksXG4gICAgICAgIGNvbnRlbnQ6IGh0bWwsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICB2YWxpZGF0ZToge1xuICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWxpZGF0ZScpLFxuICAgICAgICAgICAgY2FsbGJhY2s6IGh0bWwgPT4ge1xuICAgICAgICAgICAgICBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShcbiAgICAgICAgICAgICAgICBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJyNza2lsbC1zZWxlY3QtZm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZm9ybURhdGEpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBkZWZhdWx0OiAndmFsaWRhdGUnLFxuICAgICAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5cbmV4cG9ydCBjbGFzcyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIGV4dGVuZHMgRm9ybUFwcGxpY2F0aW9uIHtcbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2tpbGwtbmFtZS1kaWFsb2cnXSxcbiAgICAgIHRpdGxlOiAnJyxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXNwZWNpYWxpemF0aW9uLXNlbGVjdC5oYnMnLFxuICAgICAgd2lkdGg6IDQwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2VcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHRpdGxlICgpIHtcbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ta2lsbFNwZWNTZWxlY3RUaXRsZScsIHtcbiAgICAgIHNwZWNpYWxpemF0aW9uOiB0aGlzLm9iamVjdC5zcGVjaWFsaXphdGlvbk5hbWVcbiAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCcuc3VibWl0LWJ1dHRvbicpLmNsaWNrKHRoaXMuX29uQ2xpY2tTdWJtaXQuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ1tuYW1lPWV4aXN0aW5nLXNraWxsXScpLmNoYW5nZSh0aGlzLl9vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uU2VsZWN0Q2hhbmdlIChldmVudCkge1xuICAgIHRoaXMub2JqZWN0LnNlbGVjdGVkID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25DbGlja1N1Ym1pdCAoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5vYmplY3Quc2VsZWN0ZWQgPT09ICcnKSB7XG4gICAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJ2Zvcm0nKVxuICAgICAgdGhpcy5vYmplY3QubmFtZSA9IChvYmouZmluZCgnaW5wdXRbbmFtZT1uZXctc2tpbGwtbmFtZV0nKS52YWwoKSA/PyAnJylcbiAgICAgIHRoaXMub2JqZWN0LmJhc2VWYWx1ZSA9IChvYmouZmluZCgnaW5wdXRbbmFtZT1iYXNlLXZhbHVlXScpLnZhbCgpID8/ICcnKVxuICAgIH1cbiAgICBpZiAodGhpcy5vYmplY3Quc2VsZWN0ZWQgPT09ICcnICYmIHRoaXMub2JqZWN0Lm5hbWUgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgdGhpcy5vYmplY3QucmVzb2x2ZSh7XG4gICAgICBzZWxlY3RlZDogdGhpcy5vYmplY3Quc2VsZWN0ZWQsXG4gICAgICBuYW1lOiB0aGlzLm9iamVjdC5uYW1lLFxuICAgICAgYmFzZVZhbHVlOiB0aGlzLm9iamVjdC5iYXNlVmFsdWVcbiAgICB9KVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICh7IHNraWxscyA9IFtdLCBhbGxvd0N1c3RvbSA9IGZhbHNlLCBmaXhlZEJhc2VWYWx1ZSA9IGZhbHNlLCBzcGVjaWFsaXphdGlvbk5hbWUgPSAnJywgbGFiZWwgPSAnJywgYmFzZVZhbHVlID0gbnVsbCB9ID0ge30pIHtcbiAgICBjb25zdCBzZWxlY3QgPSBbXVxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygc2tpbGxzKSB7XG4gICAgICBzZWxlY3QucHVzaCh7XG4gICAgICAgIGlkOiBza2lsbC5pZCxcbiAgICAgICAgbmFtZTogc2tpbGwubmFtZSxcbiAgICAgICAgYmFzZTogc2tpbGwuc3lzdGVtLmJhc2VcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcbiAgICAgIG5ldyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nKHtcbiAgICAgICAgc3BlY2lhbGl6YXRpb25OYW1lLFxuICAgICAgICBhbGxvd0N1c3RvbSxcbiAgICAgICAgZml4ZWRCYXNlVmFsdWUsXG4gICAgICAgIGFsbG93U2VsZWN0OiBza2lsbHMubGVuZ3RoID4gMCxcbiAgICAgICAgc2tpbGxzOiBzZWxlY3QsXG4gICAgICAgIHNlbGVjdGVkOiAnJyxcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIGxhYmVsLFxuICAgICAgICBiYXNlVmFsdWUsXG4gICAgICAgIHJlc29sdmVcbiAgICAgIH0sIHt9KS5yZW5kZXIodHJ1ZSlcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBGb3JtRGF0YSwgZ2FtZSwgcmVuZGVyVGVtcGxhdGUgKi9cbmV4cG9ydCBjbGFzcyBTa2lsbFZhbHVlRGlhbG9nIHtcbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAobmFtZSA9IG51bGwsIGJhc2VWYWx1ZSA9IG51bGwpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUoXG4gICAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLXZhbHVlLmh0bWwnLFxuICAgICAgeyBiYXNlOiBiYXNlVmFsdWUsIG5hbWUgfVxuICAgIClcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBsZXQgZm9ybURhdGEgPSBudWxsXG4gICAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKHtcbiAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2tpbGxWYWx1ZScsIHsgbmFtZSB9KSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NraWxsLXNlbGVjdC1mb3JtJylcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmb3JtRGF0YSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGRlZmF1bHQ6ICd2YWxpZGF0ZScsXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uL2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4vbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi9tZWxlZS10YXJnZXQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TWVsZWVSZXNvbHRpb24ge1xuICBjb25zdHJ1Y3RvciAoXG4gICAgaW5pdGlhdG9yTWVzc2FnZSA9IG51bGwsXG4gICAgdGFyZ2V0TWVzc2FnZSA9IG51bGwsXG4gICAgbWVzc2FnZUlkID0gbnVsbFxuICApIHtcbiAgICB0aGlzLmluaXRpYXRvck1lc3NhZ2UgPSBpbml0aWF0b3JNZXNzYWdlXG4gICAgdGhpcy50YXJnZXRNZXNzYWdlID0gdGFyZ2V0TWVzc2FnZVxuICAgIHRoaXMubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gIH1cblxuICBhc3luYyBwcmVDcmVhdGVNZXNzYWdlICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIC8vIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHthY3RvcjogdGhpcy5hY3Rvcn0pO1xuICAgIC8vIGlmKCB0aGlzLmFjdG9yLmlzVG9rZW4pIHNwZWFrZXIuYWxpYXMgPSB0aGlzLmFjdG9yLnRva2VuLm5hbWU7XG5cbiAgICAvLyBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci51c2VyID8gdGhpcy5hY3Rvci51c2VyIDogZ2FtZS51c2VyO1xuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgLy8gQWRkIGltYWdlIHRvIGNhcmQuXG4gICAgLy8gZGF0YS5mbGFncyA9IHtcbiAgICAvLyAgIGltZzogdGhpcy5hY3Rvci5pc1Rva2VuID8gdGhpcy5hY3Rvci50b2tlbi5kYXRhLmltZzogdGhpcy5hY3Rvci5pbWdcbiAgICAvLyB9O1xuXG4gICAgY29uc3Qgcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggcm9sbE1vZGUgPT09ICdibGluZHJvbGwnICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICAgIHRoaXMubWVzc2FnZUlkID0gY2hhdE1lc3NhZ2UuaWRcbiAgICByZXR1cm4gY2hhdE1lc3NhZ2VcbiAgfVxuXG4gIGdldCBkaXNwbGF5QWN0b3JPbkNhcmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnKVxuICB9XG5cbiAgZ2V0IHRhcmdldCAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0TWVzc2FnZSkge1xuICAgICAgcmV0dXJuIENvQzdNZWxlZVRhcmdldC5nZXRGcm9tTWVzc2FnZUlkKHRoaXMudGFyZ2V0TWVzc2FnZSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB0YXJnZXRUb2tlbiAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0KSByZXR1cm4gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkodGhpcy50YXJnZXQuYWN0b3JLZXkpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBpbml0aWF0b3IgKCkge1xuICAgIGlmICh0aGlzLmluaXRpYXRvck1lc3NhZ2UpIHtcbiAgICAgIHJldHVybiBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZCh0aGlzLmluaXRpYXRvck1lc3NhZ2UpXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgaW5pdGlhdG9yVG9rZW4gKCkge1xuICAgIGlmICh0aGlzLmluaXRpYXRvcikge1xuICAgICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuaW5pdGlhdG9yLmFjdG9yS2V5KVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgcmVzb2x2ZSAoKSB7XG4gICAgaWYgKHRoaXMudGFyZ2V0KSB7XG4gICAgICBzd2l0Y2ggKHRoaXMudGFyZ2V0LmFjdGlvbikge1xuICAgICAgICBjYXNlICdub1Jlc3BvbnNlJzpcbiAgICAgICAgICBpZiAodGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ3JvbGwtbWVsZWUtZGFtYWdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhdG9yTWlzc2VkJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIGNhc2UgJ2RvZGdlJzpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwICYmXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IG51bGxcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID4gdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWxcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0U3RyaW5nID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5XaW5uZXJSb2xsRGFtYWdlJywge1xuICAgICAgICAgICAgICBuYW1lOiB0aGlzLmluaXRpYXRvci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSB0aGlzLmluaXRpYXRvclxuICAgICAgICAgICAgdGhpcy53aW5uZXJJbWcgPSB0aGlzLmluaXRpYXRvci53ZWFwb24uaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLm5hbWVcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uID0gJ3JvbGwtbWVsZWUtZGFtYWdlJ1xuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRvZGdlU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMubG9vc2VyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQuc2tpbGwuaW1nXG4gICAgICAgICAgICB0aGlzLndpbm5lclRpdGxlID0gdGhpcy50YXJnZXQuc2tpbGwubmFtZVxuICAgICAgICAgICAgdGhpcy5hY3Rpb24gPSAnZG9kZ2UnXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwICYmXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSAwXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob1dpbm5lcicpXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IG51bGxcbiAgICAgICAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsID49IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy5pbml0aWF0b3Iud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMudGFyZ2V0XG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdG9yLnJvbGwuc3VjY2Vzc0xldmVsIDw9IHRoaXMudGFyZ2V0LnJvbGwuc3VjY2Vzc0xldmVsXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUT0RPIHZlcmlmaWVyIGxhIGNvbmRpdGlvbiA8PSB2cyA8XG4gICAgICAgICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQud2VhcG9uLmltZ1xuICAgICAgICAgICAgdGhpcy53aW5uZXJUaXRsZSA9IHRoaXMudGFyZ2V0LndlYXBvbi5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSB0cnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWtcblxuICAgICAgICBjYXNlICdtYW5ldXZlcic6XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMCAmJlxuICAgICAgICAgICAgdGhpcy50YXJnZXQucm9sbC5zdWNjZXNzTGV2ZWwgPD0gMFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9XaW5uZXInKVxuICAgICAgICAgICAgdGhpcy53aW5uZXIgPSBudWxsXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lldpbm5lclJvbGxEYW1hZ2UnLCB7XG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMuaW5pdGlhdG9yLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB0aGlzLndpbm5lciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLndpbm5lckltZyA9IHRoaXMuaW5pdGlhdG9yLndlYXBvbi5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLmluaXRpYXRvci53ZWFwb24ubmFtZVxuICAgICAgICAgICAgdGhpcy5sb29zZXIgPSB0aGlzLnRhcmdldFxuICAgICAgICAgICAgdGhpcy5yb2xsRGFtYWdlID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRvci5yb2xsLnN1Y2Nlc3NMZXZlbCA8PSB0aGlzLnRhcmdldC5yb2xsLnN1Y2Nlc3NMZXZlbFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1hbmV1dmVyU3VjY2VzcycsIHtcbiAgICAgICAgICAgICAgbmFtZTogdGhpcy50YXJnZXQubmFtZVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHRoaXMud2lubmVyID0gdGhpcy50YXJnZXRcbiAgICAgICAgICAgIHRoaXMud2lubmVySW1nID0gdGhpcy50YXJnZXQuc2tpbGwuZGF0YS5pbWdcbiAgICAgICAgICAgIHRoaXMud2lubmVyVGl0bGUgPSB0aGlzLnRhcmdldC5za2lsbC5uYW1lXG4gICAgICAgICAgICB0aGlzLmxvb3NlciA9IHRoaXMuaW5pdGlhdG9yXG4gICAgICAgICAgICB0aGlzLnJvbGxEYW1hZ2UgPSBmYWxzZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5pbml0aWF0b3Iucm9sbC5zdWNjZXNzTGV2ZWwgPiAwKSB7XG4gICAgICB0aGlzLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2lubmVyUm9sbERhbWFnZScsIHtcbiAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgfSlcbiAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgIHRoaXMucm9sbERhbWFnZSA9IHRydWVcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZXN1bHRTdHJpbmcgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluaXRpYXRvck1pc3NlZCcsIHtcbiAgICAgICAgbmFtZTogdGhpcy5pbml0aWF0b3IubmFtZVxuICAgICAgfSlcbiAgICAgIHRoaXMud2lubmVyID0gdGhpcy5pbml0aWF0b3JcbiAgICAgIHRoaXMucm9sbERhbWFnZSA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMud2lubmVyKSB7XG4gICAgICBpZiAodGhpcy53aW5uZXIucm9sbC5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lKSB7XG4gICAgICAgIHRoaXMud2lubmVyLnJvbGwuY3JpdGljYWxEYW1hZ2UgPSB0cnVlXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLndpbm5lci5yb2xsLmNyaXRpY2FsRGFtYWdlID0gZmFsc2VcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuICAgIGlmICh0aGlzLm1lc3NhZ2VJZCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgICAgaWYgKHRoaXMud2lubmVyKSB7XG4gICAgICAgIGlmICh0aGlzLndpbm5lci50b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLndpbm5lci50b2tlbi5kb2N1bW1lbnRcbiAgICAgICAgaWYgKHRoaXMud2lubmVyLmFjdG9yKSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMud2lubmVyLmFjdG9yXG4gICAgICB9XG4gICAgICBjb25zdCBzcGVha2VyID0gdGhpcy53aW5uZXIgPyBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKSA6IG51bGxcbiAgICAgIGNvbnN0IHVzZXIgPVxuICAgICAgICB0aGlzLndpbm5lciAmJiB0aGlzLndpbm5lci5hY3Rvci51c2VyXG4gICAgICAgICAgPyB0aGlzLndpbm5lci5hY3Rvci51c2VyXG4gICAgICAgICAgOiBnYW1lLnVzZXJcblxuICAgICAgbGV0IG1zZ1xuICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgIC8vIFRPRE86IElmIGNhcmQgaXNuJ3QgZm91bmQgKGNhcmQgd2FzIGRlbGV0ZWQgYmVmb3JlIGNvbXBsZXRpb24pID9cbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdSZXNvbGl0aW9uIGNhcmQgbWlzc2luZywgd2FzIGRlbGV0ZWQgPycpXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgaWYgKHNwZWFrZXIpIHtcbiAgICAgICAgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoe1xuICAgICAgICAgIC8vIFRPRE86IElmIGNhcmQgaXNuJ3QgZm91bmQgKGNhcmQgd2FzIGRlbGV0ZWQgYmVmb3JlIGNvbXBsZXRpb24pID9cbiAgICAgICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgICAgIHNwZWFrZXIsXG4gICAgICAgICAgY29udGVudDogaHRtbFxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoe1xuICAgICAgICAgIHVzZXI6IHVzZXIuaWQsXG4gICAgICAgICAgY29udGVudDogaHRtbFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgICByZXR1cm4gbXNnXG4gICAgfVxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtcmVzb2x1dGlvbi5odG1sJ1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVJlc29sdGlvbiB9IGZyb20gJy4vbWVsZWUtcmVzb2x1dGlvbi5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4vbWVsZWUtaW5pdGlhdG9yLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN01lbGVlVGFyZ2V0IGV4dGVuZHMgQ2hhdENhcmRBY3RvciB7XG4gIGNvbnN0cnVjdG9yIChhY3RvcktleSwgcGFyZW50TWVzc2FnZUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHN1cGVyKGFjdG9yS2V5LCBmYXN0Rm9yd2FyZClcbiAgICB0aGlzLmFjdG9yS2V5ID0gYWN0b3JLZXlcbiAgICB0aGlzLmluaXRpYXRvcktleSA9IG51bGxcbiAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCA9IHBhcmVudE1lc3NhZ2VJZFxuICAgIHRoaXMuZmFzdEZvcndhcmQgPSBmYXN0Rm9yd2FyZFxuICAgIHRoaXMucmVzb2x2ZWQgPSBmYWxzZVxuXG4gICAgdGhpcy5vdXRudW1iZXJlZCA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG5cbiAgICB0aGlzLm1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnNraWxsSWQgPSBudWxsXG4gICAgdGhpcy5pdGVtSWQgPSBudWxsXG4gICAgdGhpcy5kb2RnaW5nID0gZmFsc2VcbiAgICB0aGlzLm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgIHRoaXMuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICB0aGlzLm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgfVxuXG4gIGdldCBhY3Rpb25TZWxlY3RlZCAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuZG9kZ2luZyB8fFxuICAgICAgdGhpcy5ub3RSZXNwb25kaW5nIHx8XG4gICAgICB0aGlzLmZpZ2h0aW5nQmFjayB8fFxuICAgICAgdGhpcy5tYW5ldXZlcmluZ1xuICAgIClcbiAgfVxuXG4gIGdldCBhY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLmRvZGdpbmcpIHJldHVybiAnZG9kZ2UnXG4gICAgaWYgKHRoaXMubm90UmVzcG9uZGluZykgcmV0dXJuICdub1Jlc3BvbnNlJ1xuICAgIGlmICh0aGlzLmZpZ2h0aW5nQmFjaykgcmV0dXJuICdmaWdodEJhY2snXG4gICAgaWYgKHRoaXMubWFuZXV2ZXJpbmcpIHJldHVybiAnbWFuZXV2ZXInXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCBza2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMuc2tpbGxJZClcbiAgfVxuXG4gIHNldCBpbml0aWF0b3JLZXkgKHgpIHtcbiAgICB0aGlzLl9pbml0aWF0b3JLZXkgPSB4XG4gICAgdGhpcy50YXJnZXRLZXkgPSB4XG4gIH1cblxuICBnZXQgaW5pdGlhdG9yS2V5ICgpIHtcbiAgICBpZiAoIXRoaXMuX2luaXRpYXRvcktleSkge1xuICAgICAgaWYgKCF0aGlzLl9pbml0aWF0b3IgJiYgdGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2luaXRpYXRvcikgdGhpcy5faW5pdGlhdG9yS2V5ID0gdGhpcy5faW5pdGlhdG9yLmFjdG9yS2V5XG4gICAgfVxuICAgIGlmICghdGhpcy5faW5pdGlhdG9yS2V5KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBgTm8gaW5pdGlhdG9yIGZvdW5kIGZvciB0YXJnZXQgOiAke3RoaXMuYWN0b3IubmFtZX1gXG4gICAgICApXG4gICAgICByZXR1cm4gbnVsbFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faW5pdGlhdG9yS2V5XG4gIH1cblxuICBnZXQgaW5pdGlhdG9yICgpIHtcbiAgICBpZiAoIXRoaXMuaW5pdGlhdG9yS2V5KSB7XG4gICAgICBpZiAodGhpcy5wYXJlbnRNZXNzYWdlSWQpIHtcbiAgICAgICAgdGhpcy5faW5pdGlhdG9yID0gQ29DN01lbGVlSW5pdGlhdG9yLmdldEZyb21NZXNzYWdlSWQoXG4gICAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmluaXRpYXRvcktleSA9IHRoaXMuX2luaXRpYXRvci5hY3RvcktleVxuICAgICAgfSBlbHNlIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmluaXRpYXRvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbWVsZWVJbml0aWF0b3IgKCkge1xuICAgIGlmICghdGhpcy5faW5pdGlhdG9yKSB7XG4gICAgICB0aGlzLl9pbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWRcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2luaXRpYXRvclxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0Lmh0bWwnXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQsIG1lc3NhZ2VJZClcbiAgICB0YXJnZXQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG5cbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2FyZFN3aXRjaCAoZXZlbnQsIHB1Ymxpc2hVcGRhdGUgPSB0cnVlKSB7XG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLm1lbGVlLnRhcmdldCcpXG4gICAgY29uc3QgZmxhZyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgY29uc3QgY2FtZWxGbGFnID0gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnKVxuXG4gICAgLy8gdXBkYXRlIG9ubHkgZm9yIGxvY2FsIHBsYXllclxuICAgIGlmICghcHVibGlzaFVwZGF0ZSkge1xuICAgICAgY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSAhPT0gJ3RydWUnXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5zZWxlY3RlZCA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHVwZGF0ZSBjYXJkIGZvciBhbGwgcGxheWVyXG4gICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgIHRhcmdldC50b2dnbGVGbGFnKGZsYWcpXG4gICAgICB0YXJnZXQudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZyA9IGZsYWdOYW1lLmluY2x1ZGVzKCctJylcbiAgICAgID8gY2hhdEhlbHBlci5oeXBoZW5Ub0NhbWVsQ2FzZShmbGFnTmFtZSlcbiAgICAgIDogZmxhZ05hbWVcbiAgICB0aGlzW2ZsYWddID0gIXRoaXNbZmxhZ11cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgdGhpcylcblxuICAgIGNvbnN0IHNwZWFrZXJEYXRhID0ge31cbiAgICBjb25zdCB0b2tlbiA9IGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKHRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRva2VuLmRvY3VtZW50XG4gICAgZWxzZSBzcGVha2VyRGF0YS5hY3RvciA9IHRoaXMuYWN0b3JcblxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4pIHNwZWFrZXIuYWxpYXMgPSB0aGlzLmFjdG9yLnRva2VuLm5hbWVcblxuICAgIGxldCB1c2VyID0gZ2FtZS51c2VyXG4gICAgaWYgKHR5cGVvZiB0aGlzLmFjdG9yLnVzZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsZXQgb3duZXJzID0gW11cbiAgICAgIGNvbnN0IGdtcyA9IGdhbWUudXNlcnMuZmlsdGVyKGEgPT4gYS5pc0dNKS5tYXAoYSA9PiBhLmlkKVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5hY3Rvci5vd25lcnNoaXApKSB7XG4gICAgICAgIGlmICh2ID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKSB7XG4gICAgICAgICAgaWYgKGsgPT09ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgb3duZXJzID0gZ2FtZS51c2Vycy5tYXAoYSA9PiBhLmlkKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9IGVsc2UgaWYgKCFnbXMuaW5jbHVkZXMoaykpIHtcbiAgICAgICAgICAgIG93bmVycy5wdXNoKGspXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgY29udGVudCA9ICcnXG4gICAgICBzd2l0Y2ggKG93bmVycy5sZW5ndGgpIHtcbiAgICAgICAgY2FzZSAwOlxuICAgICAgICAgIC8vIEdNXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGlmICh0eXBlb2YgZ2FtZS51c2Vycy5nZXQob3duZXJzWzBdKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHVzZXIgPSBnYW1lLnVzZXJzLmdldChvd25lcnNbMF0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0U2luZ2xlVXNlckZvclRhcmdldCcpXG4gICAgICAgICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICAgICAgICBmb3IgKGNvbnN0IGsgb2Ygb3duZXJzKSB7XG4gICAgICAgICAgICBjb250ZW50ID1cbiAgICAgICAgICAgICAgY29udGVudCArXG4gICAgICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiJyArXG4gICAgICAgICAgICAgIGsgK1xuICAgICAgICAgICAgICAnXCI+JyArXG4gICAgICAgICAgICAgIGdhbWUudXNlcnMuZ2V0KGspLm5hbWUgK1xuICAgICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb250ZW50ID0gY29udGVudCArICc8L3NlbGVjdD48L2Zvcm0+PC9wPidcbiAgICAgICAgICBhd2FpdCBEaWFsb2cucHJvbXB0KHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3Lk1lc3NhZ2VUaXRsZVNlbGVjdFNpbmdsZVVzZXJGb3JUYXJnZXQnXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIGNhbGxiYWNrOiBodG1sID0+IHtcbiAgICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoXG4gICAgICAgICAgICAgICAgaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcjc2VsZWN0Zm9ybScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKG5hbWUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgICAgICAgdXNlciA9IGdhbWUudXNlcnMuZ2V0KHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5hY3Rvci51c2VyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXNlciA9IHRoaXMuYWN0b3IudXNlclxuICAgIH1cblxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgLy8gaWYgKCB0aGlzLmlzQmxpbmQgKSBjaGF0RGF0YVsnYmxpbmQnXSA9IHRydWU7XG4gICAgY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHRoaXMubWVzc2FnZUlkID0gbWVzc2FnZS5pZFxuICAgIHJldHVybiBtZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuICAgIGlmICghZ2FtZS51c2VyLmlzR00gJiYgbWVzc2FnZS51c2VyLmlkICE9PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYWJsZVRvSW50ZXJhY3RXaXRoQ2hhdENhcmQnKVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgYXN5bmMgZ2V0VXBkYXRlZENoYXRDYXJkICgpIHtcbiAgICByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKS50aGVuKGh0bWwgPT4ge1xuICAgICAgcmV0dXJuIGh0bWxcbiAgICB9KVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwZGF0ZVNlbGVjdGVkIChjYXJkLCBldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdkb2RnZSc6XG4gICAgICAgIHRhcmdldC5kb2RnaW5nID0gdHJ1ZVxuICAgICAgICB0YXJnZXQubm90UmVzcG9uZGluZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5maWdodGluZ0JhY2sgPSBmYWxzZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBudWxsXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ25vUmVzcG9uc2UnOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gdHJ1ZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm1hbmV1dmVyaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBudWxsXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBudWxsXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2ZpZ2h0QmFjayc6XG4gICAgICAgIHRhcmdldC5kb2RnaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0Lm5vdFJlc3BvbmRpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuZmlnaHRpbmdCYWNrID0gdHJ1ZVxuICAgICAgICB0YXJnZXQubWFuZXV2ZXJpbmcgPSBmYWxzZVxuICAgICAgICB0YXJnZXQuc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgIHRhcmdldC5pdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uSWRcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnbWFuZXV2ZXInOlxuICAgICAgICB0YXJnZXQuZG9kZ2luZyA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5ub3RSZXNwb25kaW5nID0gZmFsc2VcbiAgICAgICAgdGFyZ2V0LmZpZ2h0aW5nQmFjayA9IGZhbHNlXG4gICAgICAgIHRhcmdldC5tYW5ldXZlcmluZyA9IHRydWVcbiAgICAgICAgdGFyZ2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICB0YXJnZXQuaXRlbUlkID0gbnVsbFxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIHRhcmdldC51cGRhdGVDaGF0Q2FyZCgpXG5cbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBhc3luYyBwZXJmb3JtU2tpbGxDaGVjayAoc2tpbGxJZCA9IG51bGwsIHB1Ymxpc2ggPSBmYWxzZSkge1xuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG4gICAgLy8gQ29tYmF0IHJvbGwgY2Fubm90IGJlIGJsaW5kIG9yIHVua25vd25cbiAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBjaGVjay5pc1Vua29ud24gPSBmYWxzZVxuICAgIGNoZWNrLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IHRoaXMubWVzc2FnZUlkXG4gICAgY2hlY2sucm9sbFR5cGUgPSAnb3Bwb3NlZCdcbiAgICBjaGVjay5zaWRlID0gJ3RhcmdldCdcbiAgICBjaGVjay5hY3Rpb24gPSB0aGlzLmFjdGlvblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvclxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIGNoZWNrLnNraWxsID0gc2tpbGxJZFxuICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSAwXG5cbiAgICBpZiAodGhpcy5kaXNhZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciAtPSAxXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICBpZiAocHVibGlzaCkgY2hlY2sudG9NZXNzYWdlKClcblxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaE5vUmVwb25zZVJlc3VsdCAoKSB7XG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5yZXNvbHZlZCA9IHRydWVcbiAgICB0aGlzLm5vdFJlc3BvbmRpbmcgPSB0cnVlXG4gICAgY29uc3QgcmVzb2x1dGlvbkNhcmQgPSBuZXcgQ29DN01lbGVlUmVzb2x0aW9uKFxuICAgICAgdGhpcy5wYXJlbnRNZXNzYWdlSWQsXG4gICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgIClcblxuICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG5cbiAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHB1Ymxpc2hDaGVja1Jlc3VsdCAoY2hlY2sgPSBudWxsKSB7XG4gICAgaWYgKCFjaGVjayAmJiAhdGhpcy5jaGVjaykgcmV0dXJuIG51bGxcblxuICAgIGlmIChjaGVjaykgdGhpcy5jaGVjayA9IGNoZWNrXG4gICAgdGhpcy5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNoZWNrKHRoaXMuY2hlY2spXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICB0aGlzLnJvbGwucm9sbEljb25zID0gW11cbiAgICBpZiAodGhpcy5yb2xsLmNyaXRpY2FsKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2dvbGRlbnJvZCdcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCA0OyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnbWVkYWwnKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLmZ1bWJsZSkge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdkYXJrcmVkJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GdW1ibGUnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzcGlkZXInKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yb2xsLnN1Y2Nlc3MpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdzdGFyJylcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdibGFjaydcbiAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NrdWxsJylcbiAgICB9XG5cbiAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICB0aGlzLnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgIHRoaXMubWVzc2FnZUlkXG4gICAgKVxuICAgIGNvbnN0IHJlc29sdXRpb25NZXNzYWdlID0gYXdhaXQgcmVzb2x1dGlvbkNhcmQucHJlQ3JlYXRlTWVzc2FnZSgpXG5cbiAgICB0aGlzLnJlc29sdXRpb25DYXJkID0gcmVzb2x1dGlvbk1lc3NhZ2UuaWRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IGFjdG9yS2V5ID0gY2FyZC5kYXRhc2V0LmFjdG9yS2V5XG4gICAgY29uc3QgcGFyZW50TWVzc2FnZUlkID0gY2FyZC5kYXRhc2V0LnBhcmVudE1lc3NhZ2VJZFxuICAgIGNvbnN0IGZhc3RGb3J3YXJkID0gY2FyZC5kYXRhc2V0LmZhc3RGb3J3YXJkID09PSAndHJ1ZSdcbiAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN01lbGVlVGFyZ2V0KGFjdG9yS2V5LCBwYXJlbnRNZXNzYWdlSWQsIGZhc3RGb3J3YXJkKVxuXG4gICAgdGFyZ2V0LnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQodGFyZ2V0LCBjYXJkKVxuXG4gICAgaWYgKGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKSkge1xuICAgICAgdGFyZ2V0Lm1lc3NhZ2VJZCA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgIH0gZWxzZSB0YXJnZXQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgcmV0dXJuIHRhcmdldFxuICB9XG5cbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgYCR7dGhpcy5hY3Rvci5uYW1lfSBkaWRuJ3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5yb2xsLnZhbHVlID0gbnVsbFxuICAgIHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICB0aGlzLnJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIG9sZENhcmQuZGF0YXNldC5wcm9jZXNzZWQgPSBmYWxzZVxuXG4gICAgY29uc3QgZGljZVJvbGxzID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS1yb2xsJylcbiAgICBkaWNlUm9sbHMuZGF0YXNldC52YWx1ZSA9IG51bGxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5zdWNjZXNzTGV2ZWwgPSBuZXdTdWNjZXNzTGV2ZWxcbiAgICBkaWNlUm9sbHMuZGF0YXNldC5sdWNrU3BlbnQgPSB0cnVlXG5cbiAgICBjb25zdCByZXN1bERldGFpbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yZXN1bHQtZGV0YWlscycpXG4gICAgY29uc3QgZGljZVRvdGFsID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKCcuZGljZS10b3RhbCcpXG4gICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGRpY2VUb3RhbC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChvbGRDYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ2hhdE1lc3NhZ2UsIGdhbWUsIHJlbmRlclRlbXBsYXRlLCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0RpY2UgfSBmcm9tICcuLi9kaWNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBDb0M3Um9sbCwgQ29DN0RhbWFnZSB9IGZyb20gJy4vaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1JhbmdlSW5pdGlhdG9yIHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCwgaXRlbUlkID0gbnVsbCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5mYXN0Rm9yd2FyZCA9IGZhc3RGb3J3YXJkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5jb3ZlciA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgIHRoaXMubXVsdGlwbGVTaG90cyA9IGZhbHNlXG4gICAgdGhpcy5idXJzdCA9IGZhbHNlXG4gICAgdGhpcy5mdWxsQXV0byA9IGZhbHNlXG4gICAgdGhpcy50b2tlbktleSA9IG51bGxcbiAgICB0aGlzLmFpbWVkID0gZmFsc2VcbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gMFxuICAgIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIGZvciAoY29uc3QgdCBvZiBbLi4uZ2FtZS51c2VyLnRhcmdldHNdKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KGAke3Quc2NlbmUuaWR9LiR7dC5pZH1gKSAvL1xuICAgICAgdGFyZ2V0LnRva2VuID0gdFxuICAgICAgdGhpcy5fdGFyZ2V0cy5wdXNoKHRhcmdldClcbiAgICB9XG4gICAgaWYgKHRoaXMuX3RhcmdldHMubGVuZ3RoKSB0aGlzLl90YXJnZXRzWzBdLmFjdGl2ZSA9IHRydWVcbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IG5ldyBDb0M3UmFuZ2VUYXJnZXQoKVxuICAgICAgdGFyZ2V0LmFjdGl2ZSA9IHRydWVcbiAgICAgIHRoaXMuX3RhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB0aGlzLnRva2VuID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKHRoaXMudG9rZW4pIHRoaXMudG9rZW5LZXkgPSBhY3Rvci50b2tlbktleVxuICAgICAgaWYgKGl0ZW1JZCkge1xuICAgICAgICBjb25zdCB3ZWFwb24gPSBhY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgICBpZiAod2VhcG9uKSB7XG4gICAgICAgICAgaWYgKHRoaXMud2VhcG9uLnNpbmdsZVNob3QpIHRoaXMuc2luZ2xlU2hvdCA9IHRydWVcbiAgICAgICAgICBlbHNlIGlmICh0aGlzLndlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hdXRvKSB0aGlzLmZ1bGxBdXRvID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnRva2VuS2V5KSB7XG4gICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5fdGFyZ2V0cykge1xuICAgICAgICBpZiAodC50b2tlbiAmJiB0aGlzLnRva2VuKSB7XG4gICAgICAgICAgdC5kaXN0YW5jZSA9IGNoYXRIZWxwZXIuZ2V0RGlzdGFuY2UodC50b2tlbiwgdGhpcy50b2tlbilcbiAgICAgICAgICB0LnJvdW5kZWREaXN0YW5jZSA9IE1hdGgucm91bmQodC5kaXN0YW5jZS52YWx1ZSAqIDEwMCkgLyAxMDBcbiAgICAgICAgICB0LmRpc3RhbmNlVW5pdCA9IHQuZGlzdGFuY2UudW5pdFxuICAgICAgICAgIGNvbnN0IGRpc3RJbllkID1cbiAgICAgICAgICAgIE1hdGgucm91bmQoY2hhdEhlbHBlci50b1lhcmRzKHQuZGlzdGFuY2UpICogMTAwKSAvIDEwMFxuICAgICAgICAgIC8vIGlmKCBkaXN0SW5ZZCl7XG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgICAgICAgIHQucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICAgICAgICAgIGNvbnN0IHBiUmFuZ2VJbllkID1cbiAgICAgICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSAvIDE1XG4gICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gcGJSYW5nZUluWWQpIHQucG9pbnRCbGFua1JhbmdlID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodGhpcy53ZWFwb24pIHtcbiAgICAgICAgICAgIGlmICh0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHtcbiAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSBmYWxzZVxuICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgICAgICAgICAgIHQuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgdC5vdXRPZlJhbmdlID0gZmFsc2VcbiAgICAgICAgICAgICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlzdEluWWQgPD0gdGhpcy53ZWFwb24uYmFzZVJhbmdlKSB0LmJhc2VSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmJhc2VSYW5nZSAmJlxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPD0gdGhpcy53ZWFwb24ubG9uZ1JhbmdlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5sb25nUmFuZ2UgJiZcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkIDw9IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZVxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgdC5leHRyZW1lUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA+IHRoaXMud2VhcG9uLmV4dHJlbWVSYW5nZSkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UpIHQuYmFzZVJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmxvbmdSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGlzdEluWWQgPiB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiAyICYmXG4gICAgICAgICAgICAgICAgICBkaXN0SW5ZZCA8PSB0aGlzLndlYXBvbi5iYXNlUmFuZ2UgKiA0XG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICB0LmV4dHJlbWVSYW5nZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRpc3RJbllkID4gdGhpcy53ZWFwb24uYmFzZVJhbmdlICogNCkgdC5vdXRPZlJhbmdlID0gdHJ1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAhKHQuYmFzZVJhbmdlIHx8IHQubG9uZ1JhbmdlIHx8IHQuZXh0cmVtZVJhbmdlIHx8IHQub3V0T2ZSYW5nZSlcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gfVxuICAgICAgICB9IGVsc2UgdC5iYXNlUmFuZ2UgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXQgYWN0b3JJbWcgKCkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gICAgaWYgKGltZykgcmV0dXJuIGltZ1xuICAgIHJldHVybiAnLi4vaWNvbnMvc3ZnL215c3RlcnktbWFuLWJsYWNrLnN2ZydcbiAgfVxuXG4gIGdldCBhY3RvciAoKSB7XG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICB9XG5cbiAgZ2V0IGl0ZW0gKCkge1xuICAgIHJldHVybiB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgfVxuXG4gIGdldCB3ZWFwb24gKCkge1xuICAgIHJldHVybiB0aGlzLml0ZW1cbiAgfVxuXG4gIGdldCB0YXJnZXRzICgpIHtcbiAgICBpZiAoIXRoaXMuX3RhcmdldHMpIHRoaXMuX3RhcmdldHMgPSBbXVxuICAgIHJldHVybiB0aGlzLl90YXJnZXRzXG4gIH1cblxuICBnZXQgdGFyZ2V0ICgpIHtcbiAgICBpZiAodGhpcy50YXJnZXRzICYmIHRoaXMudGFyZ2V0cy5sZW5ndGgpIHJldHVybiB0aGlzLnRhcmdldHMucG9wKClcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNraWxscyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuZ2V0V2VhcG9uU2tpbGxzKHRoaXMuaXRlbUlkKVxuICB9XG5cbiAgZ2V0IG1haW5XZWFwb25Ta2lsbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYWN0b3IuaXRlbXMuZ2V0KHRoaXMud2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICB9XG5cbiAgZ2V0IGF1dG9XZWFwb25Ta2lsbCAoKSB7XG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5hY3Rvci5pdGVtcy5nZXQodGhpcy53ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICB9XG5cbiAgZ2V0IGF1dG9GaXJlICgpIHtcbiAgICByZXR1cm4gdGhpcy5idXJzdCB8fCB0aGlzLmZ1bGxBdXRvXG4gIH1cblxuICBnZXQgbXVsdGlUYXJnZXQgKCkge1xuICAgIHJldHVybiB0aGlzLmZ1bGxBdXRvIHx8IHRoaXMubXVsdGlwbGVTaG90c1xuICB9XG5cbiAgZ2V0IGFpbWluZyAoKSB7XG4gICAgaWYgKHVuZGVmaW5lZCA9PT0gdGhpcy5fYWltaW5nKSB7XG4gICAgICB0aGlzLl9haW1pbmcgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnYWltaW5nJylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FpbWluZ1xuICB9XG5cbiAgZ2V0IGFjdGl2ZVRhcmdldCAoKSB7XG4gICAgaWYgKCF0aGlzLl90YXJnZXRzLmxlbmd0aCkgcmV0dXJuIG51bGxcbiAgICByZXR1cm4gdGhpcy5fdGFyZ2V0cy5maW5kKHQgPT4gdC5hY3RpdmUpXG4gIH1cblxuICBnZXQgc2hvdHMgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX3Nob3RzKSB0aGlzLl9zaG90cyA9IFtdXG4gICAgcmV0dXJuIHRoaXMuX3Nob3RzXG4gIH1cblxuICBnZXQgY3VycmVudFNob3RSYW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5zaG90cy5sZW5ndGggKyAxXG4gIH1cblxuICBnZXQgYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLnNob3REaWZmaWN1bHR5KClcbiAgfVxuXG4gIHNldCBhaW1pbmcgKGIpIHtcbiAgICB0aGlzLl9haW1pbmcgPSBiXG4gIH1cblxuICBnZXQgZGlkQW55U2hvdEhpdCAoKSB7XG4gICAgbGV0IGFueUhpdCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCByIG9mIHRoaXMucm9sbHMpIHtcbiAgICAgIGFueUhpdCA9IGFueUhpdCB8fCByLmlzU3VjY2Vzc1xuICAgIH1cbiAgICByZXR1cm4gYW55SGl0XG4gIH1cblxuICBnZXQgc3VjY2Vzc2Z1bEhpdHMgKCkge1xuICAgIGNvbnN0IGhpdHMgPSBbXVxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnJvbGxzLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgaWYgKHRoaXMucm9sbHNbaW5kZXhdLmlzU3VjY2Vzcykge1xuICAgICAgICBjb25zdCBoaXQgPSB7XG4gICAgICAgICAgcm9sbDogdGhpcy5yb2xsc1tpbmRleF0sXG4gICAgICAgICAgc2hvdDogdGhpcy5zaG90c1tpbmRleF1cbiAgICAgICAgfVxuICAgICAgICBoaXRzLnB1c2goaGl0KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaGl0cy5sZW5ndGggIT09IDApIHJldHVybiBoaXRzXG4gICAgZWxzZSByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IHNob3RGaXJlZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hvdHMgPyB0aGlzLnNob3RzLmxlbmd0aCA6IDBcbiAgfVxuXG4gIGdldCB0b3RhbEFtbW8gKCkge1xuICAgIHJldHVybiB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KClcbiAgfVxuXG4gIGdldCBtYXhTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuZnVsbEF1dG8pIHJldHVybiAn4oieJ1xuICAgIC8vIHJldHVybiB0aGlzLndlYXBvbi5kYXRhLmRhdGEudXNlc1BlclJvdW5kLm1heDtcblxuICAgIHJldHVybiB0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLm1heFxuICAgICAgPyBwYXJzZUludCh0aGlzLndlYXBvbi5zeXN0ZW0udXNlc1BlclJvdW5kLm1heClcbiAgICAgIDogMVxuICB9XG5cbiAgZ2V0IGlnbm9yZUFtbW8gKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRBbW1vJylcbiAgfVxuXG4gIGdldCBpZ25vcmVVc2VzUGVyUm91bmQgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNyZWdhcmRVc2VQZXJSb3VuZCcpXG4gIH1cblxuICBnZXQgb3V0T2ZBbW1vICgpIHtcbiAgICBpZiAodGhpcy5pZ25vcmVBbW1vKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy50b3RhbEJ1bGxldHNGaXJlZCA+PSB0aGlzLndlYXBvbi5nZXRCdWxsZXRMZWZ0KCkpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgb3V0T2ZTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMuaWdub3JlVXNlc1BlclJvdW5kKSByZXR1cm4gZmFsc2VcbiAgICBpZiAodGhpcy5zaG90cykgcmV0dXJuIHRoaXMuc2hvdHMubGVuZ3RoID49IHRoaXMubWF4U2hvdHNcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCB2b2xsZXlTaXplICgpIHtcbiAgICBpZiAoIXRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLmF1dG8pIHJldHVybiAxXG4gICAgaWYgKHRoaXMuX3ZvbGxleVNpemUpIHJldHVybiB0aGlzLl92b2xsZXlTaXplXG4gICAgY29uc3Qgc2l6ZSA9IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICByZXR1cm4gc2l6ZSA8IDMgPyAzIDogc2l6ZVxuICB9XG5cbiAgc2V0IHZvbGxleVNpemUgKHgpIHtcbiAgICBpZiAoeCA+PSBNYXRoLmZsb29yKHRoaXMuYXV0b1dlYXBvblNraWxsLnZhbHVlIC8gMTApKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gTWF0aC5mbG9vcih0aGlzLmF1dG9XZWFwb25Ta2lsbC52YWx1ZSAvIDEwKVxuICAgIH0gZWxzZSBpZiAoeCA8PSAzKSB7XG4gICAgICB0aGlzLl92b2xsZXlTaXplID0gM1xuICAgIH1cbiAgICB0aGlzLl92b2xsZXlTaXplID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBpc1ZvbGxleU1pblNpemUgKCkge1xuICAgIGlmICh0aGlzLnZvbGxleVNpemUgPT09IDMpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaXNWb2xsZXlNYXhTaXplICgpIHtcbiAgICBjb25zdCBtYXhTaXplID1cbiAgICAgIE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMCkgPCAzXG4gICAgICAgID8gM1xuICAgICAgICA6IE1hdGguZmxvb3IodGhpcy5hdXRvV2VhcG9uU2tpbGwudmFsdWUgLyAxMClcbiAgICBpZiAobWF4U2l6ZSA9PT0gdGhpcy52b2xsZXlTaXplKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0VGFyZ2V0RnJvbUtleSAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuX3RhcmdldHMuZmluZCh0ID0+IGtleSA9PT0gdC5hY3RvcktleSlcbiAgfVxuXG4gIGNhbGNUYXJnZXRzRGlmZmljdWx0eSAoKSB7XG4gICAgZm9yIChjb25zdCB0IG9mIHRoaXMudGFyZ2V0cykge1xuICAgICAgdC5zaG90RGlmZmljdWx0eSA9IHRoaXMuc2hvdERpZmZpY3VsdHkodClcbiAgICB9XG4gIH1cblxuICBzaG90RGlmZmljdWx0eSAodCA9IG51bGwpIHtcbiAgICBjb25zdCB0YXJnZXQgPSB0IHx8IHRoaXMuYWN0aXZlVGFyZ2V0XG4gICAgbGV0IGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgaWYgKHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4pIHtcbiAgICAgIGlmICh0LmxvbmdSYW5nZSkgZGFtYWdlID0gdGhpcy53ZWFwb24uc3lzdGVtLnJhbmdlLmxvbmcuZGFtYWdlXG4gICAgICBpZiAodC5leHRyZW1lUmFuZ2UpIGRhbWFnZSA9IHRoaXMud2VhcG9uLnN5c3RlbS5yYW5nZS5leHRyZW1lLmRhbWFnZVxuICAgIH1cbiAgICBsZXQgbW9kaWZpZXIgPSB0YXJnZXQubW9kaWZpZXJcbiAgICBsZXQgZGlmZmljdWx0eVxuICAgIHRoaXMud2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW5cbiAgICAgID8gKGRpZmZpY3VsdHkgPSAxKVxuICAgICAgOiAoZGlmZmljdWx0eSA9IHRhcmdldC5kaWZmaWN1bHR5KVxuICAgIGxldCBkaWZmaWN1bHR5TmFtZSA9ICcnXG4gICAgaWYgKHRoaXMuYWltaW5nICYmIHRoaXMuY3VycmVudFNob3RSYW5rID09PSAxKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuYWR2YW50YWdlKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuZGlzYWR2YW50YWdlKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMucmVsb2FkKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMubXVsdGlwbGVTaG90cyAmJiAhdGhpcy5mdWxsQXV0bykgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSBtb2RpZmllciAtPSB0aGlzLmN1cnJlbnRTaG90UmFuayAtIDFcbiAgICBpZiAobW9kaWZpZXIgPCAtMikge1xuICAgICAgY29uc3QgZXhjZXNzID0gTWF0aC5hYnMobW9kaWZpZXIgKyAyKVxuICAgICAgZGlmZmljdWx0eSArPSBleGNlc3NcbiAgICAgIGlmIChkaWZmaWN1bHR5ID4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCkge1xuICAgICAgICBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5pbXBvc3NpYmxlXG4gICAgICB9XG4gICAgICBtb2RpZmllciA9IC0yXG4gICAgfVxuXG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnUmVndWxhcidcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCA9PT0gZGlmZmljdWx0eSkgZGlmZmljdWx0eU5hbWUgPSAnSGFyZCdcbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lID09PSBkaWZmaWN1bHR5KSB7XG4gICAgICBkaWZmaWN1bHR5TmFtZSA9ICdFeHRyZW1lJ1xuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCA9PT0gZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eU5hbWUgPSAnQ3JpdGljYWwnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGUgPT09IGRpZmZpY3VsdHkpIHtcbiAgICAgIGRpZmZpY3VsdHlOYW1lID0gJ0ltcG9zc2libGUnXG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGxldmVsOiBkaWZmaWN1bHR5LFxuICAgICAgbmFtZTogZGlmZmljdWx0eU5hbWUsXG4gICAgICBtb2RpZmllcixcbiAgICAgIGRhbWFnZSxcbiAgICAgIGltcG9zc2libGU6IGRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG9vdCBhdCB0aGUgYWN0aXZlIHRhcmdldC4gQWRkIGl0IHRvIHRoZSBsaXN0IG9mIHNob3RzLlxuICAgKiBUT0RPIDogcmVjYWxjdWxlciBsYSBkaWZmaWN1bHTDqSBkZSB0b3VzIGxlcyBzaG90cyAhLlxuICAgKi9cbiAgYWRkU2hvdEF0Q3VycmVudFRhcmdldCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICB0YXJnZXQ6IHRoaXMuYWN0aXZlVGFyZ2V0LFxuICAgICAgZXh0cmVtZVJhbmdlOiB0aGlzLmFjdGl2ZVRhcmdldC5leHRyZW1lUmFuZ2UsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICBhY3Rvck5hbWU6IHRoaXMuYWN0aXZlVGFyZ2V0Lm5hbWUsXG4gICAgICBkaWZmaWN1bHR5OiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5sZXZlbCxcbiAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgIGRhbWFnZTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkuZGFtYWdlLFxuICAgICAgYnVsbGV0c1Nob3Q6IDEsXG4gICAgICB0cmFuc2l0QnVsbGV0czogMCxcbiAgICAgIGJ1bGxldHNTaG90VHJhbnNpdDogMSxcbiAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgfVxuXG4gICAgbGV0IGJ1bGxldExlZnQgPSB0aGlzLnRvdGFsQW1tbyAtIHRoaXMudG90YWxCdWxsZXRzRmlyZWRcblxuICAgIGlmICh0aGlzLmZ1bGxBdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdXJyZW50U2hvdFJhbmsgPiAxKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzU2hvdCA9IHRoaXMuc2hvdHNbdGhpcy5jdXJyZW50U2hvdFJhbmsgLSAyXVxuICAgICAgICBpZiAocHJldmlvdXNTaG90LmFjdG9yS2V5ICE9PSB0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSkge1xuICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gY2hhdEhlbHBlci5nZXREaXN0YW5jZShcbiAgICAgICAgICAgIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHByZXZpb3VzU2hvdC5hY3RvcktleSksXG4gICAgICAgICAgICBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdGl2ZVRhcmdldC5hY3RvcktleSlcbiAgICAgICAgICApXG4gICAgICAgICAgc2hvdC50cmFuc2l0QnVsbGV0cyA9IE1hdGguZmxvb3IoY2hhdEhlbHBlci50b1lhcmRzKGRpc3RhbmNlKSlcbiAgICAgICAgICBpZiAoc2hvdC50cmFuc2l0QnVsbGV0cyA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgICAgIHNob3QudHJhbnNpdEJ1bGxldHMgPSBidWxsZXRMZWZ0XG4gICAgICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID1cbiAgICAgICAgICAgIHBhcnNlSW50KHRoaXMudG90YWxCdWxsZXRzRmlyZWQpICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgICAgICAgIHNob3QudHJhbnNpdCA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHRoaXMudm9sbGV5U2l6ZVxuICAgICAgaWYgKHNob3QuYnVsbGV0c1Nob3QgPD0gMykgc2hvdC5idWxsZXRzU2hvdCA9IDNcbiAgICAgIGlmIChzaG90LmJ1bGxldHNTaG90ID49IGJ1bGxldExlZnQgJiYgIXRoaXMuaWdub3JlQW1tbykge1xuICAgICAgICBzaG90LmJ1bGxldHNTaG90ID0gYnVsbGV0TGVmdFxuICAgICAgICBidWxsZXRMZWZ0ID0gMFxuICAgICAgfVxuICAgICAgLy8gYnVsbGV0c1Nob3RUcmFuc2l0IGlzIGZvciBsb2NhbGl6aW5nIENvQzcuU2hvdEJ1bGxldHMgdXNpbmcgcGFyYW1ldGVycywgbG9jYWxpemUgZG9lcyBub3QgYWNjZXB0IGFkZGluZyBhIHBhcmFtZXRlciBhcyBhIHN1bSBvZiBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0cywgc28gSSBjcmVhdGUgYSBuZXcgdmFsdWUgaW4gYWR2YW5jZSB0byB1c2UgaW5zdGVhZFxuICAgICAgc2hvdC5idWxsZXRzU2hvdFRyYW5zaXQgPSBzaG90LmJ1bGxldHNTaG90ICsgc2hvdC50cmFuc2l0QnVsbGV0c1xuICAgIH1cbiAgICBpZiAodGhpcy5idXJzdCkge1xuICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IHBhcnNlSW50KHRoaXMud2VhcG9uLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoc2hvdC5idWxsZXRzU2hvdCA+PSBidWxsZXRMZWZ0ICYmICF0aGlzLmlnbm9yZUFtbW8pIHtcbiAgICAgICAgc2hvdC5idWxsZXRzU2hvdCA9IGJ1bGxldExlZnRcbiAgICAgICAgYnVsbGV0TGVmdCA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkID0gcGFyc2VJbnQodGhpcy50b3RhbEJ1bGxldHNGaXJlZCkgKyBzaG90LmJ1bGxldHNTaG90XG5cbiAgICBpZiAodGhpcy5haW1pbmcpIHtcbiAgICAgIHRoaXMuYWltaW5nID0gZmFsc2VcbiAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgfVxuXG4gICAgdGhpcy5zaG90cy5wdXNoKHNob3QpXG4gIH1cblxuICBnZXQgdGVtcGxhdGUgKCkge1xuICAgIHJldHVybiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L2NvbWJhdC9yYW5nZS1pbml0aWF0b3IuaHRtbCdcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICB0aGlzLmNhbGNUYXJnZXRzRGlmZmljdWx0eSgpXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRoaXMudGVtcGxhdGUsIHRoaXMpXG5cbiAgICAvLyBjb25zdCBlbGVtZW50ID0gJChodG1sKVswXTtcbiAgICAvLyBjb25zdCB0YXJnZXRFbGVtZW50ID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcudGFyZ2V0VGVzdCcpO1xuICAgIC8vIHRoaXMudGFyZ2V0LmF0dGFjaFRvRWxlbWVudCh0YXJnZXRFbGVtZW50KTtcbiAgICBjb25zdCBzcGVha2VyRGF0YSA9IHt9XG4gICAgY29uc3QgdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGlmICh0b2tlbikgc3BlYWtlckRhdGEudG9rZW4gPSB0b2tlbi5kb2N1bWVudFxuICAgIGVsc2Ugc3BlYWtlckRhdGEuYWN0b3IgPSB0aGlzLmFjdG9yXG5cbiAgICBjb25zdCBzcGVha2VyID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcihzcGVha2VyRGF0YSlcbiAgICAvLyBpZiggdGhpcy5hY3Rvci5pc1Rva2VuKSBzcGVha2VyLmFsaWFzID0gdGhpcy5hY3Rvci50b2tlbi5uYW1lO1xuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogdXNlci5pZCxcbiAgICAgIHNwZWFrZXIsXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfVxuXG4gICAgY29uc3Qgcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIC8vIGlmICggcm9sbE1vZGUgPT09ICdibGluZHJvbGwnICkgY2hhdERhdGFbJ2JsaW5kJ10gPSB0cnVlO1xuICAgIGNoYXREYXRhLmJsaW5kID0gZmFsc2VcblxuICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuXG4gICAgcmV0dXJuIGNoYXRNZXNzYWdlXG4gIH1cblxuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoKSB7XG4gICAgdGhpcy5jYWxjVGFyZ2V0c0RpZmZpY3VsdHkoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIGlmIChcbiAgICAgIGZsYWcgPT09ICdzaW5nbGVTaG90JyB8fFxuICAgICAgZmxhZyA9PT0gJ211bHRpcGxlU2hvdHMnIHx8XG4gICAgICBmbGFnID09PSAnZnVsbEF1dG8nXG4gICAgKSB7XG4gICAgICB0aGlzLnNpbmdsZVNob3QgPSBmYWxzZVxuICAgICAgdGhpcy5tdWx0aXBsZVNob3RzID0gZmFsc2VcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKGZsYWcgPT09ICdmdWxsQXV0bycpIHRoaXMuYnVyc3QgPSBmYWxzZVxuICAgICAgdGhpc1tmbGFnXSA9IHRydWVcbiAgICB9IGVsc2UgaWYgKGZsYWcgPT09ICdidXJzdCcpIHtcbiAgICAgIHRoaXMuZnVsbEF1dG8gPSBmYWxzZVxuICAgICAgaWYgKCF0aGlzLnNpbmdsZVNob3QgJiYgIXRoaXMubXVsdGlwbGVTaG90cykgdGhpcy5zaW5nbGVTaG90ID0gdHJ1ZVxuICAgICAgdGhpcy5idXJzdCA9ICF0aGlzLmJ1cnN0XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHJlc29sdmVDYXJkICgpIHtcbiAgICB0aGlzLnJvbGxzID0gW11cbiAgICBpZiAodGhpcy5tdWx0aVRhcmdldCkge1xuICAgICAgbGV0IHdlYXBvbk1hbGZ1bmN0aW9uID0gZmFsc2VcbiAgICAgIGxldCBpbmRleCA9IDBcbiAgICAgIHdoaWxlICghd2VhcG9uTWFsZnVuY3Rpb24gJiYgdGhpcy5zaG90cy5sZW5ndGggPiBpbmRleCkge1xuICAgICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KHRoaXMuc2hvdHNbaW5kZXhdKVxuICAgICAgICBpZiAocm9sbC5kaWNlPy5yb2xsKSB7XG4gICAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgdGhpcy53ZWFwb24uc2hvb3RCdWxsZXRzKFxuICAgICAgICAgIHBhcnNlSW50KHRoaXMuc2hvdHNbaW5kZXhdLmJ1bGxldHNTaG90KSArXG4gICAgICAgICAgICBwYXJzZUludCh0aGlzLnNob3RzW2luZGV4XS50cmFuc2l0QnVsbGV0cylcbiAgICAgICAgKVxuICAgICAgICBpZiAocm9sbC5oYXNNYWxmdW5jdGlvbikge1xuICAgICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgICAgICB3ZWFwb25NYWxmdW5jdGlvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpbmRleCsrXG4gICAgICAgIHRoaXMucm9sbHMucHVzaChyb2xsKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByb2xsID0gYXdhaXQgdGhpcy5zaG9vdEF0VGFyZ2V0KClcbiAgICAgIGlmIChyb2xsLmRpY2U/LnJvbGwpIHtcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2Qocm9sbC5kaWNlLnJvbGwpXG4gICAgICB9XG4gICAgICBsZXQgYnVsbGV0RmlyZWQgPSB0aGlzLmJ1cnN0XG4gICAgICAgID8gcGFyc2VJbnQodGhpcy53ZWFwb24uc3lzdGVtLnVzZXNQZXJSb3VuZC5idXJzdClcbiAgICAgICAgOiAxXG4gICAgICBpZiAoYnVsbGV0RmlyZWQgPj0gdGhpcy50b3RhbEFtbW8pIGJ1bGxldEZpcmVkID0gdGhpcy50b3RhbEFtbW9cbiAgICAgIGNvbnN0IHNob3QgPSB7XG4gICAgICAgIHRhcmdldDogdGhpcy5hY3RpdmVUYXJnZXQsXG4gICAgICAgIGV4dHJlbWVSYW5nZTogdGhpcy5hY3RpdmVUYXJnZXQuZXh0cmVtZVJhbmdlLFxuICAgICAgICBhY3RvcktleTogdGhpcy5hY3RpdmVUYXJnZXQuYWN0b3JLZXksXG4gICAgICAgIGFjdG9yTmFtZTogdGhpcy5hY3RpdmVUYXJnZXQubmFtZSxcbiAgICAgICAgZGlmZmljdWx0eTogdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWwsXG4gICAgICAgIG1vZGlmaWVyOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5tb2RpZmllcixcbiAgICAgICAgZGFtYWdlOiB0aGlzLmFjdGl2ZVRhcmdldC5zaG90RGlmZmljdWx0eS5kYW1hZ2UsXG4gICAgICAgIGJ1bGxldHNTaG90OiBidWxsZXRGaXJlZCxcbiAgICAgICAgdHJhbnNpdEJ1bGxldHM6IDAsXG4gICAgICAgIHRyYW5zaXQ6IGZhbHNlXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLndlYXBvbi5zaG9vdEJ1bGxldHMoYnVsbGV0RmlyZWQpXG5cbiAgICAgIGlmIChyb2xsLmhhc01hbGZ1bmN0aW9uKSB7XG4gICAgICAgIHJvbGwuaXNTdWNjZXNzID0gZmFsc2VcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvdHMucHVzaChzaG90KVxuICAgICAgdGhpcy5yb2xscy5wdXNoKHJvbGwpXG4gICAgfVxuICAgIHRoaXMucmVzb2x2ZWQgPSB0cnVlXG4gICAgdGhpcy5yb2xsZWQgPSB0cnVlXG5cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIHNob290QXRUYXJnZXQgKHNob3QgPSBudWxsKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gc2hvdFxuICAgICAgPyB0aGlzLmdldFRhcmdldEZyb21LZXkoc2hvdC5hY3RvcktleSlcbiAgICAgIDogdGhpcy5hY3RpdmVUYXJnZXRcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIGNoZWNrLmFjdG9yS2V5ID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy5hY3RvcktleVxuICAgIGNoZWNrLml0ZW0gPSB0aGlzLml0ZW1JZFxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBpZiAodGhpcy5hdXRvRmlyZSkgY2hlY2suc2tpbGwgPSB0aGlzLmF1dG9XZWFwb25Ta2lsbFxuICAgIGVsc2UgY2hlY2suc2tpbGwgPSB0aGlzLm1haW5XZWFwb25Ta2lsbFxuICAgIGlmICh0aGlzLm11bHRpVGFyZ2V0KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gc2hvdC5kaWZmaWN1bHR5XG4gICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBzaG90Lm1vZGlmaWVyXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY2FsY1RhcmdldHNEaWZmaWN1bHR5KClcbiAgICAgIHRoaXMudG90YWxCdWxsZXRzRmlyZWQgPSBwYXJzZUludCh0aGlzLnRvdGFsQnVsbGV0c0ZpcmVkKSArIDFcbiAgICAgIGlmICh0aGlzLmFpbWluZykge1xuICAgICAgICB0aGlzLmFpbWluZyA9IGZhbHNlXG4gICAgICAgIHRoaXMuYWltZWQgPSB0cnVlXG4gICAgICB9XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gdGhpcy5hY3RpdmVUYXJnZXQuc2hvdERpZmZpY3VsdHkubGV2ZWxcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IHRoaXMuYWN0aXZlVGFyZ2V0LnNob3REaWZmaWN1bHR5Lm1vZGlmaWVyXG4gICAgfVxuXG4gICAgY2hlY2suZGV0YWlscyA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5UYXJnZXQnKX06ICR7dGFyZ2V0Lm5hbWV9YFxuICAgIGNoZWNrLnRhcmdldEtleSA9IHRhcmdldC5hY3RvcktleVxuXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbU1lc3NhZ2VJZCAobWVzc2FnZUlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICBpZiAoIW1lc3NhZ2UpIHJldHVybiBudWxsXG4gICAgY29uc3QgY2FyZCA9ICQobWVzc2FnZS5jb250ZW50KVswXVxuXG4gICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQsIG1lc3NhZ2VJZClcbiAgICBpbml0aWF0b3IubWVzc2FnZUlkID0gbWVzc2FnZUlkXG5cbiAgICByZXR1cm4gaW5pdGlhdG9yXG4gIH1cblxuICBjaGFuZ2VWb2xsZXlTaXplICh4KSB7XG4gICAgdGhpcy52b2xsZXlTaXplID0gdGhpcy52b2xsZXlTaXplICsgeFxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgc3RhdGljIHVwZGF0ZUNhcmRTd2l0Y2ggKGV2ZW50LCBwdWJsaXNoVXBkYXRlID0gdHJ1ZSkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5yYW5nZS5pbml0aWF0b3InKVxuICAgIGNvbnN0IGZsYWcgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgIGNvbnN0IGNhbWVsRmxhZyA9IGNoYXRIZWxwZXIuaHlwaGVuVG9DYW1lbENhc2UoZmxhZylcblxuICAgIC8vIHVwZGF0ZSBvbmx5IGZvciBsb2NhbCBwbGF5ZXJcbiAgICBpZiAoIXB1Ymxpc2hVcGRhdGUpIHtcbiAgICAgIGNhcmQuZGF0YXNldFtjYW1lbEZsYWddID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ10gIT09ICd0cnVlJ1xuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdzd2l0Y2hlZC1vbicpXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2VsZWN0ZWQgPSBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgY2FyZCBmb3IgYWxsIHBsYXllclxuICAgICAgY29uc3QgaW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldC1mbGFnJykpIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcudGFyZ2V0JylcbiAgICAgICAgY29uc3Qga2V5ID0gcGFyc2VJbnQodGFyZ2V0LmRhdGFzZXQudGFyZ2V0S2V5KVxuICAgICAgICBpbml0aWF0b3IudGFyZ2V0c1trZXldLnRvZ2dsZUZsYWcoY2FtZWxGbGFnKVxuICAgICAgfSBlbHNlIGluaXRpYXRvci50b2dnbGVGbGFnKGNhbWVsRmxhZylcbiAgICAgIGluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgcGFzc1JvbGwgKHJvbGxJbmRleCkge1xuICAgIGNvbnN0IHJvbGwgPSB0aGlzLnJvbGxzW3JvbGxJbmRleF1cbiAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQocm9sbC5sdWNrTmVlZGVkKVxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGAke3RoaXMuYWN0b3IubmFtZX0gZG9lcyBub3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IHJvbGwuZGlmZmljdWx0eVxuICAgIHJvbGwuaXNTdWNjZXNzID0gdHJ1ZVxuICAgIHJvbGwubHVja1NwZW50ID0gdHJ1ZVxuICAgIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgdXBncmFkZVJvbGwgKHJvbGxJbmRleCwgdXBncmFkZWluZGV4KSB7XG4gICAgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICBjb25zdCByb2xsID0gdGhpcy5yb2xsc1tyb2xsSW5kZXhdXG4gICAgY29uc3QgaW5jcmVhc2VkU3VjY2VzcyA9IHJvbGwuaW5jcmVhc2VTdWNjZXNzW3VwZ3JhZGVpbmRleF1cbiAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5sdWNrQW1vdW50KVxuICAgIGlmICghdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGAke3RoaXMuYWN0b3IubmFtZX0gZG9lcyBub3QgaGF2ZSBlbm91Z2ggbHVjayB0byBwYXNzIHRoZSBjaGVja2BcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBuZXdTdWNjZXNzTGV2ZWwgPSBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLm5ld1N1Y2Nlc3NMZXZlbClcbiAgICByb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGlmIChyb2xsLmRpZmZpY3VsdHkgPD0gbmV3U3VjY2Vzc0xldmVsKSByb2xsLmlzU3VjY2VzcyA9IHRydWVcbiAgICByb2xsLmx1Y2tTcGVudCA9IHRydWVcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gbmV3IENvQzdSYW5nZUluaXRpYXRvcigpXG4gICAgcmFuZ2VJbml0aWF0b3IuX3RhcmdldHMgPSBbXVxuICAgIGlmIChtZXNzYWdlSWQpIHJhbmdlSW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIGVsc2UgaWYgKGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKSkge1xuICAgICAgcmFuZ2VJbml0aWF0b3IubWVzc2FnZUlkID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgfVxuXG4gICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChyYW5nZUluaXRpYXRvciwgY2FyZClcbiAgICBjb25zdCBjYXJkVGFyZ2V0cyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpXG4gICAgZm9yIChjb25zdCB0IG9mIGNhcmRUYXJnZXRzKSB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBDb0M3UmFuZ2VUYXJnZXQuZ2V0RnJvbUVsZW1lbnQodClcbiAgICAgIHJhbmdlSW5pdGlhdG9yLnRhcmdldHMucHVzaCh0YXJnZXQpXG4gICAgfVxuXG4gICAgY29uc3QgY2FyZFNob3RzID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCcuc2hvdCcpXG4gICAgaWYgKGNhcmRTaG90cykge1xuICAgICAgZm9yIChjb25zdCBzIG9mIGNhcmRTaG90cykge1xuICAgICAgICBjb25zdCBzaG90ID0ge31cbiAgICAgICAgY2hhdEhlbHBlci5nZXRPYmplY3RGcm9tRWxlbWVudChzaG90LCBzKVxuICAgICAgICByYW5nZUluaXRpYXRvci5zaG90cy5wdXNoKHNob3QpXG4gICAgICB9XG4gICAgfVxuICAgIC8vIGVsc2Uge1xuICAgIC8vICBjb25zdCBzaG90ID0ge1xuICAgIC8vICAgICAgc2hvdE9yZGVyOiAwLFxuICAgIC8vICAgICAgYWN0b3JLZXk6IG51bGwsXG4gICAgLy8gICAgICBhY3Rvck5hbWU6ICdkdW1teSdcbiAgICAvLyAgfVxuICAgIC8vIH1cblxuICAgIHJhbmdlSW5pdGlhdG9yLnJvbGxzID0gW11cbiAgICBjb25zdCByb2xscyA9IGNhcmQucXVlcnlTZWxlY3RvckFsbCgnLnJvbGwtcmVzdWx0JylcbiAgICBmb3IgKGNvbnN0IHIgb2Ygcm9sbHMpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChyKVxuICAgICAgcmFuZ2VJbml0aWF0b3Iucm9sbHMucHVzaChyb2xsKVxuICAgIH1cblxuICAgIHJhbmdlSW5pdGlhdG9yLmRhbWFnZSA9IFtdXG4gICAgY29uc3QgZGFtYWdlUm9sbHMgPSBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYW1hZ2UtcmVzdWx0cycpXG4gICAgZm9yIChjb25zdCBkciBvZiBkYW1hZ2VSb2xscykge1xuICAgICAgY29uc3QgZGFtYWdlUm9sbCA9IENvQzdEYW1hZ2UuZ2V0RnJvbUVsZW1lbnQoZHIpXG4gICAgICByYW5nZUluaXRpYXRvci5kYW1hZ2UucHVzaChkYW1hZ2VSb2xsKVxuICAgIH1cblxuICAgIHJldHVybiByYW5nZUluaXRpYXRvclxuICB9XG5cbiAgYXN5bmMgcm9sbERhbWFnZSAoKSB7XG4gICAgdGhpcy5kYW1hZ2UgPSBbXVxuICAgIGNvbnN0IGhpdHMgPSB0aGlzLnN1Y2Nlc3NmdWxIaXRzXG5cbiAgICAvLyBsZXQgdm9sbGV5U2l6ZSA9IDE7XG4gICAgLy8gaWYoIHRoaXMuZnVsbEF1dG8pIHtcbiAgICAvLyAgdm9sbGV5U2l6ZSA9IHRoaXMudm9sbGV5U2l6ZTtcbiAgICAvLyAgaWYodm9sbGV5U2l6ZSA8IDMpIHZvbGxleVNpemUgPSAzO1xuICAgIC8vIH1cbiAgICAvLyBpZiggdGhpcy5idXJzdCkgdm9sbGV5U2l6ZSA9IHBhcnNlSW50KHRoaXMud2VhcG9uLmRhdGEuZGF0YS51c2VzUGVyUm91bmQuYnVyc3QpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGl0cy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgaCA9IGhpdHNbaV1cbiAgICAgIGNvbnN0IHZvbGxleVNpemUgPSBwYXJzZUludChoLnNob3QuYnVsbGV0c1Nob3QpXG4gICAgICBjb25zdCBkYW1hZ2VSb2xscyA9IFtdXG5cbiAgICAgIGlmICh2b2xsZXlTaXplID4gMCkge1xuICAgICAgICBsZXQgZGFtYWdlRm9ybXVsYSA9IFN0cmluZyhoLnNob3QuZGFtYWdlKVxuICAgICAgICBpZiAoIWRhbWFnZUZvcm11bGEgfHwgZGFtYWdlRm9ybXVsYSA9PT0gJycpIGRhbWFnZUZvcm11bGEgPSAnMCdcbiAgICAgICAgY29uc3QgZGFtYWdlRGllID0gQ29DN0RhbWFnZS5nZXRNYWluRGllKGRhbWFnZUZvcm11bGEpXG4gICAgICAgIGNvbnN0IG1heERhbWFnZSA9IG5ldyBSb2xsKGRhbWFnZUZvcm11bGEpLmV2YWx1YXRlKHtcbiAgICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgICB9KS50b3RhbFxuICAgICAgICBjb25zdCBjcml0aWNhbERhbWFnZUZvcm11bGEgPSB0aGlzLndlYXBvbi5pbXBhbGVcbiAgICAgICAgICA/IGAke2RhbWFnZUZvcm11bGF9ICsgJHttYXhEYW1hZ2V9YFxuICAgICAgICAgIDogYCR7bWF4RGFtYWdlfWBcbiAgICAgICAgY29uc3QgY3JpdGljYWxEYW1hZ2VEaWUgPSBDb0M3RGFtYWdlLmdldE1haW5EaWUoY3JpdGljYWxEYW1hZ2VGb3JtdWxhKVxuXG4gICAgICAgIGxldCBpbXBhbGluZ1Nob3RzID0gMFxuICAgICAgICBsZXQgc3VjY2Vzc2Z1bFNob3RzID0gMFxuICAgICAgICBsZXQgY3JpdGljYWwgPSBmYWxzZVxuICAgICAgICBpZiAodGhpcy5mdWxsQXV0byB8fCB0aGlzLmJ1cnN0KSB7XG4gICAgICAgICAgc3VjY2Vzc2Z1bFNob3RzID0gTWF0aC5mbG9vcih2b2xsZXlTaXplIC8gMilcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3VjY2Vzc2Z1bFNob3RzID09PSAwKSBzdWNjZXNzZnVsU2hvdHMgPSAxXG4gICAgICAgIGlmIChoLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICAgIGltcGFsaW5nU2hvdHMgPSBzdWNjZXNzZnVsU2hvdHNcbiAgICAgICAgICBzdWNjZXNzZnVsU2hvdHMgPSB2b2xsZXlTaXplIC0gaW1wYWxpbmdTaG90c1xuICAgICAgICAgIGNyaXRpY2FsID0gdHJ1ZVxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWwgIT09IGgucm9sbC5zdWNjZXNzTGV2ZWwgJiZcbiAgICAgICAgICAgIChDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWUgPD0gaC5yb2xsLmRpZmZpY3VsdHkgfHxcbiAgICAgICAgICAgICAgaC5zaG90LmV4dHJlbWVSYW5nZSlcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHN1Y2Nlc3NmdWxTaG90cyA9IHZvbGxleVNpemVcbiAgICAgICAgICAgIGltcGFsaW5nU2hvdHMgPSAwXG4gICAgICAgICAgICBjcml0aWNhbCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHRvdGFsID0gMFxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc3VjY2Vzc2Z1bFNob3RzOyBpbmRleCsrKSB7XG4gICAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKGRhbWFnZUZvcm11bGEpXG4gICAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXG4gICAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xuICAgICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgICAgZm9ybXVsYTogZGFtYWdlRm9ybXVsYSxcbiAgICAgICAgICAgIHRvdGFsOiByb2xsLnRvdGFsLFxuICAgICAgICAgICAgZGllOiBkYW1hZ2VEaWUsXG4gICAgICAgICAgICBjcml0aWNhbDogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRvdGFsICs9IHJvbGwudG90YWxcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaW1wYWxpbmdTaG90czsgaW5kZXgrKykge1xuICAgICAgICAgIGNvbnN0IHJvbGwgPSBuZXcgUm9sbChjcml0aWNhbERhbWFnZUZvcm11bGEpXG4gICAgICAgICAgLyoqIE1PRElGIDAuOC54ICoqL1xuICAgICAgICAgIGF3YWl0IHJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHJvbGwpXG4gICAgICAgICAgLyoqKioqKioqKioqKioqKioqL1xuICAgICAgICAgIGRhbWFnZVJvbGxzLnB1c2goe1xuICAgICAgICAgICAgZm9ybXVsYTogY3JpdGljYWxEYW1hZ2VGb3JtdWxhLFxuICAgICAgICAgICAgdG90YWw6IHJvbGwudG90YWwsXG4gICAgICAgICAgICBkaWU6IGNyaXRpY2FsRGFtYWdlRGllLFxuICAgICAgICAgICAgY3JpdGljYWw6IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRvdGFsICs9IHJvbGwudG90YWxcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCB0YXJnZXROYW1lID0gJ2R1bW15J1xuICAgICAgICBsZXQgdGFyZ2V0ID0gY2hhdEhlbHBlci5nZXRUb2tlbkZyb21LZXkoaC5yb2xsLnRhcmdldEtleSlcbiAgICAgICAgaWYgKCF0YXJnZXQpIHRhcmdldCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KGgucm9sbC50YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICBpZiAodGFyZ2V0KSB0YXJnZXROYW1lID0gdGFyZ2V0Lm5hbWVcblxuICAgICAgICB0aGlzLmRhbWFnZS5wdXNoKHtcbiAgICAgICAgICB0YXJnZXRLZXk6IGgucm9sbC50YXJnZXRLZXksXG4gICAgICAgICAgdGFyZ2V0TmFtZSxcbiAgICAgICAgICByb2xsczogZGFtYWdlUm9sbHMsXG4gICAgICAgICAgdG90YWwsXG4gICAgICAgICAgY3JpdGljYWwsXG4gICAgICAgICAgZGVhbHQ6IGZhbHNlLFxuICAgICAgICAgIHJlc3VsdFN0cmluZzogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5yYW5nZUNvbWJhdERhbWFnZScsIHtcbiAgICAgICAgICAgIG5hbWU6IHRhcmdldE5hbWUsXG4gICAgICAgICAgICB0b3RhbFxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kYW1hZ2VSb2xsZWQgPSB0aGlzLmRhbWFnZS5sZW5ndGggIT09IDBcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKCkge1xuICAgIGZvciAobGV0IGRJbmRleCA9IDA7IGRJbmRleCA8IHRoaXMuZGFtYWdlLmxlbmd0aDsgZEluZGV4KyspIHtcbiAgICAgIGNvbnN0IGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5kYW1hZ2VbZEluZGV4XS50YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgaWYgKGFjdG9yID09PSBudWxsKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vVGFyZ2V0VG9EYW1hZ2UnKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxUYWtlbiA9IDBcbiAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS50b3RhbEFic29yYmVkID0gMFxuICAgICAgICBmb3IgKFxuICAgICAgICAgIGxldCBySW5kZXggPSAwO1xuICAgICAgICAgIHJJbmRleCA8IHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHMubGVuZ3RoO1xuICAgICAgICAgIHJJbmRleCsrXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGRlYWx0QW1vdW50ID0gYXdhaXQgYWN0b3IuZGVhbERhbWFnZShcbiAgICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS50b3RhbFxuICAgICAgICAgIClcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsVGFrZW4gKz0gZGVhbHRBbW91bnRcbiAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udGFrZW4gPSBkZWFsdEFtb3VudFxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0ucm9sbHNbckluZGV4XS5hYnNvcmJlZCA9XG4gICAgICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJvbGxzW3JJbmRleF0udG90YWwgLSBkZWFsdEFtb3VudFxuICAgICAgICAgIHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxBYnNvcmJlZCArPVxuICAgICAgICAgICAgdGhpcy5kYW1hZ2VbZEluZGV4XS5yb2xsc1tySW5kZXhdLnRvdGFsIC0gZGVhbHRBbW91bnRcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLmRlYWx0ID0gdHJ1ZVxuICAgICAgICB0aGlzLmRhbWFnZVtkSW5kZXhdLnJlc3VsdFN0cmluZyA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcucmFuZ2VDb21iYXREYW1hZ2VBcm1vcicsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kYW1hZ2VbZEluZGV4XS50YXJnZXROYW1lLFxuICAgICAgICAgICAgdG90YWw6IHRoaXMuZGFtYWdlW2RJbmRleF0udG90YWxUYWtlbixcbiAgICAgICAgICAgIGFybW9yOiB0aGlzLmRhbWFnZVtkSW5kZXhdLnRvdGFsQWJzb3JiZWRcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5kYW1hZ2VEZWFsdCA9IHRydWVcbiAgICB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN1JhbmdlVGFyZ2V0IHtcbiAgY29uc3RydWN0b3IgKGFjdG9yS2V5ID0gbnVsbCkge1xuICAgIHRoaXMuYWN0b3JLZXkgPSBhY3RvcktleVxuICAgIHRoaXMuY292ZXIgPSBmYWxzZVxuICAgIHRoaXMucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICB0aGlzLmJhc2VSYW5nZSA9IHRydWVcbiAgICB0aGlzLmxvbmdSYW5nZSA9IGZhbHNlXG4gICAgdGhpcy5leHRyZW1lUmFuZ2UgPSBmYWxzZVxuICAgIHRoaXMuaW5NZWxlZSA9IGZhbHNlXG4gIH1cblxuICBnZXQgYmlnICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9iaWcpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IuYnVpbGQpIHRoaXMuX2JpZyA9IHRoaXMuYWN0b3IuYnVpbGQgPj0gNFxuICAgICAgZWxzZSB0aGlzLl9iaWcgPSBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fYmlnXG4gIH1cblxuICBzZXQgYmlnIChiKSB7XG4gICAgdGhpcy5fYmlnID0gYlxuICB9XG5cbiAgZ2V0IHNtYWxsICgpIHtcbiAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLl9zbWFsbCkge1xuICAgICAgaWYgKHRoaXMuYWN0b3IgJiYgdGhpcy5hY3Rvci5idWlsZCkgdGhpcy5fc21hbGwgPSB0aGlzLmFjdG9yLmJ1aWxkIDw9IC0yXG4gICAgICBlbHNlIHRoaXMuX3NtYWxsID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NtYWxsXG4gIH1cblxuICBzZXQgc21hbGwgKGIpIHtcbiAgICB0aGlzLl9zbWFsbCA9IGJcbiAgfVxuXG4gIGdldCBub3JtYWwgKCkge1xuICAgIHJldHVybiAhdGhpcy5iaWcgJiYgIXRoaXMuc21hbGxcbiAgfVxuXG4gIHNldCBub3JtYWwgKGIpIHtcbiAgICB0aGlzLl9iaWcgPSBmYWxzZVxuICAgIHRoaXMuX3NtYWxsID0gZmFsc2VcbiAgfVxuXG4gIGdldCBpc0Zhc3QgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IubW92KSByZXR1cm4gdGhpcy5hY3Rvci5tb3YgPj0gOFxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGZhc3QgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2Zhc3QpIHtcbiAgICAgIC8vIGlmKCB0aGlzLmFjdG9yICYmIHRoaXMuYWN0b3IubW92KSB0aGlzLl9mYXN0ID0gdGhpcy5hY3Rvci5tb3YgPj0gODtcbiAgICAgIC8vIGVsc2UgdGhpcy5fZmFzdCA9IGZhbHNlO1xuICAgICAgdGhpcy5fZmFzdCA9IGZhbHNlXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9mYXN0XG4gIH1cblxuICBzZXQgZmFzdCAoYikge1xuICAgIHRoaXMuX2Zhc3QgPSBiXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICh0aGlzLmFjdG9yS2V5ICYmICF0aGlzLl9hY3Rvcikge1xuICAgICAgdGhpcy5fYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmFjdG9yS2V5KSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMudG9rZW4pIHJldHVybiB0aGlzLnRva2VuLm5hbWVcbiAgICBpZiAodGhpcy5hY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IubmFtZVxuICAgIHJldHVybiAnRHVtbXknXG4gIH1cblxuICBnZXQgaW1nICgpIHtcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgaWYgKHRoaXMudG9rZW4uZG9jdW1lbnQ/LnRleHR1cmUuc3JjKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRva2VuLmRvY3VtZW50Py50ZXh0dXJlLnNyY1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hY3RvcikgcmV0dXJuIHRoaXMuYWN0b3IuZGF0YS5pbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH1cblxuICBnZXQgdG9rZW4gKCkge1xuICAgIGlmICghdGhpcy5fdG9rZW4gJiYgdGhpcy5hY3RvcktleSkge1xuICAgICAgdGhpcy5fdG9rZW4gPSBjaGF0SGVscGVyLmdldFRva2VuRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fdG9rZW5cbiAgfVxuXG4gIGdldCBzaXplVGV4dCAoKSB7XG4gICAgaWYgKHRoaXMuYmlnKSB7XG4gICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5CaWdUYXJnZXRUaXRsZScpXG4gICAgfVxuICAgIGlmICh0aGlzLnNtYWxsKSB7XG4gICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5TbWFsbFRhcmdldFRpdGxlJylcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5yYW5nZUNvbWJhdENhcmQuTm9ybWFsVGFyZ2V0VGl0bGUnKVxuICB9XG5cbiAgZ2V0IHNpemVMYWJlbCAoKSB7XG4gICAgaWYgKHRoaXMuYmlnKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnJhbmdlQ29tYmF0Q2FyZC5CaWdUYXJnZXQnKVxuICAgIGlmICh0aGlzLnNtYWxsKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmNvbWJhdENhcmQuU21hbGxUYXJnZXQnKVxuICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucmFuZ2VDb21iYXRDYXJkLk5vcm1hbFRhcmdldCcpXG4gIH1cblxuICBnZXQgZGlmZmljdWx0eSAoKSB7XG4gICAgaWYgKHRoaXMuYmFzZVJhbmdlIHx8IHRoaXMucG9pbnRCbGFua1JhbmdlKSB7XG4gICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICAgIGlmICh0aGlzLmxvbmdSYW5nZSkgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgIGlmICh0aGlzLmV4dHJlbWVSYW5nZSkgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmltcG9zc2libGVcbiAgfVxuXG4gIGdldCBtb2RpZmllciAoKSB7XG4gICAgbGV0IG1vZGlmaWVyID0gMFxuICAgIGlmICh0aGlzLmNvdmVyKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMucG9pbnRCbGFua1JhbmdlKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuZmFzdCkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnNtYWxsKSBtb2RpZmllci0tXG4gICAgaWYgKHRoaXMuYmlnKSBtb2RpZmllcisrXG4gICAgaWYgKHRoaXMuaW5NZWxlZSkgbW9kaWZpZXItLVxuICAgIGlmICh0aGlzLnN1cnByaXNlZCkgbW9kaWZpZXIrK1xuICAgIHJldHVybiBtb2RpZmllclxuICB9XG5cbiAgc2V0IHRva2VuICh0KSB7XG4gICAgdGhpcy5fdG9rZW4gPSB0XG4gIH1cblxuICBzdGF0aWMgZ2V0RnJvbUVsZW1lbnQgKGVsZW1lbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBuZXcgQ29DN1JhbmdlVGFyZ2V0KClcbiAgICBjaGF0SGVscGVyLmdldE9iamVjdEZyb21FbGVtZW50KHRhcmdldCwgZWxlbWVudClcbiAgICByZXR1cm4gdGFyZ2V0XG4gIH1cblxuICBzdGF0aWMgY2hhbmdlRGlzcGxheWVkVGFyZ2V0IChldmVudCkge1xuICAgIGlmICghZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldC1zZWxlY3RvcicpKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IHRhcmdldFNlbGVjdG9yID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHRhcmdldHMgPSB0YXJnZXRTZWxlY3Rvci5jbG9zZXN0KCcudGFyZ2V0cycpXG4gICAgY29uc3QgdGFyZ2V0TGlzdCA9IHRhcmdldHMucXVlcnlTZWxlY3RvckFsbCgnLnRhcmdldCcpXG4gICAgcmV0dXJuIHRhcmdldExpc3RcbiAgfVxuXG4gIGF0dGFjaFRvRWxlbWVudCAoZWxlbWVudCkge1xuICAgIGNoYXRIZWxwZXIuYXR0YWNoT2JqZWN0VG9FbGVtZW50KHRoaXMsIGVsZW1lbnQpXG4gIH1cblxuICB0b2dnbGVGbGFnIChmbGFnKSB7XG4gICAgaWYgKFxuICAgICAgZmxhZyA9PT0gJ2Jhc2VSYW5nZScgfHxcbiAgICAgIGZsYWcgPT09ICdsb25nUmFuZ2UnIHx8XG4gICAgICBmbGFnID09PSAnZXh0cmVtZVJhbmdlJyB8fFxuICAgICAgZmxhZyA9PT0gJ3BvaW50QmxhbmtSYW5nZSdcbiAgICApIHtcbiAgICAgIHRoaXMucG9pbnRCbGFua1JhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMuYmFzZVJhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMubG9uZ1JhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMuZXh0cmVtZVJhbmdlID0gZmFsc2VcbiAgICAgIHRoaXMub3V0T2ZSYW5nZSA9IGZhbHNlXG4gICAgICB0aGlzW2ZsYWddID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAoZmxhZyA9PT0gJ3NpemUnKSB7XG4gICAgICBpZiAodGhpcy5zbWFsbCkge1xuICAgICAgICB0aGlzLnNtYWxsID0gZmFsc2VcbiAgICAgICAgdGhpcy5iaWcgPSB0cnVlXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYmlnKSB7XG4gICAgICAgIHRoaXMuc21hbGwgPSBmYWxzZVxuICAgICAgICB0aGlzLmJpZyA9IGZhbHNlXG4gICAgICB9IGVsc2UgdGhpcy5zbWFsbCA9IHRydWVcbiAgICB9IGVsc2UgdGhpc1tmbGFnXSA9ICF0aGlzW2ZsYWddXG4gICAgaWYgKGZsYWcgPT09ICdmYXN0JyAmJiB0aGlzLmZhc3QgJiYgIXRoaXMuaXNGYXN0KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuV2FybkZhc3RUYXJnZXRXaXRoV3JvbmdNT1YnLCB7XG4gICAgICAgICAgbW92OiB0aGlzLmFjdG9yLm1vdlxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBDT05TVCwgZ2FtZSwgVG9rZW4sIHRva2VuRGF0YSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4vYXBwcy9jb2M3LWxpbmsuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVJbml0aWF0b3IgfSBmcm9tICcuL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdNZWxlZVRhcmdldCB9IGZyb20gJy4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlUmVzb2x0aW9uIH0gZnJvbSAnLi9jaGF0L2NvbWJhdC9tZWxlZS1yZXNvbHV0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi9jaGF0L3JhbmdlY29tYmF0LmpzJ1xuaW1wb3J0IHsgQ29DN1JvbGwsIGNoYXRIZWxwZXIsIGlzQ3RybEtleSB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG4vLyBpbXBvcnQgeyBDb0M3RGFtYWdlUm9sbCB9IGZyb20gJy4vY2hhdC9kYW1hZ2VjYXJkcy5qcyc7XG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuL2NoYXQvY29uY2hlY2suanMnXG5pbXBvcnQgeyBTYW5DaGVja0NhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgT3Bwb3NlZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9vcHBvc2VkLXJvbGwuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4vY2hhdC9jYXJkcy9jb21iaW5lZC1yb2xsLmpzJ1xuaW1wb3J0IHsgSW50ZXJhY3RpdmVDaGF0Q2FyZCB9IGZyb20gJy4vY2hhdC9pbnRlcmFjdGl2ZS1jaGF0LWNhcmQuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi9kaWNlLmpzJ1xuXG5jb25zdCBDSEFUX0NPQzdfTUVTU0FHRSA9IHtcbiAgRkFLRVJPTEw6XG4gICAgJzxkaXYgY2xhc3M9XCJkaWNlLXJvbGxcIj48ZGl2IGNsYXNzPVwiZGljZS1yZXN1bHRcIj48ZGl2IGNsYXNzPVwiZGljZS1mb3JtdWxhXCI+Pz8/PC9kaXY+PGg0IGNsYXNzPVwiZGljZS10b3RhbFwiPj88L2g0PjwvZGl2PjwvZGl2Pidcbn1cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhdCB7XG4gIHN0YXRpYyByZW5kZXJDaGF0TWVzc2FnZUhvb2sgKGNoYXRNZXNzYWdlLCBodG1sKSB7XG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnR01TZWxmUm9sbCcpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuZmxhdm9yLXRleHQnKVxuICAgICAgICAucmVwbGFjZVdpdGgoXG4gICAgICAgICAgYDxzcGFuIGNsYXNzPVwiZmxhdm9yLXRleHRcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LlJvbGxTZWNyZXREaWNlJ1xuICAgICAgICAgICl9PC9zcGFuPmBcbiAgICAgICAgKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpXG4gICAgICAgIC5yZXBsYWNlV2l0aChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIm1lc3NhZ2UtY29udGVudFwiPiR7Q0hBVF9DT0M3X01FU1NBR0UuRkFLRVJPTEx9PC9kaXY+YFxuICAgICAgICApXG4gICAgfVxuXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAncmVtb3ZlV2lzcGVyVGFyZ2V0cycpICYmICFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbC5maW5kKCcud2hpc3Blci10bycpLnJlbW92ZSgpXG4gICAgfVxuXG4gICAgaWYgKGNoYXRNZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAnZmFrZVJvbGwnKSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmZsYXZvci10ZXh0JylcbiAgICAgICAgLnJlcGxhY2VXaXRoKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5LZWVwZXJTZW50RGVjb3knKSlcbiAgICAgIGh0bWwuZmluZCgnLm1lc3NhZ2UtY29udGVudCcpLnJlbW92ZSgpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGZha2VSb2xsTWVzc2FnZSAoKSB7XG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsU2VjcmV0RGljZScpLFxuICAgICAgd2hpc3BlcjogZ2FtZS51c2Vycy5wbGF5ZXJzLFxuICAgICAgdHlwZTogQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVIsXG4gICAgICBmbGFnczoge1xuICAgICAgICBDb0M3OiB7XG4gICAgICAgICAgR01TZWxmUm9sbDogZmFsc2UsXG4gICAgICAgICAgcmVtb3ZlV2lzcGVyVGFyZ2V0czogdHJ1ZSxcbiAgICAgICAgICBmYWtlUm9sbDogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgY29udGVudDogQ0hBVF9DT0M3X01FU1NBR0UuRkFLRVJPTExcbiAgICB9XG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpXG4gIH1cblxuICAvLyBUT0RPIHJlbXBsYWNlciBsZXMgZ2V0RWxlbWVudHNCeXh4eHggcGFyIHF1ZXJ5U2VsZWN0b3JcblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqXG4gICAqICBJbml0IHNvY2tldHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICpcbiAgICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgc3RhdGljIHJlYWR5ICgpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQucmVhZHknKTtcbiAgICBnYW1lLkNvQzcgPSAnaW5pdCdcbiAgfVxuXG4gIC8vIHN0YXRpYyBvbk1lc3NhZ2UoIGRhdGEpIHtcbiAgLy8gIGNvbnNvbGUubG9nKCctLT5Db0M3Q2hhdC5vbk1lc3NhZ2UnKTtcbiAgLy8gIGNvbnNvbGUubG9nKGBtZXNzYWdlIHJlY2VpdmVkIHNlbmQmZXIgOiR7ZGF0YS51c2VyfSBtZXNzYWdlIHR5cGUgOiAke2RhdGEuYWN0aW9ufSBmb3IgbWVzc2FnZSA6JHtkYXRhLm1lc3NhZ2VJZH1gKTtcbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICpcbiAgICogIENoYXQgTWVzc2FnZSBIZWxwZXJzICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIHN0YXRpYyBhc3luYyBjaGF0TGlzdGVuZXJzIChhcHAsIGh0bWwpIHtcbiAgICBodG1sLm9uKFxuICAgICAgJ2NsaWNrJyxcbiAgICAgICcuY2FyZC1idXR0b25zIGJ1dHRvbicsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZEFjdGlvbi5iaW5kKHRoaXMpXG4gICAgKVxuICAgIC8vIGh0bWwub24oJ2NsaWNrJywgJy5jYXJkLWJ1dHRvbnMgYnV0dG9uJywgQ29DN0NoYXQuX29uQ2hhdENhcmRUZXN0LmJpbmQodGhpcykpO1xuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5jYXJkLXRpdGxlJyxcbiAgICAgIENvQzdDaGF0Ll9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5yYWRpby1zd2l0Y2gnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRSYWRpb1N3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5wYW5lbC1zd2l0Y2gnLFxuICAgICAgQ29DN0NoYXQuX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2guYmluZCh0aGlzKVxuICAgIClcblxuICAgIGh0bWwub24oXG4gICAgICAnY2xpY2snLFxuICAgICAgJy5zaW1wbGUtZmxhZycsXG4gICAgICBDb0M3Q2hhdC5fb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaC5iaW5kKHRoaXMpXG4gICAgKVxuICAgIGh0bWwub24oJ2NsaWNrJywgJy52b2xsZXktc2l6ZScsIENvQzdDaGF0Ll9vbkNoYXRDYXJkVm9sbGV5U2l6ZS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5vbihcbiAgICAgICdjbGljaycsXG4gICAgICAnLmRyb3Bkb3duLWVsZW1lbnQnLFxuICAgICAgQ29DN0NoYXQuX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQuYmluZCh0aGlzKVxuICAgIClcbiAgICBodG1sLm9uKCdjbGljaycsICcuc2ltcGxlLXRvZ2dsZScsIENvQzdDaGF0Ll9vblRvZ2dsZVNlbGVjdGVkLmJpbmQodGhpcykpXG4gICAgLy8gaHRtbC5vbignY2xpY2snLCAnLmlzLW91dG51bWJlcmVkJywgQ29DN0NoYXQuX29uT3V0bnVtYmVyZWRTZWxlY3RlZC5iaW5kKHRoaXMpKTtcblxuICAgIGh0bWwub24oJ2NsaWNrJywgJy50YXJnZXQtc2VsZWN0b3InLCBDb0M3Q2hhdC5fb25UYXJnZXRTZWxlY3QuYmluZCh0aGlzKSlcblxuICAgIGh0bWwub24oJ2RibGNsaWNrJywgJy5vcGVuLWFjdG9yJywgQ29DN0NoYXQuX29uT3BlbkFjdG9yLmJpbmQodGhpcykpXG5cbiAgICBDb0M3TGluay5iaW5kRXZlbnRzSGFuZGxlcihodG1sKVxuXG4gICAgaHRtbC5vbignY2xpY2snLCAnY29jNy1pbmxpbmUtcmVzdWx0JywgQ29DN0NoYXQuX29uSW5saW5lLmJpbmQodGhpcykpXG5cbiAgICAvLyBSb2xsQ2FyZC5iaW5kTGlzdGVybmVycyggaHRtbCk7XG4gICAgT3Bwb3NlZENoZWNrQ2FyZC5iaW5kTGlzdGVybmVycyhodG1sKVxuICAgIENvbWJpbmVkQ2hlY2tDYXJkLmJpbmRMaXN0ZXJuZXJzKGh0bWwpXG4gIH1cblxuICBzdGF0aWMgX29uT3BlbkFjdG9yIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhY3RvcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3RvcktleVxuICAgIGlmIChhY3RvcktleSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShhY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoYWN0b3IuaXNPd25lcikgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIG9uVXBkYXRlQ2hhdE1lc3NhZ2UgKGNoYXRNZXNzYWdlKSB7XG4gICAgdWkuY2hhdC5zY3JvbGxCb3R0b20oKVxuXG4gICAgLy8gaWYoIGNoYXRNZXNzYWdlLmdldEZsYWcoICdDb0M3JywgJ3JldmVsZWQnKSl7XG4gICAgLy8gfVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSAmJiBjaGF0TWVzc2FnZS50eXBlID09PSAwKSB7XG4gICAgICBjb25zdCBjYXJkID0gJChjaGF0TWVzc2FnZS5jb250ZW50KVswXVxuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICAgIGlmIChjYXJkLmRhdGFzZXQucmVzb2x2ZWQgPT09ICd0cnVlJykge1xuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygnaW5pdGlhdG9yJykpIHtcbiAgICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQudGFyZ2V0Q2FyZCkge1xuICAgICAgICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGNvbnN0IHRhcmdldCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tTWVzc2FnZUlkKFxuICAgICAgICAgICAgICAgIGluaXRpYXRvci50YXJnZXRDYXJkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaWYgKHRhcmdldC5yZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgICAgIGNoYXRNZXNzYWdlLmlkLFxuICAgICAgICAgICAgICAgICAgdGFyZ2V0Lm1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgICAgIHRhcmdldC5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCByZXNvbHV0aW9uQ2FyZC5yZXNvbHZlKClcbiAgICAgICAgICAgICAgICBpZiAoIWluaXRpYXRvci5jaGVja1JldmVhbGVkKSBhd2FpdCBpbml0aWF0b3IucmV2ZWFsQ2hlY2soKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbU1lc3NhZ2VJZChcbiAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGlmIChpbml0aWF0b3IucmVzb2x1dGlvbkNhcmQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgICAgICAgICAgICBjaGF0TWVzc2FnZS5pZCxcbiAgICAgICAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICAgICAgICBpbml0aWF0b3IucmVzb2x1dGlvbkNhcmRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICAgICAgaWYgKCFpbml0aWF0b3IuY2hlY2tSZXZlYWxlZCkgYXdhaXQgaW5pdGlhdG9yLnJldmVhbENoZWNrKClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbU1lc3NhZ2VJZChjaGF0TWVzc2FnZS5pZClcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdXRpb25DYXJkID0gbmV3IENvQzdNZWxlZVJlc29sdGlvbihcbiAgICAgICAgICAgICAgdGFyZ2V0LnBhcmVudE1lc3NhZ2VJZCxcbiAgICAgICAgICAgICAgY2hhdE1lc3NhZ2UuaWQsXG4gICAgICAgICAgICAgIHRhcmdldC5yZXNvbHV0aW9uQ2FyZFxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgYXdhaXQgcmVzb2x1dGlvbkNhcmQucmVzb2x2ZSgpXG4gICAgICAgICAgICBpZiAoIXRhcmdldC5tZWxlZUluaXRpYXRvci5jaGVja1JldmVhbGVkKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHRhcmdldC5tZWxlZUluaXRpYXRvci5yZXZlYWxDaGVjaygpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHJlbmRlck1lc3NhZ2VIb29rIChtZXNzYWdlLCBodG1sKSB7XG4gICAgdWkuY2hhdC5zY3JvbGxCb3R0b20oKVxuXG4gICAgSW50ZXJhY3RpdmVDaGF0Q2FyZC5iaW5kTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAobWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ2NoZWNrUmV2ZWFsZWQnKSkge1xuICAgICAgaHRtbC5maW5kKCcuZGljZS1yb2xsJykucmVtb3ZlQ2xhc3MoJ2dtLXZpc2libGUtb25seScpXG4gICAgICBodG1sWzBdLmRhdGFzZXQuY2hlY2tSZXZlYWxlZCA9IHRydWVcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgc2hvd2luZyBkcm9wZG93biBzZWxlY3Rpb25cbiAgICBodG1sXG4gICAgICAuZmluZCgnLmRyb3BidG4nKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAuY2xvc2VzdCgnLmRyb3Bkb3duJylcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgICAgIC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcbiAgICAgIClcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmRyb3Bkb3duJylcbiAgICAgIC5tb3VzZWxlYXZlKGV2ZW50ID0+XG4gICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgICAgICAucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLWNvbnRlbnQnKVxuICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCdzaG93JylcbiAgICAgIClcblxuICAgIC8vIGNvbnNvbGUubG9nKCcqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiotLT5Db0M3Q2hhdC5tZXNzYWdlTGlzdGVuZXJzIG1lc3NhZ2UgOicgKyBtZXNzYWdlLmlkKTtcbiAgICAvLyBtZXNzYWdlLmRhdGEuY29udGVudCA9IFwiXCI7XG4gICAgLy8gZGF0YS5tZXNzYWdlLmNvbnRlbnQgPSBcIlwiO1xuXG4gICAgLy8gV2hlbiBhIG5ldyBjYXJkIGlzIHB1Ymxpc2hlZCwgY2hlY2sgd2V0aGVyIGl0J3MgYSByb2xsIHRoYXQgbW9kaWZpZXMgYW4gb3RoZXIgY2FyZC5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnN0IGNhcmQgPSBodG1sWzBdLnF1ZXJ5U2VsZWN0b3IoJy5jb2M3LmNoYXQtY2FyZCcpXG4gICAgICBpZiAoY2FyZCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtY2FyZCcpICYmXG4gICAgICAgICAgIShjYXJkLmRhdGFzZXQucHJvY2Vzc2VkID09PSAndHJ1ZScpICYmXG4gICAgICAgICAgY2FyZC5kYXRhc2V0LnJlZk1lc3NhZ2VJZFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCByb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUVsZW1lbnQoY2FyZClcblxuICAgICAgICAgIGlmIChjYXJkLmRhdGFzZXQuc2lkZSA9PT0gJ3RhcmdldCcpIHtcbiAgICAgICAgICAgIHJvbGwuZGVmZW5kYW50SWQgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgICA/IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgIDogY2FyZC5kYXRhc2V0LmFjdG9ySWRcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGNhcmQuZGF0YXNldC5zaWRlID09PSAnaW5pdGlhdG9yJykge1xuICAgICAgICAgICAgcm9sbC5pbml0aWF0b3JJZCA9IGNhcmQuZGF0YXNldC50b2tlbklkXG4gICAgICAgICAgICAgID8gY2FyZC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICAgIH1cbiAgICAgICAgICBjYXJkLmRhdGFzZXQucHJvY2Vzc2VkID0gJ3RydWUnXG5cbiAgICAgICAgICBDb0M3Q2hhdC51cGRhdGVDb21iYXRDYXJkVGFyZ2V0KHJvbGwpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB1c2VyT25seSA9IGh0bWwuZmluZCgnLnRhcmdldC1vbmx5JylcbiAgICBmb3IgKGNvbnN0IGVsZW1lbnQgb2YgdXNlck9ubHkpIHtcbiAgICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIGNvbnN0IGFjdG9ySWQgPSBlbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS1hY3Rvci1pZCcpXG4gICAgICAgIGlmIChhY3RvcklkKSB7XG4gICAgICAgICAgaWYgKGdhbWUuYWN0b3JzLmdldChhY3RvcklkKS5pc093bmVyKSB7XG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZ21Pbmx5ID0gaHRtbC5maW5kKCcuZ20tb25seScpXG4gICAgZm9yIChjb25zdCB6b25lIG9mIGdtT25seSkge1xuICAgICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICB6b25lLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB1c2VyVmlzaWJsZU9ubHkgPSBodG1sLmZpbmQoJy51c2VyLXZpc2libGUtb25seScpXG4gICAgZm9yIChjb25zdCBlbGVtIG9mIHVzZXJWaXNpYmxlT25seSkge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG5cbiAgICBjb25zdCBnbVZpc2libGVPbmx5ID0gaHRtbC5maW5kKCcuZ20tdmlzaWJsZS1vbmx5JylcbiAgICBmb3IgKGNvbnN0IGVsZW0gb2YgZ21WaXNpYmxlT25seSkge1xuICAgICAgaWYgKCEoZ2FtZS51c2VyLmlzR00gfHwgKGdhbWUudXNlci5pc1RydXN0ZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndHJ1c3RlZENhblNlZUNoYXRDYXJkJykpKSkgZWxlbS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfVxuXG4gICAgY29uc3Qgb3duZXJWaXNpYmxlT25seSA9IGh0bWwuZmluZCgnLm93bmVyLXZpc2libGUtb25seScpXG4gICAgZm9yIChjb25zdCB6b25lIG9mIG93bmVyVmlzaWJsZU9ubHkpIHtcbiAgICAgIC8vIFRyeSByZXRyaWV2aW5nIGFjdG9yXG4gICAgICBsZXQgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUuZGF0YXNldD8uYWN0b3JLZXkpIC8vIFRyeSB3aXRoIHNlbGYuXG4gICAgICBpZiAoIWFjdG9yKSBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGNoYXQgY2FyZC5cbiAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUucGFyZW50RWxlbWVudC5kYXRhc2V0LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBwYXJlbnQgZWxlbWVudC5cbiAgICAgIH1cbiAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgIHpvbmUuY2xvc2VzdCgnW2RhdGEtYWN0b3Ita2V5XScpPy5kYXRhc2V0LmFjdG9yS2V5XG4gICAgICAgICkgLy8gVHJ5IHdpdGggY2xvc2VzdCBkYXRhLWFjdG9yLWtleVxuICAgICAgfVxuICAgICAgaWYgKCFhY3Rvcikge1xuICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoXG4gICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS10b2tlbi1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGRhdGEtdG9rZW4ta2V5XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCBhY3RvcklkKTtcbiAgICAgIGlmICgoYWN0b3IgJiYgIWFjdG9yLmlzT3duZXIpIHx8IGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIHpvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICAgICAgfSAvLyBpZiBjdXJyZW50IHVzZXIgZG9lc24ndCBvd24gdGhpcyBoZSBjYW4ndCBpbnRlcnJhY3RcbiAgICAgIC8vIGlmKCAhQ29DN0NoYXQuaXNDYXJkT3duZXIoIHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSkge3pvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzt9XG4gICAgfVxuXG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgLy8gR00gY2FuIHNlZSBldmVyeXRoaW5nXG4gICAgICBjb25zdCBvd25lck9ubHkgPSBodG1sLmZpbmQoJy5vd25lci1vbmx5JylcbiAgICAgIGZvciAoY29uc3Qgem9uZSBvZiBvd25lck9ubHkpIHtcbiAgICAgICAgLy8gVHJ5IHJldHJpZXZpbmcgYWN0b3JcbiAgICAgICAgbGV0IGFjdG9yID0gQ29DN0NoYXQuX2dldEFjdG9yRnJvbUtleShcbiAgICAgICAgICB6b25lLmRhdGFzZXQ/LmFjdG9yS2V5IHx8IHpvbmUuZGF0YXNldD8uYWN0b3JJZFxuICAgICAgICApIC8vIFRyeSB3aXRoIHNlbGYuXG4gICAgICAgIGlmICghYWN0b3IpIHtcbiAgICAgICAgICBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSAvLyBUcnkgd2l0aCBjbG9zZXN0IGNoYXQgY2FyZC5cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KHpvbmUucGFyZW50RWxlbWVudC5kYXRhc2V0LmFjdG9yS2V5KSAvLyBUcnkgd2l0aCBwYXJlbnQgZWxlbWVudC5cbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS1hY3Rvci1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS1hY3Rvci1rZXlcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgICAgYWN0b3IgPSBDb0M3Q2hhdC5fZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICAgICAgem9uZS5jbG9zZXN0KCdbZGF0YS10b2tlbi1rZXldJyk/LmRhdGFzZXQuYWN0b3JLZXlcbiAgICAgICAgICApIC8vIFRyeSB3aXRoIGNsb3Nlc3QgZGF0YS10b2tlbi1rZXlcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnN0IGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KCBhY3RvcklkKTtcbiAgICAgICAgaWYgKChhY3RvciAmJiAhYWN0b3IuaXNPd25lcikgfHwgKCFhY3RvciAmJiAhZ2FtZS51c2VyLmlzR00pKSB7XG4gICAgICAgICAgem9uZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICAgIH0gLy8gaWYgY3VycmVudCB1c2VyIGRvZXNuJ3Qgb3duIHRoaXMgaGUgY2FuJ3QgaW50ZXJyYWN0XG4gICAgICAgIC8vIGlmKCAhQ29DN0NoYXQuaXNDYXJkT3duZXIoIHpvbmUuY2xvc2VzdCgnLmNoYXQtY2FyZCcpKSkge3pvbmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzt9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGdtU2VsZWN0T25seSA9IGh0bWwuZmluZCgnLmdtLXNlbGVjdC1vbmx5JylcbiAgICAgIGlmICghKGdhbWUudXNlci5pc1RydXN0ZWQgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndHJ1c3RlZENhbk1vZGZ5Q2hhdENhcmQnKSkpIHtcbiAgICAgICAgZm9yIChjb25zdCBzZWxlY3Qgb2YgZ21TZWxlY3RPbmx5KSB7XG4gICAgICAgICAgc2VsZWN0LmNsYXNzTGlzdC5hZGQoJ2luYWN0aXZlJylcbiAgICAgICAgICBzZWxlY3QuY2xhc3NMaXN0LnJlbW92ZSgnc2ltcGxlLWZsYWcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGdldCBhY3Rpb25UeXBlU3RyaW5nICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmlnaHRCYWNrOiAnQ29DNy5maWdodEJhY2snLFxuICAgICAgbWFuZXV2ZXI6ICdDb0M3Lm1hbmV1dmVyJyxcbiAgICAgIGRvZGdpbmc6ICdDb0M3LmRvZGdlJ1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfb25UYXJnZXRTZWxlY3QgKGV2ZW50KSB7XG4gICAgY29uc3QgaW5kZXggPSBwYXJzZUludChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQua2V5KVxuICAgIGNvbnN0IHRhcmdldHNTZWxlY3RvciA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMtc2VsZWN0b3InKVxuICAgIGZvciAoY29uc3QgaSBvZiB0YXJnZXRzU2VsZWN0b3IucXVlcnlTZWxlY3RvckFsbCgnaW1nJykpIHtcbiAgICAgIGkuc3R5bGUuYm9yZGVyID0gJ25vbmUnXG4gICAgfVxuICAgIHRhcmdldHNTZWxlY3RvclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoYFtkYXRhLWtleT1cIiR7aW5kZXh9XCJdYClcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCdpbWcnKS5zdHlsZS5ib3JkZXIgPSAnMXB4IHNvbGlkICMwMDAnXG4gICAgY29uc3QgdGFyZ2V0cyA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRhcmdldHMnKVxuICAgIGZvciAoY29uc3QgdCBvZiB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3JBbGwoJy50YXJnZXQnKSkge1xuICAgICAgdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgICB0LmRhdGFzZXQuYWN0aXZlID0gJ2ZhbHNlJ1xuICAgIH1cbiAgICBjb25zdCB0YXJnZXRUb0Rpc3BsYXkgPSB0YXJnZXRzLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgW2RhdGEtdGFyZ2V0LWtleT1cIiR7aW5kZXh9XCJdYFxuICAgIClcbiAgICB0YXJnZXRUb0Rpc3BsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jaydcbiAgICB0YXJnZXRUb0Rpc3BsYXkuZGF0YXNldC5hY3RpdmUgPSAndHJ1ZSdcbiAgICAvLyBjb25zdCBjaGF0Q2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZC5yYW5nZScpO1xuICAgIC8vIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKCBjaGF0Q2FyZCk7XG4gIH1cblxuICBzdGF0aWMgX29uRHJvcERvd25FbGVtZW50U2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0YXJnZXQnKSkge1xuICAgICAgQ29DN01lbGVlVGFyZ2V0LnVwZGF0ZVNlbGVjdGVkKGNhcmQsIGV2ZW50KVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gY2xlYXIgYWxsIGRyb3AgZG93biBhbmQgaGlnaGxpZ2h0IHRoaXMgcGFydGljdWxhciBvbmVcbiAgICBjb25zdCBkcm9wRG93bkJveGVzID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5yZXNwb25zZS1zZWxlY3Rpb24nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICBmb3IgKGNvbnN0IGRwZG5Cb3ggb2YgZHJvcERvd25Cb3hlcykge1xuICAgICAgZHBkbkJveC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXG4gICAgfVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpXG5cbiAgICAvLyBjbG9zZSBkcm9wZG93blxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcblxuICAgIC8vIERpc3BsYXkgdGhlIHJvbGwgYnV0dG9uXG4gICAgY29uc3Qgc2VsZWN0ZWRCb3ggPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICAuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoJy5zZWxlY3RlZC1hY3Rpb24nKVxuICAgIHNlbGVjdGVkQm94LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgY29uc3QgYnV0dG9uID0gc2VsZWN0ZWRCb3gucXVlcnlTZWxlY3RvcignYnV0dG9uJylcblxuICAgIC8vIFBhc3MgdGhlIGluaXRpYXRvciBJZCAtIEJ1aWxkIGNhbiBiZSByZXRyaWV2ZWQgZnJvbSB0aGF0XG5cbiAgICAvLyBQYXNzIHRoZSBpbml0aWF0b3IgaXRlbVxuXG4gICAgLy8gUGFzcyB0aGUgZGVmZW5kYW50IElkXG5cbiAgICAvLyBQYXNzIHRoZSBkZWZlbmRhbnQgYWN0aW9uXG4gICAgYnV0dG9uLmRhdGFzZXQuYWN0aW9uID0gJ2RlZmVuZGluZydcbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb25UeXBlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LmRlZmVuZGVyQ2hvaWNlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvblxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxJZFxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsVmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgIGJ1dHRvbi5kYXRhc2V0LnNraWxsTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbE5hbWVcbiAgICBidXR0b24uZGF0YXNldC5pdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQud2VhcG9uSWRcbiAgICBidXR0b24uZGF0YXNldC5pdGVtTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25OYW1lXG5cbiAgICAvLyBQdXQgc29tZSB0ZXh0IGluIHRoZSBidXR0b25cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ21hbmV1dmVyJzpcbiAgICAgICAgYnV0dG9uLmlubmVyVGV4dCA9IGAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmNvbWJhdENhcmRzW2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25dXG4gICAgICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lfSAoJHtcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgICAgICB9JSlgXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdmaWdodEJhY2snOlxuICAgICAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuY29tYmF0Q2FyZHNbZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbl1cbiAgICAgICAgKX0gOiAke2V2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC53ZWFwb25OYW1lfSAoJHtcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxWYWx1ZVxuICAgICAgICB9JSlgXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIC8vIFNhdmUgYWN0aW9uIGZvciB0aGUgcm9sbFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9vbklubGluZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnaW5saW5lLXJlc3VsdCcpKSB7XG4gICAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fY29sbGFwc2VJbmxpbmVSZXN1bHQoYSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suX2V4cGFuZElubGluZVJlc3VsdChhKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfb25Ub2dnbGVTZWxlY3RlZCAoZXZlbnQpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICBDb0M3TWVsZWVUYXJnZXQudXBkYXRlU2VsZWN0ZWQoY2FyZCwgZXZlbnQpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWQgPT09ICcnKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvck5vRG9kZ2VTa2lsbCcpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgLy8gY2xlYXIgYWxsIGRyb3AgZG93biBhbmQgaGlnaGxpZ2h0IHRoaXMgcGFydGljdWxhciBvbmVcbiAgICBjb25zdCBkcm9wRG93bkJveGVzID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5yZXNwb25zZS1zZWxlY3Rpb24nKVxuICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJy50b2dnbGUtc3dpdGNoJylcbiAgICBmb3IgKGNvbnN0IGRwZG5Cb3ggb2YgZHJvcERvd25Cb3hlcykge1xuICAgICAgZHBkbkJveC5jbGFzc0xpc3QucmVtb3ZlKCdzd2l0Y2hlZC1vbicpXG4gICAgfVxuICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnc3dpdGNoZWQtb24nKSAvLyBOZWVkIHRvIHRlc3QgaWYgaXQncyByZWFsbHkgYSBkb2RnZSAhISFcblxuICAgIC8vIFNhdmUgYWN0aW9uIGZvciB0aGUgcm9sbFxuICAgIGNvbnN0IHNlbGVjdGVkQm94ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgLmNsb3Nlc3QoJy5kZWZlbmRlci1hY3Rpb24tc2VsZWN0JylcbiAgICAgIC5xdWVyeVNlbGVjdG9yKCcuc2VsZWN0ZWQtYWN0aW9uJylcbiAgICBzZWxlY3RlZEJveC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIGNvbnN0IGJ1dHRvbiA9IHNlbGVjdGVkQm94LnF1ZXJ5U2VsZWN0b3IoJ2J1dHRvbicpXG5cbiAgICBidXR0b24uZGF0YXNldC5hY3Rpb24gPSAnZGVmZW5kaW5nJ1xuICAgIGJ1dHRvbi5kYXRhc2V0LmFjdGlvblR5cGUgPSAnZG9kZ2luZydcbiAgICBidXR0b24uZGF0YXNldC5kZWZlbmRlckNob2ljZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25cbiAgICBidXR0b24uZGF0YXNldC5za2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICBidXR0b24uZGF0YXNldC5za2lsbFZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsVmFsdWVcbiAgICBidXR0b24uZGF0YXNldC5za2lsbE5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lXG5cbiAgICBidXR0b24uaW5uZXJUZXh0ID0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgQ09DNy5jb21iYXRDYXJkc1tldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXVxuICAgICl9IDogJHtldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGxOYW1lfSAoJHtcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFZhbHVlXG4gICAgfSUpYFxuICB9XG5cbiAgc3RhdGljIF9vbkNoYXRDYXJkUmFkaW9Td2l0Y2ggKGV2ZW50KSB7XG4gICAgLy8gY29uc29sZS5sb2coJy0tPkNvQzdDaGF0Ll9vbkNoYXRDYXJkUmFkaW9Td2l0Y2gnKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgb3B0aW9uTGlzdCA9XG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgncmFkaW8tc3dpdGNoJylcbiAgICBsZXQgaW5kZXhcbiAgICBmb3IgKGluZGV4ID0gMDsgaW5kZXggPCBvcHRpb25MaXN0Lmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgZWxlbWVudCA9IG9wdGlvbkxpc3RbaW5kZXhdXG4gICAgICBpZiAoZWxlbWVudC5kYXRhc2V0LnByb3BlcnR5ID09PSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHkpIHtcbiAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKCdzd2l0Y2hlZC1vbicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3N3aXRjaGVkLW9uJylcbiAgICAgIH1cbiAgICB9XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQuc2VsZWN0ZWQgPVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRWb2xsZXlTaXplIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyYW5nZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIGNvbnN0IHJhbmdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luY3JlYXNlJykpIHtcbiAgICAgICAgICByYW5nZUNhcmQuY2hhbmdlVm9sbGV5U2l6ZSgxKVxuICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkZWNyZWFzZScpKSB7XG4gICAgICAgICAgcmFuZ2VDYXJkLmNoYW5nZVZvbGxleVNpemUoLTEpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX29uQ2hhdENhcmRUb2dnbGVTd2l0Y2ggKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuXG4gICAgY29uc3QgY2FyZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXQtY2FyZCcpXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgIENvQzdNZWxlZUluaXRpYXRvci51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuXG4gICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3RhcmdldCcpKSB7XG4gICAgICAgIENvQzdNZWxlZVRhcmdldC51cGRhdGVDYXJkU3dpdGNoKGV2ZW50KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdpbml0aWF0b3InKSkge1xuICAgICAgICBDb0M3UmFuZ2VJbml0aWF0b3IudXBkYXRlQ2FyZFN3aXRjaChldmVudClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhbWFnZScpKSB7XG4gICAgICAvLyBDb0M3SXRlbS51cGRhdGVDYXJkU3dpdGNoKCBldmVudCk7XG4gICAgfVxuXG4gICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdyb2xsLWNhcmQnKSkge1xuICAgICAgQ29DN0NoZWNrLnVwZGF0ZUNhcmRTd2l0Y2goZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgQWN0b3Igd2hpY2ggaXMgdGhlIGF1dGhvciBvZiBhIGNoYXQgY2FyZFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICAgIFRoZSBjaGF0IGNhcmQgYmVpbmcgdXNlZFxuICAgKiBAcmV0dXJuIHtBY3RvcnxudWxsfSAgICAgICAgIFRoZSBBY3RvciBlbnRpdHkgb3IgbnVsbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9nZXRDaGF0Q2FyZEFjdG9yIChjYXJkKSB7XG4gICAgLy8gaWYgZGF0YXNldC5vYmplY3QgaXMgdGhlcmUgPT4gbmVlZCB0byB1bmVzY2FwZSB0aGluZ3MgISFcbiAgICAvLyBpZiBub3QgdXNlIHRoZSBkYXRhc2V0IGRpcmVjdGx5LlxuICAgIGNvbnN0IGNhcmREYXRhID0gY2FyZC5kYXRhc2V0Lm9iamVjdFxuICAgICAgPyBKU09OLnBhcnNlKHVuZXNjYXBlKGNhcmQuZGF0YXNldC5vYmplY3QpKVxuICAgICAgOiBjYXJkLmRhdGFzZXRcblxuICAgIGlmIChjYXJkRGF0YS5hY3RvcktleSkgcmV0dXJuIENvQzdDaGF0Ll9nZXRBY3RvckZyb21LZXkoY2FyZERhdGEuYWN0b3JLZXkpXG5cbiAgICAvLyBDYXNlIDEgLSBhIHN5bnRoZXRpYyBhY3RvciBmcm9tIGEgVG9rZW5cbiAgICBjb25zdCB0b2tlbktleSA9IGNhcmREYXRhLnRva2VuSWRcbiAgICBpZiAodG9rZW5LZXkpIHtcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IHRva2VuS2V5LnNwbGl0KCcuJylcbiAgICAgIGlmIChzY2VuZUlkID09PSAnVE9LRU4nKSB7XG4gICAgICAgIHJldHVybiBnYW1lLmFjdG9ycy50b2tlbnNbdG9rZW5JZF0gLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzY2VuZUlkKVxuICAgICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbikgcmV0dXJuIG51bGxcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yIHx8IG5ldyBUb2tlbih0b2tlbkRhdGEpLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkRGF0YS5hY3RvcklkXG4gICAgaWYgKGFjdG9ySWQpIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZClcblxuICAgIGNvbnN0IG1lc3NhZ2UgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlID8gbWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCA6IG51bGxcbiAgICBpZiAobWVzc2FnZUlkKSB7XG4gICAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcbiAgICAgIGlmIChjaGF0TWVzc2FnZS51c2VyKSByZXR1cm4gY2hhdE1lc3NhZ2UudXNlci5jaGFyYWN0ZXJcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc3RhdGljIGlzQ2FyZE93bmVyIChjYXJkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNhcmQuY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIGNvbnN0IG1lc3NhZ2VJZCA9IG1lc3NhZ2UgPyBtZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkIDogbnVsbFxuICAgIGlmIChtZXNzYWdlSWQpIHtcbiAgICAgIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgICAgcmV0dXJuIGNoYXRNZXNzYWdlLm93bm5lciB8fCBmYWxzZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIF9nZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBzY2VuZS5nZXRFbWJlZGRlZERvY3VtZW50KCdUb2tlbicsIHRva2VuSWQpXG4gICAgICAgIGlmICghdG9rZW4pIHJldHVybiBudWxsXG4gICAgICAgIHJldHVybiB0b2tlbi5hY3RvciB8fCBuZXcgVG9rZW4odG9rZW5EYXRhKS5hY3RvclxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENhc2UgMiAtIHVzZSBBY3RvciBJRCBkaXJlY3RvcnlcbiAgICByZXR1cm4gZ2FtZS5hY3RvcnMuZ2V0KGtleSkgfHwgbnVsbFxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbVRva2VuICh0b2tlbktleSkge1xuICAgIGNvbnN0IHRva2VuID0gQ29DN0NoYXQuZ2V0VG9rZW4odG9rZW5LZXkpXG4gICAgcmV0dXJuIHRva2VuID8gdG9rZW4uYWN0b3IgOiBudWxsXG4gIH1cblxuICBzdGF0aWMgZ2V0VG9rZW4gKHRva2VuS2V5KSB7XG4gICAgaWYgKHRva2VuS2V5KSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB0b2tlbktleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICBjb25zdCB0b2tlbkRvYyA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXT8udG9rZW5cbiAgICAgICAgcmV0dXJuIHRva2VuRG9jLm9iamVjdCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuKSByZXR1cm4gbnVsbFxuICAgICAgICByZXR1cm4gdG9rZW4gfHwgbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiB1cGRhdGUgYSBjaGF0IG1lc3NhZ2Ugd2l0aCBhIG5ldyBIVE1MIGNvbnRlbnQgYW5kIHBvcHVsYXRlIGl0LlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKGNhcmQsIG1lc3NJZCA9IG51bGwpIHtcbiAgICBjb25zdCBtZXNzYWdlSWQgPVxuICAgICAgbWVzc0lkID09IG51bGwgPyBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWQgOiBtZXNzSWRcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBjYXJkLm91dGVySFRNTCB9KVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DaGF0Q2FyZEFjdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnLS0+Q29DN0NoYXQuX29uQ2hhdENhcmRBY3Rpb24nKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBidXR0b24gPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgY2FyZCA9IGJ1dHRvbi5jbG9zZXN0KCcuY2hhdC1jYXJkJylcbiAgICBpZiAoIWNhcmQpIHJldHVyblxuICAgIGNvbnN0IG9yaWdpbk1lc3NhZ2UgPSBidXR0b24uY2xvc2VzdCgnLm1lc3NhZ2UnKVxuICAgIC8vIGNvbnN0IG1lc3NhZ2VJZCA9IG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQ7XG4gICAgY29uc3QgYWN0aW9uID0gYnV0dG9uLmRhdGFzZXQuYWN0aW9uXG5cbiAgICBpZiAoIUNvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpKSByZXR1cm5cblxuICAgIHN3aXRjaCAoYWN0aW9uKSB7XG4gICAgICBjYXNlICd1c2VMdWNrJzoge1xuICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgY29uc3QgbmV3U3VjY2Vzc0xldmVsID0gcGFyc2VJbnQoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm5ld1N1Y2Nlc3NMZXZlbFxuICAgICAgICApXG5cbiAgICAgICAgaWYgKGNhcmQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtZWxlZScpKSB7XG4gICAgICAgICAgbGV0IG1lbGVlQ2FyZFxuICAgICAgICAgIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygndGFyZ2V0JykpIHtcbiAgICAgICAgICAgIG1lbGVlQ2FyZCA9IENvQzdNZWxlZVRhcmdldC5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ2luaXRpYXRvcicpKSB7XG4gICAgICAgICAgICBtZWxlZUNhcmQgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICB9XG4gICAgICAgICAgbWVsZWVDYXJkLnVwZ3JhZGVSb2xsKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgY2FyZCkgLy8gVE9ETyA6IENoZWNrIGlmIHRoaXMgbmVlZHMgdG8gYmUgYXN5bmNcbiAgICAgICAgfSBlbHNlIGlmIChjYXJkLmNsYXNzTGlzdC5jb250YWlucygncmFuZ2UnKSkge1xuICAgICAgICAgIGNvbnN0IHJhbmdlQ2FyZCA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICAgIGNvbnN0IHJvbGxSZXN1bHQgPSBidXR0b24uY2xvc2VzdCgnLnJvbGwtcmVzdWx0JylcbiAgICAgICAgICBjb25zdCByb2xsSW5kZXggPSByb2xsUmVzdWx0XG4gICAgICAgICAgICA/IHBhcnNlSW50KHJvbGxSZXN1bHQuZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIDogbnVsbFxuICAgICAgICAgIGlmIChidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKCdwYXNzLWNoZWNrJykpIHtcbiAgICAgICAgICAgIHJhbmdlQ2FyZC5wYXNzUm9sbChyb2xsSW5kZXgpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHVwZ3JhZGVJbmRleCA9IHBhcnNlSW50KGJ1dHRvbi5kYXRhc2V0LmluZGV4KVxuICAgICAgICAgICAgcmFuZ2VDYXJkLnVwZ3JhZGVSb2xsKHJvbGxJbmRleCwgdXBncmFkZUluZGV4KSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBjYXJkLmNsYXNzTGlzdC5jb250YWlucygncm9sbC1jYXJkJykgfHxcbiAgICAgICAgICBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpICE9IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgICBpZiAoYnV0dG9uLmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgICBjb25zdCBsdWNrQW1vdW50ID0gcGFyc2VJbnQoYnV0dG9uLmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgICAgIGNoZWNrLmZvcmNlUGFzcyhsdWNrQW1vdW50KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB1cGdyYWRlSW5kZXggPSBwYXJzZUludChidXR0b24uZGF0YXNldC5pbmRleClcbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnVwZ3JhZGVDaGVjayh1cGdyYWRlSW5kZXgpXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IGFjdG9yID0gQ29DN0NoYXQuX2dldENoYXRDYXJkQWN0b3IoY2FyZClcbiAgICAgICAgICBjb25zdCBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyID1cbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcblxuICAgICAgICAgIGlmIChhY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgICAgICAgICAgY2FyZC5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgICAgICAgICAgY2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9ICdmYWxzZScgLy8gdHJpZ2dlciAzIHVwZGF0ZXMgZGUgY2FyZFxuICAgICAgICAgICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXI6XG4gICAgICAgICAgICAgICAgcmVzdWx0LmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgICAgICAgICAgZGV0YWlsZWRSZXN1bHRQbGFjZUhvbGRlci5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZFN1Y2Nlc3MnKVxuICAgICAgICAgICAgICAgIGRldGFpbGVkUmVzdWx0UGxhY2VIb2xkZXIuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsOlxuICAgICAgICAgICAgICAgIHJlc3VsdC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgICAgICAgICBkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICAgICAgICAgIHJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdmdW1ibGUnKVxuICAgICAgICAgICAgY2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICAgICAgICAgIGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICAgICAgICAgIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKGNhcmQpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JOb3RFbm91Z2hMdWNrJywge1xuICAgICAgICAgICAgICAgIGFjdG9yOiBhY3Rvci5uYW1lXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdwdXNoJzoge1xuICAgICAgICBjb25zdCBuZXdDYXJkID0gY2FyZC5jbG9uZU5vZGUodHJ1ZSkgLy8gVE9ETyBub3QgbmVjZXNzYXJ5XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ld0NhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgICAgICByZXN1bHQuaW5uZXJUZXh0ID1cbiAgICAgICAgICByZXN1bHQuaW5uZXJUZXh0ICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlB1c2hpbmdTa2lsbCcpXG4gICAgICAgIHJlc3VsdC5jbGFzc0xpc3QucmVtb3ZlKCdmYWlsdXJlJylcbiAgICAgICAgbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1idXR0b25zJykucmVtb3ZlKClcbiAgICAgICAgbmV3Q2FyZC5kYXRhc2V0LnB1c2hlZFJvbGwgPSB0cnVlXG4gICAgICAgIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKG5ld0NhcmQsIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpXG4gICAgICAgIGF3YWl0IENvQzdDaGVjay5wdXNoKGNhcmQpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdkZWZlbmRpbmcnOiB7XG4gICAgICAgIGxldCBkZWZlbmRlcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgICAgIC5kYXRhc2V0LnRva2VuSWRcbiAgICAgICAgbGV0IGRlZmVuZGVyXG4gICAgICAgIGlmICghZGVmZW5kZXJLZXkpIHtcbiAgICAgICAgICBkZWZlbmRlcktleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmRlZmVuZGVyLWFjdGlvbi1zZWxlY3QnKVxuICAgICAgICAgICAgLmRhdGFzZXQuYWN0b3JJZFxuICAgICAgICAgIGRlZmVuZGVyID0gZ2FtZS5hY3RvcnMuZ2V0KGRlZmVuZGVyS2V5KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlZmVuZGVyID0gdGhpcy5nZXRBY3RvckZyb21Ub2tlbihkZWZlbmRlcktleSlcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5hY3Rpb25UeXBlXG4gICAgICAgIGNvbnN0IG91dG51bWJlcmVkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Lm91dG51bWJlcmVkID09PSAndHJ1ZSdcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2sucmVmZXJlbmNlTWVzc2FnZUlkID0gb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZFxuICAgICAgICBjaGVjay5yb2xsVHlwZSA9ICdvcHBvc2VkJ1xuICAgICAgICBjaGVjay5zaWRlID0gJ3RhcmdldCdcbiAgICAgICAgY2hlY2suYWN0aW9uID0gcmVzcG9uc2VUeXBlXG4gICAgICAgIHN3aXRjaCAocmVzcG9uc2VUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnZG9kZ2luZyc6XG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgICAgICBpZiAob3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciA9IC0xXG5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnZmlnaHRCYWNrJzpcbiAgICAgICAgICAgIGNoZWNrLmFjdG9yID0gZGVmZW5kZXJcbiAgICAgICAgICAgIGNoZWNrLnNraWxsID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsSWRcbiAgICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgICAgIGNoZWNrLml0ZW0gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuaXRlbUlkXG4gICAgICAgICAgICBpZiAob3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciA9IC0xXG5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnbWFuZXV2ZXInOiB7XG4gICAgICAgICAgICBjb25zdCBhY3RvciA9IENvQzdDaGF0Ll9nZXRDaGF0Q2FyZEFjdG9yKGNhcmQpXG4gICAgICAgICAgICBpZiAoZGVmZW5kZXIuYnVpbGQgPD0gYWN0b3IuYnVpbGQgLSAzKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTWFuZXV2ZXJOb3RQb3NzaWJsZScpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGVjay5hY3RvciA9IGRlZmVuZGVyXG4gICAgICAgICAgICBjaGVjay5za2lsbCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgICAgICAgICBpZiAob3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciA9IC0xXG4gICAgICAgICAgICBpZiAoZGVmZW5kZXIuYnVpbGQgPCBhY3Rvci5idWlsZCkge1xuICAgICAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPVxuICAgICAgICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciAtIChhY3Rvci5idWlsZCAtIGRlZmVuZGVyLmJ1aWxkKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoY2hlY2suZGljZU1vZGlmaWVyIDwgLTIpIHtcbiAgICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9XG4gICAgICAgICAgICAgICAgY2hlY2suZGlmZmljdWx0eSArIE1hdGguYWJzKGNoZWNrLmRpY2VNb2RpZmllcikgLSAyXG4gICAgICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IC0yXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ21lbGVlLWluaXRpYXRvci1yb2xsJzoge1xuICAgICAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBpbml0aWF0b3IucGVyZm9ybVNraWxsQ2hlY2soXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNraWxsXG4gICAgICAgIClcbiAgICAgICAgJChidXR0b24pLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICAgICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QoY2hlY2suZGljZS5yb2xsKVxuICAgICAgICBhd2FpdCBpbml0aWF0b3IucHVibGlzaENoZWNrUmVzdWx0KClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnbWVsZWUtdGFyZ2V0LW5vLXJlc3BvbnNlJzoge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSBDb0M3TWVsZWVUYXJnZXQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgdGFyZ2V0LnB1Ymxpc2hOb1JlcG9uc2VSZXN1bHQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdtZWxlZS10YXJnZXQtcm9sbCc6IHtcbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gQ29DN01lbGVlVGFyZ2V0LmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgdGFyZ2V0LnBlcmZvcm1Ta2lsbENoZWNrKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbFxuICAgICAgICApXG4gICAgICAgICQoYnV0dG9uKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpXG4gICAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKGNoZWNrLmRpY2Uucm9sbClcbiAgICAgICAgYXdhaXQgdGFyZ2V0LnB1Ymxpc2hDaGVja1Jlc3VsdCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBjYXNlICdyb2xsLW1lbGVlLWRhbWFnZSc6IHtcbiAgICAgICAgY29uc3QgZGFtYWdlQ2hhdENhcmQgPSBuZXcgRGFtYWdlQ2FyZCh7XG4gICAgICAgICAgY3JpdGljYWw6IGJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsID09PSAndHJ1ZScsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGV2ZW50LnNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLmFjdG9yS2V5ID0gYnV0dG9uLmRhdGFzZXQuZGVhbGVyXG4gICAgICAgIGRhbWFnZUNoYXRDYXJkLnRhcmdldEtleSA9IGJ1dHRvbi5kYXRhc2V0LnRhcmdldFxuICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5pdGVtSWQgPSBidXR0b24uZGF0YXNldC53ZWFwb25cbiAgICAgICAgaWYgKG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIHtcbiAgICAgICAgICBkYW1hZ2VDaGF0Q2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkXG4gICAgICAgIH1cbiAgICAgICAgZGFtYWdlQ2hhdENhcmQudXBkYXRlQ2hhdENhcmQoKVxuXG4gICAgICAgIC8vIGNvbnN0IGRhbWFnZUNhcmQgPSBuZXcgQ29DN0RhbWFnZVJvbGwoXG4gICAgICAgIC8vICBidXR0b24uZGF0YXNldC53ZWFwb24sXG4gICAgICAgIC8vICBidXR0b24uZGF0YXNldC5kZWFsZXIsXG4gICAgICAgIC8vICB7XG4gICAgICAgIC8vICAgIHRhcmdldEtleTogYnV0dG9uLmRhdGFzZXQudGFyZ2V0LFxuICAgICAgICAvLyAgICBjcml0aWNhbDogJ3RydWUnID09IGJ1dHRvbi5kYXRhc2V0LmNyaXRpY2FsLFxuICAgICAgICAvLyAgICBmYXN0Rm9yd2FyZDogZXZlbnQuc2hpZnRLZXlcbiAgICAgICAgLy8gIH0pO1xuICAgICAgICAvLyBpZiggb3JpZ2luTWVzc2FnZS5kYXRhc2V0Lm1lc3NhZ2VJZCkgZGFtYWdlQ2FyZC5tZXNzYWdlSWQgPSBvcmlnaW5NZXNzYWdlLmRhdGFzZXQubWVzc2FnZUlkO1xuICAgICAgICAvLyBkYW1hZ2VDYXJkLnJvbGxEYW1hZ2UoKTtcbiAgICAgICAgLy8gaWYoIG9yaWdpbk1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQpIHtcbiAgICAgICAgLy8gIGZvciAoY29uc3QgYiBvZiBjYXJkLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJkLWJ1dHRvbnMnKSkgeyBiLnJlbW92ZSgpIH1cbiAgICAgICAgLy8gIGF3YWl0IENvQzdDaGF0LnVwZGF0ZUNoYXRDYXJkKCBjYXJkKTtcbiAgICAgICAgLy8gfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncmFuZ2UtaW5pdGlhdG9yLXNob290Jzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICByYW5nZUluaXRpYXRvci5hZGRTaG90QXRDdXJyZW50VGFyZ2V0KClcbiAgICAgICAgYXdhaXQgcmFuZ2VJbml0aWF0b3IudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgY2FzZSAncmFuZ2UtaW5pdGlhdG9yLXJvbGwnOiB7XG4gICAgICAgIGNvbnN0IHJhbmdlSW5pdGlhdG9yID0gQ29DN1JhbmdlSW5pdGlhdG9yLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHJhbmdlSW5pdGlhdG9yLnJlc29sdmVDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ3JvbGwtcmFuZ2UtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5yb2xsRGFtYWdlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2RlYWwtbWVsZWUtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCB0YXJnZXRLZXkgPSBjYXJkLmRhdGFzZXQudGFyZ2V0S2V5XG4gICAgICAgIGNvbnN0IGFtb3VudCA9IGNhcmQuZGF0YXNldC5yZXN1bHRcbiAgICAgICAgY29uc3QgdGFyZ2V0QWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0YXJnZXRLZXkpIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgICBhd2FpdCB0YXJnZXRBY3Rvci5kZWFsRGFtYWdlKGFtb3VudClcbiAgICAgICAgY29uc3QgYnV0dG9ucyA9IGNhcmQucXVlcnlTZWxlY3RvcignLmNhcmQtYnV0dG9ucycpXG4gICAgICAgIGNvbnN0IGRpY2VUb3RhbCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG90YWwnKVxuICAgICAgICAkKGRpY2VUb3RhbCkuYXBwZW5kKCc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nKVxuICAgICAgICBpZiAoYnV0dG9ucykgYnV0dG9ucy5yZW1vdmUoKVxuICAgICAgICBhd2FpdCBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChjYXJkKVxuXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlYWwtcmFuZ2UtZGFtYWdlJzoge1xuICAgICAgICBjb25zdCByYW5nZUluaXRpYXRvciA9IENvQzdSYW5nZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBhd2FpdCByYW5nZUluaXRpYXRvci5kZWFsRGFtYWdlKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAndGVzdGNoZWNrJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5mb3JjZVBhc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1wYXNzJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5mb3JjZVBhc3MoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1mYWlsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5mb3JjZUZhaWwoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdpbmNyZWFzZS1zdWNjZXNzLWxldmVsJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5pbmNyZWFzZVN1Y2Nlc3NMZXZlbCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlY3JlYXNlLXN1Y2Nlc3MtbGV2ZWwnOiB7XG4gICAgICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNoZWNrLmRlY3JlYXNlU3VjY2Vzc0xldmVsKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmV2ZWFsLWNoZWNrJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICAgICAgY2hlY2suY29tcHV0ZUNoZWNrKClcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGlzQ3RybEtleShldmVudClcbiAgICAgICAgKSB7XG4gICAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBtYWtlUHVibGljOiB0cnVlIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoeyBtYWtlUHVibGljOiB0cnVlIH0pXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1jaGVjay1jYXJkJzoge1xuICAgICAgICBjb25zdCBjaGVjayA9IGF3YWl0IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgICBjaGVjay5zdGFuZGJ5ID0gZmFsc2VcbiAgICAgICAgYXdhaXQgY2hlY2suX3BlcmZvcm0oKVxuICAgICAgICBjaGVjay51cGRhdGVDaGF0Q2FyZCh7IGZvcmNlUm9sbDogdHJ1ZSB9KVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmbGFnLWZvci1kZXZlbG9wbWVudCc6IHtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBhd2FpdCBDb0M3Q2hlY2suZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgY2hlY2suZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVzZXQtY3JlYXR1cmUtc2FuLWRhdGEnOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLmNsZWFyU2FuTG9zc1JlYXNvbigpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncm9sbC1zYW4tY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnJvbGxTYW4oKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2FkdmFuY2Utc3RhdGUnOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLmFkdmFuY2VTdGF0ZShcbiAgICAgICAgICBidXR0b24uZGF0YXNldC5zdGF0ZSAvKiwgYnV0dG9uLmRhdGFzZXQucGFyYW0gKi9cbiAgICAgICAgKVxuICAgICAgICBhd2FpdCBzYW5DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JvbGwtc2FuLWxvc3MnOiB7XG4gICAgICAgIGNvbnN0IHNhbkNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IHNhbkNoZWNrLnJvbGxTYW5Mb3NzKClcbiAgICAgICAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyb2xsLWludC1jaGVjayc6IHtcbiAgICAgICAgY29uc3Qgc2FuQ2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoY2FyZClcbiAgICAgICAgYXdhaXQgc2FuQ2hlY2sucm9sbEludCgpXG4gICAgICAgIHNhbkNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgLy8gY2FzZSAnYXBwbHktc2FuLWxvc3MnOntcbiAgICAgIC8vICBjb25zdCBzYW5DaGVjayA9IENvQzdTYW5DaGVjay5nZXRGcm9tQ2FyZCggY2FyZCk7XG4gICAgICAvLyAgYXdhaXQgc2FuQ2hlY2suYXBwbHlTYW5Mb3NzKCk7XG4gICAgICAvLyAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKTtcbiAgICAgIC8vICBicmVhaztcbiAgICAgIC8vIH1cblxuICAgICAgLy8gY2FzZSAncmV2ZWFsLXNhbi1jaGVjayc6e1xuICAgICAgLy8gIGNvbnN0IHNhbkNoZWNrID0gQ29DN1NhbkNoZWNrLmdldEZyb21DYXJkKCBjYXJkKTtcbiAgICAgIC8vICBzYW5DaGVjay5pc0JsaW5kID0gZmFsc2U7XG4gICAgICAvLyAgc2FuQ2hlY2sudXBkYXRlQ2hhdENhcmQoKTtcbiAgICAgIC8vICBicmVhaztcbiAgICAgIC8vIH1cblxuICAgICAgY2FzZSAncm9sbC1jb24tY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IGNvbkNoZWNrID0gQ29DN0NvbkNoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGF3YWl0IGNvbkNoZWNrLnJvbGxDb24oKVxuICAgICAgICBjb25DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3JldmVhbC1jb24tY2hlY2snOiB7XG4gICAgICAgIGNvbnN0IGNvbkNoZWNrID0gQ29DN0NvbkNoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgICAgIGNvbkNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgICAgICBjb25DaGVjay51cGRhdGVDaGF0Q2FyZCgpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0b2dnbGluZyB0aGUgdmlzaWJpbGl0eSBvZiBjaGF0IGNhcmQgY29udGVudCB3aGVuIHRoZSBuYW1lIGlzIGNsaWNrZWRcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgICBUaGUgb3JpZ2luYXRpbmcgY2xpY2sgZXZlbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN0YXRpYyBfb25DaGF0Q2FyZFRvZ2dsZUNvbnRlbnQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGhlYWRlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBjYXJkID0gaGVhZGVyLmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGNvbnN0IGNvbnRlbnQgPSBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWNvbnRlbnQnKVxuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBpZiAoIWNvbnRlbnQuc3R5bGUuZGlzcGxheSkge1xuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250ZW50LnN0eWxlLmRpc3BsYXkgPVxuICAgICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9PT0gJ25vbmUnID8gJ2Jsb2NrJyA6ICdub25lJ1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENoYXRNZXNzYWdlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgdWkgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uLy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBDb0M3TWVsZWVSZXNvbHRpb24gfSBmcm9tICcuL21lbGVlLXJlc29sdXRpb24uanMnXG5pbXBvcnQgeyBDaGF0Q2FyZEFjdG9yIH0gZnJvbSAnLi4vY2FyZC1hY3Rvci5qcydcblxuLy8gVE9ETyA6IHLDqWN1cMOpcmVyIGxlIGpldCBlbiB0YW50IHF1J29iamV0ICEhIVxuZXhwb3J0IGNsYXNzIENvQzdNZWxlZUluaXRpYXRvciBleHRlbmRzIENoYXRDYXJkQWN0b3Ige1xuICBjb25zdHJ1Y3RvciAoYWN0b3JLZXkgPSBudWxsLCBpdGVtSWQgPSBudWxsLCBmYXN0Rm9yd2FyZCA9IGZhbHNlKSB7XG4gICAgc3VwZXIoYWN0b3JLZXksIGZhc3RGb3J3YXJkKVxuICAgIHRoaXMuaXRlbUlkID0gaXRlbUlkXG4gICAgdGhpcy5yZXNvbHZlZCA9IGZhbHNlXG4gICAgdGhpcy5vdXRudW1iZXJlZCA9IGZhbHNlXG4gICAgdGhpcy5zdXJwcmlzZWQgPSBmYWxzZVxuICAgIHRoaXMuYXV0b1N1Y2Nlc3MgPSBmYWxzZVxuICAgIHRoaXMuYWR2YW50YWdlID0gZmFsc2VcbiAgICB0aGlzLmRpc2FkdmFudGFnZSA9IGZhbHNlXG4gICAgdGhpcy5tZXNzYWdlSWQgPSBudWxsXG4gICAgdGhpcy50YXJnZXRDYXJkID0gbnVsbFxuICAgIHRoaXMucm9sbGVkID0gZmFsc2VcbiAgfVxuXG4gIGdldCB0ZW1wbGF0ZSAoKSB7XG4gICAgcmV0dXJuICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5odG1sJ1xuICB9XG5cbiAgYXN5bmMgcmV2ZWFsQ2hlY2sgKCkge1xuICAgIC8vIFRPRE8gOiBvbiB1dGlsaXNlIGwndXBkYXRlIGR1IG1lc3NhZ2UgYXUgbGlldSBkZSByZWNvbnN0cnVpcmUgbCdvYmpldC4gQ2hhbmdlciBjZSBjb21wb3J0ZW1lbnQuXG4gICAgY29uc3QgY2hhdE1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldCh0aGlzLm1lc3NhZ2VJZClcblxuICAgIGF3YWl0IGNoYXRNZXNzYWdlLnNldEZsYWcoJ0NvQzcnLCAnY2hlY2tSZXZlYWxlZCcsIHRydWUpXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKGNoYXRNZXNzYWdlLCBmYWxzZSlcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUNoYXRDYXJkICgpIHtcbiAgICBjaGF0SGVscGVyLmdldEFjdG9ySW1nRnJvbUtleSh0aGlzLmFjdG9yS2V5KVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGlmICh0aGlzLnRva2VuKSBzcGVha2VyRGF0YS50b2tlbiA9IHRoaXNcbiAgICBlbHNlIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpc1xuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHNwZWFrZXJEYXRhKVxuXG4gICAgY29uc3QgdXNlciA9IHRoaXMuYWN0b3IudXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9XG5cbiAgICBpZiAoWydnbXJvbGwnLCAnYmxpbmRyb2xsJ10uaW5jbHVkZXModGhpcy5yb2xsTW9kZSkpIHtcbiAgICAgIGNoYXREYXRhLndoaXNwZXIgPSBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgIH1cbiAgICAvLyBpZiAoIHRoaXMuaXNCbGluZCApIGNoYXREYXRhWydibGluZCddID0gdHJ1ZTtcbiAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG5cbiAgICBjb25zdCBjaGF0TWVzc2FnZSA9IGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZShjaGF0RGF0YSlcblxuICAgIHJldHVybiBjaGF0TWVzc2FnZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKCkge1xuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3QgbWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMubWVzc2FnZUlkKVxuXG4gICAgY29uc3QgbXNnID0gYXdhaXQgbWVzc2FnZS51cGRhdGUoeyBjb250ZW50OiBodG1sIH0pXG4gICAgYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpXG4gICAgcmV0dXJuIG1zZ1xuICB9XG5cbiAgdG9nZ2xlRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBjb25zdCBmbGFnID0gZmxhZ05hbWUuaW5jbHVkZXMoJy0nKVxuICAgICAgPyBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWdOYW1lKVxuICAgICAgOiBmbGFnTmFtZVxuICAgIHRoaXNbZmxhZ10gPSAhdGhpc1tmbGFnXVxuICB9XG5cbiAgYXN5bmMgcGVyZm9ybVNraWxsQ2hlY2sgKHNraWxsSWQgPSBudWxsLCBwdWJsaXNoID0gZmFsc2UpIHtcbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgIC8vIENvbWJhdCByb2xsIGNhbm5vdCBiZSBibGluZCBvciB1bmtub3duXG4gICAgY2hlY2suaXNCbGluZCA9IGZhbHNlXG4gICAgY2hlY2suaXNVbmtvbnduID0gZmFsc2VcbiAgICBjaGVjay5yZWZlcmVuY2VNZXNzYWdlSWQgPSB0aGlzLm1lc3NhZ2VJZFxuICAgIGNoZWNrLnJvbGxUeXBlID0gJ29wcG9zZWQnXG4gICAgY2hlY2suc2lkZSA9ICdpbml0aWF0b3InXG4gICAgY2hlY2suYWN0aW9uID0gJ2F0dGFjaydcbiAgICBjaGVjay5hY3RvciA9IHRoaXMuYWN0b3JLZXlcbiAgICBjaGVjay5pdGVtID0gdGhpcy5pdGVtSWRcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgY2hlY2suZGljZU1vZGlmaWVyID0gMFxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB0aGlzLmNoZWNrUmV2ZWFsZWQgPSBmYWxzZVxuICAgIGVsc2UgdGhpcy5jaGVja1JldmVhbGVkID0gdHJ1ZVxuXG4gICAgaWYgKHRoaXMub3V0bnVtYmVyZWQpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG4gICAgaWYgKHRoaXMuc3VycHJpc2VkKSBjaGVjay5kaWNlTW9kaWZpZXIgKz0gMVxuICAgIGlmICh0aGlzLmRpc2FkdmFudGFnZSkgY2hlY2suZGljZU1vZGlmaWVyIC09IDFcbiAgICBpZiAodGhpcy5hZHZhbnRhZ2UpIGNoZWNrLmRpY2VNb2RpZmllciArPSAxXG5cbiAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcbiAgICB0aGlzLnJlc29sdmVkID0gdHJ1ZVxuICAgIGlmIChwdWJsaXNoKSBjaGVjay50b01lc3NhZ2UoKVxuXG4gICAgdGhpcy5jcml0aWNhbERhbWFnZSA9XG4gICAgICBjaGVjay5zdWNjZXNzTGV2ZWwgPT09IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSB8fFxuICAgICAgY2hlY2suc3VjY2Vzc0xldmVsID09PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmNyaXRpY2FsXG4gICAgaWYgKHRoaXMuaGFzVGFyZ2V0ICYmICF0aGlzLmF1dG9TdWNjZXNzKSB7XG4gICAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgZ2FtZS5Db0M3c29ja2V0LmV4ZWN1dGVBc0dNKCdnbWNyZWF0ZW1lc3NhZ2VhcycsIHtcbiAgICAgICAgdGFyZ2V0S2V5OiB0aGlzLnRhcmdldEtleSxcbiAgICAgICAgbWVzc2FnZUlkOiB0aGlzLm1lc3NhZ2VJZCxcbiAgICAgICAgZmFzdEZvcndhcmQ6IHRoaXMuZmFzdEZvcndhcmQsXG4gICAgICAgIGFjdG9yS2V5OiB0aGlzLmFjdG9yS2V5XG4gICAgICB9KVxuICAgICAgdGhpcy50YXJnZXRDYXJkID0gbWVzc2FnZS5pZCB8fCBtZXNzYWdlLl9pZFxuICAgIH1cblxuICAgIGlmICh0aGlzLmF1dG9TdWNjZXNzICYmICF0aGlzLmNoZWNrLmlzRnVtYmxlKSB7XG4gICAgICB0aGlzLmNoZWNrLmZvcmNlUGFzcygpXG4gICAgfVxuICAgIHJldHVybiBjaGVja1xuICB9XG5cbiAgYXN5bmMgcHVibGlzaENoZWNrUmVzdWx0IChjaGVjayA9IG51bGwpIHtcbiAgICBpZiAoIWNoZWNrICYmICF0aGlzLmNoZWNrKSByZXR1cm4gbnVsbFxuXG4gICAgaWYgKGNoZWNrKSB0aGlzLmNoZWNrID0gY2hlY2tcbiAgICB0aGlzLnJvbGwgPSBDb0M3Um9sbC5nZXRGcm9tQ2hlY2sodGhpcy5jaGVjaylcbiAgICB0aGlzLnJvbGxlZCA9IHRydWVcblxuICAgIHRoaXMucm9sbC5yb2xsSWNvbnMgPSBbXVxuICAgIGlmICh0aGlzLnJvbGwuY3JpdGljYWwpIHtcbiAgICAgIHRoaXMucm9sbC5yb2xsQ29sb3IgPSAnZ29sZGVucm9kJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDQ7IGluZGV4KyspIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxJY29ucy5wdXNoKCdtZWRhbCcpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuZnVtYmxlKSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2RhcmtyZWQnXG4gICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgNDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3NwaWRlcicpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnJvbGwuc3VjY2Vzcykge1xuICAgICAgdGhpcy5yb2xsLnJvbGxDb2xvciA9ICdnb2xkZW5yb2QnXG4gICAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnJvbGwuc3VjY2Vzc0xldmVsKSB7XG4gICAgICAgIHRoaXMucm9sbC5yb2xsVGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgfVxuICAgICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgICB0aGlzLnJvbGwucm9sbFRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmRTdWNjZXNzJylcbiAgICAgIH1cbiAgICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMucm9sbC5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICB9XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLnJvbGwucm9sbEljb25zLnB1c2goJ3N0YXInKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJvbGwucm9sbENvbG9yID0gJ2JsYWNrJ1xuICAgICAgdGhpcy5yb2xsLnJvbGxUaXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJylcbiAgICAgIHRoaXMucm9sbC5yb2xsSWNvbnMucHVzaCgnc2t1bGwnKVxuICAgIH1cblxuICAgIGlmICghdGhpcy50YXJnZXRDYXJkICYmICF0aGlzLmF1dG9TdWNjZXNzICYmIHRoaXMuaGFzVGFyZ2V0KSB7XG4gICAgICBjb25zdCByZXNvbHV0aW9uQ2FyZCA9IG5ldyBDb0M3TWVsZWVSZXNvbHRpb24oXG4gICAgICAgIHRoaXMucGFyZW50TWVzc2FnZUlkLFxuICAgICAgICB0aGlzLm1lc3NhZ2VJZFxuICAgICAgKVxuICAgICAgY29uc3QgcmVzb2x1dGlvbk1lc3NhZ2UgPSBhd2FpdCByZXNvbHV0aW9uQ2FyZC5wcmVDcmVhdGVNZXNzYWdlKClcbiAgICAgIHRoaXMucmVzb2x1dGlvbkNhcmQgPSByZXNvbHV0aW9uTWVzc2FnZS5pZFxuICAgIH1cbiAgICBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tQ2FyZCAoY2FyZCwgbWVzc2FnZUlkID0gbnVsbCkge1xuICAgIGNvbnN0IGluaXRpYXRvciA9IG5ldyBDb0M3TWVsZWVJbml0aWF0b3IoKVxuICAgIGNoYXRIZWxwZXIuZ2V0T2JqZWN0RnJvbUVsZW1lbnQoaW5pdGlhdG9yLCBjYXJkKVxuICAgIGluaXRpYXRvci5yb2xsID0gQ29DN1JvbGwuZ2V0RnJvbUNhcmQoY2FyZClcblxuICAgIGlmIChjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykpIHtcbiAgICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBjYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJykuZGF0YXNldC5tZXNzYWdlSWRcbiAgICB9IGVsc2UgaW5pdGlhdG9yLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyBnZXRGcm9tTWVzc2FnZUlkIChtZXNzYWdlSWQpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQobWVzc2FnZUlkKVxuICAgIGlmICghbWVzc2FnZSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjYXJkID0gJChtZXNzYWdlLmNvbnRlbnQpWzBdXG5cbiAgICBjb25zdCBpbml0aWF0b3IgPSBDb0M3TWVsZWVJbml0aWF0b3IuZ2V0RnJvbUNhcmQoY2FyZCwgbWVzc2FnZUlkKVxuICAgIGluaXRpYXRvci5tZXNzYWdlSWQgPSBtZXNzYWdlSWRcblxuICAgIHJldHVybiBpbml0aWF0b3JcbiAgfVxuXG4gIHN0YXRpYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCwgcHVibGlzaFVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBjYXJkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcubWVsZWUuaW5pdGlhdG9yJylcbiAgICBjb25zdCBmbGFnID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWdcbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGZsYWcpXG5cbiAgICAvLyB1cGRhdGUgb25seSBmb3IgbG9jYWwgcGxheWVyXG4gICAgaWYgKCFwdWJsaXNoVXBkYXRlKSB7XG4gICAgICBjYXJkLmRhdGFzZXRbY2FtZWxGbGFnXSA9IGNhcmQuZGF0YXNldFtjYW1lbEZsYWddICE9PSAndHJ1ZSdcbiAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnc3dpdGNoZWQtb24nKVxuICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnNlbGVjdGVkID0gY2FyZC5kYXRhc2V0W2NhbWVsRmxhZ11cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIGNhcmQgZm9yIGFsbCBwbGF5ZXJcbiAgICAgIGNvbnN0IGluaXRpYXRvciA9IENvQzdNZWxlZUluaXRpYXRvci5nZXRGcm9tQ2FyZChjYXJkKVxuICAgICAgaW5pdGlhdG9yLnRvZ2dsZUZsYWcoZmxhZylcbiAgICAgIGluaXRpYXRvci51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgdXBncmFkZVJvbGwgKGx1Y2tBbW91bnQsIG5ld1N1Y2Nlc3NMZXZlbCwgb2xkQ2FyZCkge1xuICAgIC8vIFRPRE8gOiBDaGVjayBpZiB0aGlzIG5lZWRzIHRvIGJlIGFzeW5jXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5MdWNrTm90RW5vdWdoJywge1xuICAgICAgICAgIG5hbWU6IHRoaXMuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgICB0aGlzLnJvbGwudmFsdWUgPSBudWxsXG4gICAgdGhpcy5yb2xsLnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIHRoaXMucm9sbC5sdWNrU3BlbnQgPSB0cnVlXG4gICAgb2xkQ2FyZC5kYXRhc2V0LnByb2Nlc3NlZCA9IGZhbHNlXG5cbiAgICBjb25zdCBkaWNlUm9sbHMgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXJvbGwnKVxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnZhbHVlID0gbnVsbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0LnN1Y2Nlc3NMZXZlbCA9IG5ld1N1Y2Nlc3NMZXZlbFxuICAgIGRpY2VSb2xscy5kYXRhc2V0Lmx1Y2tTcGVudCA9IHRydWVcblxuICAgIGNvbnN0IHJlc3VsRGV0YWlscyA9IG9sZENhcmQucXVlcnlTZWxlY3RvcignLnJlc3VsdC1kZXRhaWxzJylcbiAgICBjb25zdCBkaWNlVG90YWwgPSBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5kaWNlLXRvdGFsJylcbiAgICBjb25zdCByb2xsRGFtYWdlQnV0dG9uID0gb2xkQ2FyZC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJ2J1dHRvbltkYXRhLWFjdGlvbj1cInJvbGwtbWVsZWUtZGFtYWdlXCJdJ1xuICAgIClcbiAgICBpZiAocm9sbERhbWFnZUJ1dHRvbikgcm9sbERhbWFnZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdpbnZpc2libGUnKVxuXG4gICAgc3dpdGNoIChuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICBkaWNlVG90YWwuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlZ3VsYXJTdWNjZXNzJylcbiAgICAgICAgcmVzdWxEZXRhaWxzLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgJ0NvQzcuUm9sbFJlc3VsdC5MdWNrU3BlbmRUZXh0JyxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBsdWNrQW1vdW50LFxuICAgICAgICAgICAgc3VjY2Vzc0xldmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhckRpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIHJlc3VsRGV0YWlscy5pbm5lclRleHQgPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICdDb0M3LlJvbGxSZXN1bHQuTHVja1NwZW5kVGV4dCcsXG4gICAgICAgICAge1xuICAgICAgICAgICAgbHVja0Ftb3VudCxcbiAgICAgICAgICAgIHN1Y2Nlc3NMZXZlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkhhcmREaWZmaWN1bHR5JylcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWU6XG4gICAgICAgIGlmIChyb2xsRGFtYWdlQnV0dG9uKSByb2xsRGFtYWdlQnV0dG9uLmRhdGFzZXQuY3JpdGljYWwgPSB0cnVlXG4gICAgICAgIGRpY2VUb3RhbC5pbm5lclRleHQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXh0cmVtZVN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgaWYgKHJvbGxEYW1hZ2VCdXR0b24pIHJvbGxEYW1hZ2VCdXR0b24uZGF0YXNldC5jcml0aWNhbCA9IHRydWVcbiAgICAgICAgZGljZVRvdGFsLmlubmVyVGV4dCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbFN1Y2Nlc3MnKVxuICAgICAgICByZXN1bERldGFpbHMuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAnQ29DNy5Sb2xsUmVzdWx0Lkx1Y2tTcGVuZFRleHQnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGx1Y2tBbW91bnQsXG4gICAgICAgICAgICBzdWNjZXNzTGV2ZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Dcml0aWNhbERpZmZpY3VsdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGRpY2VUb3RhbC5jbGFzc0xpc3QucmVwbGFjZSgnZmFpbHVyZScsICdzdWNjZXNzJylcbiAgICBvbGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLWJ1dHRvbnMnKS5yZW1vdmUoKVxuICAgIG9sZENhcmQucXVlcnlTZWxlY3RvcignLmRpY2UtdG9vbHRpcCcpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICBDb0M3Q2hhdC51cGRhdGVDaGF0Q2FyZChvbGRDYXJkKSAvLyBUT0RPIDogQ2hlY2sgaWYgdGhpcyBuZWVkcyB0byBiZSBhc3luY1xuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIEFwcGxpY2F0aW9uLCBDT05GSUcsIENPTlNULCBEaWFsb2csIERpZSwgZHVwbGljYXRlLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZnJvbVV1aWRTeW5jLCBnYW1lLCBnZXRQcm9wZXJ0eSwgSG9va3MsIG1lcmdlT2JqZWN0LCBSb2xsLCBUZXh0RWRpdG9yLCBUb2tlbiwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdE1lc3NhZ2UgfSBmcm9tICcuLi9hcHBzL2NvYzctY2hhdC1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgUm9sbERpYWxvZyB9IGZyb20gJy4uL2FwcHMvcm9sbC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc2VsZWN0aW9uLWRpYWxvZy5qcydcbmltcG9ydCB7IFBvaW50U2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9wb2ludC1zZWxlY3Rpb24tZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ2hhcmFjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9jaGFyLXNlbGVjdGlvbi1kaWFsb2cuanMnXG5pbXBvcnQgeyBDaGFyYWNSb2xsRGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9jaGFyLXJvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxTcGVjU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjLXNlbGVjdC1kaWFsb2cuanMnXG5pbXBvcnQgeyBTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIH0gZnJvbSAnLi4vYXBwcy9za2lsbC1zcGVjaWFsaXphdGlvbi1zZWxlY3QtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgU2tpbGxWYWx1ZURpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtdmFsdWUtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN01lbGVlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtaW5pdGlhdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN1JhbmdlSW5pdGlhdG9yIH0gZnJvbSAnLi4vY2hhdC9yYW5nZWNvbWJhdC5qcydcbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vZGljZS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNlIEFjdG9yIGNsYXNzIHRvIGltcGxlbWVudCBhZGRpdGlvbmFsIGxvZ2ljIHNwZWNpYWxpemVkIGZvciBDb0MgN3RoLlxuICovXG5leHBvcnQgY2xhc3MgQ29DQWN0b3IgZXh0ZW5kcyBBY3RvciB7XG4gIC8qKiBDcmVhdGUgZGVyaXZlZCBkb2N1bWVudCBjbGFzc2VzIGZvciBzcGVjaWZpYyBJdGVtIHR5cGVzICovXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgLyoqIEBzZWUgQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3NlcyBpbiBtb2R1bGUvc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzICovXG4gICAgaWYgKGRhdGEudHlwZSBpbiBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzICYmICFjb250ZXh0Py5leHRlbmRlZCkge1xuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIHRoZSBjb25zdHJ1Y3RvciBmb3IgdGhlIG5ldyBjbGFzcyB3aWxsIGNhbGwgaXQncyBzdXBlcigpLFxuICAgICAgICogdGhlIGV4dGVuZGVkIGZsYWcgd2lsbCBiZSB0cnVlLCB0aHVzIGJ5cGFzc2luZyB0aGlzIHdob2xlIHByb2Nlc3NcbiAgICAgICAqIGFuZCByZXN1bWUgZGVmYXVsdCBiZWhhdmlvclxuICAgICAgICovXG4gICAgICByZXR1cm4gbmV3IENPTkZJRy5BY3Rvci5kb2N1bWVudENsYXNzZXNbZGF0YS50eXBlXShkYXRhLCB7XG4gICAgICAgIC4uLnsgZXh0ZW5kZWQ6IHRydWUgfSxcbiAgICAgICAgLi4uY29udGV4dFxuICAgICAgfSlcbiAgICB9XG4gICAgLy8gaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyAgIGlmIChkYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAvLyAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMuc3ZnJ1xuICAgIC8vICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzdGF0dXMnKSB7XG4gICAgLy8gICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9hdXJhLnN2ZydcbiAgICAvLyAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2VhcG9uJykge1xuICAgIC8vICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvc3dvcmQuc3ZnJ1xuICAgIC8vICAgfVxuICAgIC8vIH1cbiAgICAvKiogRGVmYXVsdCBiZWhhdmlvciwganVzdCBjYWxsIHN1cGVyKCkgYW5kIGRvIGFsbCB0aGUgZGVmYXVsdCBJdGVtIGluaXRzICovXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIGFzeW5jIGluaXRpYWxpemUgKCkge1xuICAgIHN1cGVyLmluaXRpYWxpemUoKVxuICAgIGF3YWl0IHRoaXMuY3JlYXR1cmVJbml0KCkgLy8gVE9ETyA6IG1vdmUgdGhpcyBpbiBDb0NBY3Rvci5jcmVhdGUoZGF0YSwgb3B0aW9ucylcbiAgfVxuXG4gIC8vICoqKioqKioqKioqKioqKioqKioqKiogVGVzdGluZ1xuICAvLyBhc3luYyB1cGRhdGUoZGF0YSwgb3B0aW9ucz17fSkge1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygncmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTsnKTtcbiAgLy8gICB1aS5ub3RpZmljYXRpb25zLmluZm8oYGludCA6ICR7dGhpcy5jaGFyYWN0ZXJpc3RpY3MuaW50fWApO1xuICAvLyAgIHRoaXMuY2hhcmFjdGVyaXN0aWNzLmludCA9IDE1O1xuICAvLyAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgbW9kaWZpZWQgaW50IDogJHt0aGlzLmNoYXJhY3RlcmlzdGljcy5pbnR9YCk7XG4gIC8vICAgcmV0dXJuIHN1cGVyLnVwZGF0ZShkYXRhLCBvcHRpb25zKTtcbiAgLy8gfVxuXG4gIC8vIGdldCBjaGFyYWN0ZXJpc3RpY3MoKXtcbiAgLy8gICBjb25zdCBhY3RvciA9IHRoaXM7XG4gIC8vICAgICByZXR1cm4ge1xuICAvLyAgICAgICBnZXQgaW50KCl7XG4gIC8vICAgICAgICAgcmV0dXJuIGFjdG9yLmdldFByb3AoJ19pbnQnKTtcbiAgLy8gICAgICAgfSxcblxuICAvLyAgICAgICBzZXQgaW50KHgpe1xuICAvLyAgICAgICAgIGFjdG9yLnNldFByb3AoJ19pbnQnLCB4KTtcbiAgLy8gICAgICAgfVxuICAvLyAgICB9O1xuICAvLyB9XG5cbiAgLy8gc2V0UHJvcChrZXksIHgpe1xuICAvLyAgIHRoaXNba2V5XSA9IHg7XG4gIC8vIH1cblxuICAvLyBnZXRQcm9wKGtleSl7XG4gIC8vICAgcmV0dXJuIHRoaXNba2V5XXx8MDtcbiAgLy8gfVxuICAvL1xuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogUHJlcGFyZSBkYXRhIHJlbGF0ZWQgdG8gdGhpcyBEb2N1bWVudCBpdHNlbGYsIGJlZm9yZSBhbnkgZW1iZWRkZWQgRG9jdW1lbnRzIG9yIGRlcml2ZWQgZGF0YSBpcyBjb21wdXRlZC5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqL1xuICBwcmVwYXJlQmFzZURhdGEgKCkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyh0aGlzLnR5cGUpKSB7XG4gICAgICB0aGlzLnN5c3RlbS5za2lsbHMgPSB7fVxuICAgICAgZm9yIChjb25zdCBpIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgICAgaWYgKGkudHlwZSAhPT0gJ3NraWxsJykgY29udGludWVcbiAgICAgICAgdGhpcy5zeXN0ZW0uc2tpbGxzW2Ake2kuaXRlbUlkZW50aWZpZXJ9YF0gPSB7IGZvdW5kcnlJRDogaS5pZCwgY29jaWQ6IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQsIHZhbHVlOiBpLnJhd1ZhbHVlLCBib251c0RpY2U6IGkuc3lzdGVtLmJvbnVzRGljZSB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAqIFJlbW92YWwgb2YgMS81IHNhbml0eVxuICAgICAqIHRoaXMgaXMgdG8gcmVtb3ZlIHRoZVxuICAgICAqIGFjdG9yLmRhdGEuYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgdG8gYmUgcmVtb3ZlZCBmcm9tIHRlbXBsYXRlXG4gICAgICogYW5kIGluZGVmaW5pdGVJbnNhbml0eUxldmVsIHRvIGJlIHJlbW92ZWQgZnJvbSB0ZW1wbGF0ZVxuICAgICAqL1xuICAgICAgaWYgKHR5cGVvZiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkpIHtcbiAgICAgICAgICBjb25zdCBzID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkuc3BsaXQoJy8nKVxuICAgICAgICAgIGlmIChzWzFdICYmICFpc05hTihOdW1iZXIoc1sxXSkpKSB7XG4gICAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0ID0gTnVtYmVyKHNbMV0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPSAwXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQgPSAwXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gcmV0dXJuIGNvbXB1dGVkIHZhbHVlcyBvciBmaXhlZCB2YWx1ZXMgaWYgbm90IGF1dG8uXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9IHRoaXMucmF3TW92XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gdGhpcy5yYXdEYlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9IHRoaXMucmF3QnVpbGRcblxuICAgICAgLy8gRm9yIHZlaGljbGUgb25seSA6XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQgPSB0aGlzLmhwXG5cbiAgICAgIC8vIGlmIChcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPiBkYXRhLmRhdGEuYXR0cmlicy5tcC5tYXggfHxcbiAgICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ID09IG51bGxcbiAgICAgIC8vICkge1xuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5tcC52YWx1ZSA9IGRhdGEuZGF0YS5hdHRyaWJzLm1wLm1heFxuICAgICAgLy8gfVxuICAgICAgLy8gaWYgKFxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA+IGRhdGEuZGF0YS5hdHRyaWJzLmhwLm1heCB8fFxuICAgICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggPT0gbnVsbFxuICAgICAgLy8gKSB7XG4gICAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLmhwLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMuaHAubWF4XG4gICAgICAvLyB9XG5cbiAgICAvLyBpZiAoXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC52YWx1ZSA9PSBudWxsICYmXG4gICAgLy8gICBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXggIT0gbnVsbFxuICAgIC8vICkge1xuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMuaHAudmFsdWUgPSBkYXRhLmRhdGEuYXR0cmlicy5ocC5tYXhcbiAgICAvLyB9XG4gICAgLy8gaWYgKFxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAudmFsdWUgPT0gbnVsbCAmJlxuICAgIC8vICAgZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4ICE9IG51bGxcbiAgICAvLyApIHtcbiAgICAvLyAgIGRhdGEuZGF0YS5hdHRyaWJzLm1wLnZhbHVlID0gZGF0YS5kYXRhLmF0dHJpYnMubXAubWF4XG4gICAgLy8gfVxuICAgIH1cbiAgICBzdXBlci5wcmVwYXJlQmFzZURhdGEoKVxuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKiBQcmVwYXJlIGFsbCBlbWJlZGRlZCBEb2N1bWVudCBpbnN0YW5jZXMgd2hpY2ggZXhpc3Qgd2l0aGluIHRoaXMgcHJpbWFyeSBEb2N1bWVudC5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqIGFjdGl2ZSBlZmZlY3RzIGFyZSBhcHBsaWVkXG4gICAqL1xuICBwcmVwYXJlRW1iZWRkZWREb2N1bWVudHMgKCkge1xuICAgIHN1cGVyLnByZXBhcmVFbWJlZGRlZERvY3VtZW50cygpXG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIEFwcGx5IHRyYW5zZm9ybWF0aW9ucyBvciBkZXJpdmF0aW9ucyB0byB0aGUgdmFsdWVzIG9mIHRoZSBzb3VyY2UgZGF0YSBvYmplY3QuXG4gICAqIENvbXB1dGUgZGF0YSBmaWVsZHMgd2hvc2UgdmFsdWVzIGFyZSBub3Qgc3RvcmVkIHRvIHRoZSBkYXRhYmFzZS5cbiAgICogQG1lbWJlcm9mIENsaWVudERvY3VtZW50TWl4aW4jXG4gICAqL1xuICBwcmVwYXJlRGVyaXZlZERhdGEgKCkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyh0aGlzLnR5cGUpKSB7XG4gICAgICBzdXBlci5wcmVwYXJlRGVyaXZlZERhdGEoKVxuICAgICAgLy8gU2V0IGhwTWF4LCBtcE1heCwgc2FuTWF4LCBtb3YsIGRiLCBidWlsZC4gVGhpcyBpcyB0byBhbGxvdyBjYWxjdWxhdGlvbiBvZiBkZXJpdmVkIHZhbHVlIHdpdGggbW9kaWZlZCBjaGFyYWN0ZXJpc3RpY3MuXG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9IHRoaXMucmF3TW92XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmRiLnZhbHVlID0gdGhpcy5yYXdEYlxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9IHRoaXMucmF3QnVpbGRcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5tYXggPSB0aGlzLnJhd0hwTWF4XG4gICAgICBpZiAodGhpcy5ocCA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSA9IHRoaXMucmF3SHBNYXhcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5tYXggPSB0aGlzLnJhd01wTWF4XG4gICAgICBpZiAodGhpcy5tcCA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9IHRoaXMucmF3TXBNYXhcblxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4ID0gdGhpcy5yYXdTYW5NYXhcbiAgICAgIGlmICh0aGlzLnNhbiA9PT0gbnVsbCkgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgPSB0aGlzLnJhd1Nhbk1heFxuXG4gICAgICAvLyBBcHBseSBlZmZlY3RzIHRvIGF1dG9tYXRpY2FseSBjYWxjdWxhdGVkIHZhbHVlcy5cbiAgICAgIGNvbnN0IGZpbHRlck1hdHJpeCA9IFtdXG5cbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5ocC5tYXgnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubXAuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLm1wLm1heCcpXG4gICAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4uYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLnNhbi5tYXgnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5tb3YudmFsdWUnKVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIuYXV0bykgZmlsdGVyTWF0cml4LnB1c2goJ3N5c3RlbS5hdHRyaWJzLmRiLnZhbHVlJylcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8pIGZpbHRlck1hdHJpeC5wdXNoKCdzeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZScpXG5cbiAgICAgIGNvbnN0IGNoYW5nZXMgPSB0aGlzLmVmZmVjdHMucmVkdWNlKChjaGFuZ2VzLCBlKSA9PiB7XG4gICAgICAgIGlmIChlLmRpc2FibGVkIHx8IGUuaXNTdXBwcmVzc2VkKSByZXR1cm4gY2hhbmdlc1xuICAgICAgICByZXR1cm4gY2hhbmdlcy5jb25jYXQoXG4gICAgICAgICAgZS5jaGFuZ2VzLm1hcChjID0+IHtcbiAgICAgICAgICAgIGMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjKVxuICAgICAgICAgICAgYy5lZmZlY3QgPSBlXG4gICAgICAgICAgICBjLnByaW9yaXR5ID0gYy5wcmlvcml0eSA/PyBjLm1vZGUgKiAxMFxuICAgICAgICAgICAgcmV0dXJuIGNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9LCBbXSlcbiAgICAgIGNoYW5nZXMuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpXG5cbiAgICAgIGNvbnN0IHNlbGVjdENoYW5nZXMgPSBjaGFuZ2VzLmZpbHRlcihlID0+IGZpbHRlck1hdHJpeC5pbmNsdWRlcyhlLmtleSkpXG5cbiAgICAgIC8vIEFwcGx5IGFsbCBjaGFuZ2VzXG4gICAgICBmb3IgKGNvbnN0IGNoYW5nZSBvZiBzZWxlY3RDaGFuZ2VzKSB7XG4gICAgICAgIGNoYW5nZS5lZmZlY3QuYXBwbHkodGhpcywgY2hhbmdlKVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5ocE1heCAmJiB0aGlzLmhwTWF4IDwgdGhpcy5ocCkgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlID0gdGhpcy5ocE1heCB9XG4gICAgICBpZiAodGhpcy5tcE1heCAmJiB0aGlzLm1wTWF4IDwgdGhpcy5tcCkgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlID0gdGhpcy5tcE1heCB9XG4gICAgICBpZiAodGhpcy5zYW5NYXggJiYgdGhpcy5zYW5NYXggPCB0aGlzLnNhbikgeyB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSA9IHRoaXMuc2FuTWF4IH1cbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBhc3luYyBjcmVhdGUgKGRhdGEsIG9wdGlvbnMgPSB7fSkge1xuICAgIGlmIChkYXRhLnR5cGUgPT09ICdjaGFyYWN0ZXInKSB7XG4gICAgICBkYXRhLnByb3RvdHlwZVRva2VuID0gbWVyZ2VPYmplY3QoZGF0YS5wcm90b3R5cGVUb2tlbiB8fCB7fSwge1xuICAgICAgICBhY3Rvckxpbms6IHRydWUsXG4gICAgICAgIGRpc3Bvc2l0aW9uOiAxLFxuICAgICAgICBzaWdodDoge1xuICAgICAgICAgIGVuYWJsZWQ6IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ25wYycpIHtcbiAgICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnIHx8IGRhdGEuaW1nID09PSAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9jdWx0aXN0LnN2ZydcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRhdGEudHlwZSA9PT0gJ2NyZWF0dXJlJykge1xuICAgICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcgfHwgZGF0YS5pbWcgPT09ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJykge1xuICAgICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2Zsb2F0aW5nLXRlbnRhY2xlcy5zdmcnXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdjb250YWluZXInKSB7XG4gICAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJyB8fCBkYXRhLmltZyA9PT0gJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9jaGVzdC5zdmcnXG4gICAgICB9XG4gICAgICBkYXRhLnByb3RvdHlwZVRva2VuID0gbWVyZ2VPYmplY3QoZGF0YS5wcm90b3R5cGVUb2tlbiB8fCB7fSwge1xuICAgICAgICBhY3Rvckxpbms6IHRydWVcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucylcbiAgfVxuXG4gIC8qKlxuICAgKiBFYXJseSB2ZXJzaW9uIG9uIHRlbXBsYXRlcyBkaWQgbm90IGluY2x1ZGUgcG9zc2liaWxpdHkgb2YgYXV0byBjYWxjXG4gICAqIEp1c3QgY2hlY2sgaWYgYXV0byBpcyB1bmRlZmluZWQsIGluIHdoaWNoIGNhc2UgaXQgd2lsbCBiZSBzZXQgdG8gdHJ1ZVxuICAgKi9cbiAgY2hlY2tVbmRlZmluZWRBdXRvICgpIHtcbiAgICBjb25zdCByZXR1cm5EYXRhID0ge1xuICAgICAgYXR0cmliczoge1xuICAgICAgICBocDoge30sXG4gICAgICAgIG1wOiB7fSxcbiAgICAgICAgc2FuOiB7fSxcbiAgICAgICAgbW92OiB7fSxcbiAgICAgICAgZGI6IHt9LFxuICAgICAgICBidWlsZDoge31cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LmhwPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5ocC5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8ubXA/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLm1wLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzPy5zYW4/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLnNhbi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8ubW92Py5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5tb3YuYXV0byA9IHRydWVcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnM/LmRiPy5hdXRvID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybkRhdGEuYXR0cmlicy5kYi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uYnVpbGQ/LmF1dG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuRGF0YS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSB0cnVlXG4gICAgfVxuXG4gICAgcmV0dXJuIHJldHVybkRhdGFcbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHtcbiAgICAgIHN0cjoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLlNUUicsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLlN0cmVuZ3RoJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGNvbjoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLkNPTicsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkNvbnN0aXR1dGlvbicsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBzaXo6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5TSVonLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5TaXplJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGRleDoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLkRFWCcsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkRleHRlcml0eScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBhcHA6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5BUFAnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5BcHBlYXJhbmNlJyxcbiAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgfSxcbiAgICAgIGludDoge1xuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgc2hvcnROYW1lOiAnQ0hBUkFDLklOVCcsXG4gICAgICAgIGxhYmVsOiAnQ0hBUkFDLkludGVsbGlnZW5jZScsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBwb3c6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5QT1cnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5Qb3dlcicsXG4gICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgIH0sXG4gICAgICBlZHU6IHtcbiAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgIHNob3J0TmFtZTogJ0NIQVJBQy5FRFUnLFxuICAgICAgICBsYWJlbDogJ0NIQVJBQy5FZHVjYXRpb24nLFxuICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICkpIHtcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNzW2tleV0gPSB7XG4gICAgICAgICAga2V5LFxuICAgICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICB2YWx1ZTogdmFsdWUudmFsdWUsXG4gICAgICAgICAgaGFyZDogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDIpIHx8IG51bGwsXG4gICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcih2YWx1ZS52YWx1ZSAvIDUpIHx8IG51bGwsXG4gICAgICAgICAgZm9ybXVsYTogdmFsdWUuZm9ybXVsYVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgdXBvbiB0b2tlbiBjcmVhdGlvbiBmcm9tIHByZUNyZWF0ZUFjdG9yIGhvb2tcbiAgICogQHBhcmFtIHsqfSBjcmVhdGVEYXRhXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgaW5pdFRva2VuIChjcmVhdGVEYXRhKSB7XG4gICAgLy8gY2FsbGVkIHVwb24gdG9rZW4gY3JlYXRpb24uYWN0aXZlXG4gICAgaWYgKGNyZWF0ZURhdGEpIHtcbiAgICAgIC8vXG4gICAgfVxuICB9XG5cbiAgZ2V0IGhhc1RlbXBvSW5zYW5lICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gIH1cblxuICBnZXQgZ2V0VGVtcG9JbnNhbmVEdXJhdGlvblRleHQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLCAnZHVyYXRpb25UZXh0JylcbiAgfVxuXG4gIGdldCBoYXNJbmRlZkluc2FuZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmluZGVmSW5zYW5lKVxuICB9XG5cbiAgZ2V0IHBvcnRyYWl0ICgpIHtcbiAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZVRva2VuJykpIHJldHVybiB0aGlzLmltZ1xuICAgIHJldHVybiB0aGlzLnRva2VuPy50ZXh0dXJlPy5zcmMgfHwgdGhpcy5wcm90b3R5cGVUb2tlbj8udGV4dHVyZT8uc3JjIHx8IHRoaXMuaW1nXG4gIH1cblxuICBhc3luYyBlbnRlckJvdXRPZk1hZG5lc3MgKHJlYWxUaW1lID0gdHJ1ZSwgZHVyYXRpb24gPSAxKSB7XG4gICAgLy8gY29uc3QgZHVyYXRpb24gPSB7cm91bmRzOiAxLFxuICAgIC8vICAgc2Vjb25kczogMTcsXG4gICAgLy8gICBzdGFydFJvdW5kOiAzLFxuICAgIC8vICAgc3RhcnRUaW1lOiA1OCxcbiAgICAvLyAgIHN0YXJ0VHVybjogNCxcbiAgICAvLyAgIHR1cm5zOiAyfTtcbiAgICAvLyBhd2FpdCB0aGlzLmJvdXRPZk1hZG5lc3M/LnNldEZsYWcoICdDb0M3JywgJ21hZG5lc3MnLCB0cnVlKTtcblxuICAgIGxldCByZXN1bHQgPSBudWxsXG4gICAgY29uc3QgYm91dE9mTWFkbmVzc1RhYmxlSWQgPSByZWFsVGltZVxuICAgICAgPyBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScpXG4gICAgICA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NTdW1tYXJ5VGFibGUnKVxuICAgIGlmIChib3V0T2ZNYWRuZXNzVGFibGVJZCAhPT0gJ25vbmUnKSB7XG4gICAgICByZXN1bHQgPSB7XG4gICAgICAgIHBob2JpYTogZmFsc2UsXG4gICAgICAgIG1hbmlhOiBmYWxzZSxcbiAgICAgICAgZGVzY3JpcHRpb246IG51bGxcbiAgICAgIH1cbiAgICAgIGNvbnN0IGJvdXRPZk1hZG5lc3NUYWJsZSA9IGdhbWUudGFibGVzLmdldChib3V0T2ZNYWRuZXNzVGFibGVJZClcbiAgICAgIHJlc3VsdC50YWJsZVJvbGwgPSBhd2FpdCBib3V0T2ZNYWRuZXNzVGFibGUucm9sbCgpXG4gICAgICBpZiAodHlwZW9mIHJlc3VsdC50YWJsZVJvbGwucmVzdWx0c1swXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIENPTlNULlRBQkxFX1JFU1VMVF9UWVBFUy5ET0NVTUVOVCA9PT1cbiAgICAgICAgICByZXN1bHQudGFibGVSb2xsLnJlc3VsdHNbMF0udHlwZVxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5nZXQocmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLmRvY3VtZW50SWQpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtPy50eXBlPy5waG9iaWEpIHJlc3VsdC5waG9iaWEgPSB0cnVlXG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0/LnR5cGU/Lm1hbmlhKSByZXN1bHQubWFuaWEgPSB0cnVlXG4gICAgICAgICAgICByZXN1bHQuZGVzY3JpcHRpb24gPSBgJHtpdGVtLm5hbWV9OiR7VGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgICAgICAgICAgeyBhc3luYzogZmFsc2UgfVxuICAgICAgICAgICAgKX1gXG4gICAgICAgICAgICByZXN1bHQubmFtZSA9IGl0ZW0ubmFtZVxuICAgICAgICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtLnRvT2JqZWN0KClcbiAgICAgICAgICAgIGRlbGV0ZSBpdGVtRGF0YS5faWRcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbURhdGFdKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZUJvdXRPZk1hZG5lc3NJdGVtTm90Rm91bmQnKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQgPT09XG4gICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnR5cGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmVzdWx0LmRlc2NyaXB0aW9uID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgICAgICAgcmVzdWx0LnRhYmxlUm9sbC5yZXN1bHRzWzBdLnRleHQsXG4gICAgICAgICAgICB7IGFzeW5jOiBmYWxzZSB9XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlQm91dE9mTWFkbmVzc1RhYmxlTm90Rm91bmQnKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgaXQncyBub3QgYSByZWFsIHRpbWUgbm8gbmVlZCB0byBhY3RpdmF0ZSB0aGUgYm91dFxuICAgIGlmICghcmVhbFRpbWUpIHJldHVybiByZXN1bHRcblxuICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLCB7XG4gICAgICByZWFsVGltZSxcbiAgICAgIGR1cmF0aW9uXG4gICAgfSlcblxuICAgIC8vIGNvbnN0IGVmZmVjdCA9IHRoaXMuZWZmZWN0cy5nZXQoIGVmZmVjdERhdGEuX2lkKTtcbiAgICAvLyBlZmZlY3Quc2hlZXQucmVuZGVyKHRydWUpO1xuXG4gICAgcmV0dXJuIHJlc3VsdFxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCB1cG9uIG5ldyBhY3RvciBjcmVhdGlvbi5cbiAgICogQHBhcmFtIHsqfSBkYXRhXG4gICAqIEBwYXJhbSB7Kn0gb3B0aW9uc1xuICAgKi9cbiAgLy8gc3RhdGljIGFzeW5jIGNyZWF0ZShkYXRhLCBvcHRpb25zKSB7XG4gIC8vICAvLyBJZiB0aGUgY3JlYXRlZCBhY3RvciBoYXMgaXRlbXMgKG9ubHkgYXBwbGljYWJsZSB0byBkdXBsaWNhdGVkIGFjdG9ycykgYnlwYXNzIHRoZSBuZXcgYWN0b3IgY3JlYXRpb24gbG9naWNcbiAgLy8gIGlmIChkYXRhLml0ZW1zKSB7XG4gIC8vICAgIHJldHVybiBzdXBlci5jcmVhdGUoZGF0YSwgb3B0aW9ucyk7XG4gIC8vICB9XG4gIC8vICByZXR1cm4gc3VwZXIuY3JlYXRlKGRhdGEsIG9wdGlvbnMpO1xuICAvLyB9XG5cbiAgc3RhdGljIGVtcHR5U2tpbGwgKFxuICAgIHNraWxsTmFtZSxcbiAgICB2YWx1ZSxcbiAgICB7XG4gICAgICByYXJpdHkgPSBmYWxzZSxcbiAgICAgIHB1c2ggPSB0cnVlLFxuICAgICAgY29tYmF0ID0gZmFsc2UsXG4gICAgICBpbWcgPSBmYWxzZSxcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gZmFsc2VcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHNraWxsTmFtZSxcbiAgICAgIHR5cGU6ICdza2lsbCcsXG4gICAgICBzeXN0ZW06IHtcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIHNraWxsTmFtZSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb246ICcnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc3BlY2lhbDogZmFsc2UsXG4gICAgICAgICAgcmFyaXR5LFxuICAgICAgICAgIHB1c2gsXG4gICAgICAgICAgY29tYmF0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGltZyAhPT0gZmFsc2UpIHtcbiAgICAgIGRhdGEuaW1nID0gaW1nXG4gICAgfVxuICAgIGlmIChzcGVjaWFsaXphdGlvbiAhPT0gZmFsc2UpIHtcbiAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhza2lsbE5hbWUsIHNwZWNpYWxpemF0aW9uKVxuICAgICAgZGF0YS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICBkYXRhLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwgPSB0cnVlXG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKipcbiAgICogQ2xlYW4gbGlzdCBvZiBza2lsbHMgYnkgcmVtb3Zpbmcgc3BlY2lhbGl6YXRpb24gZnJvbSBuYW1lXG4gICAqL1xuICAvLyBhc3luYyBjbGVhblNraWxscyAoKSB7XG4gIC8vICAgRGlhbG9nLmNvbmZpcm0oe1xuICAvLyAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DbGVhblNraWxsTGlzdCcpfWAsXG4gIC8vICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2xlYW5Ta2lsbExpc3RIaW50Jyl9PC9wPmAsXG4gIC8vICAgICB5ZXM6ICgpID0+IGNsZWFuKHRoaXMpXG4gIC8vICAgfSlcbiAgLy8gICBhc3luYyBmdW5jdGlvbiBjbGVhbiAoYWN0b3IpIHtcbiAgLy8gICAgIGNvbnN0IHVwZGF0ZSA9IFtdXG4gIC8vICAgICBhY3Rvci5za2lsbHMuZm9yRWFjaChzID0+IHtcbiAgLy8gICAgICAgaWYgKHMuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAvLyAgICAgICAgIGNvbnN0IGNsZWFuID0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKHMpPy50cmltKClcbiAgLy8gICAgICAgICBpZiAoY2xlYW4udG9Mb3dlckNhc2UoKSAhPSBzLm5hbWUudG9Mb3dlckNhc2UoKSB8fCBjbGVhbi50b0xvd2VyQ2FzZSgpICE9IHMuZGF0YS5uYW1lLnRvTG93ZXJDYXNlKCkpIHtcbiAgLy8gICAgICAgICAgIHVwZGF0ZS5wdXNoKHtcbiAgLy8gICAgICAgICAgICAgX2lkOiBzLmlkLFxuICAvLyAgICAgICAgICAgICBuYW1lOiBjbGVhblxuICAvLyAgICAgICAgICAgfSlcbiAgLy8gICAgICAgICB9XG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0pXG4gIC8vICAgICBpZiAodXBkYXRlLmxlbmd0aCAhPSAwKXtcbiAgLy8gICAgICAgYXdhaXQgYWN0b3IudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCB1cGRhdGUpXG4gIC8vICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYFNraWxscyA6ICR7QXJyYXkuZnJvbSggdXBkYXRlLCBlID0+IGUubmFtZSkuam9pbignLCAnKX0gdXBkYXRlZC5gKVxuICAvLyAgICAgfSBlbHNlIHtcbiAgLy8gICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCAnU2tpbGwgbGlzdCB3YXMgY2xlYW4gYWxyZWFkeSAhJylcbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGNyZWF0ZVNraWxsIChza2lsbE5hbWUsIHZhbHVlLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsTmFtZSwgdmFsdWUpXG4gICAgY29uc3QgY3JlYXRlZCA9IGF3YWl0IHRoaXMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbZGF0YV0sIHtcbiAgICAgIHJlbmRlclNoZWV0OiBzaG93U2hlZXRcbiAgICB9KVxuICAgIHJldHVybiBjcmVhdGVkXG4gIH1cblxuICBhc3luYyBjcmVhdGVXZWFwb25Ta2lsbCAobmFtZSwgZmlyZWFybXMgPSBmYWxzZSwgYmFzZSA9IG51bGwpIHtcbiAgICAvLyBUT0RPIDogQXNrIGZvciBiYXNlIHZhbHVlIGlmIG51bGxcblxuICAgIGNvbnN0IHNraWxsRGF0YSA9IGF3YWl0IFNraWxsU3BlY1NlbGVjdERpYWxvZy5jcmVhdGUoXG4gICAgICBbXSxcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgZmlyZWFybXNcbiAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgOiAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICksXG4gICAgICAwLFxuICAgICAgbmFtZVxuICAgIClcbiAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihza2lsbERhdGEuZ2V0KCdiYXNlLXZhbHVlJykpXG4gICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgbmFtZSxcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgZmlyZWFybXNcbiAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgOiAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgIClcbiAgICApXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHBhcnRzLm5hbWUsXG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIGJhc2U6IGlzTmFOKHZhbHVlKSA/IDAgOiB2YWx1ZSxcbiAgICAgICAgYWRqdXN0bWVudHM6IHtcbiAgICAgICAgICBwZXJzb25hbDogbnVsbCxcbiAgICAgICAgICBvY2N1cGF0aW9uOiBudWxsLFxuICAgICAgICAgIGFyY2hldHlwZTogbnVsbCxcbiAgICAgICAgICBleHBlcmllbmNlOiBudWxsXG4gICAgICAgIH0sXG4gICAgICAgIHNraWxsTmFtZTogcGFydHMuc2tpbGxOYW1lLFxuICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBzcGVjaWFsOiB0cnVlLFxuICAgICAgICAgIGZpZ2h0aW5nOiAhZmlyZWFybXMsXG4gICAgICAgICAgZmlyZWFybTogZmlyZWFybXMsXG4gICAgICAgICAgY29tYmF0OiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6ICFiYXNlXG4gICAgfSlcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG5hbWUpXG4gICAgcmV0dXJuIHNraWxsWzBdXG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBhIGNyZWF0dXJlIHdpdGggbWluaW11bXMgc2tpbGxzXG4gICAqL1xuICBhc3luYyBjcmVhdHVyZUluaXQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdjcmVhdHVyZScpIHJldHVyblxuICAgIGlmICh0aGlzLmdldEFjdG9yRmxhZygnaW5pdGlhbGl6ZWQnKSkgcmV0dXJuIC8vIENoYW5nZSB0byByZXR1cm4gc2tpbGwgP1xuXG4gICAgLy8gQ2hlY2sgaWYgZmlnaHRpbmcgc2tpbGxzIGV4aXN0cywgaWYgbm90IGNyZWF0ZSBpdCBhbmQgdGhlIGFzc29jaWF0ZWQgYXR0YWNrLlxuICAgIGNvbnN0IHNraWxscyA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKFxuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuY3JlYXR1cmVGaWdodGluZ1NraWxsKVxuICAgIClcbiAgICBpZiAoc2tpbGxzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gQ3JlYXRpbmcgbmF0dXJhbCBhdHRhY2sgc2tpbGxcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5jcmVhdHVyZUZpZ2h0aW5nU2tpbGwpLFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lKVxuICAgICAgICApXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgdHlwZTogJ3NraWxsJyxcbiAgICAgICAgICBuYW1lOiBwYXJ0cy5uYW1lLFxuICAgICAgICAgIHN5c3RlbToge1xuICAgICAgICAgICAgYmFzZTogMCxcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2tpbGxOYW1lOiBwYXJ0cy5za2lsbE5hbWUsXG4gICAgICAgICAgICBzcGVjaWFsaXphdGlvbjogcGFydHMuc3BlY2lhbGl6YXRpb24sXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgICAgICAgZmlnaHRpbmc6IHRydWUsXG4gICAgICAgICAgICAgIHNwZWNpYWw6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmbGFnczoge31cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgYXR0YWNrID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cyhcbiAgICAgICAgICAnSXRlbScsXG4gICAgICAgICAgW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBuYW1lOiAnSW5uYXRlIGF0dGFjaycsXG4gICAgICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiQ3JlYXR1cmUncyBuYXR1cmFsIGF0dGFja1wiLFxuICAgICAgICAgICAgICAgICAgY2hhdDogXCJDcmVhdHVyZSdzIG5hdHVyYWwgYXR0YWNrXCJcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHdwblR5cGU6ICdpbm5hdGUnLFxuICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgICAgICAgIGFkZGI6IHRydWUsXG4gICAgICAgICAgICAgICAgICBzbG50OiB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICB7IHJlbmRlclNoZWV0OiBmYWxzZSB9XG4gICAgICAgIClcbiAgICAgICAgaWYgKHNraWxsLmxlbmd0aCA+IDAgJiYgYXR0YWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCBjcmVhdGVkQXR0YWNrID0gdGhpcy5pdGVtcy5nZXQoYXR0YWNrWzBdLmlkKVxuICAgICAgICAgIGF3YWl0IGNyZWF0ZWRBdHRhY2sudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5pZCc6IHNraWxsWzBdLmlkLFxuICAgICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBza2lsbFswXS5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NyZWF0dXJlIGluaXQ6ICcgKyBlcnIubWVzc2FnZSlcbiAgICAgIH1cbiAgICAgIC8vIGNvbnNvbGUubG9nKCAnU2tpbGwgY3JlYXRlZCcpO1xuICAgICAgYXdhaXQgdGhpcy5zZXRBY3RvckZsYWcoJ2luaXRpYWxpemVkJylcbiAgICAgIC8vIENyZWF0aW5nIGNvcnJlc3BvbmRpbmcgd2VhcG9uLlxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUl0ZW0gKGl0ZW1OYW1lLCBxdWFudGl0eSA9IDEsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxuICAgICAgdHlwZTogJ2l0ZW0nLFxuICAgICAgc3lzdGVtOiB7XG4gICAgICAgIHF1YW50aXR5XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlCb29rIChldmVudCA9IG51bGwpIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBpZiAoIXRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0Jvb2tOYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUJvb2soZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpLCBzaG93U2hlZXQpXG4gICAgfVxuICAgIGxldCBpbmRleCA9IDBcbiAgICBsZXQgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdCb29rTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3Qm9va05hbWUpICsgJyAnICsgaW5kZXhcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlQm9vayhpdGVtTmFtZSwgc2hvd1NoZWV0KVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlQm9vayAoaXRlbU5hbWUsIHNob3dTaGVldCA9IGZhbHNlKSB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IGl0ZW1OYW1lLFxuICAgICAgdHlwZTogJ2Jvb2snLFxuICAgICAgc3lzdGVtOiB7fVxuICAgIH1cbiAgICBjb25zdCBjcmVhdGVkID0gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtkYXRhXSwge1xuICAgICAgcmVuZGVyU2hlZXQ6IHNob3dTaGVldFxuICAgIH0pXG4gICAgcmV0dXJuIGNyZWF0ZWRcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUVtcHR5U3BlbGwgKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZVNwZWxsKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSksIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NwZWxsTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZShpdGVtTmFtZSkpIHtcbiAgICAgIGluZGV4KytcbiAgICAgIGl0ZW1OYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U3BlbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmNyZWF0ZVNwZWxsKGl0ZW1OYW1lLCBzaG93U2hlZXQpXG4gIH1cblxuICBzdGF0aWMgZW1wdHlTcGVsbCAoaXRlbU5hbWUpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogaXRlbU5hbWUsXG4gICAgICB0eXBlOiAnc3BlbGwnLFxuICAgICAgc3lzdGVtOiB7fVxuICAgIH1cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgYXN5bmMgY3JlYXRlU3BlbGwgKGl0ZW1OYW1lLCBzaG93U2hlZXQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0NBY3Rvci5lbXB0eVNwZWxsKGl0ZW1OYW1lKVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgICByZXR1cm4gY3JlYXRlZFxuICB9XG5cbiAgYXN5bmMgY3JlYXRlRW1wdHlTa2lsbCAoZXZlbnQgPSBudWxsKSB7XG4gICAgY29uc3Qgc2hvd1NoZWV0ID0gZXZlbnQgPyAhZXZlbnQuc2hpZnRLZXkgOiB0cnVlXG4gICAgaWYgKCF0aGlzLmdldEl0ZW1JZEJ5TmFtZShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlU2tpbGwoXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1NraWxsTmFtZSksXG4gICAgICAgICh0aGlzLnR5cGUgIT09ICdjaGFyYWN0ZXInID8gMSA6IG51bGwpLFxuICAgICAgICBzaG93U2hlZXRcbiAgICAgIClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBza2lsbE5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdTa2lsbE5hbWUpICsgJyAnICsgaW5kZXhcbiAgICB3aGlsZSAodGhpcy5nZXRJdGVtSWRCeU5hbWUoc2tpbGxOYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgc2tpbGxOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3U2tpbGxOYW1lKSArICcgJyArIGluZGV4XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlU2tpbGwoc2tpbGxOYW1lLCBudWxsLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eUl0ZW0gKGV2ZW50ID0gbnVsbCkge1xuICAgIGNvbnN0IHNob3dTaGVldCA9IGV2ZW50ID8gIWV2ZW50LnNoaWZ0S2V5IDogdHJ1ZVxuICAgIGlmICghdGhpcy5nZXRJdGVtSWRCeU5hbWUoZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubmV3SXRlbU5hbWUpKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlSXRlbShnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSksIDEsIHNob3dTaGVldClcbiAgICB9XG4gICAgbGV0IGluZGV4ID0gMFxuICAgIGxldCBpdGVtTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld0l0ZW1OYW1lKSArICcgJyArIGluZGV4XG4gICAgd2hpbGUgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGl0ZW1OYW1lKSkge1xuICAgICAgaW5kZXgrK1xuICAgICAgaXRlbU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdJdGVtTmFtZSkgKyAnICcgKyBpbmRleFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5jcmVhdGVJdGVtKGl0ZW1OYW1lLCAxLCBzaG93U2hlZXQpXG4gIH1cblxuICBhc3luYyBjcmVhdGVFbXB0eVdlYXBvbiAoZXZlbnQgPSBudWxsLCBwcm9wZXJ0aWVzID0ge30pIHtcbiAgICBjb25zdCBzaG93U2hlZXQgPSBldmVudCA/ICFldmVudC5zaGlmdEtleSA6IHRydWVcbiAgICBsZXQgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpXG4gICAgaWYgKHRoaXMuZ2V0SXRlbUlkQnlOYW1lKGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpKSkge1xuICAgICAgbGV0IGluZGV4ID0gMFxuICAgICAgd2VhcG9uTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm5ld1dlYXBvbk5hbWUpICsgJyAnICsgaW5kZXhcbiAgICAgIHdoaWxlICh0aGlzLmdldEl0ZW1JZEJ5TmFtZSh3ZWFwb25OYW1lKSkge1xuICAgICAgICBpbmRleCsrXG4gICAgICAgIHdlYXBvbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5uZXdXZWFwb25OYW1lKSArICcgJyArIGluZGV4XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHdlYXBvbk5hbWUsXG4gICAgICB0eXBlOiAnd2VhcG9uJyxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBwcm9wZXJ0aWVzOiB7fVxuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgW2tleV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy53ZWFwb25Qcm9wZXJ0aWVzKSkge1xuICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllc1trZXldID1cbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb3BlcnRpZXMsIGtleSkgPz8gZmFsc2VcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGFdLCB7XG4gICAgICByZW5kZXJTaGVldDogc2hvd1NoZWV0XG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGNyZWF0ZUJpb1NlY3Rpb24gKHRpdGxlID0gbnVsbCkge1xuICAgIGNvbnN0IGJpbyA9IHRoaXMuc3lzdGVtLmJpb2dyYXBoeVxuICAgICAgPyBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgICAgOiBbXVxuICAgIGJpby5wdXNoKHtcbiAgICAgIHRpdGxlLFxuICAgICAgdmFsdWU6IG51bGxcbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSwgeyByZW5kZXJTaGVldDogZmFsc2UgfSlcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUJpb1ZhbHVlIChpbmRleCwgY29udGVudCkge1xuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgYmlvW2luZGV4XS52YWx1ZSA9IGNvbnRlbnRcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvZ3JhcGh5JzogYmlvIH0sIHsgcmVuZGVyOiBmYWxzZSB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQmlvVGl0bGUgKGluZGV4LCB0aXRsZSkge1xuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgYmlvW2luZGV4XS50aXRsZSA9IHRpdGxlXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgZGVsZXRlQmlvU2VjdGlvbiAoaW5kZXgpIHtcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGJpby5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgbW92ZUJpb1NlY3Rpb25VcCAoaW5kZXgpIHtcbiAgICBpZiAoaW5kZXggPT09IDApIHJldHVyblxuICAgIGNvbnN0IGJpbyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5iaW9ncmFwaHkpXG4gICAgaWYgKGluZGV4ID49IGJpby5sZW5ndGgpIHJldHVyblxuICAgIGNvbnN0IGVsZW0gPSBiaW8uc3BsaWNlKGluZGV4LCAxKVswXVxuICAgIGJpby5zcGxpY2UoaW5kZXggLSAxLCAwLCBlbGVtKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5iaW9ncmFwaHknOiBiaW8gfSlcbiAgfVxuXG4gIGFzeW5jIG1vdmVCaW9TZWN0aW9uRG93biAoaW5kZXgpIHtcbiAgICBjb25zdCBiaW8gPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0uYmlvZ3JhcGh5KVxuICAgIGlmIChpbmRleCA+PSBiaW8ubGVuZ3RoIC0gMSkgcmV0dXJuXG4gICAgY29uc3QgZWxlbSA9IGJpby5zcGxpY2UoaW5kZXgsIDEpWzBdXG4gICAgYmlvLnNwbGljZShpbmRleCArIDEsIDAsIGVsZW0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmJpb2dyYXBoeSc6IGJpbyB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlVGV4dEFyZWEgKHRleHRBcmVhKSB7XG4gICAgY29uc3QgbmFtZSA9ICdzeXN0ZW0uJyArIHRleHRBcmVhLmRhdGFzZXQuYXJlYU5hbWVcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtuYW1lXTogdGV4dEFyZWEudmFsdWUgfSlcbiAgfVxuXG4gIC8vIGFzeW5jIF91cGRhdGVFbWJlZGRlZERvY3VtZW50cyAoZG9jdW1lbnRDbGFzcywgcGFyZW50LCB7IHVwZGF0ZXMsIG9wdGlvbnMsIHBhY2sgfSwgdXNlcikge1xuICAvLyAgIGNvbnN0IHBvdWV0ID0gJ3RvdG8nXG4gIC8vIH1cblxuICAvLyBhc3luYyBwcmVVcGRhdGVBY3RpdmVFZmZlY3QgKGEsYixjLGQpIHtcbiAgLy8gICBjb25zdCBwb3VldCA9ICd0b3RvJ1xuICAvLyB9XG5cbiAgLy8gYXN5bmMgdXBkYXRlQWN0aXZlRWZmZWN0IChhLGIsYyxkKSB7XG4gIC8vICAgY29uc3QgcG91ZXQgPSAndG90bydcbiAgLy8gfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYW4gaXRlbSBmb3IgdGhhdCBhY3Rvci5cbiAgICogSWYgaXQncyBhIHNraWxsIGZpcnN0IGNoZWNrIGlmIHRoZSBza2lsbCBpcyBhbHJlYWR5IG93bmVkLiBJZiBpdCBpcyBkb24ndCBjcmVhdGUgYSBzZWNvbmQgdGltZS5cbiAgICogRmlsbCB0aGUgdmFsdWUgb2YgdGhlIHNraWxsIHdpdGggYmFzZSBvciB0cnkgdG8gZXZhbHVhdGUgdGhlIGZvcm11bGEuXG4gICAqIEBwYXJhbSB7Kn0gZW1iZWRkZWROYW1lXG4gICAqIEBwYXJhbSB7Kn0gZGF0YVxuICAgKiBAcGFyYW0geyp9IG9wdGlvbnNcbiAgICovXG4gIGFzeW5jIGNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzIChlbWJlZGRlZE5hbWUsIGRhdGFBcnJheSwgb3B0aW9ucykge1xuICAgIGNvbnN0IHByb2Nlc3NlZERhdGFBcnJheSA9IFtdXG4gICAgbGV0IGJhc2VWYWx1ZSA9IDBcbiAgICBsZXQgYmFzZUNhbGN1bGF0ZWQgPSAwXG4gICAgbGV0IGFyY2hldHlwZSA9IGZhbHNlXG4gICAgbGV0IG9jY3VwYXRpb24gPSBmYWxzZVxuICAgIGZvciAobGV0IGRhdGEgb2YgZGF0YUFycmF5KSB7XG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICBjYXNlICdza2lsbCc6IHtcbiAgICAgICAgICBiYXNlVmFsdWUgPSBkYXRhLnN5c3RlbS5iYXNlXG4gICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBhd2FpdCBDb0M3SXRlbS5jYWxjdWxhdGVCYXNlKHRoaXMsIGRhdGEpXG4gICAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIC8vIElmIG5vdCBhIFBDIHNldCBza2lsbCB2YWx1ZSB0byBiYXNlXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRJdGVtSWRCeU5hbWUoZGF0YS5uYW1lKSkgcmV0dXJuIC8vIElmIHNraWxsIHdpdGggdGhpcyBuYW1lIGV4aXN0IHJldHVyblxuXG4gICAgICAgICAgICBpZiAoYmFzZVZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmIChTdHJpbmcoYmFzZVZhbHVlKSAhPT0gU3RyaW5nKGRhdGEuc3lzdGVtLnZhbHVlKSkge1xuICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoaXNOYU4oTnVtYmVyKGRhdGEuc3lzdGVtLnZhbHVlKSkpIHtcbiAgICAgICAgICAgICAgbGV0IHZhbHVlXG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSAoXG4gICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKVxuICAgICAgICAgICAgICAgICAgKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgICAgKS50b3RhbFxuICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAodmFsdWUpIGRhdGEuc3lzdGVtLnZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUgPSBudWxsXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGFkZFRoaXMgPSB0cnVlXG5cbiAgICAgICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKGRhdGEpKSB7XG4gICAgICAgICAgICBjb25zdCBpc0FueUJ1dE5vdEZsYWdnZWQgPSAoIShkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUpID8/IGZhbHNlKSAmJiAhKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSA/PyBmYWxzZSlcbiAgICAgICAgICAgIGxldCBza2lsbExpc3QgPSBbXVxuICAgICAgICAgICAgY29uc3QgZ3JvdXAgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NHcm91cEZyb21Eb2N1bWVudChkYXRhKVxuICAgICAgICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgICAgICAgIHNraWxsTGlzdCA9IChhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChncm91cCkgKyAnLiskJyksIHR5cGU6ICdpJyB9KSkuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCA/PyBmYWxzZSkgJiYgIShpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgPz8gZmFsc2UpICYmICEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucGlja25hbWVvbmx5ID8/IGZhbHNlKVxuICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtPy5mbGFncz8ub2NjdXBhdGlvbiB8fCBkYXRhLnN5c3RlbT8uZmxhZ3M/LmFyY2hldHlwZSkge1xuICAgICAgICAgICAgICBjb25zdCBleGlzdGluZ1NraWxscyA9IHRoaXMuc2tpbGxzLmZpbHRlcihlbCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFlbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24pIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtPy5mbGFncz8ub2NjdXBhdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgZWwuc3lzdGVtLmZsYWdzPy5vY2N1cGF0aW9uXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0/LmZsYWdzPy5hcmNoZXR5cGUgJiZcbiAgICAgICAgICAgICAgICAgIGVsLnN5c3RlbS5mbGFncz8uYXJjaGV0eXBlXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICAgICAgICBlbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24udG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nU2tpbGxzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBleGlzdGluZ1NraWxscy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3VuZCA9IHNraWxsTGlzdC5maW5kSW5kZXgoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gZXhpc3RpbmdTa2lsbHNbaV0ubmFtZSB8fCBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkID09PSBleGlzdGluZ1NraWxsc1tpXS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZFxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBpZiAoZm91bmQgPiAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsTGlzdC5zcGxpY2UoZm91bmQsIDEpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIHNraWxsTGlzdCA9IHNraWxsTGlzdC5jb25jYXQoZXhpc3RpbmdTa2lsbHMpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsTGlzdCA9IGV4aXN0aW5nU2tpbGxzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc2tpbGxMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZy5jcmVhdGUoe1xuICAgICAgICAgICAgICBza2lsbHM6IHNraWxsTGlzdCxcbiAgICAgICAgICAgICAgYWxsb3dDdXN0b206IChpc0FueUJ1dE5vdEZsYWdnZWQgfHwgKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnJlcXVpcmVzbmFtZSA/PyBmYWxzZSkpLFxuICAgICAgICAgICAgICBmaXhlZEJhc2VWYWx1ZTogKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LmtlZXBiYXNldmFsdWUgPz8gZmFsc2UpLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbk5hbWU6IGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICAgICAgICBsYWJlbDogZGF0YS5uYW1lLFxuICAgICAgICAgICAgICBiYXNlVmFsdWU6IGRhdGEuc3lzdGVtLmJhc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNraWxsRGF0YSwgJ3NlbGVjdGVkJykpIHtcbiAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5zZWxlY3RlZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSXRlbSA9IHRoaXMuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgICAgICAgc2tpbGxEYXRhLnNlbGVjdGVkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmIChleGlzdGluZ0l0ZW0pIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGNoYW5nZXMgPSB7fVxuICAgICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraWxsRGF0YS5iYXNlVmFsdWUgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBza2lsbERhdGEuYmFzZVZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdlc1snc3lzdGVtLnZhbHVlJ10gPSBiYXNlQ2FsY3VsYXRlZFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLnN5c3RlbS5mbGFncykpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2hhbmdlc1tgc3lzdGVtLmZsYWdzLiR7a2V5fWBdID0gdHJ1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LmtleXMoY2hhbmdlcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBjaGFuZ2VzLl9pZCA9IGV4aXN0aW5nSXRlbS5pZFxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2NoYW5nZXNdKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgZGF0YS5uYW1lID0gQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKGV4aXN0aW5nSXRlbSlcbiAgICAgICAgICAgICAgICAgIGFkZFRoaXMgPSBmYWxzZVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IHNraWxsTGlzdC5maW5kKGkgPT4gaS5pZCA9PT0gc2tpbGxEYXRhLnNlbGVjdGVkKVxuICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZsYWdzID0gZGF0YS5zeXN0ZW0/LmZsYWdzXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBkdXBsaWNhdGUoZXhpc3RpbmcpXG4gICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZsYWdzKSkge1xuICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uZmxhZ3Nba2V5XSA9IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEoZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ua2VlcGJhc2V2YWx1ZSA/PyBmYWxzZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmJhc2VWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VDYWxjdWxhdGVkID0gc2tpbGxEYXRhLmJhc2VWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udmFsdWUgPSBiYXNlQ2FsY3VsYXRlZFxuICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVmFsdWUgPSBkYXRhLnN5c3RlbS52YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgICBza2lsbERhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIGlmICghKGRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LmtlZXBiYXNldmFsdWUgPz8gZmFsc2UpKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoc2tpbGxEYXRhLmJhc2VWYWx1ZSAhPT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZUNhbGN1bGF0ZWQgPSBza2lsbERhdGEuYmFzZVZhbHVlXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnZhbHVlID0gYmFzZUNhbGN1bGF0ZWRcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VWYWx1ZSA9IGRhdGEuc3lzdGVtLnZhbHVlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxsTmFtZSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICAgIGRhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhZGRUaGlzKSB7XG4gICAgICAgICAgICBpZiAoU3RyaW5nKGJhc2VWYWx1ZSkgIT09IFN0cmluZyhiYXNlQ2FsY3VsYXRlZCkpIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uYmFzZSA9IGJhc2VDYWxjdWxhdGVkXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6IHtcbiAgICAgICAgICBpZiAodGhpcy50eXBlICE9PSAnY29udGFpbmVyJykge1xuICAgICAgICAgICAgY29uc3QgbWFpblNraWxsID0gZGF0YS5zeXN0ZW0/LnNraWxsPy5tYWluPy5uYW1lXG4gICAgICAgICAgICBpZiAobWFpblNraWxsKSB7XG4gICAgICAgICAgICAgIGxldCBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKG1haW5Ta2lsbClbMF1cbiAgICAgICAgICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgICAgICAgICAgICAgPyBtYWluU2tpbGwubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgICAgICAgICAgICAgOiBtYWluU2tpbGxcbiAgICAgICAgICAgICAgICAvLyB0cnkgdG8gdXNlIGFuIGFscmVhZHkgZGVmaW5lZCBza2lsbFxuICAgICAgICAgICAgICAgIC8vIFRPRE86IHNlYXJjaCBvbiB0aGUgY29tcGVuZGl1bXNcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IGdhbWUuaXRlbXMuZmluZChcbiAgICAgICAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICAgICAgICAgIChpdGVtLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpIHx8IGl0ZW0uc3lzdGVtLnNraWxsTmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhbZXhpc3RpbmddKVxuICAgICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmdldFNraWxsc0J5TmFtZShtYWluU2tpbGwpWzBdXG4gICAgICAgICAgICAgICAgICAvLyBza2lsbCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmNyZWF0ZVdlYXBvblNraWxsKFxuICAgICAgICAgICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAhIWRhdGEuc3lzdGVtLnByb3BlcnRpZXM/LnJuZ2RcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHNraWxsKSBkYXRhLnN5c3RlbS5za2lsbC5tYWluLmlkID0gc2tpbGwuaWRcbiAgICAgICAgICAgIH0gLy8gVE9ETyA6IEVsc2UgOiBzZWxlY3Rpb25uZXIgbGUgc2tpbGwgZGFucyBsYSBsaXN0ZSBvdSBlbiBjcsOpZXIgdW4gbm91dmVhdS5cblxuICAgICAgICAgICAgY29uc3Qgc2Vjb25kU2tpbGwgPSBkYXRhLnN5c3RlbT8uc2tpbGw/LmFsdGVybmF0aXY/Lm5hbWVcbiAgICAgICAgICAgIGlmIChzZWNvbmRTa2lsbCkge1xuICAgICAgICAgICAgICBsZXQgc2tpbGwgPSB0aGlzLmdldFNraWxsc0J5TmFtZShzZWNvbmRTa2lsbClbMF1cbiAgICAgICAgICAgICAgaWYgKCFza2lsbCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBzZWNvbmRTa2lsbC5tYXRjaCgvXFwoKFteKV0rKVxcKS8pXG4gICAgICAgICAgICAgICAgICA/IHNlY29uZFNraWxsLm1hdGNoKC9cXCgoW14pXSspXFwpLylbMV1cbiAgICAgICAgICAgICAgICAgIDogc2Vjb25kU2tpbGxcbiAgICAgICAgICAgICAgICBjb25zdCBleGlzdGluZyA9IGdhbWUuaXRlbXMuZmluZChcbiAgICAgICAgICAgICAgICAgIGl0ZW0gPT4gaXRlbS50eXBlID09PSAnc2tpbGwnICYmXG4gICAgICAgICAgICAgICAgICAgIChpdGVtLm5hbWUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpIHx8IGl0ZW0uc3lzdGVtLnNraWxsTmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hZGRJdGVtcyhbZXhpc3RpbmddKVxuICAgICAgICAgICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmdldFNraWxsc0J5TmFtZShzZWNvbmRTa2lsbClbMF1cbiAgICAgICAgICAgICAgICAgIC8vIHNraWxsID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuY3JlYXRlV2VhcG9uU2tpbGwoXG4gICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICEhZGF0YS5zeXN0ZW0ucHJvcGVydGllcz8ucm5nZFxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoc2tpbGwpIGRhdGEuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgPSBza2lsbC5pZFxuICAgICAgICAgICAgfSAvLyBUT0RPIDogRWxzZSA6IHNlbGVjdGlvbm5lciBsZSBza2lsbCBkYW5zIGxhIGxpc3RlIG91IGVuIGNyw6llciB1biBub3V2ZWF1LlxuICAgICAgICAgIH1cblxuICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG5cbiAgICAgICAgY2FzZSAnc2V0dXAnOiB7XG4gICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmVuYWJsZUNoYXJhY3RlcmlzaXRpY3MpIHtcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0ID0ge31cbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnN0ciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3N0cicpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5jb24gPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdjb24nKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3Quc2l6ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnc2l6JylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmRleCA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ2RleCcpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5hcHAgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdhcHAnKVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuaW50ID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYygnaW50JylcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnBvdyA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoJ3BvdycpXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5lZHUgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdlZHUnKVxuXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5sdWNrID0ge31cbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sudmFsdWUgPSBpc05hTih0aGlzLmx1Y2spXG4gICAgICAgICAgICAgID8gbnVsbFxuICAgICAgICAgICAgICA6IHRoaXMubHVja1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QubHVjay5sYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuTHVjaydcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2suc2hvcnROYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5MdWNrJ1xuICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICBpZiAoIWRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMpIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcyA9IHt9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnN0ciA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnN0ci52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5jb24gPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5jb24udmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuc2l6ID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3Quc2l6LnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLmRleCA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LmRleC52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5hcHAgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5hcHAudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMuaW50ID1cbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmxpc3QuaW50LnZhbHVlXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0LnBvdy52YWx1ZVxuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5lZHUgPVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MubGlzdC5lZHUudmFsdWVcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMubHVjayA9XG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5saXN0Lmx1Y2sudmFsdWVcbiAgICAgICAgICAgIGlmIChkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG9pbnRzLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3BlbmRQb2ludHMnKVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0udGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbENoYXJhYycpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5wb2ludHNXYXJuaW5nID0gIShcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zdHIgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5jb24gIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5zaXogIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5kZXggIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5hcHAgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5pbnQgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3cgIT09IG51bGwgJiZcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5lZHUgIT09IG51bGxcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGNvbnN0IHJvbGxlZCA9IGF3YWl0IENoYXJhY1JvbGxEaWFsb2cuY3JlYXRlKGRhdGEuc3lzdGVtKVxuICAgICAgICAgICAgaWYgKHJvbGxlZCkge1xuICAgICAgICAgICAgICBjb25zdCB1cGRhdGVEYXRhID0ge31cbiAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgW1xuICAgICAgICAgICAgICAgICdzdHInLFxuICAgICAgICAgICAgICAgICdjb24nLFxuICAgICAgICAgICAgICAgICdzaXonLFxuICAgICAgICAgICAgICAgICdkZXgnLFxuICAgICAgICAgICAgICAgICdhcHAnLFxuICAgICAgICAgICAgICAgICdpbnQnLFxuICAgICAgICAgICAgICAgICdwb3cnLFxuICAgICAgICAgICAgICAgICdlZHUnXG4gICAgICAgICAgICAgIF0pIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldKSB7XG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS52YWx1ZWBdID1cbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlc1trZXldXG4gICAgICAgICAgICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLiR7a2V5fS5mb3JtdWxhYF0gPVxuICAgICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHNba2V5XVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5sdWNrKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlJ10gPVxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5sdWNrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93KSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJ10gPVxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnZhbHVlcy5wb3dcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCddID0gTWF0aC5mbG9vcihcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy52YWx1ZXMucG93IC8gNVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5tcC5tYXgnXSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MudmFsdWVzLnBvdyAvIDVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUodXBkYXRlRGF0YSwgeyByZW5kZXJTaGVldDogZmFsc2UgfSlcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6IHRoaXMucmF3SHBNYXgsXG4gICAgICAgICAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLmhwLm1heCc6IHRoaXMucmF3SHBNYXhcbiAgICAgICAgICAgICAgfSwgeyByZW5kZXJTaGVldDogZmFsc2UgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBlcmEgPSBPYmplY3QuZW50cmllcyhkYXRhLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMpLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pXG4gICAgICAgICAgY29uc3QgaXRlbXMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IGRhdGEuc3lzdGVtLml0ZW1zLCBlcmE6ICh0eXBlb2YgZXJhWzBdICE9PSAndW5kZWZpbmVkJyA/IGVyYVswXSA6IHRydWUpIH0pXG4gICAgICAgICAgY29uc3Qgc2tpbGxzID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgPT09ICdza2lsbCcpXG4gICAgICAgICAgY29uc3Qgb3RoZXJzSXRlbXMgPSBpdGVtcy5maWx0ZXIoaXQgPT4gaXQudHlwZSAhPT0gJ3NraWxsJylcbiAgICAgICAgICBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKHNraWxscylcbiAgICAgICAgICBhd2FpdCB0aGlzLmFkZEl0ZW1zKG90aGVyc0l0ZW1zKVxuICAgICAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpKSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmFja3N0b3J5JzogZGF0YS5zeXN0ZW0uYmFja3N0b3J5IH0sIHsgcmVuZGVyU2hlZXQ6IGZhbHNlIH0pXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc2VjdGlvbk5hbWUgb2YgZGF0YS5zeXN0ZW0uYmlvU2VjdGlvbnMpIHtcbiAgICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICAgICF0aGlzLnN5c3RlbS5iaW9ncmFwaHk/LmZpbmQoXG4gICAgICAgICAgICAgICAgICBlbCA9PiBzZWN0aW9uTmFtZSA9PT0gZWwudGl0bGVcbiAgICAgICAgICAgICAgICApICYmXG4gICAgICAgICAgICAgICAgc2VjdGlvbk5hbWVcbiAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jcmVhdGVCaW9TZWN0aW9uKHNlY3Rpb25OYW1lKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHJlZmFjdG9yIHRoaXNcbiAgICAgICAgICBjb25zdCBtb25ldGFyeSA9IG1lcmdlT2JqZWN0KHRoaXMuc3lzdGVtLm1vbmV0YXJ5LCBkdXBsaWNhdGUoZGF0YS5zeXN0ZW0ubW9uZXRhcnkpKVxuICAgICAgICAgIGNvbnN0IHNoZWV0ID0gdGhpcy5zaGVldFxuICAgICAgICAgIGxldCBzdGF0ZSA9IGZhbHNlXG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgc3RhdGUgPSBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICByZXNvbHZlKHNoZWV0Ll9zdGF0ZSlcbiAgICAgICAgICAgIH0sIDEwMCkpXG4gICAgICAgICAgfSB3aGlsZSAoc3RhdGUgPT09IEFwcGxpY2F0aW9uLlJFTkRFUl9TVEFURVMuUkVOREVSSU5HKVxuICAgICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0ubW9uZXRhcnknOiBtb25ldGFyeVxuICAgICAgICAgIH0pXG4gICAgICAgICAgSG9va3MuY2FsbCgnc2V0dXBGaW5pc2hlZENvQzcnKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnYXJjaGV0eXBlJzpcbiAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgLy8gQXJjaGV0eXByZSBvbmx5IGZvciBQQ3NcbiAgICAgICAgICAgIGlmICh0aGlzLmFyY2hldHlwZSkge1xuICAgICAgICAgICAgICBsZXQgcmVzZXRBcmNoZXR5cGUgPSBmYWxzZVxuICAgICAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZXNldEFyY2hldHlwZScpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVzZXRBcmNoZXR5cGVIaW50Jywge1xuICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lXG4gICAgICAgICAgICAgICAgfSl9PC9wPmAsXG4gICAgICAgICAgICAgICAgeWVzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXNldEFyY2hldHlwZSA9IHRydWVcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGRlZmF1bHRZZXM6IGZhbHNlXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIGlmIChyZXNldEFyY2hldHlwZSkgYXdhaXQgdGhpcy5yZXNldEFyY2hldHlwZSgpXG4gICAgICAgICAgICAgIGVsc2UgcmV0dXJuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IGNvcmVDaGFyYWMgPSBbXVxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzW2tleV0gPSBmYWxzZVxuICAgICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhrZXkpXG4gICAgICAgICAgICAgICAgY2hhci5rZXkgPSBrZXlcbiAgICAgICAgICAgICAgICBjb3JlQ2hhcmFjLnB1c2goY2hhcilcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgY2hhcmFjXG5cbiAgICAgICAgICAgIGlmIChjb3JlQ2hhcmFjLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICAgICAgY29uc3QgY2hhckRpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgICBjaGFyRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3MgPSBjb3JlQ2hhcmFjXG4gICAgICAgICAgICAgIGNoYXJEaWFsb2dEYXRhLnRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNlbGVjdENvcmVDaGFyYWMnKVxuICAgICAgICAgICAgICBjaGFyYWMgPSBhd2FpdCBDaGFyYWNTZWxlY3REaWFsb2cuY3JlYXRlKGNoYXJEaWFsb2dEYXRhKVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb3JlQ2hhcmFjLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICBjaGFyYWMgPSBjb3JlQ2hhcmFjWzBdLmtleVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIWNoYXJhYykgcmV0dXJuXG4gICAgICAgICAgICBkYXRhLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzW2NoYXJhY10gPSB0cnVlXG4gICAgICAgICAgICBpZiAoZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEuZW5hYmxlZCkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBOdW1iZXIoZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEudmFsdWUpXG4gICAgICAgICAgICAgIGlmIChpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyYWMpXG4gICAgICAgICAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBSb2xsKFxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEudmFsdWVcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgICByb2xsLnRvTWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAgICdDb0M3Lk1lc3NhZ2VSb2xsaW5nQ2hhcmFjdGVyaXN0aWMnLFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGNoYXIubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgZm9ybXVsYTogZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc0Zvcm11bGEudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBjaGFyLnZhbHVlIDwgcm9sbC50b3RhbCA/IHJvbGwudG90YWwgOiBjaGFyLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgICAgIFtgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2NoYXJhY30udmFsdWVgXTogdmFsdWVcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQWRkIGFsbCBza2lsbHNcbiAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKGRhdGEuc3lzdGVtLnNraWxscywgJ2FyY2hldHlwZScpXG5cbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICAgIGFyY2hldHlwZSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdvY2N1cGF0aW9uJzpcbiAgICAgICAgICBpZiAodGhpcy50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgICAgICAgLy8gT2NjdXBhdGlvbiBvbmx5IGZvciBQQ3NcbiAgICAgICAgICAgIGlmICh0aGlzLm9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgICAgbGV0IHJlc2V0T2NjdXBhdGlvbiA9IGZhbHNlXG4gICAgICAgICAgICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgICAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJlc2V0T2NjdXBhdGlvbicpLFxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVzZXRPY2N1cGF0aW9uSGludCcsIHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZVxuICAgICAgICAgICAgICAgIH0pfTwvcD5gLFxuICAgICAgICAgICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmVzZXRPY2N1cGF0aW9uID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFllczogZmFsc2VcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgaWYgKHJlc2V0T2NjdXBhdGlvbikgYXdhaXQgdGhpcy5yZXNldE9jY3VwYXRpb24oKVxuICAgICAgICAgICAgICBlbHNlIHJldHVyblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDb252ZXJ0IENvQ0lEcyB0byBpdGVtc1xuICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5za2lsbHMgfSlcblxuICAgICAgICAgICAgaWYgKE51bWJlcihkYXRhLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4KSA+IDApIHtcbiAgICAgICAgICAgICAgLy8gT2NjdXBhdGlvbnMgd2l0aCBhIGNyZWRpdCByYXRpbmcgcmVxdWlyZSBhIGNyZWRpdCByYXRpbmcgc2tpbGxcbiAgICAgICAgICAgICAgY29uc3QgYWN0b3JDcmVkaXRSYXRpbmcgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZmluZENvY0lkSW5MaXN0KCdpLnNraWxsLmNyZWRpdC1yYXRpbmcnLCBkYXRhLnN5c3RlbS5za2lsbHMpXG4gICAgICAgICAgICAgIGlmIChhY3RvckNyZWRpdFJhdGluZy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZpbmRDb2NJZEluTGlzdCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJywgdGhpcy5pdGVtcykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICBkYXRhLnN5c3RlbS5za2lsbHMucHVzaCgnaS5za2lsbC5jcmVkaXQtcmF0aW5nJylcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChnYW1lLnN5c3RlbS5hcGkuY29jaWQuZmluZENvY0lkSW5MaXN0KCdpLnNraWxsLmNyZWRpdC1yYXRpbmcnLCB0aGlzLml0ZW1zKS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscy5wdXNoKGFjdG9yQ3JlZGl0UmF0aW5nWzBdKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBTZWxlY3QgY2hhcmFjdGVyaXN0aWNcbiAgICAgICAgICAgIGNvbnN0IHBvaW50c0RpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3MgPSBkYXRhLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcbiAgICAgICAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgICAgICAgIGxldCBvcHRpb25hbENoYXIgPSBmYWxzZVxuICAgICAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzXG4gICAgICAgICAgICApKSB7XG4gICAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGVudHJ5XG4gICAgICAgICAgICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgICAgICAgICAgcG9pbnRzRGlhbG9nRGF0YS5jaGFyYWN0ZXJpc3RpY3Nba2V5XS5uYW1lID0gY2hhci5sYWJlbFxuICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnZhbHVlID0gY2hhci52YWx1ZVxuICAgICAgICAgICAgICBpZiAodmFsdWUuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsID1cbiAgICAgICAgICAgICAgICAgIGNoYXIudmFsdWUgKlxuICAgICAgICAgICAgICAgICAgTnVtYmVyKHBvaW50c0RpYWxvZ0RhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0ubXVsdGlwbGllcilcbiAgICAgICAgICAgICAgICBpZiAoIXZhbHVlLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICB0b3RhbCArPSBwb2ludHNEaWFsb2dEYXRhLmNoYXJhY3RlcmlzdGljc1trZXldLnRvdGFsXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbmFsQ2hhciA9IHRydWVcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBvaW50c0RpYWxvZ0RhdGEudG90YWwgPSB0b3RhbFxuICAgICAgICAgICAgaWYgKG9wdGlvbmFsQ2hhcikge1xuICAgICAgICAgICAgICAvLyBJcyB0aGVyZSBhbnkgb3B0aW9uYWwgY2hhciB0byBjaG9vc2UgZm9yIHBvaW50cyBjYWxjID9cbiAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUG9pbnRTZWxlY3REaWFsb2cuY3JlYXRlKHBvaW50c0RpYWxvZ0RhdGEpXG4gICAgICAgICAgICAgIGlmICghcmVzdWx0KSByZXR1cm4gLy8gUG9pbnQgbm90IHNlbGVjdGVkID0+IGV4aXQuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBvcHRpb25hbCBza2lsbHNcbiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBkYXRhLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICAgIC8vIENvbnZlcnQgQ29DSWRzIHRvIGl0ZW1zXG4gICAgICAgICAgICAgIGRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBkYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyB9KVxuXG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxscyA9IFtdXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudHlwZSA9ICdvY2N1cGF0aW9uJ1xuICAgICAgICAgICAgICBkaWFsb2dEYXRhLmFjdG9ySWQgPSB0aGlzLmlkXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50ID0gTnVtYmVyKGRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0ub3B0aW9ucylcbiAgICAgICAgICAgICAgZGlhbG9nRGF0YS50aXRsZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbFNlbGVjdGlvbldpbmRvdycpXG5cbiAgICAgICAgICAgICAgLy8gU2VsZWN0IG9ubHkgc2tpbGxzIHRoYXQgYXJlIG5vdCBwcmVzZW50IG9yIGFyZSBub3QgZmxhZ2dlZCBhcyBvY2N1cGF0aW9uLlxuICAgICAgICAgICAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIGRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzKSB7XG4gICAgICAgICAgICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyh2YWx1ZSkpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2godmFsdWUpXG4gICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIGdlbmVyaWMgc3BlYyB3ZSBhbHdheXMgYWRkIGl0XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuaXRlbXMuZmluZChpdGVtID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsdWUubmFtZSAmJiBpdGVtLnR5cGUgPT09ICdza2lsbCdcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBpZiAoIXNraWxsIHx8ICFza2lsbC5zeXN0ZW0uZmxhZ3M/Lm9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgc2tpbGwgd2FzIGFkZGVkIHRvIHNraWxsIGxpc3QgcHJldmlvdXNseSwgcmVtb3ZlIGl0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlTZWxlY3RlZFNraWxsID0gZGF0YS5zeXN0ZW0uc2tpbGxzLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW0ubmFtZSA9PT0gdmFsdWUubmFtZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBpZiAoIWFscmVhZHlTZWxlY3RlZFNraWxsKSBkaWFsb2dEYXRhLnNraWxscy5wdXNoKHZhbHVlKVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm9uZSwgZG8gbm90aGluZy5cbiAgICAgICAgICAgICAgaWYgKGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggPD0gZGlhbG9nRGF0YS5vcHRpb25zQ291bnQpIHtcbiAgICAgICAgICAgICAgICAgIC8vIElmIHRoZXJlJ3MgaXMgbGVzcyBza2lsbCB0aGFuIG9wdGlvbnMsIGFkZCB0aGVtIGFsbC5cbiAgICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvTGVzc1NraWxsVGhhbk9wdGlvbnMnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgc2tpbGxDb3VudDogZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnNDb3VudDogZGlhbG9nRGF0YS5vcHRpb25zQ291bnRcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuYWRkVW5pcXVlSXRlbXMoIGRpYWxvZ0RhdGEuc2tpbGxzLCAnb2NjdXBhdGlvbicpO1xuICAgICAgICAgICAgICAgICAgY29uc3QgbWVyZ2VkID0gQ29DN0l0ZW0ubWVyZ2VPcHRpb25hbFNraWxscyhcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzLFxuICAgICAgICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxsc1xuICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICAgZGF0YS5zeXN0ZW0uc2tpbGxzID0gbWVyZ2VkXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIFdhaXQgZm9yIHNraWxsIHNlbGVjdGlvbi5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gYXdhaXQgU2tpbGxTZWxlY3REaWFsb2cuY3JlYXRlKGRpYWxvZ0RhdGEpXG4gICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW5mb0FsbFNraWxsc0FscmVhZHlTZWxlY3RlZCcpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBleHRyYSBza2lsbHNcbiAgICAgICAgICAgIGlmIChOdW1iZXIoZGF0YS5zeXN0ZW0ucGVyc29uYWwpKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRpYWxvZ0RhdGEgPSB7fVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnNraWxscyA9IFtdXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEudHlwZSA9ICdvY2N1cGF0aW9uJ1xuICAgICAgICAgICAgICBkaWFsb2dEYXRhLmFjdG9ySWQgPSB0aGlzLmlkXG4gICAgICAgICAgICAgIGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50ID0gTnVtYmVyKGRhdGEuc3lzdGVtLnBlcnNvbmFsKVxuICAgICAgICAgICAgICBkaWFsb2dEYXRhLnRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZWxlY3RQZXJzb25hbFNraWxscycsIHtcbiAgICAgICAgICAgICAgICBudW1iZXI6IE51bWJlcihkYXRhLnN5c3RlbS5wZXJzb25hbClcbiAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAvLyBTZWxlY3Qgb25seSBza2lsbHMgdGhhdCBhcmUgbm90IHByZXNlbnQgb3IgYXJlIG5vdCBmbGFnZ2VkIGFzIG9jY3VwYXRpb24uXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0aGlzLnNraWxscykge1xuICAgICAgICAgICAgICAgIC8vIFNlbGVjdCBhbGwgc2tpbGxzIHRoYXQgYXJlIG5vdCBhbHJlYWR5IGZsYWdnZWQgYXMgb2NjdXBhdGlvbiwgY2FuIGhhdmUgYWRqdXN0bWVudHMgYW5kIFhQLlxuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICFzLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uICYmXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0ucHJvcGVydGllcy5ub2FkanVzdG1lbnRzICYmXG4gICAgICAgICAgICAgICAgICAhcy5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpblxuICAgICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgICAgLy8gaWYgc2tpbGwgYWxyZWFkeSBzZWxlY3RlZCBkb24ndCBhZGQgaXRcbiAgICAgICAgICAgICAgICAgIGNvbnN0IGFscmVhZHlTZWxlY3RlZFNraWxsID0gZGF0YS5zeXN0ZW0uc2tpbGxzLmZpbmQoaXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IHMubmFtZVxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGlmICghYWxyZWFkeVNlbGVjdGVkU2tpbGwpIGRpYWxvZ0RhdGEuc2tpbGxzLnB1c2gocylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBpZiB0aGVyZSdzIG5vbmUsIGRvIG5vdGhpbmcuXG4gICAgICAgICAgICAgIGlmIChkaWFsb2dEYXRhLnNraWxscy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICBpZiAoZGlhbG9nRGF0YS5za2lsbHMubGVuZ3RoIDw9IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGlzIGxlc3Mgc2tpbGwgdGhhbiBvcHRpb25zLCBhZGQgdGhlbSBhbGwuXG4gICAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0xlc3NTa2lsbFRoYW5PcHRpb25zJywge1xuICAgICAgICAgICAgICAgICAgICAgIHNraWxsQ291bnQ6IGRpYWxvZ0RhdGEuc2tpbGxzLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zQ291bnQ6IGRpYWxvZ0RhdGEub3B0aW9uc0NvdW50XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAvLyBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKCBkaWFsb2dEYXRhLnNraWxscywgJ29jY3VwYXRpb24nKTtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgZGlhbG9nRGF0YS5za2lsbHNcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciBza2lsbCBzZWxlY3Rpb24uXG4gICAgICAgICAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IGF3YWl0IFNraWxsU2VsZWN0RGlhbG9nLmNyZWF0ZShkaWFsb2dEYXRhKSAvLyBEaWFsb2cgZGF0YSBidWcgPz8/XG4gICAgICAgICAgICAgICAgICBpZiAoIXNlbGVjdGVkKSByZXR1cm5cbiAgICAgICAgICAgICAgICAgIGNvbnN0IG1lcmdlZCA9IENvQzdJdGVtLm1lcmdlT3B0aW9uYWxTa2lsbHMoXG4gICAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyxcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIGRhdGEuc3lzdGVtLnNraWxscyA9IG1lcmdlZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW5mb0FsbFNraWxsc0FscmVhZHlTZWxlY3RlZCcpXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFkZCBhbGwgc2tpbGxzXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFkZFVuaXF1ZUl0ZW1zKGRhdGEuc3lzdGVtLnNraWxscywgJ29jY3VwYXRpb24nKVxuICAgICAgICAgICAgLy8gQ3JlZGl0IHJhdGluZyBpcyBhbHdheXMgcGFydCBvZiBvY2N1cGF0aW9uXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWRpdFJhdGluZ1NraWxsPy5zZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICAgICAgICAvLyBzZXR0aW5nIGl0IHRvIG1pbiBjcmVkaXQgcmF0aW5nXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNyZWRpdFJhdGluZ1NraWxsPy51cGRhdGUoe1xuICAgICAgICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLm9jY3VwYXRpb24nOiBOdW1iZXIoZGF0YS5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1pbilcbiAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgIHByb2Nlc3NlZERhdGFBcnJheS5wdXNoKGR1cGxpY2F0ZShkYXRhKSlcbiAgICAgICAgICAgIG9jY3VwYXRpb24gPSB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBwcm9jZXNzZWREYXRhQXJyYXkucHVzaChkdXBsaWNhdGUoZGF0YSkpXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWREYXRhQXJyYXkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgY29uc3QgcHJvY2Vzc2VkID0gYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoXG4gICAgICBlbWJlZGRlZE5hbWUsXG4gICAgICBwcm9jZXNzZWREYXRhQXJyYXksXG4gICAgICBvcHRpb25zXG4gICAgKVxuXG4gICAgaWYgKGFyY2hldHlwZSkge1xuICAgICAgLy8gc2V0dGluZyBwb2ludHNcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5hcmNoZXR5cGUnOiB0aGlzLmFyY2hldHlwZVBvaW50c1xuICAgICAgfSlcbiAgICAgIEhvb2tzLmNhbGwoJ2FyY2hldHlwZUZpbmlzaGVkQ29DNycpXG4gICAgfVxuICAgIGlmIChvY2N1cGF0aW9uKSB7XG4gICAgICAvLyBzZXR0aW5nIHBvaW50c1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmRldmVsb3BtZW50Lm9jY3VwYXRpb24nOiB0aGlzLm9jY3VwYXRpb25Qb2ludHMsXG4gICAgICAgICdzeXN0ZW0uZGV2ZWxvcG1lbnQucGVyc29uYWwnOiB0aGlzLnBlcnNvbmFsUG9pbnRzXG4gICAgICB9KVxuICAgICAgSG9va3MuY2FsbCgnb2NjdXBhdGlvbkZpbmlzaGVkQ29DNycpXG4gICAgfVxuXG4gICAgcmV0dXJuIHByb2Nlc3NlZFxuICB9XG5cbiAgLy8gZ2V0U2tpbGxJZEJ5TmFtZSggc2tpbGxOYW1lKXtcbiAgLy8gICBsZXQgaWQgPSBudWxsO1xuICAvLyAgICBmb3IgKGNvbnN0IFttYXAsIGtleSwgdmFsdWVdIG9mIHRoaXMuaXRlbXMpIHtcbiAgLy8gICAgIGlmKCB2YWx1ZS5uYW1lID09IHNraWxsTmFtZSkgaWQgPSB2YWx1ZS5pZDtcbiAgLy8gICB9O1xuXG4gIC8vICAgcmV0dXJuIGlkO1xuICAvLyB9XG5cbiAgZ2V0SXRlbUlkQnlOYW1lIChpdGVtTmFtZSkge1xuICAgIGxldCBpZCA9IG51bGxcbiAgICBjb25zdCBuYW1lID0gaXRlbU5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgPyBpdGVtTmFtZS5tYXRjaCgvXFwoKFteKV0rKVxcKS8pWzFdXG4gICAgICA6IGl0ZW1OYW1lXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoXG4gICAgICAgIENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyh2YWx1ZSkudG9Mb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICApIHtcbiAgICAgICAgaWQgPSB2YWx1ZS5pZFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpZFxuICB9XG5cbiAgZ2V0SXRlbXNCeU5hbWUgKGl0ZW1OYW1lKSB7XG4gICAgY29uc3QgaXRlbUxpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLm5hbWUgPT09IGl0ZW1OYW1lKSBpdGVtTGlzdC5wdXNoKHZhbHVlKVxuICAgIH1cblxuICAgIHJldHVybiBpdGVtTGlzdFxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqXG4gICAqL1xuICBnZXRTa2lsbHNCeU5hbWUgKHNraWxsTmFtZSkge1xuICAgIC8vIFRPRE8gOiBtb3JlIGFnZ3Jlc3NpdmUgZmluZGluZyBpbmNsdWRpbmcgc3BlY3NcbiAgICBjb25zdCBza2lsbExpc3QgPSBbXVxuICAgIGNvbnN0IG5hbWUgPSBza2lsbE5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVxuICAgICAgPyBza2lsbE5hbWUubWF0Y2goL1xcKChbXildKylcXCkvKVsxXVxuICAgICAgOiBza2lsbE5hbWVcblxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKFxuICAgICAgICAoXG4gICAgICAgICAgQ29DN0l0ZW0uZ2V0TmFtZVdpdGhvdXRTcGVjKHZhbHVlKS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICB2YWx1ZS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCA9PT0gc2tpbGxOYW1lXG4gICAgICAgICkgJiZcbiAgICAgICAgdmFsdWUudHlwZSA9PT0gJ3NraWxsJ1xuICAgICAgKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc2tpbGxMaXN0XG4gIH1cblxuICBnZXRGaXJzdFNraWxsQnlDb0NJRCAoY29jaWQpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVtcy5maW5kKGkgPT4gaS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCA9PT0gY29jaWQpXG4gIH1cblxuICAvLyBwYXJzZUZvcm11bGEgKGZvcm11bGEpIHtcbiAgLy8gICBsZXQgcGFyc2VkRm9ybXVsYSA9IGZvcm11bGFcbiAgLy8gICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3IpKSB7XG4gIC8vICAgICBwYXJzZWRGb3JtdWxhID0gcGFyc2VkRm9ybXVsYS5yZXBsYWNlKGtleSwgdmFsdWUpXG4gIC8vICAgfVxuICAvLyAgIHJldHVybiBwYXJzZWRGb3JtdWxhXG4gIC8vIH1cblxuICBwYXJzZUNoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgY29uc3QgcGFyc2VkID0ge31cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmZvcm11bGEuYWN0b3IpKSB7XG4gICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgIHBhcnNlZFtrZXkuc3Vic3RyaW5nKDEpXSA9IGdldFByb3BlcnR5KHRoaXMsIHZhbHVlLnN1YnN0cmluZyg1KSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZFxuICB9XG5cbiAgc3RhdGljIGdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbiAoKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhcbiAgICAgIGdhbWUuc3lzdGVtLnRlbXBsYXRlLkFjdG9yLnRlbXBsYXRlcy5jaGFyYWN0ZXJpc3RpY3MuY2hhcmFjdGVyaXN0aWNzXG4gICAgKSkge1xuICAgICAgY2hhcmFjdGVyaXN0aWNzLnB1c2goe1xuICAgICAgICBrZXksXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLnNob3J0KSxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5sYWJlbClcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3NcbiAgfVxuXG4gIGdldENoYXJhY3RlcmlzdGljIChjaGFyTmFtZSkge1xuICAgIGlmICh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICkpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCkudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICAgIGNoYXJOYW1lLnRvTG93ZXJDYXNlKCkgfHxcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUubGFiZWwpLnRvTG93ZXJDYXNlKCkgPT09XG4gICAgICAgICAgICBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAga2V5ID09PSBjaGFyTmFtZS50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBzaG9ydE5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZS5zaG9ydCksXG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKSxcbiAgICAgICAgICAgIHZhbHVlOiB2YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0QXR0cmlidXRlIChhdHRyaWJOYW1lKSB7XG4gICAgaWYgKFxuICAgICAgWydsY2snLCAnbHVjaycsIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJykudG9Mb3dlckNhc2UoKV0uaW5jbHVkZXMoXG4gICAgICAgIGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKVxuICAgICAgKVxuICAgICkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5OiAnbGNrJyxcbiAgICAgICAgc2hvcnROYW1lOiAnbHVjaycsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYXR0cmlicy5sY2sudmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFxuICAgICAgW1xuICAgICAgICAnc2FuJyxcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKS50b0xvd2VyQ2FzZSgpXG4gICAgICBdLmluY2x1ZGVzKGF0dHJpYk5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICApIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtleTogJ3NhbicsXG4gICAgICAgIHNob3J0TmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpLFxuICAgICAgICB2YWx1ZTogdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGFzeW5jIHJ1blJvbGwgKG9wdGlvbnMgPSB7fSkge1xuICAgIGlmICh0eXBlb2Ygb3B0aW9ucy5jYXJkVHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgIH1cbiAgICBpZiAodHlwZW9mIG9wdGlvbnMucHJldmVudFN0YW5kYnkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBvcHRpb25zLnByZXZlbnRTdGFuZGJ5ID0gdHJ1ZVxuICAgIH1cbiAgICBvcHRpb25zLmFjdG9yID0gdGhpc1xuICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcihvcHRpb25zKVxuICAgIHJldHVybiByZXN1bHRzXG4gIH1cblxuICBnZXQgb2NjdXBhdGlvbiAoKSB7XG4gICAgY29uc3Qgb2NjdXBhdGlvbiA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpXG4gICAgcmV0dXJuIG9jY3VwYXRpb25bMF1cbiAgfVxuXG4gIGdldCBhcmNoZXR5cGUgKCkge1xuICAgIGNvbnN0IGFyY2hldHlwZSA9IHRoaXMuaXRlbXMuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJylcbiAgICByZXR1cm4gYXJjaGV0eXBlWzBdXG4gIH1cblxuICBhc3luYyByZXNldE9jY3VwYXRpb24gKGVyYXNlT2xkID0gdHJ1ZSkge1xuICAgIGlmIChlcmFzZU9sZCkge1xuICAgICAgY29uc3Qgb2NjdXBhdGlvblNraWxsID0gdGhpcy5pdGVtcy5maWx0ZXIoaXRlbSA9PlxuICAgICAgICBpdGVtLmdldEl0ZW1GbGFnKCdvY2N1cGF0aW9uJylcbiAgICAgIClcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBvY2N1cGF0aW9uU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGF3YWl0IG9jY3VwYXRpb25Ta2lsbFtpbmRleF0udW5zZXRJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLm9jY3VwYXRpb24pIGF3YWl0IHRoaXMub2NjdXBhdGlvbi5kZWxldGUoKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogbnVsbCB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXRBcmNoZXR5cGUgKGVyYXNlT2xkID0gdHJ1ZSkge1xuICAgIGlmIChlcmFzZU9sZCkge1xuICAgICAgY29uc3QgYXJjaGV0eXBlU2tpbGwgPSB0aGlzLml0ZW1zLmZpbHRlcihpdGVtID0+XG4gICAgICAgIGl0ZW0uZ2V0SXRlbUZsYWcoJ2FyY2hldHlwZScpXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgYXJjaGV0eXBlU2tpbGwubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGF3YWl0IGFyY2hldHlwZVNraWxsW2luZGV4XS51bnNldEl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5hcmNoZXR5cGUpIGF3YWl0IHRoaXMuYXJjaGV0eXBlLmRlbGV0ZSgpXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IG51bGwgfSlcbiAgfVxuXG4gIGdldCBsdWNrICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicz8ubGNrPy52YWx1ZSlcbiAgfVxuXG4gIGFzeW5jIHNldEx1Y2sgKHZhbHVlKSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyBzcGVuZEx1Y2sgKGFtb3VudCkge1xuICAgIGFtb3VudCA9IHBhcnNlSW50KGFtb3VudClcbiAgICBpZiAoISh0aGlzLmx1Y2sgPj0gYW1vdW50KSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRoaXMuc2V0THVjayh0aGlzLmx1Y2sgLSBhbW91bnQpXG4gIH1cblxuICBnZXQgaHAgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLnZhbHVlKVxuICB9XG5cbiAgZ2V0IHJhd0hwTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5ocC5hdXRvKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgIT0gbnVsbCAmJlxuICAgICAgICB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuY29uLnZhbHVlICE9IG51bGxcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gQ29DQWN0b3IuaHBGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcywgdGhpcy50eXBlKVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heClcbiAgfVxuXG4gIGdldCBocE1heCAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KVxuICB9XG5cbiAgYXN5bmMgX3NldEhwICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KSB7XG4gICAgICB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4KVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOiB2YWx1ZSB9KVxuICB9XG5cbiAgYXN5bmMgYWRkVW5pcXVlSXRlbXMgKHNraWxsTGlzdCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBbXVxuICAgIGZvciAobGV0IHNraWxsIG9mIHNraWxsTGlzdCkge1xuICAgICAgc2tpbGwgPSBkdXBsaWNhdGUoc2tpbGwpXG4gICAgICBpZiAoZmxhZykge1xuICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChza2lsbC5zeXN0ZW0sICdmbGFncycpKSB7XG4gICAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzID0ge31cbiAgICAgICAgfVxuICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3NbZmxhZ10gPSB0cnVlXG4gICAgICB9XG4gICAgICBpZiAoQ29DN0l0ZW0uaXNBbnlTcGVjKHNraWxsKSkge1xuICAgICAgICBwcm9jZXNzZWQucHVzaChza2lsbClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IGl0ZW1JZCA9IHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsLm5hbWUpXG4gICAgICAgIGlmICghaXRlbUlkKSB7XG4gICAgICAgICAgcHJvY2Vzc2VkLnB1c2goc2tpbGwpXG4gICAgICAgIH0gZWxzZSBpZiAoZmxhZykge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmdldChpdGVtSWQpXG4gICAgICAgICAgYXdhaXQgaXRlbS5zZXRJdGVtRmxhZyhmbGFnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHByb2Nlc3NlZCwge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZEl0ZW1zIChpdGVtTGlzdCwgZmxhZyA9IG51bGwpIHtcbiAgICBjb25zdCBwcm9jZXNzZWQgPSBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtTGlzdCkge1xuICAgICAgaWYgKGZsYWcpIHtcbiAgICAgICAgaWYgKCFpdGVtLnN5c3RlbS5mbGFncykgaXRlbS5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgICBpdGVtLnN5c3RlbS5mbGFnc1tmbGFnXSA9IHRydWVcbiAgICAgIH1cbiAgICAgIHByb2Nlc3NlZC5wdXNoKGR1cGxpY2F0ZShpdGVtKSlcbiAgICB9XG4gICAgaWYgKHByb2Nlc3NlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIHByb2Nlc3NlZCwge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGFkZFVuaXF1ZUl0ZW0gKHNraWxsLCBmbGFnID0gbnVsbCkge1xuICAgIGNvbnN0IGl0ZW1JZCA9IHRoaXMuZ2V0SXRlbUlkQnlOYW1lKHNraWxsLm5hbWUpXG4gICAgaWYgKCFpdGVtSWQpIHtcbiAgICAgIGlmIChmbGFnKSB7XG4gICAgICAgIGlmICghc2tpbGwuc3lzdGVtLmZsYWdzKSBza2lsbC5zeXN0ZW0uZmxhZ3MgPSB7fVxuICAgICAgICBza2lsbC5zeXN0ZW0uZmxhZ3NbZmxhZ10gPSB0cnVlXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW3NraWxsXSwge1xuICAgICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChmbGFnKSB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5pdGVtcy5nZXQoaXRlbUlkKVxuICAgICAgYXdhaXQgaXRlbS5zZXRJdGVtRmxhZyhmbGFnKVxuICAgIH1cbiAgfVxuXG4gIGdldCByYXdNcE1heCAoKSB7XG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMubXAuYXV0bykge1xuICAgICAgaWYgKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gQ29DQWN0b3IubXBGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcylcbiAgICAgIH0gZWxzZSByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5tYXgpXG4gIH1cblxuICBnZXRSZWFzb25TYW5Mb3NzIChzYW5SZWFzb24pIHtcbiAgICBpZiAodHlwZW9mIHNhblJlYXNvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuc3lzdGVtLnNhbml0eUxvc3NFdmVudHMuZmlsdGVyKFxuICAgICAgICAgIHIgPT4gci50eXBlLnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNhblJlYXNvbi50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICAgIClbMF0gPz8geyB0eXBlOiAnJywgdG90YWxMb3NzOiAwLCBpbW11bml0eTogZmFsc2UgfVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4geyB0eXBlOiAnJywgdG90YWxMb3NzOiAwLCBpbW11bml0eTogZmFsc2UgfVxuICB9XG5cbiAgc2FuTG9zdFRvUmVhc29uIChzYW5SZWFzb24pIHtcbiAgICBpZiAoc2FuUmVhc29uKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxuICAgICAgcmV0dXJuIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3NcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNhbkxvc3NSZWFzb25FbmNvdW50ZXJlZCAoc2FuUmVhc29uKSB7XG4gICAgaWYgKHNhblJlYXNvbikge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICAgIHJldHVybiBzYW5pdHlMb3NzRXZlbnQudHlwZSAhPT0gJydcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBzZXRSZWFzb25TYW5Mb3NzIChzYW5SZWFzb24sIHNhbkxvc3MpIHtcbiAgICBpZiAodHlwZW9mIHNhblJlYXNvbiA9PT0gJ3N0cmluZycgJiYgc2FuUmVhc29uICE9PSAnJykge1xuICAgICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50cyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKVxuICAgICAgY29uc3QgaW5kZXggPSBzYW5pdHlMb3NzRXZlbnRzLmZpbmRJbmRleChcbiAgICAgICAgciA9PiByLnR5cGUudG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2FuUmVhc29uLnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICAgIGlmIChzYW5Mb3NzID4gMCkge1xuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6IHNhblJlYXNvbixcbiAgICAgICAgICAgIHRvdGFsTG9zczogc2FuTG9zcyxcbiAgICAgICAgICAgIGltbXVuaXR5OiBmYWxzZVxuICAgICAgICAgIH0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2FuaXR5TG9zc0V2ZW50c1tpbmRleF0udG90YWxMb3NzICs9IHNhbkxvc3NcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHNhbml0eUxvc3NFdmVudHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgICAgcmV0dXJuIGxlZnQudHlwZS5sb2NhbGVDb21wYXJlKHJpZ2h0LnR5cGUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIG1heExvc3NUb1NhblJlYXNvbiAoc2FuUmVhc29uLCBzYW5NYXhGb3JtdWxhKSB7XG4gICAgY29uc3Qgc2FuTWF4ID0gbmV3IFJvbGwoc2FuTWF4Rm9ybXVsYS50b1N0cmluZygpKS5ldmFsdWF0ZSh7XG4gICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgIH0pLnRvdGFsXG4gICAgY29uc3Qgc2FuaXR5TG9zc0V2ZW50ID0gdGhpcy5nZXRSZWFzb25TYW5Mb3NzKHNhblJlYXNvbilcbiAgICBpZiAoc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gTWF0aC5tYXgoMCwgc2FuTWF4IC0gc2FuaXR5TG9zc0V2ZW50LnRvdGFsTG9zcylcbiAgfVxuXG4gIGFzeW5jIGxvb3NlU2FuIChzYW5SZWFzb24sIHNhbkxvc3MpIHtcbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnQgPSB0aGlzLmdldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uKVxuICAgIGlmICghc2FuaXR5TG9zc0V2ZW50LmltbXVuaXR5KSB7XG4gICAgICBhd2FpdCB0aGlzLnNldFNhbih0aGlzLnNhbiAtIHNhbkxvc3MpXG4gICAgICB0aGlzLnNldFJlYXNvblNhbkxvc3Moc2FuUmVhc29uLCBzYW5Mb3NzKVxuICAgICAgcmV0dXJuIHNhbkxvc3NcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHNhbkxvc3MgKGNoZWNrUGFzc2VkKSB7XG4gICAgaWYgKGNoZWNrUGFzc2VkKSByZXR1cm4gdGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWRcbiAgICByZXR1cm4gdGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkXG4gIH1cblxuICBnZXQgc2FuTG9zc0NoZWNrUGFzc2VkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tQYXNzZWRcbiAgfVxuXG4gIGdldCBzYW5Mb3NzQ2hlY2tGYWlsbGVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uc3BlY2lhbD8uc2FuTG9zcz8uY2hlY2tGYWlsbGVkXG4gIH1cblxuICBnZXQgc2FuTG9zc01heCAoKSB7XG4gICAgaWYgKHRoaXMuc2FuTG9zc0NoZWNrRmFpbGxlZCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKSkpIHtcbiAgICAgICAgcmV0dXJuIE51bWJlcih0aGlzLnNhbkxvc3NDaGVja0ZhaWxsZWQpXG4gICAgICB9XG4gICAgICByZXR1cm4gbmV3IFJvbGwodGhpcy5zYW5Mb3NzQ2hlY2tGYWlsbGVkKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IHNhbkxvc3NNaW4gKCkge1xuICAgIGlmICh0aGlzLnNhbkxvc3NDaGVja1Bhc3NlZCkge1xuICAgICAgaWYgKCFpc05hTihOdW1iZXIodGhpcy5zYW5Mb3NzQ2hlY2tQYXNzZWQpKSkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBSb2xsKHRoaXMuc2FuTG9zc0NoZWNrUGFzc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICB9KS50b3RhbFxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IGRhaWx5U2FuTG9zcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuPy5kYWlseUxvc3MgfHwgMFxuICB9XG5cbiAgZ2V0IGRhaWx5U2FuTGltaXQgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbj8uZGFpbHlMaW1pdCB8fCAwXG4gIH1cblxuICBnZXQgcmF3U2FuTWF4ICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicz8uc2FuPy5hdXRvKSB7XG4gICAgICBpZiAodGhpcy5jdGh1bGh1TXl0aG9zKSByZXR1cm4gTWF0aC5tYXgoOTkgLSB0aGlzLmN0aHVsaHVNeXRob3MsIDApXG4gICAgICByZXR1cm4gOTlcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLm1heClcbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5tYXgpXG4gIH1cblxuICBnZXQgbXAgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlKVxuICB9XG5cbiAgZ2V0IG1wTWF4ICgpIHtcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tcC5hdXRvKSB7XG4gICAgICAvLyBUT0RPIGlmIGFueSBpcyBudWxsIHNldCBtYXggYmFjayB0byBudWxsLlxuICAgICAgaWYgKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb3cudmFsdWUgIT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC8gNSlcbiAgICAgIH1cbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLm1wLm1heClcbiAgfVxuXG4gIGFzeW5jIHNldE1wICh2YWx1ZSkge1xuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMFxuICAgIGlmICh2YWx1ZSA+IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KSkgeyB2YWx1ZSA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMubXAubWF4KSB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGdldCBzYW4gKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSlcbiAgfVxuXG4gIGdldCBpbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICB9XG5cbiAgZ2V0IG9jY3VwYXRpb25Qb2ludHNTcGVudCAoKSB7XG4gICAgbGV0IG9jY3VwYXRpb25Qb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbikge1xuICAgICAgICBvY2N1cGF0aW9uUG9pbnRzICs9IHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cy5vY2N1cGF0aW9uXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvY2N1cGF0aW9uUG9pbnRzXG4gIH1cblxuICBnZXQgb2NjdXBhdGlvblBvaW50cyAoKSB7XG4gICAgaWYgKCF0aGlzLm9jY3VwYXRpb24pIHJldHVybiAwXG4gICAgbGV0IHBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IGVudHJ5IG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgdGhpcy5vY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHNcbiAgICApKSB7XG4gICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSBlbnRyeVxuICAgICAgY29uc3QgY2hhciA9IHRoaXMuZ2V0Q2hhcmFjdGVyaXN0aWMoa2V5KVxuICAgICAgaWYgKHZhbHVlLnNlbGVjdGVkKSB7XG4gICAgICAgIHBvaW50cyArPSBjaGFyLnZhbHVlICogTnVtYmVyKHZhbHVlLm11bHRpcGxpZXIpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwb2ludHNcbiAgfVxuXG4gIGFzeW5jIHJlc2V0T2NjdXBhdGlvblBvaW50cyAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5kZXZlbG9wbWVudC5vY2N1cGF0aW9uJzogdGhpcy5vY2N1cGF0aW9uUG9pbnRzXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIHJlc2V0QXJjaGV0eXBlUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmRldmVsb3BtZW50LmFyY2hldHlwZSc6IHRoaXMub2NjdXBhdGlvblBvaW50c1xuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNldFBlcnNvbmFsUG9pbnRzICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAnc3lzdGVtLmRldmVsb3BtZW50LnBlcnNvbmFsJzogdGhpcy5wZXJzb25hbFBvaW50c1xuICAgIH0pXG4gIH1cblxuICBnZXQgYXJjaGV0eXBlUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBhcmNoZXR5cGVQb2ludHMgPSAwXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlKSB7XG4gICAgICAgIGFyY2hldHlwZVBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMuYXJjaGV0eXBlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBhcmNoZXR5cGVQb2ludHNcbiAgfVxuXG4gIGdldCBhcmNoZXR5cGVQb2ludHMgKCkge1xuICAgIGlmICghdGhpcy5hcmNoZXR5cGUpIHJldHVybiAwXG4gICAgcmV0dXJuIHRoaXMuYXJjaGV0eXBlLnN5c3RlbS5ib251c1BvaW50c1xuICB9XG5cbiAgZ2V0IGV4cGVyaWVuY2VQb2ludHMgKCkge1xuICAgIGxldCBleHBlcmllbmNlUG9pbnRzID0gMFxuICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgdGhpcy5za2lsbHMpIHtcbiAgICAgIGlmIChza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UpIHtcbiAgICAgICAgZXhwZXJpZW5jZVBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZXhwZXJpZW5jZVBvaW50c1xuICB9XG5cbiAgZ2V0IHBlcnNvbmFsUG9pbnRzU3BlbnQgKCkge1xuICAgIGxldCBwZXJzb25hbFBvaW50cyA9IDBcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoc2tpbGwuc3lzdGVtLmFkanVzdG1lbnRzPy5wZXJzb25hbCkge1xuICAgICAgICBwZXJzb25hbFBvaW50cyArPSBza2lsbC5zeXN0ZW0uYWRqdXN0bWVudHMucGVyc29uYWxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBlcnNvbmFsUG9pbnRzXG4gIH1cblxuICBnZXQgcGVyc29uYWxQb2ludHMgKCkge1xuICAgIHJldHVybiAyICogTnVtYmVyKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5pbnQudmFsdWUpXG4gIH1cblxuICBnZXQgaGFzRGV2ZWxvcG1lbnRQaGFzZSAoKSB7XG4gICAgZm9yIChjb25zdCBza2lsbCBvZiB0aGlzLnNraWxscykge1xuICAgICAgaWYgKHNraWxsLnN5c3RlbS5mbGFncz8uZGV2ZWxvcGVtZW50KSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5vbmx5UnVuT25jZVBlclNlc3Npb24pIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNhbml0eUxvc3NFdmVudCBvZiB0aGlzLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzKSB7XG4gICAgICBpZiAoIXNhbml0eUxvc3NFdmVudC5pbW11bml0eSkgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBzZXRTYW4gKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAwXG4gICAgaWYgKHZhbHVlID4gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4KSB7IHZhbHVlID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4ubWF4IH1cbiAgICBjb25zdCBsb3NzID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUpIC0gdmFsdWVcblxuICAgIGlmIChsb3NzID4gMCkge1xuICAgICAgbGV0IHRvdGFsTG9zcyA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcylcbiAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MpXG4gICAgICAgIDogMFxuICAgICAgdG90YWxMb3NzID0gdG90YWxMb3NzICsgbG9zc1xuICAgICAgaWYgKGxvc3MgPj0gNSkgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUpXG4gICAgICBpZiAodG90YWxMb3NzID49IHRoaXMuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TGltaXQpIHtcbiAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmUpXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUnOiB2YWx1ZSxcbiAgICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiB0b3RhbExvc3NcbiAgICAgIH0pXG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSc6IHZhbHVlIH0pXG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICBhc3luYyBzZXRBdHRyaWJBdXRvICh2YWx1ZSwgYXR0cmliKSB7XG4gICAgY29uc3QgdXBkYXRlZEtleSA9IGBzeXN0ZW0uYXR0cmlicy4ke2F0dHJpYn0uYXV0b2BcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoeyBbdXBkYXRlZEtleV06IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBdHRyaWJBdXRvIChhdHRyaWIpIHtcbiAgICB0aGlzLnNldEF0dHJpYkF1dG8oIXRoaXMuc3lzdGVtLmF0dHJpYnNbYXR0cmliXS5hdXRvLCBhdHRyaWIpXG4gIH1cblxuICBzdGF0aWMgZGJGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICBjb25zdCBzdW0gPSAoY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA/PyAwKSArIChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDApXG4gICAgaWYgKHN1bSA8IDY1KSByZXR1cm4gLTJcbiAgICBpZiAoc3VtIDwgODUpIHJldHVybiAtMVxuICAgIGlmIChzdW0gPCAxMjUpIHJldHVybiAwXG4gICAgaWYgKHN1bSA8IDE2NSkgcmV0dXJuICcxRDQnXG4gICAgcmV0dXJuIGAke01hdGguZmxvb3IoKHN1bSAtIDQ1KSAvIDgwKX1ENmBcbiAgfVxuXG4gIHN0YXRpYyBidWlsZEZyb21DaGFyYWN0ZXJpc3RpY3MgKGNoYXJhY3RlcmlzdGljcykge1xuICAgIGNvbnN0IHN1bSA9IChjaGFyYWN0ZXJpc3RpY3Muc3RyLnZhbHVlID8/IDApICsgKGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgPz8gMClcbiAgICBpZiAoc3VtIDwgNjUpIHJldHVybiAtMlxuICAgIGlmIChzdW0gPCA4NSkgcmV0dXJuIC0xXG4gICAgaWYgKHN1bSA8IDEyNSkgcmV0dXJuIDBcbiAgICBpZiAoc3VtIDwgMTY1KSByZXR1cm4gMVxuICAgIHJldHVybiBNYXRoLmZsb29yKChzdW0gLSA0NSkgLyA4MCkgKyAxXG4gIH1cblxuICBzdGF0aWMgaHBGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MsIHR5cGUpIHtcbiAgICBjb25zdCBzdW0gPSBwYXJzZUludChjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlID8/IDAsIDEwKSArIHBhcnNlSW50KGNoYXJhY3RlcmlzdGljcy5jb24udmFsdWUgPz8gMCwgMTApXG4gICAgY29uc3QgZGl2aXNvciA9IChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZURvdWJsZU1heEhlYWx0aCcpICYmIHR5cGUgPT09ICdjaGFyYWN0ZXInID8gNSA6IDEwKVxuICAgIHJldHVybiBNYXRoLmZsb29yKHN1bSAvIGRpdmlzb3IpXG4gIH1cblxuICBzdGF0aWMgbXBGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC8gNSlcbiAgfVxuXG4gIHN0YXRpYyBtb3ZGcm9tQ2hhcmFjdGVyaXN0aWNzIChjaGFyYWN0ZXJpc3RpY3MsIHR5cGUsIGFnZSkge1xuICAgIGxldCBNT1ZcbiAgICBpZiAoY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSA+IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgJiYgY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUpIHtcbiAgICAgIE1PViA9IDkgLy8gQnVnIGNvcnJlY3Rpb24gYnkgQWRtaXJhbE55YXIuXG4gICAgfSBlbHNlIGlmIChjaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlID49IGNoYXJhY3RlcmlzdGljcy5zaXoudmFsdWUgfHwgY2hhcmFjdGVyaXN0aWNzLnN0ci52YWx1ZSA+PSBjaGFyYWN0ZXJpc3RpY3Muc2l6LnZhbHVlKSB7XG4gICAgICBNT1YgPSA4XG4gICAgfSBlbHNlIHtcbiAgICAgIE1PViA9IDdcbiAgICB9XG4gICAgaWYgKHR5cGUgIT09ICdjcmVhdHVyZScgJiYgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJykpIHtcbiAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQoYWdlKSkpIHtcbiAgICAgICAgTU9WID0gcGFyc2VJbnQoYWdlKSA+PSA0MCA/IE1PViAtIE1hdGguZmxvb3IocGFyc2VJbnQoYWdlKSAvIDEwKSArIDMgOiBNT1ZcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1PVilcbiAgfVxuXG4gIGdldCByYXdCdWlsZCAoKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5hdHRyaWJzKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZCkgcmV0dXJuIG51bGxcbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8gPSB0cnVlXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmF1dG8pIHtcbiAgICAgIHJldHVybiBDb0NBY3Rvci5idWlsZEZyb21DaGFyYWN0ZXJpc3RpY3ModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gIH1cblxuICBnZXQgYnVpbGQgKCkge1xuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlXG4gIH1cblxuICBnZXQgcmF3RGIgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMuZGIpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUgPT09ICdhdXRvJykge1xuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5kYi5hdXRvKSB7XG4gICAgICByZXR1cm4gQ29DQWN0b3IuZGJGcm9tQ2hhcmFjdGVyaXN0aWNzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcylcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWVcbiAgfVxuXG4gIGdldCBkYiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWVcbiAgfVxuXG4gIGdldCByYXdNb3YgKCkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uYXR0cmlicykgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmF0dHJpYnMubW92KSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZSA9PT0gJ2F1dG8nKSB7XG4gICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi5hdXRvID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3YuYXV0bykge1xuICAgICAgY29uc3QgTU9WID0gQ29DQWN0b3IubW92RnJvbUNoYXJhY3RlcmlzdGljcyh0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MsIHRoaXMuc3lzdGVtLnR5cGUsIHRoaXMuc3lzdGVtLmluZm9zLmFnZSlcbiAgICAgIGlmIChNT1YgPiAwKSByZXR1cm4gTU9WXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5hdHRyaWJzLm1vdi52YWx1ZVxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmF0dHJpYnMubW92LnZhbHVlXG4gIH1cblxuICBnZXQgdG9rZW5JZCAoKSB7XG4gICAgLy8gVE9ETyBjbGFyaWZpZXIgY2EgZXQgdG9rZW5rZXlcbiAgICByZXR1cm4gdGhpcy50b2tlbiA/IGAke3RoaXMudG9rZW4uc2NlbmUuX2lkfS4ke3RoaXMudG9rZW4uaWR9YCA6IG51bGwgLy8gUkVGQUNUT1JJTkcgKDIpXG4gIH1cblxuICBnZXQgbG9ja2VkICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlIC8vIExvY2tlZCBieSBkZWZhdWx0XG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICB9XG5cbiAgZ2V0SXRlbXNGcm9tTmFtZSAobmFtZSkge1xuICAgIHJldHVybiB0aGlzLml0ZW1zLmZpbHRlcihpID0+IGkubmFtZSA9PT0gbmFtZSlcbiAgfVxuXG4gIHNldCBsb2NrZWQgKHZhbHVlKSB7XG4gICAgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmxvY2tlZCc6IHZhbHVlIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgY29uc3QgZmxhZ1ZhbHVlID0gIXRoaXMuc3lzdGVtLmZsYWdzW2ZsYWdOYW1lXVxuICAgIGNvbnN0IG5hbWUgPSBgc3lzdGVtLmZsYWdzLiR7ZmxhZ05hbWV9YFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGF0dHJpYnV0ZU5hbWUga2V5IG9mIGF0dHJpYnV0ZSB0byBjaGVjayBpbiBbJ2xjayddXG4gICAqIEBwYXJhbSB7Kn0gZmFzdEZvcndhcmRcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zIGRpZmZpY3VsdHkgaW4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCwgbW9kaWZpZXIgKC0yICsyKSwgbmFtZVxuICAgKi9cbiAgYXN5bmMgYXR0cmlidXRlQ2hlY2sgKGF0dHJpYnV0ZU5hbWUsIGZhc3RGb3J3YXJkID0gZmFsc2UsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGF0dHJpYiA9IHRoaXMuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUudG9Mb3dlckNhc2UoKSlcbiAgICBpZiAoIWF0dHJpYikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kJywge1xuICAgICAgICAgIG1pc3Npbmc6IGF0dHJpYnV0ZU5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmIChvcHRpb25zLm1vZGlmaWVyKSBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIob3B0aW9ucy5tb2RpZmllcilcbiAgICBpZiAob3B0aW9ucy5kaWZmaWN1bHR5KSB7XG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShvcHRpb25zLmRpZmZpY3VsdHkpXG4gICAgfVxuXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5kaWZmaWN1bHR5IHx8IHVuZGVmaW5lZCA9PT0gb3B0aW9ucy5tb2RpZmllcikge1xuICAgICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICAgIGlmICh1c2FnZSkge1xuICAgICAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2JvbnVzRGljZScpKVxuICAgICAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIoXG4gICAgICAgICAgICB1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSB0aGlzLnRva2VuS2V5XG4gICAgaWYgKG9wdGlvbnMuYmxpbmQgPT09ICdmYWxzZScpIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGVsc2UgY2hlY2suaXNCbGluZCA9ICEhb3B0aW9ucy5ibGluZFxuICAgIGF3YWl0IGNoZWNrLnJvbGxBdHRyaWJ1dGUoYXR0cmliLmtleSlcbiAgICBjaGVjay50b01lc3NhZ2UoKVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gY2hhcmFjdGVyaXN0aWNOYW1lIGtleSBvZiBjaGFyYWN0ZXJpc3RpYyB0byBjaGVjayBpbiBbJ3N0cicsJ2NvbicsJ3NpeicsJ2RleCcsJ2FwcCcsJ2ludCcsJ3BvdycsJ2VkdSddXG4gICAqIEBwYXJhbSB7Kn0gZmFzdEZvcndhcmRcbiAgICogQHBhcmFtIHsqfSBvcHRpb25zIGRpZmZpY3VsdHkgaW4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbCwgbW9kaWZpZXIgKC0yICsyKSwgbmFtZVxuICAgKi9cbiAgYXN5bmMgY2hhcmFjdGVyaXN0aWNDaGVjayAoXG4gICAgY2hhcmFjdGVyaXN0aWNOYW1lLFxuICAgIGZhc3RGb3J3YXJkID0gZmFsc2UsXG4gICAgb3B0aW9ucyA9IHt9XG4gICkge1xuICAgIGNvbnN0IGNoYXIgPSB0aGlzLmdldENoYXJhY3RlcmlzdGljKGNoYXJhY3RlcmlzdGljTmFtZSlcblxuICAgIGlmICghY2hhcikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kRm9yQWN0b3InLCB7XG4gICAgICAgICAgbWlzc2luZzogY2hhcmFjdGVyaXN0aWNOYW1lLFxuICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGNvbnN0IGNoZWNrID0gbmV3IENvQzdDaGVjaygpXG5cbiAgICBpZiAob3B0aW9ucy5tb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKG9wdGlvbnMubW9kaWZpZXIpXG4gICAgaWYgKG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgY2hlY2suZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIGlmICh1bmRlZmluZWQgPT09IG9wdGlvbnMuZGlmZmljdWx0eSB8fCB1bmRlZmluZWQgPT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgICAgb3B0aW9ucy5kaXNwbGF5TmFtZSA9IGNoYXIubGFiZWxcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShvcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBjaGVjay5kaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0RGljZU1vZGlmaWVyJykpXG4gICAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKFxuICAgICAgICAgICAgdXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGNoZWNrLmFjdG9yID0gdGhpcy50b2tlbktleVxuICAgIGlmIChvcHRpb25zLmJsaW5kID09PSAnZmFsc2UnKSBjaGVjay5pc0JsaW5kID0gZmFsc2VcbiAgICBlbHNlIGNoZWNrLmlzQmxpbmQgPSAhIW9wdGlvbnMuYmxpbmRcbiAgICBhd2FpdCBjaGVjay5yb2xsQ2hhcmFjdGVyaXN0aWMoY2hhci5rZXkpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcbiAgfVxuXG4gIGFzeW5jIHNraWxsQ2hlY2sgKHNraWxsRGF0YSwgZmFzdEZvcndhcmQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHNraWxsSWRlbnRpZmllciA9IHNraWxsRGF0YS5uYW1lID8gc2tpbGxEYXRhLm5hbWUgOiBza2lsbERhdGFcbiAgICBjb25zb2xlLmxvZyhza2lsbElkZW50aWZpZXIpXG4gICAgY29uc3QgaXNDb0NJRCA9ICEhc2tpbGxJZGVudGlmaWVyLm1hdGNoKC9eaVxcLnNraWxsXFwuLylcbiAgICBsZXQgc2tpbGwgPSBbXVxuICAgIGlmIChpc0NvQ0lEKSB7XG4gICAgICAvLyBBdHRlbXB0IHRvIGxvYWQgZnJvbSBhY3RvciBmcm9tIENvQyBJRFxuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQoc2tpbGxJZGVudGlmaWVyKVxuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgc2tpbGwucHVzaChpdGVtKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIXNraWxsLmxlbmd0aCkge1xuICAgICAgLy8gQXR0ZW1wdCB0byBsb2FkIGZvciBhY3RvciBieSBuYW1lXG4gICAgICBza2lsbCA9IHRoaXMuZ2V0U2tpbGxzQnlOYW1lKHNraWxsSWRlbnRpZmllcilcbiAgICB9XG4gICAgaWYgKCFza2lsbC5sZW5ndGgpIHtcbiAgICAgIGxldCBpdGVtID0gbnVsbFxuICAgICAgaWYgKHNraWxsRGF0YS5wYWNrKSB7XG4gICAgICAgIGNvbnN0IHBhY2sgPSBnYW1lLnBhY2tzLmdldChza2lsbERhdGEucGFjaylcbiAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgICBpdGVtID0gYXdhaXQgcGFjay5nZXREb2N1bWVudChza2lsbERhdGEuaWQpXG4gICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5pZCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQoc2tpbGxEYXRhLmlkKVxuICAgICAgfVxuXG4gICAgICAvLyBObyBza2lsbCBmb3VuZCwgdHJ5IHRvIGdldCBnZXQgaXQgZnJvbSBjb21wZW5kaXVtICFcbiAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAvLyBUT0RPOiBJbXBsZW1lbnQgcmV0cmlldmFsIG9mIHNraWxsIGZyb20gY29tcGVuZGl1bSAhIVxuICAgICAgICAvLyBnYW1lLnNldHRpbmdzLmdldCggJ0NvQzcnLCAnRGVmYXVsdENvbXBlbmRpdW0nKTtcbiAgICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgICAgY2hlY2suX3Jhd1ZhbHVlID0gJz8nXG4gICAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgICBjaGVjay50b01lc3NhZ2UoKVxuICAgICAgfVxuICAgICAgaWYgKCFpdGVtKSB7XG4gICAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ob1NraWxsJykgKyAnICcgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEZvdW5kRm9yQWN0b3InLCB7XG4gICAgICAgICAgICAgIG1pc3Npbmc6IHNraWxsRGF0YS5uYW1lID8gc2tpbGxEYXRhLm5hbWUgOiBza2lsbERhdGEsXG4gICAgICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgbGV0IGNyZWF0ZSA9IGZhbHNlXG4gICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWRkV2VhcG9uJyl9YCxcbiAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BZGRXZWFwb250SGludCcsIHtcbiAgICAgICAgICB3ZWFwb246IHNraWxsRGF0YS5uYW1lLFxuICAgICAgICAgIGFjdG9yOiB0aGlzLm5hbWVcbiAgICAgICAgfSl9PC9wPmAsXG4gICAgICAgIHllczogKCkgPT4ge1xuICAgICAgICAgIGNyZWF0ZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcblxuICAgICAgaWYgKGNyZWF0ZSA9PT0gdHJ1ZSkge1xuICAgICAgICBhd2FpdCB0aGlzLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2R1cGxpY2F0ZShpdGVtKV0pXG4gICAgICB9IGVsc2UgcmV0dXJuXG5cbiAgICAgIHNraWxsID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoaXRlbS5uYW1lKVxuXG4gICAgICBpZiAoIXNraWxsLmxlbmd0aCkgcmV0dXJuXG5cbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBjb25zdCBza2lsbFZhbHVlID0gYXdhaXQgU2tpbGxWYWx1ZURpYWxvZy5jcmVhdGUoXG4gICAgICAgICAgc2tpbGxbMF0ubmFtZSxcbiAgICAgICAgICBza2lsbFswXS5iYXNlXG4gICAgICAgIClcbiAgICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIoc2tpbGxWYWx1ZS5nZXQoJ2Jhc2UtdmFsdWUnKSlcbiAgICAgICAgYXdhaXQgc2tpbGxbMF0udXBkYXRlVmFsdWUodmFsdWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcblxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMubW9kaWZpZXIpIHtcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIH1cbiAgICBpZiAodW5kZWZpbmVkICE9PSBvcHRpb25zLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KG9wdGlvbnMuZGlmZmljdWx0eSlcbiAgICB9XG5cbiAgICBpZiAoIWZhc3RGb3J3YXJkKSB7XG4gICAgICBpZiAodW5kZWZpbmVkID09PSBvcHRpb25zLmRpZmZpY3VsdHkgfHwgdW5kZWZpbmVkID09PSBvcHRpb25zLm1vZGlmaWVyKSB7XG4gICAgICAgIGNvbnN0IHVzYWdlID0gYXdhaXQgUm9sbERpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgICAgY2hlY2suZGlmZmljdWx0eSA9IE51bWJlcih1c2FnZS5nZXQoJ2RpZmZpY3VsdHknKSlcbiAgICAgICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGNoZWNrLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcihcbiAgICAgICAgICAgIHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJylcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjaGVjay5hY3RvciA9IHRoaXMudG9rZW5LZXlcbiAgICBjaGVjay5za2lsbCA9IHNraWxsWzBdLmlkXG4gICAgaWYgKG9wdGlvbnMuYmxpbmQgPT09ICdmYWxzZScpIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgIGVsc2UgY2hlY2suaXNCbGluZCA9ICEhb3B0aW9ucy5ibGluZFxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBhc3luYyB3ZWFwb25DaGVjayAod2VhcG9uRGF0YSwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGxldCB3ZWFwb25cbiAgICBpZiAodHlwZW9mIHdlYXBvbkRhdGEudXVpZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHdlYXBvbiA9IGF3YWl0IGZyb21VdWlkKHdlYXBvbkRhdGEudXVpZClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB3ZWFwb25EYXRhLmlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgd2VhcG9uID0gdGhpcy5pdGVtcy5nZXQod2VhcG9uRGF0YS5pZClcbiAgICB9XG4gICAgaWYgKCF3ZWFwb24pIHtcbiAgICAgIGxldCB3ZWFwb25zID0gdGhpcy5nZXRJdGVtc0Zyb21OYW1lKHdlYXBvbkRhdGEubmFtZSlcbiAgICAgIGlmICh3ZWFwb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICBsZXQgaXRlbSA9IG51bGxcbiAgICAgICAgICBjb25zdCBwYWNrID0gd2VhcG9uRGF0YS5wYWNrID8gZ2FtZS5wYWNrcy5nZXQod2VhcG9uRGF0YS5wYWNrKSA6IG51bGxcbiAgICAgICAgICBpZiAocGFjaykge1xuICAgICAgICAgICAgaWYgKHBhY2subWV0YWRhdGEuZW50aXR5ICE9PSAnSXRlbScpIHJldHVyblxuICAgICAgICAgICAgaXRlbSA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnQod2VhcG9uRGF0YS5pZClcbiAgICAgICAgICB9IGVsc2UgaWYgKHdlYXBvbkRhdGEuaWQpIHtcbiAgICAgICAgICAgIGl0ZW0gPSBnYW1lLml0ZW1zLmdldCh3ZWFwb25EYXRhLmlkKVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5NYWNyb05vSXRlbUZvdW5kJylcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBsZXQgY3JlYXRlID0gZmFsc2VcbiAgICAgICAgICBhd2FpdCBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFkZFdlYXBvbicpfWAsXG4gICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFkZFdlYXBvbnRIaW50Jywge1xuICAgICAgICAgICAgICB3ZWFwb246IHdlYXBvbkRhdGEubmFtZSxcbiAgICAgICAgICAgICAgYWN0b3I6IHRoaXMubmFtZVxuICAgICAgICAgICAgfSl9PC9wPmAsXG4gICAgICAgICAgICB5ZXM6ICgpID0+IHtcbiAgICAgICAgICAgICAgY3JlYXRlID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgY29uc3QgYWN0b3IgPVxuICAgICAgICAgICAgdHlwZW9mIHRoaXMucGFyZW50Py5hY3RvciAhPT0gJ3VuZGVmaW5lZCcgPyB0aGlzLnBhcmVudC5hY3RvciA6IHRoaXNcblxuICAgICAgICAgIGlmIChjcmVhdGUgPT09IHRydWUpIHtcbiAgICAgICAgICAgIGF3YWl0IGFjdG9yLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW0udG9KU09OKCldKVxuICAgICAgICAgIH0gZWxzZSByZXR1cm5cbiAgICAgICAgICB3ZWFwb25zID0gYWN0b3IuZ2V0SXRlbXNGcm9tTmFtZShpdGVtLm5hbWUpXG4gICAgICAgICAgaWYgKCF3ZWFwb25zLmxlbmd0aCkgcmV0dXJuXG4gICAgICAgICAgYXdhaXQgd2VhcG9uc1swXS5yZWxvYWQoKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JBY3Rvckhhc05vV2VhcG9uTmFtZWQnLCB7XG4gICAgICAgICAgICAgIGFjdG9yTmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICB3ZWFwb25OYW1lOiB3ZWFwb25EYXRhLm5hbWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICAgIHJldHVyblxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHdlYXBvbnMubGVuZ3RoID4gMSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckFjdG9ySGFzVG9vTWFueVdlYXBvbnNOYW1lZCcsIHtcbiAgICAgICAgICAgIGFjdG9yTmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgd2VhcG9uTmFtZTogd2VhcG9uRGF0YS5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgd2VhcG9uID0gd2VhcG9uc1swXVxuICAgIH1cblxuICAgIGlmICghd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgIGlmIChnYW1lLnVzZXIudGFyZ2V0cy5zaXplID4gMSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5Ub29NYW55VGFyZ2V0JykpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ29DN01lbGVlSW5pdGlhdG9yKHRoaXMudG9rZW5LZXksICh3ZWFwb25EYXRhLnV1aWQgfHwgd2VhcG9uLmlkKSwgZmFzdEZvcndhcmQpXG4gICAgICBjYXJkLmNyZWF0ZUNoYXRDYXJkKClcbiAgICB9XG4gICAgaWYgKHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdSYW5nZUluaXRpYXRvcih0aGlzLnRva2VuS2V5LCAod2VhcG9uRGF0YS51dWlkIHx8IHdlYXBvbi5pZCksIGZhc3RGb3J3YXJkKVxuICAgICAgY2FyZC5jcmVhdGVDaGF0Q2FyZCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcm9sbEluaXRpYXRpdmUgKGhhc0d1biA9IGZhbHNlKSB7XG4gICAgc3dpdGNoIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdpbml0aWF0aXZlUnVsZScpKSB7XG4gICAgICBjYXNlICdvcHRpb25hbCc6IHtcbiAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Q2hlY2sodGhpcy5hY3RvcktleSlcbiAgICAgICAgcm9sbC5kZW55UHVzaCA9IHRydWVcbiAgICAgICAgcm9sbC5kZW55THVjayA9IHRydWVcbiAgICAgICAgcm9sbC5kZW55QmxpbmRUYW1wZXJpbmcgPSB0cnVlXG4gICAgICAgIHJvbGwuaGlkZURpY2UgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5SW5pdERpY2VzJykgPT09IGZhbHNlXG4gICAgICAgIHJvbGwuZmxhdm9yID0gJ0luaXRpYXRpdmUgcm9sbCdcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQ2hhcmFjdGVyaXN0aWMoJ2RleCcsIGhhc0d1biA/IDEgOiAwKVxuICAgICAgICByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcm9sbC5zdWNjZXNzTGV2ZWwgKyB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlIC8gMTAwXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGhhc0d1blxuICAgICAgICAgID8gdGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZSArIDUwXG4gICAgICAgICAgOiB0aGlzLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlXG4gICAgfVxuICB9XG5cbiAgZ2V0QWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGlmICghdGhpcy5zeXN0ZW0uZmxhZ3MpIHtcbiAgICAgIHRoaXMuc3lzdGVtLmZsYWdzID0ge31cbiAgICAgIHRoaXMuc3lzdGVtLmZsYWdzLmxvY2tlZCA9IHRydWVcbiAgICAgIHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mbGFncyc6IHt9IH0pXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzW2ZsYWdOYW1lXSkgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmZsYWdzW2ZsYWdOYW1lXVxuICB9XG5cbiAgYXN5bmMgc2V0QWN0b3JGbGFnIChmbGFnTmFtZSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXTogdHJ1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdW5zZXRBY3RvckZsYWcgKGZsYWdOYW1lKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBdOiBmYWxzZSB9KVxuICB9XG5cbiAgZ2V0V2VhcG9uU2tpbGxzIChpdGVtSWQpIHtcbiAgICBsZXQgd2VhcG9uID0gZnJvbVV1aWRTeW5jKGl0ZW1JZClcbiAgICBpZiAoIXdlYXBvbikge1xuICAgICAgd2VhcG9uID0gdGhpcy5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHdlYXBvbi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB3ZWFwb24gPSBnYW1lLnBhY2tzLmdldCh3ZWFwb24ucGFjaykuZ2V0KHdlYXBvbi5faWQpXG4gICAgfVxuICAgIGlmICh3ZWFwb24udHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3Qgc2tpbGxzID0gW11cbiAgICBpZiAod2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKSB7XG4gICAgICBza2lsbHMucHVzaCh0aGlzLml0ZW1zLmdldCh3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWQpKVxuICAgIH1cblxuICAgIGlmICh3ZWFwb24udXNlc0FsdGVybmF0aXZlU2tpbGwgJiYgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkKSB7XG4gICAgICBza2lsbHMucHVzaCh0aGlzLml0ZW1zLmdldCh3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQpKVxuICAgIH1cbiAgICByZXR1cm4gc2tpbGxzXG4gIH1cblxuICAvKiogVHJ5IHRvIGZpbmQgYSBjaGFyYWN0ZXJpc3RpYywgYXR0cmlidXRlIG9yIHNraWxsIHRoYXQgbWF0Y2hlcyB0aGUgbmFtZSAqL1xuICBmaW5kIChuYW1lKSB7XG4gICAgaWYgKCFuYW1lKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgLy8gVHJ5IElEXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbXMuZ2V0KG5hbWUpXG4gICAgaWYgKGl0ZW0pIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6ICdpdGVtJyxcbiAgICAgICAgdmFsdWU6IGl0ZW1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCByZWdFeHAgPSAvXFwoKFteKV0rKVxcKS9cbiAgICBjb25zdCBtYXRjaGVzID0gcmVnRXhwLmV4ZWMobmFtZSlcbiAgICBsZXQgc2hvcnROYW1lID0gbnVsbFxuICAgIGlmIChtYXRjaGVzICYmIG1hdGNoZXMubGVuZ3RoKSBzaG9ydE5hbWUgPSBtYXRjaGVzWzFdXG4gICAgLy8gVHJ5IHRvIGZpbmQgYSBza2lsbCB3aXRoIGV4YWN0IG5hbWUuXG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLnNraWxscy5maWx0ZXIocyA9PiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAhIXMubmFtZSAmJlxuICAgICAgICAocy5uYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSA9PT1cbiAgICAgICAgICBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSB8fFxuICAgICAgICAgIHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XG4gICAgICAgICAgICBuYW1lLnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSB8fFxuICAgICAgICAgIHMubmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccy9nLCAnJykgPT09XG4gICAgICAgICAgICBzaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkucmVwbGFjZSgvXFxzL2csICcnKSlcbiAgICAgIClcbiAgICB9KVxuICAgIGlmIChza2lsbC5sZW5ndGgpIHJldHVybiB7IHR5cGU6ICdpdGVtJywgdmFsdWU6IHNraWxsWzBdIH1cblxuICAgIC8vIFRyeSB0byBmaW5kIGEgY2hhcmFjdGVyaXN0aWMuXG4gICAgY29uc3QgY2hhcktleSA9IFsnc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93JywgJ2VkdSddXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyS2V5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaGFyID0gdGhpcy5nZXRDaGFyYWN0ZXJpc3RpYyhjaGFyS2V5W2ldKVxuICAgICAgaWYgKGNoYXIpIHtcbiAgICAgICAgY2hhci5uYW1lID0gY2hhci5sYWJlbFxuICAgICAgICBpZiAoXG4gICAgICAgICAgY2hhci5rZXk/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGNoYXIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2NoYXJhY3RlcmlzdGljJywgdmFsdWU6IGNoYXIgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjaGFyLnNob3J0TmFtZT8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgY2hhci5zaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLCB2YWx1ZTogY2hhciB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGNoYXIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGNoYXIubGFiZWw/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IHNob3J0TmFtZT8udG9Mb3dlckNhc2UoKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4geyB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnLCB2YWx1ZTogY2hhciB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcnkgdG8gZmluZCBhIGF0dHJpYnV0ZS5cbiAgICBjb25zdCBhdHRyaWJLZXkgPSBbJ2xjaycsICdzYW4nXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXR0cmliS2V5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBhdHRyID0gdGhpcy5nZXRBdHRyaWJ1dGUoYXR0cmliS2V5W2ldKVxuICAgICAgaWYgKGF0dHIpIHtcbiAgICAgICAgYXR0ci5uYW1lID0gYXR0ci5sYWJlbFxuICAgICAgICBpZiAoXG4gICAgICAgICAgYXR0ci5rZXk/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGF0dHIua2V5Py50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F0dHJpYnV0ZScsIHZhbHVlOiBhdHRyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgYXR0ci5zaG9ydE5hbWU/LnRvTG9jYWxlTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSB8fFxuICAgICAgICAgIGF0dHIuc2hvcnROYW1lPy50b0xvY2FsZUxvd2VyQ2FzZSgpID09PSBzaG9ydE5hbWU/LnRvTG93ZXJDYXNlKClcbiAgICAgICAgKSB7XG4gICAgICAgICAgcmV0dXJuIHsgdHlwZTogJ2F0dHJpYnV0ZScsIHZhbHVlOiBhdHRyIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgYXR0ci5sYWJlbD8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gbmFtZS50b0xvd2VyQ2FzZSgpIHx8XG4gICAgICAgICAgYXR0ci5sYWJlbD8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT0gc2hvcnROYW1lPy50b0xvd2VyQ2FzZSgpXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybiB7IHR5cGU6ICdhdHRyaWJ1dGUnLCB2YWx1ZTogYXR0ciB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUcnkgd2l0aCBwYXJ0aWFsID8/XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IHBpbG90U2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5za2lsbHMuZmlsdGVyKHMgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgcy5zeXN0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCAmJlxuICAgICAgICBzLnN5c3RlbS5zcGVjaWFsaXphdGlvbj8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICBnYW1lLmkxOG5cbiAgICAgICAgICAgIC5sb2NhbGl6ZSgnQ29DNy5QaWxvdFNwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgICAgICAgICA/LnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgZ2V0IGRyaXZlU2tpbGxzICgpIHtcbiAgICByZXR1cm4gdGhpcy5za2lsbHMuZmlsdGVyKHMgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgcy5zeXN0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCAmJlxuICAgICAgICBzLnN5c3RlbS5zcGVjaWFsaXphdGlvbj8udG9Mb2NhbGVMb3dlckNhc2UoKSA9PT1cbiAgICAgICAgICBnYW1lLmkxOG5cbiAgICAgICAgICAgIC5sb2NhbGl6ZSgnQ29DNy5Ecml2ZVNwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgICAgICAgICA/LnRvTG9jYWxlTG93ZXJDYXNlKClcbiAgICAgIClcbiAgICB9KVxuICB9XG5cbiAgZ2V0IHRva2VuVXVpZCAoKSB7XG4gICAgaWYgKHRoaXMuc2hlZXQudG9rZW4pIHtcbiAgICAgIHJldHVybiB0aGlzLnNoZWV0LnRva2VuLnV1aWRcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCB0b2tlbktleSAoKSB7XG4gICAgLy8gQ2xhcmlmaWVyIGNhIGV0IHRva2VuaWRcbiAgICAvKiogKiBNT0RJRiAwLjgueCAqL1xuICAgIC8vIGlmIHRoaXMuc2hlZXQudG9rZW4gPT4gd2FzIG9wZW5lZCBmcm9tIHRva2VuXG4gICAgLy8gaWYgdGhpcy50b2tlbiA9PiBzeW50aGV0aWMgYWN0b3IgPT0gdGhpcy5pc1Rva2VuXG4gICAgaWYgKHRoaXMuc2hlZXQudG9rZW4pIHtcbiAgICAgIHJldHVybiBgJHt0aGlzLnNoZWV0LnRva2VuLnBhcmVudC5pZH0uJHt0aGlzLnNoZWV0LnRva2VuLmlkfWBcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gcmV0dXJuIG51bGw7XG4gICAgICByZXR1cm4gdGhpcy5pZFxuICAgIH1cbiAgICAvKioqKioqKioqKioqKioqKiovXG4gICAgLy8gLy9DYXNlIDE6IHRoZSBhY3RvciBpcyBhIHN5bnRoZXRpYyBhY3RvciBhbmQgaGFzIGEgdG9rZW4sIHJldHVybiB0b2tlbiBrZXkuXG4gICAgLy8gaWYoIHRoaXMuaXNUb2tlbikgcmV0dXJuIGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uaWR9YDsgIC8vUkVGQUNUT1JJTkcgKDIpXG5cbiAgICAvLyAvL0Nhc2UgMjogdGhlIGFjdG9yIGlzIG5vdCBhIHRva2VuIChsaW5rZWQgYWN0b3IpLiBJZiB0aGUgc2hlZXQgaGF2ZSBhbiBhc3NvY2lhdGVkIHRva2VuIHJldHVybiB0aGUgdG9rZW4ga2V5LlxuICAgIC8vIGlmKCB0aGlzLnNoZWV0LnRva2VuKSByZXR1cm4gYCR7dGhpcy5zaGVldC50b2tlbi5zY2VuZT8uaWQ/dGhpcy5zaGVldC50b2tlbi5zY2VuZS5pZDonVE9LRU4nfS4ke3RoaXMuc2hlZXQudG9rZW4uaWR9YDtcblxuICAgIC8vIC8vQ2FzZSAzOiBBY3RvciBoYXMgbm8gdG9rZW4gcmV0dXJuIGhpcyBJRDtcbiAgICAvLyByZXR1cm4gdGhpcy5pZDtcbiAgfVxuXG4gIGdldCBhY3RvcktleSAoKSB7XG4gICAgaWYgKHRoaXMucHJvdG90eXBlVG9rZW4uYWN0b3JMaW5rKSByZXR1cm4gdGhpcy5pZCAvLyBSRUZBQ1RPUklORyAoMilcbiAgICByZXR1cm4gdGhpcy50b2tlbktleVxuICB9XG5cbiAgc3RhdGljIGdldEFjdG9yRnJvbUtleSAoa2V5KSB7XG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgaWYgKGtleS5pbmNsdWRlcygnLicpKSB7XG4gICAgICAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIGNvbnN0IFtzY2VuZUlkLCB0b2tlbklkXSA9IGtleS5zcGxpdCgnLicpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICByZXR1cm4gZ2FtZS5hY3RvcnMudG9rZW5zW3Rva2VuSWRdIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgICBpZiAoIXRva2VuRGF0YSkgcmV0dXJuIG51bGxcbiAgICAgICAgY29uc3QgdG9rZW4gPSBuZXcgVG9rZW4odG9rZW5EYXRhKVxuICAgICAgICByZXR1cm4gdG9rZW4uYWN0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChrZXkpIHx8IG51bGxcbiAgfVxuXG4gIGdldCBoYXNSb2xsYWJsZUNoYXJhY3RlcmlzdGljcyAoKSB7XG4gICAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKGlzTmFOKE51bWJlcih2YWx1ZS5mb3JtdWxhKSkpIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGhvc1JvbGxhYmxlU2tpbGxzICgpIHtcbiAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHRoaXMuc2tpbGxzKSB7XG4gICAgICBpZiAoaXNOYU4oc2tpbGwuc3lzdGVtPy52YWx1ZSkpIHJldHVybiB0cnVlXG4gICAgfVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgLyoqXG4gICAqIFVzZSB0aGUgZm9ybXVsYSBpZiBhdmFpbGFibGUgdG8gcm9sbCBzb21lIGNoYXJhY3Rlcml0aWNzLlxuICAgKi9cbiAgYXN5bmMgcm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmICh2YWx1ZS5mb3JtdWxhICYmICF2YWx1ZS5mb3JtdWxhLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBjb25zdCByID0gbmV3IFJvbGwodmFsdWUuZm9ybXVsYSlcbiAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgaWYgKHIudG90YWwpIHtcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3NbYHN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPSBNYXRoLmZsb29yKFxuICAgICAgICAgICAgci50b3RhbFxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0aGVyZSBpcyBhIGZvcm11bGEsIHdpbGwgc2V0IHRoZSBjaGFyYWN0ZXJpc3RpYyB0byB0aGUgYXZlcmFnZSB2YWx1ZSAsaWYgZGl2aXNpYmxlIGJ5IDUsIG9yIHRoZSBjbG9zZXN0IDEwLlxuICAgKi9cbiAgYXN5bmMgYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlICgpIHtcbiAgICBjb25zdCBjaGFyYWN0ZXJpc3RpY3MgPSB7fVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRoaXMuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgIGlmICh2YWx1ZS5mb3JtdWxhICYmICF2YWx1ZS5mb3JtdWxhLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBjb25zdCBtYXggPSBuZXcgUm9sbCh2YWx1ZS5mb3JtdWxhKS5ldmFsdWF0ZSh7IG1heGltaXplOiB0cnVlIH0pLnRvdGFsXG4gICAgICAgIGNvbnN0IG1pbiA9IG5ldyBSb2xsKHZhbHVlLmZvcm11bGEpLmV2YWx1YXRlKHsgbWluaW1pemU6IHRydWUgfSkudG90YWxcbiAgICAgICAgY29uc3QgYXZlcmFnZSA9IE1hdGguZmxvb3IoKG1heCArIG1pbikgLyAyKVxuICAgICAgICBjb25zdCBjaGFyVmFsdWUgPVxuICAgICAgICAgIGF2ZXJhZ2UgJSA1ID09PSAwID8gYXZlcmFnZSA6IE1hdGgucm91bmQoYXZlcmFnZSAvIDEwKSAqIDEwXG4gICAgICAgIGlmIChjaGFyVmFsdWUpIHtcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpY3NbYHN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MuJHtrZXl9LnZhbHVlYF0gPSBjaGFyVmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMudXBkYXRlKGNoYXJhY3RlcmlzdGljcylcbiAgICBhd2FpdCB0aGlzLnJlcG9ydENoYXJhY3RlZHJpdGljc1ZhbHVlKClcbiAgfVxuXG4gIC8qKlxuICAgKiBUZXN0IGlmIGEgY2hhcmFjdGVyaXNpdGMgZm9ybXVsYSBpcyBhIHJlZmVyZW5jZSB0byBhbiBvdGhlciBjaGFyYWN0ZXJpc3RpYyBhbmQgc2V0IGl0IGFjY29yZGluZ2x5LlxuICAgKi9cbiAgYXN5bmMgcmVwb3J0Q2hhcmFjdGVkcml0aWNzVmFsdWUgKCkge1xuICAgIGNvbnN0IGNoYXJhY3RlcmlzdGljcyA9IHt9XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzKSkge1xuICAgICAgaWYgKHZhbHVlLmZvcm11bGEgJiYgdmFsdWUuZm9ybXVsYS5zdGFydHNXaXRoKCdAJykpIHtcbiAgICAgICAgbGV0IGNoYXJWYWx1ZVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNoYXJWYWx1ZSA9IG5ldyBSb2xsKFxuICAgICAgICAgICAgdmFsdWUuZm9ybXVsYSxcbiAgICAgICAgICAgIHRoaXMucGFyc2VDaGFyYWN0ZXJpc3RpY3MoKVxuICAgICAgICAgICkuZXZhbHVhdGUoeyBtYXhpbWl6ZTogdHJ1ZSB9KS50b3RhbFxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjaGFyVmFsdWUgPSBudWxsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNoYXJWYWx1ZSkge1xuICAgICAgICAgIGNoYXJhY3RlcmlzdGljc1tgc3lzdGVtLmNoYXJhY3RlcmlzdGljcy4ke2tleX0udmFsdWVgXSA9IGNoYXJWYWx1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWNzKVxuICB9XG5cbiAgYXN5bmMgc2V0Q2hhcmFjdGVyaXN0aWMgKG5hbWUsIHZhbHVlKSB7XG4gICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPSB7fVxuICAgIGNvbnN0IGNoYXJWYWx1ZSA9IGlzTmFOKHBhcnNlSW50KHZhbHVlKSkgPyBudWxsIDogcGFyc2VJbnQodmFsdWUpXG4gICAgY2hhcmFjdGVyaXN0aWNbbmFtZV0gPSBjaGFyVmFsdWVcbiAgICBpZiAoIWNoYXJWYWx1ZSkge1xuICAgICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJ0AnKSkge1xuICAgICAgICBjb25zdCBmb3JtdWxhID0gbmFtZS5yZXBsYWNlKCcudmFsdWUnLCAnLmZvcm11bGEnKVxuICAgICAgICBjaGFyYWN0ZXJpc3RpY1tmb3JtdWxhXSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY2hhcmFjdGVyaXN0aWMpXG4gICAgYXdhaXQgdGhpcy5yZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSgpXG4gIH1cblxuICBhc3luYyBkZXZlbG9wZW1lbnRQaGFzZSAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGZhaWx1cmUgPSBbXVxuICAgIGNvbnN0IHN1Y2Nlc3MgPSBbXVxuICAgIGNvbnN0IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkID0gOTBcbiAgICBjb25zdCBhbHdheXNTdWNjZXNzVGhyZXNob2xkID0gOTVcblxuICAgIGNvbnN0IHRpdGxlID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlJvbGxBbGw0RGV2JylcbiAgICBsZXQgc2tpbGxzUm9sbGVkID0gMFxuICAgIGxldCBtZXNzYWdlID0gJzxwIGNsYXNzPVwiY2hhdC1jYXJkXCI+J1xuICAgIGZvciAoY29uc3QgaXRlbSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGlmIChpdGVtLmRldmVsb3BlbWVudEZsYWcpIHtcbiAgICAgICAgICBza2lsbHNSb2xsZWQrK1xuICAgICAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBEaWUoeyBmYWNlczogMTAwIH0pLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICBjb25zdCBza2lsbFZhbHVlID0gaXRlbS52YWx1ZVxuICAgICAgICAgIGxldCBhdWdtZW50ID0gbnVsbFxuICAgICAgICAgIGxldCBza2lsbE1hc3RlcmluZ01lc3NhZ2UgPSBudWxsXG4gICAgICAgICAgaWYgKGRpZS50b3RhbCA+IHNraWxsVmFsdWUgfHwgZGllLnRvdGFsID49IGFsd2F5c1N1Y2Nlc3NUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgIGNvbnN0IGF1Z21lbnREaWUgPSBhd2FpdCBuZXcgRGllKHsgZmFjZXM6IDEwIH0pLmV2YWx1YXRlKHtcbiAgICAgICAgICAgICAgYXN5bmM6IHRydWVcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBzdWNjZXNzLnB1c2goaXRlbS5pZClcbiAgICAgICAgICAgIC8vIENoZWNrIGZvciBTQU4gYXVnbWVudCB3aGVuIHRoZSBza2lsbCBnb2VzIGJleW9uZCB0aGUgc2tpbGwgbWFzdGVyaW5nIHRocmVzaG9sZC5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgc2tpbGxWYWx1ZSA8IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkICYmXG4gICAgICAgICAgICAgIHNraWxsVmFsdWUgKyBhdWdtZW50RGllLnRvdGFsID49IHNraWxsTWFzdGVyaW5nVGhyZXNob2xkXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgYXVnbWVudFNBTkRpZSA9IGF3YWl0IG5ldyBEaWUoe1xuICAgICAgICAgICAgICAgIGZhY2VzOiA2LFxuICAgICAgICAgICAgICAgIG51bWJlcjogMlxuICAgICAgICAgICAgICB9KS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICAgIGNvbnN0IHNhbkdhaW5lZCA9IGF1Z21lbnRTQU5EaWUudG90YWxcbiAgICAgICAgICAgICAgY29uc3Qgc2FuR2FpbmVkTWVzc2FnZSA9IGBHYWluZWQgMmQ2ICgke2F1Z21lbnRTQU5EaWUudmFsdWVzWzBdfSArICR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMV19ID0gJHtzYW5HYWluZWR9KSBTQU5gXG4gICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoc2FuR2FpbmVkTWVzc2FnZSlcbiAgICAgICAgICAgICAgc2tpbGxNYXN0ZXJpbmdNZXNzYWdlID0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1zdWNjZXNzXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LlNhbkdhaW5lZCcsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgcmVzdWx0czogYCR7YXVnbWVudFNBTkRpZS52YWx1ZXNbMF19ICsgJHthdWdtZW50U0FORGllLnZhbHVlc1sxXX1gLFxuICAgICAgICAgICAgICAgICAgc2FuR2FpbmVkLFxuICAgICAgICAgICAgICAgICAgc2tpbGw6IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICAgIHNraWxsVmFsdWU6IHNraWxsVmFsdWUgKyBhdWdtZW50RGllLnRvdGFsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICApfTwvc3Bhbj48YnI+YFxuICAgICAgICAgICAgICAvLyBTZXQgc2FuIGNvbnRyb2xzIHRoYXQgaXQgZG9lc24ndCBhdWdtZW50IGJleW9uZCBzYW5NYXhcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRTYW4odGhpcy5zYW4gKyBzYW5HYWluZWQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhdWdtZW50ICs9IGF1Z21lbnREaWUudG90YWxcbiAgICAgICAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1zdWNjZXNzXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZTdWNjZXNzJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogaXRlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICBhdWdtZW50OiBhdWdtZW50RGllLnRvdGFsXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICl9PC9zcGFuPjxicj5gXG4gICAgICAgICAgICBpZiAoc2tpbGxNYXN0ZXJpbmdNZXNzYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIG1lc3NhZ2UgKz0gc2tpbGxNYXN0ZXJpbmdNZXNzYWdlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBpdGVtLmluY3JlYXNlRXhwZXJpZW5jZShhdWdtZW50KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBtZXNzYWdlICs9IGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZGYWlsdXJlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogaXRlbS52YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YFxuICAgICAgICAgICAgZmFpbHVyZS5wdXNoKGl0ZW0uaWQpXG4gICAgICAgICAgfVxuICAgICAgICAgIGF3YWl0IGl0ZW0udW5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBzYW5pdHlMb3NzRXZlbnRzID0gW11cbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgZm9yIChjb25zdCBzYW5pdHlMb3NzRXZlbnQgb2YgdGhpcy5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cykge1xuICAgICAgaWYgKHNhbml0eUxvc3NFdmVudC5pbW11bml0eSkge1xuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goc2FuaXR5TG9zc0V2ZW50KVxuICAgICAgfSBlbHNlIGlmIChzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzID4gMSkge1xuICAgICAgICBzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzLS1cbiAgICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHNhbml0eUxvc3NFdmVudClcbiAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICBpZiAoc2tpbGxzUm9sbGVkKSB7XG4gICAgICAgIG1lc3NhZ2UgKz0gJzxicj4nXG4gICAgICB9XG4gICAgICBtZXNzYWdlICs9IGA8c3Bhbj4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVkdWNlU2FuaXR5TGltaXRzJyl9PC9zcGFuPmBcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5zYW5pdHlMb3NzRXZlbnRzJzogc2FuaXR5TG9zc0V2ZW50c1xuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkge1xuICAgICAgbWVzc2FnZSArPSAnPC9wPidcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzIH1cbiAgICAgIGF3YWl0IGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShza2lsbHNSb2xsZWQgPyB0aXRsZSA6ICcnLCBtZXNzYWdlLCB7XG4gICAgICAgIHNwZWFrZXJcbiAgICAgIH0pXG4gICAgICB0aGlzLm9ubHlSdW5PbmNlUGVyU2Vzc2lvbiA9IHRydWVcbiAgICB9XG4gICAgcmV0dXJuIHsgZmFpbHVyZSwgc3VjY2VzcyB9XG4gIH1cblxuICBhc3luYyBkZXZlbG9wTHVjayAoZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IGN1cnJlbnRMdWNrID0gdGhpcy5zeXN0ZW0uYXR0cmlicy5sY2sudmFsdWVcbiAgICBpZiAoIWN1cnJlbnRMdWNrKSBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOiAwIH0pXG4gICAgY29uc3QgcHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrID0gZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAnQ29DNycsXG4gICAgICAncHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrJ1xuICAgIClcbiAgICBjb25zdCB1cGdyYWRlUm9sbCA9IChhd2FpdCBuZXcgUm9sbCgnMUQxMDAnKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgY29uc3QgaGlnaGVyVGhhbkN1cnJlbnRMdWNrID0gdXBncmFkZVJvbGwgPiBjdXJyZW50THVja1xuICAgIGxldCBhdWdtZW50Um9sbFxuICAgIGlmIChwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2spIHtcbiAgICAgIGhpZ2hlclRoYW5DdXJyZW50THVja1xuICAgICAgICA/IChhdWdtZW50Um9sbCA9ICcyRDEwKzEwJylcbiAgICAgICAgOiAoYXVnbWVudFJvbGwgPSAnMUQxMCs1JylcbiAgICB9IGVsc2UgaWYgKGhpZ2hlclRoYW5DdXJyZW50THVjaykge1xuICAgICAgYXVnbWVudFJvbGwgPSAnMUQxMCdcbiAgICB9XG4gICAgY29uc3QgdGl0bGUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUm9sbEx1Y2s0RGV2JylcbiAgICBsZXQgbWVzc2FnZSA9ICc8cCBjbGFzcz1cImNoYXQtY2FyZFwiPidcbiAgICBpZiAocHVscFJ1bGVEZXZlbG9wbWVudFJvbGxMdWNrIHx8IGhpZ2hlclRoYW5DdXJyZW50THVjaykge1xuICAgICAgY29uc3QgYXVnbWVudFZhbHVlID0gKGF3YWl0IG5ldyBSb2xsKGF1Z21lbnRSb2xsKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpXG4gICAgICAgIC50b3RhbFxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlJzpcbiAgICAgICAgICB0aGlzLnN5c3RlbS5hdHRyaWJzLmxjay52YWx1ZSArIGF1Z21lbnRWYWx1ZVxuICAgICAgfSlcbiAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1zdWNjZXNzXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAnQ29DNy5MdWNrSW5jcmVhc2VkJyxcbiAgICAgICAge1xuICAgICAgICAgIGRpZTogdXBncmFkZVJvbGwsXG4gICAgICAgICAgc2NvcmU6IGN1cnJlbnRMdWNrLFxuICAgICAgICAgIGF1Z21lbnQ6IGF1Z21lbnRWYWx1ZVxuICAgICAgICB9XG4gICAgICApfTwvc3Bhbj5gXG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2UgKz0gYDxzcGFuIGNsYXNzPVwidXBncmFkZS1mYWlsZWRcIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICdDb0M3Lkx1Y2tOb3RJbmNyZWFzZWQnLFxuICAgICAgICB7IGRpZTogdXBncmFkZVJvbGwsIHNjb3JlOiBjdXJyZW50THVjayB9XG4gICAgICApfTwvc3Bhbj5gXG4gICAgfVxuICAgIGlmICghZmFzdEZvcndhcmQpIHtcbiAgICAgIG1lc3NhZ2UgKz0gJzwvcD4nXG4gICAgICBjb25zdCBzcGVha2VyID0geyBhY3RvcjogdGhpcyB9XG4gICAgICBhd2FpdCBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UodGl0bGUsIG1lc3NhZ2UsIHsgc3BlYWtlciB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGRldmVsb3BTa2lsbCAoc2tpbGxJZCwgZmFzdEZvcndhcmQgPSBmYWxzZSkge1xuICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtcy5nZXQoc2tpbGxJZClcbiAgICBpZiAoIXNraWxsKSByZXR1cm5cbiAgICBsZXQgdGl0bGUgPSAnJ1xuICAgIGxldCBtZXNzYWdlID0gJydcbiAgICBjb25zdCB1cGdyYWRlUm9sbCA9IG5ldyBSb2xsKCcxRDEwMCcpXG4gICAgYXdhaXQgdXBncmFkZVJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgaWYgKCFmYXN0Rm9yd2FyZCkgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodXBncmFkZVJvbGwpXG4gICAgaWYgKHVwZ3JhZGVSb2xsLnRvdGFsID4gc2tpbGwudmFsdWUgfHwgdXBncmFkZVJvbGwudG90YWwgPj0gOTUpIHtcbiAgICAgIGNvbnN0IGF1Z21lbnRSb2xsID0gbmV3IFJvbGwoJzFEMTAnKVxuICAgICAgYXdhaXQgYXVnbWVudFJvbGwucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICBpZiAoIWZhc3RGb3J3YXJkKSBhd2FpdCBDb0M3RGljZS5zaG93Um9sbERpY2UzZChhdWdtZW50Um9sbClcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlN1Y2Nlc3NEZXRhaWxzJywge1xuICAgICAgICBpdGVtOiBza2lsbC5uYW1lLFxuICAgICAgICBhdWdtZW50OiBhdWdtZW50Um9sbC50b3RhbFxuICAgICAgfSlcbiAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EZXZSb2xsVGl0bGUnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWUsXG4gICAgICAgIGRpZTogdXBncmFkZVJvbGwudG90YWwsXG4gICAgICAgIHNjb3JlOiBza2lsbC52YWx1ZVxuICAgICAgfSlcbiAgICAgIGF3YWl0IHNraWxsLmluY3JlYXNlRXhwZXJpZW5jZShhdWdtZW50Um9sbC50b3RhbClcbiAgICB9IGVsc2Uge1xuICAgICAgdGl0bGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkRldlJvbGxUaXRsZScsIHtcbiAgICAgICAgaXRlbTogc2tpbGwubmFtZSxcbiAgICAgICAgZGllOiB1cGdyYWRlUm9sbC50b3RhbCxcbiAgICAgICAgc2NvcmU6IHNraWxsLnZhbHVlXG4gICAgICB9KVxuICAgICAgbWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGV2RmFpbHVyZURldGFpbHMnLCB7XG4gICAgICAgIGl0ZW06IHNraWxsLm5hbWVcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IHNwZWFrZXIgPSB7IGFjdG9yOiB0aGlzLl9pZCB9XG4gICAgYXdhaXQgY2hhdEhlbHBlci5jcmVhdGVNZXNzYWdlKHRpdGxlLCBtZXNzYWdlLCB7IHNwZWFrZXIgfSlcbiAgICBhd2FpdCBza2lsbC51bmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICB9XG5cbiAgaGFzQ29uZGl0aW9uU3RhdHVzIChjb25kaXRpb25OYW1lKSB7XG4gICAgY29uc3QgY29uZGl0aW9uVmFsdWUgPSB0aGlzLnN5c3RlbS5jb25kaXRpb25zPy5bY29uZGl0aW9uTmFtZV0/LnZhbHVlXG4gICAgaWYgKHR5cGVvZiBjb25kaXRpb25WYWx1ZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICByZXR1cm4gZmFsc2UgLy8gTmVjZXNzYXJ5LCBpbmNvcnJlY3QgdGVtcGxhdGUgaW5pdGlhbGl6YXRpb25cbiAgICB9XG4gICAgcmV0dXJuIGNvbmRpdGlvblZhbHVlXG4gIH1cblxuICBoYXNDb25kaXRpb25WYWx1ZSAoY29uZGl0aW9uTmFtZSwgZmllbGQpIHtcbiAgICBpZiAoIXRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKGNvbmRpdGlvbk5hbWUpKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIGlmIChjb25kaXRpb25OYW1lID09PSBDT0M3LnN0YXR1cy50ZW1wb0luc2FuZSAmJiBmaWVsZCA9PT0gJ2R1cmF0aW9uVGV4dCcpIHtcbiAgICAgIGNvbnN0IHJlYWxUaW1lID0gdGhpcy5oYXNDb25kaXRpb25WYWx1ZShjb25kaXRpb25OYW1lLCAncmVhbFRpbWUnKVxuICAgICAgY29uc3QgZHVyYXRpb24gPSB0aGlzLmhhc0NvbmRpdGlvblZhbHVlKGNvbmRpdGlvbk5hbWUsICdkdXJhdGlvbicpXG4gICAgICBpZiAodHlwZW9mIGR1cmF0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUpIHtcbiAgICAgICAgICByZXR1cm4gZHVyYXRpb24gKyAnICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcucm91bmRzJylcbiAgICAgICAgfSBlbHNlIGlmIChyZWFsVGltZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm4gZHVyYXRpb24gKyAnICcgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuaG91cnMnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLmNvbmRpdGlvbnM/Lltjb25kaXRpb25OYW1lXT8uW2ZpZWxkXVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlQ29uZGl0aW9uIChjb25kaXRpb25OYW1lKSB7XG4gICAgY29uc3QgY29uZGl0aW9uVmFsdWUgPSB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhjb25kaXRpb25OYW1lKVxuICAgIGlmICghY29uZGl0aW9uVmFsdWUpIHtcbiAgICAgIGF3YWl0IHRoaXMuc2V0Q29uZGl0aW9uKGNvbmRpdGlvbk5hbWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oY29uZGl0aW9uTmFtZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRDb25kaXRpb24gKFxuICAgIGNvbmRpdGlvbk5hbWUsXG4gICAge1xuICAgICAgZm9yY2VWYWx1ZSA9IGZhbHNlLFxuICAgICAganVzdFRoaXMgPSBmYWxzZSxcbiAgICAgIHJlYWxUaW1lID0gbnVsbCxcbiAgICAgIGR1cmF0aW9uID0gbnVsbFxuICAgIH0gPSB7fVxuICApIHtcbiAgICBpZiAoIWZvcmNlVmFsdWUgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgY29uc3QgZWZmZWN0cyA9IHRoaXMuZWZmZWN0c1xuICAgICAgICAuZmlsdGVyKGVmZmVjdCA9PiBlZmZlY3QuZmxhZ3MuY29yZT8uc3RhdHVzSWQgPT09IGNvbmRpdGlvbk5hbWUpXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcbiAgICAgIGNvbnN0IGN1c3RvbSA9IHt9XG4gICAgICBzd2l0Y2ggKGNvbmRpdGlvbk5hbWUpIHtcbiAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgIGN1c3RvbS5mbGFncyA9IHtcbiAgICAgICAgICAgIGNvcmU6IHtcbiAgICAgICAgICAgICAgb3ZlcmxheTogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICAgIGN1c3RvbS5mbGFncyA9IHtcbiAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgcmVhbFRpbWU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBjdXN0b20uZHVyYXRpb24gPSB7XG4gICAgICAgICAgICByb3VuZHM6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHNlY29uZHM6IHVuZGVmaW5lZFxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocmVhbFRpbWUgPT09IHRydWUgfHwgcmVhbFRpbWUgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICBjdXN0b20uZmxhZ3MuQ29DNy5yZWFsVGltZSA9IHJlYWxUaW1lXG4gICAgICAgICAgICBjdXN0b20uZmxhZ3MgPSB7XG4gICAgICAgICAgICAgIENvQzc6IHtcbiAgICAgICAgICAgICAgICByZWFsVGltZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoZHVyYXRpb24gIT09IG51bGwgJiYgdHlwZW9mIGR1cmF0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpZiAocmVhbFRpbWUpIHtcbiAgICAgICAgICAgICAgICBjdXN0b20uZHVyYXRpb24ucm91bmRzID0gZHVyYXRpb25cbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdXN0b20uZHVyYXRpb24uc2Vjb25kcyA9IGR1cmF0aW9uICogMzYwMFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc3QgZWZmZWN0ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmlsdGVyKFxuICAgICAgICAgIGVmZmVjdCA9PiBlZmZlY3QuaWQgPT09IGNvbmRpdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBpZiAoZWZmZWN0Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGNvbnN0IGVmZmVjdERhdGEgPSBtZXJnZU9iamVjdChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShlZmZlY3RbMF0ubGFiZWwpLFxuICAgICAgICAgICAgICBpY29uOiBlZmZlY3RbMF0uaWNvbixcbiAgICAgICAgICAgICAgZmxhZ3M6IHtcbiAgICAgICAgICAgICAgICBjb3JlOiB7XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZDogZWZmZWN0WzBdLmlkXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkaXNhYmxlZDogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjdXN0b21cbiAgICAgICAgICApXG4gICAgICAgICAgYXdhaXQgc3VwZXIuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtlZmZlY3REYXRhXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBUaGlzIGRvZXNuJ3QgZXhpc3QgaW4gRm91bmRyeVZUVCBBY3RpdmVFZmZlY3RzP1xuICAgICAgICAgIGZvcmNlVmFsdWUgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1c3RvbS5faWQgPSBlZmZlY3RzWzBdXG4gICAgICAgIGF3YWl0IHN1cGVyLnVwZGF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdBY3RpdmVFZmZlY3QnLCBbY3VzdG9tXSlcbiAgICAgICAgZm9yY2VWYWx1ZSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZvcmNlVmFsdWUgfHwgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2VuYWJsZVN0YXR1c0ljb25zJykpIHtcbiAgICAgIHN3aXRjaCAoY29uZGl0aW9uTmFtZSkge1xuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmluZGVmSW5zYW5lOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnVuY29uc2Npb3VzOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmR5aW5nOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLnByb25lOlxuICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICAgW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnZhbHVlYF06IHRydWVcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgZmllbGRzID0ge31cbiAgICAgICAgICAgIGZpZWxkc1tgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb25OYW1lfS52YWx1ZWBdID0gdHJ1ZVxuICAgICAgICAgICAgaWYgKHJlYWxUaW1lID09PSB0cnVlIHx8IHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0ucmVhbFRpbWVgXSA9IHJlYWxUaW1lXG4gICAgICAgICAgICAgIGlmIChkdXJhdGlvbiAhPT0gbnVsbCAmJiB0eXBlb2YgZHVyYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LmR1cmF0aW9uYF0gPSBkdXJhdGlvblxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICAgICAgZmllbGRzLFxuICAgICAgICAgICAgICAgIGBzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9LnJlYWxUaW1lYFxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgZmllbGRzW2BzeXN0ZW0uY29uZGl0aW9ucy4ke2NvbmRpdGlvbk5hbWV9Li09cmVhbFRpbWVgXSA9IG51bGxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChcbiAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uZHVyYXRpb25gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBmaWVsZHNbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT1kdXJhdGlvbmBdID0gbnVsbFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoZmllbGRzKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgICAgaWYgKCFqdXN0VGhpcykge1xuICAgICAgICAvLyBEb2VzIHNldHRpbmcgdGhlIGNvbmRpdGlvbiBhbHNvIHRyaWdnZXIgb3RoZXIgYWN0aW9ucz9cbiAgICAgICAgLy8gLSBJZiBBY3RpdmVFZmZlY3RzIGFyZSBhZGRlZCBoYXNDb25kaXRpb25TdGF0dXMgZm9yIHJlY2VudGx5IGFkZGVkIGNvbmRpdGlvbnMgbWF5IHJldHVybiBpbmNvcnJlY3RseVxuICAgICAgICBzd2l0Y2ggKGNvbmRpdGlvbk5hbWUpIHtcbiAgICAgICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMucHJvbmUpXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICF0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy51bmNvbnNjaW91cykgJiZcbiAgICAgICAgICAgICAgIXRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLmRlYWQpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgICAgICAgICAgIHRoaXMuaXNUb2tlbiA/IHRoaXMudG9rZW5LZXkgOiB0aGlzLmlkXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgY29uQ2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSBDT0M3LnN0YXR1cy5kZWFkOlxuICAgICAgICAgICAgYXdhaXQgdGhpcy51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHVuc2V0Q29uZGl0aW9uIChjb25kaXRpb25OYW1lLCB7IGZvcmNlVmFsdWUgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWZvcmNlVmFsdWUgJiYgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgY29uc3QgZWZmZWN0cyA9IHRoaXMuZWZmZWN0c1xuICAgICAgICAuZmlsdGVyKGVmZmVjdCA9PiBlZmZlY3QuZmxhZ3MuY29yZT8uc3RhdHVzSWQgPT09IGNvbmRpdGlvbk5hbWUpXG4gICAgICAgIC5tYXAoZWZmZWN0ID0+IGVmZmVjdC5pZClcbiAgICAgIGlmIChlZmZlY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgYXdhaXQgc3VwZXIuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIGVmZmVjdHMpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3JjZVZhbHVlID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZm9yY2VWYWx1ZSB8fCAhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZW5hYmxlU3RhdHVzSWNvbnMnKSkge1xuICAgICAgc3dpdGNoIChjb25kaXRpb25OYW1lKSB7XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudGVtcG9JbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuaW5kZWZJbnNhbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHM6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZHlpbmc6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICAgIGNhc2UgQ09DNy5zdGF0dXMuZGVhZDpcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0uLT12YWx1ZWBdOiBudWxsXG4gICAgICAgICAgfSlcbiAgICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICAgICBbYHN5c3RlbS5jb25kaXRpb25zLiR7Y29uZGl0aW9uTmFtZX0udmFsdWVgXTogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gVE9ETyA6IGNoZWNrIGlmIGV2ZXIgdXNlZFxuICBhc3luYyByZXNldENvdW50ZXIgKGNvdW50ZXIpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7IFtjb3VudGVyXTogMCB9KVxuICB9XG5cbiAgYXN5bmMgcmVzZXREYWlseVNhbml0eSAoKSB7XG4gICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxpbWl0JzogTWF0aC5mbG9vcihcbiAgICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgLyA1XG4gICAgICApLFxuICAgICAgJ3N5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MnOiAwXG4gICAgfSlcbiAgfVxuXG4gIGdldCBmaWdodGluZ1NraWxscyAoKSB7XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gW11cbiAgICBmb3IgKGNvbnN0IHZhbHVlIG9mIHRoaXMuaXRlbXMpIHtcbiAgICAgIGlmICh2YWx1ZS50eXBlID09PSAnc2tpbGwnICYmIHZhbHVlLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCBjbG9zZUNvbWJhdFdlYXBvbnMgKCkge1xuICAgIGNvbnN0IHdlYXBvbkxpc3QgPSBbXVxuICAgIGZvciAoY29uc3QgdmFsdWUgb2YgdGhpcy5pdGVtcykge1xuICAgICAgaWYgKHZhbHVlLnR5cGUgPT09ICd3ZWFwb24nICYmICF2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5ybmdkKSB7XG4gICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5pdGVtcy5nZXQodmFsdWUuc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICAgIHZhbHVlLnN5c3RlbS5za2lsbC5tYWluLnZhbHVlID0gc2tpbGwgPyBza2lsbC52YWx1ZSA6IDBcbiAgICAgICAgd2VhcG9uTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHdlYXBvbkxpc3Quc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICByZXR1cm4gd2VhcG9uTGlzdFxuICB9XG5cbiAgZ2V0IGZpcmVhcm1Ta2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJyAmJiB2YWx1ZS5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgIHNraWxsTGlzdC5wdXNoKHZhbHVlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHJldHVybiBza2lsbExpc3RcbiAgfVxuXG4gIGdldCB1c2VyICgpIHtcbiAgICAvLyBpcyB0aGF0IGFjdG9yIGltcGVyc29uYW50ZWQgYnkgYSB1c2VyID9cbiAgICByZXR1cm4gZ2FtZS51c2Vycy5maW5kKHVzZXIgPT4ge1xuICAgICAgaWYgKHVzZXIuY2hhcmFjdGVyKSB7XG4gICAgICAgIGlmICh1c2VyLmNoYXJhY3Rlci5pZCA9PT0gdGhpcy5pZCkgcmV0dXJuIHRydWVcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBnZXQgZG9kZ2VTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldEZpcnN0U2tpbGxCeUNvQ0lEKCdpLnNraWxsLmRvZGdlJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRvZGdlJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZ1NraWxsICgpIHtcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQoJ2kuc2tpbGwuY3JlZGl0LXJhdGluZycpXG4gICAgaWYgKHNraWxsKSB7XG4gICAgICByZXR1cm4gc2tpbGxcbiAgICB9XG4gICAgY29uc3Qgc2tpbGxMaXN0ID0gdGhpcy5nZXRTa2lsbHNCeU5hbWUoXG4gICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jcmVkaXQtcmF0aW5nJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGN0aHVsaHVNeXRob3NTa2lsbCAoKSB7XG4gICAgY29uc3Qgc2tpbGwgPSB0aGlzLmdldEZpcnN0U2tpbGxCeUNvQ0lEKCdpLnNraWxsLmN0aHVsaHUtbXl0aG9zJylcbiAgICBpZiAoc2tpbGwpIHtcbiAgICAgIHJldHVybiBza2lsbFxuICAgIH1cbiAgICBjb25zdCBza2lsbExpc3QgPSB0aGlzLmdldFNraWxsc0J5TmFtZShcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmN0aHVsaHUtbXl0aG9zJylcbiAgICApXG4gICAgaWYgKHNraWxsTGlzdC5sZW5ndGggIT09IDApIHJldHVybiBza2lsbExpc3RbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGN0aHVsaHVNeXRob3MgKCkge1xuICAgIGNvbnN0IENNID0gdGhpcy5jdGh1bGh1TXl0aG9zU2tpbGxcbiAgICBpZiAoQ00pIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gQ00udmFsdWVcbiAgICAgIGlmICh2YWx1ZSkgcmV0dXJuIHZhbHVlXG4gICAgICByZXR1cm4gcGFyc2VJbnQoQ00uc3lzdGVtLnZhbHVlKVxuICAgIH1cbiAgICByZXR1cm4gMFxuICB9XG5cbiAgZ2V0IG15dGhvc0hhcmRlbmVkICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRGbGFnKCdDb0M3JywgJ215dGhvc0hhcmRlbmVkJykgfHwgZmFsc2VcbiAgfVxuXG4gIGFzeW5jIHNldE15dGhvc0hhcmRlbmVkICgpIHtcbiAgICBhd2FpdCB0aGlzLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnLCB0cnVlKVxuICB9XG5cbiAgZ2V0IG15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCcpIHx8IGZhbHNlXG4gIH1cblxuICBhc3luYyBleHBlcmllbmNlRmlyc3RNeXRob3NJbnNhbml0eSAoKSB7XG4gICAgYXdhaXQgdGhpcy5zZXRGbGFnKCdDb0M3JywgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnLCB0cnVlKVxuICB9XG5cbiAgZ2V0IGNyZWRpdFJhdGluZyAoKSB7XG4gICAgY29uc3QgQ1IgPSB0aGlzLmNyZWRpdFJhdGluZ1NraWxsXG4gICAgaWYgKENSKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IENSLnZhbHVlXG4gICAgICBpZiAodmFsdWUpIHJldHVybiB2YWx1ZVxuICAgICAgcmV0dXJuIHBhcnNlSW50KENSLnN5c3RlbS52YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIHN0YXRpYyBtb25ldGFyeUZvcm1hdCAoZm9ybWF0LCBzeW1ib2wsIHZhbHVlKSB7XG4gICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgIGNhc2UgQ09DNy5tb25ldGFyeUZvcm1hdEtleXMubHNkOlxuICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih2YWx1ZSAvIDI0MCkgKyAnLycgKyAoTWF0aC5mbG9vcih2YWx1ZSAvIDEyKSAlIDIwKSArICcvJyArICh2YWx1ZSAlIDEyKVxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5yb21hbjpcbiAgICAgICAgcmV0dXJuIChNYXRoLmZsb29yKHZhbHVlIC8gNDAwKSkgKyAnLycgKyAoTWF0aC5mbG9vcih2YWx1ZSAvIDE2KSAlIDI1KSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gOCkgJSAyKSArICcvJyArIChNYXRoLmZsb29yKHZhbHVlIC8gNCkgJSAyKSArICcvJyArICh2YWx1ZSAlIDQpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmRlY2ltYWxMZWZ0OlxuICAgICAgICByZXR1cm4gc3ltYm9sICsgTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsIHsgbWluaW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pLnJlcGxhY2UoL1xcLjAwJC8sICcnKVxuICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5kZWNpbWFsUmlnaHQ6XG4gICAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpLnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCwgeyBtaW5pbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSkucmVwbGFjZSgvXFwuMDAkLywgJycpICsgJyAnICsgc3ltYm9sXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmludGVnZXJMZWZ0OlxuICAgICAgICByZXR1cm4gc3ltYm9sICsgTnVtYmVyKHZhbHVlKS50b0xvY2FsZVN0cmluZygpXG4gICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmludGVnZXJSaWdodDpcbiAgICAgICAgcmV0dXJuIE51bWJlcih2YWx1ZSkudG9Mb2NhbGVTdHJpbmcoKSArICcgJyArIHN5bWJvbFxuICAgIH1cbiAgICByZXR1cm4gJzAnXG4gIH1cblxuICBzdGF0aWMgbW9uZXRhcnlWYWx1ZSAoZm9ybWF0LCB2YWx1ZXMsIENSLCB0eXBlLCB2YWx1ZSkge1xuICAgIENSID0gQ1IgfHwgMFxuICAgIGNvbnN0IHJvdyA9IHZhbHVlcy5maW5kKHIgPT4gKHR5cGVvZiByLm1pbiA9PT0gJ29iamVjdCcgfHwgci5taW4gPD0gQ1IpICYmICh0eXBlb2Ygci5tYXggPT09ICdvYmplY3QnIHx8IHIubWF4ID49IENSKSlcbiAgICBpZiAodHlwZW9mIHJvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHJvd1t0eXBlXSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHJvd1t2YWx1ZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzd2l0Y2ggKGZvcm1hdCkge1xuICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlGb3JtYXRLZXlzLmxzZDpcbiAgICAgICAgICBzd2l0Y2ggKHJvd1t0eXBlXSkge1xuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMubXVsdGlwbGllcjpcbiAgICAgICAgICAgICAgcmV0dXJuIDI0MCAqIENSICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMudmFsdWU6XG4gICAgICAgICAgICAgIHJldHVybiAyNDAgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5zOlxuICAgICAgICAgICAgICByZXR1cm4gMTIgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5kOlxuICAgICAgICAgICAgICByZXR1cm4gMSAqIHJvd1t2YWx1ZV1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5Rm9ybWF0S2V5cy5yb21hbjpcbiAgICAgICAgICBzd2l0Y2ggKHJvd1t0eXBlXSkge1xuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMubXVsdGlwbGllcjpcbiAgICAgICAgICAgICAgcmV0dXJuIDQwMCAqIENSICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMudmFsdWU6XG4gICAgICAgICAgICAgIHJldHVybiA0MDAgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5kZW5hcmlpOlxuICAgICAgICAgICAgICByZXR1cm4gMTYgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5xdWluYXJpaTpcbiAgICAgICAgICAgICAgcmV0dXJuIDggKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5zZXN0ZXJ0aWk6XG4gICAgICAgICAgICAgIHJldHVybiA0ICogcm93W3ZhbHVlXVxuICAgICAgICAgICAgY2FzZSBDT0M3Lm1vbmV0YXJ5VHlwZUtleXMuYXNzZXM6XG4gICAgICAgICAgICAgIHJldHVybiAxICogcm93W3ZhbHVlXVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHN3aXRjaCAocm93W3R5cGVdKSB7XG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy5tdWx0aXBsaWVyOlxuICAgICAgICAgICAgICByZXR1cm4gQ1IgKiByb3dbdmFsdWVdXG4gICAgICAgICAgICBjYXNlIENPQzcubW9uZXRhcnlUeXBlS2V5cy52YWx1ZTpcbiAgICAgICAgICAgICAgcmV0dXJuIDEgKiByb3dbdmFsdWVdXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAwXG4gIH1cblxuICBnZXQgc3BlbmRpbmdMZXZlbCAoKSB7XG4gICAgcmV0dXJuIENvQ0FjdG9yLm1vbmV0YXJ5VmFsdWUodGhpcy5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCB0aGlzLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMsIHRoaXMuY3JlZGl0UmF0aW5nLCAnc3BlbmRpbmdUeXBlJywgJ3NwZW5kaW5nVmFsdWUnKVxuICB9XG5cbiAgZ2V0IGNhc2ggKCkge1xuICAgIHJldHVybiBDb0NBY3Rvci5tb25ldGFyeVZhbHVlKHRoaXMuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgdGhpcy5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzLCB0aGlzLmNyZWRpdFJhdGluZywgJ2Nhc2hUeXBlJywgJ2Nhc2hWYWx1ZScpXG4gIH1cblxuICBnZXQgYXNzZXRzICgpIHtcbiAgICByZXR1cm4gQ29DQWN0b3IubW9uZXRhcnlWYWx1ZSh0aGlzLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHRoaXMuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcywgdGhpcy5jcmVkaXRSYXRpbmcsICdhc3NldHNUeXBlJywgJ2Fzc2V0c1ZhbHVlJylcbiAgfVxuXG4gIGdldCBza2lsbHMgKCkge1xuICAgIGNvbnN0IHNraWxsTGlzdCA9IFtdXG4gICAgZm9yIChjb25zdCB2YWx1ZSBvZiB0aGlzLml0ZW1zKSB7XG4gICAgICBpZiAodmFsdWUudHlwZSA9PT0gJ3NraWxsJykgc2tpbGxMaXN0LnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgc2tpbGxMaXN0LnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgcmV0dXJuIHNraWxsTGlzdFxuICB9XG5cbiAgZ2V0IG93bmVycyAoKSB7XG4gICAgcmV0dXJuIGdhbWUudXNlcnMuZmlsdGVyKFxuICAgICAgdSA9PiB0aGlzLnRlc3RVc2VyUGVybWlzc2lvbih1LCAnT1dORVInKSAmJiAhdS5pc0dNXG4gICAgKVxuICB9XG5cbiAgZ2V0IHBsYXllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3duZXJzLmZpbHRlcih1ID0+IHUuY2hhcmFjdGVyPy5pZCA9PT0gdGhpcy5pZClcbiAgfVxuXG4gIGdldCBjaGFyYWN0ZXJVc2VyICgpIHtcbiAgICByZXR1cm4gKFxuICAgICAgZ2FtZS51c2Vycy5jb250ZW50cy5maWx0ZXIodSA9PiB1LmNoYXJhY3Rlcj8uaWQgPT09IHRoaXMuaWQpWzBdIHx8IG51bGxcbiAgICApXG4gIH1cblxuICBhc3luYyBzZXRIcCAodmFsdWUpIHtcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDBcbiAgICBpZiAodmFsdWUgPiB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgdmFsdWUgPSB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heFxuICAgIH1cbiAgICBjb25zdCBoZWFsdGhCZWZvcmUgPSB0aGlzLmhwXG4gICAgbGV0IGRhbWFnZVRha2VuXG4gICAgLy8gaXMgaGVhbGluZ1xuICAgIGlmIChpc05hTihoZWFsdGhCZWZvcmUpIHx8IHZhbHVlID49IGhlYWx0aEJlZm9yZSkge1xuICAgICAgYXdhaXQgdGhpcy5fc2V0SHAodmFsdWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIGRhbWFnZVRha2VuID0gaGVhbHRoQmVmb3JlIC0gdmFsdWVcbiAgICAgIGF3YWl0IHRoaXMuZGVhbERhbWFnZShkYW1hZ2VUYWtlbiwgeyBpZ25vcmVBcm1vcjogdHJ1ZSB9KVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWVcbiAgfVxuXG4gIGFzeW5jIGRlYWxEYW1hZ2UgKGFtb3VudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgLy8gVE9ETzogQ2hhbmdlIG9wdGlvbnMgdG8gbGlzdCBvZiB2YWx1ZXNcbiAgICBjb25zdCBhcm1vckRhdGEgPSBvcHRpb25zLmFybW9yXG4gICAgICA/IG9wdGlvbnMuYXJtb3JcbiAgICAgIDogdGhpcy5zeXN0ZW0uYXR0cmlicy5hcm1vciAvLyBpZiB0aGVyZSBhcm1vciB2YWx1ZSBwYXNzZWQgd2UgdXNlIGl0XG4gICAgY29uc3QgZ3Jvc3NEYW1hZ2UgPSBwYXJzZUludChhbW91bnQpXG4gICAgbGV0IGFybW9yVmFsdWUgPSAwXG4gICAgaWYgKCFvcHRpb25zLmlnbm9yZUFybW9yKSB7XG4gICAgICBpZiAoYXJtb3JEYXRhID09PSBudWxsKSB7XG4gICAgICAgIC8vIG5vcFxuICAgICAgfSBlbHNlIGlmIChDb0M3VXRpbGl0aWVzLmlzRm9ybXVsYShhcm1vckRhdGEpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSAoYXdhaXQgbmV3IFJvbGwoYXJtb3JEYXRhKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhKSkpIHtcbiAgICAgICAgYXJtb3JWYWx1ZSA9IE51bWJlcihhcm1vckRhdGEpXG4gICAgICB9IGVsc2UgaWYgKCFpc05hTihOdW1iZXIoYXJtb3JEYXRhPy52YWx1ZSkpKSB7XG4gICAgICAgIGFybW9yVmFsdWUgPSBOdW1iZXIoYXJtb3JEYXRhLnZhbHVlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JVbmFibGVUb1BhcnNlQXJtb3JGb3JtdWxhJywge1xuICAgICAgICAgICAgdmFsdWU6IGFybW9yRGF0YVxuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbmV0RGFtYWdlID0gZ3Jvc3NEYW1hZ2UgLSBhcm1vclZhbHVlXG4gICAgaWYgKG5ldERhbWFnZSA8PSAwKSByZXR1cm4gMFxuICAgIGF3YWl0IHRoaXMuX3NldEhwKHRoaXMuaHAgLSBuZXREYW1hZ2UpXG4gICAgaWYgKG5ldERhbWFnZSA+PSB0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCkge1xuICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMnKSkge1xuICAgICAgICBpZiAodGhpcy5ocCA9PT0gMCkge1xuICAgICAgICAgIGlmIChuZXREYW1hZ2UgPj0gTWF0aC5jZWlsKHRoaXMuc3lzdGVtLmF0dHJpYnMuaHAubWF4IC8gMikpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmR5aW5nKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAobmV0RGFtYWdlID49IE1hdGguY2VpbCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCAvIDIpKSB7XG4gICAgICAgICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgICAgICAgdGhpcy5pc1Rva2VuID8gdGhpcy50b2tlbktleSA6IHRoaXMuaWRcbiAgICAgICAgICApXG4gICAgICAgICAgY29uQ2hlY2sudG9NZXNzYWdlKClcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGhhc01ham9yV291bmQgPSBmYWxzZVxuICAgICAgICBpZiAobmV0RGFtYWdlID49IE1hdGguY2VpbCh0aGlzLnN5c3RlbS5hdHRyaWJzLmhwLm1heCAvIDIpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgICAgaGFzTWFqb3JXb3VuZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBoYXNNYWpvcldvdW5kID0gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaHAgPT09IDApIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy51bmNvbnNjaW91cylcbiAgICAgICAgICBpZiAoaGFzTWFqb3JXb3VuZCkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZHlpbmcpXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXREYW1hZ2VcbiAgfVxuXG4gIGdldCBtYWpvcldvdW5kICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHMpXG4gIH1cblxuICBnZXQgZHlpbmcgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGdldCB1bmNvbnNjaW91cyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQ29uZGl0aW9uU3RhdHVzKENPQzcuc3RhdHVzLnVuY29uc2Npb3VzKVxuICB9XG5cbiAgZ2V0IGRlYWQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5kZWFkKVxuICB9XG5cbiAgZ2V0IHByb25lICgpIHtcbiAgICByZXR1cm4gdGhpcy5oYXNDb25kaXRpb25TdGF0dXMoQ09DNy5zdGF0dXMucHJvbmUpXG4gIH1cblxuICAvLyBzdGF0aWMgdXBkYXRlQWN0b3IoIGFjdG9yLCBkYXRhVXBkYXRlKXtcbiAgLy8gICBpZiggZ2FtZS51c2VyLmlzR00pe1xuICAvLyAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgdXBkYXRpbmcgYWN0b3IgJHthY3Rvci5uYW1lfWApO1xuICAvLyAgICAgY29uc3QgcHJvbmUgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5wcm9uZV07XG4gIC8vICAgICBjb25zdCB1bmNvbnNjaW91cyA9IGRhdGFVcGRhdGU/LmZsYWdzPy5Db0M3W0NPQzcuc3RhdHVzLnVuY29uc2Npb3VzXTtcbiAgLy8gICAgIGNvbnN0IGNyaXRpY2FsV291bmRzID0gZGF0YVVwZGF0ZT8uZmxhZ3M/LkNvQzdbQ09DNy5zdGF0dXMuY3JpdGljYWxXb3VuZHNdO1xuICAvLyAgICAgY29uc3QgZHlpbmcgPSBkYXRhVXBkYXRlPy5mbGFncz8uQ29DN1tDT0M3LnN0YXR1cy5keWluZ107XG4gIC8vICAgICBpZiggcHJvbmUpIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JbmZvQWN0b3JQcm9uZScsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCB1bmNvbnNjaW91cykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgICAgaWYoIGNyaXRpY2FsV291bmRzKSB1aS5ub3RpZmljYXRpb25zLmluZm8oIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5mb0FjdG9yTWFqb3JXb3VuZCcsIHthY3RvcjogYWN0b3IubmFtZX0pKTtcbiAgLy8gICAgIGlmKCBkeWluZykgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckR5aW5nJywge2FjdG9yOiBhY3Rvci5uYW1lfSkpO1xuICAvLyAgIH1cbiAgLy8gICByZXR1cm47XG4gIC8vIH1cblxuICAvLyBcIkNvQzcuSW5mb0FjdG9yUHJvbmVcIjogXCJ7YWN0b3J9IGZhbGwgcHJvbmVcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvclVuY29uc2Npb3VzXCI6IFwie2FjdG9yfSBmYWxsIHVuY29uc2Npb3VzXCIsXG4gIC8vIFwiQ29DNy5JbmZvQWN0b3JNYWpvcldvdW5kXCI6IFwie2FjdG9yfSBnZXQgYSBtYWpvciB3b3VuZFwiLFxuICAvLyBcIkNvQzcuSW5mb0FjdG9yRHlpbmdcIjogXCJ7YWNvcn0gaXMgZHlpbmdcIixcbiAgLy8gXCJDb0M3LkluZm9BY3RvckluanVyaWVkXCI6IFwie2FjdG9yfSBpcyBpbmp1cmllZFwiLFxuXG4gIC8vIHN0YXRpYyB1cGRhdGVUb2tlbiggc2NlbmUsIHRva2VuLCBkYXRhVXBkYXRlKXtcbiAgLy8gICBjb25zdCBpbmp1cmllZCA9IGRhdGFVcGRhdGU/LmFjdG9yRGF0YT8uZmxhZ3M/LkNvQzc/LmluanVyaWVkO1xuICAvLyAgIGlmKCBpbmp1cmllZCkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkluZm9BY3RvckluanVyaWVkJywge2FjdG9yOiB0b2tlbi5uYW1lfSkpO1xuICAvLyAgIHJldHVybjtcbiAgLy8gfVxuXG4gIC8vIGFzeW5jIHVwZGF0ZSAoZGF0YSA9IHt9LCBjb250ZXh0ID0ge30pIHtcbiAgLy8gICBjb25zb2xlLmxvZygnPj4+PicsIGRhdGEsIGNvbnRleHQpXG4gIC8vICAgc3VwZXIudXBkYXRlKGRhdGEsIGNvbnRleHQpXG4gIC8vIH1cbn1cbiIsIi8qIGdsb2JhbCBjYW52YXMsIENoYXRNZXNzYWdlLCBDT05GSUcsIENPTlNULCBkdXBsaWNhdGUsIGdhbWUsIG1lcmdlT2JqZWN0LCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4vY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vY2hhdC9oZWxwZXIuanMnXG5cbi8qKlxuICogQWxsb3cgZm9yIHBhcnNpbmcgb2YgQ29DNyBlbGVtZW50cyBpbiBjaGF0IG1lc3NhZ2UgYW5kIHNoZWV0cy5cbiAqIEZvcm1hdCBpcyA6XG4gKiBAY29jNy5UWVBFX09GX1JFUVVFU1RbT1BUSU9OU117RElTUExBWUVEX05BTUV9XG4gKiBUWVBFX09GX1JFUVVFU1QgOlxuICogLSBzYW5sb3NzOiB0cmlnZ2VyIGEgc2FuIGNoZWNrLCB1cG9uIGZhaWx1cmUgd2lsbCBwcm9wb3NlIHRvIGRlZHVjdCB0aGUgY29ycmVzcG9uZGluZyBTQU4uXG4gKiAtIGNoZWNrOiB0cmlnZ2VyIGEgY2hlY2sgZGVwZW5kaW5nIG9uIHRoZSBvcHRpb25zLlxuICogLSBpdGVtOiBUcmlnZ2VyIGEgd2VhcG9uIGNoZWNrXG4gKiAtIGVmZmVjdDogQWRkIGFuIGVmZmVjdFxuICpcbiAqIE9QVElPTlM6IFtdID0gb3B0aW9uYWxcbiAqIHNhbmxvc3M6XG4gKiAgIHNhbk1heDogbWF4IFNBTiBsb3NzXG4gKiAgIHNhbk1pbjogbWluIFNBTiBsb3NzXG4gKiAgIHNhblJlYXNvbjogUmVhc29uXG4gKiBjaGVjazpcbiAqICAgdHlwZTogdHlwZSBvZiBjaGVjayAoY2hhcmFjdGVyaXN0aWMsIHNraWxsLCBhdHRyaWIpLlxuICogICBuYW1lOiBuYW1lIG9mIHRoZSBza2lsbC9jaGFyYWN0ZXJpc3RpYy5cbiAqICAgW2RpZmZpY3VsdHldOiA/IChibGluZCksIDAgKHJlZ3VsYXIpLCArIChoYXJkKSwgKysgKGV4dHJlbWUpLCArKysgKGNyaXRpY2FsKS5cbiAqICAgW21vZGlmaWVyXTogLXggKHggcGVuYWx0eSBkaWNlKSwgK3ggKHggYm9udXMgZGljZSksIDAgKG5vIG1vZGlmaWVyKS5cbiAqICAgW2ljb25dOiBpY29uIHR1IHVzZSAoZm9udCBhd3NvbWUpLlxuICogICBbYmxpbmRdOiB3aWxsIHRyaWdnZXIgYSBibGluZCByb2xsLlxuICpcbiAqIFtESVNQTEFZRURfTkFNRTogbmFtZSB0byBkaXNwbGF5Ll1cbiAqXG4gKiBUbyBhZGQvZWRpdCBhIG5ldyBsaW5rIHVwZGF0ZSB0aGVzZSBzZWN0aW9uc1xuICogICBmcm9tRHJvcERhdGEgPT4gQWRkIGFsbCBkZWZhdWx0cyBoZXJlXG4gKiAgIF9jcmVhdGVMaW5rID0+IENyZWF0ZSBIVE1MIGZyb20gZG9jdW1lbnQgZGF0YVxuICogICBfY3JlYXRlRG9jdW1lbnRMaW5rID0+IENyZWF0ZSBAbGluayBmcm9tIGRvY3VtZW50IGRhdGFcbiAqICAgX29uTGlua0FjdG9yQ2xpY2sgPT4gUHJvY2VzcyBsaW5rXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3TGluayB7XG4gIHN0YXRpYyBnZXQgQ0hFQ0tfVFlQRSAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIENIRUNLOiAnY2hlY2snLFxuICAgICAgU0FOTE9TUzogJ3Nhbmxvc3MnLFxuICAgICAgSVRFTTogJ2l0ZW0nLFxuICAgICAgRUZGRUNUOiAnZWZmZWN0J1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgTElOS19UWVBFICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgQ0hBUkFDVEVSSVNUSUM6ICdjaGFyYWN0ZXJpc3RpYycsXG4gICAgICBBVFRSSUJVVEU6ICdhdHRyaWJ1dGUnLFxuICAgICAgU0tJTEw6ICdza2lsbCdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgaW5pdCAoKSB7XG4gICAgQ09ORklHLkNvQzdMaW5rID0ge1xuICAgICAgZG9jdW1lbnRDbGFzczogQ29DN0xpbmtcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYmluZEV2ZW50c0hhbmRsZXIgKGh0bWwpIHtcbiAgICBodG1sXG4gICAgICAuZmluZCgnYS5jb2M3LWxpbms6bm90KC5oYXNjb2M3bGlua2VkKScpXG4gICAgICAub24oJ2NsaWNrJywgZXZlbnQgPT4gQ29DN0xpbmsuX29uTGlua0NsaWNrKGV2ZW50KSlcbiAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gQ29DN0xpbmsuX29uRHJhZ0NvQzdMaW5rKGV2ZW50KSlcbiAgICAgIC5hZGRDbGFzcygnaGFzY29jN2xpbmtlZCcpXG4gIH1cblxuICBzdGF0aWMgX2xpbmtGcm9tRXZlbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBpID0gYS5xdWVyeVNlbGVjdG9yKCdbZGF0YS1saW5rLWljb25dJylcbiAgICBjb25zdCBkYXRhID0gZHVwbGljYXRlKGEuZGF0YXNldClcblxuICAgIGNvbnN0IG9sZFR5cGUgPSBkYXRhLnR5cGVcblxuICAgIGRhdGEudHlwZSA9ICdDb0M3TGluaydcbiAgICBkYXRhLmljb24gPSBudWxsXG5cbiAgICBpZiAob2xkVHlwZSkge1xuICAgICAgZGF0YS5saW5rVHlwZSA9IG9sZFR5cGVcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBkYXRhLm9iamVjdCAmJlxuICAgICAgKHR5cGVvZiBkYXRhLm9iamVjdCA9PT0gJ3N0cmluZycgfHwgZGF0YS5vYmplY3QgaW5zdGFuY2VvZiBTdHJpbmcpXG4gICAgKSB7XG4gICAgICBkYXRhLm9iamVjdCA9IEpTT04ucGFyc2UoZGF0YS5vYmplY3QpXG4gICAgICAvLyBkYXRhLmxpbmtUeXBlID0gQ29DN0xpbmsuTElOS19UWVBFLkVGRkVDVFxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIGkuZGF0YXNldCAmJlxuICAgICAgaS5kYXRhc2V0LmxpbmtJY29uICYmXG4gICAgICBpLmRhdGFzZXQubGlua0ljb24gIT09ICdmYXMgZmEtZGljZSdcbiAgICApIHtcbiAgICAgIGRhdGEuaWNvbiA9IGkuZGF0YXNldC5saW5rSWNvblxuICAgIH1cbiAgICBkYXRhLmRpc3BsYXlOYW1lID0gYS5kYXRhc2V0LmRpc3BsYXlOYW1lID8gYS5pbm5lclRleHQgOiBudWxsXG4gICAgaWYgKGRhdGEuZGlmZmljdWx0eSkge1xuICAgICAgZGF0YS5kaWZmaWN1bHR5ID0gQ29DN1V0aWxpdGllcy5jb252ZXJ0RGlmZmljdWx0eShkYXRhLmRpZmZpY3VsdHkpXG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBzdGF0aWMgX29uRHJhZ0NvQzdMaW5rIChldmVudCkge1xuICAgIGNvbnN0IGRhdGEgPSBDb0M3TGluay5fbGlua0Zyb21FdmVudChldmVudClcbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICAvKipcbiAgICogQSBoZWxwZXIgZnVuY3Rpb24gdG8gaGFuZGxlIG9idGFpbmluZyB0aGUgcmVsZXZhbnQgRG9jdW1lbnQgZnJvbSBkcm9wcGVkIGRhdGEgcHJvdmlkZWQgdmlhIGEgRGF0YVRyYW5zZmVyIGV2ZW50LlxuICAgKiBUaGUgZHJvcHBlZCBkYXRhIGNvdWxkIGhhdmU6XG4gICAqIDEuIEEgZGF0YSBvYmplY3QgZXhwbGljaXRseSBwcm92aWRlZFxuICAgKiBAbWVtYmVyb2YgQ2xpZW50RG9jdW1lbnRNaXhpblxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgVGhlIGRhdGEgb2JqZWN0IGV4dHJhY3RlZCBmcm9tIGEgRGF0YVRyYW5zZmVyIGV2ZW50XG4gICAqIEBwYXJhbSB7b2JqZWN0fSBvcHRpb25zICAgICAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2hpY2ggYWZmZWN0IGRyb3AgZGF0YSBiZWhhdmlvclxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59ICAgVGhlIHJlc29sdmVkIERvY3VtZW50XG4gICAqIEB0aHJvd3MgSWYgYSBEb2N1bWVudCBjb3VsZCBub3QgYmUgcmV0cmlldmVkIGZyb20gdGhlIHByb3ZpZGVkIGRhdGEuXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbURyb3BEYXRhIChkYXRhLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBjbHMgPSBuZXcgQ29DN0xpbmsoKVxuICAgIGNscy5vYmplY3QgPSBtZXJnZU9iamVjdCh7XG4gICAgICB0eXBlOiAnQ29DN0xpbmsnLFxuICAgICAgY2hlY2s6IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0ssXG4gICAgICBsaW5rVHlwZTogQ29DN0xpbmsuTElOS19UWVBFLlNLSUxMLFxuICAgICAgZGlmZmljdWx0eTogQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyLFxuICAgICAgbW9kaWZpZXI6IDAsXG4gICAgICBvYmplY3Q6IHtcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FZmZlY3ROZXcnKSxcbiAgICAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAgIGNoYW5nZXM6IFtdXG4gICAgICB9XG4gICAgfSwgZGF0YSlcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbJ25hbWUnLCAnZGlzcGxheU5hbWUnLCAnaWNvbicsICdpZCcsICdwYWNrJywgJ3Nhbk1pbicsICdzYW5NYXgnLCAnc2FuUmVhc29uJ10pIHtcbiAgICAgIGNscy5vYmplY3Rba2V5XSA9IGNscy5vYmplY3Rba2V5XSA/PyAnJ1xuICAgIH1cbiAgICBpZiAodHlwZW9mIGNscy5vYmplY3Qub2JqZWN0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjbHMub2JqZWN0Lm9iamVjdC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoY2xzLm9iamVjdC5vYmplY3QuZXh0ZXJuYWwpKSB7XG4gICAgICBjbHMub2JqZWN0Lm9iamVjdC5pY29uID0gY2xzLm9iamVjdC5vYmplY3QuZXh0ZXJuYWwgKyAnOi8vJyArIGNscy5vYmplY3Qub2JqZWN0Lmljb25cbiAgICB9XG4gICAgY2xzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgcmV0dXJuIGNsc1xuICB9XG5cbiAgc3RhdGljIF9jcmVhdGVMaW5rIChtYXRjaCkge1xuICAgIGNvbnN0IG5hbWUgPSBtYXRjaFs0XSA/PyB1bmRlZmluZWRcbiAgICBjb25zdCBvcHRpb25zID0gbWF0Y2hbM10gPz8gdW5kZWZpbmVkXG4gICAgY29uc3QgdHlwZSA9IG1hdGNoWzJdID8/IHVuZGVmaW5lZFxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGNsczogWydjb2M3LWxpbmsnXSxcbiAgICAgIGRhdGFzZXQ6IHsgY2hlY2s6IHR5cGUgfSxcbiAgICAgIGljb246IG51bGwsXG4gICAgICBibGluZDogZmFsc2UsXG4gICAgICBuYW1lXG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICBkYXRhLmVmZmVjdCA9IEpTT04ucGFyc2Uob3B0aW9ucylcbiAgICAgIGRhdGEuZGF0YXNldC5vYmplY3QgPSBvcHRpb25zXG4gICAgICBpZiAodHlwZW9mIGRhdGEuZWZmZWN0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmVmZmVjdC5leHRlcm5hbCAhPT0gJ3VuZGVmaW5lZCcgJiYgWydodHRwJywgJ2h0dHBzJ10uaW5jbHVkZXMoZGF0YS5lZmZlY3QuZXh0ZXJuYWwpKSB7XG4gICAgICAgIGRhdGEuZWZmZWN0Lmljb24gPSBkYXRhLmVmZmVjdC5leHRlcm5hbCArICc6Ly8nICsgZGF0YS5lZmZlY3QuaWNvblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYXRjaGVzID0gb3B0aW9ucy5tYXRjaEFsbCgvW14sXSsvZ2kpXG4gICAgICBmb3IgKGNvbnN0IG1hdGNoIG9mIEFycmF5LmZyb20obWF0Y2hlcykpIHtcbiAgICAgICAgbGV0IFtrZXksIHZhbHVlXSA9IG1hdGNoWzBdLnNwbGl0KCc6JylcbiAgICAgICAgaWYgKGtleSA9PT0gJ2ljb24nKSB7XG4gICAgICAgICAgZGF0YS5pY29uID0gdmFsdWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoa2V5ID09PSAnYmxpbmQnICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB2YWx1ZSA9IHRydWVcbiAgICAgICAgICBkYXRhLmJsaW5kID0gdHJ1ZSAmJiBbQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDS10uaW5jbHVkZXModHlwZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICB9XG4gICAgICAgIGRhdGEuZGF0YXNldFtrZXldID0gdmFsdWVcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgZGF0YS5kYXRhc2V0Lmljb24gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBkYXRhLmRhdGFzZXQuZXh0ZXJuYWwgIT09ICd1bmRlZmluZWQnICYmIFsnaHR0cCcsICdodHRwcyddLmluY2x1ZGVzKGRhdGEuZGF0YXNldC5leHRlcm5hbCkpIHtcbiAgICAgICAgZGF0YS5kYXRhc2V0Lmljb24gPSBkYXRhLmRhdGFzZXQuZXh0ZXJuYWwgKyAnOi8vJyArIGRhdGEuZGF0YXNldC5pY29uXG4gICAgICAgIGRhdGEuaWNvbiA9IGRhdGEuZGF0YXNldC5pY29uXG4gICAgICB9XG4gICAgfVxuXG4gICAgbGV0IHRpdGxlXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKGRhdGEuZGF0YXNldC5kaWZmaWN1bHR5KVxuXG4gICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSzoge1xuICAgICAgICBsZXQgaHVtYW5OYW1lID0gZGF0YS5kYXRhc2V0Lm5hbWVcbiAgICAgICAgaWYgKFsnYXR0cmlidXRlcycsICdhdHRyaWJ1dGUnLCAnYXR0cmliJywgJ2F0dHJpYnMnXS5pbmNsdWRlcyhkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICBpZiAoZGF0YS5kYXRhc2V0Lm5hbWUgPT09ICdsY2snKSB7XG4gICAgICAgICAgICBodW1hbk5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChkYXRhLmRhdGFzZXQubmFtZSA9PT0gJ3NhbicpIHtcbiAgICAgICAgICAgIGh1bWFuTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHknKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoWydjaGFyYWMnLCAnY2hhcicsICdjaGFyYWN0ZXJpc3RpYycsICdjaGFyYWN0ZXJpc3RpY3MnXS5pbmNsdWRlcyhkYXRhLmRhdGFzZXQudHlwZT8udG9Mb3dlckNhc2UoKSkpIHtcbiAgICAgICAgICBodW1hbk5hbWUgPSBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMoZGF0YS5kYXRhc2V0Lm5hbWUpPy5sYWJlbFxuICAgICAgICB9XG4gICAgICAgIHRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2skeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7IWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBtb2RpZmllcjogZGF0YS5kYXRhc2V0Lm1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogaHVtYW5OYW1lXG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTOlxuICAgICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua1Nhbkxvc3MkeyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7IWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBtb2RpZmllcjogZGF0YS5kYXRhc2V0Lm1vZGlmaWVyLFxuICAgICAgICAgICAgc2FuTWluOiBkYXRhLmRhdGFzZXQuc2FuTWluLFxuICAgICAgICAgICAgc2FuTWF4OiBkYXRhLmRhdGFzZXQuc2FuTWF4XG4gICAgICAgICAgfVxuICAgICAgICApXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5JVEVNOlxuICAgICAgICB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0l0ZW0keyFkYXRhLmRhdGFzZXQuZGlmZmljdWx0eSA/ICcnIDogJ0RpZmYnfSR7IWRhdGEuZGF0YXNldC5tb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgICAgICBtb2RpZmllcjogZGF0YS5kYXRhc2V0Lm1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogZGF0YS5kYXRhc2V0Lm5hbWVcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVDpcbiAgICAgICAgdGl0bGUgPSBkYXRhLmVmZmVjdC5sYWJlbFxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGlmICghbmFtZSkge1xuICAgICAgZGF0YS5uYW1lID0gdGl0bGVcbiAgICB9IGVsc2Uge1xuICAgICAgZGF0YS5kYXRhc2V0LmRpc3BsYXlOYW1lID0gdHJ1ZVxuICAgIH1cblxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLnRpdGxlID0gZ2FtZS51c2VyLmlzR00gPyBkYXRhLm5hbWUgOiB0aXRsZVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi5kYXRhLmNscylcbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmRhdGFzZXQpKSB7XG4gICAgICBhLmRhdGFzZXRba10gPSB2XG4gICAgfVxuICAgIGEuZHJhZ2dhYmxlID0gdHJ1ZVxuICAgIGRhdGEuaWNvbiA9IGRhdGEuaWNvbiA/PyBkYXRhLmVmZmVjdD8uaWNvbiA/PyAnZmFzIGZhLWRpY2UnXG4gICAgLy8gY2hlY2sgaWYgaXQncyBhbiBpbWFnZSBvciBhbiBpY29uXG4gICAgaWYgKGRhdGEuaWNvbi5pbmNsdWRlcygnXFxcXCcpIHx8IGRhdGEuaWNvbi5pbmNsdWRlcygnLicpKSB7XG4gICAgICBkYXRhLmltZyA9IGRhdGEuaWNvblxuICAgIH1cbiAgICBpZiAoZGF0YS5ibGluZCkge1xuICAgICAgYS5pbm5lckhUTUwgKz0gJzxpIGNsYXNzPVwiZmFzIGZhLWV5ZS1zbGFzaFwiPjwvaT4nXG4gICAgfVxuICAgIGlmIChkYXRhLmltZykge1xuICAgICAgYS5pbm5lckhUTUwgKz0gYDxpbWcgZGF0YS1saW5rLWljb249XCIke2RhdGEuaWNvbn1cIiBzcmM9XCIke2RhdGEuaW1nfVwiPmBcbiAgICB9IGVsc2Uge1xuICAgICAgYS5pbm5lckhUTUwgKz0gYDxpIGRhdGEtbGluay1pY29uPVwiJHtkYXRhLmljb259XCIgY2xhc3M9XCJsaW5rLWljb24gJHtkYXRhLmljb259XCI+PC9pPmBcbiAgICB9XG4gICAgYS5pbm5lckhUTUwgKz0gYDxzcGFuPiR7ZGF0YS5uYW1lfTwvc3Bhbj5gXG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNvbnRlbnQgbGluayBmb3IgdGhpcyBkb2N1bWVudC5cbiAgICogQHBhcmFtIHtvYmplY3R9IGV2ZW50RGF0YSAgICAgICAgICAgICAgICAgICAgIFRoZSBwYXJzZWQgb2JqZWN0IG9mIGRhdGEgcHJvdmlkZWQgYnkgdGhlIGRyb3AgdHJhbnNmZXIgZXZlbnQuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBbb3B0aW9uc10gICAgICAgICAgICAgICAgICAgICBBZGRpdGlvbmFsIG9wdGlvbnMgdG8gY29uZmlndXJlIGxpbmsgZ2VuZXJhdGlvbi5cbiAgICogQHBhcmFtIHtDbGllbnREb2N1bWVudH0gW29wdGlvbnMucmVsYXRpdmVUb10gIEEgZG9jdW1lbnQgdG8gZ2VuZXJhdGUgYSBsaW5rIHJlbGF0aXZlIHRvLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdGlvbnMubGFiZWxdICAgICAgICAgICAgICAgQSBjdXN0b20gbGFiZWwgdG8gdXNlIGluc3RlYWQgb2YgdGhlIGRvY3VtZW50J3MgbmFtZS5cbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICogQGludGVybmFsXG4gICAqL1xuICBfY3JlYXRlRG9jdW1lbnRMaW5rIChldmVudERhdGEsIHsgcmVsYXRpdmVUbywgbGFiZWwgfSA9IHt9KSB7XG4gICAgaWYgKCFldmVudERhdGEuY2hlY2spIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBzd2l0Y2ggKGV2ZW50RGF0YS5jaGVjay50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0s6IHtcbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XG4gICAgICAgIC8vIEBjb2M3LmNoZWNrW2JsaW5kLHR5cGU6Y2hhcmFjdGVyaXN0aWMsbmFtZTpzdHIsZGlmZmljdWx0eToxLG1vZGlmaWVyOjAsaWNvbjpmYSBmYS1saW5rXXtTdHJlbmd0aH1cbiAgICAgICAgLy8gQGNvYzcuY2hlY2tbYmxpbmQsdHlwZTphdHRyaWJ1dGUsbmFtZTpsY2ssZGlmZmljdWx0eToxLG1vZGlmaWVyOjAsaWNvbjpmYSBmYS1saW5rXXtMdWNrfVxuICAgICAgICAvLyBAY29jNy5jaGVja1tibGluZCx0eXBlOnNraWxsLG5hbWU6TGF3LGRpZmZpY3VsdHk6MSxtb2RpZmllcjowLGljb246ZmEgZmEtbGlua117TGF3fVxuICAgICAgICBpZiAoIWV2ZW50RGF0YS5saW5rVHlwZSB8fCAhZXZlbnREYXRhLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9dHlwZToke2V2ZW50RGF0YS5saW5rVHlwZX0sbmFtZToke2V2ZW50RGF0YS5uYW1lfWBcbiAgICAgICAgaWYgKHR5cGVvZiBldmVudERhdGEuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcgJiYgZXZlbnREYXRhLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZXZlbnREYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgZXZlbnREYXRhLm1vZGlmaWVyICE9PSAndW5kZWZpbmVkJyAmJiBldmVudERhdGEubW9kaWZpZXIgIT09IDApIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsbW9kaWZpZXI6JHtldmVudERhdGEubW9kaWZpZXJ9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWNvbikge1xuICAgICAgICAgIGNvbnN0IHBhcnRzID0gZXZlbnREYXRhLmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsZXh0ZXJuYWw6JHtwYXJ0c1sxXX0saWNvbjoke3BhcnRzWzJdfWBcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGljb246JHtldmVudERhdGEuaWNvbn1gXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEucGFjaykge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxwYWNrOiR7ZXZlbnREYXRhLnBhY2t9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEuaWQpIHtcbiAgICAgICAgICBvcHRpb25zICs9IGAsaWQ6JHtldmVudERhdGEuaWR9YFxuICAgICAgICB9XG4gICAgICAgIGxldCBsaW5rID0gYEBjb2M3LmNoZWNrWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLlNBTkxPU1M6IHtcbiAgICAgICAgLy8gQGNvYzcuc2FubG9zc1tzYW5NYXg6MUQ2LHNhbk1pbjoxLGRpZmZpY3VsdHk6KyssbW9kaWZpZXI6LTFde0hhcmQgU2FuIExvc3MgKC0xKSAxLzFENn1cbiAgICAgICAgaWYgKCFldmVudERhdGEuc2FuTWF4IHx8ICFldmVudERhdGEuc2FuTWluKSB7XG4gICAgICAgICAgcmV0dXJuICcnXG4gICAgICAgIH1cbiAgICAgICAgbGV0IG9wdGlvbnMgPSBgJHtldmVudERhdGEuYmxpbmQgPyAnYmxpbmQsJyA6ICcnfXNhbk1heDoke2V2ZW50RGF0YS5zYW5NYXh9LHNhbk1pbjoke2V2ZW50RGF0YS5zYW5NaW59YFxuICAgICAgICBpZiAoZXZlbnREYXRhLnNhblJlYXNvbikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxzYW5SZWFzb246JHtldmVudERhdGEuc2FuUmVhc29ufWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmRpZmZpY3VsdHkgJiYgZXZlbnREYXRhLmRpZmZpY3VsdHkgIT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcikge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxkaWZmaWN1bHR5OiR7ZXZlbnREYXRhLmRpZmZpY3VsdHl9YFxuICAgICAgICB9XG4gICAgICAgIGlmIChldmVudERhdGEubW9kaWZpZXIgJiYgZXZlbnREYXRhLm1vZGlmaWVyICE9PSAwKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLG1vZGlmaWVyOiR7ZXZlbnREYXRhLm1vZGlmaWVyfWBcbiAgICAgICAgfVxuICAgICAgICBpZiAoZXZlbnREYXRhLmljb24pIHtcbiAgICAgICAgICBjb25zdCBwYXJ0cyA9IGV2ZW50RGF0YS5pY29uLm1hdGNoKC9eKGh0dHBzPyk6XFwvXFwvKC4rKSQvKVxuICAgICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgICAgb3B0aW9ucyArPSBgLGV4dGVybmFsOiR7cGFydHNbMV19LGljb246JHtwYXJ0c1syXX1gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxpY29uOiR7ZXZlbnREYXRhLmljb259YFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgbGluayA9IGBAY29jNy5zYW5sb3NzWyR7b3B0aW9uc31dYFxuICAgICAgICBjb25zdCBkaXNwbGF5TmFtZSA9IGV2ZW50RGF0YS5kaXNwbGF5TmFtZSA/PyAobGFiZWwgPz8gJycpXG4gICAgICAgIGlmIChkaXNwbGF5TmFtZSkge1xuICAgICAgICAgIGxpbmsgKz0gYHske2Rpc3BsYXlOYW1lfX1gXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxpbmtcbiAgICAgIH1cblxuICAgICAgY2FzZSBDb0M3TGluay5DSEVDS19UWVBFLklURU06IHtcbiAgICAgICAgLy8gQGNvYzcuaXRlbVt0eXBlOm9wdGlvbmFsLG5hbWU6U2hvdGd1bixkaWZmaWN1bHR5OissbW9kaWZpZXI6LTFde0hhcmQgU2hpdGd1biBjaGVjaygtMSl9XG4gICAgICAgIGlmICghZXZlbnREYXRhLm5hbWUpIHtcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgICAgfVxuICAgICAgICBsZXQgb3B0aW9ucyA9IGAke2V2ZW50RGF0YS5ibGluZCA/ICdibGluZCwnIDogJyd9bmFtZToke2V2ZW50RGF0YS5uYW1lfWBcbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pY29uKSB7XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEuaWNvbi5tYXRjaCgvXihodHRwcz8pOlxcL1xcLyguKykkLylcbiAgICAgICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgICAgIG9wdGlvbnMgKz0gYCxleHRlcm5hbDoke3BhcnRzWzFdfSxpY29uOiR7cGFydHNbMl19YFxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvcHRpb25zICs9IGAsaWNvbjoke2V2ZW50RGF0YS5pY29ufWBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5wYWNrKSB7XG4gICAgICAgICAgb3B0aW9ucyArPSBgLHBhY2s6JHtldmVudERhdGEucGFja31gXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGV2ZW50RGF0YS5pZCkge1xuICAgICAgICAgIG9wdGlvbnMgKz0gYCxpZDoke2V2ZW50RGF0YS5pZH1gXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuaXRlbVske29wdGlvbnN9XWBcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBldmVudERhdGEuZGlzcGxheU5hbWUgPz8gKGxhYmVsID8/ICcnKVxuICAgICAgICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBsaW5rICs9IGB7JHtkaXNwbGF5TmFtZX19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1Q6IHtcbiAgICAgICAgLy8gQGNvYzcuZWZmZWN0W3tcImxhYmVsXCI6XCJLYXBvd1wiLFwiaWNvblwiOlwiaWNvbnMvc3ZnL2F1cmEuc3ZnXCIsXCJjaGFuZ2VzXCI6W3tcImtleVwiOlwic3lzdGVtLnVua25vd24udGVzdFwiLFwibW9kZVwiOjIsXCJ2YWx1ZVwiOlwiNVwifV0sXCJ0aW50XCI6XCIjZTkxNjE2XCIsXCJkdXJhdGlvblwiOntcInNlY29uZHNcIjpudWxsLFwicm91bmRzXCI6NixcInR1cm5zXCI6bnVsbH19XXtLYXBvd2luZ31cbiAgICAgICAgLy8gY29uc3QgZWZmZWN0RGF0YSA9IGZvdW5kcnkudXRpbHMuZGVlcENsb25lKGV2ZW50RGF0YSlcbiAgICAgICAgLy8gaWYgKCF0aGlzLmVmZmVjdElzVGVtcCkgZGVsZXRlIGVmZmVjdERhdGEuZHVyYXRpb25cbiAgICAgICAgLy8gaWYgKGVmZmVjdERhdGEuY2hhbmdlcz8ubGVuZ3RoID09PSAwKSBkZWxldGUgZWZmZWN0RGF0YS5jaGFuZ2VzXG4gICAgICAgIC8vIGlmICghZWZmZWN0RGF0YS5kaXNhYmxlZCkgZGVsZXRlIGVmZmVjdERhdGEuZGlzYWJsZWRcbiAgICAgICAgLy8gaWYgKCFlZmZlY3REYXRhLnRpbnQpIGRlbGV0ZSBlZmZlY3REYXRhLnRpbnRcbiAgICAgICAgY29uc3QgcGFydHMgPSBldmVudERhdGEub2JqZWN0Lmljb24ubWF0Y2goL14oaHR0cHM/KTpcXC9cXC8oLispJC8pXG4gICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgIGV2ZW50RGF0YS5vYmplY3QuZXh0ZXJuYWwgPSBwYXJ0c1sxXVxuICAgICAgICAgIGV2ZW50RGF0YS5vYmplY3QuaWNvbiA9IHBhcnRzWzJdXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGxpbmsgPSBgQGNvYzcuZWZmZWN0WyR7SlNPTi5zdHJpbmdpZnkoZXZlbnREYXRhLm9iamVjdCl9XWBcbiAgICAgICAgY29uc3QgZGlzcGxheU5hbWUgPSBldmVudERhdGEuZGlzcGxheU5hbWUgPz8gKGxhYmVsID8/ICcnKVxuICAgICAgICBpZiAoZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBsaW5rICs9IGB7JHtkaXNwbGF5TmFtZX19YFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaW5rXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiAnPydcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25MaW5rQWN0b3JDbGljayAoYWN0b3IsIG9wdGlvbnMsIHsgc2hpZnRLZXkgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBzd2l0Y2ggKG9wdGlvbnMuY2hlY2spIHtcbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5DSEVDSzpcbiAgICAgICAgaWYgKFsnY2hhcmFjJywgJ2NoYXInLCAnY2hhcmFjdGVyaXN0aWMnLCAnY2hhcmFjdGVyaXN0aWNzJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5jaGFyYWN0ZXJpc3RpY0NoZWNrKFxuICAgICAgICAgICAgb3B0aW9ucy5uYW1lLFxuICAgICAgICAgICAgc2hpZnRLZXksXG4gICAgICAgICAgICBvcHRpb25zXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ3NraWxsJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5za2lsbENoZWNrKG9wdGlvbnMsIHNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICB9XG4gICAgICAgIGlmIChbJ2F0dHJpYnV0ZXMnLCAnYXR0cmlidXRlJywgJ2F0dHJpYicsICdhdHRyaWJzJ10uaW5jbHVkZXMob3B0aW9ucy5saW5rVHlwZS50b0xvd2VyQ2FzZSgpKSkge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5hdHRyaWJ1dGVDaGVjayhvcHRpb25zLm5hbWUsIHNoaWZ0S2V5LCBvcHRpb25zKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgQ29DN0xpbmsuQ0hFQ0tfVFlQRS5TQU5MT1NTOlxuICAgICAgICBTYW5DaGVja0NhcmQuY3JlYXRlKGFjdG9yLmFjdG9yS2V5LCBvcHRpb25zLCB7XG4gICAgICAgICAgZmFzdEZvcndhcmQ6IHNoaWZ0S2V5XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTTpcbiAgICAgICAgcmV0dXJuIGFjdG9yLndlYXBvbkNoZWNrKG9wdGlvbnMsIHNoaWZ0S2V5KVxuXG4gICAgICBjYXNlIENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUOlxuICAgICAgICBhd2FpdCBhY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW3tcbiAgICAgICAgICBsYWJlbDogb3B0aW9ucy5vYmplY3QubGFiZWwsXG4gICAgICAgICAgaWNvbjogb3B0aW9ucy5vYmplY3QuaWNvbixcbiAgICAgICAgICBjaGFuZ2VzOiBvcHRpb25zLm9iamVjdC5jaGFuZ2VzXG4gICAgICAgIH1dKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyB0b0NoYXRNZXNzYWdlIChvcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9uID0ge1xuICAgICAgc3BlYWtlcjoge1xuICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IG1lc3NhZ2VcbiAgICBjb25zdCBsaW5rID0gKG5ldyBDb0M3TGluaygpKS5fY3JlYXRlRG9jdW1lbnRMaW5rKG9wdGlvbnMpXG4gICAgaWYgKG9wdGlvbnMuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICBtZXNzYWdlID0gYDxkaXYgY2xhc3M9XCJlZmZlY3QtbWVzc2FnZVwiPiR7bGlua308L2Rpdj5gXG4gICAgfSBlbHNlIHtcbiAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VDaGVja1JlcXVlc3RlZFdhaXQnLCB7XG4gICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICB9KVxuICAgIH1cbiAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxuICB9XG5cbiAgc3RhdGljIHRvV2hpc3Blck1lc3NhZ2UgKG9wdGlvbnMsIGFjdG9ycykge1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgYWN0b3JzKSB7XG4gICAgICBjb25zdCBvcHRpb24gPSB7XG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgd2hpc3BlcjogYWN0b3Iub3duZXJzLm1hcChhID0+IGEuaWQpXG4gICAgICB9XG4gICAgICBsZXQgbWVzc2FnZVxuICAgICAgY29uc3QgbGluayA9IChuZXcgQ29DN0xpbmsoKSkuX2NyZWF0ZURvY3VtZW50TGluayhvcHRpb25zKVxuICAgICAgaWYgKG9wdGlvbnMuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBgPGRpdiBjbGFzcz1cImVmZmVjdC1tZXNzYWdlXCI+JHtsaW5rfTwvZGl2PmBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1lc3NhZ2VUYXJnZXRDaGVja1JlcXVlc3RlZCcsIHtcbiAgICAgICAgICBuYW1lOiBhY3Rvci5uYW1lLFxuICAgICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBjaGF0SGVscGVyLmNyZWF0ZU1lc3NhZ2UobnVsbCwgbWVzc2FnZSwgb3B0aW9uKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUcmlnZ2VyIGEgY2hlY2sgd2hlbiBhIGxpbmsgaXMgY2xpY2tlZC5cbiAgICogRGVwZW5kaW5nIHRoZSBvcmlnaW5cbiAgICogQHBhcmFtIHsqfSBldmVudFxuICAgKlxuICAgKi9cbiAgc3RhdGljIGFzeW5jIF9vbkxpbmtDbGljayAoZXZlbnQpIHtcbiAgICBjb25zdCBvcHRpb25zID0gQ29DN0xpbmsuX2xpbmtGcm9tRXZlbnQoZXZlbnQpXG5cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpKSB7XG4gICAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUob3B0aW9ucylcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBpZiAoY2FudmFzLnRva2Vucy5jb250cm9sbGVkLmxlbmd0aCkge1xuICAgICAgICBmb3IgKGNvbnN0IHRva2VuIG9mIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZCkge1xuICAgICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKHRva2VuLmFjdG9yLCBvcHRpb25zLCB7IHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgY29uc3QgYWN0b3IgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3Ioc3BlYWtlcilcbiAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICBDb0M3TGluay5fb25MaW5rQWN0b3JDbGljayhhY3Rvciwgb3B0aW9ucywgeyBzaGlmdEtleTogZXZlbnQuc2hpZnRLZXkgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBDb0M3TGluay50b0NoYXRNZXNzYWdlKG9wdGlvbnMpXG4gICAgICByZXR1cm5cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgICAgbGV0IGFjdG9yID0gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHNwZWFrZXIpXG4gICAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhID0+IChhLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IGEub3duZXJzaGlwLmRlZmF1bHQpID49IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVIpXG4gICAgICAgIGlmIChhY3RvcnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgYWN0b3IgPSBhY3RvcnNbMF1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGFjdG9yKSB7XG4gICAgICAgIENvQzdMaW5rLl9vbkxpbmtBY3RvckNsaWNrKGFjdG9yLCBvcHRpb25zLCB7IHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSB9KVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICB9XG4gICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9Db250cm9sbGVkQWN0b3InKSlcbiAgfVxuXG4gIHNldFZhbHVlIChrZXksIHZhbHVlKSB7XG4gICAgdGhpcy5vYmplY3Rba2V5XSA9IHZhbHVlXG4gIH1cblxuICBnZXQgbGluayAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NyZWF0ZURvY3VtZW50TGluayh0aGlzLm9iamVjdClcbiAgfVxuXG4gIGdldCBpZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmlkXG4gIH1cblxuICBnZXQgcGFjayAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LnBhY2tcbiAgfVxuXG4gIGdldCBjaGVja1R5cGUgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5jaGVja1xuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHkgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5kaWZmaWN1bHR5XG4gIH1cblxuICBnZXQgaWNvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lmljb25cbiAgfVxuXG4gIGdldCBkaXNwbGF5TmFtZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmRpc3BsYXlOYW1lXG4gIH1cblxuICBnZXQgbW9kaWZpZXIgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5tb2RpZmllclxuICB9XG5cbiAgZ2V0IGxpbmtUeXBlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QubGlua1R5cGVcbiAgfVxuXG4gIGdldCBzYW5NaW4gKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5NaW5cbiAgfVxuXG4gIGdldCBzYW5NYXggKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5NYXhcbiAgfVxuXG4gIGdldCBzYW5SZWFzb24gKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5zYW5SZWFzb25cbiAgfVxuXG4gIGdldCBlZmZlY3QgKCkge1xuICAgIHJldHVybiB0aGlzLm9iamVjdC5vYmplY3RcbiAgfVxuXG4gIGdldCBjaGVja05hbWUgKCkge1xuICAgIGlmICh0aGlzLmlzQ2hhcmFjdGVyaXN0aWNDaGVjaykge1xuICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWNzID0gQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKClcbiAgICAgIHJldHVybiBjaGFyYWN0ZXJpc3RpY3MuZmluZChjID0+IGMua2V5ID09PSB0aGlzLm9iamVjdC5uYW1lIHx8IGMuc2hvcnROYW1lID09PSB0aGlzLm9iamVjdC5uYW1lIHx8IGMubGFiZWwgPT09IHRoaXMub2JqZWN0Lm5hbWUpPy5rZXkgPz8gJydcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMub2JqZWN0Lm5hbWVcbiAgfVxuXG4gIGdldCBpc0NoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuQ0hFQ0tcbiAgfVxuXG4gIGdldCBpc0NoYXJhY3RlcmlzdGljQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5DSEFSQUNURVJJU1RJQ1xuICB9XG5cbiAgZ2V0IGlzQXR0cmlidXRlQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5BVFRSSUJVVEVcbiAgfVxuXG4gIGdldCBpc1NraWxsQ2hlY2sgKCkge1xuICAgIHJldHVybiB0aGlzLmlzQ2hlY2sgJiYgdGhpcy5vYmplY3QubGlua1R5cGUgPT09IENvQzdMaW5rLkxJTktfVFlQRS5TS0lMTFxuICB9XG5cbiAgZ2V0IGlzSXRlbUNoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTVxuICB9XG5cbiAgZ2V0IGlzU2FuTG9zc0NoZWNrICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuU0FOTE9TU1xuICB9XG5cbiAgZ2V0IGlzRWZmZWN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3QuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUXG4gIH1cblxuICBnZXQgaXNCbGluZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNDaGVjayAmJiB0aGlzLm9iamVjdC5ibGluZFxuICB9XG59XG4iLCIvKiBnbG9iYWwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdQYXJzZXIge1xuICBzdGF0aWMgZW5yaWNoSFRNTCAoY29udGVudCkge1xuICAgIGNvbnN0IGh0bWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxuICAgIGh0bWwuaW5uZXJIVE1MID0gU3RyaW5nKGNvbnRlbnQpXG5cbiAgICBsZXQgdGV4dCA9IFtdXG5cbiAgICB0ZXh0ID0gVGV4dEVkaXRvci5fZ2V0VGV4dE5vZGVzKGh0bWwpXG4gICAgY29uc3Qgcmd4ID0gbmV3IFJlZ0V4cCgnQChjb2M3KVxcXFwuJyArICcoY2hlY2t8ZWZmZWN0fGl0ZW18c2FubG9zcyknICsgJ1xcXFxbKFteXFxcXFtcXFxcXV0qKD86XFxcXFtbXlxcXFxbXFxcXF1dKig/OlxcXFxbW15cXFxcW1xcXFxdXSpcXFxcXSkqW15cXFxcW1xcXFxdXSpcXFxcXSkqW15cXFxcW1xcXFxdXSopXFxcXF0nICsgJyg/OnsoW159XSspfSk/JywgJ2dpJylcbiAgICBUZXh0RWRpdG9yLl9yZXBsYWNlVGV4dENvbnRlbnQodGV4dCwgcmd4LCBDb0M3TGluay5fY3JlYXRlTGluaylcbiAgICByZXR1cm4gaHRtbC5pbm5lckhUTUxcbiAgfVxuXG4gIHN0YXRpYyBQYXJzZVNoZWV0Q29udGVudCAoYXBwLCBodG1sKSB7XG4gICAgLy8gQ2hlY2sgaW4gYWxsIGVkaXRvcnMgY29udGVudCBmb3IgYSBsaW5rLlxuICAgIGZvciAoY29uc3QgZWxlbWVudCBvZiBodG1sLmZpbmQoJ2Rpdi5lZGl0b3ItY29udGVudCA+ICosIHAnKSkge1xuICAgICAgaWYgKGVsZW1lbnQub3V0ZXJIVE1MLnRvTG9jYWxlTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ0Bjb2M3JykpIHtcbiAgICAgICAgZWxlbWVudC5vdXRlckhUTUwgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoZWxlbWVudC5vdXRlckhUTUwpXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQmluZCB0aGUgY2xpY2sgdG8gZXhlY3V0ZSB0aGUgY2hlY2suXG4gICAgQ29DN0xpbmsuYmluZEV2ZW50c0hhbmRsZXIoaHRtbClcbiAgfVxuXG4gIC8qKlxuICAgICAqIEEgaG9vayBldmVudCB0aGF0IGZpcmVzIGZvciBlYWNoIENoYXRNZXNzYWdlIHdoaWNoIGlzIHJlbmRlcmVkIGZvciBhZGRpdGlvbiB0byB0aGUgQ2hhdExvZy5cbiAgICAgKiBUaGlzIGhvb2sgYWxsb3dzIGZvciBmaW5hbCBjdXN0b21pemF0aW9uIG9mIHRoZSBtZXNzYWdlIEhUTUwgYmVmb3JlIGl0IGlzIGFkZGVkIHRvIHRoZSBsb2cuXG4gICAgICogQGZ1bmN0aW9uIHJlbmRlckNoYXRNZXNzYWdlXG4gICAgICogQG1lbWJlcm9mIGhvb2tFdmVudHNcbiAgICAgKiBAcGFyYW0ge0NoYXRNZXNzYWdlfSBhcHAgICBUaGUgQ2hhdE1lc3NhZ2UgZG9jdW1lbnQgYmVpbmcgcmVuZGVyZWRcbiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gaHRtbCAgICAgICAgICAgVGhlIHBlbmRpbmcgSFRNTCBhcyBhIGpRdWVyeSBvYmplY3RcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgVGhlIGlucHV0IGRhdGEgcHJvdmlkZWQgZm9yIHRlbXBsYXRlIHJlbmRlcmluZ1xuICAgICAqL1xuICBzdGF0aWMgUGFyc2VNZXNzYWdlIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICAvLyBAY29jNy5zYW5sb3NzW3Nhbk1heDoxRDYsc2FuTWluOjEsc2FuUmVhc29uOkdob3VscyxkaWZmaWN1bHR5OisrLG1vZGlmaWVyOi0xXXtIYXJkIFNhbiBMb3NzICgtMSkgMS8xRDZ9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpjaGFyYWMsbmFtZTpTVFIsZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIFNUUiBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTphdHRyaWIsbmFtZTpsY2ssZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIGx1Y2sgY2hlY2soLTEpfVxuICAgIC8vIEBjb2M3LmNoZWNrW3R5cGU6c2tpbGwsbmFtZTphbnRocm9wb2xvZ3ksZGlmZmljdWx0eTorLG1vZGlmaWVyOi0xXXtIYXJkIEFudGhyb3BvbG9neSBjaGVjaygtMSl9XG4gICAgLy8gQGNvYzcuY2hlY2tbdHlwZTpza2lsbCxpY29uOmZhcyBmYS1hcnJvdy1hbHQtY2lyY2xlLXJpZ2h0LG5hbWU6YW50aHJvcG9sb2d5LGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17SGFyZCBBbnRocm9wb2xvZ3kgY2hlY2soLTEpfVxuICAgIC8vIEBjb2M3Lml0ZW1bbmFtZTpTaG90Z3VuLGljb246ZmFzIGZhLWJ1bGxzZXllLGRpZmZpY3VsdHk6Kyxtb2RpZmllcjotMV17VXNlIHNob3RndW59XG4gICAgLy8gW1RCSV1AY29jNy5kYW1hZ2VbZm9ybXVsYToxRDZde0RhbWFnZSAxRDZ9XG4gICAgLy8gW1RCSV1AY29jNy5yb2xsW3RocmVzaG9sZDo1MF17U2ltcGxlIHJvbGx9XG5cbiAgICBpZiAoIWFwcC5pc0NvbnRlbnRWaXNpYmxlKSByZXR1cm5cblxuICAgIGlmIChkYXRhLm1lc3NhZ2UuY29udGVudC50b0xvY2FsZUxvd2VyQ2FzZSgpLmluY2x1ZGVzKCdAY29jNycpKSB7XG4gICAgICBjb25zdCBwYXJzZWRDb250ZW50ID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGRhdGEubWVzc2FnZS5jb250ZW50KVxuICAgICAgaHRtbC5maW5kKCcubWVzc2FnZS1jb250ZW50JykuaHRtbChwYXJzZWRDb250ZW50KVxuICAgICAgZGF0YS5tZXNzYWdlLmNvbnRlbnQgPSBwYXJzZWRDb250ZW50XG4gICAgfVxuICAgIHJldHVybiB0cnVlIC8vIGFsbG93IG1lc3NhZ2UgdG8gYmUgcHVibGlzaGVkICFcbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgZHVwbGljYXRlLCBnYW1lLCBnZXRQcm9wZXJ0eSwgSXRlbSwgUm9sbCwgVGV4dEVkaXRvciwgVG9rZW4sIHVpLCBmcm9tVXVpZCAqL1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4uL2FwcHMvY29jNy1wYXJzZXIuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQ0lERWRpdG9yIH0gZnJvbSAnLi4vYXBwcy9jb2MtaWQtZWRpdG9yLmpzJ1xuXG4vKipcbiAqIE92ZXJyaWRlIGFuZCBleHRlbmQgdGhlIGJhc2ljIDpjbGFzczpgSXRlbWAgaW1wbGVtZW50YXRpb25cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdJdGVtIGV4dGVuZHMgSXRlbSB7XG4gIC8qKiBDcmVhdGUgZGVyaXZlZCBkb2N1bWVudCBjbGFzc2VzIGZvciBzcGVjaWZpYyBJdGVtIHR5cGVzICovXG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgLyoqIEBzZWUgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzc2VzIGluIG1vZHVsZS9zY3JpcHRzL2NvbmZpZ3VyZS1kb2N1bWVudHMgKi9cbiAgICBpZiAoZGF0YS50eXBlIGluIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyAmJiAhY29udGV4dD8uZXh0ZW5kZWQpIHtcbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB0aGUgY29uc3RydWN0b3IgZm9yIHRoZSBuZXcgY2xhc3Mgd2lsbCBjYWxsIGl0J3Mgc3VwZXIoKSxcbiAgICAgICAqIHRoZSBleHRlbmRlZCBmbGFnIHdpbGwgYmUgdHJ1ZSwgdGh1cyBieXBhc3NpbmcgdGhpcyB3aG9sZSBwcm9jZXNzXG4gICAgICAgKiBhbmQgcmVzdW1lIGRlZmF1bHQgYmVoYXZpb3JcbiAgICAgICAqL1xuICAgICAgcmV0dXJuIG5ldyBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXNbZGF0YS50eXBlXShkYXRhLCB7XG4gICAgICAgIC4uLnsgZXh0ZW5kZWQ6IHRydWUgfSxcbiAgICAgICAgLi4uY29udGV4dFxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9za2lsbHMuc3ZnJ1xuICAgICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT09ICdzdGF0dXMnKSB7XG4gICAgICAgIGRhdGEuaW1nID0gJ2ljb25zL3N2Zy9hdXJhLnN2ZydcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09PSAnd2VhcG9uJykge1xuICAgICAgICBkYXRhLmltZyA9ICdpY29ucy9zdmcvc3dvcmQuc3ZnJ1xuICAgICAgfVxuICAgIH1cbiAgICAvKiogRGVmYXVsdCBiZWhhdmlvciwganVzdCBjYWxsIHN1cGVyKCkgYW5kIGRvIGFsbCB0aGUgZGVmYXVsdCBJdGVtIGluaXRzICovXG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIGFzeW5jIF9jcmVhdGVEb2N1bWVudExpbmsgKGV2ZW50RGF0YSwgeyByZWxhdGl2ZVRvLCBsYWJlbCB9ID0ge30pIHtcbiAgICBpZiAodHlwZW9mIGV2ZW50RGF0YS50eXBlID09PSAnc3RyaW5nJyAmJiB0eXBlb2YgZXZlbnREYXRhLnV1aWQgPT09ICdzdHJpbmcnICYmIGV2ZW50RGF0YS50eXBlID09PSAnSXRlbScgJiYgZXZlbnREYXRhLnV1aWQubWF0Y2goL15BY3RvclxcLi8pICYmIHJlbGF0aXZlVG8gaW5zdGFuY2VvZiBDT05GSUcuSm91cm5hbEVudHJ5UGFnZS5kb2N1bWVudENsYXNzKSB7XG4gICAgICAvLyBJZiBkcm9wcGluZyBhIHNraWxsL3dlYXBvbiBmcm9tIGFuIEFjdG9yIG9udG8gYSBKb3VybmFsIEVudHJ5IFBhZ2UgY29udmVydCB0byBhIGNoZWNrIGxpbmtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCBmcm9tVXVpZChldmVudERhdGEudXVpZClcbiAgICAgIGlmIChbJ3NraWxsJywgJ3dlYXBvbiddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgcmV0dXJuICdAY29jNy5jaGVja1t0eXBlOicgKyBpdGVtLnR5cGUgKyAnLG5hbWU6JyArIGl0ZW0ubmFtZSArICddJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuX2NyZWF0ZURvY3VtZW50TGluayhldmVudERhdGEsIHsgcmVsYXRpdmVUbywgbGFiZWwgfSlcbiAgfVxuXG4gIHN0YXRpYyBnZXQgaWNvbkxhbmd1YWdlICgpIHtcbiAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2tpbGxzL2xhbmd1YWdlLnN2ZydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZmxhZ3MgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBtYWxmdW5jdGlvbjogJ21hbGZjJ1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGUgb24gb2YgdGhlIGl0ZW0gcHJvcGVydHkgaW4gZGF0YS5kYXRhLnByb3BlcnRpZXNcbiAgICogQHBhcmFtIHtTdHJpbmd9IHByb3BlcnR5SWQgOiBuYW1lIGZvciB0aGUgcHJvcGVydHkgdG8gdG9nZ2xlXG4gICAqL1xuICBhc3luYyB0b2dnbGVQcm9wZXJ0eSAocHJvcGVydHlJZCwgb3ZlcnJpZGUgPSBmYWxzZSkge1xuICAgIGxldCBjaGVja2VkUHJvcHMgPSB7fVxuICAgIGxldCBmaWdodGluZ1xuICAgIGxldCBmaXJlYXJtc1xuICAgIGlmICh0eXBlb2YgQ09DNy5lcmFzW3Byb3BlcnR5SWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIENvQ0lERWRpdG9yLmVyYVRvZ2dsZSh0aGlzLCBwcm9wZXJ0eUlkKVxuICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAnd2VhcG9uJyAmJiAhb3ZlcnJpZGUpIHtcbiAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnYWhkYicpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmFoZGIpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWhkYic6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYWRkYic6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5haGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdhZGRiJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYWRkYikge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5hZGRiJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5haGRiJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmFkZGInOiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3Nob3RndW4nKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuKSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc2hvdGd1bic6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNob3RndW4nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UuZXh0cmVtZS52YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmV4dHJlbWUuZGFtYWdlJzogbnVsbCxcbiAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy52YWx1ZSc6IG51bGwsXG4gICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmxvbmcuZGFtYWdlJzogbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ21lbGVlJyB8fCBwcm9wZXJ0eUlkID09PSAncm5nZCcpIHtcbiAgICAgICAgbGV0IG1lbGVlV2VhcG9uXG4gICAgICAgIGlmIChwcm9wZXJ0eUlkID09PSAnbWVsZWUnICYmICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlKSB7XG4gICAgICAgICAgbWVsZWVXZWFwb24gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdtZWxlZScgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSkge1xuICAgICAgICAgIG1lbGVlV2VhcG9uID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ3JuZ2QnICYmICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BlcnR5SWQgPT09ICdybmdkJyAmJiB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBtZWxlZVdlYXBvbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAobWVsZWVXZWFwb24pIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMubWVsZWUnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuYnJzdCc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmF1dG8nOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5kYnJsJzogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMucm5nZCc6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMudHlwZSA9PT0gJ3NraWxsJyAmJiAhb3ZlcnJpZGUpIHtcbiAgICAgIGxldCBtb2RpZiA9IGZhbHNlXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2NvbWJhdCcpIHtcbiAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCkge1xuICAgICAgICAgIC8vIENsb3NlIGNvbWJhdCBieSBkZWZhdWx0XG4gICAgICAgICAgaWYgKCF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0pIHtcbiAgICAgICAgICAgIGZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICAgIH0gZWxzZSBmaXJlYXJtcyA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0JzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJzogZmFsc2UsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5zcGVjaWFsaXphdGlvbic6ICcnLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2ZpZ2h0aW5nJykge1xuICAgICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcpIHtcbiAgICAgICAgICBmaXJlYXJtcyA9IGZhbHNlXG4gICAgICAgICAgZmlnaHRpbmcgPSB0cnVlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZmlyZWFybXMgPSB0cnVlXG4gICAgICAgICAgZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIG1vZGlmID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcGVydHlJZCA9PT0gJ2ZpcmVhcm0nKSB7XG4gICAgICAgIGlmICghdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtKSB7XG4gICAgICAgICAgZmlyZWFybXMgPSB0cnVlXG4gICAgICAgICAgZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZpcmVhcm1zID0gZmFsc2VcbiAgICAgICAgICBmaWdodGluZyA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBtb2RpZiA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKG1vZGlmKSB7XG4gICAgICAgIC8vIHNldCBzcGVjaWFsaXNhdGlvbiBpZiBmaWdodGluZyBvciBmaXJlYXJtXG4gICAgICAgIGlmIChmaWdodGluZykge1xuICAgICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSc6IGZhbHNlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCc6IHRydWUsXG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICAgICAgdGhpcy5zeXN0ZW0uc2tpbGxOYW1lLFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWUpXG4gICAgICAgICAgKVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlyZWFybXMpIHtcbiAgICAgICAgICBjaGVja2VkUHJvcHMgPSB7XG4gICAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcnOiBmYWxzZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogdHJ1ZSxcbiAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5jb21iYXQnOiB0cnVlLFxuICAgICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwnOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgIHRoaXMuc3lzdGVtLnNraWxsTmFtZSxcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUpXG4gICAgICAgICAgKVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgIGNoZWNrZWRQcm9wcy5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcm9wZXJ0eUlkID09PSAnc3BlY2lhbCcpIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW3Byb3BlcnR5SWRdKSB7XG4gICAgICAgIGNoZWNrZWRQcm9wcyA9IHtcbiAgICAgICAgICAnc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtJzogZmFsc2UsXG4gICAgICAgICAgJ3N5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCc6IGZhbHNlLFxuICAgICAgICAgICdzeXN0ZW0uc3BlY2lhbGl6YXRpb24nOiAnJyxcbiAgICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hlY2tlZFByb3BzID0ge1xuICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiArICcgKCcgKyB0aGlzLnN5c3RlbS5za2lsbE5hbWUgKyAnKSdcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChPYmplY3Qua2V5cyhjaGVja2VkUHJvcHMpLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSBhd2FpdCB0aGlzLnVwZGF0ZShjaGVja2VkUHJvcHMpXG4gICAgICByZXR1cm4gaXRlbVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBwcm9wTmFtZSA9IGBzeXN0ZW0ucHJvcGVydGllcy4ke3Byb3BlcnR5SWR9YFxuICAgICAgY29uc3QgcHJvcFZhbHVlID0gIXRoaXMuc3lzdGVtLnByb3BlcnRpZXNbcHJvcGVydHlJZF1cbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW3Byb3BOYW1lXTogcHJvcFZhbHVlIH0pLnRoZW4oaXRlbSA9PiB7XG4gICAgICAgIHJldHVybiBpdGVtXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGhhc1Byb3BlcnR5IChwcm9wZXJ0eUlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXNJbmNsdWRlZEluU2V0KCdwcm9wZXJ0aWVzJywgcHJvcGVydHlJZClcbiAgfVxuXG4gIGdldCBzaG9ydE5hbWUgKCkge1xuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgIHJldHVybiB0aGlzLnN5c3RlbS5za2lsbE5hbWVcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubmFtZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xuICAgIGlmICgndXBkYXRlUm9sbCcgaW4gdGhpcy5zaGVldCkgcmV0dXJuIGF3YWl0IHRoaXMuc2hlZXQudXBkYXRlUm9sbChyb2xsKVxuICAgIGVsc2UgaWYgKCd1cGRhdGVSb2xsJyBpbiB0aGlzKSByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVSb2xsKHJvbGwpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc3RhdGljIGdldE5hbWVQYXJ0c1NwZWMgKHNraWxsTmFtZSwgc3BlY2lhbGl6YXRpb24pIHtcbiAgICBpZiAoIXNwZWNpYWxpemF0aW9uKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuYW1lOiBza2lsbE5hbWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uOiAnJyxcbiAgICAgICAgc2tpbGxOYW1lXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHNwZWNOYW1lUmVnZXggPSBuZXcgUmVnRXhwKFxuICAgICAgJ14oJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoc3BlY2lhbGl6YXRpb24pICsgJylcXFxccypcXFxcKCguKylcXFxcKSQnLFxuICAgICAgJ2knXG4gICAgKVxuICAgIGNvbnN0IG1hdGNoID0gc2tpbGxOYW1lLm1hdGNoKHNwZWNOYW1lUmVnZXgpXG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBzcGVjaWFsaXphdGlvbiA9IG1hdGNoWzFdXG4gICAgICBza2lsbE5hbWUgPSBtYXRjaFsyXVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknLFxuICAgICAgc3BlY2lhbGl6YXRpb24sXG4gICAgICBza2lsbE5hbWVcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0TmFtZVdpdGhvdXRTcGVjIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0gaW5zdGFuY2VvZiBDb0M3SXRlbSkge1xuICAgICAgaWYgKGl0ZW0uc3lzdGVtPy5wcm9wZXJ0aWVzPy5zcGVjaWFsICYmIHR5cGVvZiBpdGVtLnN5c3RlbS5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBpdGVtLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGl0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCAmJiB0eXBlb2YgaXRlbS5za2lsbE5hbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiBpdGVtLnNraWxsTmFtZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXRlbS5uYW1lXG4gIH1cblxuICBzdGF0aWMgaXNBbnlTcGVjIChpdGVtKSB7XG4gICAgaWYgKGl0ZW0udHlwZSAhPT0gJ3NraWxsJyB8fCAhaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCkge1xuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5yZXF1aXJlc25hbWUgfHwgaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucGlja25hbWVvbmx5KSB7XG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gW1xuICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJykudG9Mb3dlckNhc2UoKSxcbiAgICAgICdhbnknXG4gICAgXS5pbmNsdWRlcyhDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzZXMuc2tpbGwuZ3Vlc3NOYW1lUGFydHMoaXRlbS5uYW1lKS5za2lsbE5hbWUudG9Mb3dlckNhc2UoKSlcbiAgfVxuXG4gIGFzeW5jIGNoZWNrU2tpbGxQcm9wZXJ0aWVzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm5cbiAgICBjb25zdCBjaGVja2VkUHJvcHMgPSB7fVxuICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCkge1xuICAgICAgLy8gaWYgc2tpbGwgaXMgbm90IGEgc3BlY2lhbGlzYXRpb24gbWFrZSBpdCBhIHNwZWNpYWxpc2F0aW9uXG4gICAgICBpZiAoIXRoaXMuc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCkge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwgPSB0cnVlXG4gICAgICAgIGNoZWNrZWRQcm9wc1snc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbCddID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBza2lsbCBpcyBjb21iYXQgc2tpbGwgYW5kIG5vIHNwZWNpYWxpc2F0aW9uIHNldCB0aGVuIG1ha2UgaXQgYSBmaWdodGluZyggY2xvc2Vjb21iYXQpIHNraWxsXG4gICAgICBpZiAoXG4gICAgICAgICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nICYmXG4gICAgICAgICF0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm1cbiAgICAgICkge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID0gdHJ1ZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJ10gPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIC8vIGlmIHNraWxsIGlzIGNsb3NlIGNvbWJhdCB3aXRob3V0IHNwZWNpYWxpc2F0aW9uIG5hbWUgbWFrZSBzZXQgaXQgYWNjb3JkaW5nIHRvIHRoZSBmaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nICYmXG4gICAgICAgICghdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gfHwgdGhpcy5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPT09ICcnKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlnaHRpbmdTcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgfVxuXG4gICAgICAvLyBpZiBza2lsbCBpcyByYW5nZSBjb21iYXQgd2l0aG91dCBhIHNwZWNpYWxpc2F0aW9uIG5hbWUgbWFrZSBzZXQgaXQgYWNjb3JkaW5nIHRvIHRoZSBmaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSAmJlxuICAgICAgICAoIXRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uIHx8IHRoaXMuc3lzdGVtLnNwZWNpYWxpemF0aW9uID09PSAnJylcbiAgICAgICkge1xuICAgICAgICB0aGlzLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICBDT0M3LmZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWVcbiAgICAgICAgKVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5zcGVjaWFsaXphdGlvbiddID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgIENPQzcuZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nKSB7XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlnaHRpbmcgPSBmYWxzZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nJ10gPSBmYWxzZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICB0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0gPSBmYWxzZVxuICAgICAgICBjaGVja2VkUHJvcHNbJ3N5c3RlbS5wcm9wZXJ0aWVzLmZpcmVhcm0nXSA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKE9iamVjdC5rZXlzKGNoZWNrZWRQcm9wcykubGVuZ3RoID4gMCkge1xuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoY2hlY2tlZFByb3BzKVxuICAgIH1cblxuICAgIHJldHVybiBjaGVja2VkUHJvcHNcbiAgfVxuXG4gIGlzSW5jbHVkZWRJblNldCAoc2V0LCBwcm9wZXJ0eUlkKSB7XG4gICAgaWYgKCF0aGlzLnN5c3RlbVtzZXRdKSB0aGlzLnN5c3RlbVtzZXRdID0gW11cbiAgICBjb25zdCBwcm9wZXJ0eUluZGV4ID0gdGhpcy5zeXN0ZW1bc2V0XS5pbmRleE9mKHByb3BlcnR5SWQpXG4gICAgaWYgKHByb3BlcnR5SW5kZXggPiAtMSkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIGZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudCc6IHRydWUgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyB1bmZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd4cEVuYWJsZWQnKSB8fCBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFncykge1xuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudCc6IGZhbHNlIH0pXG4gICAgfVxuICB9XG5cbiAgZ2V0IGRldmVsb3BlbWVudEZsYWcgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEl0ZW1GbGFnKCdkZXZlbG9wZW1lbnQnKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlSXRlbUZsYWcgKGZsYWdOYW1lLCBlcmFzZUFkanVzdG1lbnQgPSB0cnVlKSB7XG4gICAgY29uc3QgZmxhZ1ZhbHVlID0gIXRoaXMuZ2V0SXRlbUZsYWcoZmxhZ05hbWUpXG4gICAgY29uc3QgbmFtZSA9IGBzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXG4gICAgaWYgKFxuICAgICAgKGZsYWdOYW1lID09PSAnb2NjdXBhdGlvbicgfHwgZmxhZ05hbWUgPT09ICdhcmNoZXR5cGUnKSAmJlxuICAgICAgIWZsYWdWYWx1ZSAmJlxuICAgICAgZXJhc2VBZGp1c3RtZW50XG4gICAgKSB7XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgIFtgc3lzdGVtLmFkanVzdG1lbnRzLiR7ZmxhZ05hbWV9YF06IG51bGwsXG4gICAgICAgIFtuYW1lXTogZmxhZ1ZhbHVlXG4gICAgICB9KVxuICAgIH0gZWxzZSBpZiAoZmxhZ05hbWUgPT09ICdkZXZlbG9wZW1lbnQnKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAneHBFbmFibGVkJykgfHwgZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IGZsYWdWYWx1ZSB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbFhwR2FpbkRpc2FibGVkJykpXG4gICAgICB9XG4gICAgfSBlbHNlIGF3YWl0IHRoaXMudXBkYXRlKHsgW25hbWVdOiBmbGFnVmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIHNldEl0ZW1GbGFnIChmbGFnTmFtZSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgW2BzeXN0ZW0uZmxhZ3MuJHtmbGFnTmFtZX1gXTogdHJ1ZSB9KVxuICB9XG5cbiAgYXN5bmMgdW5zZXRJdGVtRmxhZyAoZmxhZ05hbWUsIGVyYXNlQWRqdXN0bWVudCA9IHRydWUpIHtcbiAgICBjb25zdCBuYW1lID0gYHN5c3RlbS5mbGFncy4ke2ZsYWdOYW1lfWBcbiAgICBpZiAoXG4gICAgICAoZmxhZ05hbWUgPT09ICdvY2N1cGF0aW9uJyB8fCBmbGFnTmFtZSA9PT0gJ2FyY2hldHlwZScpICYmXG4gICAgICBlcmFzZUFkanVzdG1lbnRcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgW2BzeXN0ZW0uYWRqdXN0bWVudHMuJHtmbGFnTmFtZX1gXTogbnVsbCxcbiAgICAgICAgW25hbWVdOiBmYWxzZVxuICAgICAgfSlcbiAgICB9IGVsc2UgYXdhaXQgdGhpcy51cGRhdGUoeyBbbmFtZV06IGZhbHNlIH0pXG4gIH1cblxuICBnZXRJdGVtRmxhZyAoZmxhZ05hbWUpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmZsYWdzKSB7XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncyA9IHt9XG4gICAgICB0aGlzLnN5c3RlbS5mbGFncy5sb2NrZWQgPSB0cnVlXG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MnOiB7fSB9KVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV0pIHJldHVybiBmYWxzZVxuICAgIHJldHVybiB0aGlzLnN5c3RlbS5mbGFnc1tmbGFnTmFtZV1cbiAgfVxuXG4gIGdldCB1c2VzQWx0ZXJuYXRpdmVTa2lsbCAoKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMudHlwZSA9PT0gJ3dlYXBvbicgJiZcbiAgICAgICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzPy5hdXRvID09PSB0cnVlIHx8XG4gICAgICAgIHRoaXMuc3lzdGVtLnByb3BlcnRpZXM/LmJyc3QgPT09IHRydWUgfHxcbiAgICAgICAgdGhpcy5zeXN0ZW0ucHJvcGVydGllcz8udGhyb3duID09PSB0cnVlKVxuICAgIClcbiAgfVxuXG4gIGdldCBtYXhVc2VzUGVyUm91bmQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IG11bHRpU2hvdCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXgpXG4gICAgaWYgKGlzTmFOKG11bHRpU2hvdCkpIHJldHVybiAwXG4gICAgcmV0dXJuIG11bHRpU2hvdFxuICB9XG5cbiAgZ2V0IHVzZXNQZXJSb3VuZCAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgY29uc3Qgc2luZ2xlU2hvdCA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5ub3JtYWwpXG4gICAgaWYgKGlzTmFOKHNpbmdsZVNob3QpKSByZXR1cm4gMFxuICAgIHJldHVybiBzaW5nbGVTaG90XG4gIH1cblxuICBnZXQgdXNlc1BlclJvdW5kU3RyaW5nICgpIHtcbiAgICBsZXQgdXNlc1BlclJvdW5kXG4gICAgaWYgKHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5ub3JtYWwpIHtcbiAgICAgIHVzZXNQZXJSb3VuZCA9IHRoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5ub3JtYWxcbiAgICB9IGVsc2Uge1xuICAgICAgdXNlc1BlclJvdW5kID0gJzEnXG4gICAgfVxuICAgIGlmICh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQubWF4KSB7XG4gICAgICB1c2VzUGVyUm91bmQgKz0gYCgke3RoaXMuc3lzdGVtLnVzZXNQZXJSb3VuZC5tYXh9KWBcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYXV0bykge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQXV0bycpfWBcbiAgICB9XG4gICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuYnJzdCkge1xuICAgICAgdXNlc1BlclJvdW5kICs9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uQnJzdCcpfWBcbiAgICAgIGlmICh0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3QpIHtcbiAgICAgICAgdXNlc1BlclJvdW5kICs9IGAoJHt0aGlzLnN5c3RlbS51c2VzUGVyUm91bmQuYnVyc3R9KWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdXNlc1BlclJvdW5kXG4gIH1cblxuICBnZXQgbXVsdGlwbGVTaG90cyAoKSB7XG4gICAgaWYgKHRoaXMudHlwZSAhPT0gJ3dlYXBvbicpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMubWF4VXNlc1BlclJvdW5kIDw9IDEpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IHNpbmdsZVNob3QgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy51c2VzUGVyUm91bmQpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgZ2V0IGJhc2VSYW5nZSAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLnJhbmdlLm5vcm1hbC52YWx1ZSlcbiAgfVxuXG4gIGdldCBsb25nUmFuZ2UgKCkge1xuICAgIHJldHVybiBwYXJzZUludCh0aGlzLnN5c3RlbS5yYW5nZS5sb25nLnZhbHVlKVxuICB9XG5cbiAgZ2V0IGV4dHJlbWVSYW5nZSAoKSB7XG4gICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuc3lzdGVtLnJhbmdlLmV4dHJlbWUudmFsdWUpXG4gIH1cblxuICBnZXQgc2tpbGxQcm9wZXJ0aWVzICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gW11cblxuICAgIGNvbnN0IHNraWxsUHJvcGVydGllcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICBpZiAodGhpcy5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlKSB7XG4gICAgICAgIHNraWxsUHJvcGVydGllcy5wdXNoKGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSkpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBza2lsbFByb3BlcnRpZXNcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjYWxjdWxhdGVCYXNlIChhY3RvciwgZGF0YSkge1xuICAgIGlmIChkYXRhLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBudWxsXG4gICAgaWYgKFN0cmluZyhkYXRhLnN5c3RlbS5iYXNlKS5pbmNsdWRlcygnQCcpKSB7XG4gICAgICBjb25zdCBwYXJzZWQgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gICAgICAgIGlmIChrZXkuc3RhcnRzV2l0aCgnQCcpICYmIHZhbHVlLnN0YXJ0c1dpdGgoJ3RoaXMuYWN0b3IuJykpIHtcbiAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBnZXRQcm9wZXJ0eShhY3RvciwgdmFsdWUuc3Vic3RyaW5nKDExKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IHZhbHVlXG4gICAgICB0cnkge1xuICAgICAgICB2YWx1ZSA9IE1hdGguZmxvb3IoXG4gICAgICAgICAgbmV3IFJvbGwoZGF0YS5zeXN0ZW0uYmFzZSwgcGFyc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICBtYXhpbWl6ZTogdHJ1ZVxuICAgICAgICAgIH0pLnRvdGFsXG4gICAgICAgIClcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICB2YWx1ZSA9IDBcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH1cbiAgICByZXR1cm4gIWlzTmFOKHBhcnNlSW50KGRhdGEuc3lzdGVtLmJhc2UpKSA/IHBhcnNlSW50KGRhdGEuc3lzdGVtLmJhc2UpIDogbnVsbFxuICB9XG5cbiAgZ2V0IF9iYXNlICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnc2tpbGwnKSByZXR1cm4gW251bGwsIGZhbHNlXVxuICAgIGlmICh0eXBlb2YgdGhpcy5zeXN0ZW0uYmFzZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbdGhpcy5zeXN0ZW0uYmFzZSwgZmFsc2VdXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3lzdGVtLmJhc2UuaW5jbHVkZXMoJ0AnKSkge1xuICAgICAgY29uc3QgcGFyc2VkID0ge31cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0KSkge1xuICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgcGFyc2VkW2tleS5zdWJzdHJpbmcoMSldID0gZ2V0UHJvcGVydHkodGhpcywgdmFsdWUuc3Vic3RyaW5nKDUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsZXQgdmFsdWVcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhbHVlID0gTWF0aC5mbG9vcihcbiAgICAgICAgICBuZXcgUm9sbCh0aGlzLnN5c3RlbS5iYXNlLCBwYXJzZWQpLmV2YWx1YXRlKHtcbiAgICAgICAgICAgIG1heGltaXplOiB0cnVlXG4gICAgICAgICAgfSkudG90YWxcbiAgICAgICAgKVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHZhbHVlID0gMFxuICAgICAgfVxuXG4gICAgICByZXR1cm4gW3ZhbHVlLCB0cnVlXVxuICAgIH1cbiAgICByZXR1cm4gW1xuICAgICAgIWlzTmFOKHBhcnNlSW50KHRoaXMuc3lzdGVtLmJhc2UpKVxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmJhc2UpXG4gICAgICAgIDogbnVsbCxcbiAgICAgIGZhbHNlXG4gICAgXVxuICB9XG5cbiAgYXN5bmMgYXN5bmNCYXNlICgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5fYmFzZVxuICAgIGlmIChlWzFdKSB7XG4gICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgIGBbQ09DN10gKCR7dGhpcy5wYXJlbnQ/Lm5hbWV9KSBFdmFsdWF0aW5nIHNraWxsICR7dGhpcy5uYW1lfToke3RoaXMuc3lzdGVtLmJhc2V9IHRvICR7ZVswXX1gXG4gICAgICApXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmFzZSc6IGVbMF0gfSlcbiAgICB9XG4gICAgcmV0dXJuIGVbMF1cbiAgfVxuXG4gIGdldCBiYXNlICgpIHtcbiAgICBjb25zdCBlID0gdGhpcy5fYmFzZVxuICAgIGlmIChlWzFdKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uYmFzZSc6IGVbMF0gfSlcbiAgICB9XG4gICAgcmV0dXJuIGVbMF1cbiAgfVxuXG4gIGdldEJ1bGxldExlZnQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGlmICghdGhpcy5zeXN0ZW0uYW1tbykge1xuICAgICAgdGhpcy5zZXRCdWxsZXRzKDApXG4gICAgICByZXR1cm4gMFxuICAgIH1cbiAgICByZXR1cm4gdGhpcy5zeXN0ZW0uYW1tb1xuICB9XG5cbiAgYXN5bmMgcmVsb2FkICgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBtYXhCdWxsZXQgPSB0aGlzLnN5c3RlbS5idWxsZXRzXG4gICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmJ1bGxldHMpXG4gICAgICA6IDFcbiAgICBhd2FpdCB0aGlzLnNldEJ1bGxldHMobWF4QnVsbGV0KVxuICB9XG5cbiAgYXN5bmMgc2V0QnVsbGV0cyAoYnVsbGV0cykge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hbW1vJzogYnVsbGV0cyB8fCAwIH0pXG4gIH1cblxuICBhc3luYyBhZGRCdWxsZXQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICd3ZWFwb24nKSByZXR1cm4gbnVsbFxuICAgIGNvbnN0IGJ1bGxldHMgPSBhd2FpdCB0aGlzLmdldEJ1bGxldExlZnQoKVxuICAgIGNvbnN0IG1heEJ1bGxldHMgPSB0aGlzLnN5c3RlbS5idWxsZXRzXG4gICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmJ1bGxldHMpXG4gICAgICA6IDFcbiAgICBpZiAoYnVsbGV0cyArIDEgPj0gbWF4QnVsbGV0cykgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKG1heEJ1bGxldHMpXG4gICAgZWxzZSBhd2FpdCB0aGlzLnNldEJ1bGxldHMoYnVsbGV0cyArIDEpXG4gIH1cblxuICBhc3luYyBzaG9vdEJ1bGxldHMgKHgpIHtcbiAgICBpZiAodGhpcy50eXBlICE9PSAnd2VhcG9uJykgcmV0dXJuIG51bGxcbiAgICBjb25zdCBidWxsZXRzID0gYXdhaXQgdGhpcy5nZXRCdWxsZXRMZWZ0KClcbiAgICBpZiAoeCA+IGJ1bGxldHMpIGF3YWl0IHRoaXMuc2V0QnVsbGV0cygwKVxuICAgIGVsc2UgYXdhaXQgdGhpcy5zZXRCdWxsZXRzKGJ1bGxldHMgLSB4KVxuICB9XG5cbiAgc3RhdGljIG1lcmdlT3B0aW9uYWxTa2lsbHMgKHNraWxsTGlzdCwgb3B0aW9ucykge1xuICAgIGNvbnN0IGpvaW50QXJyYXkgPSBza2lsbExpc3QuY29uY2F0KG9wdGlvbnMpXG4gICAgcmV0dXJuIGpvaW50QXJyYXlcbiAgICAgIC5yZWR1Y2UoKG5ld0FycmF5LCBpdGVtKSA9PiB7XG4gICAgICAgIC8vIElmIHNraWxsIGlzIG5vdCBhIGdlbmVyaWMgc3BlYyBhbmQgaXMgYWxyZWFkeSBpbmNsdWRlZCB3ZSBkb24ndCBhZGQgaXRlbVxuICAgICAgICBpZiAoXG4gICAgICAgICAgIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSAmJlxuICAgICAgICAgIG5ld0FycmF5LmZpbmQoc2tpbGwgPT4gc2tpbGwubmFtZSA9PT0gaXRlbS5uYW1lKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm4gbmV3QXJyYXlcbiAgICAgICAgfVxuICAgICAgICAvLyBFbHNlIGl0ZW0gaXMgYWRkZWRcbiAgICAgICAgcmV0dXJuIFsuLi5uZXdBcnJheSwgaXRlbV1cbiAgICAgIH0sIFtdKVxuICAgICAgLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICB9XG5cbiAgLyoqIFRPRE8gOiByaWVuIGEgZmFpcmUgaWNpICEhXG4gICAqIEdldCB0aGUgQWN0b3Igd2hpY2ggaXMgdGhlIGF1dGhvciBvZiBhIGNoYXQgY2FyZFxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBjYXJkICAgIFRoZSBjaGF0IGNhcmQgYmVpbmcgdXNlZFxuICAgKiBAcmV0dXJuIHtBY3RvcnxudWxsfSAgICAgICAgIFRoZSBBY3RvciBlbnRpdHkgb3IgbnVsbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3RhdGljIF9nZXRDaGF0Q2FyZEFjdG9yIChjYXJkKSB7XG4gICAgLy8gQ2FzZSAxIC0gYSBzeW50aGV0aWMgYWN0b3IgZnJvbSBhIFRva2VuXG4gICAgY29uc3QgdG9rZW5LZXkgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgIGlmICh0b2tlbktleSkge1xuICAgICAgY29uc3QgW3NjZW5lSWQsIHRva2VuSWRdID0gdG9rZW5LZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICAgIGlmICghc2NlbmUpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IFRva2VuKHRva2VuRGF0YSlcbiAgICAgICAgcmV0dXJuIHRva2VuLmFjdG9yXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2FzZSAyIC0gdXNlIEFjdG9yIElEIGRpcmVjdG9yeVxuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgIHJldHVybiBnYW1lLmFjdG9ycy5nZXQoYWN0b3JJZCkgfHwgbnVsbFxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIENoYXQgTWVzc2FnZSBIZWxwZXJzICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogUHJlcGFyZSBhbiBvYmplY3Qgb2YgY2hhdCBkYXRhIHVzZWQgdG8gZGlzcGxheSBhIGNhcmQgZm9yIHRoZSBJdGVtIGluIHRoZSBjaGF0IGxvZ1xuICAgKiBAcGFyYW0ge09iamVjdH0gaHRtbE9wdGlvbnMgICAgT3B0aW9ucyB1c2VkIGJ5IHRoZSBUZXh0RWRpdG9yLmVucmljaEhUTUwgZnVuY3Rpb25cbiAgICogQHJldHVybiB7T2JqZWN0fSAgICAgICAgICAgICAgIEFuIG9iamVjdCBvZiBjaGF0IGRhdGEgdG8gcmVuZGVyXG4gICAqL1xuICBnZXRDaGF0RGF0YSAoaHRtbE9wdGlvbnMgPSB7fSkge1xuICAgIC8vIEZvdW5kcnlWVFQgdjEwXG4gICAgaHRtbE9wdGlvbnMuYXN5bmMgPSBmYWxzZVxuICAgIGNvbnN0IGRhdGEgPSBkdXBsaWNhdGUodGhpcy5zeXN0ZW0pXG4gICAgLy8gRml4IDogZGF0YSBjYW4gaGF2ZSBkZXNjcmlwdGlvbiBkaXJlY3RseSBpbiBmaWVsZCwgbm90IHVuZGVyIHZhbHVlLlxuICAgIGlmICh0eXBlb2YgZGF0YS5kZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24gPSB7XG4gICAgICAgIHZhbHVlOiBkYXRhLmRlc2NyaXB0aW9uLFxuICAgICAgICBzcGVjaWFsOiAnJ1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGRhdGEuZGVzY3JpcHRpb24udmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gJydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWwgPSAnJ1xuICAgIH1cbiAgICBjb25zdCBsYWJlbHMgPSBbXVxuXG4gICAgLy8gUmljaCB0ZXh0IGRlc2NyaXB0aW9uXG4gICAgZGF0YS5kZXNjcmlwdGlvbi52YWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIGRhdGEuZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICBodG1sT3B0aW9uc1xuICAgIClcbiAgICBkYXRhLmRlc2NyaXB0aW9uLnZhbHVlID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGRhdGEuZGVzY3JpcHRpb24udmFsdWUpXG4gICAgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsLFxuICAgICAgaHRtbE9wdGlvbnNcbiAgICApXG4gICAgZGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGRhdGEuZGVzY3JpcHRpb24uc3BlY2lhbClcblxuICAgIC8vIEl0ZW0gdHlwZSBzcGVjaWZpYyBwcm9wZXJ0aWVzXG4gICAgY29uc3QgcHJvcHMgPSBbXVxuICAgIGNvbnN0IGZuID0gdGhpc1tgXyR7dGhpcy50eXBlfUNoYXREYXRhYF1cbiAgICBpZiAoZm4pIGZuLmJpbmQodGhpcykoZGF0YSwgbGFiZWxzLCBwcm9wcywgaHRtbE9wdGlvbnMpXG5cbiAgICBpZiAodGhpcy50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LnNraWxsUHJvcGVydGllcykpIHtcbiAgICAgICAgaWYgKHRoaXMuc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZSkgcHJvcHMucHVzaCh2YWx1ZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgcHJvcGVydGllcyBhbmQgcmV0dXJuXG4gICAgZGF0YS5wcm9wZXJ0aWVzID0gcHJvcHMuZmlsdGVyKHAgPT4gISFwKVxuICAgIGRhdGEubGFiZWxzID0gbGFiZWxzXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIF93ZWFwb25DaGF0RGF0YSAoZGF0YSwgbGFiZWxzLCBwcm9wcykge1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcud2VhcG9uUHJvcGVydGllcykpIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5wcm9wZXJ0aWVzW2tleV0gPT09IHRydWUpIHByb3BzLnB1c2godmFsdWUpXG4gICAgfVxuXG4gICAgbGV0IHNraWxsTGFiZWwgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGwnKVxuICAgIGxldCBza2lsbE5hbWUgPSAnJ1xuICAgIGxldCBmb3VuZCA9IGZhbHNlXG4gICAgaWYgKHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvcj8uaXRlbXMuZ2V0KHRoaXMuc3lzdGVtLnNraWxsLm1haW4uaWQpXG4gICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgc2tpbGxOYW1lICs9IENvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbClcbiAgICAgICAgZm91bmQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXNlc0FsdGVybmF0aXZlU2tpbGwgJiYgdGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCkge1xuICAgICAgc2tpbGxMYWJlbCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ta2lsbHMnKVxuICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yPy5pdGVtcy5nZXQodGhpcy5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZClcbiAgICAgIGlmIChza2lsbCkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke0NvQzdJdGVtLmdldE5hbWVXaXRob3V0U3BlYyhza2lsbCl9YFxuICAgICAgICBmb3VuZCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWZvdW5kKSB7XG4gICAgICBza2lsbE5hbWUgPSB0aGlzLnN5c3RlbS5za2lsbC5tYWluLm5hbWVcbiAgICAgIGlmICh0aGlzLnVzZXNBbHRlcm5hdGl2ZVNraWxsICYmIHRoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZSkge1xuICAgICAgICBza2lsbE5hbWUgKz0gYC8ke3RoaXMuc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZX1gXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHNraWxsTmFtZSkge1xuICAgICAgbGFiZWxzLnB1c2goe1xuICAgICAgICBuYW1lOiBza2lsbExhYmVsLFxuICAgICAgICB2YWx1ZTogc2tpbGxOYW1lXG4gICAgICB9KVxuICAgIH1cblxuICAgIGxhYmVscy5wdXNoKHtcbiAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25Vc2VzUGVyUm91bmQnKSxcbiAgICAgIHZhbHVlOiB0aGlzLnVzZXNQZXJSb3VuZFN0cmluZ1xuICAgIH0pXG5cbiAgICBsYWJlbHMucHVzaCh7XG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2VhcG9uTWFsZnVuY3Rpb24nKSxcbiAgICAgIHZhbHVlOiB0aGlzLnN5c3RlbS5tYWxmdW5jdGlvbiA/IHRoaXMuc3lzdGVtLm1hbGZ1bmN0aW9uIDogJy0nXG4gICAgfSlcblxuICAgIGlmICh0aGlzLnN5c3RlbS5idWxsZXRzKSB7XG4gICAgICBsYWJlbHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25CdWxsZXRzSW5NYWcnKSxcbiAgICAgICAgdmFsdWU6IHRoaXMuc3lzdGVtLmJ1bGxldHNcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgY2FuQmVQdXNoZWQgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgPT09ICdza2lsbCcgJiYgdGhpcy5zeXN0ZW0ucHJvcGVydGllcy5wdXNoKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGltcGFsZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnByb3BlcnRpZXMuaW1wbFxuICB9XG5cbiAgZ2V0IGlzRG9kZ2UgKCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiAoXG4gICAgICB0aGlzLm5hbWUudG9Mb3dlckNhc2UoKSA9PT1cbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmRvZGdlJykudG9Mb3dlckNhc2UoKVxuICAgIClcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEFjdG9yLCBBdWRpb0hlbHBlciwgQ2hhdE1lc3NhZ2UsIENPTkZJRywgQ09OU1QsIGR1cGxpY2F0ZSwgZm91bmRyeSwgZnJvbVV1aWQsIGdhbWUsIGdldENvbXB1dGVkU3R5bGUsIEl0ZW0sIG1lcmdlT2JqZWN0LCByZW5kZXJUZW1wbGF0ZSwgVG9rZW4sIHVpICovXG5pbXBvcnQgeyBDb0M3RGljZSB9IGZyb20gJy4vZGljZS5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgQ29DN1JvbGwgfSBmcm9tICcuL2NoYXQvaGVscGVyLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDaGVjayB7XG4gIGNvbnN0cnVjdG9yIChcbiAgICBhY3RvciA9IG51bGwsXG4gICAgc2tpbGwgPSBudWxsLFxuICAgIGl0ZW0gPSBudWxsLFxuICAgIGRpY2VNb2QgPSAwLFxuICAgIGRpZmZpY3VsdHkgPSBudWxsLFxuICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDAsXG4gICAgZmxhdERpY2VNb2RpZmllciA9IDBcbiAgKSB7XG4gICAgdGhpcy5hY3RvciA9IGFjdG9yXG4gICAgdGhpcy5za2lsbCA9IHNraWxsXG4gICAgdGhpcy5pdGVtID0gaXRlbVxuICAgIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICB0aGlzLnJhd1ZhbHVlID0gMCAvLyB2YWx1ZSBuZWVkZWQgYmVmb3JlIGRpZmZpY3VsdHlcbiAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IG51bGxcbiAgICB0aGlzLnJlZmVyZW5jZU1lc3NhZ2VJZCA9IG51bGxcbiAgICB0aGlzLnB1c2hpbmcgPSBmYWxzZVxuICAgIHRoaXMuZmxhdERpY2VNb2RpZmllciA9IGZsYXREaWNlTW9kaWZpZXJcbiAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciA9IGZsYXRUaHJlc2hvbGRNb2RpZmllclxuXG4gICAgaWYgKGRpZmZpY3VsdHkgPT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGlzVW5rbm93biA9XG4gICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RlZmF1bHRDaGVja0RpZmZpY3VsdHknKSA9PT0gJ3Vua25vd24nXG4gICAgICB0aGlzLmRpZmZpY3VsdHkgPSBpc1Vua25vd25cbiAgICAgICAgPyBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnVua25vd25cbiAgICAgICAgOiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGNhcmRUeXBlICgpIHtcbiAgICByZXR1cm4gJ3JvbGxDYXJkJ1xuICB9XG5cbiAgc3RhdGljIGdldCBkaWZmaWN1bHR5TGV2ZWwgKCkge1xuICAgIHJldHVybiB7XG4gICAgICB1bmtub3duOiAtMSxcbiAgICAgIHJlZ3VsYXI6IDEsXG4gICAgICBoYXJkOiAyLFxuICAgICAgZXh0cmVtZTogMyxcbiAgICAgIGNyaXRpY2FsOiA0LFxuICAgICAgaW1wb3NzaWJsZTogOVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgc3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZnVtYmxlOiAtOTksXG4gICAgICBmYWlsdXJlOiAwLFxuICAgICAgcmVndWxhcjogMSxcbiAgICAgIGhhcmQ6IDIsXG4gICAgICBleHRyZW1lOiAzLFxuICAgICAgY3JpdGljYWw6IDRcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjaGFyYWN0ZXJpc3RpYzogJ2NoYXJhY3RlcmlzdGljJyxcbiAgICAgIGF0dHJpYnV0ZTogJ2F0dHJpYnV0ZScsXG4gICAgICBza2lsbDogJ2l0ZW0nLFxuICAgICAgaXRlbTogJ2l0ZW0nLFxuICAgICAgdmFsdWU6ICd2YWx1ZSdcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZGlmZmljdWx0eVN0cmluZyAoZGlmZmljdWx0eUxldmVsKSB7XG4gICAgc3dpdGNoIChcbiAgICAgICFpc05hTihOdW1iZXIoZGlmZmljdWx0eUxldmVsKSlcbiAgICAgICAgPyBOdW1iZXIoZGlmZmljdWx0eUxldmVsKVxuICAgICAgICA6IGRpZmZpY3VsdHlMZXZlbFxuICAgICkge1xuICAgICAgY2FzZSAnPyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5rbm93bkRpZmZpY3VsdHknKVxuICAgICAgY2FzZSAnKyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGFyZERpZmZpY3VsdHknKVxuICAgICAgY2FzZSAnKysnOlxuICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgJysrKyc6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgIGNhc2UgMDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Vbmtub3duRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5SZWd1bGFyRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lRGlmZmljdWx0eScpXG4gICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JpdGljYWxEaWZmaWN1bHR5JylcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICB9XG5cbiAgZ2V0IHJhd1ZhbHVlICgpIHtcbiAgICAvLyBpZiAoIXRoaXMuYWN0b3IgfHwgIXRoaXMuYWN0b3IuaWQpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXRoaXMuX3Jhd1ZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICB0aGlzLnJhd1ZhbHVlID1cbiAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWVcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLnNraWxsKSB0aGlzLnJhd1ZhbHVlID0gdGhpcy5za2lsbC52YWx1ZVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS52YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5fcmF3VmFsdWUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXIgJiZcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICAgKSB7XG4gICAgICAgIGlmICh0aGlzLl9yYXdWYWx1ZSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyIDwgMSkgcmV0dXJuIDFcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jhd1ZhbHVlICsgdGhpcy5mbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLl9yYXdWYWx1ZVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgcmF3VmFsdWUgKHgpIHtcbiAgICB0aGlzLl9yYXdWYWx1ZSA9IHhcbiAgfVxuXG4gIHNldCB1dWlkICh4KSB7XG4gICAgdGhpcy5fdXVpZCA9IHhcbiAgfVxuXG4gIGdldCB1dWlkICgpIHtcbiAgICBpZiAoIXRoaXMuX3V1aWQpIHRoaXMuX3V1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgIHJldHVybiB0aGlzLl91dWlkXG4gIH1cblxuICBnZXQgaGFzQ2FyZCAoKSB7XG4gICAgY29uc3QgY2hhdENhcmQgPSB1aS5jaGF0LmNvbGxlY3Rpb24uZmlsdGVyKG1lc3NhZ2UgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgdGhpcy51dWlkID09PSBtZXNzYWdlLmdldEZsYWcoJ0NvQzcnLCAndXVpZCcpICYmXG4gICAgICAgIENvQzdDaGVjay5jYXJkVHlwZSA9PT0gbWVzc2FnZS5nZXRGbGFnKCdDb0M3JywgJ3R5cGUnKVxuICAgICAgKVxuICAgIH0pXG4gICAgaWYgKGNoYXRDYXJkLmxlbmd0aCA+IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgcmF3VmFsdWVTdHJpbmcgKCkge1xuICAgIGlmICghdGhpcy5fcmF3VmFsdWUpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoXG4gICAgICB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllciAmJlxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYWxsb3dGbGF0VGhyZXNob2xkTW9kaWZpZXInKVxuICAgICkge1xuICAgICAgaWYgKHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyIDwgMCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmF3VmFsdWUudG9TdHJpbmcoKSArIHRoaXMuZmxhdFRocmVzaG9sZE1vZGlmaWVyLnRvU3RyaW5nKClcbiAgICAgIH1cbiAgICAgIHJldHVybiAoXG4gICAgICAgIHRoaXMuX3Jhd1ZhbHVlLnRvU3RyaW5nKCkgKyAnKycgKyB0aGlzLmZsYXRUaHJlc2hvbGRNb2RpZmllci50b1N0cmluZygpXG4gICAgICApXG4gICAgfSBlbHNlIHJldHVybiB0aGlzLl9yYXdWYWx1ZS50b1N0cmluZygpXG4gIH1cblxuICBnZXQgY3JpdGljYWxUaHJlc2hvbGQgKCkge1xuICAgIHJldHVybiAxXG4gIH1cblxuICBnZXQgcmVndWxhclRocmVzaG9sZCAoKSB7XG4gICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcbiAgICAgIGlmICh0aGlzLnJhd1ZhbHVlID49IDEwMCkgcmV0dXJuIDk5XG4gICAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5yYXdWYWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBoYXJkVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5yYXdWYWx1ZSAvIDIpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBleHRyZW1lVGhyZXNob2xkICgpIHtcbiAgICBpZiAodGhpcy5yYXdWYWx1ZSkgcmV0dXJuIE1hdGguZmxvb3IodGhpcy5yYXdWYWx1ZSAvIDUpXG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBmdW1ibGVUaHJlc2hvbGQgKCkge1xuICAgIGlmICh0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGlmICh0aGlzLmRpZmZpY3VsdHkgPj0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuZXh0cmVtZVRocmVzaG9sZCA8IDUwID8gOTYgOiAxMDBcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRpZmZpY3VsdHkgPj0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGFyZFRocmVzaG9sZCA8IDUwID8gOTYgOiAxMDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucmF3VmFsdWUgPCA1MCA/IDk2IDogMTAwXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc3VjY2VzVGhyZXNob2xkICgpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMuZGlmZmljdWx0eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHN3aXRjaCAodGhpcy5kaWZmaWN1bHR5KSB7XG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lOlxuICAgICAgICAgIHJldHVybiB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQ6XG4gICAgICAgICAgcmV0dXJuIHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcjpcbiAgICAgICAgICByZXR1cm4gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5jcml0aWNhbFRocmVzaG9sZFxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93bjpcbiAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gdGhpcy5yYXdWYWx1ZVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgZ2V0IGRpZmZpY3VsdHlTdHJpbmcgKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5kaWZmaWN1bHR5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgc3dpdGNoICh0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWU6XG4gICAgICAgICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXh0cmVtZURpZmZpY3VsdHknKVxuICAgICAgICBjYXNlIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZDpcbiAgICAgICAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlJlZ3VsYXJEaWZmaWN1bHR5JylcbiAgICAgICAgY2FzZSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNyaXRpY2FsRGlmZmljdWx0eScpXG4gICAgICAgIGNhc2UgQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duOlxuICAgICAgICAgIHJldHVybiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlVua25vd25EaWZmaWN1bHR5JylcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gJydcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICBnZXQgbW9kaWZpZWRSZXN1bHQgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodHlwZW9mIHRoaXMuX21vZGlmaWVkUmVzdWx0ICE9PSAndW5kZWZpbmVkJykgcmV0dXJuIHRoaXMuX21vZGlmaWVkUmVzdWx0XG4gICAgaWYgKHRoaXMuZmxhdERpY2VNb2RpZmllcikge1xuICAgICAgY29uc3QgbW9kaWZpZWQgPSB0aGlzLmRpY2VzLnRvdGFsICsgdGhpcy5mbGF0RGljZU1vZGlmaWVyXG4gICAgICBpZiAobW9kaWZpZWQgPCAxKSByZXR1cm4gMVxuICAgICAgaWYgKG1vZGlmaWVkID4gMTAwKSByZXR1cm4gMTAwXG4gICAgICByZXR1cm4gbW9kaWZpZWRcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZGljZXMudG90YWxcbiAgfVxuXG4gIHNldCBtb2RpZmllZFJlc3VsdCAoeCkge1xuICAgIHRoaXMuX21vZGlmaWVkUmVzdWx0ID0geFxuICB9XG5cbiAgZ2V0IGZsYXREaWNlTW9kaWZpZXJTdHJpbmcgKCkge1xuICAgIGlmICghdGhpcy5mbGF0RGljZU1vZGlmaWVyKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLmZsYXREaWNlTW9kaWZpZXIgPiAwKSByZXR1cm4gYCske3RoaXMuZmxhdERpY2VNb2RpZmllcn1gXG4gICAgcmV0dXJuIHRoaXMuZmxhdERpY2VNb2RpZmllci50b1N0cmluZygpXG4gIH1cblxuICBnZXQgaXNGdW1ibGUgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5tb2RpZmllZFJlc3VsdCA+PSB0aGlzLmZ1bWJsZVRocmVzaG9sZFxuICB9XG5cbiAgZ2V0IGlzQ3JpdGljYWwgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5tb2RpZmllZFJlc3VsdCA9PT0gMVxuICB9XG5cbiAgZ2V0IGlzRXh0cmVtZVN1Y2Nlc3MgKCkge1xuICAgIGlmICh0aGlzLnN0YW5kYnkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5zdWNjZXNzTGV2ZWwgPj0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lXG4gIH1cblxuICBnZXQgcGFzc2VkICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMubHVja1NwZW50KSByZXR1cm4gdGhpcy5kaWZmaWN1bHR5IDw9IHRoaXMuc3VjY2Vzc0xldmVsXG4gICAgcmV0dXJuIHRoaXMuc3VjY2VzVGhyZXNob2xkID49IHRoaXMubW9kaWZpZWRSZXN1bHQgfHwgdGhpcy5pc0NyaXRpY2FsXG4gIH1cblxuICBnZXQgZmFpbGVkICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuICF0aGlzLnBhc3NlZFxuICB9XG5cbiAgZ2V0IGlzU2ltcGxlUm9sbCAoKSB7XG4gICAgcmV0dXJuIHR5cGVvZiB0aGlzLnJhd1ZhbHVlID09PSAndW5kZWZpbmVkJ1xuICB9XG5cbiAgZ2V0IGhhc0JvbnVzICgpIHtcbiAgICBpZiAodGhpcy5kaWNlTW9kaWZpZXIgJiYgdGhpcy5kaWNlTW9kaWZpZXIgPiAwKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgZ2V0IGhhc1BlbmFsdHkgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciA8IDApIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgaGFzTW9kaWZpZXIgKCkge1xuICAgIGlmICh0aGlzLmRpY2VNb2RpZmllciAmJiB0aGlzLmRpY2VNb2RpZmllciAhPT0gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBkaWNlTW9kaWZpZXIgKCkge1xuICAgIGlmICh0aGlzLl9kaWNlTW9kaWZpZXIpIHJldHVybiB0aGlzLl9kaWNlTW9kaWZpZXJcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgc2V0IGRpY2VNb2RpZmllciAoeCkge1xuICAgIHRoaXMuX2RpY2VNb2RpZmllciA9IHBhcnNlSW50KHgpXG4gIH1cblxuICBnZXQgbmFtZSAoKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5zaG9ydE5hbWVcbiAgICAgIGlmICh0aGlzLml0ZW0pIHJldHVybiB0aGlzLml0ZW0ubmFtZVxuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyh0aGlzLmNoYXJhY3RlcmlzdGljKT8ubGFiZWxcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdsY2snKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkx1Y2snKVxuICAgICAgICBpZiAodGhpcy5hdHRyaWJ1dGUgPT09ICdzYW4nKSByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eScpXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBnZXQgc2hvcnROYW1lICgpIHtcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuc2tpbGwpIHJldHVybiB0aGlzLnNraWxsLnNob3J0TmFtZVxuICAgICAgaWYgKHRoaXMuaXRlbSkgcmV0dXJuIHRoaXMuaXRlbS5uYW1lXG4gICAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5nZXRDaGFyYWN0ZXJpc3RpY05hbWVzKHRoaXMuY2hhcmFjdGVyaXN0aWMpPy5zaG9ydFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ2xjaycpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIGlmICh0aGlzLmF0dHJpYnV0ZSA9PT0gJ3NhbicpIHJldHVybiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJylcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCBmdWxsTmFtZSAoKSB7XG4gICAgY29uc3QgZGlmZmljdWx0eSA9XG4gICAgICB0aGlzLl9kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgICAgPyBmYWxzZVxuICAgICAgICA6IENvQzdDaGVjay5kaWZmaWN1bHR5U3RyaW5nKHRoaXMuX2RpZmZpY3VsdHkpXG4gICAgY29uc3QgbW9kaWZpZXIgPVxuICAgICAgdGhpcy5fZGljZU1vZGlmaWVyID4gMFxuICAgICAgICA/IGArJHt0aGlzLl9kaWNlTW9kaWZpZXJ9YFxuICAgICAgICA6IHRoaXMuX2RpY2VNb2RpZmllci50b1N0cmluZygpXG4gICAgcmV0dXJuIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICBgQ29DNy5MaW5rQ2hlY2skeyFkaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgIXRoaXMuX2RpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ1xuICAgICAgfWAsXG4gICAgICB7IGRpZmZpY3VsdHksIG1vZGlmaWVyLCBuYW1lOiB0aGlzLm5hbWUgfVxuICAgIClcbiAgfVxuXG4gIGdldCByb2xsZWQgKCkge1xuICAgIGlmICh0aGlzLmRpY2UpIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgY2hlY2sgZnJvbSBhbiBIVE1MRWxlbWVudCBvciBhIGNoYXQgY2FyZC5cbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZCAgVGhlIEhUTUxFbGVtZW50IHRoYXQgaXMgYSByb2xsLXJlc3VsdCBvciBhIGNoYXQgY2FyZCBjb250YWluaW5nIGEgc2luZ2xlIHJvbGwtcmVzdWx0LlxuICAgKiBAcmV0dXJuIHtDb0M3Q2hlY2t9ICAgICAgQSBDb0M3Q2hlY2suXG4gICAqL1xuICBzdGF0aWMgZ2V0RnJvbUNhcmQgKGNhcmQpIHtcbiAgICBjb25zdCByb2xsUmVzdWx0ID0gY2FyZC5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtcmVzdWx0JylcbiAgICAgID8gY2FyZFxuICAgICAgOiBjYXJkLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBDb0M3Um9sbC5nZXRGcm9tRWxlbWVudChyb2xsUmVzdWx0LCBjaGVjaylcbiAgICBjb25zdCBtZXNzYWdlID0gY2FyZC5jbG9zZXN0KCcubWVzc2FnZScpXG4gICAgY2hlY2subWVzc2FnZUlkID0gbWVzc2FnZSA/IG1lc3NhZ2UuZGF0YXNldC5tZXNzYWdlSWQgOiBudWxsXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcHVzaCAoY2FyZCwgcHVibGlzaCA9IHRydWUpIHtcbiAgICBjb25zdCBvbGRDaGVjayA9IENvQzdDaGVjay5nZXRGcm9tQ2FyZChjYXJkKSAvLyBUT0RPOiBSZWZhY3RvcmluZ1xuICAgIGNvbnN0IGFjdG9ySWQgPSBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgPyBjYXJkLmRhdGFzZXQudG9rZW5JZFxuICAgICAgOiBjYXJkLmRhdGFzZXQuYWN0b3JJZFxuICAgIGNvbnN0IHNraWxsSWQgPSBjYXJkLmRhdGFzZXQuc2tpbGxJZFxuICAgIGNvbnN0IGNoYXJhYyA9IGNhcmQuZGF0YXNldC5jaGFyYWN0ZXJpc3RpY1xuICAgIGNvbnN0IGl0ZW1JZCA9IGNhcmQuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCBkaWNlTW9kID0gY2FyZC5kYXRhc2V0LmRpY2VNb2RcbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gY2FyZC5kYXRhc2V0LmRpZmZpY3VsdHlcblxuICAgIGxldCBwdXNoZWRSb2xsXG4gICAgaWYgKHNraWxsSWQpIHtcbiAgICAgIHB1c2hlZFJvbGwgPSBuZXcgQ29DN0NoZWNrKGFjdG9ySWQsIHNraWxsSWQsIGl0ZW1JZCwgZGljZU1vZCwgZGlmZmljdWx0eSlcbiAgICB9IGVsc2UgaWYgKGNoYXJhYykge1xuICAgICAgcHVzaGVkUm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgcHVzaGVkUm9sbC5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgICBwdXNoZWRSb2xsLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5XG4gICAgICBwdXNoZWRSb2xsLmFjdG9yID0gYWN0b3JJZFxuICAgICAgcHVzaGVkUm9sbC5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY1xuICAgIH0gZWxzZSByZXR1cm5cbiAgICBpZiAob2xkQ2hlY2sudXVpZCkge1xuICAgICAgcHVzaGVkUm9sbC5jb250ZXh0ID0gb2xkQ2hlY2suY29udGV4dFxuICAgICAgcHVzaGVkUm9sbC51dWlkID0gb2xkQ2hlY2sudXVpZFxuICAgIH1cbiAgICBpZiAob2xkQ2hlY2sucGFyZW50KSBwdXNoZWRSb2xsLnBhcmVudCA9IG9sZENoZWNrLnBhcmVudFxuICAgIHB1c2hlZFJvbGwucHVzaGluZyA9IHRydWVcbiAgICBhd2FpdCBwdXNoZWRSb2xsLnJvbGwoKVxuICAgIGlmIChwdWJsaXNoKSBwdXNoZWRSb2xsLnRvTWVzc2FnZSh0cnVlLCBjYXJkKVxuICB9XG5cbiAgZ2V0IHRva2VuICgpIHtcbiAgICBpZiAoIXRoaXMuYWN0b3IpIHJldHVybiBudWxsXG4gICAgcmV0dXJuIGNoYXRIZWxwZXIuZ2V0VG9rZW5Gcm9tS2V5KHRoaXMuYWN0b3JLZXkpXG4gIH1cblxuICBzZXQgYWN0b3IgKHgpIHtcbiAgICB0aGlzLmFjdG9yS2V5ID0geFxuICAgIGlmICh4ID09IG51bGwpIHtcbiAgICAgIHRoaXMuX2FjdG9yID0geFxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKHggaW5zdGFuY2VvZiBBY3Rvcikge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICB0aGlzLl9hY3RvciA9IHhcbiAgICAgIHRoaXMuX2FjdG9yLmFsaWFzID0gdGhpcy5hY3Rvci5uYW1lXG4gICAgICBpZiAoeC50b2tlbiAmJiB4LnRva2VuLnNjZW5lICYmIHgudG9rZW4uc2NlbmUuaWQpIHtcbiAgICAgICAgdGhpcy5hY3RvcktleSA9IGAke3gudG9rZW4uc2NlbmUuaWR9LiR7eC50b2tlbi5pZH1gXG4gICAgICB9IGVsc2UgdGhpcy5hY3RvcktleSA9IHguaWQgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoeC5pbmNsdWRlcygnLicpKSB7XG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSB4LnNwbGl0KCcuJykgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoc2NlbmVJZCA9PT0gJ1RPS0VOJykge1xuICAgICAgICB0aGlzLl9hY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0aGlzLl9hY3Rvci5uYW1lIC8vIFJFRkFDVE9SSU5HICgyKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgaWYgKCFzY2VuZSkgcmV0dXJuXG4gICAgICAgIGNvbnN0IHRva2VuRGF0YSA9IHNjZW5lLmdldEVtYmVkZGVkRG9jdW1lbnQoJ1Rva2VuJywgdG9rZW5JZClcbiAgICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVyblxuICAgICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICAgIHRoaXMuX2FjdG9yID0gdG9rZW4uYWN0b3JcbiAgICAgICAgdGhpcy5fYWN0b3IuYWxpYXMgPSB0b2tlbi5uYW1lXG4gICAgICB9XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICB0aGlzLl9hY3RvciA9IGdhbWUuYWN0b3JzLmdldCh4KVxuICAgIHRoaXMuYWN0b3IuYWxpYXMgPSB0aGlzLmFjdG9yLm5hbWVcbiAgfVxuXG4gIGdldCBzdWNjZXNzTGV2ZWxJY29ucyAoKSB7XG4gICAgaWYgKHRoaXMudW5rbm93bkRpZmZpY3VsdHkpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuaXNTaW1wbGVSb2xsKSByZXR1cm4gbnVsbFxuICAgIGlmICh0aGlzLnN1Y2Nlc3NMZXZlbCA+PSB0aGlzLmRpZmZpY3VsdHkpIHtcbiAgICAgIGNvbnN0IGljb25zID0gW11cbiAgICAgIGZvciAoXG4gICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgIGluZGV4IDwgdGhpcy5zdWNjZXNzTGV2ZWwgLSB0aGlzLmRpZmZpY3VsdHkgKyAxO1xuICAgICAgICBpbmRleCsrXG4gICAgICApIHtcbiAgICAgICAgaWNvbnMucHVzaCh0aGlzLmlzQ3JpdGljYWwgPyAnbWVkYWwnIDogJ3N0YXInKVxuICAgICAgfVxuICAgICAgY29uc3Qgc3VjY2Vzc0hpbnQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlN1Y2Nlc0xldmVsSGludCcsIHtcbiAgICAgICAgdmFsdWU6IHRoaXMuc3VjY2Vzc0xldmVsIC0gdGhpcy5kaWZmaWN1bHR5ICsgMVxuICAgICAgfSlcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGNzc0NsYXNzOiB0aGlzLmlzQ3JpdGljYWwgPyAnY3JpdGljYWwnIDogJ3N1Y2Nlc3MnLFxuICAgICAgICBoaW50OiBzdWNjZXNzSGludCxcbiAgICAgICAgaWNvbnNcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgaWNvbnMgPSBbXVxuICAgICAgY29uc3Qgc3VjY2Vzc0xldmVsID0gdGhpcy5pc0Z1bWJsZSA/IC0xIDogdGhpcy5zdWNjZXNzTGV2ZWxcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLmRpZmZpY3VsdHkgLSBzdWNjZXNzTGV2ZWw7IGluZGV4KyspIHtcbiAgICAgICAgaWNvbnMucHVzaCh0aGlzLmlzRnVtYmxlID8gJ3NrdWxsJyA6ICdzcGlkZXInKVxuICAgICAgfVxuICAgICAgY29uc3QgZmFpbHVyZUhpbnQgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmVMZXZlbEhpbnQnLCB7XG4gICAgICAgIHZhbHVlOiB0aGlzLmRpZmZpY3VsdHkgLSBzdWNjZXNzTGV2ZWxcbiAgICAgIH0pXG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgY3NzQ2xhc3M6IHRoaXMuaXNGdW1ibGUgPyAnZnVtYmxlJyA6ICdmYWlsdXJlJyxcbiAgICAgICAgaGludDogZmFpbHVyZUhpbnQsXG4gICAgICAgIGljb25zXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZ2V0IGlzQmxpbmQgKCkge1xuICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuX2lzQmxpbmQpIHtcbiAgICAgIHRoaXMuX2lzQmxpbmQgPSB0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJ1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5faXNCbGluZFxuICB9XG5cbiAgc2V0IGlzQmxpbmQgKHgpIHtcbiAgICB0aGlzLl9pc0JsaW5kID0geFxuICB9XG5cbiAgZ2V0IHVua25vd25EaWZmaWN1bHR5ICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUNyaXRpY2FsIHx8XG4gICAgICB0aGlzLmdtRGlmZmljdWx0eUV4dHJlbWUgfHxcbiAgICAgIHRoaXMuZ21EaWZmaWN1bHR5SGFyZCB8fFxuICAgICAgdGhpcy5nbURpZmZpY3VsdHlSZWd1bGFyXG4gICAgKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwudW5rbm93biA9PT0gdGhpcy5kaWZmaWN1bHR5XG4gIH1cblxuICBnZXQgcm9sbE1vZGUgKCkge1xuICAgIGlmICghdGhpcy5fcm9sbE1vZGUpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHJldHVybiB0aGlzLl9yb2xsTW9kZVxuICB9XG5cbiAgc2V0IHJvbGxNb2RlICh4KSB7XG4gICAgaWYgKHggPT09IGZhbHNlKSB0aGlzLl9yb2xsTW9kZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJylcbiAgICB0aGlzLl9yb2xsTW9kZSA9IHhcbiAgfVxuXG4gIHNldCBza2lsbCAoeCkge1xuICAgIHRoaXMuX3NraWxsID0gdGhpcy5fZ2V0SXRlbUZyb21JZCh4KVxuICAgIHRoaXMuc2tpbGxJZCA9IHhcbiAgfVxuXG4gIHNldCBpdGVtICh4KSB7XG4gICAgdGhpcy5faXRlbSA9IHRoaXMuX2dldEl0ZW1Gcm9tSWQoeClcbiAgICBpZiAodGhpcy5faXRlbT8udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgIHRoaXMuaXRlbUlkID0geFxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pdGVtID0gdW5kZWZpbmVkXG4gICAgICB0aGlzLml0ZW1JZCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfVxuXG4gIF9nZXRJdGVtRnJvbUlkICh4KSB7XG4gICAgaWYgKHggPT0gbnVsbCkgcmV0dXJuIG51bGxcbiAgICBpZiAoeCBpbnN0YW5jZW9mIEl0ZW0pIHJldHVybiB4XG4gICAgaWYgKHRoaXMuX2FjdG9yKSByZXR1cm4gdGhpcy5fYWN0b3IuaXRlbXMuZ2V0KHgpXG4gICAgcmV0dXJuIGdhbWUuaXRlbXMuZ2V0KHgpXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5fYWN0b3IgfHwgIXRoaXMuX2FjdG9yPy5pZCkge1xuICAgICAgaWYgKHRoaXMuYWN0b3JLZXkpIHRoaXMuX2FjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkodGhpcy5hY3RvcktleSkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAodGhpcy5hY3RvcklkKSB0aGlzLl9hY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KHRoaXMuYWN0b3JJZCkgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBpZiAoIXRoaXMuX2FjdG9yKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaXNEdW1teTogdHJ1ZSxcbiAgICAgICAgICBuYW1lOiB0aGlzLmFjdG9yTmFtZSA/IHRoaXMuYWN0b3JOYW1lIDogdW5kZWZpbmVkLFxuICAgICAgICAgIGlkOiB1bmRlZmluZWQsXG4gICAgICAgICAgaW1nOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9xdWVzdGlvbi1jaXJjbGUtcmVndWxhci5zdmcnLFxuICAgICAgICAgIHBvcnRyYWl0OiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9xdWVzdGlvbi1jaXJjbGUtcmVndWxhci5zdmcnXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuX2FjdG9yLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdPYmplY3QnKSB7XG4gICAgICBjb25zdCBhY3RvciA9IG5ldyBDb0NBY3Rvcih0aGlzLl9hY3RvcilcbiAgICAgIHRoaXMuX2FjdG9yID0gYWN0b3JcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBnZXQgc2tpbGwgKCkge1xuICAgIGlmICghdGhpcy5fc2tpbGwgJiYgdGhpcy5za2lsbElkKSB7XG4gICAgICB0aGlzLl9za2lsbCA9IHRoaXMuYWN0b3I/Lml0ZW1zLmdldCh0aGlzLnNraWxsSWQpXG4gICAgfVxuICAgIGlmICghdGhpcy5fc2tpbGwgJiYgdGhpcy5pdGVtKSB7XG4gICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5za2lsbCkge1xuICAgICAgICBpZiAodGhpcy5pdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkICYmICF0aGlzLndlYXBvbkFsdFNraWxsKSB7XG4gICAgICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9hY3Rvci5pdGVtcy5nZXQodGhpcy5pdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCAmJlxuICAgICAgICAgIHRoaXMud2VhcG9uQWx0U2tpbGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5fc2tpbGwgPSB0aGlzLl9hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgICAgICB0aGlzLml0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWRcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3NraWxsXG4gIH1cblxuICBnZXQgaXRlbSAoKSB7XG4gICAgaWYgKCF0aGlzLl9pdGVtICYmIHRoaXMuaXRlbUlkICYmIHRoaXMuYWN0b3IpIHtcbiAgICAgIHRoaXMuX2l0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldCh0aGlzLml0ZW1JZClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2l0ZW1cbiAgfVxuXG4gIGdldCBkaXNwbGF5UmVzdWx0VHlwZSAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlSZXN1bHRUeXBlJylcbiAgfVxuXG4gIGdldCBkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwgKCkge1xuICAgIHJldHVybiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwnKVxuICB9XG5cbiAgZ2V0IGRpc3BsYXlCb3RoU3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwbGF5UmVzdWx0VHlwZSAmJiB0aGlzLmRpc3BsYXlDaGVja1N1Y2Nlc3NMZXZlbFxuICB9XG5cbiAgZ2V0IGRvbnREaXNwbGF5U3VjY2Vzc0xldmVsICgpIHtcbiAgICByZXR1cm4gIXRoaXMuZGlzcGxheVJlc3VsdFR5cGUgJiYgIXRoaXMuZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsXG4gIH1cblxuICBnZXQgaW1hZ2UgKCkge1xuICAgIGlmICh0aGlzLnNraWxsKSByZXR1cm4gdGhpcy5za2lsbC5pbWdcbiAgICBpZiAodGhpcy5pdGVtKSByZXR1cm4gdGhpcy5pdGVtLmltZ1xuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBsaW5rICgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRMaW5rRWxlbWVudCgpLm91dGVySFRNTFxuICB9XG5cbiAgZ2V0IGRpc3BsYXlBY3Rvck9uQ2FyZCAoKSB7XG4gICAgcmV0dXJuIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2Rpc3BsYXlBY3Rvck9uQ2FyZCcpXG4gIH1cblxuICBnZXRMaW5rRWxlbWVudCAoY2xhc3NlcyA9IG51bGwpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2xzOiBbJ2NvYzctbGluaycsICdjb2M3LXJvbGwnXS5jb25jYXQoY2xhc3NlcyksXG4gICAgICBkYXRhc2V0OiB7IGNoZWNrOiAnY2hlY2snIH0sXG4gICAgICBpY29uOiB0aGlzLmltYWdlXG4gICAgICAgID8gYDxkaXYgc3R5bGU9XCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJHt0aGlzLmltYWdlfSlcIj48L2Rpdj5gXG4gICAgICAgIDogJzxpIGNsYXNzPVwiZmFzIGZhLWRpY2VcIj48L2k+JyxcbiAgICAgIGJsaW5kOiB0aGlzLmlzQmxpbmRcbiAgICB9XG5cbiAgICBjb25zdCBkaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlTdHJpbmcodGhpcy5fZGlmZmljdWx0eSlcbiAgICBjb25zdCB0aXRsZSA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICBgQ29DNy5MaW5rQ2hlY2skeyF0aGlzLl9kaWZmaWN1bHR5ID8gJycgOiAnRGlmZid9JHtcbiAgICAgICAgIXRoaXMuX2RpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ1xuICAgICAgfWAsXG4gICAgICB7XG4gICAgICAgIGRpZmZpY3VsdHksXG4gICAgICAgIG1vZGlmaWVyOiB0aGlzLl9kaWNlTW9kaWZpZXIsXG4gICAgICAgIG5hbWU6IHRoaXMubmFtZVxuICAgICAgfVxuICAgIClcblxuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJylcbiAgICBhLnRpdGxlID0gdGl0bGVcbiAgICBhLmNsYXNzTGlzdC5hZGQoLi4uZGF0YS5jbHMpXG4gICAgYS5pbm5lckhUTUwgPSBgJHtkYXRhLmJsaW5kID8gJzxpIGNsYXNzPVwiZmFzIGZhLWV5ZS1zbGFzaFwiPjwvaT4nIDogJyd9JHtcbiAgICAgIGRhdGEuaWNvblxuICAgIH0ke3RoaXMubmFtZX1gXG5cbiAgICByZXR1cm4gYVxuICB9XG5cbiAgYXN5bmMgcm9sbCAoZGljZU1vZCA9IG51bGwsIGRpZmZpY3VsdHkgPSBudWxsLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICBpZiAoIXRoaXMuc3RhbmRieSkgYXdhaXQgdGhpcy5fcGVyZm9ybShvcHRpb25zKVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIGNoZWNrIHdpdGggdGhlIHByb3ZpZGVkIGRhdGFcbiAgICogUHJvY2VzcyByb2xsIGRhdGEgdG8gYSBmb3JtYXQgdGhhdCBjYW4gYmUgZmVkIHRvIGNyZWF0ZSgpXG4gICAqIEBwYXJhbSB7Kn0gcm9sbERhdGEgQSByb2xsIGRhdGEgc3RydWN0dXJlIGFzIHJldHVybmVkIGJ5IGFjdG9yLmZpbmRcbiAgICogQHJldHVybnMgQSBjaGVjayB3aXRoIHRoZSByb2xsIGRhdGEgcHJvdmlkZWRcbiAgICovXG4gIHN0YXRpYyBjcmVhdGVGcm9tQWN0b3JSb2xsRGF0YSAocm9sbERhdGEpIHtcbiAgICBjb25zdCByb2xsID0ge31cbiAgICAvLyBjaGVjayBNb2RpZmllclxuICAgIGlmIChyb2xsRGF0YS5kaWZmaWN1bHR5KSByb2xsLmRpZmZpY3VsdHkgPSByb2xsRGF0YS5kaWZmaWN1bHR5XG4gICAgaWYgKHJvbGxEYXRhLmRpY2VNb2RpZmllcikgcm9sbC5kaWNlTW9kaWZpZXIgPSByb2xsRGF0YS5kaWNlTW9kaWZpZXJcbiAgICBpZiAocm9sbERhdGEuZGVueVB1c2ggPT09IHRydWUpIHJvbGwuZGVueVB1c2ggPSB0cnVlXG4gICAgaWYgKHJvbGxEYXRhLmZsYXREaWNlTW9kaWZpZXIpIHtcbiAgICAgIHJvbGwuZmxhdERpY2VNb2RpZmllciA9IHJvbGxEYXRhLmZsYXREaWNlTW9kaWZpZXJcbiAgICB9XG4gICAgaWYgKHJvbGxEYXRhLmZsYXRUaHJlc2hvbGRNb2RpZmllcikge1xuICAgICAgcm9sbC5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSByb2xsRGF0YS5mbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICB9XG4gICAgLy8gQWN0b3JcbiAgICBpZiAocm9sbERhdGEuYWN0b3I/LmFjdG9yS2V5KSByb2xsLmFjdG9yS2V5ID0gcm9sbERhdGEuYWN0b3IuYWN0b3JLZXlcbiAgICBlbHNlIGlmIChyb2xsRGF0YS5hY3Rvcj8ubmFtZSkgcm9sbC5hY3Rvck5hbWUgPSByb2xsRGF0YS5hY3Rvci5uYW1lXG4gICAgLy8gQ2hlY2sgdHlwZVxuICAgIHN3aXRjaCAocm9sbERhdGEudHlwZSkge1xuICAgICAgY2FzZSBDb0M3Q2hlY2sudHlwZS5jaGFyYWN0ZXJpc3RpYzpcbiAgICAgICAgcm9sbC5jaGFyYWN0ZXJpc3RpYyA9IHJvbGxEYXRhLnZhbHVlPy5rZXlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuYXR0cmlidXRlOlxuICAgICAgICByb2xsLmF0dHJpYnV0ZSA9IHJvbGxEYXRhLnZhbHVlPy5rZXlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuaXRlbTpcbiAgICAgICAgcm9sbC5hY3RvcktleSA9IHJvbGxEYXRhLnZhbHVlLmFjdG9yLmFjdG9yS2V5XG4gICAgICAgIGlmIChyb2xsRGF0YS52YWx1ZT8udHlwZSA9PT0gJ3NraWxsJykgcm9sbC5za2lsbCA9IHJvbGxEYXRhLnZhbHVlLmlkXG4gICAgICAgIGVsc2Ugcm9sbC5pdGVtID0gcm9sbERhdGEudmFsdWUuaWRcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUuc2tpbGw6XG4gICAgICAgIHJvbGwuYWN0b3JLZXkgPSByb2xsRGF0YS52YWx1ZS5hY3Rvci5hY3RvcktleVxuICAgICAgICByb2xsLnNraWxsID0gcm9sbERhdGEudmFsdWUuaWRcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnR5cGUudmFsdWU6XG4gICAgICAgIHJvbGwuZGlzcGxheU5hbWUgPSByb2xsRGF0YS52YWx1ZS5uYW1lXG4gICAgICAgIHJvbGwucmF3VmFsdWUgPSByb2xsRGF0YS52YWx1ZS50aHJlc2hvbGRcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHJldHVybiBDb0M3Q2hlY2suY3JlYXRlKHJvbGwpXG4gIH1cblxuICBzdGF0aWMgY3JlYXRlICh7XG4gICAgZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhcixcbiAgICBkaWNlTW9kaWZpZXIgPSBudWxsLFxuICAgIGFjdG9yS2V5ID0gbnVsbCxcbiAgICBjaGFyYWN0ZXJpc3RpYyA9IG51bGwsXG4gICAgYXR0cmlidXRlID0gbnVsbCxcbiAgICByYXdWYWx1ZSA9IDAsXG4gICAgaXRlbSA9IG51bGwsXG4gICAgc2tpbGwgPSBudWxsLFxuICAgIGZsYXREaWNlTW9kaWZpZXIgPSAwLFxuICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IDAsXG4gICAgZGlzcGxheU5hbWUgPSBudWxsLFxuICAgIGFjdG9yTmFtZSA9IG51bGwsXG4gICAgZGVueVB1c2ggPSB1bmRlZmluZWRcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIGlmIChkZW55UHVzaCA9PT0gdHJ1ZSkgY2hlY2suZGVueVB1c2ggPSB0cnVlXG4gICAgaWYgKGRpY2VNb2RpZmllcikgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyXG4gICAgaWYgKGZsYXREaWNlTW9kaWZpZXIpIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgaWYgKGZsYXRUaHJlc2hvbGRNb2RpZmllcikge1xuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgfVxuICAgIGlmIChkaXNwbGF5TmFtZSkgY2hlY2suZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZVxuICAgIGlmIChhY3RvcktleSkgY2hlY2suYWN0b3IgPSBhY3RvcktleVxuICAgIGlmIChhY3Rvck5hbWUpIGNoZWNrLmFjdG9yTmFtZSA9IGFjdG9yTmFtZVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHJhd1ZhbHVlKSkpIGNoZWNrLnJhd1ZhbHVlID0gTnVtYmVyKHJhd1ZhbHVlKVxuICAgIGlmIChjaGVjay5hY3RvciAmJiAhY2hlY2suYWN0b3IuaXNEdW1teSkge1xuICAgICAgLy8gVE9ETyA6IEFkZCBjaGVjayBmb3IgdmFsaWRpdHkgb2YgY2hhcmFjdGVyaXN0aWMsIGF0dHJpYnV0ZSwgc2tpbGxJZFxuICAgICAgaWYgKHNraWxsKSBjaGVjay5za2lsbCA9IHNraWxsXG4gICAgICAvLyBUT0RPIDogdHJ5IHJldHJpZXZlIHNraWxsIGJ5IG5hbWVcbiAgICAgIGVsc2UgaWYgKGNoYXJhY3RlcmlzdGljKSBjaGVjay5jaGFyYWN0ZXJpc3RpYyA9IGNoYXJhY3RlcmlzdGljXG4gICAgICBlbHNlIGlmIChhdHRyaWJ1dGUpIGNoZWNrLmF0dHJpYnV0ZSA9IGF0dHJpYnV0ZVxuICAgICAgZWxzZSBpZiAoaXRlbSkgY2hlY2suaXRlbSA9IGl0ZW1cbiAgICB9XG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGNoYXIsIGRpY2VNb2QgPSBudWxsLCBkaWZmaWN1bHR5ID0gbnVsbCkge1xuICAgIGlmIChkaWNlTW9kKSB0aGlzLmRpY2VNb2RpZmllciA9IGRpY2VNb2RcbiAgICBpZiAoZGlmZmljdWx0eSkgdGhpcy5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgIHRoaXMuY2hhcmFjdGVyaXN0aWMgPSBjaGFyXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgYXN5bmMgcm9sbEF0dHJpYnV0ZSAoYXR0cmliLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLmF0dHJpYnV0ZSA9IGF0dHJpYlxuICAgIGlmICghdGhpcy5zdGFuZGJ5KSBhd2FpdCB0aGlzLl9wZXJmb3JtKClcbiAgfVxuXG4gIGFzeW5jIHJvbGxWYWx1ZSAodmFsLCBkaWNlTW9kID0gbnVsbCwgZGlmZmljdWx0eSA9IG51bGwpIHtcbiAgICBpZiAoZGljZU1vZCkgdGhpcy5kaWNlTW9kaWZpZXIgPSBkaWNlTW9kXG4gICAgaWYgKGRpZmZpY3VsdHkpIHRoaXMuZGlmZmljdWx0eSA9IGRpZmZpY3VsdHlcbiAgICB0aGlzLnJhd1ZhbHVlID0gdmFsXG4gICAgaWYgKCF0aGlzLnN0YW5kYnkpIGF3YWl0IHRoaXMuX3BlcmZvcm0oKVxuICB9XG5cbiAgZ2V0IHJvbGxlZFN1Y2Nlc3NMZXZlbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3VjY2Vzc0xldmVsXG4gIH1cblxuICBhc3luYyBfcGVyZm9ybSAob3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy5kaWNlID1cbiAgICAgIG9wdGlvbnMucm9sbCB8fFxuICAgICAgKGF3YWl0IENvQzdEaWNlLnJvbGwodGhpcy5kaWNlTW9kaWZpZXIsIHRoaXMucm9sbE1vZGUsIHRoaXMuaXNCbGluZCkpXG4gICAgaWYgKCFvcHRpb25zLnNpbGVudCAmJiAhZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LmFjdGl2ZSkge1xuICAgICAgQXVkaW9IZWxwZXIucGxheSh7IHNyYzogQ09ORklHLnNvdW5kcy5kaWNlIH0sIHRydWUpXG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMuZm9yY2VEU04pIHtcbiAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGljZS5yb2xsKVxuICAgIH1cblxuICAgIHRoaXMuZGljZXMgPSB7XG4gICAgICB0ZW5zOiBbXSxcbiAgICAgIHVuaXQ6IHtcbiAgICAgICAgdmFsdWU6IHRoaXMuZGljZS51bml0LnRvdGFsXG4gICAgICB9LFxuICAgICAgdG90YWw6IHRoaXMuZGljZS50b3RhbCxcbiAgICAgIHRlblJlc3VsdDogdGhpcy5kaWNlLnRvdGFsIC0gdGhpcy5kaWNlLnVuaXQudG90YWwsXG4gICAgICBoYXNCb251czogISF0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgIGJvbnVzOiBNYXRoLmFicyh0aGlzLmRpY2VNb2RpZmllciksXG4gICAgICBib251c1R5cGU6XG4gICAgICAgIHRoaXMuZGljZU1vZGlmaWVyIDwgMFxuICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5EaWNlTW9kaWZpZXJQZW5hbHR5JylcbiAgICAgICAgICA6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGljZU1vZGlmaWVyQm9udXMnKSxcbiAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVxuICAgIH1cblxuICAgIGNvbnN0IG1heCA9IHRoaXMuZGljZS51bml0LnRvdGFsID09PSAwID8gMTAwIDogOTBcbiAgICBjb25zdCBtaW4gPSB0aGlzLmRpY2UudW5pdC50b3RhbCA9PT0gMCA/IDEwIDogMFxuICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuZGljZS50b3RhbCAtIHRoaXMuZGljZS51bml0LnRvdGFsXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuZGljZS50ZW5zLnJlc3VsdHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpZSA9IHt9XG4gICAgICBkaWUudmFsdWUgPSB0aGlzLmRpY2UudGVucy5yZXN1bHRzW2ldXG4gICAgICBpZiAoZGllLnZhbHVlID09PSBzZWxlY3RlZCkge1xuICAgICAgICBzZWxlY3RlZCA9IDEwMVxuICAgICAgICBkaWUuc2VsZWN0ZWQgPSB0cnVlXG4gICAgICAgIGlmICh0aGlzLmRpY2VzLmhhc0JvbnVzKSB7XG4gICAgICAgICAgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1heCkgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1pbikgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICB9XG4gICAgICAvLyBpZiggZGllLnZhbHVlID09IDEwMCkgZGllLnZhbHVlID0gXCIwMFwiO1xuICAgICAgdGhpcy5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgIH1cbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gIH1cblxuICBhc3luYyBjb21wdXRlQ2hlY2sgKCkge1xuICAgIHRoaXMuaXNVbmtub3duID0gdGhpcy51bmtub3duRGlmZmljdWx0eVxuXG4gICAgaWYgKHRoaXMuZ21EaWZmaWN1bHR5UmVndWxhcikge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyXG4gICAgfVxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUhhcmQpIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgIGlmICh0aGlzLmdtRGlmZmljdWx0eUV4dHJlbWUpIHtcbiAgICAgIHRoaXMuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuZXh0cmVtZVxuICAgIH1cbiAgICBpZiAodGhpcy5nbURpZmZpY3VsdHlDcml0aWNhbCkge1xuICAgICAgdGhpcy5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgIH1cblxuICAgIHRoaXMudGVuT25seU9uZURpZSA9IHRoaXMuZGljZXMudGVucy5sZW5ndGggPT09IDFcblxuICAgIHRoaXMuaXNWYWx1ZSA9IGZhbHNlXG4gICAgdGhpcy5pc0NoYXJhY3RpcmlzdGljID0gZmFsc2VcbiAgICB0aGlzLmlzU2tpbGwgPSBmYWxzZVxuICAgIHRoaXMuaXNJdGVtID0gZmFsc2VcbiAgICB0aGlzLmlzQXR0cmlidXRlID0gZmFsc2VcbiAgICBpZiAodGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuZGVueVB1c2ggPSB0cnVlXG4gICAgICB0aGlzLmRlbnlMdWNrID0gdHJ1ZVxuICAgIH0gZWxzZSBpZiAodGhpcy5hY3RvciA9PSBudWxsKSB7XG4gICAgICB0aGlzLmlzVmFsdWUgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmNoYXJhY3RlcmlzdGljKSB7XG4gICAgICAgIHRoaXMuaXNDaGFyYWN0aXJpc3RpYyA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9XG4gICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLnZhbHVlXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLnNraWxsKSB7XG4gICAgICAgIHRoaXMuaXNTa2lsbCA9IHRydWVcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IHRoaXMuc2tpbGwudmFsdWVcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuYXR0cmlidXRlKSB7XG4gICAgICAgIHRoaXMuaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgIHRoaXMucmF3VmFsdWUgPSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzW3RoaXMuYXR0cmlidXRlXS52YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdGhpcy5sdWNrU3BlbnQgJiYgIXRoaXMuaXNTaW1wbGVSb2xsKSB7XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA8PSB0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA8PSB0aGlzLmhhcmRUaHJlc2hvbGQpIHtcbiAgICAgICAgdGhpcy5zdWNjZXNzTGV2ZWwgPSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmRcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0IDw9IHRoaXMuZXh0cmVtZVRocmVzaG9sZCkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLnJhd1ZhbHVlKSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5tb2RpZmllZFJlc3VsdCA9PT0gMSkge1xuICAgICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWxcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmZ1bWJsZVRocmVzaG9sZCA8PSB0aGlzLm1vZGlmaWVkUmVzdWx0KSB7XG4gICAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzd2l0Y2ggKHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhcjpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWd1bGFyU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZDpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZTpcbiAgICAgICAgdGhpcy5yZXN1bHRUeXBlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWw6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JpdGljYWxTdWNjZXNzJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGU6XG4gICAgICAgIHRoaXMucmVzdWx0VHlwZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlOlxuICAgICAgICB0aGlzLnJlc3VsdFR5cGUgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIGlmICh0aGlzLnVua25vd25EaWZmaWN1bHR5KSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NSZXF1aXJlZCA9ICcnXG4gICAgfSBlbHNlIGlmICghdGhpcy5pc1NpbXBsZVJvbGwpIHtcbiAgICAgIHRoaXMuc3VjY2Vzc1JlcXVpcmVkID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TdWNjZXNzUmVxdWlyZWQnLCB7XG4gICAgICAgIHN1Y2Nlc3NSZXF1aXJlZDogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLm1vZGlmaWVkUmVzdWx0ID09PSAxKSB7XG4gICAgICB0aGlzLnN1Y2Nlc3NMZXZlbCA9IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWxcbiAgICB9XG4gICAgaWYgKCF0aGlzLmx1Y2tTcGVudCAmJiAhdGhpcy5pc1Vua25vd24gJiYgIXRoaXMuaXNTaW1wbGVSb2xsKSB7XG4gICAgICB0aGlzLmlzRmFpbHVyZSA9IHRoaXMuZmFpbGVkXG4gICAgICB0aGlzLmlzU3VjY2VzcyA9IHRoaXMucGFzc2VkXG4gICAgfVxuXG4gICAgdGhpcy5oYXNNYWxmdW5jdGlvbiA9IGZhbHNlXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUpIHRoaXMuc3VjY2Vzc0xldmVsID0gQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mdW1ibGVcblxuICAgIGlmICh0aGlzLml0ZW0pIHtcbiAgICAgIHRoaXMuaXNJdGVtID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuaXRlbS5zeXN0ZW0ubWFsZnVuY3Rpb24pIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIE51bWJlcih0aGlzLm1vZGlmaWVkUmVzdWx0KSA+PSBOdW1iZXIodGhpcy5pdGVtLnN5c3RlbS5tYWxmdW5jdGlvbilcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5oYXNNYWxmdW5jdGlvbiA9IHRydWVcbiAgICAgICAgICB0aGlzLm1hbGZ1bmN0aW9uVHh0ID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NYWxmdW5jdGlvbicsIHtcbiAgICAgICAgICAgIGl0ZW1OYW1lOiB0aGlzLml0ZW0ubmFtZVxuICAgICAgICAgIH0pXG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZUl0ZW1GbGFnKENvQzdJdGVtLmZsYWdzLm1hbGZ1bmN0aW9uKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmNhbkJlUHVzaGVkID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5jYW5CZVB1c2hlZCA9IHRoaXMuc2tpbGwgPyB0aGlzLnNraWxsLmNhbkJlUHVzaGVkKCkgOiBmYWxzZVxuICAgICAgaWYgKHRoaXMuY2hhcmFjdGVyaXN0aWMgIT0gbnVsbCkgdGhpcy5jYW5CZVB1c2hlZCA9IHRydWVcbiAgICAgIGlmICh0aGlzLmlzRnVtYmxlKSB0aGlzLmNhbkJlUHVzaGVkID0gZmFsc2VcbiAgICAgIGlmICh0aGlzLmRlbnlQdXNoKSB0aGlzLmNhbkJlUHVzaGVkID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuZGVueUx1Y2sgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgaWYgKFxuICAgICAgICAhdGhpcy5sdWNrU3BlbnQgJiZcbiAgICAgICAgIXRoaXMucGFzc2VkICYmXG4gICAgICAgICF0aGlzLmlzRnVtYmxlICYmXG4gICAgICAgIHRoaXMuZGlmZmljdWx0eSAhPT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbCAmJlxuICAgICAgICAhdGhpcy51bmtub3duRGlmZmljdWx0eVxuICAgICAgKSB7XG4gICAgICAgIGlmICh0aGlzLnNraWxsIHx8IHRoaXMuY2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgICBjb25zdCBsdWNrTmVlZGVkID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMuc3VjY2VzVGhyZXNob2xkXG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IubHVjayA+IGx1Y2tOZWVkZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFzRW5vdWdoTHVjayA9IHRydWVcbiAgICAgICAgICAgIHRoaXMubHVja05lZWRlZCA9IGx1Y2tOZWVkZWRcbiAgICAgICAgICAgIHRoaXMubHVja05lZWRlZFR4dCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU3BlbmRMdWNrJywge1xuICAgICAgICAgICAgICBsdWNrTmVlZGVkVmFsdWU6IGx1Y2tOZWVkZWRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5sdWNrU3BlbnQpIHtcbiAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MgPSBbXVxuXG4gICAgICAgIC8vIENhbid0IHNwZW5kIGx1Y2sgb24gcHVzaGVkIHJvbGxzLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgIXRoaXMucHVzaGluZyAmJlxuICAgICAgICAgIHRoaXMuYXR0cmlidXRlICE9PSAnbGNrJyAmJlxuICAgICAgICAgIHRoaXMuYXR0cmlidXRlICE9PSAnc2FuJ1xuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnVua25vd25EaWZmaWN1bHR5ICYmXG4gICAgICAgICAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID4gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBuZXh0TGV2ZWwgPSB7fVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHlOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAnQ29DNy5SZWd1bGFyRGlmZmljdWx0eSdcbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgICAgICAgICAgbmV4dExldmVsLmx1Y2tUb1NwZW5kID0gdGhpcy5tb2RpZmllZFJlc3VsdCAtIHRoaXMucmVndWxhclRocmVzaG9sZCAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5oYXNFbm91Z2hMdWNrID0gbmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVja1xuICAgICAgICAgICAgaWYgKG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2spIHtcbiAgICAgICAgICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MucHVzaChuZXh0TGV2ZWwpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5IDw9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciAmJlxuICAgICAgICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCA+IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgICAgICkge1xuICAgICAgICAgICAgY29uc3QgbmV4dExldmVsID0ge31cbiAgICAgICAgICAgIG5leHRMZXZlbC5kaWZmaWN1bHR5TmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkRGlmZmljdWx0eScpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eSA9IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZCAvLyBSRUZBQ1RPUklORyAoMSlcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLmhhcmRUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2tcbiAgICAgICAgICAgIGlmIChuZXh0TGV2ZWwubHVja1RvU3BlbmQgPD0gdGhpcy5hY3Rvci5sdWNrKSB7XG4gICAgICAgICAgICAgIHRoaXMuaW5jcmVhc2VTdWNjZXNzLnB1c2gobmV4dExldmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA8PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmQgJiZcbiAgICAgICAgICAgIHRoaXMubW9kaWZpZWRSZXN1bHQgPiB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRMZXZlbCA9IHt9XG4gICAgICAgICAgICBuZXh0TGV2ZWwuZGlmZmljdWx0eU5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LkV4dHJlbWVEaWZmaWN1bHR5J1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgbmV4dExldmVsLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmV4dHJlbWVcbiAgICAgICAgICAgIG5leHRMZXZlbC5sdWNrVG9TcGVuZCA9IHRoaXMubW9kaWZpZWRSZXN1bHQgLSB0aGlzLmV4dHJlbWVUaHJlc2hvbGQgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBuZXh0TGV2ZWwuaGFzRW5vdWdoTHVjayA9IG5leHRMZXZlbC5sdWNrVG9TcGVuZCA8PSB0aGlzLmFjdG9yLmx1Y2sgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgICAgICAgICBpZiAobmV4dExldmVsLmx1Y2tUb1NwZW5kIDw9IHRoaXMuYWN0b3IubHVjaykge1xuICAgICAgICAgICAgICB0aGlzLmluY3JlYXNlU3VjY2Vzcy5wdXNoKG5leHRMZXZlbClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSB0aGlzLmluY3JlYXNlU3VjY2Vzcy5sZW5ndGggPiAwXG4gICAgICBpZiAodGhpcy5pc0Z1bWJsZSkgdGhpcy5jYW5JbmNyZWFzZVN1Y2Nlc3MgPSBmYWxzZVxuICAgIH1cblxuICAgIHRoaXMuY2FuQXdhcmRFeHBlcmllbmNlID1cbiAgICAgIHRoaXMuc2tpbGwgJiYgIXRoaXMuc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMubm94cGdhaW5cblxuICAgIGlmIChcbiAgICAgIHRoaXMucGFzc2VkICYmXG4gICAgICB0aGlzLmRpY2VNb2RpZmllciA8PSAwICYmXG4gICAgICB0aGlzLnNraWxsICYmXG4gICAgICAhdGhpcy5za2lsbC5zeXN0ZW0ucHJvcGVydGllcy5ub3hwZ2FpbiAmJlxuICAgICAgIXRoaXMubHVja1NwZW50ICYmXG4gICAgICAhdGhpcy5mb3JjZWQgJiZcbiAgICAgICF0aGlzLmlzQmxpbmQgJiZcbiAgICAgICF0aGlzLmlzVW5rbm93blxuICAgICkge1xuICAgICAgdGhpcy5mbGFnRm9yRGV2ZWxvcGVtZW50KClcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wYXJlbnQpIHtcbiAgICAgIGNvbnN0IHBhcmVudCA9IGF3YWl0IGZyb21VdWlkKHRoaXMucGFyZW50KVxuICAgICAgaWYgKHBhcmVudCAmJiAndXBkYXRlUm9sbCcgaW4gcGFyZW50KSB7XG4gICAgICAgIGF3YWl0IHBhcmVudC51cGRhdGVSb2xsKHRoaXMuSlNPTlJvbGxTdHJpbmcpXG4gICAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggYFJvbGwgJHt0aGlzLnV1aWR9IGRlcGVuZHMgb2YgJHt0aGlzLnBhcmVudH1gKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNob3dEaWNlUm9sbCAoKSB7XG4gICAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IGRpY2VSZXN1bHRzID0gW11cbiAgICAgIGZvciAoY29uc3QgZGllUmVzdWx0IG9mIHRoaXMuZGljZXMudGVucykge1xuICAgICAgICBkaWNlUmVzdWx0cy5wdXNoKGRpZVJlc3VsdC52YWx1ZSA9PT0gMTAwID8gMCA6IGRpZVJlc3VsdC52YWx1ZSAvIDEwKVxuICAgICAgfVxuICAgICAgZGljZVJlc3VsdHMucHVzaCh0aGlzLmRpY2VzLnVuaXQudmFsdWUpXG5cbiAgICAgIGNvbnN0IGRpY2VEYXRhID0ge1xuICAgICAgICBmb3JtdWxhOiBgJHt0aGlzLmRpY2VzLnRlbnMubGVuZ3RofWQxMDArMWQxMGAsXG4gICAgICAgIHJlc3VsdHM6IGRpY2VSZXN1bHRzLFxuICAgICAgICB3aGlzcGVyOiBudWxsLFxuICAgICAgICBibGluZDogZmFsc2VcbiAgICAgIH1cbiAgICAgIGdhbWUuZGljZTNkLnNob3coZGljZURhdGEpXG4gICAgfVxuICB9XG5cbiAgZ2V0IGNzc0NsYXNzICgpIHtcbiAgICBsZXQgY3NzQ2xhc3MgPSAnJ1xuICAgIGlmICh0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MgPSAnc3VjY2VzcydcbiAgICBpZiAodGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzID0gJ2ZhaWx1cmUnXG4gICAgaWYgKHRoaXMuaXNDcml0aWNhbCAmJiAhdGhpcy5pc0ZhaWx1cmUpIGNzc0NsYXNzID0gJ3N1Y2Nlc3MgY3JpdGljYWwnXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUgJiYgIXRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcyA9ICdmYWlsdXJlIGZ1bWJsZSdcbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MgKz0gJyByZWd1bGFyLXN1Y2Nlc3MnXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcyArPSAnIGhhcmQtc3VjY2VzcydcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzICs9ICcgZXh0cmVtZS1zdWNjZXNzJ1xuICAgIH1cblxuICAgIHJldHVybiBjc3NDbGFzc1xuICB9XG5cbiAgZ2V0IGNzc0NsYXNzTGlzdCAoKSB7XG4gICAgY29uc3QgY3NzQ2xhc3MgPSBbXVxuICAgIGlmICh0aGlzLmlzU3VjY2VzcykgY3NzQ2xhc3MucHVzaCgnc3VjY2VzcycpXG4gICAgaWYgKHRoaXMuaXNGYWlsdXJlKSBjc3NDbGFzcy5wdXNoKCdmYWlsdXJlJylcbiAgICBpZiAodGhpcy5pc0NyaXRpY2FsICYmICF0aGlzLmlzRmFpbHVyZSkgY3NzQ2xhc3MucHVzaCgnc3VjY2VzcycsICdjcml0aWNhbCcpXG4gICAgaWYgKHRoaXMuaXNGdW1ibGUgJiYgIXRoaXMuaXNTdWNjZXNzKSBjc3NDbGFzcy5wdXNoKCdmYWlsdXJlJywgJ2Z1bWJsZScpXG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGNzc0NsYXNzLnB1c2goJ3JlZ3VsYXItc3VjY2VzcycpXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBjc3NDbGFzcy5wdXNoKCdoYXJkLXN1Y2Nlc3MnKVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgY3NzQ2xhc3MucHVzaCgnZXh0cmVtZS1zdWNjZXNzJylcbiAgICB9XG5cbiAgICByZXR1cm4gY3NzQ2xhc3NcbiAgfVxuXG4gIGdldCBwbGF5ZXJDc3NDbGFzcyAoKSB7XG4gICAgaWYgKHRoaXMuaXNTdWNjZXNzIHx8IHRoaXMuZm9yY2VkU3VjY2VzcykgcmV0dXJuICdzdWNjZXNzJ1xuICAgIGlmICh0aGlzLmlzRmFpbHVyZSB8fCB0aGlzLmZvcmNlZEZhaWx1cmUpIHJldHVybiAnZmFpbHVyZSdcbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgdXBncmFkZUNoZWNrICh1cGdyYWRlaW5kZXgsIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBjb25zdCBpbmNyZWFzZWRTdWNjZXNzID0gdGhpcy5pbmNyZWFzZVN1Y2Nlc3NbdXBncmFkZWluZGV4XVxuICAgIGNvbnN0IGx1Y2tBbW91bnQgPVxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5sdWNrQW1vdW50KSB8fFxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5sdWNrVG9TcGVuZCkgLy8gUkVGQUNUT1JJTkcgKDEpXG4gICAgaWYgKCF0aGlzLmFjdG9yLnNwZW5kTHVjayhsdWNrQW1vdW50KSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvck5vdEVub3VnaEx1Y2snLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIHRoaXMudG90YWxMdWNrU3BlbnQgPSAhcGFyc2VJbnQodGhpcy50b3RhbEx1Y2tTcGVudClcbiAgICAgID8gMFxuICAgICAgOiBwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgIHRoaXMudG90YWxMdWNrU3BlbnQgKz0gcGFyc2VJbnQobHVja0Ftb3VudClcbiAgICBjb25zdCBuZXdTdWNjZXNzTGV2ZWwgPVxuICAgICAgcGFyc2VJbnQoaW5jcmVhc2VkU3VjY2Vzcy5uZXdTdWNjZXNzTGV2ZWwpIHx8XG4gICAgICBwYXJzZUludChpbmNyZWFzZWRTdWNjZXNzLmRpZmZpY3VsdHkpIC8vIFJFRkFDVE9SSU5HICgxKVxuICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gbmV3U3VjY2Vzc0xldmVsXG4gICAgaWYgKHRoaXMuZGlmZmljdWx0eSA8PSBuZXdTdWNjZXNzTGV2ZWwpIHtcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdHJ1ZVxuICAgICAgdGhpcy5pc0ZhaWx1cmUgPSBmYWxzZVxuICAgIH1cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdXBncmFkZWluZGV4ICsgMTsgaW5kZXgrKykge1xuICAgICAgdGhpcy5pbmNyZWFzZVN1Y2Nlc3Muc2hpZnQoKVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MpIHtcbiAgICAgIHMubHVja1RvU3BlbmQgPSBzLmx1Y2tUb1NwZW5kIC0gbHVja0Ftb3VudFxuICAgIH1cbiAgICB0aGlzLmx1Y2tTcGVudCA9IHRydWVcbiAgICB0aGlzLmNvbXB1dGVDaGVjaygpXG4gICAgaWYgKHVwZGF0ZSkgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgcmVtb3ZlVXBncmFkZXMgKCkge1xuICAgIHRoaXMuY2FuSW5jcmVhc2VTdWNjZXNzID0gZmFsc2VcbiAgICB0aGlzLmluY3JlYXNlU3VjY2VzcyA9IFtdXG4gICAgdGhpcy5sdWNrTmVlZGVkID0gMFxuICAgIHRoaXMubHVja05lZWRlZFR4dCA9IG51bGxcbiAgICB0aGlzLmNhbkJlUHVzaGVkID0gZmFsc2VcbiAgfVxuXG4gIGZvcmNlUGFzcyAobHVja0Ftb3VudCA9IG51bGwsIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBpZiAobHVja0Ftb3VudCkge1xuICAgICAgdGhpcy5hY3Rvci5zcGVuZEx1Y2sobHVja0Ftb3VudClcbiAgICAgIHRoaXMuc3VjY2Vzc0xldmVsID0gdGhpcy5kaWZmaWN1bHR5XG4gICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5pbmNyZWFzZVN1Y2Nlc3MpIHtcbiAgICAgICAgcy5sdWNrVG9TcGVuZCA9IHMubHVja1RvU3BlbmQgLSBsdWNrQW1vdW50XG4gICAgICB9XG4gICAgICB0aGlzLmx1Y2tTcGVudCA9IHRydWVcbiAgICAgIHRoaXMuaXNTdWNjZXNzID0gdHJ1ZVxuICAgICAgdGhpcy5pc0ZhaWx1cmUgPSBmYWxzZVxuICAgICAgdGhpcy50b3RhbEx1Y2tTcGVudCA9ICFwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgICAgICA/IDBcbiAgICAgICAgOiBwYXJzZUludCh0aGlzLnRvdGFsTHVja1NwZW50KVxuICAgICAgdGhpcy50b3RhbEx1Y2tTcGVudCArPSBwYXJzZUludChsdWNrQW1vdW50KVxuICAgICAgdGhpcy5jb21wdXRlQ2hlY2soKVxuICAgICAgaWYgKHVwZGF0ZSkgdGhpcy51cGRhdGVDaGF0Q2FyZCgpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZm9yY2VkID0gdHJ1ZVxuICAgICAgdGhpcy5mb3JjZWRTdWNjZXNzID0gdHJ1ZVxuICAgICAgaWYgKHRoaXMuaXNVbmtub3duKSB7XG4gICAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyLCB1cGRhdGUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmZvcmNlU3VjY2Vzc0xldmVsKHRoaXMuZGlmZmljdWx0eSwgdXBkYXRlKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvcmNlRmFpbCAodXBkYXRlID0gdHJ1ZSkge1xuICAgIHRoaXMuZm9yY2VkID0gdHJ1ZVxuICAgIHRoaXMuZm9yY2VkRmFpbHVyZSA9IHRydWVcbiAgICBpZiAodGhpcy5pc1Vua25vd24pIHtcbiAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlLCB1cGRhdGUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZm9yY2VTdWNjZXNzTGV2ZWwodGhpcy5kaWZmaWN1bHR5IC0gMSwgdXBkYXRlKVxuICAgIH1cbiAgfVxuXG4gIF9mb3JjZUNoZWNrIChoaWdoLCBsb3csIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgdG90YWwgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaGlnaCAtIGxvdykpICsgbG93ICsgMVxuICAgIGNvbnN0IHVuaXRUb3RhbCA9IHRvdGFsICUgMTBcbiAgICBsZXQgdGVuVG90YWwgPSBNYXRoLmZsb29yKHRvdGFsIC8gMTApXG4gICAgY29uc3QgdGVucyA9IFtdXG5cbiAgICBsZXQgaGFzRW5vdWdoID0gTWF0aC5hYnModGhpcy5kaWNlTW9kaWZpZXIpID09PSB0ZW5zLmxlbmd0aFxuICAgIHdoaWxlICghaGFzRW5vdWdoKSB7XG4gICAgICBsZXQgdGVuID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApXG4gICAgICBsZXQgcm9sbCA9IHRlbiAqIDEwICsgdW5pdFRvdGFsXG4gICAgICBpZiAocm9sbCA9PT0gMCkge1xuICAgICAgICByb2xsID0gMTAwXG4gICAgICAgIHRlbiA9IDEwMFxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGFzUGVuYWx0eSAmJiByb2xsIDw9IGhpZ2gpIHtcbiAgICAgICAgdGVucy5wdXNoKHRlbilcbiAgICAgICAgaWYgKHJvbGwgPiB0b3RhbCkgdG90YWwgPSByb2xsXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oYXNCb251cyAmJiByb2xsID4gbG93KSB7XG4gICAgICAgIHRlbnMucHVzaCh0ZW4pXG4gICAgICAgIGlmIChyb2xsIDwgdG90YWwpIHRvdGFsID0gcm9sbFxuICAgICAgfVxuICAgICAgaGFzRW5vdWdoID0gdGVucy5sZW5ndGggPT09IE1hdGguYWJzKHRoaXMuZGljZU1vZGlmaWVyKVxuICAgIH1cblxuICAgIC8vIEluc2VydCByZXN1bHQgYXQgcmFuZG9tIHBvc2l0aW9uLlxuICAgIGlmICh0ZW5Ub3RhbCA9PT0gMTAgJiYgdW5pdFRvdGFsID09PSAwKSB7XG4gICAgICB0ZW5Ub3RhbCA9IDEwMFxuICAgIH1cbiAgICB0ZW5zLnNwbGljZShcbiAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRlbnMubGVuZ3RoICsgMSksXG4gICAgICAwLFxuICAgICAgdGVuVG90YWwgPT09IDEwID8gMCA6IHRlblRvdGFsXG4gICAgKVxuXG4gICAgdGhpcy5kaWNlcy50ZW5zID0gW11cbiAgICB0aGlzLmRpY2VzLnVuaXQudmFsdWUgPSB1bml0VG90YWxcbiAgICB0aGlzLm1vZGlmaWVkUmVzdWx0ID0gdG90YWxcbiAgICB0aGlzLmRpY2VzLnRvdGFsID0gdG90YWxcbiAgICB0aGlzLmRpY2VzLnRlblJlc3VsdCA9IHRvdGFsIC0gdW5pdFRvdGFsXG5cbiAgICBjb25zdCBtYXggPSB1bml0VG90YWwgPT09IDAgPyAxMDAgOiA5MFxuICAgIGNvbnN0IG1pbiA9IHVuaXRUb3RhbCA9PT0gMCA/IDEwIDogMFxuICAgIGxldCBzZWxlY3RlZCA9IHRvdGFsIC0gdW5pdFRvdGFsXG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGRpZSA9IHt9XG4gICAgICBkaWUudmFsdWUgPSB0ZW5zW2ldXG4gICAgICBpZiAoZGllLnZhbHVlID09PSBzZWxlY3RlZCkge1xuICAgICAgICBzZWxlY3RlZCA9IDEwMVxuICAgICAgICBkaWUuc2VsZWN0ZWQgPSB0cnVlXG4gICAgICAgIGlmICh0aGlzLmhhc0JvbnVzKSB7XG4gICAgICAgICAgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICAgIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1heCkgZGllLmlzTWF4ID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01heCA9IGZhbHNlXG4gICAgICAgIGlmIChkaWUudmFsdWUgPT09IG1pbikgZGllLmlzTWluID0gdHJ1ZVxuICAgICAgICBlbHNlIGRpZS5pc01pbiA9IGZhbHNlXG4gICAgICB9XG4gICAgICAvLyBpZiggZGllLnZhbHVlID09IDEwMCkgZGllLnZhbHVlID0gXCIwMFwiO1xuICAgICAgdGhpcy5kaWNlcy50ZW5zLnB1c2goZGllKVxuICAgIH1cblxuICAgIHRoaXMuY29tcHV0ZUNoZWNrKClcbiAgICBpZiAodXBkYXRlKSB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgfVxuXG4gIGZvcmNlU3VjY2Vzc0xldmVsIChzdWNjZXNzTGV2ZWwsIHVwZGF0ZSA9IHRydWUpIHtcbiAgICBsZXQgaGlnaCwgbG93XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSAxMDBcbiAgICAgIGxvdyA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSBzdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGlmICh0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgPT09IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMSkge1xuICAgICAgICBoaWdoID0gMTAwXG4gICAgICB9IGVsc2UgaGlnaCA9IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMVxuICAgICAgbG93ID0gdGhpcy5yZWd1bGFyVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmhhcmQgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuaGFyZFRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMuZXh0cmVtZVRocmVzaG9sZFxuICAgICAgbG93ID0gMVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbCA9PT0gc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gMVxuICAgICAgbG93ID0gMFxuICAgIH1cbiAgICBpZiAoaGlnaCA9PT0gbG93KSBsb3ctLVxuICAgIGlmIChoaWdoID09PSAwKSBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcbiAgfVxuXG4gIGluY3JlYXNlU3VjY2Vzc0xldmVsICh1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IGhpZ2gsIGxvd1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZ1bWJsZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICAgIGlmICh0aGlzLnJlZ3VsYXJUaHJlc2hvbGQgPT09IHRoaXMuZnVtYmxlVGhyZXNob2xkIC0gMSkge1xuICAgICAgICBsb3cgPSB0aGlzLmhhcmRUaHJlc2hvbGRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxvdyA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5mYWlsdXJlID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLnJlZ3VsYXIgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuaGFyZCA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICAgIGxvdyA9IHRoaXMuY3JpdGljYWxUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmNyaXRpY2FsVGhyZXNob2xkXG4gICAgICBsb3cgPSAwXG4gICAgfVxuICAgIGlmIChoaWdoID09PSBsb3cpIGxvdy0tXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcbiAgfVxuXG4gIGRlY3JlYXNlU3VjY2Vzc0xldmVsICh1cGRhdGUgPSB0cnVlKSB7XG4gICAgbGV0IGhpZ2gsIGxvd1xuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gMTAwXG4gICAgICBsb3cgPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwucmVndWxhciA9PT0gdGhpcy5zdWNjZXNzTGV2ZWwpIHtcbiAgICAgIGhpZ2ggPSB0aGlzLmZ1bWJsZVRocmVzaG9sZCAtIDFcbiAgICAgIGxvdyA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgIH1cbiAgICBpZiAoQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkID09PSB0aGlzLnN1Y2Nlc3NMZXZlbCkge1xuICAgICAgaGlnaCA9IHRoaXMucmVndWxhclRocmVzaG9sZFxuICAgICAgbG93ID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgfVxuICAgIGlmIChDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5oYXJkVGhyZXNob2xkXG4gICAgICBsb3cgPSB0aGlzLmV4dHJlbWVUaHJlc2hvbGRcbiAgICB9XG4gICAgaWYgKENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuY3JpdGljYWwgPT09IHRoaXMuc3VjY2Vzc0xldmVsKSB7XG4gICAgICBoaWdoID0gdGhpcy5leHRyZW1lVGhyZXNob2xkXG4gICAgICBsb3cgPSAxXG4gICAgfVxuICAgIGlmIChoaWdoID09PSAwKSBoaWdoID0gdGhpcy5mdW1ibGVUaHJlc2hvbGQgLSAxXG4gICAgdGhpcy5fZm9yY2VDaGVjayhoaWdoLCBsb3csIHVwZGF0ZSlcbiAgfVxuXG4gIGFzeW5jIGZsYWdGb3JEZXZlbG9wZW1lbnQgKCkge1xuICAgIHRoaXMuZmxhZ2dlZEZvckRldmVsb3BtZW50ID0gdHJ1ZVxuICAgIGlmICh0aGlzLnNraWxsKSBhd2FpdCB0aGlzLnNraWxsLmZsYWdGb3JEZXZlbG9wZW1lbnQoKVxuICB9XG5cbiAgc2V0IGRpZmZpY3VsdHkgKHgpIHtcbiAgICB0aGlzLl9kaWZmaWN1bHR5ID0gcGFyc2VJbnQoeClcbiAgfVxuXG4gIGdldCBkaWZmaWN1bHR5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGlmZmljdWx0eVxuICB9XG5cbiAgc2V0IGZsYXZvciAoeCkge1xuICAgIHRoaXMuX2ZsYXZvciA9IHhcbiAgfVxuXG4gIHNldCBjb250ZXh0ICh4KSB7XG4gICAgdGhpcy5fY29udGV4dCA9IHhcbiAgfVxuXG4gIGdldCBjb250ZXh0ICgpIHtcbiAgICBpZiAoIXRoaXMuX2NvbnRleHQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5fY29udGV4dFxuICB9XG5cbiAgc2V0IHBhcmVudCAoeCkge1xuICAgIGlmICghdGhpcy51dWlkKSB0aGlzLnV1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgIHRoaXMucGFyZW50VXVpZCA9IHhcbiAgfVxuXG4gIGdldCBwYXJlbnQgKCkge1xuICAgIGlmICghdGhpcy5wYXJlbnRVdWlkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMucGFyZW50VXVpZFxuICB9XG5cbiAgZ2V0IGZsYXZvciAoKSB7XG4gICAgaWYgKHRoaXMuX2ZsYXZvcikgcmV0dXJuIHRoaXMuX2ZsYXZvclxuICAgIGxldCBmbGF2b3IgPSAnJ1xuICAgIGlmICh0aGlzLmFjdG9yPy5zeXN0ZW0pIHtcbiAgICAgIGlmICh0aGlzLnNraWxsKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5za2lsbC5uYW1lLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLml0ZW0pIHtcbiAgICAgICAgZmxhdm9yID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5JdGVtQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgaXRlbTogdGhpcy5pdGVtLm5hbWUsXG4gICAgICAgICAgc2tpbGw6IHRoaXMuc2tpbGwubmFtZSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICB0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10ubGFiZWxcbiAgICAgICAgICApLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmF0dHJpYnV0ZSkge1xuICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICBgQ29DNy4ke3RoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLmxhYmVsfWBcbiAgICAgICAgICApLFxuICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgIGZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ2hlY2tSZXN1bHQnLCB7XG4gICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZSxcbiAgICAgICAgICB2YWx1ZTogdGhpcy5yYXdWYWx1ZVN0cmluZyxcbiAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmdcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWZsYXZvcikge1xuICAgICAgaWYgKHRoaXMucmF3VmFsdWUpIHtcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheU5hbWUpIHtcbiAgICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmVzdWx0Jywge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5kaXNwbGF5TmFtZSxcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnJhd1ZhbHVlU3RyaW5nLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbGF2b3IgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNoZWNrUmF3VmFsdWUnLCB7XG4gICAgICAgICAgICByYXd2YWx1ZTogdGhpcy5yYXdWYWx1ZSxcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5wdXNoaW5nKSB7XG4gICAgICBmbGF2b3IgPSBgJHtnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlB1c2hpbmcnKX0gJHtmbGF2b3J9YFxuICAgIH1cblxuICAgIHJldHVybiBmbGF2b3JcbiAgfVxuXG4gIGdldCB0b29sdGlwSGVhZGVyICgpIHtcbiAgICBpZiAodGhpcy5hdHRyaWJ1dGUpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgYENvQzcuTGlua0NoZWNrJHtcbiAgICAgICAgICAgIHRoaXMuZGlmZmljdWx0eSA9PT0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5yZWd1bGFyID8gJycgOiAnRGlmZidcbiAgICAgICAgICB9JHshdGhpcy5kaWNlTW9kaWZpZXIgPyAnJyA6ICdNb2RpZid9YCxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBkaWZmaWN1bHR5OiB0aGlzLmRpZmZpY3VsdHlTdHJpbmcsXG4gICAgICAgICAgICBtb2RpZmllcjogdGhpcy5kaWNlTW9kaWZpZXIsXG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICBgQ29DNy4ke3RoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLmxhYmVsfWBcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbdGhpcy5hdHRyaWJ1dGVdLnZhbHVlfSUpYFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5jaGFyYWN0ZXJpc3RpYykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzW3RoaXMuY2hhcmFjdGVyaXN0aWNdLmxhYmVsXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICApICtcbiAgICAgICAgYCAoJHt0aGlzLmFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3NbdGhpcy5jaGFyYWN0ZXJpc3RpY10udmFsdWV9JSlgXG4gICAgICApXG4gICAgfVxuICAgIGlmICh0aGlzLnNraWxsKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgIGBDb0M3LkxpbmtDaGVjayR7XG4gICAgICAgICAgICB0aGlzLmRpZmZpY3VsdHkgPT09IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhciA/ICcnIDogJ0RpZmYnXG4gICAgICAgICAgfSR7IXRoaXMuZGljZU1vZGlmaWVyID8gJycgOiAnTW9kaWYnfWAsXG4gICAgICAgICAge1xuICAgICAgICAgICAgZGlmZmljdWx0eTogdGhpcy5kaWZmaWN1bHR5U3RyaW5nLFxuICAgICAgICAgICAgbW9kaWZpZXI6IHRoaXMuZGljZU1vZGlmaWVyLFxuICAgICAgICAgICAgbmFtZTogdGhpcy5za2lsbC5uYW1lXG4gICAgICAgICAgfVxuICAgICAgICApICsgYCAoJHt0aGlzLnNraWxsLnZhbHVlfSUpYFxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodGhpcy5kaXNwbGF5TmFtZSkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICBgQ29DNy5MaW5rQ2hlY2ske1xuICAgICAgICAgICAgdGhpcy5kaWZmaWN1bHR5ID09PSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXIgPyAnJyA6ICdEaWZmJ1xuICAgICAgICAgIH0keyF0aGlzLmRpY2VNb2RpZmllciA/ICcnIDogJ01vZGlmJ31gLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuZGlmZmljdWx0eVN0cmluZyxcbiAgICAgICAgICAgIG1vZGlmaWVyOiB0aGlzLmRpY2VNb2RpZmllcixcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGlzcGxheU5hbWVcbiAgICAgICAgICB9XG4gICAgICAgICkgKyBgICgke3RoaXMucmF3VmFsdWVTdHJpbmd9JSlgXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH1cblxuICBhc3luYyBnZXRIdG1sUm9sbEVsZW1lbnQgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9pbi1jYXJkLXJvbGwuaHRtbCdcbiAgICBpZiAodGhpcy5vcHRpb25zKSB0aGlzLm9wdGlvbnMgPSBtZXJnZU9iamVjdCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgZWxzZSB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGlmIChodG1sKSByZXR1cm4gJC5wYXJzZUhUTUwoaHRtbClbMF1cbiAgICByZXR1cm4gbnVsbFxuICB9XG5cbiAgYXN5bmMgZ2V0SHRtbFJvbGwgKG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xscy9pbi1jYXJkLXJvbGwuaHRtbCdcbiAgICBpZiAodGhpcy5vcHRpb25zKSB0aGlzLm9wdGlvbnMgPSBtZXJnZU9iamVjdCh0aGlzLm9wdGlvbnMsIG9wdGlvbnMpXG4gICAgZWxzZSB0aGlzLm9wdGlvbnMgPSBvcHRpb25zXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIHJldHVybiBodG1sIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgYXN5bmMgdG9NZXNzYWdlIChwdXNoaW5nID0gZmFsc2UpIHtcbiAgICAvLyBJZiBjYXJkIGlzIHByb3ZpZGVkIGF0dHRhY2hlZCB0aGUgcm9sbCB0byB0aGUgY2FyZC4gSWYgVVJJRCBwcm92aWRlZCBhdHRhY2ggYXQgdGhpcyBwb3NpdGlvbi4/XG4gICAgdGhpcy5wdXNoaW5nID0gcHVzaGluZ1xuICAgIGNvbnN0IHRlbXBsYXRlID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvY2hhdC9yb2xsLXJlc3VsdC5odG1sJ1xuXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuXG4gICAgY29uc3Qgc3BlYWtlckRhdGEgPSB7fVxuICAgIGxldCBzcGVha2VyXG4gICAgaWYgKHRoaXMuYWN0b3IpIHtcbiAgICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4pIHtcbiAgICAgICAgc3BlYWtlckRhdGEudG9rZW4gPSB0aGlzLnRva2VuLmRvY3VtZW50XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYWN0b3IuaXNEdW1teSkge1xuICAgICAgICBpZiAodGhpcy5hY3Rvci5uYW1lKSBzcGVha2VyID0geyBhbGlhczogdGhpcy5hY3Rvci5uYW1lIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNwZWFrZXJEYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgICAgfVxuICAgICAgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoc3BlYWtlckRhdGEpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvcj8udXNlciA/IHRoaXMuYWN0b3IudXNlciA6IGdhbWUudXNlclxuXG4gICAgY29uc3QgY2hhdERhdGEgPSB7XG4gICAgICB1c2VyOiB1c2VyLmlkLFxuICAgICAgc3BlYWtlcixcbiAgICAgIGZsYXZvcjogdGhpcy5mbGF2b3IsXG4gICAgICBjb250ZW50OiBodG1sLFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgQ29DNzoge1xuICAgICAgICAgIHR5cGU6IENvQzdDaGVjay5jYXJkVHlwZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudXVpZCkgY2hhdERhdGEuZmxhZ3MuQ29DNy51dWlkID0gdGhpcy51dWlkXG4gICAgaWYgKHRoaXMuY29udGV4dCkgY2hhdERhdGEuZmxhZ3MuQ29DNy5jb250ZXh0ID0gdGhpcy5jb250ZXh0XG5cbiAgICBpZiAodGhpcy5yb2xsTW9kZSA9PT0gJ3NlbGZyb2xsJykge1xuICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgIGNoYXREYXRhLnVzZXIgPSBnYW1lLnVzZXIuaWRcbiAgICAgICAgY2hhdERhdGEuZmxhdm9yID0gYFske3RoaXMuYWN0b3IubmFtZX1dICR7Y2hhdERhdGEuZmxhdm9yfWBcbiAgICAgICAgY2hhdERhdGEuZmxhZ3MgPSB7XG4gICAgICAgICAgQ29DNzoge1xuICAgICAgICAgICAgR01TZWxmUm9sbDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGNoYXREYXRhLnNwZWFrZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY2hhdERhdGEuZmxhZ3MuQ29DNy5vcmlnaW5hbFNwZWFrZXIgPSBkdXBsaWNhdGUoY2hhdERhdGEuc3BlYWtlcilcbiAgICAgICAgfVxuICAgICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgICBzd2l0Y2ggKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NlbGZSb2xsV2hpc3BlclRhcmdldCcpKSB7XG4gICAgICAgICAgICBjYXNlICdvd25lcnMnOlxuICAgICAgICAgICAgICBkZWxldGUgY2hhdERhdGEuc3BlYWtlclxuICAgICAgICAgICAgICBjaGF0RGF0YS53aGlzcGVyID0gdGhpcy5hY3Rvci5vd25lcnNcbiAgICAgICAgICAgICAgY2hhdERhdGEudHlwZSA9IENPTlNULkNIQVRfTUVTU0FHRV9UWVBFUy5XSElTUEVSXG4gICAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICAgIGNhc2UgJ2V2ZXJ5b25lJzpcbiAgICAgICAgICAgICAgZGVsZXRlIGNoYXREYXRhLnNwZWFrZXJcbiAgICAgICAgICAgICAgY2hhdERhdGEud2hpc3BlciA9IGdhbWUudXNlcnMucGxheWVyc1xuICAgICAgICAgICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLldISVNQRVJcbiAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgQ2hhdE1lc3NhZ2UuYXBwbHlSb2xsTW9kZShjaGF0RGF0YSwgdGhpcy5yb2xsTW9kZSlcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhLCB0aGlzLnJvbGxNb2RlKVxuICAgIH1cblxuICAgIGlmIChbJ2dtcm9sbCcsICdibGluZHJvbGwnXS5pbmNsdWRlcyh0aGlzLnJvbGxNb2RlKSkge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IENoYXRNZXNzYWdlLmdldFdoaXNwZXJSZWNpcGllbnRzKCdHTScpXG4gICAgfVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICAvLyBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKCBjaGF0RGF0YSwgdGhpcy5yb2xsTW9kZSk7XG4gICAgaWYgKHRoaXMuZGljZT8ucm9sbCAmJiAhdGhpcy5kaWNlPy5oaWRlRGljZSkge1xuICAgICAgY2hhdERhdGEucm9sbCA9IHRoaXMuZGljZS5yb2xsXG4gICAgICBjaGF0RGF0YS50eXBlID0gQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLlJPTExcbiAgICAgIGNoYXREYXRhLnJvbGxNb2RlID0gdGhpcy5pc0JsaW5kID8gJ2JsaW5kcm9sbCcgOiB0aGlzLnJvbGxNb2RlXG4gICAgfVxuXG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKS50aGVuKG1zZyA9PiB7XG4gICAgICByZXR1cm4gbXNnXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IG1ha2VQdWJsaWMgIFdpbGwgY2hhbmdlIHRoZSByb2xsIG1vZGUgdG8gcHVibGljXG4gICAqL1xuICBhc3luYyB1cGRhdGVDaGF0Q2FyZCAoeyBtYWtlUHVibGljID0gZmFsc2UsIGZvcmNlUm9sbCA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGlmIChtYWtlUHVibGljKSB0aGlzLnJvbGxNb2RlID0gZmFsc2UgLy8gcmVzZXQgcm9sbCBtb2RlXG5cbiAgICBjb25zdCBjaGF0RGF0YSA9IHsgZmxhdm9yOiB0aGlzLmZsYXZvciB9XG5cbiAgICBpZiAobWFrZVB1YmxpYykge1xuICAgICAgY2hhdERhdGEud2hpc3BlciA9IFtdXG4gICAgICBjaGF0RGF0YS5ibGluZCA9IGZhbHNlXG4gICAgICBDaGF0TWVzc2FnZS5hcHBseVJvbGxNb2RlKGNoYXREYXRhKVxuICAgIH0gLy8gZWxzZSB7XG4gICAgLy8gY2hhdERhdGEud2hpc3BlciA9IFtdXG4gICAgLy8gY2hhdERhdGEuYmxpbmQgPSBmYWxzZVxuICAgIC8vIENoYXRNZXNzYWdlLmFwcGx5Um9sbE1vZGUoY2hhdERhdGEsIGdhbWUuc2V0dGluZ3MuZ2V0KCdjb3JlJywgJ3JvbGxNb2RlJykpXG4gICAgLy8gfVxuXG4gICAgaWYgKGNoYXREYXRhLmJsaW5kKSB7XG4gICAgICB0aGlzLmlzQmxpbmQgPSB0cnVlXG4gICAgfVxuXG4gICAgY29uc3QgdGVtcGxhdGUgPSAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9jaGF0L3JvbGwtcmVzdWx0Lmh0bWwnXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB0aGlzKVxuICAgIGxldCBuZXdDb250ZW50ID0gaHRtbFxuXG4gICAgaWYgKCF0aGlzLm1lc3NhZ2VJZCkgcmV0dXJuICQucGFyc2VIVE1MKGh0bWwpWzBdIC8vIElmIG5vIG1lc3NhZ2VJZCByZXR1cm4gdGhlIEhUTUxFbGVtZW50IGNvbnRhaW5pbmcgdGhlIHJvbGwuXG4gICAgLy8gSWYgbm8gbWVzc2FnZUlkXG5cbiAgICBjb25zdCBtZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG4gICAgY29uc3QgaHRtbE1lc3NhZ2UgPSAkLnBhcnNlSFRNTChtZXNzYWdlLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFodG1sTWVzc2FnZS5jbGFzc0xpc3QuY29udGFpbnMoJ3JvbGwtcmVzdWx0JykpIHtcbiAgICAgIGNvbnN0IGh0bWxDaGVjayA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG4gICAgICBjb25zdCByb2xsUmVzdWx0RWxlbWVudCA9IGh0bWxNZXNzYWdlLnF1ZXJ5U2VsZWN0b3IoJy5yb2xsLXJlc3VsdCcpXG4gICAgICBpZiAocm9sbFJlc3VsdEVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgcm9sbFJlc3VsdEVsZW1lbnQucmVwbGFjZVdpdGgoaHRtbENoZWNrKVxuICAgICAgfVxuICAgICAgbmV3Q29udGVudCA9IGh0bWxNZXNzYWdlLm91dGVySFRNTFxuICAgIH1cblxuICAgIGNoYXREYXRhLmNvbnRlbnQgPSBuZXdDb250ZW50XG5cbiAgICBpZiAoQ09OU1QuQ0hBVF9NRVNTQUdFX1RZUEVTLlJPTEwgPT09IG1lc3NhZ2UudHlwZSkge1xuICAgICAgaWYgKG1lc3NhZ2Uud2hpc3Blcj8ubGVuZ3RoKSB7XG4gICAgICAgIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuV0hJU1BFUlxuICAgICAgfSBlbHNlIGNoYXREYXRhLnR5cGUgPSBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuT1RIRVJcbiAgICB9XG5cbiAgICBpZiAoZm9yY2VSb2xsICYmIHRoaXMuZGljZT8ucm9sbCAmJiAoZ2FtZS51c2VyLmlzR00gfHwgIXRoaXMuaXNCbGluZCkpIHtcbiAgICAgIGF3YWl0IENvQzdEaWNlLnNob3dSb2xsRGljZTNkKHRoaXMuZGljZS5yb2xsKVxuICAgIH1cblxuICAgIGNvbnN0IG1zZyA9IGF3YWl0IG1lc3NhZ2UudXBkYXRlKGNoYXREYXRhKVxuICAgIGF3YWl0IHVpLmNoYXQudXBkYXRlTWVzc2FnZShtc2csIGZhbHNlKVxuICAgIHJldHVybiBtc2dcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB1cGRhdGVDYXJkU3dpdGNoIChldmVudCkge1xuICAgIGNvbnN0IGNhcmQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5jaGF0LWNhcmQnKVxuICAgIGNvbnN0IGNoZWNrID0gYXdhaXQgQ29DN0NoZWNrLmdldEZyb21DYXJkKGNhcmQpXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5UmVndWxhciA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5SGFyZCA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5RXh0cmVtZSA9IGZhbHNlXG4gICAgY2hlY2suZ21EaWZmaWN1bHR5Q3JpdGljYWwgPSBmYWxzZVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eVJlZ3VsYXInKSB7XG4gICAgICBjaGVjay5nbURpZmZpY3VsdHlSZWd1bGFyID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmZsYWcgPT09ICdnbURpZmZpY3VsdHlIYXJkJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5SGFyZCA9IHRydWVcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnID09PSAnZ21EaWZmaWN1bHR5RXh0cmVtZScpIHtcbiAgICAgIGNoZWNrLmdtRGlmZmljdWx0eUV4dHJlbWUgPSB0cnVlXG4gICAgfVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZyA9PT0gJ2dtRGlmZmljdWx0eUNyaXRpY2FsJykge1xuICAgICAgY2hlY2suZ21EaWZmaWN1bHR5Q3JpdGljYWwgPSB0cnVlXG4gICAgfVxuICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgZ2V0IHRvb2x0aXAgKCkge1xuICAgIHJldHVybiByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvcm9sbC10b29sdGlwLmh0bWwnLFxuICAgICAgdGhpc1xuICAgIClcbiAgfVxuXG4gIGdldCBpbmxpbmVDaGVjayAoKSB7XG4gICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnY29jNy1pbmxpbmUtY2hlY2snKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnY29jNy1jaGVjay1yZXN1bHQnKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnY29jNy1pbmxpbmUnKVxuICAgIGEuY2xhc3NMaXN0LmFkZCguLi50aGlzLmNzc0NsYXNzTGlzdClcbiAgICBhLnRpdGxlID0gdGhpcy50b29sdGlwSGVhZGVyXG4gICAgYS5kYXRhc2V0LnJvbGwgPSBlc2NhcGUodGhpcy5KU09OUm9sbFN0cmluZykgLy8gVE9ETyFJTVBPUlRBTlQhISFcbiAgICBhLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImdhbWUtaWNvbiBnYW1lLWljb24tZDEwXCI+PC9pPiAke1xuICAgICAgdGhpcy5tb2RpZmllZFJlc3VsdCB8fCAnPz8nXG4gICAgfWBcbiAgICByZXR1cm4gYVxuICB9XG5cbiAgZ2V0IHJvbGxUb29sVGlwICgpIHtcbiAgICBpZiAodGhpcy5zdGFuZGJ5KSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgcGFydHMgPSBbXVxuICAgIGNvbnN0IHRlbnMgPSB0aGlzLmRpY2VzLnRlbnMubWFwKHIgPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdWx0OiByLnZhbHVlLFxuICAgICAgICBzZWxlY3RlZDogci5zZWxlY3RlZCxcbiAgICAgICAgY2xhc3NlczogW1xuICAgICAgICAgICdkaWUnLFxuICAgICAgICAgICdkMTAnLFxuICAgICAgICAgICFyLnNlbGVjdGVkID8gJ2Rpc2NhcmRlZCcgOiBudWxsLFxuICAgICAgICAgIHIuaXNNaW4gPyAnbWluJyA6IG51bGwsXG4gICAgICAgICAgci5pc01heCA/ICdtYXgnIDogbnVsbFxuICAgICAgICBdXG4gICAgICAgICAgLmZpbHRlcihjID0+IGMpXG4gICAgICAgICAgLmpvaW4oJyAnKVxuICAgICAgfVxuICAgIH0pXG4gICAgY29uc3QgdW5pdCA9IFtcbiAgICAgIHtcbiAgICAgICAgcmVzdWx0OiB0aGlzLmRpY2VzLnVuaXQudmFsdWUsXG4gICAgICAgIHNlbGVjdGVkOiB0cnVlLFxuICAgICAgICBjbGFzc2VzOiAnZGllIGQxMCdcbiAgICAgIH1cbiAgICBdXG5cbiAgICBwYXJ0cy5wdXNoKHtcbiAgICAgIGZvcm11bGE6IHRoaXMudG9vbHRpcEhlYWRlcixcbiAgICAgIHRvdGFsOiB0aGlzLm1vZGlmaWVkUmVzdWx0LFxuICAgICAgaWNvbnM6IHRoaXMuc3VjY2Vzc0xldmVsSWNvbnMsXG4gICAgICBjbGFzczogdGhpcy5jc3NDbGFzcyxcbiAgICAgIHN1Y2Nlc3NSZXF1aXJlZDogdGhpcy5zdWNjZXNzUmVxdWlyZWQsXG4gICAgICByZXN1bHRUeXBlOiB0aGlzLnJlc3VsdFR5cGUsXG4gICAgICBmYWNlOiAxMCxcbiAgICAgIHJvbGxzOiBbLi4udGVucywgLi4udW5pdF1cbiAgICB9KVxuICAgIHJldHVybiByZW5kZXJUZW1wbGF0ZShcbiAgICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvcm9sbHMvcm9sbC10b29sdGlwLmh0bWwnLFxuICAgICAgeyBwYXJ0cyB9XG4gICAgKVxuICB9XG5cbiAgZ2V0IEpTT05Sb2xsRGF0YSAoKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy5KU09OUm9sbFN0cmluZylcbiAgfVxuXG4gIGdldCBKU09OUm9sbFN0cmluZyAoKSB7XG4gICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGNvbnN0IGV4Y2x1ZGUgPSBbJ19hY3RvcicsICdfc2tpbGwnLCAnX2l0ZW0nXVxuICAgICAgaWYgKGV4Y2x1ZGUuaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIHN0YXRpYyBmcm9tRGF0YSAoZGF0YSkge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBDb0M3Q2hlY2soKSwgZGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBmcm9tUm9sbFN0cmluZyAoZGF0YVN0cmluZykge1xuICAgIGxldCBkYXRhXG4gICAgdHJ5IHtcbiAgICAgIGRhdGEgPSBKU09OLnBhcnNlKHVuZXNjYXBlKGRhdGFTdHJpbmcpKVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSlcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuICAgIHJldHVybiBDb0M3Q2hlY2suZnJvbURhdGEoZGF0YSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBhbHRlciAoY2hlY2ssIGNvbW1hbmQsIG9wdGlvbnMgPSB7fSkge1xuICAgIHN3aXRjaCAoY29tbWFuZCkge1xuICAgICAgY2FzZSAndXNlTHVjayc6IHtcbiAgICAgICAgaWYgKG9wdGlvbnMudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncGFzcy1jaGVjaycpKSB7XG4gICAgICAgICAgY29uc3QgbHVja0Ftb3VudCA9IHBhcnNlSW50KG9wdGlvbnMudGFyZ2V0LmRhdGFzZXQubHVja0Ftb3VudClcbiAgICAgICAgICBjaGVjay5mb3JjZVBhc3MobHVja0Ftb3VudCwgb3B0aW9ucy51cGRhdGUpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgdXBncmFkZUluZGV4ID0gcGFyc2VJbnQob3B0aW9ucy50YXJnZXQuZGF0YXNldC5pbmRleClcbiAgICAgICAgICBhd2FpdCBjaGVjay51cGdyYWRlQ2hlY2sodXBncmFkZUluZGV4LCBvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmb3JjZS1wYXNzJzoge1xuICAgICAgICBjaGVjay5mb3JjZVBhc3MobnVsbCwgb3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2ZvcmNlLWZhaWwnOiB7XG4gICAgICAgIGNoZWNrLmZvcmNlRmFpbChvcHRpb25zLnVwZGF0ZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnaW5jcmVhc2Utc3VjY2Vzcy1sZXZlbCc6IHtcbiAgICAgICAgY2hlY2suaW5jcmVhc2VTdWNjZXNzTGV2ZWwob3B0aW9ucy51cGRhdGUpXG4gICAgICAgIGJyZWFrXG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2RlY3JlYXNlLXN1Y2Nlc3MtbGV2ZWwnOiB7XG4gICAgICAgIGNoZWNrLmRlY3JlYXNlU3VjY2Vzc0xldmVsKG9wdGlvbnMudXBkYXRlKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXZlYWwtY2hlY2snOiB7XG4gICAgICAgIGNoZWNrLmlzQmxpbmQgPSBmYWxzZVxuICAgICAgICBjaGVjay5yb2xsTW9kZSA9IGZhbHNlXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdmbGFnLWZvci1kZXZlbG9wbWVudCc6IHtcbiAgICAgICAgYXdhaXQgY2hlY2suZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICAgIGNoZWNrLmNvbXB1dGVDaGVjaygpXG4gICAgICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgICBicmVha1xuICAgICAgfVxuXG4gICAgICBjYXNlICdwdXNoJzoge1xuICAgICAgICBhd2FpdCBjaGVjay5fcGVyZm9ybSgpXG4gICAgICAgIGNoZWNrLnB1c2hpbmcgPSB0cnVlXG4gICAgICAgIGlmIChvcHRpb25zLnVwZGF0ZSkgY2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25DbGlja0lubGluZVJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctY2hlY2stcmVzdWx0JykpIHtcbiAgICAgIGlmIChhLmNsYXNzTGlzdC5jb250YWlucygnZXhwYW5kZWQnKSkge1xuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLl9jb2xsYXBzZUlubGluZVJlc3VsdChhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5fZXhwYW5kSW5saW5lUmVzdWx0KGEpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9jb2xsYXBzZUlubGluZVJlc3VsdCAoYSkge1xuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2NvYzctaW5saW5lLWNoZWNrJykpIHJldHVyblxuICAgIGlmICghYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHJldHVyblxuICAgIGNvbnN0IHRvb2x0aXAgPSBhLnF1ZXJ5U2VsZWN0b3IoJy5jb2M3LWNoZWNrLXRvb2x0aXAnKVxuICAgIGlmICh0b29sdGlwKSB0b29sdGlwLnJlbW92ZSgpXG4gICAgcmV0dXJuIGEuY2xhc3NMaXN0LnJlbW92ZSgnZXhwYW5kZWQnKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIF9leHBhbmRJbmxpbmVSZXN1bHQgKGEpIHtcbiAgICBpZiAoIWEuY2xhc3NMaXN0LmNvbnRhaW5zKCdjb2M3LWlubGluZS1jaGVjaycpKSByZXR1cm5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ2V4cGFuZGVkJykpIHJldHVyblxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IHRvb2x0aXBcbiAgICBjb25zdCBjaGVjayA9IE9iamVjdC5hc3NpZ24oXG4gICAgICBuZXcgQ29DN0NoZWNrKCksXG4gICAgICBKU09OLnBhcnNlKHVuZXNjYXBlKGEuZGF0YXNldC5yb2xsKSlcbiAgICApIC8vIFRPRE8gOiBmaW5kIHN0cmluZ2lmeSB1bmVzY2FwZSAhISAyMDIxMDIwNVxuICAgIGlmIChjaGVjay5zdGFuZGJ5KSByZXR1cm5cblxuICAgIGNvbnN0IHRpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgdGlwLmlubmVySFRNTCA9IGF3YWl0IGNoZWNrLnJvbGxUb29sVGlwXG5cbiAgICAvLyBBZGQgdGhlIHRvb2x0aXBcbiAgICBjb25zdCB0b29sdGlwID0gdGlwLmNoaWxkcmVuWzBdXG4gICAgYS5hcHBlbmRDaGlsZCh0b29sdGlwKVxuICAgIGEuY2xhc3NMaXN0LmFkZCgnZXhwYW5kZWQnKVxuXG4gICAgLy8gU2V0IHRoZSBwb3NpdGlvblxuICAgIGNvbnN0IHBhID0gYS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGNvbnN0IHB0ID0gdG9vbHRpcC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIHRvb2x0aXAuc3R5bGUubGVmdCA9IGAke01hdGgubWluKFxuICAgICAgcGEueCxcbiAgICAgIHdpbmRvdy5pbm5lcldpZHRoIC0gKHB0LndpZHRoICsgMylcbiAgICApfXB4YFxuICAgIHRvb2x0aXAuc3R5bGUudG9wID0gYCR7TWF0aC5taW4oXG4gICAgICBwYS55ICsgcGEuaGVpZ2h0ICsgMyxcbiAgICAgIHdpbmRvdy5pbm5lckhlaWdodCAtIChwdC5oZWlnaHQgKyAzKVxuICAgICl9cHhgXG4gICAgY29uc3QgemkgPSBnZXRDb21wdXRlZFN0eWxlKGEpLnpJbmRleFxuICAgIHRvb2x0aXAuc3R5bGUuekluZGV4ID0gTnVtYmVyLmlzTnVtZXJpYyh6aSkgPyB6aSArIDEgOiAxMDBcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgQ2hhdE1lc3NhZ2UsIENPTkZJRywgQ09OU1QsIERpYWxvZywgZHVwbGljYXRlLCBGb2xkZXIsIGZyb21VdWlkLCBmcm9tVXVpZFN5bmMsIGdhbWUsIGdldERvY3VtZW50Q2xhc3MsIEhvb2tzLCBNYWNybywgUm9sbCwgVG9rZW4sIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi9hcHBzL3JvbGwtZGlhbG9nLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4vY2hhdC9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3VXRpbGl0aWVzIHtcbiAgLy8gc3RhdGljIHRlc3QoZXZlbnQpe1xuICAvLyAgIGlmKCBldmVudC5zaGlmdEtleSkgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdIZWxsbyBmcm9tIFNISUZUIHV0aWxpdGllcycpO1xuICAvLyAgIGVsc2UgdWkubm90aWZpY2F0aW9ucy5pbmZvKCdIZWxsbyBmcm9tIHV0aWxpdGllcycpO1xuICAvLyAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCk7XG4gIC8vICAgbGV0IGFjdG9yO1xuICAvLyAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXTtcbiAgLy8gICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKTtcblxuICAvLyAgYWN0b3Iuc2V0Q29uZGl0aW9uKENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzKTtcbiAgLy8gfVxuXG4gIHN0YXRpYyBpc0Zvcm11bGEgKHgpIHtcbiAgICBpZiAodHlwZW9mIHggIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2VcbiAgICBpZiAoIWlzTmFOKE51bWJlcih4KSkpIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBSb2xsLnZhbGlkYXRlKHgpXG4gIH1cblxuICBzdGF0aWMgUGFyc2VDaGF0RW50cnkgKGh0bWwsIGNvbnRlbnQpIHtcbiAgICBjb25zdCByZWdYID0gLyhcXFMrKS9nXG4gICAgY29uc3QgdGVybXMgPSBjb250ZW50Lm1hdGNoKHJlZ1gpXG4gICAgaWYgKFxuICAgICAgdGVybXNbMF0/LnRvTG93ZXJDYXNlKCkubWF0Y2goL15cXC9yKG9sbCk/JC8pICYmXG4gICAgICB0ZXJtc1sxXT8udG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKCcxZCUnKVxuICAgICkge1xuICAgICAgLy8gRGVsYXkgY2FsbGluZyBmdW5jdGlvbiB0byBwcmV2ZW50IGNoYXRtZXNzYWdlIGtleSBkb3duIHRyaWdnZXJpbmcgZGVmYXVsdFxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIENvQzdVdGlsaXRpZXMuX0V4ZWNDb21tYW5kKGNvbnRlbnQpXG4gICAgICB9LCAyMDApXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgX0V4ZWNDb21tYW5kIChjb250ZW50KSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGNvbnRlbnRcbiAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAuc3BsaXQoJyAnKVxuICAgICAgPy5qb2luKCcnKVxuICAgICAgPy5yZXBsYWNlKC9cXC9yKG9sbCk/MWQlLywgJycpXG4gICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICBpZiAob3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgIGxldCBlc2NhcGVkID0gb3B0aW9uc1xuICAgICAgbGV0IHRocmVzaG9sZFxuICAgICAgbGV0IGRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGxldCBkaWNlTW9kaWZpZXIgPSAwXG4gICAgICBsZXQgYXNrID0gZmFsc2VcbiAgICAgIGxldCBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBsZXQgZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBjb25zdCB0aHJlc2hvbGRTdHIgPSBlc2NhcGVkLm1hdGNoKC9bXihdKyg/PVxcKSkvKVxuICAgICAgaWYgKHRocmVzaG9sZFN0ciAmJiB0aHJlc2hvbGRTdHIubGVuZ3RoKSB7XG4gICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih0aHJlc2hvbGRTdHJbMF0pXG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgdGhyZXNob2xkU3RyKSB7XG4gICAgICAgICAgZXNjYXBlZCA9IGVzY2FwZWQucmVwbGFjZShgKCR7bWF0Y2h9KWAsICcnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBkaWZmaWN1bHR5U3RyID0gZXNjYXBlZC5tYXRjaCgvW15bXSsoPz1cXF0pLylcbiAgICAgIGlmIChkaWZmaWN1bHR5U3RyICYmIGRpZmZpY3VsdHlTdHIubGVuZ3RoKSB7XG4gICAgICAgIGRpZmZpY3VsdHkgPSBDb0M3VXRpbGl0aWVzLmNvbnZlcnREaWZmaWN1bHR5KGRpZmZpY3VsdHlTdHJbMF0pXG4gICAgICAgIGZvciAoY29uc3QgbWF0Y2ggb2YgZGlmZmljdWx0eVN0cikge1xuICAgICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoYFske21hdGNofV1gLCAnJylcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGVzY2FwZWQuaW5jbHVkZXMoJz8nKSkge1xuICAgICAgICBhc2sgPSB0cnVlXG4gICAgICAgIGVzY2FwZWQgPSBlc2NhcGVkLnJlcGxhY2UoJz8nLCAnJylcbiAgICAgIH1cbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKGVzY2FwZWQpKSkgZGljZU1vZGlmaWVyID0gTnVtYmVyKGVzY2FwZWQpXG5cbiAgICAgIGlmIChhc2spIHtcbiAgICAgICAgY29uc3QgZGlhbG9nT3B0aW9ucyA9IHtcbiAgICAgICAgICB0aHJlc2hvbGQsXG4gICAgICAgICAgbW9kaWZpZXI6IGRpY2VNb2RpZmllcixcbiAgICAgICAgICBkaWZmaWN1bHR5LFxuICAgICAgICAgIGFza1ZhbHVlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZShkaWFsb2dPcHRpb25zKVxuICAgICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgICBkaWNlTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKSB8fCB0aHJlc2hvbGRcbiAgICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICAgIGZsYXRUaHJlc2hvbGRNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXRUaHJlc2hvbGRNb2RpZmllcicpKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBpZiAodGhyZXNob2xkKSBjaGVjay5yYXdWYWx1ZSA9ICFpc05hTih0aHJlc2hvbGQpID8gdGhyZXNob2xkIDogdW5kZWZpbmVkXG4gICAgfVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBpZiAoc3BlYWtlci50b2tlbiAmJiBzcGVha2VyLnNjZW5lKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgICAgICBgJHtzcGVha2VyLnNjZW5lfS4ke3NwZWFrZXIudG9rZW59YFxuICAgICAgKSAvLyBSRUZBQ1RPUklORyAoMikgKysrIHdoeSBzcGVha2VyLnNjZW5lLlxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfSBlbHNlIGlmIChzcGVha2VyLmFjdG9yKSB7XG4gICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgaWYgKGFjdG9yKSBjaGVjay5hY3RvciA9IGFjdG9yXG4gICAgfVxuICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdGVzdCAoKSB7XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvcygnRG8gc29tZSBzdHVmZicpXG4gIH1cblxuICBzdGF0aWMgZ2V0QWN0b3JGcm9tU3RyaW5nIChhY3RvclN0cmluZykge1xuICAgIGxldCBhY3RvclxuXG4gICAgLy8gVG9rZW4gaXMgYmV0dGVyIHRoYW4gYWN0b3IuXG4gICAgLy8gQ2FzZSAxIDogdHJ5aW5nIHdpdGggSUQuXG4gICAgLy8gQ2FzZSAxLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBpZiAoZ2FtZS5hY3RvcnMudG9rZW5zW2FjdG9yU3RyaW5nXSkgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1thY3RvclN0cmluZ11cbiAgICAvLyBDYXNlIDEuMiA6IGFjdG9yIGZvdW5kLlxuICAgIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KGFjdG9yU3RyaW5nKVxuICAgIGlmIChhY3RvcikgcmV0dXJuIGFjdG9yXG5cbiAgICAvLyBDYXNlIDIgOiB0cnlpbmcgd2l0aCBuYW1lXG4gICAgLy8gQ2FzZSAyLjEgOiB0b2tlbiBmb3VuZC5cbiAgICBhY3RvciA9IE9iamVjdC52YWx1ZXMoZ2FtZS5hY3RvcnMudG9rZW5zKS5maW5kKHQgPT4ge1xuICAgICAgaWYgKHQubmFtZS50b0xvd2VyQ2FzZSgpID09PSBhY3RvclN0cmluZy50b0xvd2VyQ2FzZSgpKSByZXR1cm4gdHJ1ZVxuICAgICAgcmV0dXJuIGZhbHNlXG4gICAgfSlcbiAgICBpZiAoIWFjdG9yKSB7XG4gICAgICAvLyBDYXNlIDIuMiA6IGFjdG9yIGZvdW5kLlxuICAgICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5maW5kKGEgPT4ge1xuICAgICAgICBpZiAoYS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGFjdG9yU3RyaW5nLnRvTG93ZXJDYXNlKCkpIHJldHVybiB0cnVlXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKGFjdG9yKSByZXR1cm4gYWN0b3JcblxuICAgIC8vIC8vIENhc2UgMyBzdHJpbmcgbWF5YmUgYW4gYWN0b3JLZXlcbiAgICAvLyBpZiAoY3JlYXR1cmUuaW5jbHVkZXMoJy4nKSkge1xuICAgIC8vICAgY29uc3QgWywgYWN0b3JJZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgIC8vICAgcmV0dXJuIENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tU3RyaW5nKGFjdG9ySWQpXG4gICAgLy8gfVxuXG4gICAgLy8gTm8gam95XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRDaGFyYWN0ZXJpc3RpY05hbWVzIChjaGFyKSB7XG4gICAgY29uc3QgY2hhcktleSA9IGNoYXIudG9Mb3dlckNhc2UoKVxuXG4gICAgc3dpdGNoIChjaGFyS2V5KSB7XG4gICAgICBjYXNlICdzdHInOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5TVFInKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU3RyZW5ndGgnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdjb24nOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5DT04nKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQ29uc3RpdHV0aW9uJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnc2l6JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuU0laJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlNpemUnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdkZXgnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5ERVgnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRGV4dGVyaXR5JylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnYXBwJzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQVBQJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkFwcGVhcmFuY2UnKVxuICAgICAgICB9XG4gICAgICBjYXNlICdpbnQnOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5JTlQnKSxcbiAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuSW50ZWxsaWdlbmNlJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAncG93JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUE9XJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLlBvd2VyJylcbiAgICAgICAgfVxuICAgICAgY2FzZSAnZWR1JzpcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzaG9ydDogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuRURVJyksXG4gICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpXG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ2x1Y2snOlxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpLFxuICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpXG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgZm9yIChjb25zdCBbLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICAgICAgZ2FtZS5zeXN0ZW0udGVtcGxhdGUuQWN0b3IudGVtcGxhdGVzLmNoYXJhY3RlcmlzdGljcy5jaGFyYWN0ZXJpc3RpY3NcbiAgICAgICAgKSkge1xuICAgICAgICAgIGlmIChjaGFyS2V5ID09PSBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHNob3J0OiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUuc2hvcnQpLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlLmxhYmVsKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIGlmIChTdHJpbmcoZGlmZmljdWx0eSkgPT09ICcwJykgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIGlmICh0eXBlb2YgZGlmZmljdWx0eSAhPT0gJ3N0cmluZycpIHJldHVybiBkaWZmaWN1bHR5XG4gICAgaWYgKCFpc05hTihOdW1iZXIoZGlmZmljdWx0eSkpKSByZXR1cm4gTnVtYmVyKGRpZmZpY3VsdHkpXG5cbiAgICBzd2l0Y2ggKGRpZmZpY3VsdHkpIHtcbiAgICAgIGNhc2UgJz8nOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC51bmtub3duXG4gICAgICBjYXNlICcrJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaGFyZFxuICAgICAgY2FzZSAnKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICcrKysnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5jcml0aWNhbFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBza2lsbENoZWNrTWFjcm8gKHNraWxsLCBldmVudCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHNwZWFrZXIgPSBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKClcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoc3BlYWtlci50b2tlbikgYWN0b3IgPSBnYW1lLmFjdG9ycy50b2tlbnNbc3BlYWtlci50b2tlbl1cbiAgICBpZiAoIWFjdG9yKSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKSAvLyBObyBuZWVkIHRvIGZpbGwgYWN0b3IgdG9rZW5cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLnNraWxsQ2hlY2soc2tpbGwsIGV2ZW50LnNoaWZ0S2V5LCBvcHRpb25zKVxuICB9XG5cbiAgc3RhdGljIHdlYXBvbkNoZWNrTWFjcm8gKHdlYXBvbiwgZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc3BlYWtlciA9IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKVxuICAgIGxldCBhY3RvclxuICAgIGlmIChzcGVha2VyLnRva2VuKSBhY3RvciA9IGdhbWUuYWN0b3JzLnRva2Vuc1tzcGVha2VyLnRva2VuXVxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIGlmIChzcGVha2VyLnNjZW5lICYmIHNwZWFrZXIudG9rZW4pIHtcbiAgICAgICAgLy8gQ3JlYXRlIGEgc3ludGhldGljIGFjdG9yIGxpbmtlZCB3aXRoIHRoZSBhY3RpdmUgdG9rZW4uXG4gICAgICAgIGNvbnN0IGJhc2VBY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgICBjb25zdCBzY2VuZSA9IGdhbWUuc2NlbmVzLmdldChzcGVha2VyLnNjZW5lKVxuICAgICAgICBjb25zdCB0b2tlbiA9IHNjZW5lLnRva2Vucy5nZXQoc3BlYWtlci50b2tlbilcblxuICAgICAgICBjb25zdCBBY3RvckNsYXNzID0gZ2V0RG9jdW1lbnRDbGFzcygnQWN0b3InKVxuICAgICAgICBjb25zdCB0b2tlbkFjdG9yID0gbmV3IEFjdG9yQ2xhc3MoYmFzZUFjdG9yLnRvSlNPTigpLCB7XG4gICAgICAgICAgcGFyZW50OiB0b2tlblxuICAgICAgICB9KVxuICAgICAgICBhY3RvciA9IHRva2VuQWN0b3JcbiAgICAgIH0gZWxzZSBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgIH1cblxuICAgIGlmICghYWN0b3IpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk5vQWN0b3JBdmFpbGFibGUnKSlcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIGFjdG9yLndlYXBvbkNoZWNrKHdlYXBvbiwgZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY2hlY2tNYWNybyAodGhyZXNob2xkID0gdW5kZWZpbmVkLCBldmVudCA9IG51bGwpIHtcbiAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnJvbGxEaWNlKGV2ZW50LCB7IHRocmVzaG9sZCB9KVxuICB9XG5cbiAgc3RhdGljIGNyZWF0ZU1hY3JvIChiYXIsIGRhdGEsIHNsb3QpIHtcbiAgICBpZiAoZGF0YS50eXBlICE9PSAnSXRlbScpIHJldHVyblxuXG4gICAgY29uc3QgaXRlbSA9IGZyb21VdWlkU3luYyhkYXRhLnV1aWQsIGJhcilcblxuICAgIGlmICghaXRlbSkge1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lldhcm5NYWNyb05vSXRlbUZvdW5kJylcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKCEoaXRlbS50eXBlID09PSAnd2VhcG9uJykgJiYgIShpdGVtLnR5cGUgPT09ICdza2lsbCcpKSB7XG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2Fybk1hY3JvSW5jb3JyZWN0VHlwZScpXG4gICAgICApXG4gICAgfVxuXG4gICAgbGV0IGNvbW1hbmQgPSAnJ1xuXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3dlYXBvbicpIHtcbiAgICAgIGNvbW1hbmQgPSBgZ2FtZS5Db0M3Lm1hY3Jvcy53ZWFwb25DaGVjayh7bmFtZTonJHtpdGVtLm5hbWV9JywgdXVpZDonJHtkYXRhLnV1aWR9J30sIGV2ZW50KTtgXG4gICAgfVxuXG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgaWYgKENvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XYXJuTm9HbG9iYWxTcGVjJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgY29tbWFuZCA9IGBnYW1lLkNvQzcubWFjcm9zLnNraWxsQ2hlY2soe25hbWU6JyR7aXRlbS5uYW1lfScsIHV1aWQ6JyR7ZGF0YS51dWlkfSd9LCBldmVudCk7YFxuICAgIH1cblxuICAgIGlmIChjb21tYW5kICE9PSAnJykge1xuICAgICAgLy8gQ3JlYXRlIHRoZSBtYWNybyBjb21tYW5kXG4gICAgICBjb25zdCBtYWNybyA9IGdhbWUubWFjcm9zLmNvbnRlbnRzLmZpbmQoXG4gICAgICAgIG0gPT4gbS5uYW1lID09PSBpdGVtLm5hbWUgJiYgbS5jb21tYW5kID09PSBjb21tYW5kXG4gICAgICApXG4gICAgICBpZiAoIW1hY3JvKSB7XG4gICAgICAgIE1hY3JvLmNyZWF0ZShkdXBsaWNhdGUoe1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICB0eXBlOiAnc2NyaXB0JyxcbiAgICAgICAgICBpbWc6IGl0ZW0uaW1nLFxuICAgICAgICAgIGNvbW1hbmRcbiAgICAgICAgfSkpLnRoZW4obWFjcm8gPT4ge1xuICAgICAgICAgIGdhbWUudXNlci5hc3NpZ25Ib3RiYXJNYWNybyhtYWNybywgc2xvdClcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBnYW1lLnVzZXIuYXNzaWduSG90YmFyTWFjcm8obWFjcm8sIHNsb3QpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyB0b2dnbGVEZXZQaGFzZSAodG9nZ2xlKSB7XG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZUVuYWJsZWQnKVxuICAgICAgICA6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5EZXZQaGFzZURpc2FibGVkJylcbiAgICApXG4gICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCB7XG4gICAgICB0eXBlOiAndXBkYXRlQ2hhcidcbiAgICB9KVxuICAgIENvQzdVdGlsaXRpZXMudXBkYXRlQ2hhclNoZWV0cygpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdG9nZ2xlQ2hhckNyZWF0aW9uICh0b2dnbGUpIHtcbiAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5DaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhckNyZWF0aW9uRGlzYWJsZWQnKVxuICAgIClcbiAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgIHR5cGU6ICd1cGRhdGVDaGFyJ1xuICAgIH0pXG4gICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgICBIb29rcy5jYWxsKCd0b2dnbGVDaGFyQ3JlYXRpb24nLCB0b2dnbGUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZ2V0VGFyZ2V0ICgpIHtcbiAgICBjb25zdCB1c2VycyA9IGdhbWUudXNlcnMuZmlsdGVyKHVzZXIgPT4gdXNlci5hY3RpdmUpXG4gICAgY29uc3QgYWN0b3JzID0gZ2FtZS5hY3RvcnNcbiAgICBsZXQgY2hlY2tPcHRpb25zID0gYDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBuYW1lPVwiQ09DQ2hlY2tBbGxQQ1wiIGlkPVwiQ09DQ2hlY2tBbGxQQ1wiPlxcblxuICAgIDxsYWJlbCBmb3I9XCJDT0NDaGVja0FsbFBDXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuYWxsQWN0b3JzJyl9PC9sYWJlbD5gXG4gICAgY29uc3QgcGxheWVyVG9rZW5JZHMgPSB1c2Vyc1xuICAgICAgLm1hcCh1ID0+IHUuY2hhcmFjdGVyPy5pZClcbiAgICAgIC5maWx0ZXIoaWQgPT4gaWQgIT09IHVuZGVmaW5lZClcbiAgICBjb25zdCBzZWxlY3RlZFBsYXllcklkcyA9IGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5tYXAodG9rZW4gPT4ge1xuICAgICAgcmV0dXJuIHRva2VuLmFjdG9yLmlkXG4gICAgfSlcblxuICAgIC8vIEJ1aWxkIGNoZWNrYm94IGxpc3QgZm9yIGFsbCBhY3RpdmUgcGxheWVyc1xuICAgIGFjdG9ycy5mb3JFYWNoKGFjdG9yID0+IHtcbiAgICAgIGNvbnN0IGNoZWNrZWQgPVxuICAgICAgICAoc2VsZWN0ZWRQbGF5ZXJJZHMuaW5jbHVkZXMoYWN0b3IuaWQpIHx8XG4gICAgICAgICAgcGxheWVyVG9rZW5JZHMuaW5jbHVkZXMoYWN0b3IuaWQpKSAmJlxuICAgICAgICAnY2hlY2tlZCdcbiAgICAgIGNoZWNrT3B0aW9ucyArPSBgXG4gICAgIDxicj5cbiAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIG5hbWU9XCIke2FjdG9yLmlkfVwiIGlkPVwiJHthY3Rvci5pZH1cIiB2YWx1ZT1cIiR7YWN0b3IubmFtZX1cIiAke2NoZWNrZWR9PlxcblxuICAgICA8bGFiZWwgZm9yPVwiJHthY3Rvci5pZH1cIj4ke2FjdG9yLm5hbWV9PC9sYWJlbD5cbiAgICAgICBgXG4gICAgfSlcblxuICAgIG5ldyBEaWFsb2coe1xuICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5kcmVhbWluZycpfWAsXG4gICAgICBjb250ZW50OiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICdDb0M3LnJlc3RUYXJnZXRzJ1xuICAgICAgKX06ICR7Y2hlY2tPcHRpb25zfSA8YnI+YCxcbiAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgd2hpc3Blcjoge1xuICAgICAgICAgIGxhYmVsOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuc3RhcnRSZXN0Jyl9YCxcbiAgICAgICAgICBjYWxsYmFjazogYXN5bmMgaHRtbCA9PiB7XG4gICAgICAgICAgICBjb25zdCB0YXJnZXRzID0gW11cbiAgICAgICAgICAgIGxldCBhbGwgPSBmYWxzZVxuICAgICAgICAgICAgY29uc3QgdXNlcnMgPSBodG1sLmZpbmQoJ1t0eXBlPVwiY2hlY2tib3hcIl0nKVxuICAgICAgICAgICAgZm9yIChjb25zdCB1c2VyIG9mIHVzZXJzKSB7XG4gICAgICAgICAgICAgIGlmICh1c2VyLm5hbWUgPT09ICdDT0NDaGVja0FsbFBDJyAmJiB1c2VyLmNoZWNrZWQpIGFsbCA9IHRydWVcbiAgICAgICAgICAgICAgaWYgKHVzZXIuY2hlY2tlZCB8fCBhbGwpIHRhcmdldHMucHVzaCh1c2VyLmlkKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5zdGFydFJlc3QodGFyZ2V0cylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBzdGFydFJlc3QgKHRhcmdldHMpIHtcbiAgICBpZiAoIXRhcmdldHMubGVuZ3RoKSByZXR1cm5cbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9ycy5maWx0ZXIoYWN0b3IgPT4gdGFyZ2V0cy5pbmNsdWRlcyhhY3Rvci5pZCkpXG4gICAgbGV0IGNoYXRDb250ZW50ID0gYDxpPiR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LmRyZWFtaW5nJyl9Li4uPC9pPjxicj5gXG4gICAgZm9yIChjb25zdCBhY3RvciBvZiBhY3RvcnMpIHtcbiAgICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgICBsZXQgcXVpY2tIZWFsZXIgPSBmYWxzZVxuICAgICAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYWN0b3IuaXRlbXMpIHtcbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAndGFsZW50Jykge1xuICAgICAgICAgICAgaWYgKGl0ZW0ubmFtZSA9PT0gYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LnF1aWNrSGVhbGVyJyl9YCkge1xuICAgICAgICAgICAgICBxdWlja0hlYWxlciA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaXNDcml0aWNhbFdvdW5kcyA9XG4gICAgICAgICAgIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMnKSAmJlxuICAgICAgICAgIGFjdG9yLmhhc0NvbmRpdGlvblN0YXR1cyhDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcylcbiAgICAgICAgY29uc3QgZGFpbHlTYW5pdHlMb3NzID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zc1xuICAgICAgICBjb25zdCBocFZhbHVlID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMuaHAudmFsdWVcbiAgICAgICAgY29uc3QgaHBNYXggPSBhY3Rvci5zeXN0ZW0uYXR0cmlicy5ocC5tYXhcbiAgICAgICAgY29uc3QgbXBWYWx1ZSA9IGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlXG4gICAgICAgIGNvbnN0IG1wTWF4ID0gYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4XG4gICAgICAgIGNvbnN0IHBvdyA9IGFjdG9yLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlXG4gICAgICAgIGNoYXRDb250ZW50ID0gY2hhdENvbnRlbnQgKyBgPGJyPjxiPiR7YWN0b3IubmFtZX0uIDwvYj5gXG4gICAgICAgIGlmIChocFZhbHVlIDwgaHBNYXgpIHtcbiAgICAgICAgICBpZiAoaXNDcml0aWNhbFdvdW5kcyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtyZWRcIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5oYXNDcml0aWNhbFdvdW5kcydcbiAgICAgICAgICAgICAgKX0uIDwvYj5gXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxldCBoZWFsQW1vdW50ID0gMVxuICAgICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlRmFzdGVyUmVjb3ZlcnknKSkge1xuICAgICAgICAgICAgICBoZWFsQW1vdW50ID0gMlxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHF1aWNrSGVhbGVyID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGhlYWxBbW91bnQrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaGVhbEFtb3VudCA9IE1hdGgubWluKGhlYWxBbW91bnQsIGhwTWF4IC0gaHBWYWx1ZSlcbiAgICAgICAgICAgIGlmIChoZWFsQW1vdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAgICdDb0M3LmhlYWx0aFJlY292ZXJlZCdcbiAgICAgICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArXG4gICAgICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICAgICAnQ29DNy5wdWxwSGVhbHRoUmVjb3ZlcmVkJyxcbiAgICAgICAgICAgICAgICAgIHsgbnVtYmVyOiBoZWFsQW1vdW50IH1cbiAgICAgICAgICAgICAgICApfS4gPC9iPmBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6XG4gICAgICAgICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUgKyBoZWFsQW1vdW50XG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoZGFpbHlTYW5pdHlMb3NzID4gMCkge1xuICAgICAgICAgIGNoYXRDb250ZW50ID1cbiAgICAgICAgICAgIGNoYXRDb250ZW50ICtcbiAgICAgICAgICAgIGA8YiBzdHlsZT1cImNvbG9yOmRhcmtvbGl2ZWdyZWVuXCI+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LmRhaWx5U2FuTG9zc1Jlc3RhcnRlZCdcbiAgICAgICAgICAgICl9LjwvYj5gXG4gICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJzogMCxcbiAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMaW1pdCc6IE1hdGguZmxvb3IoYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIC8gNSlcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhvdXJzID0gN1xuICAgICAgICBpZiAoaG91cnMgPiAwICYmIG1wVmFsdWUgPCBtcE1heCkge1xuICAgICAgICAgIGxldCBtYWdpY0Ftb3VudCA9IGhvdXJzICogTWF0aC5jZWlsKHBvdyAvIDEwMClcbiAgICAgICAgICBtYWdpY0Ftb3VudCA9IE1hdGgubWluKG1hZ2ljQW1vdW50LCBtcE1heCAtIG1wVmFsdWUpXG4gICAgICAgICAgY2hhdENvbnRlbnQgPVxuICAgICAgICAgICAgY2hhdENvbnRlbnQgK1xuICAgICAgICAgICAgYDxiIHN0eWxlPVwiY29sb3I6ZGFya29saXZlZ3JlZW5cIj4ke2dhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAgICdDb0M3Lm1hZ2ljUG9pbnRzUmVjb3ZlcmVkJ1xuICAgICAgICAgICAgKX06ICR7bWFnaWNBbW91bnR9LjwvYj5gXG4gICAgICAgICAgYWN0b3IudXBkYXRlKHtcbiAgICAgICAgICAgICdzeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSc6XG4gICAgICAgICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlICsgbWFnaWNBbW91bnRcbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNoYXREYXRhID0ge1xuICAgICAgdXNlcjogZ2FtZS51c2VyLmlkLFxuICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgY29udGVudDogY2hhdENvbnRlbnQsXG4gICAgICB0eXBlOiBDT05TVC5DSEFUX01FU1NBR0VfVFlQRVMuT1RIRVJcbiAgICB9XG4gICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKGNoYXREYXRhKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHRvZ2dsZVhQR2FpbiAodG9nZ2xlKSB7XG4gICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAneHBFbmFibGVkJywgdG9nZ2xlKVxuICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgIHRvZ2dsZVxuICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5YUEdhaW5FbmFibGVkJylcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWFBHYWluRGlzYWJsZWQnKVxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyByb2xsRGljZSAoZXZlbnQsIG9wdGlvbnMgPSB7fSkge1xuICAgIG9wdGlvbnMuYXNrVmFsdWUgPSAhb3B0aW9ucy50aHJlc2hvbGRcbiAgICBsZXQgZGljZU1vZGlmaWVyLCBkaWZmaWN1bHR5LCBmbGF0RGljZU1vZGlmaWVyLCBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICBsZXQgdGhyZXNob2xkID0gb3B0aW9ucy50aHJlc2hvbGRcblxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMubW9kaWZpZXIpIGRpY2VNb2RpZmllciA9IE51bWJlcihvcHRpb25zLm1vZGlmaWVyKVxuICAgIGlmICh1bmRlZmluZWQgIT09IG9wdGlvbnMuZGlmZmljdWx0eSkge1xuICAgICAgZGlmZmljdWx0eSA9IENvQzdVdGlsaXRpZXMuY29udmVydERpZmZpY3VsdHkob3B0aW9ucy5kaWZmaWN1bHR5KVxuICAgIH1cblxuICAgIGlmICghZXZlbnQ/LnNoaWZ0S2V5ICYmICFvcHRpb25zLmZhc3RGb3J3YXJkKSB7XG4gICAgICBjb25zdCB1c2FnZSA9IGF3YWl0IFJvbGxEaWFsb2cuY3JlYXRlKG9wdGlvbnMpXG4gICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgZGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnYm9udXNEaWNlJykpXG4gICAgICAgIGRpZmZpY3VsdHkgPSBOdW1iZXIodXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JykpXG4gICAgICAgIHRocmVzaG9sZCA9IE51bWJlcih1c2FnZS5nZXQoJ3RocmVzaG9sZCcpKVxuICAgICAgICBmbGF0RGljZU1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdERpY2VNb2RpZmllcicpKVxuICAgICAgICBmbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdmbGF0VGhyZXNob2xkTW9kaWZpZXInKSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBhY3RvcnMgPSBbXVxuXG4gICAgaWYgKGdhbWUudXNlci5pc0dNICYmIGNhbnZhcy50b2tlbnMuY29udHJvbGxlZC5sZW5ndGgpIHtcbiAgICAgIGZvciAoY29uc3QgdG9rZW4gb2YgY2FudmFzLnRva2Vucy5jb250cm9sbGVkKSB7XG4gICAgICAgIGFjdG9ycy5wdXNoKHRva2VuLmFjdG9yLnRva2VuS2V5KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZ2FtZS51c2VyLmNoYXJhY3Rlcikge1xuICAgICAgYWN0b3JzLnB1c2goZ2FtZS51c2VyLmNoYXJhY3Rlci50b2tlbktleSlcbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IHRrIG9mIGFjdG9ycykge1xuICAgICAgY29uc3QgY2hlY2sgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIGNoZWNrLmRpY2VNb2RpZmllciA9IGRpY2VNb2RpZmllciB8fCAwXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eSB8fCBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIGNoZWNrLnJhd1ZhbHVlID0gdGhyZXNob2xkXG4gICAgICBjaGVjay5mbGF0RGljZU1vZGlmaWVyID0gZmxhdERpY2VNb2RpZmllclxuICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gZmxhdFRocmVzaG9sZE1vZGlmaWVyXG4gICAgICBjaGVjay5hY3RvciA9IHRrXG4gICAgICBhd2FpdCBjaGVjay5yb2xsKClcbiAgICAgIGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuXG4gICAgaWYgKCFhY3RvcnMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gZGljZU1vZGlmaWVyIHx8IDBcbiAgICAgIGNoZWNrLmRpZmZpY3VsdHkgPSBkaWZmaWN1bHR5IHx8IENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgICAgY2hlY2sucmF3VmFsdWUgPSB0aHJlc2hvbGRcbiAgICAgIGNoZWNrLmZsYXREaWNlTW9kaWZpZXIgPSBmbGF0RGljZU1vZGlmaWVyXG4gICAgICBjaGVjay5mbGF0VGhyZXNob2xkTW9kaWZpZXIgPSBmbGF0VGhyZXNob2xkTW9kaWZpZXJcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdXBkYXRlQ2hhclNoZWV0cyAoKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBmb3IgKGNvbnN0IGEgb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgICAgaWYgKGE/LnR5cGUgPT09ICdjaGFyYWN0ZXInICYmIGE/LnNoZWV0ICYmIGE/LnNoZWV0Py5yZW5kZXJlZCkge1xuICAgICAgICAgIGEudXBkYXRlKHsgJ3N5c3RlbS5mbGFncy5sb2NrZWQnOiB0cnVlIH0pXG4gICAgICAgICAgYS5yZW5kZXIoZmFsc2UpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZm9yIChjb25zdCBhIG9mIGdhbWUuYWN0b3JzLmNvbnRlbnRzKSB7XG4gICAgICAgIGlmIChhLmlzT3duZXIpIHtcbiAgICAgICAgICBhLnVwZGF0ZSh7ICdzeXN0ZW0uZmxhZ3MubG9ja2VkJzogdHJ1ZSB9KVxuICAgICAgICAgIGEucmVuZGVyKGZhbHNlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxlZCBmcm9tIF9vbkRyb3AgdG8gZ2V0IHRoZSBkcm9wcGVkIGVudGl0eVR5cGUgb3IgZW50aXR5VHlwZSBmcm9tIGEgZm9sZGVyXG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIFtpdGVtc10gYXJyYXkgb2YgaXRlbXNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBnZXREYXRhRnJvbURyb3BFdmVudCAoZXZlbnQsIGVudGl0eVR5cGUgPSAnSXRlbScpIHtcbiAgICBpZiAoZXZlbnQub3JpZ2luYWxFdmVudCkgcmV0dXJuIFtdXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGRhdGFMaXN0ID0gSlNPTi5wYXJzZShldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpKVxuICAgICAgaWYgKGRhdGFMaXN0LnR5cGUgPT09ICdGb2xkZXInICYmIGRhdGFMaXN0LmRvY3VtZW50TmFtZSA9PT0gZW50aXR5VHlwZSkge1xuICAgICAgICBjb25zdCBmb2xkZXIgPSBhd2FpdCBmcm9tVXVpZChkYXRhTGlzdC51dWlkKVxuICAgICAgICBpZiAoIWZvbGRlcikgcmV0dXJuIFtdXG4gICAgICAgIHJldHVybiBmb2xkZXIuY29udGVudHNcbiAgICAgIH0gZWxzZSBpZiAoZGF0YUxpc3QudHlwZSA9PT0gZW50aXR5VHlwZSkge1xuICAgICAgICBjb25zdCBpdGVtID0gYXdhaXQgZnJvbVV1aWQoZGF0YUxpc3QudXVpZClcbiAgICAgICAgaWYgKCFpdGVtKSByZXR1cm4gW11cbiAgICAgICAgcmV0dXJuIFtpdGVtXVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtdXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY29weVRvQ2xpcGJvYXJkICh0ZXh0KSB7XG4gICAgdHJ5IHtcbiAgICAgIGlmIChuYXZpZ2F0b3IuY2xpcGJvYXJkICYmIHdpbmRvdy5pc1NlY3VyZUNvbnRleHQpIHtcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB0ZXh0QXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJylcbiAgICAgICAgdGV4dEFyZWEudmFsdWUgPSB0ZXh0XG4gICAgICAgIHRleHRBcmVhLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJ1xuICAgICAgICB0ZXh0QXJlYS5zdHlsZS5sZWZ0ID0gJy05OTlweCdcbiAgICAgICAgdGV4dEFyZWEuc3R5bGUudG9wID0gJy05OTlweCdcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0ZXh0QXJlYSlcbiAgICAgICAgdGV4dEFyZWEuZm9jdXMoKVxuICAgICAgICB0ZXh0QXJlYS5zZWxlY3QoKVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5JylcbiAgICAgICAgICAgID8gcmVzb2x2ZSgpXG4gICAgICAgICAgICA6IHJlamVjdChcbiAgICAgICAgICAgICAgbmV3IEVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0NvcHlUb0NsaXBib2FyZCcpKVxuICAgICAgICAgICAgKVxuICAgICAgICAgIHRleHRBcmVhLnJlbW92ZSgpXG4gICAgICAgIH0pLmNhdGNoKGVyciA9PiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVycikpXG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5VbmFibGVUb0NvcHlUb0NsaXBib2FyZCcpKVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBxdW90ZVJlZ0V4cCAoc3RyaW5nKSB7XG4gICAgLy8gaHR0cHM6Ly9iaXRidWNrZXQub3JnL2NnZ2FlcnRuZXIvanMtaGFja3MvcmF3L21hc3Rlci9xdW90ZS5qc1xuICAgIGNvbnN0IGxlbiA9IHN0cmluZy5sZW5ndGhcbiAgICBsZXQgcVN0cmluZyA9ICcnXG5cbiAgICBmb3IgKGxldCBjdXJyZW50LCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XG4gICAgICBjdXJyZW50ID0gc3RyaW5nLmNoYXJBdChpKVxuXG4gICAgICBpZiAoY3VycmVudCA+PSAnICcgJiYgY3VycmVudCA8PSAnficpIHtcbiAgICAgICAgaWYgKGN1cnJlbnQgPT09ICdcXFxcJyB8fCBjdXJyZW50ID09PSBcIidcIikge1xuICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFwnXG4gICAgICAgIH1cblxuICAgICAgICBxU3RyaW5nICs9IGN1cnJlbnQucmVwbGFjZSgvWy1bXFxdL3t9KCkqKz8uXFxcXF4kfF0vZywgJ1xcXFwkJicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzd2l0Y2ggKGN1cnJlbnQpIHtcbiAgICAgICAgICBjYXNlICdcXGInOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXGInXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFxmJzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFxmJ1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcbic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcbidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdcXHInOlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHInXG4gICAgICAgICAgICBicmVha1xuXG4gICAgICAgICAgY2FzZSAnXFx0JzpcbiAgICAgICAgICAgIHFTdHJpbmcgKz0gJ1xcXFx0J1xuICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICAgIGNhc2UgJ1xcdic6XG4gICAgICAgICAgICBxU3RyaW5nICs9ICdcXFxcdidcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcVN0cmluZyArPSAnXFxcXHUnXG4gICAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KVxuICAgICAgICAgICAgZm9yIChsZXQgaiA9IDQ7IC0taiA+PSBjdXJyZW50Lmxlbmd0aDsgcVN0cmluZyArPSAnMCcpO1xuICAgICAgICAgICAgcVN0cmluZyArPSBjdXJyZW50XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcVN0cmluZ1xuICB9XG5cbiAgc3RhdGljIHNldEJ5UGF0aCAob2JqLCBwYXRoLCB2YWx1ZSkge1xuICAgIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gICAgbGV0IG8gPSBvYmpcbiAgICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgICAgaWYgKCFvW3BhcnRzW2ldXSkgb1twYXJ0c1tpXV0gPSB7fVxuICAgICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXSA9IHZhbHVlXG4gIH1cblxuICBzdGF0aWMgZ2V0QnlQYXRoIChvYmosIHBhdGgpIHtcbiAgICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKVxuICAgIGxldCBvID0gb2JqXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICAgIGlmICghb1twYXJ0c1tpXV0pIHJldHVybiB1bmRlZmluZWRcbiAgICAgICAgbyA9IG9bcGFydHNbaV1dXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9bcGFydHNbcGFydHMubGVuZ3RoIC0gMV1dXG4gIH1cblxuICAvKipcbiAgICogUmV0cmlldmUgYSBEb2N1bWVudCBieSBpdHMgVW5pdmVyc2FsbHkgVW5pcXVlIElkZW50aWZpZXIgKHV1aWQpLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdXVpZCAgIFRoZSB1dWlkIG9mIHRoZSBEb2N1bWVudCB0byByZXRyaWV2ZVxuICAgKiBAcmV0dXJuIHtQcm9taXNlPERvY3VtZW50fG51bGw+fVxuICAgKi9cbiAgc3RhdGljIFNmcm9tVXVpZCAodXVpZCkge1xuICAgIGxldCBwYXJ0cyA9IHV1aWQuc3BsaXQoJy4nKVxuICAgIGxldCBkb2NcblxuICAgIC8vIENvbXBlbmRpdW0gRG9jdW1lbnRzXG4gICAgaWYgKHBhcnRzWzBdID09PSAnQ29tcGVuZGl1bScpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgICAvLyByZXR1cm4gZnJvbVV1aWQodXVpZCkgLy8gUmV0dXJuIFByb21pc2VcbiAgICAgIC8vIHBhcnRzLnNoaWZ0KCk7XG4gICAgICAvLyBjb25zdCBbc2NvcGUsIHBhY2tOYW1lLCBpZF0gPSBwYXJ0cy5zbGljZSgwLCAzKTtcbiAgICAgIC8vIHBhcnRzID0gcGFydHMuc2xpY2UoMyk7XG4gICAgICAvLyBjb25zdCBwYWNrID0gZ2FtZS5wYWNrcy5nZXQoYCR7c2NvcGV9LiR7cGFja05hbWV9YCk7XG4gICAgICAvLyByZXR1cm4gYXdhaXQgcGFjaz8uZ2V0RG9jdW1lbnQoaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXb3JsZCBEb2N1bWVudHNcbiAgICAgIGNvbnN0IFtkb2NOYW1lLCBkb2NJZF0gPSBwYXJ0cy5zbGljZSgwLCAyKVxuICAgICAgcGFydHMgPSBwYXJ0cy5zbGljZSgyKVxuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IENPTkZJR1tkb2NOYW1lXS5jb2xsZWN0aW9uLmluc3RhbmNlXG4gICAgICBkb2MgPSBjb2xsZWN0aW9uLmdldChkb2NJZClcbiAgICB9XG5cbiAgICAvLyBFbWJlZGRlZCBEb2N1bWVudHNcbiAgICB3aGlsZSAoZG9jICYmIHBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IFtlbWJlZGRlZE5hbWUsIGVtYmVkZGVkSWRdID0gcGFydHMuc2xpY2UoMCwgMilcbiAgICAgIGRvYyA9IGRvYy5nZXRFbWJlZGRlZERvY3VtZW50KGVtYmVkZGVkTmFtZSwgZW1iZWRkZWRJZClcbiAgICAgIHBhcnRzID0gcGFydHMuc2xpY2UoMilcbiAgICB9XG4gICAgcmV0dXJuIGRvYyB8fCBudWxsXG4gIH1cblxuICBzdGF0aWMgaXNEb2N1bWVudFV1aWRQYWNrICh1dWlkKSB7XG4gICAgaWYgKHV1aWQuaW5jbHVkZXMoJ0NvbXBlbmRpdW0nKSkgcmV0dXJuIHRydWVcbiAgICBlbHNlIHJldHVybiBmYWxzZVxuICB9XG5cbiAgc3RhdGljIGlzRG9jdW1lbnRVdWlkICh1dWlkKSB7XG4gICAgY29uc3QgaWRlbnRpZmllcnMgPSBbJ0FjdG9yJywgJ1NjZW5lJywgJ1Rva2VuJywgJ0l0ZW0nLCAnQ29tcGVuZGl1bSddXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHV1aWQuaW5jbHVkZXMoaWRlbnRpZmllcnNbaV0pKSByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhIChkcm9wRGF0YSkge1xuICAgIGxldCBkb2NVdWlkLCBhY3RvclxuICAgIGlmIChkcm9wRGF0YS50b2tlblV1aWQpIHtcbiAgICAgIGRvY1V1aWQgPSBkcm9wRGF0YS50b2tlblV1aWRcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBkcm9wRGF0YS51dWlkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZG9jVXVpZCA9IGRyb3BEYXRhLnV1aWRcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jVXVpZCA9XG4gICAgICAgIGRyb3BEYXRhLnNjZW5lSWQgJiYgZHJvcERhdGEudG9rZW5JZFxuICAgICAgICAgID8gYFNjZW5lLiR7ZHJvcERhdGEuc2NlbmVJZH0uVG9rZW4uJHtkcm9wRGF0YS50b2tlbklkfWBcbiAgICAgICAgICA6IGRyb3BEYXRhLmFjdG9ySWQgfHwgZHJvcERhdGEuYWN0b3JLZXkgfHwgZHJvcERhdGEuaWRcbiAgICB9XG4gICAgaWYgKGRyb3BEYXRhLnR5cGUgPT09ICdUb2tlbicpIHtcbiAgICAgIGRvY1V1aWQgPSBkcm9wRGF0YS51dWlkXG4gICAgfSBlbHNlIGlmIChkb2NVdWlkKSB7XG4gICAgICBhY3RvciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KGRvY1V1aWQpXG4gICAgICBpZiAoIWFjdG9yICYmIGRyb3BEYXRhLnR5cGUgPT09ICdJdGVtJykgZG9jVXVpZCA9IG51bGxcbiAgICB9XG5cbiAgICBpZiAoYWN0b3IgJiYgZG9jVXVpZCAhPT0gYWN0b3IudXVpZCkge1xuICAgICAgZG9jVXVpZCA9IGFjdG9yLnV1aWRcbiAgICB9XG4gICAgcmV0dXJuIGRvY1V1aWRcbiAgfVxuXG4gIHN0YXRpYyBnZXREb2N1bWVudEZyb21LZXkgKGtleSkge1xuICAgIGlmICgha2V5KSByZXR1cm4gbnVsbFxuICAgIC8vIENhc2UgMCAtIGEgZG9jdW1lbnQgVXVpZFxuICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkKGtleSkpIHtcbiAgICAgIGlmIChDb0M3VXRpbGl0aWVzLmlzRG9jdW1lbnRVdWlkUGFjayhrZXkpKSByZXR1cm4gZnJvbVV1aWQoa2V5KSAvLyBUT0RPIENoZWNrIHdlIGNhbiBkbyB0aGF0XG4gICAgICByZXR1cm4gQ29DN1V0aWxpdGllcy5TZnJvbVV1aWQoa2V5KVxuICAgIH1cblxuICAgIC8vIENhc2UgMSAtIGEgc3ludGhldGljIGFjdG9yIGZyb20gYSBUb2tlblxuICAgIGlmIChrZXkuaW5jbHVkZXMoJy4nKSkge1xuICAgICAgLy8gUkVGQUNUT1JJTkcgKDIpXG4gICAgICBjb25zdCBbc2NlbmVJZCwgdG9rZW5JZF0gPSBrZXkuc3BsaXQoJy4nKVxuICAgICAgaWYgKHNjZW5lSWQgPT09ICdUT0tFTicpIHtcbiAgICAgICAgcmV0dXJuIGdhbWUuYWN0b3JzLnRva2Vuc1t0b2tlbklkXSAvLyBSRUZBQ1RPUklORyAoMilcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNjZW5lID0gZ2FtZS5zY2VuZXMuZ2V0KHNjZW5lSWQpXG4gICAgICBpZiAoIXNjZW5lKSByZXR1cm4gbnVsbFxuICAgICAgY29uc3QgdG9rZW5EYXRhID0gc2NlbmUuZ2V0RW1iZWRkZWREb2N1bWVudCgnVG9rZW4nLCB0b2tlbklkKVxuICAgICAgaWYgKCF0b2tlbkRhdGEpIHJldHVybiBudWxsXG4gICAgICBjb25zdCB0b2tlbiA9IG5ldyBUb2tlbih0b2tlbkRhdGEpXG4gICAgICBpZiAoIXRva2VuLnNjZW5lKSB0b2tlbi5zY2VuZSA9IGR1cGxpY2F0ZShzY2VuZSlcbiAgICAgIHJldHVybiB0b2tlblxuICAgIH1cbiAgICAvLyBDYXNlIDIgLSB1c2UgQWN0b3IgSUQgZGlyZWN0b3J5XG4gICAgcmV0dXJuIGdhbWUuYWN0b3JzLmdldChrZXkpIHx8IG51bGxcbiAgfVxuXG4gIHN0YXRpYyBnZXRBY3RvckZyb21LZXkgKGtleSkge1xuICAgIGNvbnN0IGRvYyA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KGtleSlcbiAgICBpZiAoIWRvYykgcmV0dXJuIG51bGxcbiAgICBpZiAoZG9jLmFjdG9yKSByZXR1cm4gZG9jLmFjdG9yXG4gICAgaWYgKGRvYy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ0NvQ0FjdG9yJykgcmV0dXJuIGRvY1xuICAgIHJldHVybiBudWxsXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGZvbGRlciBvbiB0aGUgYWN0b3JzIHRhYiBjYWxsZWQgXCJJbXBvcnRlZCBDaGFyYWN0ZXJzXCIgaWYgdGhlIGZvbGRlciBkb2Vzbid0IGV4aXN0LlxuICAgKiBAcmV0dXJucyB7Rm9sZGVyfSB0aGUgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzICgpIHtcbiAgICBsZXQgZm9sZGVyTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5JbXBvcnRlZENoYXJhY3RlcnNGb2xkZXInKVxuICAgIGlmIChmb2xkZXJOYW1lID09PSAnQ29DNy5JbXBvcnRlZENoYXJhY3RlcnNGb2xkZXInKSB7XG4gICAgICBmb2xkZXJOYW1lID0gJ0ltcG9ydGVkIGNoYXJhY3RlcnMnXG4gICAgfVxuICAgIGxldCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPSBnYW1lLmZvbGRlcnMuZmluZChcbiAgICAgIGVudHJ5ID0+IGVudHJ5Lm5hbWUgPT09IGZvbGRlck5hbWUgJiYgZW50cnkudHlwZSA9PT0gJ0FjdG9yJ1xuICAgIClcbiAgICBpZiAoXG4gICAgICBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPT09IG51bGwgfHxcbiAgICAgIHR5cGVvZiBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICAvLyBDcmVhdGUgdGhlIGZvbGRlclxuICAgICAgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID0gYXdhaXQgRm9sZGVyLmNyZWF0ZSh7XG4gICAgICAgIG5hbWU6IGZvbGRlck5hbWUsXG4gICAgICAgIHR5cGU6ICdBY3RvcicsXG4gICAgICAgIHBhcmVudDogbnVsbFxuICAgICAgfSlcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyZWF0ZWRJbXBvcnRlZENoYXJhY3RlcnNGb2xkZXInKVxuICAgICAgKVxuICAgIH1cbiAgICByZXR1cm4gaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyXG4gIH1cblxuICAvKipcbiAgICogZ3Vlc3NJdGVtLCB0cnkgYW5kIGZpbmQgdGhlIGl0ZW0gaW4gdGhlIGxvY2F0aW9ucyBkZWZpbmVkIGluICR7c291cmNlfSBpID0gSXRlbSBEaXJlY3RvcnksIHcgPSBXb3JsZCBDb21wZW5kaXVtcywgbSA9IE1vZHVsZSBDb21wZW5kaXVtcywgcyA9IFN5c3RlbSBDb21wZW5kaXVtc1xuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZSBJdGVtIHR5cGUgdG8gZmluZFxuICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIGl0ZW0gdG8gZmluZFxuICAgKiBAcGFyYW0ge09iamVjdH0gY29tYmF0IG51bGwgKGRlZmF1bHQpLiBJZiBib29sZWFuIGNvbWJhdCBwcm9wZXJ0eSBvZiBza2lsbCBtdXN0IG1hdGNoXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgJycgKGRlZmF1bHQpLiBDaGVjayBvcmRlclxuICAgKiBAcGFyYW0ge09iamVjdH0gZmFsbGJhY2tBbnkgZmFsc2UgKGRlZmF1bHQpLiBTaG91bGQgYW55IHNwZWNpYWxpemF0aW9uIHRoYXQgaXNuJ3QgZm91bmQgdHJ5IHVzaW5nIChBbnkpIGl0ZW1zXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGZvcm1hdHRlZCBBY3RvciBkYXRhIEl0ZW0gb3IgbnVsbFxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGd1ZXNzSXRlbSAoXG4gICAgdHlwZSxcbiAgICBuYW1lLFxuICAgIHsgY29tYmF0ID0gbnVsbCwgc291cmNlID0gJycsIGZhbGxiYWNrQW55ID0gZmFsc2UgfSA9IHt9XG4gICkge1xuICAgIGxldCBleGlzdGluZyA9IG51bGxcbiAgICBuYW1lID0gbmFtZS50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgZm9yIChsZXQgbyA9IDAsIG9NID0gc291cmNlLmxlbmd0aDsgbyA8IG9NOyBvKyspIHtcbiAgICAgIHN3aXRjaCAoc291cmNlLnN1YnN0cmluZyhvLCBvICsgMSkpIHtcbiAgICAgICAgY2FzZSAnaSc6XG4gICAgICAgICAgZXhpc3RpbmcgPSBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgICBpdGVtID0+IGl0ZW0udHlwZSA9PT0gdHlwZSAmJlxuICAgICAgICAgICAgICBpdGVtLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSAmJlxuICAgICAgICAgICAgICAoY29tYmF0ID09PSBudWxsIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSBjb21iYXQpXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmIChleGlzdGluZykge1xuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3cnOlxuICAgICAgICBjYXNlICdtJzpcbiAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgcGFjay5tZXRhZGF0YS50eXBlID09PSAnSXRlbScgJiZcbiAgICAgICAgICAgICAgKChzb3VyY2Vbb10gPT09ICd3JyAmJiBwYWNrLm1ldGFkYXRhLnBhY2thZ2UgPT09ICd3b3JsZCcpIHx8XG4gICAgICAgICAgICAgICAgKHNvdXJjZVtvXSA9PT0gJ1MnICYmIHBhY2subWV0YWRhdGEucGFja2FnZSA9PT0gJ0NvQzcnKSB8fFxuICAgICAgICAgICAgICAgIChzb3VyY2Vbb10gPT09ICdzJyAmJlxuICAgICAgICAgICAgICAgICAgIVsnd29ybGQnLCAnQ29DNyddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEucGFja2FnZSkpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGRvY3VtZW50cyA9IGF3YWl0IHBhY2suZ2V0RG9jdW1lbnRzKClcbiAgICAgICAgICAgICAgZXhpc3RpbmcgPSBkb2N1bWVudHMuZmluZChcbiAgICAgICAgICAgICAgICBpdGVtID0+XG4gICAgICAgICAgICAgICAgICBpdGVtLnR5cGUgPT09IHR5cGUgJiZcbiAgICAgICAgICAgICAgICAgIGl0ZW0ubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lICYmXG4gICAgICAgICAgICAgICAgICAoY29tYmF0ID09PSBudWxsIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID09PSBjb21iYXQpXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaWYgKGV4aXN0aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGZhbGxiYWNrQW55ICYmIHR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgIGNvbnN0IG1hdGNoID0gbmFtZS5tYXRjaCgvXiguKyBcXCgpKD8hYW55KS4rKFxcKSkkLylcbiAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICByZXR1cm4gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICBtYXRjaFsxXSArICdhbnknICsgbWF0Y2hbMl0sXG4gICAgICAgICAgeyBjb21iYXQsIHNvdXJjZSB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgdG9LZWJhYkNhc2UgKHMpIHtcbiAgICBpZiAoIXMpIHtcbiAgICAgIHJldHVybiAnJ1xuICAgIH1cbiAgICBjb25zdCBtYXRjaCA9IHMubWF0Y2goL1tBLVpdezIsfSg/PVtBLVpdW2Etel0rWzAtOV0qfFxcYil8W0EtWl0/W2Etel0rWzAtOV0qfFtBLVpdfFswLTldKy9nKVxuXG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuICcnXG4gICAgfVxuXG4gICAgcmV0dXJuIG1hdGNoLmpvaW4oJy0nKS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICBzdGF0aWMgc29ydEJ5TmFtZUtleSAoYSwgYikge1xuICAgIHJldHVybiBhLm5hbWVcbiAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAucmVwbGFjZSgvW1xcdTAzMDAtXFx1MDM2Zl0vZywgJycpXG4gICAgICAudG9Mb2NhbGVMb3dlckNhc2UoKVxuICAgICAgLmxvY2FsZUNvbXBhcmUoXG4gICAgICAgIGIubmFtZVxuICAgICAgICAgIC5ub3JtYWxpemUoJ05GRCcpXG4gICAgICAgICAgLnJlcGxhY2UoL1tcXHUwMzAwLVxcdTAzNmZdL2csICcnKVxuICAgICAgICAgIC50b0xvY2FsZUxvd2VyQ2FzZSgpXG4gICAgICApXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIGZsYXR0ZW5PYmplY3QsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DSURFZGl0b3IgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnLCAnY29jLWlkLWVkaXRvciddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY29jLWlkLWVkaXRvci5oYnMnLFxuICAgICAgd2lkdGg6IDkwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgdGl0bGU6ICdDb0M3LkNvQ0lERmxhZy50aXRsZScsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2xvc2U6IHRydWUsXG4gICAgICBzdWJtaXRPbkNoYW5nZTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5zdXBwb3J0ZWRMYW5ndWFnZXMgPSBDT05GSUcuc3VwcG9ydGVkTGFuZ3VhZ2VzXG5cbiAgICB0aGlzLm9wdGlvbnMuZWRpdGFibGUgPSB0aGlzLm9iamVjdC5zaGVldC5pc0VkaXRhYmxlXG5cbiAgICBzaGVldERhdGEuZ3Vlc3NDb2RlID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmd1ZXNzSWQodGhpcy5vYmplY3QpXG4gICAgc2hlZXREYXRhLmlkUHJlZml4ID0gZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmdldFByZWZpeCh0aGlzLm9iamVjdClcblxuICAgIHNoZWV0RGF0YS5jb2NpZEZsYWcgPSB0aGlzLm9iamVjdC5mbGFncz8uQ29DNz8uY29jaWRGbGFnXG5cbiAgICBzaGVldERhdGEuaWQgPSBzaGVldERhdGEuY29jaWRGbGFnPy5pZCB8fCAnJ1xuICAgIHNoZWV0RGF0YS5sYW5nID0gc2hlZXREYXRhLmNvY2lkRmxhZz8ubGFuZyB8fCBnYW1lLmkxOG4ubGFuZ1xuICAgIHNoZWV0RGF0YS5wcmlvcml0eSA9IHNoZWV0RGF0YS5jb2NpZEZsYWc/LnByaW9yaXR5IHx8IDBcblxuICAgIHNoZWV0RGF0YS5lcmFzID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICBzaGVldERhdGEuZXJhcy5wdXNoKHtcbiAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKHZhbHVlKSxcbiAgICAgICAgaXNFbmFibGVkOiAoc2hlZXREYXRhLmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLmVyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICBjb25zdCBDb0NJREtleXMgPSBmbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi50cmFuc2xhdGlvbnMuQ29DNy5Db0NJREZsYWcua2V5cyA/PyB7fSlcbiAgICBjb25zdCBwcmVmaXggPSBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoc2hlZXREYXRhLmlkUHJlZml4KSlcbiAgICBzaGVldERhdGEuZXhpc3RpbmdLZXlzID0gT2JqZWN0LmtleXMoQ29DSURLZXlzKS5yZWR1Y2UoKG9iaiwgaykgPT4ge1xuICAgICAgaWYgKGsubWF0Y2gocHJlZml4KSkge1xuICAgICAgICBvYmoucHVzaCh7IGssIG5hbWU6IENvQ0lES2V5c1trXSB9KVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9ialxuICAgIH0sIFtdKS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5pc1N5c3RlbUlEID0gKHR5cGVvZiBDb0NJREtleXNbc2hlZXREYXRhLmlkXSAhPT0gJ3VuZGVmaW5lZCcpXG4gICAgY29uc3QgbWF0Y2ggPSBzaGVldERhdGEuaWQubWF0Y2goL14oW15cXFxcLl0rKVxcLihbXlxcXFwuXSopXFwuKC4rKS8pXG4gICAgc2hlZXREYXRhLl9leGlzdGluZyA9IChtYXRjaCAmJiB0eXBlb2YgbWF0Y2hbM10gIT09ICd1bmRlZmluZWQnID8gbWF0Y2hbM10gOiAnJylcblxuICAgIGlmIChzaGVldERhdGEuaWQgJiYgc2hlZXREYXRhLmxhbmcpIHtcbiAgICAgIC8vIEZpbmQgb3V0IGlmIHRoZXJlIGV4aXN0cyBhIGR1cGxpY2F0ZSBDb0NJRFxuICAgICAgY29uc3Qgd29ybGREb2N1bWVudHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEQWxsKHtcbiAgICAgICAgY29jaWQ6IHNoZWV0RGF0YS5pZCxcbiAgICAgICAgbGFuZzogc2hlZXREYXRhLmxhbmcsXG4gICAgICAgIHNjb3BlOiAnd29ybGQnXG4gICAgICB9KVxuICAgICAgY29uc3QgdXNlZEVyYXMgPSB7fVxuICAgICAgY29uc3QgdW5pcXVlV29ybGRQcmlvcml0eSA9IHt9XG4gICAgICBzaGVldERhdGEud29ybGREb2N1bWVudEluZm8gPSB3b3JsZERvY3VtZW50cy5tYXAoKGQpID0+IHtcbiAgICAgICAgaWYgKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodW5pcXVlV29ybGRQcmlvcml0eSwgZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF0pKSB7XG4gICAgICAgICAgICAgIHVuaXF1ZVdvcmxkUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvJyArIGVbMF1dID0gMFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdW5pcXVlV29ybGRQcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXV0rK1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1bmlxdWVXb3JsZFByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLyonXSA9IDFcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlcmFzID0gKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcyA/IE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4gZVswXSkuc29ydCgpIDogW10pXG4gICAgICAgIGZvciAoY29uc3QgZXJhIG9mIGVyYXMpIHtcbiAgICAgICAgICB1c2VkRXJhc1tlcmFdID0gQ09DNy5lcmFzW2VyYV0gPz8gJz8nXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBlcmFzOiBlcmFzLnJlZHVjZShmdW5jdGlvbiAoYWxsLCBjdXJyZW50KSB7XG4gICAgICAgICAgICBhbGxbY3VycmVudF0gPSB0cnVlXG4gICAgICAgICAgICByZXR1cm4gYWxsXG4gICAgICAgICAgfSwge30pLFxuICAgICAgICAgIHByaW9yaXR5OiBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5LFxuICAgICAgICAgIGxhbmc6IGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcubGFuZyA/PyAnZW4nLFxuICAgICAgICAgIGxpbms6IFRleHRFZGl0b3IuZW5yaWNoSFRNTChkLmxpbmssIHsgYXN5bmM6IGZhbHNlIH0pLFxuICAgICAgICAgIGZvbGRlcjogZD8uZm9sZGVyPy5uYW1lXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBpZiAoT2JqZWN0LmVudHJpZXModW5pcXVlV29ybGRQcmlvcml0eSkuZmlsdGVyKGMgPT4gY1sxXSA+IDEpLmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2hlZXREYXRhLndhcm5EdXBsaWNhdGVXb3JsZFByaW9yaXR5ID0gdHJ1ZVxuICAgICAgfVxuICAgICAgc2hlZXREYXRhLndvcmxkRHVwbGljYXRlcyA9IHdvcmxkRG9jdW1lbnRzLmxlbmd0aCA/PyAwXG5cbiAgICAgIGNvbnN0IGNvbXBlbmRpdW1Eb2N1bWVudHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEQWxsKHtcbiAgICAgICAgY29jaWQ6IHNoZWV0RGF0YS5pZCxcbiAgICAgICAgbGFuZzogc2hlZXREYXRhLmxhbmcsXG4gICAgICAgIHNjb3BlOiAnY29tcGVuZGl1bXMnXG4gICAgICB9KVxuICAgICAgY29uc3QgdW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5ID0ge31cbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRG9jdW1lbnRJbmZvID0gY29tcGVuZGl1bURvY3VtZW50cy5tYXAoKGQpID0+IHtcbiAgICAgICAgaWYgKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykge1xuICAgICAgICAgIE9iamVjdC5lbnRyaWVzKGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcykuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5LCBkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXSkpIHtcbiAgICAgICAgICAgICAgdW5pcXVlQ29tcGVuZGl1bVByaW9yaXR5W2QuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHkgKyAnLycgKyBlWzBdXSA9IDBcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVuaXF1ZUNvbXBlbmRpdW1Qcmlvcml0eVtkLmZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5ICsgJy8nICsgZVswXV0rK1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHlbZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5wcmlvcml0eSArICcvKiddID0gMVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGVyYXMgPSAoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzID8gT2JqZWN0LmVudHJpZXMoZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzKS5maWx0ZXIoZSA9PiBlWzFdKS5tYXAoZSA9PiBlWzBdKS5zb3J0KCkgOiBbXSlcbiAgICAgICAgZm9yIChjb25zdCBlcmEgb2YgZXJhcykge1xuICAgICAgICAgIHVzZWRFcmFzW2VyYV0gPSBDT0M3LmVyYXNbZXJhXSA/PyAnPydcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGVyYXM6IGVyYXMucmVkdWNlKGZ1bmN0aW9uIChhbGwsIGN1cnJlbnQpIHtcbiAgICAgICAgICAgIGFsbFtjdXJyZW50XSA9IHRydWVcbiAgICAgICAgICAgIHJldHVybiBhbGxcbiAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgcHJpb3JpdHk6IGQuZmxhZ3MuQ29DNy5jb2NpZEZsYWcucHJpb3JpdHksXG4gICAgICAgICAgbGFuZzogZC5mbGFncy5Db0M3LmNvY2lkRmxhZy5sYW5nID8/ICdlbicsXG4gICAgICAgICAgbGluazogVGV4dEVkaXRvci5lbnJpY2hIVE1MKGQubGluaywgeyBhc3luYzogZmFsc2UgfSksXG4gICAgICAgICAgZm9sZGVyOiBkPy5mb2xkZXI/Lm5hbWUgPz8gJydcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIGlmIChPYmplY3QuZW50cmllcyh1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHkpLmZpbHRlcihjID0+IGNbMV0gPiAxKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHNoZWV0RGF0YS53YXJuRHVwbGljYXRlQ29tcGVuZGl1bVByaW9yaXR5ID0gdHJ1ZVxuICAgICAgfVxuICAgICAgc2hlZXREYXRhLmNvbXBlbmRpdW1EdXBsaWNhdGVzID0gY29tcGVuZGl1bURvY3VtZW50cy5sZW5ndGggPz8gMFxuICAgICAgc2hlZXREYXRhLnVzZWRFcmFzID0gW11cbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHVzZWRFcmFzKSkge1xuICAgICAgICBzaGVldERhdGEudXNlZEVyYXMucHVzaCh7XG4gICAgICAgICAgaWQ6IGtleSxcbiAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICBzaGVldERhdGEudXNlZEVyYXMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgfSBlbHNlIHtcbiAgICAgIHNoZWV0RGF0YS5jb21wZW5kaXVtRG9jdW1lbnRJbmZvID0gW11cbiAgICAgIHNoZWV0RGF0YS53b3JsZERvY3VtZW50SW5mbyA9IFtdXG4gICAgICBzaGVldERhdGEud29ybGREdXBsaWNhdGVzID0gMFxuICAgICAgc2hlZXREYXRhLmNvbXBlbmRpdW1EdXBsaWNhdGVzID0gMFxuICAgICAgc2hlZXREYXRhLndhcm5EdXBsaWNhdGVXb3JsZFByaW9yaXR5ID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS53YXJuRHVwbGljYXRlQ29tcGVuZGl1bVByaW9yaXR5ID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaHRtbC5maW5kKCdhLmNvcHktdG8tY2xpcGJvYXJkJykuY2xpY2soZnVuY3Rpb24gKGUpIHtcbiAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKCQodGhpcykuc2libGluZ3MoJ2lucHV0JykudmFsKCkpXG4gICAgfSlcblxuICAgIGlmICghdGhpcy5vYmplY3Quc2hlZXQuaXNFZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25DbGlja1RvZ2dsZS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCdpbnB1dFtuYW1lPV9leGlzdGluZycpLmNoYW5nZShmdW5jdGlvbiAoZSkge1xuICAgICAgY29uc3Qgb2JqID0gJCh0aGlzKVxuICAgICAgY29uc3QgcHJlZml4ID0gb2JqLmRhdGEoJ3ByZWZpeCcpXG4gICAgICBsZXQgdmFsdWUgPSBvYmoudmFsKClcbiAgICAgIGlmICh2YWx1ZSAhPT0gJycpIHtcbiAgICAgICAgdmFsdWUgPSBwcmVmaXggKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKHZhbHVlKVxuICAgICAgfVxuICAgICAgaHRtbC5maW5kKCdpbnB1dFtuYW1lPWlkXScpLnZhbCh2YWx1ZSkudHJpZ2dlcignY2hhbmdlJylcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCdzZWxlY3RbbmFtZT1rbm93bl0nKS5jaGFuZ2UoZnVuY3Rpb24gKGUpIHtcbiAgICAgIGNvbnN0IG9iaiA9ICQodGhpcylcbiAgICAgIGh0bWwuZmluZCgnaW5wdXRbbmFtZT1pZF0nKS52YWwob2JqLnZhbCgpKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJ2FbZGF0YS1ndWVzc10nKS5jbGljayhhc3luYyBmdW5jdGlvbiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBjb25zdCBvYmogPSAkKHRoaXMpXG4gICAgICBjb25zdCBndWVzcyA9IG9iai5kYXRhKCdndWVzcycpXG4gICAgICBodG1sLmZpbmQoJ2lucHV0W25hbWU9aWRdJykudmFsKGd1ZXNzKS50cmlnZ2VyKCdjaGFuZ2UnKVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZXJhVG9nZ2xlIChkb2N1bWVudCwgcHJvcGVydHlJZCkge1xuICAgIGlmIChkb2N1bWVudC50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICAvLyBTZXR1cHMgY2FuIG9ubHkgaGF2ZSBvbmUgZXJhIHRvIG1ha2Ugc3VyZSB0aGUgY29ycmVjdCBza2lsbHMgYXJlIHBvcHVsYXRlZCB2aWEgQ29DIElEXG4gICAgICBjb25zdCB1cGRhdGUgPSB7XG4gICAgICAgIFtwcm9wZXJ0eUlkXTogdHJ1ZVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKGRvY3VtZW50LmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMpKSB7XG4gICAgICAgICAgaWYgKGtleSAhPT0gcHJvcGVydHlJZCkge1xuICAgICAgICAgICAgdXBkYXRlWyctPScgKyBrZXldID0gbnVsbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgZG9jdW1lbnQudXBkYXRlKHtcbiAgICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnOiB1cGRhdGVcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZG9jdW1lbnQuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcz8uW3Byb3BlcnR5SWRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHR5cGVvZiBkb2N1bWVudC5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5lcmFzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBhd2FpdCBkb2N1bWVudC51cGRhdGUoe1xuICAgICAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzJzoge1xuICAgICAgICAgICAgW3Byb3BlcnR5SWRdOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgZG9jdW1lbnQudXBkYXRlKHtcbiAgICAgICAgICBbYGZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMuJHtwcm9wZXJ0eUlkfWBdOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGF3YWl0IGRvY3VtZW50LnVwZGF0ZSh7XG4gICAgICAgIFtgZmxhZ3MuQ29DNy5jb2NpZEZsYWcuZXJhcy4tPSR7cHJvcGVydHlJZH1gXTogbnVsbFxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25DbGlja1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IENvQ0lERWRpdG9yLmVyYVRvZ2dsZSh0aGlzLm9iamVjdCwgcHJvcGVydHlJZClcbiAgICB0aGlzLnJlbmRlcigpXG4gIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBpZCA9IGZvcm1EYXRhLmlkIHx8ICcnXG4gICAgYXdhaXQgdGhpcy5vYmplY3QudXBkYXRlKHtcbiAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5pZCc6IGlkLFxuICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmxhbmcnOiBmb3JtRGF0YS5sYW5nIHx8IGdhbWUuaTE4bi5sYW5nLFxuICAgICAgJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLnByaW9yaXR5JzogZm9ybURhdGEucHJpb3JpdHkgfHwgMCxcbiAgICAgICdmbGFncy5Db0M3LmNvY2lkRmxhZy5lcmFzJzogKHRoaXMub2JqZWN0LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pXG4gICAgfSlcbiAgICBjb25zdCBodG1sID0gJCh0aGlzLm9iamVjdC5zaGVldC5lbGVtZW50KS5maW5kKCdoZWFkZXIud2luZG93LWhlYWRlciBhLmhlYWRlci1idXR0b24uZWRpdC1jb2MtaWQtd2FybmluZyxoZWFkZXIud2luZG93LWhlYWRlciBhLmhlYWRlci1idXR0b24uZWRpdC1jb2MtaWQtZXhpc2l0aW5nJylcbiAgICBpZiAoaHRtbC5sZW5ndGgpIHtcbiAgICAgIGh0bWwuY3NzKHtcbiAgICAgICAgY29sb3I6IChpZCA/ICd2YXIoLS1jb2xvci10ZXh0LWxpZ2h0LWhpZ2hsaWdodCknIDogJ3JlZCcpXG4gICAgICB9KVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5pbXBvcnQgeyBDb0NJREVkaXRvciB9IGZyb20gJy4uL2FwcHMvY29jLWlkLWVkaXRvci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gKGhlYWRlckJ1dHRvbnMsIHNoZWV0KSB7XG4gIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgIGNvbnN0IHNoZWV0Q29DSUQgPSBzaGVldC5vYmplY3QuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZ1xuICAgIGNvbnN0IG5vSWQgPSAodHlwZW9mIHNoZWV0Q29DSUQgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBzaGVldENvQ0lELmlkID09PSAndW5kZWZpbmVkJyB8fCBzaGVldENvQ0lELmlkID09PSAnJylcbiAgICBjb25zdCBDb0NJREVkaXRvckJ1dHRvbiA9IHtcbiAgICAgIGNsYXNzOiAobm9JZCA/ICdlZGl0LWNvYy1pZC13YXJuaW5nJyA6ICdlZGl0LWNvYy1pZC1leGlzaXRpbmcnKSxcbiAgICAgIGxhYmVsOiAnQ29DNy5Db0NJREZsYWcuaWQnLFxuICAgICAgaWNvbjogJ2ZhcyBmYS1maW5nZXJwcmludCcsXG4gICAgICBvbmNsaWNrOiAoKSA9PiB7XG4gICAgICAgIG5ldyBDb0NJREVkaXRvcihzaGVldC5vYmplY3QsIHt9KS5yZW5kZXIodHJ1ZSwgeyBmb2N1czogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCBudW1iZXJPZkJ1dHRvbnMgPSBoZWFkZXJCdXR0b25zLmxlbmd0aFxuICAgIGhlYWRlckJ1dHRvbnMuc3BsaWNlKG51bWJlck9mQnV0dG9ucyAtIDEsIDAsIENvQ0lERWRpdG9yQnV0dG9uKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQWN0aXZlRWZmZWN0LCBnYW1lICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb0M3QWN0aXZlRWZmZWN0IGV4dGVuZHMgQWN0aXZlRWZmZWN0IHtcbiAgYXBwbHkgKGFjdG9yLCBjaGFuZ2UpIHtcbiAgICBpZiAoY2hhbmdlLmtleSA9PT0gJ3N5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlJykge1xuICAgICAgLy8gQXJtb3IgY2FuIGJlIGZyZWUgdGV4dCBpZiBib3RoIGFyZSBudW1iZXJzIGFsbG93IGNhbGN1bGF0aW9uXG4gICAgICBpZiAoIWlzTmFOKGNoYW5nZS52YWx1ZSkgJiYgIWlzTmFOKGFjdG9yLnN5c3RlbS5hdHRyaWJzLmFybW9yLnZhbHVlKSkge1xuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZSA9IE51bWJlcihhY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci52YWx1ZSlcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNoYW5nZS5rZXkgPT09ICdzeXN0ZW0uYXR0cmlicy5kYi52YWx1ZScpIHtcbiAgICAgIC8vIElmIGRiIGlzIGN1cnJlbnRseSBhIG51bWJlciBhbGxvdyBzdHJpbmdzIHRvIGJlIGFwcGxpZWRcbiAgICAgIGlmIChpc05hTihjaGFuZ2UudmFsdWUpICYmICFpc05hTihhY3Rvci5zeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSkpIHtcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUgPSBTdHJpbmcoYWN0b3Iuc3lzdGVtLmF0dHJpYnMuZGIudmFsdWUpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNoYW5nZXMgPSBzdXBlci5hcHBseShhY3RvciwgY2hhbmdlKVxuICAgIHJldHVybiBjaGFuZ2VzXG4gIH1cblxuICAvKipcbiAgICogTWFuYWdlIEFjdGl2ZSBFZmZlY3QgaW5zdGFuY2VzIHRocm91Z2ggdGhlIEFjdG9yIFNoZWV0IHZpYSBlZmZlY3QgY29udHJvbCBidXR0b25zLlxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGV2ZW50ICAgICAgVGhlIGxlZnQtY2xpY2sgZXZlbnQgb24gdGhlIGVmZmVjdCBjb250cm9sXG4gICAqIEBwYXJhbSB7QWN0b3J8SXRlbX0gb3duZXIgICAgICBUaGUgb3duaW5nIGRvY3VtZW50IHdoaWNoIG1hbmFnZXMgdGhpcyBlZmZlY3RcbiAgICogQHJldHVybnMge1Byb21pc2V8bnVsbH0gICAgICAgIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBjaGFuZ2VzIGFyZSBjb21wbGV0ZS5cbiAgICovXG4gIHN0YXRpYyBvbk1hbmFnZUFjdGl2ZUVmZmVjdCAoZXZlbnQsIG93bmVyKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoJ2xpJylcbiAgICBjb25zdCBlZmZlY3QgPSBsaS5kYXRhc2V0LmVmZmVjdElkXG4gICAgICA/IG93bmVyLmVmZmVjdHMuZ2V0KGxpLmRhdGFzZXQuZWZmZWN0SWQpXG4gICAgICA6IG51bGxcbiAgICBzd2l0Y2ggKGEuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2NyZWF0ZSc6XG4gICAgICAgIHJldHVybiBvd25lci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnQWN0aXZlRWZmZWN0JywgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRWZmZWN0TmV3JyksXG4gICAgICAgICAgICBpY29uOiAnaWNvbnMvc3ZnL2F1cmEuc3ZnJyxcbiAgICAgICAgICAgIG9yaWdpbjogb3duZXIudXVpZCxcbiAgICAgICAgICAgICdkdXJhdGlvbi5yb3VuZHMnOlxuICAgICAgICAgICAgICBsaS5kYXRhc2V0LmVmZmVjdFR5cGUgPT09ICd0ZW1wb3JhcnknID8gMSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIGRpc2FibGVkOiBsaS5kYXRhc2V0LmVmZmVjdFR5cGUgPT09ICdpbmFjdGl2ZSdcbiAgICAgICAgICB9XG4gICAgICAgIF0pXG4gICAgICBjYXNlICdlZGl0JzpcbiAgICAgICAgcmV0dXJuIGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIGNhc2UgJ2RlbGV0ZSc6XG4gICAgICAgIHJldHVybiBlZmZlY3QuZGVsZXRlKClcbiAgICAgIGNhc2UgJ3RvZ2dsZSc6XG4gICAgICAgIHJldHVybiBlZmZlY3QudXBkYXRlKHsgZGlzYWJsZWQ6ICFlZmZlY3QuZGlzYWJsZWQgfSlcbiAgICB9XG4gIH1cblxuICBfcHJlcGFyZUR1cmF0aW9uICgpIHtcbiAgICBjb25zdCBkdXJhdGlvbiA9IHN1cGVyLl9wcmVwYXJlRHVyYXRpb24oKVxuICAgIGlmIChkdXJhdGlvbi50eXBlID09PSAnc2Vjb25kcycpIHtcbiAgICAgIGlmIChkdXJhdGlvbi5zZWNvbmRzID4gMzYwMCkge1xuICAgICAgICBkdXJhdGlvbi5sYWJlbCA9IG5ldyBEYXRlKGR1cmF0aW9uLnNlY29uZHMgKiAxMDAwKS50b0lTT1N0cmluZygpLnNsaWNlKDExLCAxOSlcbiAgICAgIH0gZWxzZSBpZiAoZHVyYXRpb24uc2Vjb25kcyA+IDEwMCkge1xuICAgICAgICBkdXJhdGlvbi5sYWJlbCA9IG5ldyBEYXRlKGR1cmF0aW9uLnNlY29uZHMgKiAxMDAwKS50b0lTT1N0cmluZygpLnNsaWNlKDE0LCAxOSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGR1cmF0aW9uXG4gIH1cblxuICBnZXQgaXNTdGF0dXMgKCkge1xuICAgIGNvbnN0IHN0YXR1c0lkID0gdGhpcy5nZXRGbGFnKCdjb3JlJywgJ3N0YXR1c0lkJylcbiAgICByZXR1cm4gW1xuICAgICAgJ3RlbXBvSW5zYW5lJyxcbiAgICAgICdpbmRlZkluc2FuZScsXG4gICAgICAnY3JpdGljYWxXb3VuZHMnLFxuICAgICAgJ2R5aW5nJyxcbiAgICAgICdkZWFkJyxcbiAgICAgICd1bmNvbnNjaW91cycsXG4gICAgICAncHJvbmUnXG4gICAgXS5pbmNsdWRlcyhzdGF0dXNJZClcbiAgfVxuXG4gIHN0YXRpYyBwcmVwYXJlQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyAoZWZmZWN0cywgeyBzdGF0dXMgPSB0cnVlIH0gPSB7fSkge1xuICAgIC8vIERlZmluZSBlZmZlY3QgaGVhZGVyIGNhdGVnb3JpZXNcbiAgICBjb25zdCBjYXRlZ29yaWVzID0ge1xuICAgICAgdGVtcG9yYXJ5OiB7XG4gICAgICAgIHR5cGU6ICd0ZW1wb3JhcnknLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdUZW1wb3JhcnknKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH0sXG4gICAgICBwYXNzaXZlOiB7XG4gICAgICAgIHR5cGU6ICdwYXNzaXZlJyxcbiAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnUGFzc2l2ZScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfSxcbiAgICAgIGluYWN0aXZlOiB7XG4gICAgICAgIHR5cGU6ICdpbmFjdGl2ZScsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0luYWN0aXZlJyksXG4gICAgICAgIGVmZmVjdHM6IFtdXG4gICAgICB9LFxuICAgICAgc3VwcHJlc3NlZDoge1xuICAgICAgICB0eXBlOiAnc3VwcHJlc3NlZCcsXG4gICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1N1cHByZXNzZWQnKSxcbiAgICAgICAgZWZmZWN0czogW10sXG4gICAgICAgIGluZm86IFtnYW1lLmkxOG4ubG9jYWxpemUoJ1VuYXZhaWxhYmxlJyldXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgY2F0ZWdvcmllcy5zdGF0dXMgPSB7XG4gICAgICAgIHR5cGU6ICdzdGF0dXMnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdTdGF0dXMnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSXRlcmF0ZSBvdmVyIGFjdGl2ZSBlZmZlY3RzLCBjbGFzc2lmeWluZyB0aGVtIGludG8gY2F0ZWdvcmllc1xuICAgIGZvciAoY29uc3QgZSBvZiBlZmZlY3RzKSB7XG4gICAgICBlLl9nZXRTb3VyY2VOYW1lKCkgLy8gVHJpZ2dlciBhIGxvb2t1cCBmb3IgdGhlIHNvdXJjZSBuYW1lXG4gICAgICBpZiAoZS5pc1N1cHByZXNzZWQpIGNhdGVnb3JpZXMuc3VwcHJlc3NlZC5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgaWYgKGUuaXNTdGF0dXMpIGNhdGVnb3JpZXMuc3RhdHVzLmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBpZiAoZS5kaXNhYmxlZCkgY2F0ZWdvcmllcy5pbmFjdGl2ZS5lZmZlY3RzLnB1c2goZSlcbiAgICAgIGVsc2UgaWYgKGUuaXNUZW1wb3JhcnkpIGNhdGVnb3JpZXMudGVtcG9yYXJ5LmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBjYXRlZ29yaWVzLnBhc3NpdmUuZWZmZWN0cy5wdXNoKGUpXG4gICAgfVxuXG4gICAgY2F0ZWdvcmllcy5zdXBwcmVzc2VkLmhpZGRlbiA9ICFjYXRlZ29yaWVzLnN1cHByZXNzZWQuZWZmZWN0cy5sZW5ndGhcbiAgICByZXR1cm4gY2F0ZWdvcmllc1xuICB9XG5cbiAgc3RhdGljIHByZXBhcmVOUENBY3RpdmVFZmZlY3RDYXRlZ29yaWVzIChlZmZlY3RzKSB7XG4gICAgbGV0IGNvdW50ID0gMFxuICAgIC8vIERlZmluZSBlZmZlY3QgaGVhZGVyIGNhdGVnb3JpZXNcbiAgICBjb25zdCBjYXRlZ29yaWVzID0ge1xuICAgICAgYWN0aXZlOiB7XG4gICAgICAgIHR5cGU6ICdhY3RpdmUnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdBY3RpdmUnKSxcbiAgICAgICAgZWZmZWN0czogW11cbiAgICAgIH0sXG4gICAgICBpbmFjdGl2ZToge1xuICAgICAgICB0eXBlOiAnaW5hY3RpdmUnLFxuICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdJbmFjdGl2ZScpLFxuICAgICAgICBlZmZlY3RzOiBbXVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBJdGVyYXRlIG92ZXIgYWN0aXZlIGVmZmVjdHMsIGNsYXNzaWZ5aW5nIHRoZW0gaW50byBjYXRlZ29yaWVzXG4gICAgZm9yIChjb25zdCBlIG9mIGVmZmVjdHMpIHtcbiAgICAgIGNvdW50ICs9IDFcbiAgICAgIGUuX2dldFNvdXJjZU5hbWUoKSAvLyBUcmlnZ2VyIGEgbG9va3VwIGZvciB0aGUgc291cmNlIG5hbWVcbiAgICAgIGlmIChlLmlzU3VwcHJlc3NlZCB8fCBlLmRpc2FibGVkKSBjYXRlZ29yaWVzLmluYWN0aXZlLmVmZmVjdHMucHVzaChlKVxuICAgICAgZWxzZSBjYXRlZ29yaWVzLmFjdGl2ZS5lZmZlY3RzLnB1c2goZSlcbiAgICB9XG5cbiAgICBpZiAoY291bnQgPiAwKSBjYXRlZ29yaWVzLmV4cGVuZGVkID0gdHJ1ZVxuICAgIHJldHVybiBjYXRlZ29yaWVzXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBDb0M3Q29udGV4dE1lbnUge1xuICBiaW5kIChtZW51LCBodG1sLCBjYWxsYmFjaykge1xuICAgIHRoaXMuX2NhbGxiYWNrID0gY2FsbGJhY2tcbiAgICB0aGlzLl9odG1sID0gaHRtbFxuICAgIHRoaXMuX21lbnUgPSBtZW51XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG1lbnVUcmlnZ2VyID0gaHRtbC5maW5kKGBbZGF0YS1jb250ZXh0LW1lbnU9JHttZW51LmlkfV1gKSAvLyBGaW5kIGFsbCBtZW51IHRyaWdnZXJzLlxuICAgICAgaWYgKG1lbnVUcmlnZ2VyLmxlbmd0aCA9PT0gMCkgcmV0dXJuIC8vIElmIHRoZXJlIGlzIG5vIHRyaWdnZXIsIGRvIG5vdCBjb250aW51ZS5cbiAgICAgIG1lbnVUcmlnZ2VyLmNvbnRleHRtZW51KHRoaXMuX29uQ29udGV4dE1lbnUuYmluZCh0aGlzKSkgLy8gQXR0YWNoIHRoZSBoYW5kbGVyLlxuICAgICAgY29uc3QgbWVudUVsZW1lbnQgPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlTWVudShtZW51KSAvLyBCdWlsZCB0aGUgbWVudVxuICAgICAgbWVudUVsZW1lbnQub24oJ2NsaWNrJyxcbiAgICAgICAgJy5tZW51LWFjdGlvbicsXG4gICAgICAgIHRoaXMuX29uTWVudUFjdGlvbi5iaW5kKHRoaXMpKVxuICAgICAgLy8gY29uc3QgZG9jdW1lbnRNZW51ID0gdGhpcy5tZW51Q29udGFpbmVyLmZpbmQoYC5jb250ZXh0LW1lbnUtd3JhcHBlci4ke21lbnUuaWR9YClcbiAgICAgIGlmICh0aGlzLm1lbnUubGVuZ3RoICE9PSAwKSB0aGlzLm1lbnUucmVwbGFjZVdpdGgobWVudUVsZW1lbnQpXG4gICAgICBlbHNlIHRoaXMubWVudUNvbnRhaW5lci5hcHBlbmQobWVudUVsZW1lbnQpXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpXG4gICAgfVxuICB9XG5cbiAgZ2V0IG1lbnVDb250YWluZXIgKCkge1xuICAgIGxldCBtZW51Q29udGFpbmVyID0gdGhpcy5faHRtbC5maW5kKCcubWVudS1jb250YWluZXInKVxuICAgIGlmIChtZW51Q29udGFpbmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5faHRtbC5hcHBlbmQoJzxkaXYgY2xhc3M9XCJtZW51LWNvbnRhaW5lclwiPjwvZGl2PicpXG4gICAgICBtZW51Q29udGFpbmVyID0gdGhpcy5faHRtbC5maW5kKCcubWVudS1jb250YWluZXInKVxuICAgIH1cbiAgICByZXR1cm4gbWVudUNvbnRhaW5lclxuICB9XG5cbiAgZ2V0IG1lbnUgKCkge1xuICAgIC8vIGNvbnN0IG1lbnVDb250YWluZXIgPSB0aGlzLm1lbnVDb250YWluZXJcbiAgICAvLyBpZiAoIW1lbnVDb250YWluZXIgfHwgbWVudUNvbnRhaW5lci5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG4gICAgcmV0dXJuIHRoaXMubWVudUNvbnRhaW5lci5maW5kKGAuY29udGV4dC1tZW51LXdyYXBwZXIuJHt0aGlzLl9tZW51LmlkfWApXG4gIH1cblxuICBfb25NZW51QWN0aW9uIChldmVudCkge1xuICAgIC8vIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAvLyBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYnJhbmNoJykpIHJldHVyblxuICAgIHJldHVybiB0aGlzLl9jYWxsYmFjayhldmVudCwgdGhpcy50YXJnZXQpXG4gIH1cblxuICBzdGF0aWMgY2xvc2VBbGwgKCkge1xuICAgIGNvbnN0IG1lbnVDb250YWluZXJzID0gJCgnYm9keScpLmZpbmQoJy5tZW51LWNvbnRhaW5lcicpXG4gICAgY29uc3QgbWVudXMgPSBtZW51Q29udGFpbmVycy5maW5kKCcuY29udGV4dC1tZW51LXdyYXBwZXInKVxuICAgIG1lbnVzLmVhY2goZnVuY3Rpb24gKGksIG0pIHsgbS5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbicgfSlcbiAgICAvLyBib2R5LmZpbmQoJy5tZW51LXdyYXBwZXInKS5oaWRlKClcbiAgfVxuXG4gIF9vbkNvbnRleHRNZW51IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KHRydWUpXG4gICAgQ29DN0NvbnRleHRNZW51LmNsb3NlQWxsKCkgLy8gT25seSAxIG1lbnUgY2FuIGJlIG9wZW4uXG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXRcbiAgICB0aGlzLnRhcmdldCA9IHRhcmdldFxuICAgIGlmICghdGFyZ2V0KSByZXR1cm5cbiAgICBjb25zdCBtZW51TmFtZSA9IHRhcmdldC5kYXRhc2V0Py5jb250ZXh0TWVudVxuICAgIGlmIChtZW51TmFtZSA9PT0gdGhpcy5fbWVudS5pZCkge1xuICAgICAgY29uc3Qgd3JhcHBlciA9IHRoaXMubWVudVxuICAgICAgaWYgKHdyYXBwZXIubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBzdWJNZW51ID0gd3JhcHBlci5maW5kKCcuc3ViLW1lbnUnKVxuICAgICAgICBsZXQgbGVmdCA9IGV2ZW50LmNsaWVudFhcbiAgICAgICAgbGV0IHRvcCA9IGV2ZW50LmNsaWVudFlcbiAgICAgICAgY29uc3QgbWVudUhlaWdodCA9IHdyYXBwZXIub3V0ZXJIZWlnaHQoKVxuICAgICAgICBjb25zdCBtZW51V2lkdGggPSB3cmFwcGVyLm91dGVyV2lkdGgoKVxuICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IDwgbWVudUhlaWdodCArIHRvcCkge1xuICAgICAgICAgIHRvcCA9IHRvcCAtIG1lbnVIZWlnaHRcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCBtZW51V2lkdGggKyBsZWZ0KSB7XG4gICAgICAgICAgbGVmdCA9IHdpbmRvdy5pbm5lcldpZHRoIC0gbWVudVdpZHRoXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Yk1lbnUubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8IG1lbnVXaWR0aCArIGxlZnQgKyBzdWJNZW51Lm91dGVyV2lkdGgoKSkge1xuICAgICAgICAgICAgc3ViTWVudS5jc3Moe1xuICAgICAgICAgICAgICByaWdodDogYCR7bWVudVdpZHRoIC0gNX1weGAsXG4gICAgICAgICAgICAgIGxlZnQ6ICcnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzdWJNZW51LmNzcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IGAke21lbnVXaWR0aCAtIDV9cHhgLFxuICAgICAgICAgICAgICByaWdodDogJydcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHdyYXBwZXIuY3NzKHtcbiAgICAgICAgICBsZWZ0OiBgJHtsZWZ0fXB4YCxcbiAgICAgICAgICB0b3A6IGAke3RvcH1weGAsXG4gICAgICAgICAgdmlzaWJpbGl0eTogJ3Zpc2libGUnXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGNhblNlZSAodmlzaWJpbGl0eSkge1xuICAgIHN3aXRjaCAodmlzaWJpbGl0eS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICBjYXNlICdnbSc6XG4gICAgICAgIHJldHVybiBnYW1lLnVzZXIuaXNHTVxuICAgICAgY2FzZSAndHJ1c3RlZCc6XG4gICAgICAgIHJldHVybiBnYW1lLnVzZXIuaXNUcnVzdGVkXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBDcmVhdGVNZW51IChtZW51KSB7XG4gICAgY29uc3QgY2xhc3NlcyA9IHR5cGVvZiBtZW51LmNsYXNzZXMgPT09ICdzdHJpbmcnID8gW21lbnUuY2xhc3Nlc10gOiBtZW51LmNsYXNzZXNcbiAgICBjbGFzc2VzLnB1c2goJ2NvbnRleHQtbWVudS13cmFwcGVyJylcbiAgICBjb25zdCB3cmFwcGVyID0gJCgnPGRpdj48L2Rpdj4nKVxuICAgIHdyYXBwZXIuYWRkQ2xhc3MobWVudS5pZClcbiAgICBjbGFzc2VzLmZvckVhY2goYyA9PiB3cmFwcGVyLmFkZENsYXNzKGMpKVxuICAgIGlmIChtZW51LnNlY3Rpb24pIHtcbiAgICAgIG1lbnUuc2VjdGlvbi5mb3JFYWNoKHMgPT4ge1xuICAgICAgICBjb25zdCBzZWN0aW9uID0gQ29DN0NvbnRleHRNZW51LkNyZWF0ZVNlY3Rpb24ocywgeyBtdWx0aTogdHJ1ZSB9KVxuICAgICAgICBpZiAoc2VjdGlvbikgd3JhcHBlci5hcHBlbmQoc2VjdGlvbilcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHNlY3Rpb24gPSBDb0M3Q29udGV4dE1lbnUuQ3JlYXRlU2VjdGlvbihtZW51KVxuICAgICAgaWYgKHNlY3Rpb24pIHdyYXBwZXIuYXBwZW5kKHNlY3Rpb24pXG4gICAgfVxuICAgIHJldHVybiB3cmFwcGVyXG4gIH1cblxuICBzdGF0aWMgQ3JlYXRlU2VjdGlvbiAocywgeyBtdWx0aSA9IGZhbHNlLCBzdWJNZW51ID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFzLml0ZW1zKSByZXR1cm4gbnVsbFxuICAgIGlmIChzLnZpc2liaWxpdHkgJiYgIUNvQzdDb250ZXh0TWVudS5jYW5TZWUocy52aXNpYmlsaXR5KSkgcmV0dXJuIG51bGxcbiAgICBjb25zdCBjbGFzc2VzID0gcy5jbGFzc2VzID8gdHlwZW9mIHMuY2xhc3NlcyA9PT0gJ3N0cmluZycgPyBbcy5jbGFzc2VzXSA6IHMuY2xhc3NlcyA6IFtdXG4gICAgaWYgKG11bHRpKSBjbGFzc2VzLnB1c2goJ21lbnUtc2VjdGlvbicpXG4gICAgaWYgKHN1Yk1lbnUpIGNsYXNzZXMucHVzaCgnc3ViLW1lbnUnKVxuICAgIGNvbnN0IHNlY3Rpb24gPSAkKCc8dWw+PC91bD4nKVxuICAgIGNsYXNzZXMuZm9yRWFjaChjID0+IHNlY3Rpb24uYWRkQ2xhc3MoYykpXG4gICAgcy5pdGVtcy5mb3JFYWNoKGkgPT4ge1xuICAgICAgY29uc3QgbGkgPSAkKCc8bGk+PC9saT4nKVxuICAgICAgbGkuYWRkQ2xhc3MoJ21lbnUtaXRlbScpXG4gICAgICBpZiAoaS5hY3Rpb24pIHtcbiAgICAgICAgbGkuYWRkQ2xhc3MoJ21lbnUtYWN0aW9uJylcbiAgICAgICAgbGkuYXR0cignZGF0YS1hY3Rpb24nLCBpLmFjdGlvbilcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgaS5sYWJlbCA9PT0gJ3N0cmluZycpIGxpLmFwcGVuZChgPHNwYW4+JHtpLmxhYmVsfTwvc3Bhbj5gKVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmIChpLmxhYmVsLmljb24pIGxpLmFwcGVuZChgPGkgY2xhc3M9XCIke2kubGFiZWwuaWNvbn1cIj48L2k+YClcbiAgICAgICAgaWYgKGkubGFiZWwudGV4dCkgbGkuYXBwZW5kKGA8c3Bhbj4ke2kubGFiZWwudGV4dH08L3NwYW4+YClcbiAgICAgIH1cbiAgICAgIGlmIChpLnN1Yk1lbnUpIHtcbiAgICAgICAgbGkuYWRkQ2xhc3MoJ3N1Yi1tZW51LWJ1dHRvbicpXG4gICAgICAgIGxpLmFwcGVuZCgnPGkgY2xhc3M9XCJmYXMgZmEtY2FyZXQtcmlnaHRcIj48L2k+JylcbiAgICAgICAgY29uc3Qgc3ViID0gQ29DN0NvbnRleHRNZW51LkNyZWF0ZVNlY3Rpb24oaS5zdWJNZW51LCB7IHN1Yk1lbnU6IHRydWUgfSlcbiAgICAgICAgaWYgKHN1YikgbGkuYXBwZW5kKHN1YilcbiAgICAgIH1cbiAgICAgIHNlY3Rpb24uYXBwZW5kKGxpKVxuICAgIH0pXG4gICAgcmV0dXJuIHNlY3Rpb25cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEFjdG9yU2hlZXQsIENoYXRNZXNzYWdlLCBDT05TVCwgRGlhbG9nLCBGb3JtRGF0YSwgZm91bmRyeSwgZ2FtZSwgZ2V0UHJvcGVydHksIEhvb2tzLCBtZXJnZU9iamVjdCwgUm9sbCwgVGV4dEVkaXRvciwgdWkgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDaGF0TWVzc2FnZSB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1jb250ZW50LWxpbmstZGlhbG9nLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vLi4vaXRlbXMvaXRlbS5qcydcbmltcG9ydCB7IENvQzdNZWxlZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvY29tYmF0L21lbGVlLWluaXRpYXRvci5qcydcbmltcG9ydCB7IENvQzdSYW5nZUluaXRpYXRvciB9IGZyb20gJy4uLy4uL2NoYXQvcmFuZ2Vjb21iYXQuanMnXG5pbXBvcnQgeyBDb0M3Q29uQ2hlY2sgfSBmcm9tICcuLi8uLi9jaGF0L2NvbmNoZWNrLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciwgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uLy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgRGFtYWdlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvZGFtYWdlLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENvQzdDb250ZXh0TWVudSB9IGZyb20gJy4uLy4uL2NvbnRleHQtbWVudS5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBBY3RvclNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JTaGVldCBleHRlbmRzIEFjdG9yU2hlZXQge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLnNob3dIaWRkZW5EZXZNZW51ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG5cbiAgICBzaGVldERhdGEuY2FuRHJhZ1Rva2VuID0gISF0aGlzLnRva2VuICYmIGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmxpbmtlZEFjdG9yID0gdGhpcy5hY3Rvci5wcm90b3R5cGVUb2tlbj8uYWN0b3JMaW5rID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmlzVG9rZW4gPSB0aGlzLmFjdG9yLmlzVG9rZW5cbiAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUgPSB7fVxuICAgIHNoZWV0RGF0YS5za2lsbHMgPSB7fVxuICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbHMgPSB7fVxuICAgIHNoZWV0RGF0YS53ZWFwb25zID0ge31cbiAgICBzaGVldERhdGEucmFuZ2VXcG4gPSBbXVxuICAgIHNoZWV0RGF0YS5tZWxlZVdwbiA9IFtdXG4gICAgc2hlZXREYXRhLmFjdG9yRmxhZ3MgPSB7fVxuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPVxuICAgICAgdGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJ1xuICAgICAgICA/IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxuICAgICAgICA6IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZU5QQ0FjdGl2ZUVmZmVjdENhdGVnb3JpZXModGhpcy5hY3Rvci5lZmZlY3RzKVxuXG4gICAgc2hlZXREYXRhLnBlcm1pc3Npb25MaW1pdGVkID0gIWdhbWUudXNlci5pc0dNICYmICh0aGlzLmFjdG9yLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID8/IHRoaXMuYWN0b3Iub3duZXJzaGlwLmRlZmF1bHQpID09PSBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLkxJTUlURURcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmFsbG93VW5sb2NrID1cbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3BsYXllclVubG9ja1NoZWV0TW9kZScpID09PSAnYWx3YXlzJyB8fFxuICAgICAgZ2FtZS51c2VyLmlzR00gfHxcbiAgICAgIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2NyZWF0aW9uJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJykpXG4gICAgaWYgKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncGxheWVyVW5sb2NrU2hlZXRNb2RlJykgPT09ICdjcmVhdGlvbicgJiZcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKVxuICAgICkge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCA9IGZhbHNlXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSAhPT0gJ3ZlaGljbGUnKSB7XG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcyA9IHtcbiAgICAgICAgICBzdHI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuU1RSJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlN0cmVuZ3RoJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5DT04nLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQ29uc3RpdHV0aW9uJyxcbiAgICAgICAgICAgIGZvcm11bGE6IG51bGxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpejoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0NIQVJBQy5TSVonLFxuICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU2l6ZScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXg6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuREVYJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkRleHRlcml0eScsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBhcHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuQVBQJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkFwcGVhcmFuY2UnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW50OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLklOVCcsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5JbnRlbGxpZ2VuY2UnLFxuICAgICAgICAgICAgZm9ybXVsYTogbnVsbFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcG93OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQ0hBUkFDLlBPVycsXG4gICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Qb3dlcicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdDSEFSQUMuRURVJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkVkdWNhdGlvbicsXG4gICAgICAgICAgICBmb3JtdWxhOiBudWxsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMgPSB7XG4gICAgICAgICAgaHA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdIUCcsXG4gICAgICAgICAgICBsYWJlbDogJ0hpdCBwb2ludHMnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbXA6IHtcbiAgICAgICAgICAgIHZhbHVlOiBudWxsLFxuICAgICAgICAgICAgbWF4OiBudWxsLFxuICAgICAgICAgICAgc2hvcnQ6ICdIUCcsXG4gICAgICAgICAgICBsYWJlbDogJ01hZ2ljIHBvaW50cycsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsY2s6IHsgdmFsdWU6IG51bGwsIHNob3J0OiAnTENLJywgbGFiZWw6ICdMdWNrJyB9LFxuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBtYXg6IDk5LFxuICAgICAgICAgICAgc2hvcnQ6ICdTQU4nLFxuICAgICAgICAgICAgbGFiZWw6ICdTYW5pdHknLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgbW92OiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnTU9WJyxcbiAgICAgICAgICAgIGxhYmVsOiAnTW92ZW1lbnQgcmF0ZScsXG4gICAgICAgICAgICBhdXRvOiB0cnVlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYjoge1xuICAgICAgICAgICAgdmFsdWU6IG51bGwsXG4gICAgICAgICAgICBzaG9ydDogJ0RCJyxcbiAgICAgICAgICAgIGxhYmVsOiAnRGFtYWdlIGJvbnVzJyxcbiAgICAgICAgICAgIGF1dG86IHRydWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGJ1aWxkOiB7XG4gICAgICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgICAgIHNob3J0OiAnQkxEJyxcbiAgICAgICAgICAgIGxhYmVsOiAnQnVpbGQnLFxuICAgICAgICAgICAgYXV0bzogdHJ1ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXJtb3I6IHsgdmFsdWU6IG51bGwsIGF1dG86IGZhbHNlIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkpIHtcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSA9IHtcbiAgICAgICAgICBwZXJzb25hbERlc2NyaXB0aW9uOiB7IHR5cGU6ICdzdHJpbmcnLCB2YWx1ZTogJycgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcyA9IHtcbiAgICAgICAgICBvY2N1cGF0aW9uOiAnJyxcbiAgICAgICAgICBhZ2U6ICcnLFxuICAgICAgICAgIHNleDogJycsXG4gICAgICAgICAgcmVzaWRlbmNlOiAnJyxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiAnJyxcbiAgICAgICAgICBhcmNoZXR5cGU6ICcnLFxuICAgICAgICAgIG9yZ2FuaXphdGlvbjogJycsXG4gICAgICAgICAgcGxheWVybmFtZTogJydcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncykge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MgPSB7IGxvY2tlZDogdHJ1ZSwgbWFudWFsQ3JlZGl0OiBmYWxzZSB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNyZWRpdCkge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY3JlZGl0ID0ge1xuICAgICAgICAgIG1vbmV0YXJ5U3ltYm9sOiBudWxsLFxuICAgICAgICAgIG11bHRpcGxpZXI6IG51bGwsXG4gICAgICAgICAgc3BlbnQ6IG51bGwsXG4gICAgICAgICAgYXNzZXRzRGV0YWlsczogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRldmVsb3BtZW50KSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXZlbG9wbWVudCA9IHtcbiAgICAgICAgICBwZXJzb25hbDogbnVsbCxcbiAgICAgICAgICBvY2N1cGF0aW9uOiBudWxsLFxuICAgICAgICAgIGFyY2hldHlwZTogbnVsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSA9IFtdXG5cbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZUFyY2hldHlwZSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJylcbiAgICAgIHNoZWV0RGF0YS5wdWxwUnVsZU9yZ2FuaXphdGlvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgICAnQ29DNycsXG4gICAgICAgICdwdWxwUnVsZU9yZ2FuaXphdGlvbidcbiAgICAgIClcbiAgICB9XG5cbiAgICBzaGVldERhdGEuaXNEZWFkID0gdGhpcy5hY3Rvci5kZWFkXG4gICAgc2hlZXREYXRhLmlzRHlpbmcgPSB0aGlzLmFjdG9yLmR5aW5nXG5cbiAgICBpZiAoc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICBmb3IgKGNvbnN0IGl0ZW0gb2Ygc2hlZXREYXRhLml0ZW1zKSB7XG4gICAgICAgIC8vIHNpIGMnZXN0IHVuZSBmb3JtdWxlIGV0IHF1J29uIHBldXQgbCdldmFsdWVyXG4gICAgICAgIC8vIGNlIGJsb2MgZGV2cmFpdCBldHJlIGTDqXBsYWPDqSBkYW5zIGxlIGJsb2MgX3VwZGF0ZUZvcm1EYXRhXG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZykge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSkge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgICAnQ29DNy5GaXJlYXJtU3BlY2lhbGl6YXRpb25OYW1lJ1xuICAgICAgICAgICAgICApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHRoaXMuYWN0b3IudHlwZSAhPT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgICAgICAgIGlmIChpc05hTihOdW1iZXIoaXRlbS5zeXN0ZW0udmFsdWUpKSkge1xuICAgICAgICAgICAgICBsZXQgdmFsdWUgPSBudWxsXG4gICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHt9XG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKFxuICAgICAgICAgICAgICAgIENPQzcuZm9ybXVsYS5hY3RvcnNoZWV0XG4gICAgICAgICAgICAgICkpIHtcbiAgICAgICAgICAgICAgICBpZiAoa2V5LnN0YXJ0c1dpdGgoJ0AnKSAmJiB2YWx1ZS5zdGFydHNXaXRoKCd0aGlzLicpKSB7XG4gICAgICAgICAgICAgICAgICBwYXJzZWRba2V5LnN1YnN0cmluZygxKV0gPSBnZXRQcm9wZXJ0eShcbiAgICAgICAgICAgICAgICAgICAgdGhpcyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUuc3Vic3RyaW5nKDUpXG4gICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSAoXG4gICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChpdGVtLnN5c3RlbS52YWx1ZSwgcGFyc2VkKS5ldmFsdWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGFzeW5jOiB0cnVlXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICkudG90YWxcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvclVuYWJsZVRvUGFyc2VTa2lsbEZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBpdGVtLnN5c3RlbS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbS5uYW1lXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGxcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnZhbHVlID0gdmFsdWVcbiAgICAgICAgICAgICAgICBjb25zdCBpdGVtVG9VcGRhdGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oXG4gICAgICAgICAgICAgICAgICBgW0NPQzddIChBY3Rvcjoke3RoaXMubmFtZX0pIEV2YWx1YXRpbmcgc2tpbGwgJHtpdGVtLm5hbWV9OiR7aXRlbS5zeXN0ZW0udmFsdWV9IHRvICR7dmFsdWV9YFxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICBhd2FpdCBpdGVtVG9VcGRhdGUudXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0udmFsdWUnOiB2YWx1ZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgIGNvbnN0IHsgYmFzZSwgcmF3VmFsdWUsIHZhbHVlIH0gPSBza2lsbC5zeXN0ZW1cblxuICAgICAgICAgICAgLy8gQXNzdW1lIGZhbGxiYWNrIHZhbHVlcywgdXNlZnVsIGZvciBpbml0aWFsIHNldHVwIG9mIHNraWxsc1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0ucmF3VmFsdWUgPSByYXdWYWx1ZSB8fCB2YWx1ZSB8fCBiYXNlXG4gICAgICAgICAgICBpdGVtLnN5c3RlbS52YWx1ZSA9IHZhbHVlIHx8IGJhc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChpdGVtLl9pZClcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmJhc2UgPSBhd2FpdCBza2lsbC5hc3luY0Jhc2UoKVxuXG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0udmFsdWUpIHtcbiAgICAgICAgICAgICAgLy8gVGhpcyBzaG91bGQgYmUgcGFydCBvZiBtaWdyYXRpb24gb3IgZG9uZSBhdCBpbml0ICFcbiAgICAgICAgICAgICAgLy8gV2FzIGRvbmUgd2hlbiBza2lsbCB2YWx1ZSB3YXMgY2hhbmdlZCB0byBiYXNlICsgYWRqdXN0ZW1lbnRcbiAgICAgICAgICAgICAgY29uc3QgZXhwID0gaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2VcbiAgICAgICAgICAgICAgICA/IHBhcnNlSW50KGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UpXG4gICAgICAgICAgICAgICAgOiAwXG4gICAgICAgICAgICAgIGxldCB1cGRhdGVkRXhwID0gZXhwICsgcGFyc2VJbnQoaXRlbS5zeXN0ZW0udmFsdWUpIC0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgICAgaWYgKHVwZGF0ZWRFeHAgPD0gMCkgdXBkYXRlZEV4cCA9IG51bGxcbiAgICAgICAgICAgICAgY29uc29sZS5pbmZvKFxuICAgICAgICAgICAgICAgIGBbQ09DN10gVXBkYXRpbmcgc2tpbGwgJHtza2lsbC5uYW1lfSBleHBlcmllbmNlLiBFeHBlcmllbmNlIG1pc3Npbmc6ICR7dXBkYXRlZEV4cH1gXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBfaWQ6IGl0ZW0uX2lkLFxuICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogdXBkYXRlZEV4cCxcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0udmFsdWUnOiBudWxsXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICBpZiAoIWl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzKSBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cyA9IHt9XG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UgPSB1cGRhdGVkRXhwXG4gICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnJhd1ZhbHVlID0gc2tpbGwucmF3VmFsdWVcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0udmFsdWUgPSBza2lsbC52YWx1ZSAvLyBBQ1RJVkVfRUZGRUNUIG5lY2Vzc2FyeSB0byBhcHBseSBlZmZlY3RzXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS52YWx1ZSA9IHNraWxsLnZhbHVlIC8vIEFDVElWRV9FRkZFQ1QgbmVjZXNzYXJ5IHRvIGFwcGx5IGVmZmVjdHNcbiAgICAgICAgICAgICAgaXRlbS5zeXN0ZW0ucmF3VmFsdWUgPSBza2lsbC5yYXdWYWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsaXN0ID0gc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV1cbiAgICAgICAgaWYgKCFsaXN0KSB7XG4gICAgICAgICAgbGlzdCA9IFtdXG4gICAgICAgICAgc2hlZXREYXRhLml0ZW1zQnlUeXBlW2l0ZW0udHlwZV0gPSBsaXN0XG4gICAgICAgIH1cbiAgICAgICAgbGlzdC5wdXNoKGl0ZW0pXG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgaXRlbVR5cGUgaW4gc2hlZXREYXRhLml0ZW1zQnlUeXBlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtVHlwZV0uc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICB9XG5cbiAgICAgIC8vIHJlZG9uZGFudCBhdmVjIG1hdHJpY2UgaXRlbWJ5dHlwZVxuICAgICAgc2hlZXREYXRhLnNraWxscyA9IHNoZWV0RGF0YS5pdGVtc1xuICAgICAgICAuZmlsdGVyKGl0ZW0gPT4gaXRlbS50eXBlID09PSAnc2tpbGwnKVxuICAgICAgICAuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG5cbiAgICAgIHNoZWV0RGF0YS5tZWxlZVNraWxscyA9IHNoZWV0RGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmNvbWJhdCA9PT0gdHJ1ZSAmJlxuICAgICAgICAgIHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLmZpZ2h0aW5nID09PSB0cnVlXG4gICAgICApXG4gICAgICBzaGVldERhdGEucmFuZ2VTa2lsbHMgPSBzaGVldERhdGEuc2tpbGxzLmZpbHRlcihcbiAgICAgICAgc2tpbGwgPT5cbiAgICAgICAgICBza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPT09IHRydWUgJiZcbiAgICAgICAgICBza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID09PSB0cnVlXG4gICAgICApXG5cbiAgICAgIGNvbnN0IGNidFNraWxscyA9IHNoZWV0RGF0YS5za2lsbHMuZmlsdGVyKFxuICAgICAgICBza2lsbCA9PiBza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPT09IHRydWVcbiAgICAgIClcbiAgICAgIGlmIChjYnRTa2lsbHMpIHtcbiAgICAgICAgZm9yIChjb25zdCBza2lsbCBvZiBjYnRTa2lsbHMpIHtcbiAgICAgICAgICBzaGVldERhdGEuY29tYmF0U2tpbGxzW3NraWxsLl9pZF0gPSBza2lsbFxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdlYXBvbnMgPSBzaGVldERhdGEuaXRlbXNCeVR5cGUud2VhcG9uXG5cbiAgICAgIGlmICh3ZWFwb25zKSB7XG4gICAgICAgIGZvciAoY29uc3Qgd2VhcG9uIG9mIHdlYXBvbnMpIHtcbiAgICAgICAgICB3ZWFwb24udXNlc0FsdGVybmF0ZVNraWxsID1cbiAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllcy5hdXRvID09PSB0cnVlIHx8XG4gICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnByb3BlcnRpZXMuYnJzdCA9PT0gdHJ1ZVxuICAgICAgICAgIGlmICghd2VhcG9uLnN5c3RlbS5hbW1vKSB3ZWFwb24uc3lzdGVtLmFtbW8gPSAwXG5cbiAgICAgICAgICB3ZWFwb24uc2tpbGxTZXQgPSB0cnVlXG4gICAgICAgICAgLy8gd2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLm5hbWUgPSAnJztcbiAgICAgICAgICAvLyB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4udmFsdWUgPSAwO1xuICAgICAgICAgIC8vIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lID0gJyc7XG4gICAgICAgICAgLy8gd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LnZhbHVlID0gMDtcbiAgICAgICAgICBpZiAod2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkID09PSAnJykge1xuICAgICAgICAgICAgLy8gVE9ETyA6IHNpIGwnSUQgbidlc3RzIHBhcyBkw6lmaW5pZSBtYWlzIHF1J3VuIG5vbSBhIMOpdMOpIGRvbm7DqSwgdXRpbGlzZXIgY2Ugbm9tIGV0IHRhbnRlciBkZSByZXRyb3V2ZXIgbGUgc2tpbGxcbiAgICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IGZhbHNlXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIFRPRE8gOiBhdmFudCBkJ2Fzc2lnZXIgbGUgc2tpbGwgdsOpcmlmaWVyIHF1J2lsIGV4aXN0ZSB0b3Vqb3Vycy5cbiAgICAgICAgICAgIC8vIHNpIGlsIG4nZXhpc3RlIHBsdXMgaWwgZmF1dCBsZSByZXRyb3V2ZXIgb3UgcGFzc2VyIHNraWxsc2V0IGEgZmFsc2UuXG4gICAgICAgICAgICBpZiAoc2hlZXREYXRhLmNvbWJhdFNraWxsc1t3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4uaWRdKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQod2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLmlkKVxuICAgICAgICAgICAgICB3ZWFwb24uc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9IHNraWxsLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5tYWluLnZhbHVlID0gc2tpbGwudmFsdWVcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHdlYXBvbi5za2lsbFNldCA9IGZhbHNlXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh3ZWFwb24uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgIT09ICcnKSB7XG4gICAgICAgICAgICAgIGlmIChzaGVldERhdGEuY29tYmF0U2tpbGxzW3dlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZF0pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgICAgICAgd2VhcG9uLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2LmlkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lID0gc2tpbGwuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgICAgIHdlYXBvbi5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi52YWx1ZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB3ZWFwb24uc3lzdGVtLl9wcm9wZXJ0aWVzID0gW11cbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LndlYXBvblByb3BlcnRpZXMpKSB7XG4gICAgICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IHt9XG4gICAgICAgICAgICBwcm9wZXJ0eS5pZCA9IGtleVxuICAgICAgICAgICAgcHJvcGVydHkubmFtZSA9IHZhbHVlXG4gICAgICAgICAgICBwcm9wZXJ0eS52YWx1ZSA9IHdlYXBvbi5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICAgICAgICB3ZWFwb24uc3lzdGVtLl9wcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2hlZXREYXRhLndlYXBvbnNbd2VhcG9uLl9pZF0gPSB3ZWFwb25cbiAgICAgICAgICBpZiAod2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHNoZWV0RGF0YS5yYW5nZVdwbi5wdXNoKHdlYXBvbilcbiAgICAgICAgICBlbHNlIHNoZWV0RGF0YS5tZWxlZVdwbi5wdXNoKHdlYXBvbilcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjb25zdCB0b2tlbiA9IHRoaXMudG9rZW5cbiAgICAgIHNoZWV0RGF0YS50b2tlbklkID0gdG9rZW5cbiAgICAgICAgPyBgJHt0b2tlbi5wYXJlbnQ/LmlkID8gdG9rZW4ucGFyZW50LmlkIDogJ1RPS0VOJ30uJHt0b2tlbi5pZH1gXG4gICAgICAgIDogbnVsbCAvLyBSRUZBQ1RPUklORyAoMilcblxuICAgICAgc2hlZXREYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSA9IGZhbHNlXG4gICAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICBmb3IgKGNvbnN0IGNoYXJhY3RlcmlzdGljIG9mIE9iamVjdC52YWx1ZXMoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmNoYXJhY3RlcmlzdGljcykpIHtcbiAgICAgICAgICBpZiAoIWNoYXJhY3RlcmlzdGljLnZhbHVlKSBjaGFyYWN0ZXJpc3RpYy5lZGl0YWJsZSA9IHRydWVcbiAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5oYXJkID0gTWF0aC5mbG9vcihjaGFyYWN0ZXJpc3RpYy52YWx1ZSAvIDIpXG4gICAgICAgICAgY2hhcmFjdGVyaXN0aWMuZXh0cmVtZSA9IE1hdGguZmxvb3IoY2hhcmFjdGVyaXN0aWMudmFsdWUgLyA1KVxuXG4gICAgICAgICAgLy8gSWYgbm8gdmFsdWUgJiYgbm8gZm9ybXVsYSBkb24ndCBkaXNwbGF5IGNoYXJhYy5cbiAgICAgICAgICBpZiAoIWNoYXJhY3RlcmlzdGljLnZhbHVlICYmICFjaGFyYWN0ZXJpc3RpYy5mb3JtdWxhKSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJpc3RpYy5kaXNwbGF5ID0gZmFsc2VcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuZGlzcGxheSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBpZiBhbnkgY2hhcmFjdGVyaXN0aWMgaGFzIG5vIHZhbHVlIGJ1dCBoYXMgYSBmb3JtdWxhLlxuICAgICAgICAgIGlmICghY2hhcmFjdGVyaXN0aWMudmFsdWUgJiYgY2hhcmFjdGVyaXN0aWMuZm9ybXVsYSkge1xuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHNoZWV0RGF0YS5oYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEgPVxuICAgICAgICAgICAgc2hlZXREYXRhLmhhc0VtcHR5VmFsdWVXaXRoRm9ybXVsYSB8fFxuICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWMuaGFzRW1wdHlWYWx1ZVdpdGhGb3JtdWxhXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb3IgY29tcGF0IHdpdGggcHJldmlvdXMgY2hhcmFjdGVycyB0ZXN0IGlmIGF1dG8gaXMgZGVmaW5pZWQsIGlmIG5vdCB3ZSBkZWZpbmUgaXRcbiAgICBpZiAoIVsndmVoaWNsZScsICdjb250YWluZXInXS5pbmNsdWRlcyh0aGlzLmFjdG9yLnR5cGUpKSB7XG4gICAgICBjb25zdCBhdXRvID0gdGhpcy5hY3Rvci5jaGVja1VuZGVmaW5lZEF1dG8oKVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtID0gbWVyZ2VPYmplY3Qoc2hlZXREYXRhLmRhdGEuc3lzdGVtLCBhdXRvKVxuICAgIH0gZWxzZSB7XG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5ocC5hdXRvID0gZmFsc2VcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5hdHRyaWJzLm1wLmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubW92LmF1dG8gPSBmYWxzZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuZGIuYXV0byA9IGZhbHNlXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5idWlsZC5hdXRvID0gZmFsc2VcbiAgICB9XG5cbiAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPCAwKSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSA9IG51bGxcbiAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlIDwgMCkgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlID0gbnVsbFxuXG4gICAgaWYgKCFbJ3ZlaGljbGUnXS5pbmNsdWRlcyh0aGlzLmFjdG9yLnR5cGUpKSB7XG4gICAgICBpZiAoc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeSBpbnN0YW5jZW9mIEFycmF5ICYmIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHkubGVuZ3RoKSB7XG4gICAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5iaW9ncmFwaHlbMF0uaXNGaXJzdCA9IHRydWVcbiAgICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeVtzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmlvZ3JhcGh5Lmxlbmd0aCAtIDFdLmlzTGFzdCA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyA9IGZhbHNlXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zID0gZmFsc2VcblxuICAgIHNoZWV0RGF0YS5oYXNDb25kaXRpb25zID1cbiAgICAgIHRoaXMuYWN0b3IuZWZmZWN0cy5zaXplID4gMCB8fFxuICAgICAgKHR5cGVvZiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zKS5maWx0ZXIoXG4gICAgICAgICAgY29uZGl0aW9uID0+IHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZVxuICAgICAgICApLmxlbmd0aCA+IDApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvLyBzdGF0aWMgcGFyc2VGb3JtdWxhIChmb3JtdWxhKSB7XG4gIC8vICAgbGV0IHBhcnNlZEZvcm11bGEgPSBmb3JtdWxhXG4gIC8vICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5mb3JtdWxhLmFjdG9yc2hlZXQpKSB7XG4gIC8vICAgICBwYXJzZWRGb3JtdWxhID0gcGFyc2VkRm9ybXVsYS5yZXBsYWNlKGtleSwgdmFsdWUpXG4gIC8vICAgfVxuICAvLyAgIHJldHVybiBwYXJzZWRGb3JtdWxhXG4gIC8vIH1cblxuICBnZXQgdG9rZW5LZXkgKCkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0RFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2Jhc2UuanMgZ2V0IHRva2VuS2V5KCk6IERFUFJFQ0FURUQgU0hPVUxEIE5PVCBIQVBQRU4hJylcbiAgICAvLyBpZiggdGhpcy50b2tlbikgcmV0dXJuIGAke3RoaXMudG9rZW4uc2NlbmU/Ll9pZD90aGlzLnRva2VuLnNjZW5lLl9pZDonVE9LRU4nfS4ke3RoaXMudG9rZW4uZGF0YS5faWR9YDsgIC8vUkVGQUNUT1JJTkcgKDIpXG4gICAgLy8gcmV0dXJuIHRoaXMuYWN0b3IuaWQ7XG4gIH1cblxuICBvbkNsb3NlU2hlZXQgKCkge1xuICAgIC8vIHRoaXMuYWN0b3IubG9ja2VkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndXNlQ29udGV4dE1lbnVzJykpIHtcbiAgICAgIGlmICghdGhpcy5tZW51cykgdGhpcy5tZW51cyA9IFtdXG5cbiAgICAgIGNvbnN0IHJvbGxNZW51ID0ge1xuICAgICAgICBpZDogJ3NraWxsLXJvbGwnLFxuICAgICAgICBjbGFzc2VzOiAncm9sbC1tZW51JyxcbiAgICAgICAgc2VjdGlvbjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzZXM6ICdtYWluJyxcbiAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAncm9sbCcsIGxhYmVsOiAnUm9sbCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdvcHBvc2VkLXJvbGwnLCBsYWJlbDogJ09wcG9zZWQgcm9sbCcgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb21iaW5lZC1yb2xsJywgbGFiZWw6ICdDb21iaW5lZCByb2xsJyB9XG4gICAgICAgICAgICBdXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjbGFzc2VzOiAna2VlcGVyJyxcbiAgICAgICAgICAgIHZpc2liaWxpdHk6ICdnbScsXG4gICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGFiZWw6IHsgaWNvbjogJ2ZhcyBmYS1saW5rJywgdGV4dDogJ0xpbmsnIH0sXG4gICAgICAgICAgICAgICAgc3ViTWVudToge1xuICAgICAgICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdsaW5rLXRvb2wnLCBsYWJlbDogJ09wZW4gaW4gbGluayB0b29sJyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ3NlbmQtY2hhdCcsIGxhYmVsOiAnU2VuZCB0byBjaGF0JyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvcHktdG8tY2xpcGJvYXJkJywgbGFiZWw6ICdDb3B5IHRvIGNsaXAtYm9hcmQnIH1cbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAncmVxdWVzdC1yb2xsJywgbGFiZWw6ICdSZXF1ZXN0IHJvbGwnIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgc2FuTWVudSA9IHtcbiAgICAgICAgaWQ6ICdzYW4tcm9sbCcsXG4gICAgICAgIGNsYXNzZXM6ICdyb2xsLW1lbnUnLFxuICAgICAgICBzZWN0aW9uOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgY2xhc3NlczogJ21haW4nLFxuICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdlbmNvdW50ZXInLCBsYWJlbDogJ0VuY291bnRlcicgfSxcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdyb2xsJywgbGFiZWw6ICdSb2xsJyB9LFxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ29wcG9zZWQtcm9sbCcsIGxhYmVsOiAnT3Bwb3NlZCByb2xsJyB9LFxuICAgICAgICAgICAgICB7IGFjdGlvbjogJ2NvbWJpbmVkLXJvbGwnLCBsYWJlbDogJ0NvbWJpbmVkIHJvbGwnIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGNsYXNzZXM6ICdrZWVwZXInLFxuICAgICAgICAgICAgdmlzaWJpbGl0eTogJ3RydXN0ZWQnLFxuICAgICAgICAgICAgaXRlbXM6IFtcbiAgICAgICAgICAgICAgeyBhY3Rpb246ICdyZXF1ZXN0LXJvbGwnLCBsYWJlbDogJ1JlcXVlc3Qgcm9sbCcgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGxhYmVsOiB7IGljb246ICdmYXMgZmEtbGluaycsIHRleHQ6ICdMaW5rJyB9LFxuICAgICAgICAgICAgICAgIHN1Yk1lbnU6IHtcbiAgICAgICAgICAgICAgICAgIGl0ZW1zOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgYWN0aW9uOiAnbGluay10b29sJywgbGFiZWw6ICdPcGVuIGluIGxpbmsgdG9vbCcgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdzZW5kLWNoYXQnLCBsYWJlbDogJ1NlbmQgdG8gY2hhdCcgfSxcbiAgICAgICAgICAgICAgICAgICAgeyBhY3Rpb246ICdjb3B5LXRvLWNsaXBib2FyZCcsIGxhYmVsOiAnQ29weSB0byBjbGlwLWJvYXJkJyB9LFxuICAgICAgICAgICAgICAgICAgICB7IGFjdGlvbjogJ2xpbmstZW5jb3VudGVyJywgbGFiZWw6ICdFbmNvdW50ZXInIH1cbiAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH1cblxuICAgICAgY29uc3Qgcm9sbENvbnRleHRNZW51ID0gbmV3IENvQzdDb250ZXh0TWVudSgpXG4gICAgICByb2xsQ29udGV4dE1lbnUuYmluZChyb2xsTWVudSwgaHRtbCwgdGhpcy5fb25Db250ZXh0TWVudUNsaWNrLmJpbmQodGhpcykpXG4gICAgICB0aGlzLm1lbnVzLnB1c2gocm9sbENvbnRleHRNZW51KVxuXG4gICAgICBjb25zdCBzYW5Db250ZXh0TWVudSA9IG5ldyBDb0M3Q29udGV4dE1lbnUoKVxuICAgICAgc2FuQ29udGV4dE1lbnUuYmluZChzYW5NZW51LCBodG1sLCB0aGlzLl9vbkNvbnRleHRNZW51Q2xpY2suYmluZCh0aGlzKSlcbiAgICAgIHRoaXMubWVudXMucHVzaChzYW5Db250ZXh0TWVudSlcbiAgICB9IGVsc2Uge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNvbnRleHRtZW51KHRoaXMuX29uT3Bwb3NlZFJvbGwuYmluZCh0aGlzKSlcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIC8vIGNvbnRleHQgbWVudSBiaW5kXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5jaGFyYWN0ZXJpc3RpYy1sYWJlbCcpXG4gICAgICAuY2xpY2sodGhpcy5fb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJykuY2xpY2sodGhpcy5fb25Sb2xsU2tpbGxUZXN0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuc2tpbGwtaW1hZ2UnKS5jbGljayh0aGlzLl9vblJvbGxTa2lsbFRlc3QuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmF0dHJpYnV0ZS1sYWJlbC5yb2xsYWJsZScpXG4gICAgICAuY2xpY2sodGhpcy5fb25Sb2xsQXR0cmliVGVzdC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy50b2tlbi1kcmFnLWhhbmRsZScpXG4gICAgICAub24oJ2RyYWdzdGFydCcsIHRoaXMuX29uRHJhZ1Rva2VuU3RhcnQuYmluZCh0aGlzKSlcblxuICAgIC8vIE93bmVyIE9ubHkgTGlzdGVuZXJzXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNPd25lciAmJiAhKHRoaXMuYWN0b3IuY29tcGVuZGl1bT8ubG9ja2VkID8/IGZhbHNlKSkge1xuICAgICAgaHRtbC5maW5kKCcubG9jaycpLmNsaWNrKHRoaXMuX29uTG9ja0NsaWNrZWQuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmZsYWcnKS5jbGljayh0aGlzLl9vbkZsYWdDbGlja2VkLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5mb3JtdWxhJykuY2xpY2sodGhpcy5fb25Gb3JtdWxhQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICAgIH1cblxuICAgIC8vIE93bmVyIE9ubHksIG5vdCBhdmFpbGFibGUgZnJvbSBjb21wZW5kaXVtXG4gICAgaWYgKHRoaXMuYWN0b3IuaXNPd25lciAmJiB0eXBlb2YgdGhpcy5hY3Rvci5jb21wZW5kaXVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXJhY3RlcmlzdGljLWxhYmVsJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdDaGFyYWN0ZXJpc3RpYyhldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuYXR0cmlidXRlLWxhYmVsJylcbiAgICAgICAgLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdBdHRyaWJ1dGUoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnNhbi1jaGVjaycpXG4gICAgICAgIC5vbignZHJhZ3N0YXJ0JywgZXZlbnQgPT4gdGhpcy5fb25EcmFnU2FuQ2hlY2soZXZlbnQpKVxuXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcud2VhcG9uLW5hbWUucm9sbGFibGUnKVxuICAgICAgICAuY29udGV4dG1lbnUodGhpcy5fb25PcHBvc2VkUm9sbC5iaW5kKHRoaXMpKVxuXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucm9sbC1jaGFyYWN0ZXJpdGljcycpXG4gICAgICAgIC5jbGljayh0aGlzLl9vblJvbGxDaGFyYWN0ZXJpdGljc1ZhbHVlLmJpbmQodGhpcykpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuYXZlcmFnZS1jaGFyYWN0ZXJpdGljcycpXG4gICAgICAgIC5jbGljayh0aGlzLl9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25Ub2dnbGUuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLmF1dG8tdG9nZ2xlJykuY2xpY2sodGhpcy5fb25BdXRvVG9nZ2xlLmJpbmQodGhpcykpXG5cbiAgICAgIC8vIFN0YXR1cyBtb25pdG9yXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00gfHwgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhdHVzUGxheWVyRWRpdGFibGUnKSkge1xuICAgICAgICBodG1sLmZpbmQoJy5yZXNldC1jb3VudGVyJykuY2xpY2sodGhpcy5fb25SZXNldENvdW50ZXIuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuY29uZGl0aW9uLW1vbml0b3InKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkNvbmRpdGlvblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5pcy1keWluZycpLmNsaWNrKHRoaXMuaGVhbC5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5pcy1kZWFkJykuY2xpY2sodGhpcy5yZXZpdmUuYmluZCh0aGlzKSlcbiAgICAgIH1cblxuICAgICAgaHRtbC5maW5kKCcuZHlpbmctY2hlY2snKS5jbGljayh0aGlzLmNoZWNrRm9yRGVhdGguYmluZCh0aGlzKSlcblxuICAgICAgaHRtbC5maW5kKCcuaXRlbSAuaXRlbS1pbWFnZScpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVJvbGwoZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLndlYXBvbi1uYW1lLnJvbGxhYmxlJylcbiAgICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uV2VhcG9uUm9sbChldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcuaXRlbS1uYW1lLmVmZmVjdC1uYW1lJylcbiAgICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uRWZmZWN0KGV2ZW50KSlcbiAgICAgIC8vIGh0bWxcbiAgICAgIC8vICAgLmZpbmQoJy5pdGVtLW5hbWUuZWZmZWN0LW5hbWUnKVxuICAgICAgLy8gICAua2V5ZG93bigoZXZlbnQpID0+IHtcbiAgICAgIC8vICAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSkge1xuICAgICAgLy8gICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdwb2ludGVyJylcbiAgICAgIC8vICAgICB9XG4gICAgICAvLyAgIH0pXG4gICAgICAvLyBodG1sXG4gICAgICAvLyAgIC5maW5kKCcuaXRlbS1uYW1lLmVmZmVjdC1uYW1lJylcbiAgICAgIC8vICAgLmtleWRvd24oKGV2ZW50KSA9PiB7XG4gICAgICAvLyAgICAgaWYgKGlzQ3RybEtleShldmVudCkpIHtcbiAgICAgIC8vICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgncG9pbnRlcicpXG4gICAgICAvLyAgICAgfVxuICAgICAgLy8gICB9KVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLndlYXBvbi1za2lsbC5yb2xsYWJsZScpXG4gICAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiB0aGlzLl9vbldlYXBvblNraWxsUm9sbChldmVudCkpXG4gICAgICBodG1sLmZpbmQoJy5yZWxvYWQtd2VhcG9uJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25SZWxvYWRXZWFwb24oZXZlbnQpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJlbG9hZC13ZWFwb24nKVxuICAgICAgICAub24oJ2NvbnRleHRtZW51JywgZXZlbnQgPT4gdGhpcy5fb25SZWxvYWRXZWFwb24oZXZlbnQpKVxuICAgICAgaHRtbC5maW5kKCcuYWRkLWFtbW8nKS5jbGljayh0aGlzLl9vbkFkZEFtby5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCcucmVhZC1vbmx5JykuZGJsY2xpY2sodGhpcy5fdG9nZ2xlUmVhZE9ubHkuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwub24oJ2NsaWNrJywgJy53ZWFwb24tZGFtYWdlJywgdGhpcy5fb25XZWFwb25EYW1hZ2UuYmluZCh0aGlzKSlcblxuICAgICAgaHRtbC5maW5kKCcuaW52ZW50b3J5LWhlYWRlcicpLmNsaWNrKHRoaXMuX29uSW52ZW50b3J5SGVhZGVyLmJpbmQodGhpcykpXG4gICAgICBodG1sLmZpbmQoJy5pdGVtcy1oZWFkZXInKS5jbGljayh0aGlzLl9vbkl0ZW1IZWFkZXIuYmluZCh0aGlzKSlcbiAgICAgIGh0bWwuZmluZCgnLnNlY3Rpb24taGVhZGVyJykuY2xpY2sodGhpcy5fb25TZWN0aW9uSGVhZGVyLmJpbmQodGhpcykpXG5cbiAgICAgIGNvbnN0IHdoZWVsSW5wdXRzID0gaHRtbC5maW5kKCcuYXR0cmlidXRlLXZhbHVlJylcbiAgICAgIGZvciAoY29uc3Qgd2hlZWxJbnB1dCBvZiB3aGVlbElucHV0cykge1xuICAgICAgICB3aGVlbElucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZXZlbnQgPT4gdGhpcy5fb25XaGVlbChldmVudCksIHtcbiAgICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtU3VtbWFyeShldmVudCkpXG4gICAgaHRtbC5maW5kKCcuaXRlbS1wb3B1cCcpLmNsaWNrKHRoaXMuX29uSXRlbVBvcHVwLmJpbmQodGhpcykpXG5cbiAgICAvLyBVcGRhdGUgSW52ZW50b3J5IEl0ZW1cbiAgICBodG1sLmZpbmQoJy5zaG93LWRldGFpbCcpLmRibGNsaWNrKGV2ZW50ID0+IHRoaXMuX29uUmVuZGVySXRlbVNoZWV0KGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLWVkaXQnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblJlbmRlckl0ZW1TaGVldChldmVudCkpXG5cbiAgICAvLyBEZWxldGUgSW52ZW50b3J5IEl0ZW1cbiAgICBodG1sLmZpbmQoJy5pdGVtLWRlbGV0ZScpLmNsaWNrKGFzeW5jIGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtVG9EZWxldGUgPSB0aGlzLmFjdG9yLml0ZW1zLmdldChsaS5kYXRhKCdpdGVtSWQnKSwge1xuICAgICAgICBzdHJpY3Q6IHRydWVcbiAgICAgIH0pXG4gICAgICBhd2FpdCBpdGVtVG9EZWxldGUuZGVsZXRlKClcbiAgICAgIGxpLnNsaWRlVXAoMjAwLCAoKSA9PiB0aGlzLnJlbmRlcihmYWxzZSkpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1pdGVtJykuY2xpY2soZXYgPT4ge1xuICAgICAgZXYuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIHN3aXRjaCAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGUpIHtcbiAgICAgICAgY2FzZSAnYm9vayc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUJvb2soZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUl0ZW0oZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTa2lsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdzcGVsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNwZWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6XG4gICAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgcHJvcGVydGllcyA9IHt9XG4gICAgICAgICAgICBpZiAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0Lm1lbGVlKSB7XG4gICAgICAgICAgICAgIHByb3BlcnRpZXMubWVsZWUgPSB0cnVlXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5ybmdkKSB7XG4gICAgICAgICAgICAgIHByb3BlcnRpZXMucm5nZCA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlXZWFwb24oZXYsIHByb3BlcnRpZXMpXG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfSlcblxuICAgIC8vIGh0bWwuZmluZCgnLmNsZWFuLXNraWxsLWxpc3QnKS5jbGljaygoKSA9PiB7XG4gICAgLy8gICB0aGlzLmFjdG9yLmNsZWFuU2tpbGxzKClcbiAgICAvLyB9KVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS10cmFkZScpLmNsaWNrKHRoaXMuX29uVHJhZGVJdGVtLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtbmV3LXNlY3Rpb24nKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmNyZWF0ZUJpb1NlY3Rpb24oKVxuICAgICAgdGhpcy5yZW5kZXIoKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZWxldGUtc2VjdGlvbicpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmJpby1zZWN0aW9uJykuZGF0YXNldC5pbmRleFxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci5kZWxldGVCaW9TZWN0aW9uKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5tb3ZlLXNlY3Rpb24tdXAnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25VcChpbmRleClcbiAgICB9KVxuXG4gICAgaHRtbC5maW5kKCcubW92ZS1zZWN0aW9uLWRvd24nKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpbmRleCA9IHBhcnNlSW50KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgIClcbiAgICAgIHRoaXMuYWN0b3IubW92ZUJpb1NlY3Rpb25Eb3duKGluZGV4KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5kZXZlbG9wbWVudC1mbGFnJykuZGJsY2xpY2soZXYgPT4ge1xuICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICBldi5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICAgIClcbiAgICAgIGl0ZW0udG9nZ2xlSXRlbUZsYWcoJ2RldmVsb3BlbWVudCcpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLm9jY3VwYXRpb24tc2tpbGwtZmxhZy5jbGlja2FibGUnKS5jbGljayhldiA9PiB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICAgIGV2LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgKVxuICAgICAgaXRlbS50b2dnbGVJdGVtRmxhZygnb2NjdXBhdGlvbicpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmFyY2hldHlwZS1za2lsbC1mbGFnLmNsaWNrYWJsZScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgZXYuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICApXG4gICAgICBpdGVtLnRvZ2dsZUl0ZW1GbGFnKCdhcmNoZXR5cGUnKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5za2lsbC1kZXZlbG9wZW1lbnQnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLmFjdG9yLmRldmVsb3BlbWVudFBoYXNlKGV2ZW50LnNoaWZ0S2V5KVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5sdWNrLWRldmVsb3BtZW50JykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgaWYgKCFldmVudC5kZXRhaWwgfHwgZXZlbnQuZGV0YWlsID09PSAxKSB7XG4gICAgICAgIHRoaXMuYWN0b3IuZGV2ZWxvcEx1Y2soZXZlbnQuc2hpZnRLZXkpXG4gICAgICB9XG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmNsZWFyX2NvbmRpdGlvbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICBpZiAodHlwZW9mIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNvbnN0IGRpc2FibGUgPSB7fVxuICAgICAgICBmb3IgKGNvbnN0IGNvbmRpdGlvbiBpbiB0aGlzLmFjdG9yLnN5c3RlbS5jb25kaXRpb25zKSB7XG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgdHlwZW9mIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZSAhPT1cbiAgICAgICAgICAgICAgJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgIHRoaXMuYWN0b3Iuc3lzdGVtLmNvbmRpdGlvbnNbY29uZGl0aW9uXS52YWx1ZSA9PT0gdHJ1ZVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgZGlzYWJsZVtgc3lzdGVtLmNvbmRpdGlvbnMuJHtjb25kaXRpb259LnZhbHVlYF0gPSBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGlzYWJsZSkubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuYWN0b3IudXBkYXRlKGRpc2FibGUpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IGVmZmVjdHMgPSB0aGlzLmFjdG9yLmVmZmVjdHMubWFwKGVmZmVjdCA9PiBlZmZlY3QuaWQpXG4gICAgICBpZiAoZWZmZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuYWN0b3IuZGVsZXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIGVmZmVjdHMpXG4gICAgICB9XG4gICAgfSlcblxuICAgIENvQzdMaW5rLmJpbmRFdmVudHNIYW5kbGVyKGh0bWwpXG5cbiAgICAvKipcbiAgICAgKiBUaGlzIGlzIHVzZWQgZm9yIGRldiBwdXJwb3NlcyBvbmx5ICFcbiAgICAgKi9cbiAgICBodG1sLmZpbmQoJy50ZXN0LXRyaWdnZXInKS5jbGljayhhc3luYyBldmVudCA9PiB7XG4gICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2hpZGRlbmRldm1lbnUnKSkgcmV0dXJuIG51bGxcbiAgICAgIC8vIGF3YWl0IEl0ZW0uY3JlYXRlKHtcbiAgICAgIC8vICAgbmFtZTogJ19fQ29DN0ludGVybmFsSXRlbV9fJyxcbiAgICAgIC8vICAgdHlwZTogJ2l0ZW0nXG4gICAgICAvLyB9KVxuICAgICAgLy8gY29uc3QgZWZmZWN0cyA9IGF3YWl0IGl0ZW0uY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0FjdGl2ZUVmZmVjdCcsIFtcbiAgICAgIC8vICAge1xuICAgICAgLy8gICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRWZmZWN0TmV3JyksXG4gICAgICAvLyAgICAgaWNvbjogJ2ljb25zL3N2Zy9hdXJhLnN2ZycsXG4gICAgICAvLyAgICAgb3JpZ2luOiBudWxsLFxuICAgICAgLy8gICAgICdkdXJhdGlvbi5yb3VuZHMnOiB1bmRlZmluZWQsXG4gICAgICAvLyAgICAgZGlzYWJsZWQ6IHRydWVcbiAgICAgIC8vICAgfVxuICAgICAgLy8gXSlcbiAgICAgIC8vIGNvbnN0IGVmZmVjdCA9IGVmZmVjdHNbMF1cbiAgICAgIC8vIGF3YWl0IGVmZmVjdC5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyggJ2VmZmVjdCBjcmVhdGVkICEnKVxuICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdlZmZlY3QgY3JlYXRlZCAhJylcbiAgICB9KVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5za2lsbC1uYW1lLnJvbGxhYmxlJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcFNraWxsRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY2hhcmFjdGVyaXN0aWMtbGFiZWwnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlci5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5hdHRyaWJ1dGUtbGFiZWwucm9sbGFibGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXR0cmlidXRlRW50ZXIuYmluZCh0aGlzKSlcbiAgICAgIC5tb3VzZWxlYXZlKGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBMZWF2ZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuYXV0by10b2dnbGUnKVxuICAgICAgLm1vdXNlZW50ZXIodGhpcy50b29sVGlwQXV0b0VudGVyLmJpbmQodGhpcykpXG4gICAgICAubW91c2VsZWF2ZShnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwTGVhdmUuYmluZCh0aGlzKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tY29udHJvbC5kZXZlbG9wbWVudC1mbGFnJylcbiAgICAgIC5tb3VzZWVudGVyKHRoaXMudG9vbFRpcEZsYWdGb3JEZXZlbG9wbWVudC5iaW5kKHRoaXMpKVxuICAgICAgLm1vdXNlbGVhdmUoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcExlYXZlLmJpbmQodGhpcykpXG5cbiAgICAvLyBBY3RpdmUgRWZmZWN0c1xuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZWZmZWN0LWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKGV2ID0+IENvQzdBY3RpdmVFZmZlY3Qub25NYW5hZ2VBY3RpdmVFZmZlY3QoZXYsIHRoaXMuYWN0b3IpKVxuICB9XG5cbiAgdG9vbFRpcFNraWxsRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXNDb21iYXQgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xhc3NMaXN0Py5jb250YWlucyhcbiAgICAgICAgICAgICdjb21iYXQnXG4gICAgICAgICAgKVxuICAgICAgICAgIGNvbnN0IGl0ZW0gPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLml0ZW0nKVxuICAgICAgICAgIGlmICh0eXBlb2YgaXRlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IHNraWxsSWQgPSBpdGVtLmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgICAgY29uc3Qgc2tpbGwgPSBzaGVldC5hY3Rvci5pdGVtcy5nZXQoc2tpbGxJZClcbiAgICAgICAgICAgIGxldCB0b29sVGlwID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgaXNDb21iYXQgPyAnQ29DNy5Ub29sVGlwQ29tYmF0JyA6ICdDb0M3LlRvb2xUaXBTa2lsbCcsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBza2lsbDogc2tpbGwubmFtZSxcbiAgICAgICAgICAgICAgICByZWd1bGFyOiBza2lsbC52YWx1ZSxcbiAgICAgICAgICAgICAgICBoYXJkOiBNYXRoLmZsb29yKHNraWxsLnZhbHVlIC8gMiksXG4gICAgICAgICAgICAgICAgZXh0cmVtZTogTWF0aC5mbG9vcihza2lsbC52YWx1ZSAvIDUpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICB0b29sVGlwICtcbiAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzdGFuYnlHTVJvbGxzJykgJiZcbiAgICAgICAgICAgICAgICAgICAgc2hlZXQuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IHNoZWV0LmFjdG9yLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIDogJydcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuZGlzcGxheVRvb2xUaXAodG9vbFRpcClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBDaGFyYWN0ZXJpc3RpY0VudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGNoYXIgPSBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIuY2xvc2VzdCgnLmNoYXItYm94JylcbiAgICAgICAgICBpZiAodHlwZW9mIGNoYXIgIT09ICd1bmRlZmluZWQnICYmICEhY2hhcikge1xuICAgICAgICAgICAgY29uc3QgY2hhcklkID0gY2hhci5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXJpc3RpYyA9IHNoZWV0LmFjdG9yLmNoYXJhY3RlcmlzdGljc1tjaGFySWRdXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xuICAgICAgICAgICAgICBza2lsbDogY2hhcmFjdGVyaXN0aWMubGFiZWwsXG4gICAgICAgICAgICAgIHJlZ3VsYXI6IGNoYXJhY3RlcmlzdGljLnZhbHVlID8/IDAsXG4gICAgICAgICAgICAgIGhhcmQ6IGNoYXJhY3RlcmlzdGljLmhhcmQgPz8gMCxcbiAgICAgICAgICAgICAgZXh0cmVtZTogY2hhcmFjdGVyaXN0aWMuZXh0cmVtZSA/PyAwXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgIHRvb2xUaXAgPVxuICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgb3RoZXI6XG4gICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Ub29sVGlwS2VlcGVyU3RhbmRieVNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgOiAnJ1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgdG9vbFRpcEF0dHJpYnV0ZUVudGVyIChldmVudCkge1xuICAgIGNvbnN0IGRlbGF5ID0gcGFyc2VJbnQoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAndG9vbFRpcERlbGF5JykpXG4gICAgaWYgKGRlbGF5ID4gMCkge1xuICAgICAgY29uc3Qgc2hlZXQgPSB0aGlzXG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IGF0dHJpYiA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuYXR0cmlidXRlJylcbiAgICAgICAgICBpZiAodHlwZW9mIGF0dHJpYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZUlkID0gYXR0cmliLmRhdGFzZXQuYXR0cmliXG4gICAgICAgICAgICBsZXQgdG9vbFRpcCA9ICcnXG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gc2hlZXQuYWN0b3Iuc3lzdGVtLmF0dHJpYnNbYXR0cmlidXRlSWRdXG4gICAgICAgICAgICBzd2l0Y2ggKGF0dHJpYnV0ZUlkKSB7XG4gICAgICAgICAgICAgIGNhc2UgJ2xjayc6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsJywge1xuICAgICAgICAgICAgICAgICAgc2tpbGw6IGF0dHJpYnV0ZXMubGFiZWwsXG4gICAgICAgICAgICAgICAgICByZWd1bGFyOiBhdHRyaWJ1dGVzLnZhbHVlID8/IDAsXG4gICAgICAgICAgICAgICAgICBoYXJkOiBNYXRoLmZsb29yKChhdHRyaWJ1dGVzLnZhbHVlID8/IDApIC8gMiksXG4gICAgICAgICAgICAgICAgICBleHRyZW1lOiBNYXRoLmZsb29yKChhdHRyaWJ1dGVzLnZhbHVlID8/IDApIC8gNSlcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICAgICAgICAgICAgdG9vbFRpcCA9XG4gICAgICAgICAgICAgICAgICAgIHRvb2xUaXAgK1xuICAgICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICBvdGhlcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N0YW5ieUdNUm9sbHMnKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgc2hlZXQuYWN0b3IuaGFzUGxheWVyT3duZXJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPyBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlRvb2xUaXBLZWVwZXJTdGFuZGJ5U2tpbGwnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogc2hlZXQuYWN0b3IubmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICA6ICcnXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnZGInOlxuICAgICAgICAgICAgICAgIHRvb2xUaXAgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcERCJylcbiAgICAgICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgJ3Nhbic6XG4gICAgICAgICAgICAgICAgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNhbml0eScsIHtcbiAgICAgICAgICAgICAgICAgIHNraWxsOiAnU2FuaXR5JyxcbiAgICAgICAgICAgICAgICAgIHJlZ3VsYXI6IGF0dHJpYnV0ZXMudmFsdWUgPz8gMCxcbiAgICAgICAgICAgICAgICAgIGhhcmQ6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyAyKSxcbiAgICAgICAgICAgICAgICAgIGV4dHJlbWU6IE1hdGguZmxvb3IoKGF0dHJpYnV0ZXMudmFsdWUgPz8gMCkgLyA1KVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgICAgICAgICB0b29sVGlwID1cbiAgICAgICAgICAgICAgICAgICAgdG9vbFRpcCArXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclNraWxsJywge1xuICAgICAgICAgICAgICAgICAgICAgIG90aGVyOlxuICAgICAgICAgICAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvb2xUaXBLZWVwZXJTYW5pdHknKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3RhbmJ5R01Sb2xscycpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGVldC5hY3Rvci5oYXNQbGF5ZXJPd25lclxuICAgICAgICAgICAgICAgICAgICAgICAgICA/IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcEtlZXBlclN0YW5kYnlTa2lsbCcsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBzaGVldC5hY3Rvci5uYW1lXG4gICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDogJycpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBBdXRvRW50ZXIgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgICBnYW1lLkNvQzdUb29sdGlwcy50b29sVGlwVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyICE9PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIGNvbnN0IHRvb2xUaXAgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vbFRpcEF1dG9Ub2dnbGUnKVxuICAgICAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLmRpc3BsYXlUb29sVGlwKHRvb2xUaXApXG4gICAgICAgIH1cbiAgICAgIH0sIGRlbGF5KVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBGbGFnRm9yRGV2ZWxvcG1lbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgZGVsYXkgPSBwYXJzZUludChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd0b29sVGlwRGVsYXknKSlcbiAgICBpZiAoZGVsYXkgPiAwKSB7XG4gICAgICBjb25zdCBzaGVldCA9IHRoaXNcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICAgIGdhbWUuQ29DN1Rvb2x0aXBzLnRvb2xUaXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5Ub29sVGlwSG92ZXIgIT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuQ29DN1Rvb2x0aXBzLlRvb2xUaXBIb3Zlci5jbG9zZXN0KCcuaXRlbScpXG4gICAgICAgICAgaWYgKHR5cGVvZiBpdGVtICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgY29uc3Qgc2tpbGxJZCA9IGl0ZW0uZGF0YXNldC5za2lsbElkXG4gICAgICAgICAgICBjb25zdCBza2lsbCA9IHNoZWV0LmFjdG9yLml0ZW1zLmdldChza2lsbElkKVxuICAgICAgICAgICAgY29uc3QgdG9vbFRpcCA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuVG9vbFRpcFNraWxsRmxhZ1RvZ2dsZScsIHtcbiAgICAgICAgICAgICAgc3RhdHVzOiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICAgc2tpbGwuc3lzdGVtLmZsYWdzLmRldmVsb3BlbWVudFxuICAgICAgICAgICAgICAgICAgPyAnQ29DNy5Ub29sVGlwU2tpbGxGbGFnZ2VkJ1xuICAgICAgICAgICAgICAgICAgOiAnQ29DNy5Ub29sVGlwU2tpbGxVbmZsYWdnZWQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBnYW1lLkNvQzdUb29sdGlwcy5kaXNwbGF5VG9vbFRpcCh0b29sVGlwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSwgZGVsYXkpXG4gICAgfVxuICB9XG5cbiAgX29uQ29udGV4dE1lbnVDbGljayAoZXZlbnQsIHRhcmdldCkge1xuICAgIGNvbnN0IHRhcmdldFR5cGUgPSB0YXJnZXQuZGF0YXNldD8udGFyZ2V0VHlwZVxuICAgIGNvbnN0IHJvbGxPcHRpb25zID0ge1xuICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICBhY3RvcjogdGhpcy5hY3RvclxuICAgIH1cbiAgICBzd2l0Y2ggKHRhcmdldFR5cGUpIHtcbiAgICAgIGNhc2UgKCdza2lsbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTExcbiAgICAgICAgcm9sbE9wdGlvbnMuc2tpbGxJZCA9IHRhcmdldC5jbG9zZXN0KCcuaXRlbScpPy5kYXRhc2V0LnNraWxsSWRcblxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NoYXJhY3RlcmlzdGljJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgICAgICByb2xsT3B0aW9ucy5jaGFyYWN0ZXJpc3RpYyA9IHRhcmdldC5jbG9zZXN0KCcuY2hhci1ib3gnKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgKCdhdHRyaWJ1dGUnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMucm9sbFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0FUVFJJQlVURVxuICAgICAgICByb2xsT3B0aW9ucy5hdHRyaWJ1dGUgPSB0YXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliXG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmFjdGlvbikge1xuICAgICAgY2FzZSAoJ3JvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ29wcG9zZWQtcm9sbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRFxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2NvbWJpbmVkLXJvbGwnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX0NPTUJJTkVEXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgncmVxdWVzdC1yb2xsJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUxcbiAgICAgICAgcm9sbE9wdGlvbnMucHJldmVudFN0YW5kYnkgPSBmYWxzZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2xpbmstdG9vbCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5vcGVuTGlua1Rvb2wgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnc2VuZC1jaGF0Jyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NoYXQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnY29weS10by1jbGlwYm9hcmQnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuc2VuZFRvQ2xpcGJvYXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ2xpbmstZW5jb3VudGVyJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgKCdlbmNvdW50ZXInKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDS1xuICAgICAgICByb2xsT3B0aW9ucy5yb2xsVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFXG4gICAgICAgIHJvbGxPcHRpb25zLmZhc3RGb3J3YXJkID0gdHJ1ZVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHJvbGxPcHRpb25zKVxuICB9XG5cbiAgX29uUmVuZGVySXRlbVNoZWV0IChldmVudCkge1xuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgIGl0ZW0uc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25UcmFkZUl0ZW0gKGV2ZW50KSB7XG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgbGV0IGNvbnRlbnQgPSAnPHA+JyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlU2VsZWN0VXNlclRvR2l2ZVRvJylcbiAgICBjb25zdCBtZXNzYWdlID0ge1xuICAgICAgYWN0b3JGcm9tOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgc2NlbmU6IG51bGwsXG4gICAgICBhY3RvclRvOiB0aGlzLmFjdG9yLmlkLFxuICAgICAgaXRlbTogaXRlbS5pZFxuICAgIH1cbiAgICBpZiAodGhpcy50b2tlbj8uYWN0b3IpIHtcbiAgICAgIG1lc3NhZ2UuYWN0b3JGcm9tID0gdGhpcy50b2tlbi5pZFxuICAgICAgbWVzc2FnZS5zY2VuZSA9IHRoaXMudG9rZW4ucGFyZW50LmlkXG4gICAgfVxuICAgIGNvbnN0IGFjdG9ycyA9IGdhbWUuYWN0b3JzLmZpbHRlcihlID0+IHtcbiAgICAgIGlmICghWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJywgJ2NvbnRhaW5lciddLmluY2x1ZGVzKGUudHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5hY3Rvci5pZCA9PT0gZS5pZCkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICAgIGxldCB2aXNpYmxlID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGUub3duZXJzaGlwKSkge1xuICAgICAgICBpZiAoayA9PT0gJ2RlZmF1bHQnIHx8IGsgPT09IGdhbWUudXNlci5pZCkge1xuICAgICAgICAgIHZpc2libGUgPSB2aXNpYmxlIHx8IHYgIT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmlzaWJsZVxuICAgIH0pXG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgY29udGVudCA9XG4gICAgICAgIGNvbnRlbnQgKyAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhY3Rvci5pZCArICdcIj4nICsgYWN0b3IubmFtZSArICc8L29wdGlvbj4nXG4gICAgfVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvc2VsZWN0PjwvZm9ybT48L3A+J1xuICAgIG1lc3NhZ2UuYWN0b3JUbyA9IGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgY29uc3QgZGxnID0gbmV3IERpYWxvZyh7XG4gICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVRpdGxlU2VsZWN0VXNlclRvR2l2ZVRvJyksXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIGJ1dHRvbnM6IHtcbiAgICAgICAgICBjb25maXJtOiB7XG4gICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlZhbGlkYXRlJyksXG4gICAgICAgICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKFxuICAgICAgICAgICAgICAgIGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgW25hbWUsIHZhbHVlXSBvZiBmb3JtRGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChuYW1lID09PSAndXNlcicpIHtcbiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKHZhbHVlKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZGVmYXVsdDogJ2NvbmZpcm0nLFxuICAgICAgICBjbG9zZTogKCkgPT4ge31cbiAgICAgIH0pXG4gICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgfSlcbiAgICBhd2FpdCBnYW1lLkNvQzdzb2NrZXQuZXhlY3V0ZUFzR00oJ2dtdHJhZGVpdGVtdG8nLCBtZXNzYWdlKVxuICB9XG5cbiAgX29uRHJhZ1N0YXJ0IChldmVudCkge1xuICAgIHN1cGVyLl9vbkRyYWdTdGFydChldmVudClcbiAgICBpZiAodGhpcy50b2tlbikge1xuICAgICAgY29uc3QgZHJhZ0RhdGEgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBkcmFnRGF0YS50b2tlblV1aWQgPSB0aGlzLnRva2VuLnV1aWRcbiAgICAgIGRyYWdEYXRhLnRva2VuSWQgPSB0aGlzLnRva2VuLmlkXG4gICAgICBkcmFnRGF0YS5zY2VuZUlkID0gdGhpcy50b2tlbi5wYXJlbnQuaWRcbiAgICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnY2hhcmFjdGVyaXN0aWMnLFxuICAgICAgY2hlY2s6ICdjaGVjaycsXG4gICAgICB0eXBlOiAnQ29DN0xpbmsnLFxuICAgICAgaGFzUGxheWVyT3duZXI6IHRoaXMuYWN0b3IuaGFzUGxheWVyT3duZXIsXG4gICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5hY3RvcktleSxcbiAgICAgIG5hbWU6IGJveC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljLFxuICAgICAgaWNvbjogbnVsbCxcbiAgICAgIGRvY3VtZW50OiB7XG4gICAgICAgIHR5cGU6IHRoaXMuZG9jdW1lbnQudHlwZSxcbiAgICAgICAgdXVpZDogdGhpcy5kb2N1bWVudC51dWlkXG4gICAgICB9XG4gICAgfVxuXG4gICAgZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgndGV4dC9wbGFpbicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKVxuICB9XG5cbiAgX29uRHJhZ0F0dHJpYnV0ZSAoZXZlbnQpIHtcbiAgICBjb25zdCBib3ggPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnRcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgQ29DN1R5cGU6ICdsaW5rJyxcbiAgICAgIGxpbmtUeXBlOiAnYXR0cmlidXRlJyxcbiAgICAgIGNoZWNrOiAnY2hlY2snLFxuICAgICAgdHlwZTogJ0NvQzdMaW5rJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBuYW1lOiBib3guZGF0YXNldC5hdHRyaWIsXG4gICAgICBpY29uOiBudWxsLFxuICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgdHlwZTogdGhpcy5kb2N1bWVudC50eXBlLFxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBfb25EcmFnU2FuQ2hlY2sgKGV2ZW50KSB7XG4gICAgY29uc3Qgc2FuTWluID0gZXZlbnQuY3VycmVudFRhcmdldC5xdWVyeVNlbGVjdG9yKCcuc2FuLXZhbHVlLnBhc3MnKVxuICAgIGNvbnN0IHNhbk1heCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvcignLnNhbi12YWx1ZS5mYWlsZWQnKVxuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICBDb0M3VHlwZTogJ2xpbmsnLFxuICAgICAgbGlua1R5cGU6ICdjb2M3LWxpbmsnLFxuICAgICAgY2hlY2s6ICdzYW5sb3NzJyxcbiAgICAgIGhhc1BsYXllck93bmVyOiB0aGlzLmFjdG9yLmhhc1BsYXllck93bmVyLFxuICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXksXG4gICAgICBzYW5NaW46IHNhbk1pbi5pbm5lclRleHQsXG4gICAgICBzYW5NYXg6IHNhbk1heC5pbm5lclRleHQsXG4gICAgICBpY29uOiBudWxsLFxuICAgICAgZG9jdW1lbnQ6IHtcbiAgICAgICAgdHlwZTogdGhpcy5kb2N1bWVudC50eXBlLFxuICAgICAgICB1dWlkOiB0aGlzLmRvY3VtZW50LnV1aWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICBldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCkge1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgaWYgKGRhdGFTdHJpbmcgPT09ICcnKSB7XG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICBpZiAoZGF0YS50eXBlID09PSAnQ29DN0xpbmsnKSB7XG4gICAgICBpZiAoZGF0YS5jaGVjayA9PT0gQ29DN0xpbmsuQ0hFQ0tfVFlQRS5FRkZFQ1QpIHtcbiAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2sodGhpcy5hY3RvciwgZGF0YSlcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgc3VwZXIuX29uRHJvcChldmVudClcbiAgfVxuXG4gIGFzeW5jIF9vbkNvbmRpdGlvblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3IudG9nZ2xlQ29uZGl0aW9uKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5jb25kaXRpb24pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmV2aXZlICgpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHRoaXMuYWN0b3IudW5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMuZGVhZClcbiAgfVxuXG4gIGFzeW5jIGhlYWwgKCkge1xuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkgdGhpcy5hY3Rvci51bnNldENvbmRpdGlvbihDT0M3LnN0YXR1cy5keWluZylcbiAgfVxuXG4gIGFzeW5jIGNoZWNrRm9yRGVhdGggKGV2ZW50KSB7XG4gICAgY29uc3QgY29uQ2hlY2sgPSBuZXcgQ29DN0NvbkNoZWNrKFxuICAgICAgdGhpcy5hY3Rvci5pc1Rva2VuID8gdGhpcy5hY3Rvci50b2tlbktleSA6IHRoaXMuYWN0b3IuaWRcbiAgICApXG4gICAgY29uQ2hlY2suc3RheUFsaXZlID0gdHJ1ZVxuICAgIGNvbkNoZWNrLnRvTWVzc2FnZShldmVudC5zaGlmdEtleSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyYWdUb2tlblN0YXJ0IChldmVudCkge1xuICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICB0eXBlOiAnVG9rZW4nLFxuICAgICAgdXVpZDogdGhpcy50b2tlbi51dWlkXG4gICAgfVxuICAgIGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkYXRhKSlcbiAgfVxuXG4gIGFzeW5jIF9vblJlc2V0Q291bnRlciAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgYXdhaXQgdGhpcy5hY3Rvci5yZXNldERhaWx5U2FuaXR5KClcbiAgfVxuXG4gIGFzeW5jIF9vbkF1dG9Ub2dnbGUgKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpKSB7XG4gICAgICBjb25zdCBhdHRyaWIgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKS5kYXRhc2V0LmF0dHJpYlxuICAgICAgdGhpcy5hY3Rvci50b2dnbGVBdHRyaWJBdXRvKGF0dHJpYilcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Ub2dnbGUgKGV2ZW50KSB7XG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoXG4gICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJykuZGF0YXNldC5pdGVtSWRcbiAgICApXG4gICAgaWYgKHdlYXBvbikge1xuICAgICAgd2VhcG9uLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucHJvcGVydHksXG4gICAgICAgIGlzQ3RybEtleShldmVudClcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAvLyByb2xsIHRoZSBhY3RvciBjaGFyYWN0ZXJpc3RpYyBmcm9tIGZvcm11bGEgd2hlbiBwb3NzaWJsZS5cbiAgYXN5bmMgX29uUm9sbENoYXJhY3Rlcml0aWNzVmFsdWUgKCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iucm9sbENoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgfVxuXG4gIGFzeW5jIF9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlICgpIHtcbiAgICB0aGlzLmFjdG9yLmF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSgpXG4gIH1cblxuICBhc3luYyBfb25Mb2NrQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgaXNMb2NrZWQgPSB0aGlzLmFjdG9yLmxvY2tlZFxuICAgIHRoaXMuYWN0b3IubG9ja2VkID0gIWlzTG9ja2VkXG4gICAgSG9va3MuY2FsbCgnYWN0b3JMb2NrQ2xpY2tlZENvQzcnLCBbIWlzTG9ja2VkXSlcbiAgfVxuXG4gIGFzeW5jIF9vbkZsYWdDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBmbGFnTmFtZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5mbGFnXG4gICAgdGhpcy5hY3Rvci50b2dnbGVBY3RvckZsYWcoZmxhZ05hbWUpXG4gIH1cblxuICBhc3luYyBfb25Gb3JtdWxhQ2xpY2tlZCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgdGhpcy5hY3Rvci50b2dnbGVBY3RvckZsYWcoJ2Rpc3BsYXlGb3JtdWxhJylcbiAgfVxuXG4gIGFzeW5jIF9vbldoZWVsIChldmVudCkge1xuICAgIGxldCB2YWx1ZSA9IHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpIHx8IG51bGxcbiAgICBpZiAoZXZlbnQuZGVsdGFZID4gMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSA9PT0gMCA/IDAgOiB2YWx1ZSAtIDFcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuZGVsdGFZIDwgMCkge1xuICAgICAgdmFsdWUgPSB2YWx1ZSArIDFcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQubmFtZSkge1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuaHAudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEhwKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldE1wKHZhbHVlKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRTYW4odmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5sY2sudmFsdWUnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEx1Y2sodmFsdWUpXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdzeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50JzpcbiAgICAgICAgdGhpcy5hY3Rvci5zZXRIcCh2YWx1ZSlcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBfdG9nZ2xlUmVhZE9ubHkgKGV2ZW50KSB7XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5yZWFkT25seSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LnJlYWRPbmx5XG4gICAgZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdyZWFkLW9ubHknKVxuICB9XG5cbiAgX29uSXRlbVN1bW1hcnkgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uZ2V0Q2hhdERhdGEoeyBzZWNyZXRzOiB0aGlzLmFjdG9yLmlzT3duZXIgfSlcblxuICAgIC8vIFRvZ2dsZSBzdW1tYXJ5XG4gICAgaWYgKGxpLmhhc0NsYXNzKCdleHBhbmRlZCcpKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gbGkuY2hpbGRyZW4oJy5pdGVtLXN1bW1hcnknKVxuICAgICAgc3VtbWFyeS5zbGlkZVVwKDIwMCwgKCkgPT4ge1xuICAgICAgICBzdW1tYXJ5LnJlbW92ZSgpXG4gICAgICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+PC9kaXY+JylcblxuICAgICAgY29uc3QgbGFiZWxzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5sYWJlbHMpIHtcbiAgICAgICAgbGFiZWxzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxcIj48c3BhbiBjbGFzcz1cImxhYmVsLW5hbWVcIj4ke3AubmFtZX0gOjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsLXZhbHVlXCI+JHtwLnZhbHVlfTwvc3Bhbj48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQobGFiZWxzKVxuXG4gICAgICBkaXYuYXBwZW5kKFxuICAgICAgICAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1kZXNjcmlwdGlvblwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24udmFsdWV9PC9kaXY+YClcbiAgICAgIClcblxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwY2wpIHtcbiAgICAgICAgY29uc3Qgc3BlY2lhbERpdiA9ICQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJpdGVtLXNwZWNpYWxcIj4ke2NoYXREYXRhLmRlc2NyaXB0aW9uLnNwZWNpYWx9PC9kaXY+YFxuICAgICAgICApXG4gICAgICAgIGRpdi5hcHBlbmQoc3BlY2lhbERpdilcbiAgICAgIH1cblxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHByb3BzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cInRhZyBpdGVtLXByb3BlcnR5XCI+JHtnYW1lLmkxOG4ubG9jYWxpemUocCl9PC9kaXY+YFxuICAgICAgICApXG4gICAgICB9XG4gICAgICBkaXYuYXBwZW5kKHByb3BzKVxuXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIENvQzdMaW5rLmJpbmRFdmVudHNIYW5kbGVyKGRpdilcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwLCAoKSA9PiBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9XG4gICAgLy8gJChldmVudC5jdXJyZW50VGFyZ2V0KS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKTtcbiAgfVxuXG4gIGFzeW5jIF9vblNlY3Rpb25IZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIGxldCBzZWN0aW9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCdzZWN0aW9uJyksXG4gICAgLy8gIHBhbm5lbENsYXNzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5kYXRhKCdwYW5uZWwnKSxcbiAgICAvLyAgcGFubmVsID0gc2VjdGlvbi5maW5kKCBgLiR7cGFubmVsQ2xhc3N9YCk7XG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGNvbnN0IHNlY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ3NlY3Rpb24nKVxuICAgIGNvbnN0IHBhbm5lbENsYXNzID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnBhbm5lbFxuICAgIGlmICh0eXBlb2YgcGFubmVsQ2xhc3MgPT09ICd1bmRlZmluZWQnKSByZXR1cm5cbiAgICBjb25zdCBwYW5uZWwgPSAkKHNlY3Rpb24pLmZpbmQoYC5wYW5uZWwuJHtwYW5uZWxDbGFzc31gKVxuXG4gICAgLy8gcGFubmVsLnRvZ2dsZSgpO1xuICAgIGlmIChwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIC8vIENvdWxkIHJlbW92ZSBleHBhbmRlZCBjbGFzcyBhbmQgdXNlIChwYW5uZWwuaXMoJzp2aXNpYmxlJykpXG4gICAgICBwYW5uZWwuc2xpZGVVcCgyMDAsICgpID0+IHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9IGVsc2Uge1xuICAgICAgcGFubmVsLnNsaWRlRG93bigyMDAsICgpID0+IHBhbm5lbC50b2dnbGVDbGFzcygnZXhwYW5kZWQnKSlcbiAgICB9XG5cbiAgICBjb25zdCBjYW1lbEZsYWcgPSBjaGF0SGVscGVyLmh5cGhlblRvQ2FtZWxDYXNlKGBkYXRhLnBhbm5lbC4ke3Bhbm5lbENsYXNzfS5leHBhbmRlZGApXG5cbiAgICB0aGlzLmFjdG9yLnVwZGF0ZShcbiAgICAgIHsgW2NhbWVsRmxhZ106ICFwYW5uZWwuaGFzQ2xhc3MoJ2V4cGFuZGVkJykgfSxcbiAgICAgIHsgcmVuZGVyOiBmYWxzZSB9KVxuICB9XG5cbiAgX29uSW52ZW50b3J5SGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBsaSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuc2libGluZ3MoJ2xpJylcbiAgICBpZiAobGkuaXMoJzp2aXNpYmxlJykpIGxpLnNsaWRlVXAoMjAwKVxuICAgIGVsc2UgbGkuc2xpZGVEb3duKDIwMClcbiAgfVxuXG4gIF9vbkl0ZW1IZWFkZXIgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IG9sID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5uZXh0KCdvbCcpXG4gICAgaWYgKG9sLmlzKCc6dmlzaWJsZScpKSBvbC5zbGlkZVVwKDIwMClcbiAgICBlbHNlIG9sLnNsaWRlRG93bigyMDApXG4gIH1cblxuICBhc3luYyBfb25JdGVtUG9wdXAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW0taWQnKSlcblxuICAgIENvQzdBY3RvclNoZWV0LnBvcHVwU2tpbGwoaXRlbSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwb3B1cFNraWxsIChza2lsbCkge1xuICAgIHNraWxsLnN5c3RlbS5kZXNjcmlwdGlvbi5lbnJpY2hlZFZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2tpbGwuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgeyBhc3luYzogZmFsc2UgfVxuICAgIClcbiAgICAvLyBnYW1lLkNvQzcuZW5yaWNoZXIoIHNraWxsLmRhdGEuZGF0YS5kZXNjcmlwdGlvbi5lbnJpY2hlZFZhbHVlKTtcbiAgICBjb25zdCBkbGcgPSBuZXcgRGlhbG9nKFxuICAgICAge1xuICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNraWxsRGV0YWlsc1dpbmRvdycpLFxuICAgICAgICBjb250ZW50OiBza2lsbCxcbiAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgIGNsb3NlOiAoKSA9PiB7fVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3NraWxsJ10sXG4gICAgICAgIHdpZHRoOiA1MjAsXG4gICAgICAgIGhlaWdodDogNDgwLFxuICAgICAgICBzY3JvbGxZOiBbJy5pdGVtLWRlc2NyaXB0aW9uJ10sXG4gICAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3NraWxsLWRldGFpbHMuaHRtbCdcbiAgICAgIH1cbiAgICApXG4gICAgZGxnLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSByb2xsaW5nIG9mIGFuIGl0ZW0gZnJvbSB0aGUgQWN0b3Igc2hlZXQsIG9idGFpbmluZyB0aGUgSXRlbSBpbnN0YW5jZSBhbmQgZGlzcGF0Y2hpbmcgdG8gaXQncyByb2xsIG1ldGhvZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXN5bmMgX29uSXRlbVJvbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8vIGNvbnN0IGl0ZW1JZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZDtcbiAgICAvLyBjb25zdCBhY3RvcklkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC5hY3RvcklkO1xuICAgIC8vIGNvbnN0IHRva2VuS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkO1xuICAgIC8vIGxldCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKTtcblxuICAgIC8vIGNoZWNrLmFjdG9yID0gIXRva2VuS2V5ID8gYWN0b3JJZCA6IHRva2VuS2V5O1xuICAgIC8vIGNoZWNrLml0ZW0gPSBpdGVtSWQ7XG4gICAgLy8gY2hlY2sucm9sbCgpO1xuICAgIC8vIGNoZWNrLnRvTWVzc2FnZSgpO1xuICB9XG5cbiAgYXN5bmMgX29uRWZmZWN0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBlZmZlY3RJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmVmZmVjdElkXG4gICAgY29uc3QgZWZmZWN0ID0gdGhpcy5hY3Rvci5lZmZlY3RzLmdldChlZmZlY3RJZClcbiAgICBpZiAoaXNDdHJsS2V5KGV2ZW50KSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgQ29DN0NvbnRlbnRMaW5rRGlhbG9nLmNyZWF0ZSh7IHR5cGU6ICdDb0M3TGluaycsIGNoZWNrOiBDb0M3TGluay5DSEVDS19UWVBFLkVGRkVDVCwgb2JqZWN0OiBlZmZlY3QgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25XZWFwb25Sb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ2xpJykuZGF0YXNldC5pdGVtSWRcbiAgICBjb25zdCBmYXN0Rm9yd2FyZCA9IGV2ZW50LnNoaWZ0S2V5XG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIC8vIGNvbnN0IGFjdG9yS2V5ID0gIXRoaXMudG9rZW4/IHRoaXMuYWN0b3IuYWN0b3JLZXkgOiBgJHt0aGlzLnRva2VuLnNjZW5lPy5faWQ/dGhpcy50b2tlbi5zY2VuZS5faWQ6J1RPS0VOJ30uJHt0aGlzLnRva2VuLmRhdGEuX2lkfWA7IC8vUkVGQUNUT1JJTkcgKDIpXG4gICAgLyoqICogTU9ESUYgMC44LnggKioqL1xuICAgIGxldCBhY3RvcktleVxuICAgIGlmICghdGhpcy50b2tlbikgYWN0b3JLZXkgPSB0aGlzLmFjdG9yLmlkXG4gICAgLy8gU2hlZXQgd2FzIG9wZW5lZCBmcm9tIGFjdG9yIGRpcmVjdG9yeVxuICAgIGVsc2Uge1xuICAgICAgLy8gT3BlbmVkIGZyb20gdG9rZW5cbiAgICAgIGlmICh0aGlzLmFjdG9yLmlzVG9rZW4gJiYgZ2FtZS5hY3RvcnMudG9rZW5zW3RoaXMudG9rZW4uaWRdKSB7XG4gICAgICAgIGFjdG9yS2V5ID0gYFRPS0VOLiR7dGhpcy50b2tlbi5pZH1gXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY3RvcktleSA9IGAke3RoaXMudG9rZW4ucGFyZW50LmlkfS4ke3RoaXMudG9rZW4uaWR9YFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc0N0cmxLZXkoZXZlbnQpICYmIGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgY2hlY2s6IENvQzdMaW5rLkNIRUNLX1RZUEUuSVRFTSxcbiAgICAgICAgbmFtZTogd2VhcG9uLm5hbWVcbiAgICAgIH1cbiAgICAgIENvQzdDb250ZW50TGlua0RpYWxvZy5jcmVhdGUobGlua0RhdGEsIHsgYWN0b3JzOiBbdGhpcy5hY3Rvcl0gfSlcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IHByb2NlZWRXaXRob3V0VGFyZ2V0XG4gICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA8PSAwKSB7XG4gICAgICAgIHByb2NlZWRXaXRob3V0VGFyZ2V0ID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICAgIHRpdGxlOiAnICcsXG4gICAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk5vVGFyZ2V0U2VsZWN0ZWQnLCB7XG4gICAgICAgICAgICAgIHdlYXBvbjogd2VhcG9uLm5hbWVcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgICBjYW5jZWw6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtdGltZXNcIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhbmNlbCcpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICByZXR1cm4gcmVzb2x2ZShmYWxzZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIHByb2NlZWQ6IHtcbiAgICAgICAgICAgICAgICBpY29uOiAnPGkgY2xhc3M9XCJmYXMgZmEtY2hlY2tcIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlByb2NlZWQnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2FuY2VsJyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdkaWFsb2cnXVxuICAgICAgICAgIH1cbiAgICAgICAgICBuZXcgRGlhbG9nKGRhdGEpLnJlbmRlcih0cnVlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUudXNlci50YXJnZXRzLnNpemUgPiAwIHx8IHByb2NlZWRXaXRob3V0VGFyZ2V0KSB7XG4gICAgICAgIGlmICghd2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBpZiAoZ2FtZS51c2VyLnRhcmdldHMuc2l6ZSA+IDEpIHtcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuV2FyblRvb01hbnlUYXJnZXQnKSlcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdNZWxlZUluaXRpYXRvcihhY3RvcktleSwgaXRlbUlkLCBmYXN0Rm9yd2FyZClcbiAgICAgICAgICBjYXJkLmNyZWF0ZUNoYXRDYXJkKClcbiAgICAgICAgfVxuICAgICAgICBpZiAod2VhcG9uLnN5c3RlbS5wcm9wZXJ0aWVzLnJuZ2QpIHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gbmV3IENvQzdSYW5nZUluaXRpYXRvcihhY3RvcktleSwgaXRlbUlkLCBmYXN0Rm9yd2FyZClcbiAgICAgICAgICBjYXJkLmNyZWF0ZUNoYXRDYXJkKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJlbG9hZFdlYXBvbiAoZXZlbnQpIHtcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICAgID8gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgICA6IG51bGxcbiAgICBpZiAoIWl0ZW1JZCkgcmV0dXJuXG4gICAgY29uc3Qgd2VhcG9uID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQoaXRlbUlkKVxuICAgIGlmIChldmVudC5idXR0b24gPT09IDApIHtcbiAgICAgIGlmIChldmVudC5zaGlmdEtleSkgYXdhaXQgd2VhcG9uLnJlbG9hZCgpXG4gICAgICBlbHNlIGF3YWl0IHdlYXBvbi5hZGRCdWxsZXQoKVxuICAgIH0gZWxzZSBpZiAoZXZlbnQuYnV0dG9uID09PSAyKSB7XG4gICAgICBpZiAoZXZlbnQuc2hpZnRLZXkpIGF3YWl0IHdlYXBvbi5zZXRCdWxsZXRzKDApXG4gICAgICBlbHNlIGF3YWl0IHdlYXBvbi5zaG9vdEJ1bGxldHMoMSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25BZGRBbW8gKGV2ZW50KSB7XG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgICA/IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgOiBudWxsXG4gICAgaWYgKCFpdGVtSWQpIHJldHVyblxuICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGl0ZW1JZClcbiAgICBhd2FpdCB3ZWFwb24uYWRkQnVsbGV0KClcbiAgfVxuXG4gIGFzeW5jIF9vbldlYXBvblNraWxsUm9sbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgc2tpbGxJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5za2lsbElkXG4gICAgY29uc3QgYWN0b3JJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnZm9ybScpLmRhdGFzZXQuYWN0b3JJZFxuICAgIGNvbnN0IHRva2VuS2V5ID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdmb3JtJykuZGF0YXNldC50b2tlbklkXG4gICAgY29uc3QgaXRlbUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCdsaScpXG4gICAgICA/IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgOiBudWxsXG5cbiAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuXG4gICAgaWYgKCFldmVudC5zaGlmdEtleSkge1xuICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSgpXG4gICAgICBpZiAodXNhZ2UpIHtcbiAgICAgICAgY2hlY2suZGljZU1vZGlmaWVyID0gdXNhZ2UuZ2V0KCdib251c0RpY2UnKVxuICAgICAgICBjaGVjay5kaWZmaWN1bHR5ID0gdXNhZ2UuZ2V0KCdkaWZmaWN1bHR5JylcbiAgICAgICAgY2hlY2suZmxhdERpY2VNb2RpZmllciA9IE51bWJlcih1c2FnZS5nZXQoJ2ZsYXREaWNlTW9kaWZpZXInKSlcbiAgICAgICAgY2hlY2suZmxhdFRocmVzaG9sZE1vZGlmaWVyID0gTnVtYmVyKHVzYWdlLmdldCgnZmxhdFRocmVzaG9sZE1vZGlmaWVyJykpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY2hlY2suYWN0b3IgPSAhdG9rZW5LZXkgPyBhY3RvcklkIDogdG9rZW5LZXlcbiAgICBjaGVjay5za2lsbCA9IHNraWxsSWRcbiAgICBjaGVjay5pdGVtID0gaXRlbUlkXG4gICAgYXdhaXQgY2hlY2sucm9sbCgpXG4gICAgY2hlY2sudG9NZXNzYWdlKClcblxuICAgIC8vIEhBQ0s6IGp1c3QgdG8gcG9wIHRoZSBhZHZhbmNlZCByb2xsIHdpbmRvd1xuICAgIC8vIGNoZWNrLml0ZW0ucm9sbCgpO1xuICB9XG5cbiAgYXN5bmMgX29uV2VhcG9uRGFtYWdlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpdGVtSWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy53ZWFwb24nKS5kYXRhc2V0Lml0ZW1JZFxuICAgIGNvbnN0IHJhbmdlID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uLWRhbWFnZScpLmRhdGFzZXQucmFuZ2VcbiAgICBjb25zdCBkYW1hZ2VDaGF0Q2FyZCA9IG5ldyBEYW1hZ2VDYXJkKHtcbiAgICAgIGZhc3RGb3J3YXJkOiBldmVudC5zaGlmdEtleSxcbiAgICAgIHJhbmdlXG4gICAgfSlcbiAgICBkYW1hZ2VDaGF0Q2FyZC5hY3RvcktleSA9IHRoaXMuYWN0b3IudG9rZW5LZXlcbiAgICBkYW1hZ2VDaGF0Q2FyZC5pdGVtSWQgPSBpdGVtSWRcbiAgICBkYW1hZ2VDaGF0Q2FyZC51cGRhdGVDaGF0Q2FyZCgpXG4gICAgLy8gY29uc29sZS5sb2coICdXZWFwb24gZGFtYWdlIENsaWNrZWQnKTtcbiAgfVxuXG4gIGFzeW5jIF9vbk9wcG9zZWRSb2xsIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5hdHRyaWIgPT09ICdkYicpIHJldHVyblxuXG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX1NLSUxMLFxuICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfT1BQT1NFRCxcbiAgICAgIGV2ZW50LFxuICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICB9XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjaGFyYWN0ZXJpc3RpYy1sYWJlbCcpKSB7XG4gICAgICBkYXRhLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9DSEFSQUNURVJJU1RJQ1xuICAgIH0gZWxzZSBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2F0dHJpYnV0ZS1sYWJlbCcpKSB7XG4gICAgICBkYXRhLnJvbGxUeXBlID0gQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9BVFRSSUJVVEVcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuYWx0S2V5KSB7XG4gICAgICBkYXRhLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9DT01CSU5FRFxuICAgIH1cblxuICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKGRhdGEpXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHJvbGxpbmcgYSBTa2lsbCBjaGVja1xuICAgKiBAICBwYXJhbSB7RXZlbnR9IGV2ZW50ICAgVGhlIG9yaWdpbmF0aW5nIGNsaWNrIGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXRpY1Rlc3QgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnZmxhZ2dlZDRkZXYnKSkgcmV0dXJuXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZUNvbnRleHRNZW51cycpKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDLFxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIHByZXZlbnRTdGFuZGJ5OiB0cnVlLFxuICAgICAgICBmYXN0Rm9yd2FyZDogdHJ1ZSxcbiAgICAgICAgY2hhcmFjdGVyaXN0aWM6IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmNoYXItYm94JykuZGF0YXNldC5jaGFyYWN0ZXJpc3RpYyxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgZXZlbnQsXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxBdHRyaWJUZXN0IChldmVudCkge1xuICAgIC8vIEZMQVRNT0RJRklFUlxuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhdHRyaWIgPSBldmVudC5jdXJyZW50VGFyZ2V0LnBhcmVudEVsZW1lbnQuZGF0YXNldC5hdHRyaWJcbiAgICBpZiAoYXR0cmliID09PSAnZGInKSB7XG4gICAgICBpZiAoXG4gICAgICAgICEvXi17MCwxfVxcZCskLy50ZXN0KFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQucGFyZW50RWxlbWVudC5kYXRhc2V0LnJvbGxGb3JtdWxhXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoXG4gICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5wYXJlbnRFbGVtZW50LmRhdGFzZXQucm9sbEZvcm11bGFcbiAgICAgICAgKVxuICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICBpZiAoIWlzTmFOKHIudG90YWwpICYmICEoci50b3RhbCA9PT0gdW5kZWZpbmVkKSkge1xuICAgICAgICAgIHIudG9NZXNzYWdlKHtcbiAgICAgICAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoKSxcbiAgICAgICAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvbnVzRGFtYWdlUm9sbCcpXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuXG4gICAgfVxuXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZUNvbnRleHRNZW51cycpKSB7XG4gICAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcih7XG4gICAgICAgIHJvbGxUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuUk9MTF9UWVBFX0NIQVJBQ1RFUklTVElDLFxuICAgICAgICBjYXJkVHlwZTogQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT1JNQUwsXG4gICAgICAgIHByZXZlbnRTdGFuZGJ5OiB0cnVlLFxuICAgICAgICBmYXN0Rm9yd2FyZDogdHJ1ZSxcbiAgICAgICAgYXR0cmlidXRlOiBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5hdHRyaWJ1dGUnKS5kYXRhc2V0LmF0dHJpYixcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfQVRUUklCVVRFLFxuICAgICAgICBjYXJkVHlwZTpcbiAgICAgICAgZXZlbnQuYWx0S2V5ICYmIGF0dHJpYiA9PT0gJ3NhbidcbiAgICAgICAgICA/IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfU0FOX0NIRUNLXG4gICAgICAgICAgOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgZXZlbnQsXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcm9sbGluZyBhIFNraWxsIGNoZWNrXG4gICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50ICAgVGhlIG9yaWdpbmF0aW5nIGNsaWNrIGV2ZW50XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfb25Sb2xsU2tpbGxUZXN0IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2ZsYWdnZWQ0ZGV2JykpIHJldHVyblxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd1c2VDb250ZXh0TWVudXMnKSkge1xuICAgICAgQ29DN0NoYXRNZXNzYWdlLnRyaWdnZXIoe1xuICAgICAgICByb2xsVHlwZTogQ29DN0NoYXRNZXNzYWdlLlJPTExfVFlQRV9TS0lMTCxcbiAgICAgICAgY2FyZFR5cGU6IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9STUFMLFxuICAgICAgICBwcmV2ZW50U3RhbmRieTogdHJ1ZSxcbiAgICAgICAgZmFzdEZvcndhcmQ6IHRydWUsXG4gICAgICAgIHNraWxsSWQ6IGV2ZW50Py5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJyk/LmRhdGFzZXQuc2tpbGxJZCxcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3JcbiAgICAgIH0pXG4gICAgfSBlbHNlIHtcbiAgICAgIENvQzdDaGF0TWVzc2FnZS50cmlnZ2VyKHtcbiAgICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfU0tJTEwsXG4gICAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PUk1BTCxcbiAgICAgICAgZXZlbnQsXG4gICAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgLy8gX2dldFN1Ym1pdERhdGEodXBkYXRlRGF0YT17fSkge1xuXG4gIC8vICAvLyBDcmVhdGUgdGhlIGV4cGFuZGVkIHVwZGF0ZSBkYXRhIG9iamVjdFxuICAvLyAgY29uc3QgZmQgPSBuZXcgRm9ybURhdGFFeHRlbmRlZCh0aGlzLmZvcm0sIHtlZGl0b3JzOiB0aGlzLmVkaXRvcnN9KTtcbiAgLy8gIGxldCBkYXRhID0gZmQudG9PYmplY3QoKTtcbiAgLy8gIGlmICggdXBkYXRlRGF0YSApIGRhdGEgPSBtZXJnZU9iamVjdChkYXRhLCB1cGRhdGVEYXRhKTtcbiAgLy8gIGVsc2UgZGF0YSA9IGV4cGFuZE9iamVjdChkYXRhKTtcblxuICAvLyAgLy8gSGFuZGxlIERhbWFnZSBhcnJheVxuICAvLyAgY29uc3QgZGFtYWdlID0gZGF0YS5kYXRhPy5kYW1hZ2U7XG4gIC8vICBpZiAoIGRhbWFnZSApIGRhbWFnZS5wYXJ0cyA9IE9iamVjdC52YWx1ZXMoZGFtYWdlPy5wYXJ0cyB8fCB7fSkubWFwKGQgPT4gW2RbMF0gfHwgJycsIGRbMV0gfHwgJyddKTtcblxuICAvLyAgLy8gUmV0dXJuIHRoZSBmbGF0dGVuZWQgc3VibWlzc2lvbiBkYXRhXG4gIC8vICByZXR1cm4gZmxhdHRlbk9iamVjdChkYXRhKTtcbiAgLy8gfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEltcGxlbWVudCB0aGUgX3VwZGF0ZU9iamVjdCBtZXRob2QgYXMgcmVxdWlyZWQgYnkgdGhlIHBhcmVudCBjbGFzcyBzcGVjXG4gICAqIFRoaXMgZGVmaW5lcyBob3cgdG8gdXBkYXRlIHRoZSBzdWJqZWN0IG9mIHRoZSBmb3JtIHdoZW4gdGhlIGZvcm0gaXMgc3VibWl0dGVkXG4gICAqIEBwcml2YXRlXG4gICAqL1xuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbygnX3VwZGF0ZU9iamVjdCcpO1xuICAgIC8vIFRPRE86IFJlcGxhY2Ugd2l0aCAgIF9nZXRTdWJtaXREYXRhKHVwZGF0ZURhdGE9e30pIENmLiBzaGVldC5qcygyNDMpXG4gICAgY29uc3Qgb3ZlcnJpZGVzID0gZm91bmRyeS51dGlscy5mbGF0dGVuT2JqZWN0KHRoaXMuYWN0b3Iub3ZlcnJpZGVzKVxuICAgIGNvbnN0IG5hbWUgPSBldmVudD8uY3VycmVudFRhcmdldD8ubmFtZVxuICAgIGlmIChuYW1lICYmIG92ZXJyaWRlcyAmJiBvdmVycmlkZXNbbmFtZV0pIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FZmZlY3RBcHBsaWVkQ2FudE92ZXJyaWRlJywgeyBuYW1lIH0pXG4gICAgICApXG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdCkge1xuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NraWxsLWFkanVzdG1lbnQnKSkge1xuICAgICAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgID8gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgOiBudWxsXG5cbiAgICAgICAgICAgIGlmICghZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSkge1xuICAgICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV06IG51bGxcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGlmICghaXNOYU4odmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV06IHZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db0NJREZsYWcua2V5cy5pLnNraWxsLmNyZWRpdC1yYXRpbmcnKSA9PT0gaXRlbS5uYW1lICYmIHR5cGVvZiB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbT8uY3JlZGl0UmF0aW5nPy5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGNvbnN0IGNyZWRpdFZhbHVlID1cbiAgICAgICAgICAgICAgICAoaXRlbS52YWx1ZSB8fCAwKSAtXG4gICAgICAgICAgICAgICAgKGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlIHx8IDApXG4gICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICBjcmVkaXRWYWx1ZSA+XG4gICAgICAgICAgICAgICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4KSB8fFxuICAgICAgICAgICAgICAgIGNyZWRpdFZhbHVlIDxcbiAgICAgICAgICAgICAgICAgIE51bWJlcih0aGlzLmFjdG9yLm9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZy5taW4pXG4gICAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ3JlZGl0T3V0T2ZSYW5nZScsIHtcbiAgICAgICAgICAgICAgICAgICAgbWluOiBOdW1iZXIoXG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3Rvci5vY2N1cGF0aW9uLnN5c3RlbS5jcmVkaXRSYXRpbmcubWluXG4gICAgICAgICAgICAgICAgICAgICksXG4gICAgICAgICAgICAgICAgICAgIG1heDogTnVtYmVyKFxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0b3Iub2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nLm1heFxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXR0cmlidXRlLXZhbHVlJykpIHtcbiAgICAgICAgICAvLyBUT0RPIDogY2hlY2sgd2h5IFNBTiBvbmx5ID9cbiAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5uYW1lID09PSAnc3lzdGVtLmF0dHJpYnMuc2FuLnZhbHVlJykge1xuICAgICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRTYW4oXG4gICAgICAgICAgICAgIHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWUgPT09ICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZScpIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0SHAoXG4gICAgICAgICAgICAgIHBhcnNlSW50KGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCd0ZXh0LWFyZWEnKSkge1xuICAgICAgICAgIHRoaXMuYWN0b3IudXBkYXRlVGV4dEFyZWEoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmlvLXNlY3Rpb24tdmFsdWUnKSkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgICAgICApXG4gICAgICAgICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGVCaW9WYWx1ZShpbmRleCwgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmlvLXNlY3Rpb24tdGl0bGUnKSkge1xuICAgICAgICAgIGNvbnN0IGluZGV4ID0gcGFyc2VJbnQoXG4gICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5iaW8tc2VjdGlvbicpLmRhdGFzZXQuaW5kZXhcbiAgICAgICAgICApXG4gICAgICAgICAgdGhpcy5hY3Rvci51cGRhdGVCaW9UaXRsZShpbmRleCwgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbnBjLXNraWxsLXNjb3JlJykpIHtcbiAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoc2tpbGwpIHtcbiAgICAgICAgICAgIGF3YWl0IHNraWxsLnVwZGF0ZVZhbHVlKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdza2lsbC1uYW1lJykgfHxcbiAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaXRlbS1uYW1lJylcbiAgICAgICAgKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuc2tpbGxJZFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHt9XG4gICAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gQ29DN0l0ZW0uZ2V0TmFtZVBhcnRzU3BlYyhcbiAgICAgICAgICAgICAgICBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgIGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgZGF0YS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgICBkYXRhWydzeXN0ZW0uc2tpbGxOYW1lJ10gPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgICAgICAgZGF0YVsnc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZGF0YVsnc3lzdGVtLnNraWxsTmFtZSddID0gZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICBkYXRhLm5hbWUgPSBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZShkYXRhKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2hhcmFjdGVyaXN0aWMtZm9ybXVsYScpKSB7XG4gICAgICAgICAgLy8gdGVzdGVyIHNpIGMnZXN0IHZpZGVcbiAgICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgIC8vIE9uIHRlc3RlIHNpIGMnZXN0IHVuZSBmb3JtdWxlIHZhbGlkZSAhXG4gICAgICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgIGF3YWl0IHIucm9sbCh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICAgICAgICBpZiAoaXNOYU4oci50b3RhbCkgfHwgdHlwZW9mIHIudG90YWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckludmFsaWRGb3JtdWxhJywge1xuICAgICAgICAgICAgICAgICAgdmFsdWU6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIGZvcm1EYXRhW2V2ZW50LmN1cnJlbnRUYXJnZXQubmFtZV0gPSBnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAgICdDb0M3LkVycm9ySW52YWxpZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYXR0cmlidXRlLXZhbHVlJykpIHtcbiAgICAgICAgICAvLyB0ZXN0ZXIgc2kgbGUgZGIgcmV0b3VybsOpIGVzdCB2YWxpZGUuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZS5sZW5ndGggIT09IDAgJiZcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLmF0dHJpYnV0ZScpLmRhdGFzZXQuYXR0cmliID09PSAnZGInXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBPbiB0ZXN0ZSBzaSBjJ2VzdCB1bmUgZm9ybXVsZSB2YWxpZGUgIVxuICAgICAgICAgICAgY29uc3QgciA9IG5ldyBSb2xsKGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWUpXG4gICAgICAgICAgICBhd2FpdCByLnJvbGwoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgaWYgKGlzTmFOKHIudG90YWwpIHx8IHIudG90YWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRXJyb3JJbnZhbGlkRm9ybXVsYScsIHtcbiAgICAgICAgICAgICAgICAgIHZhbHVlOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBmb3JtRGF0YVtldmVudC5jdXJyZW50VGFyZ2V0Lm5hbWVdID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgICAnQ29DNy5FcnJvckludmFsaWQnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBsZSBza2lsbCBhc3NvY2nDqSBhIGwnYXJtZSBhIGNoYW5nw6lcbiAgICAgICAgLy8gVE9ETyA6IEZhY3RvcmlzYXRpb24gZHUgc3dpdGNoXG4gICAgICAgIC8vIFRPRE8gOiByZW1wbGFjZXIgbGVzIHN0cmluZ3MgcGFyIGRlIGNvbnN0YW50ZXMgKGl0ZW0uc2tpbGwubWFpbiAuLi4pXG4gICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnd2VhcG9uLXNraWxsJykpIHtcbiAgICAgICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgIClcbiAgICAgICAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5vcHRpb25zW2V2ZW50LmN1cnJlbnRUYXJnZXQuc2VsZWN0ZWRJbmRleF0udmFsdWVcbiAgICAgICAgICApXG4gICAgICAgICAgaWYgKHdlYXBvbiAmJiBza2lsbCkge1xuICAgICAgICAgICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuc2tpbGwpIHtcbiAgICAgICAgICAgICAgY2FzZSAnbWFpbic6XG4gICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4uaWQnOiBza2lsbC5pZCxcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwubWFpbi5uYW1lJzogc2tpbGwubmFtZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgY2FzZSAnYWx0ZXJuYXRpdic6XG4gICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAnc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQnOiBza2lsbC5pZCxcbiAgICAgICAgICAgICAgICAgICdzeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lJzogc2tpbGwubmFtZVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBMZSBub20gZGUgbCdhcm1lIGEgY2hhbmfDqVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3dlYXBvbi1uYW1lJykpIHtcbiAgICAgICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAod2VhcG9uKSB7XG4gICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHsgbmFtZTogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGxlcyBkZWdhdHMgZGUgbCdhcm1lIG9uIGNoYW5nw6lzLlxuICAgICAgICAvLyBUT0RPIDogRmFjdG9yaXNhdGlvbiBkdSBzd2l0Y2hcbiAgICAgICAgLy8gVE9ETyA6IHJlbXBsYWNlciBsZXMgc3RyaW5ncyBwYXIgZGUgY29uc3RhbnRlcyAoaXRlbS5yYW5nZS5ub3JtYWwgLi4uKVxuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2RhbWFnZS1mb3JtdWxhJykpIHtcbiAgICAgICAgICBjb25zdCB3ZWFwb24gPSB0aGlzLmFjdG9yLml0ZW1zLmdldChcbiAgICAgICAgICAgIGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLml0ZW0nKS5kYXRhc2V0Lml0ZW1JZFxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAod2VhcG9uKSB7XG4gICAgICAgICAgICAvLyB0ZXN0ZSBsYSB2YWxpZGl0w6kgZGUgbGEgZm9ybXVsZS5cbiAgICAgICAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICBjb25zdCByID0gbmV3IFJvbGwoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgICAgICAgICAgYXdhaXQgci5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICAgICAgaWYgKGlzTmFOKHIudG90YWwpIHx8IHR5cGVvZiByLnRvdGFsID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yVW5hYmxlVG9QYXJzZUZvcm11bGEnLCB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC5yYW5nZSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSAnbm9ybWFsJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlJzogZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgY2FzZSAnbG9uZyc6XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICdzeXN0ZW0ucmFuZ2UubG9uZy5kYW1hZ2UnOiBldmVudC5jdXJyZW50VGFyZ2V0LnZhbHVlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICBjYXNlICdleHRyZW1lJzpcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgd2VhcG9uLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5leHRyZW1lLmRhbWFnZSc6IGV2ZW50LmN1cnJlbnRUYXJnZXQudmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHN3aXRjaCAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnJhbmdlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnbm9ybWFsJzpcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLm5vcm1hbC5kYW1hZ2UnOiBudWxsXG4gICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdsb25nJzpcbiAgICAgICAgICAgICAgICAgIGF3YWl0IHdlYXBvbi51cGRhdGUoe1xuICAgICAgICAgICAgICAgICAgICAnc3lzdGVtLnJhbmdlLmxvbmcuZGFtYWdlJzogbnVsbFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnZXh0cmVtZSc6XG4gICAgICAgICAgICAgICAgICBhd2FpdCB3ZWFwb24udXBkYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgJ3N5c3RlbS5yYW5nZS5leHRyZW1lLmRhbWFnZSc6IG51bGxcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLm9iamVjdC51cGRhdGUoZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgQ29DN0FjdG9yU2hlZXQgfSBmcm9tICcuL2Jhc2UuanMnXG5pbXBvcnQgeyBSb2xsRGlhbG9nIH0gZnJvbSAnLi4vLi4vYXBwcy9yb2xsLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi4vLi4vYXBwcy9jb2M3LWxpbmsuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyLCBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NvbnRleHRNZW51IH0gZnJvbSAnLi4vLi4vY29udGV4dC1tZW51LmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXRNZXNzYWdlIH0gZnJvbSAnLi4vLi4vYXBwcy9jb2M3LWNoYXQtbWVzc2FnZS5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEFjdG9yU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdOUENTaGVldCBleHRlbmRzIENvQzdBY3RvclNoZWV0IHtcbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBBY3RvciBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICAvLyBUT0RPIDogZG8gd2UgbmVlZCB0aGF0ID9cbiAgICBzaGVldERhdGEuYWxsb3dGb3JtdWxhID0gdHJ1ZVxuICAgIHNoZWV0RGF0YS5kaXNwbGF5Rm9ybXVsYSA9ICh0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnZGlzcGxheUZvcm11bGEnKSB8fCBmYWxzZSlcblxuICAgIHNoZWV0RGF0YS5oYXNTYW4gPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5zYW4udmFsdWUgIT09IG51bGxcbiAgICBzaGVldERhdGEuaGFzTXAgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZSAhPT0gbnVsbFxuICAgIHNoZWV0RGF0YS5oYXNMdWNrID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmF0dHJpYnMubGNrLnZhbHVlICE9PSBudWxsXG5cbiAgICBzaGVldERhdGEuaXNDcmVhdHVyZSA9IGZhbHNlXG5cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdpdGVtJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzcGVsbCcpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAndGFsZW50JykgfHxcbiAgICAgICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZVRhbGVudHMnKSlcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzdGF0dXMnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnMgPSBmYWxzZVxuICAgIHNoZWV0RGF0YS5oYXNJbnZlbnRvcnkgPVxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlJdGVtcyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTcGVsbHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlTdGF0dXNlcyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlXZWFwb25zXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRCaW9ncmFwaHlQZXJzb25hbERlc2NyaXB0aW9uID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJpb2dyYXBoeS5wZXJzb25hbERlc2NyaXB0aW9uPy52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3VzZUNvbnRleHRNZW51cycpKSB7XG4gICAgICBpZiAoIXRoaXMubWVudXMpIHRoaXMubWVudXMgPSBbXVxuXG4gICAgICBjb25zdCBzYW5sb3NzTWVudSA9IHtcbiAgICAgICAgaWQ6ICdzYW4tbG9zcy1yb2xsJyxcbiAgICAgICAgY2xhc3NlczogJ3JvbGwtbWVudScsXG4gICAgICAgIHNlY3Rpb246IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjbGFzc2VzOiAnbWFpbicsXG4gICAgICAgICAgICBpdGVtczogW1xuICAgICAgICAgICAgICB7IGFjdGlvbjogJ2xpbmstdG9vbCcsIGxhYmVsOiAnT3BlbiBpbiBsaW5rIHRvb2wnIH0sXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnc2VuZC1jaGF0JywgbGFiZWw6ICdTZW5kIHRvIGNoYXQnIH0sXG4gICAgICAgICAgICAgIHsgYWN0aW9uOiAnY29weS10by1jbGlwYm9hcmQnLCBsYWJlbDogJ0NvcHkgdG8gY2xpcC1ib2FyZCcgfVxuICAgICAgICAgICAgXVxuICAgICAgICAgIH1cblxuICAgICAgICBdXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNhbmxvc3NDb250ZXh0TWVudSA9IG5ldyBDb0M3Q29udGV4dE1lbnUoKVxuICAgICAgc2FubG9zc0NvbnRleHRNZW51LmJpbmQoc2FubG9zc01lbnUsIGh0bWwsIHRoaXMuX29uU2FuTG9zc0NvbnRleHRNZW51Q2xpY2suYmluZCh0aGlzKSlcbiAgICAgIHRoaXMubWVudXMucHVzaChzYW5sb3NzQ29udGV4dE1lbnUpXG4gICAgfVxuXG4gICAgaHRtbC5maW5kKCcucm9sbC1zYW4nKS5jbGljayh0aGlzLl9vblNhbkNoZWNrLmJpbmQodGhpcykpXG4gICAgLy8gaWYgKHRoaXMuYWN0b3IuaXNPd25lcikge1xuICAgIC8vICAgaHRtbFxuICAgIC8vICAgICAuZmluZCgnW25hbWU9XCJkYXRhLmF0dHJpYnMuaHAudmFsdWVcIl0nKVxuICAgIC8vICAgICAuY2hhbmdlKGV2ZW50ID0+IHRoaXMuYWN0b3Iuc2V0SGVhbHRoU3RhdHVzTWFudWFsbHkoZXZlbnQpKVxuICAgIC8vIH1cbiAgfVxuXG4gIGFzeW5jIF9vblNhbkxvc3NDb250ZXh0TWVudUNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHJvbGxPcHRpb25zID0ge1xuICAgICAgcm9sbFR5cGU6IENvQzdDaGF0TWVzc2FnZS5ST0xMX1RZUEVfRU5DT1VOVEVSLFxuICAgICAgcHJldmVudFN0YW5kYnk6IHRydWUsXG4gICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICBldmVudCxcbiAgICAgIGNhcmRUeXBlOiBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX1NBTl9DSEVDSyxcbiAgICAgIGFjdG9yOiB0aGlzLmFjdG9yXG4gICAgfVxuXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICgnbGluay10b29sJyk6XG4gICAgICAgIHJvbGxPcHRpb25zLmNhcmRUeXBlID0gQ29DN0NoYXRNZXNzYWdlLkNBUkRfVFlQRV9OT05FXG4gICAgICAgIHJvbGxPcHRpb25zLmNyZWF0ZUVuY291bnRlciA9IHRydWVcbiAgICAgICAgcm9sbE9wdGlvbnMub3BlbkxpbmtUb29sID0gdHJ1ZVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAoJ3NlbmQtY2hhdCcpOlxuICAgICAgICByb2xsT3B0aW9ucy5jYXJkVHlwZSA9IENvQzdDaGF0TWVzc2FnZS5DQVJEX1RZUEVfTk9ORVxuICAgICAgICByb2xsT3B0aW9ucy5jcmVhdGVFbmNvdW50ZXIgPSB0cnVlXG4gICAgICAgIHJvbGxPcHRpb25zLnNlbmRUb0NoYXQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICgnY29weS10by1jbGlwYm9hcmQnKTpcbiAgICAgICAgcm9sbE9wdGlvbnMuY2FyZFR5cGUgPSBDb0M3Q2hhdE1lc3NhZ2UuQ0FSRF9UWVBFX05PTkVcbiAgICAgICAgcm9sbE9wdGlvbnMuY3JlYXRlRW5jb3VudGVyID0gdHJ1ZVxuICAgICAgICByb2xsT3B0aW9ucy5zZW5kVG9DbGlwYm9hcmQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cbiAgICBDb0M3Q2hhdE1lc3NhZ2UudHJpZ2dlcihyb2xsT3B0aW9ucylcbiAgfVxuXG4gIGFzeW5jIF9vblNhbkNoZWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBpZiAoXG4gICAgICAhdGhpcy5hY3Rvci5zeXN0ZW0uc3BlY2lhbC5zYW5Mb3NzLmNoZWNrUGFzc2VkICYmXG4gICAgICAhdGhpcy5hY3Rvci5zeXN0ZW0uc3BlY2lhbC5zYW5Mb3NzLmNoZWNrRmFpbGxlZFxuICAgICkge1xuICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdObyBzYW5pdHkgbG9zcyB2YWx1ZScpO1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChcbiAgICAgIGlzQ3RybEtleShldmVudCkgJiZcbiAgICAgIGdhbWUudXNlci5pc0dNXG4gICAgKSB7XG4gICAgICBsZXQgZGlmZmljdWx0eSwgbW9kaWZpZXJcbiAgICAgIGlmICghZXZlbnQuc2hpZnRLZXkpIHtcbiAgICAgICAgY29uc3QgdXNhZ2UgPSBhd2FpdCBSb2xsRGlhbG9nLmNyZWF0ZSh7XG4gICAgICAgICAgZGlzYWJsZUZsYXREaWNlTW9kaWZpZXI6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgaWYgKHVzYWdlKSB7XG4gICAgICAgICAgbW9kaWZpZXIgPSBOdW1iZXIodXNhZ2UuZ2V0KCdib251c0RpY2UnKSlcbiAgICAgICAgICBkaWZmaWN1bHR5ID0gTnVtYmVyKHVzYWdlLmdldCgnZGlmZmljdWx0eScpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBsaW5rRGF0YSA9IHtcbiAgICAgICAgY2hlY2s6ICdzYW5sb3NzJyxcbiAgICAgICAgc2FuTWluOiB0aGlzLmFjdG9yLnN5c3RlbS5zcGVjaWFsLnNhbkxvc3MuY2hlY2tQYXNzZWQsXG4gICAgICAgIHNhbk1heDogdGhpcy5hY3Rvci5zeXN0ZW0uc3BlY2lhbC5zYW5Mb3NzLmNoZWNrRmFpbGxlZCxcbiAgICAgICAgc2FuUmVhc29uOiB0aGlzLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlPy5sZW5ndGhcbiAgICAgICAgICA/IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGVcbiAgICAgICAgICA6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgdG9rZW5LZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXlcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpID09PSAnYmxpbmRyb2xsJykge1xuICAgICAgICBsaW5rRGF0YS5ibGluZCA9IHRydWVcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgbW9kaWZpZXIgIT09ICd1bmRlZmluZWQnKSBsaW5rRGF0YS5tb2RpZmllciA9IG1vZGlmaWVyXG4gICAgICBpZiAodHlwZW9mIGRpZmZpY3VsdHkgIT09ICd1bmRlZmluZWQnKSBsaW5rRGF0YS5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgICAgY29uc3QgbGluayA9IChuZXcgQ29DN0xpbmsoKSkuX2NyZWF0ZURvY3VtZW50TGluayhsaW5rRGF0YSlcbiAgICAgIGlmIChsaW5rKSB7XG4gICAgICAgIGNoYXRIZWxwZXIuY3JlYXRlTWVzc2FnZShcbiAgICAgICAgICBudWxsLFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWVzc2FnZUNoZWNrUmVxdWVzdGVkV2FpdCcsIHtcbiAgICAgICAgICAgIGNoZWNrOiBsaW5rXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBzYW5EYXRhID0ge1xuICAgICAgICBzYW5NYXg6IHRoaXMuYWN0b3Iuc2FuTG9zc0NoZWNrRmFpbGxlZCxcbiAgICAgICAgc2FuTWluOiB0aGlzLmFjdG9yLnNhbkxvc3NDaGVja1Bhc3NlZCxcbiAgICAgICAgc2FuUmVhc29uOiB0aGlzLmFjdG9yLnN5c3RlbS5pbmZvcy50eXBlPy5sZW5ndGhcbiAgICAgICAgICA/IHRoaXMuYWN0b3Iuc3lzdGVtLmluZm9zLnR5cGVcbiAgICAgICAgICA6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgdG9rZW5LZXk6IHRoaXMuYWN0b3IuYWN0b3JLZXlcbiAgICAgIH1cbiAgICAgIFNhbkNoZWNrQ2FyZC5jaGVja1RhcmdldHMoc2FuRGF0YSwgZXZlbnQuc2hpZnRLZXkpXG4gICAgfVxuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHtcbiAgICB0aGlzLmFjdG9yLnVuc2V0QWN0b3JGbGFnKCdkaXNwbGF5Rm9ybXVsYScpXG4gICAgc3VwZXIub25DbG9zZVNoZWV0KClcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhY3RvcicsICducGMnXSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvbnBjLXNoZWV0Lmh0bWwnLFxuICAgICAgd2lkdGg6IDU4MCxcbiAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICBtaW5pbWl6YWJsZTogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogSW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZCBhcyByZXF1aXJlZCBieSB0aGUgcGFyZW50IGNsYXNzIHNwZWNcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdCkge1xuICAgICAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXJhY3RlcmlzdGljLXNjb3JlJykpIHtcbiAgICAgICAgICB0aGlzLmFjdG9yLnNldENoYXJhY3RlcmlzdGljKFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC5uYW1lLFxuICAgICAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZVxuICAgICAgICAgIClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cblxuICBzdGF0aWMgZm9yY2VBdXRvIChhcHAsIGh0bWwpIHtcbiAgICBodG1sLmhlaWdodCgnYXV0bycpXG4gIH1cblxuICBzZXRQb3NpdGlvbiAoYSkge1xuICAgIHN1cGVyLnNldFBvc2l0aW9uKGEpXG4gICAgQ29DN05QQ1NoZWV0LmZvcmNlQXV0byhhLCB0aGlzLl9lbGVtZW50KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgbWVyZ2VPYmplY3QgKi9cbmltcG9ydCB7IENvQzdOUENTaGVldCB9IGZyb20gJy4vbnBjLXNoZWV0LmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgQWN0b3JTaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0NyZWF0dXJlU2hlZXQgZXh0ZW5kcyBDb0M3TlBDU2hlZXQge1xuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEFjdG9yIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaXNDcmVhdHVyZSA9IHRydWVcbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKipcbiAgICogRXh0ZW5kIGFuZCBvdmVycmlkZSB0aGUgZGVmYXVsdCBvcHRpb25zIHVzZWQgYnkgdGhlIEFjdG9yIFNoZWV0XG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdhY3RvcicsICducGMnLCAnY3JlYXR1cmUnXVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIG1lcmdlT2JqZWN0ICovXG5leHBvcnQgY2xhc3MgQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlciBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3J10sXG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNhbml0eUxvc3NUeXBlRGlhbG9nVGl0bGUnKSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL3Nhbml0eS1sb3NzLXR5cGUuaGJzJyxcbiAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcbiAgICBkYXRhLmlzSW1tdW5pdHkgPSBkYXRhLm9iamVjdC50eXBlID09PSAnaW1tdW5pdHknXG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgaHRtbC5maW5kKCcuZmllbGRfdHlwZScpLmNoYW5nZSh0aGlzLl9vblNlbGVjdENoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRpYWxvZy1idXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbkNsaWNrLmJpbmQodGhpcykpXG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgfVxuXG4gIF9vbkJ1dHRvbkNsaWNrIChldmVudCkge1xuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYnV0dG9uID09PSAnYWRkJykge1xuICAgICAgY29uc3QgaHRtbCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLndpbmRvdy1jb250ZW50JylcbiAgICAgIGNvbnN0IHR5cGUgPSBodG1sLmZpbmQoJy5maWVsZF90eXBlJykudmFsKClcbiAgICAgIGNvbnN0IG5hbWUgPSBodG1sLmZpbmQoJy5maWVsZF9uYW1lJykudmFsKClcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoaHRtbC5maW5kKCcuZmllbGRfdmFsdWUnKS52YWwoKSlcbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPVxuICAgICAgICB0aGlzLm9iamVjdC5hY3Rvci5zeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyA/PyBbXVxuICAgICAgc2FuaXR5TG9zc0V2ZW50cy5wdXNoKHtcbiAgICAgICAgdHlwZTogbmFtZSxcbiAgICAgICAgdG90YWxMb3NzOiB2YWx1ZSxcbiAgICAgICAgaW1tdW5pdHk6IHR5cGUgPT09ICdpbW11bml0eSdcbiAgICAgIH0pXG4gICAgICBzYW5pdHlMb3NzRXZlbnRzLnNvcnQoZnVuY3Rpb24gKGxlZnQsIHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgICAgfSlcbiAgICAgIHRoaXMub2JqZWN0LmFjdG9yLnVwZGF0ZSh7ICdkYXRhLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzIH0pXG4gICAgfVxuICAgIHRoaXMuY2xvc2UoKVxuICB9XG5cbiAgX29uU2VsZWN0Q2hhbmdlIChldmVudCkge1xuICAgIGNvbnN0IGh0bWwgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy53aW5kb3ctY29udGVudCcpXG4gICAgdGhpcy5vYmplY3QubmFtZSA9IGh0bWwuZmluZCgnLmZpZWxkX25hbWUnKS52YWwoKVxuICAgIHRoaXMub2JqZWN0LnR5cGUgPSBodG1sLmZpbmQoJy5maWVsZF90eXBlJykudmFsKClcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7fVxufVxuIiwiLyogZ2xvYmFsICQsIGR1cGxpY2F0ZSwgZXhwYW5kT2JqZWN0LCBGb250RmFjZSwgZm91bmRyeSwgZ2FtZSwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IsIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdBY3RvclNoZWV0IH0gZnJvbSAnLi9iYXNlLmpzJ1xuaW1wb3J0IHsgQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlciB9IGZyb20gJy4uLy4uL2FwcHMvY3JlYXRlLW15dGhvcy1lbmNvdW50ZXJzLmpzJ1xuaW1wb3J0IHsgY2hhdEhlbHBlciB9IGZyb20gJy4uLy4uL2NoYXQvaGVscGVyLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXJhY3RlclNoZWV0IGV4dGVuZHMgQ29DN0FjdG9yU2hlZXQge1xuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IubmFtZSA9PT0gJ0NvQzdDaGFyYWN0ZXJTaGVldCcpIHtcbiAgICAgIGlmICghdGhpcy5zdW1tYXJpemVkKSB0aGlzLnN1bW1hcml6ZWQgPSBmYWxzZVxuICAgICAgbGV0IGJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgICBidXR0b25zID0gW1xuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6IHRoaXMuc3VtbWFyaXplZFxuICAgICAgICAgICAgPyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWF4aW1pemUnKVxuICAgICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU3VtbWFyaXplJyksXG4gICAgICAgICAgY2xhc3M6ICd0ZXN0LWV4dHJhLWljb24nLFxuICAgICAgICAgIGljb246IHRoaXMuc3VtbWFyaXplZFxuICAgICAgICAgICAgPyAnZmFzIGZhLXdpbmRvdy1tYXhpbWl6ZSdcbiAgICAgICAgICAgIDogJ2ZhcyBmYS13aW5kb3ctbWluaW1pemUnLFxuICAgICAgICAgIG9uY2xpY2s6IGV2ZW50ID0+IHRoaXMudG9nZ2xlU2hlZXRNb2RlKGV2ZW50KVxuICAgICAgICB9LyogLFxuICAgICAgICB7XG4gICAgICAgICAgbGFiZWw6ICcnLFxuICAgICAgICAgIGNsYXNzOiAnZHJhZy10ZXN0LXRoaW5neScsXG4gICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tZDEwJyxcbiAgICAgICAgICBvbmRyYWdzdGFydDogKCkgPT4gdWkubm90aWZpY2F0aW9ucy5pbmZvKCdkcmFnIHN0YXJ0ZWQnKVxuICAgICAgICB9ICovXG4gICAgICBdLmNvbmNhdChidXR0b25zKVxuICAgICAgcmV0dXJuIGJ1dHRvbnNcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZVNoZWV0TW9kZSAoZXZlbnQpIHtcbiAgICB0aGlzLnN1bW1hcml6ZWQgPSAhdGhpcy5zdW1tYXJpemVkXG4gICAgbGV0IG9wdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShDb0M3Q2hhcmFjdGVyU2hlZXQuZGVmYXVsdE9wdGlvbnMpXG4gICAgaWYgKHRoaXMuc3VtbWFyaXplZCkge1xuICAgICAgb3B0aW9ucyA9IGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qob3B0aW9ucywge1xuICAgICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnYWN0b3InLCAnY2hhcmFjdGVyJywgJ3N1bW1hcml6ZWQnXSxcbiAgICAgICAgaGVpZ2h0OiAyMDAsXG4gICAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICAgIHdpZHRoOiA3MDBcbiAgICAgIH0pXG4gICAgfVxuICAgIG9wdGlvbnMudG9rZW4gPSB0aGlzLm9wdGlvbnMudG9rZW5cbiAgICBhd2FpdCB0aGlzLmNsb3NlKClcbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlLCBvcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG4gICAgaWYgKFxuICAgICAgdGhpcy5pc0VkaXRhYmxlICYmXG4gICAgICB0eXBlb2YgdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ3NraWxsTGlzdE1vZGUnKSA9PT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZygnQ29DNycsICdza2lsbExpc3RNb2RlJywgZmFsc2UpXG4gICAgfVxuICAgIGlmIChcbiAgICAgIHRoaXMuaXNFZGl0YWJsZSAmJlxuICAgICAgdHlwZW9mIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKCdDb0M3JywgJ3NraWxsU2hvd1VuY29tbW9uJywgdHJ1ZSlcbiAgICB9XG4gICAgc2hlZXREYXRhLnNraWxsTGlzdE1vZGVWYWx1ZSA9XG4gICAgICB0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScpID8/IGZhbHNlXG4gICAgc2hlZXREYXRhLnNraWxsU2hvd1VuY29tbW9uID1cbiAgICAgIHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdza2lsbFNob3dVbmNvbW1vbicpID8/IHRydWVcbiAgICBzaGVldERhdGEuc2hvd0ljb25zT25seSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3Nob3dJY29uc09ubHknKVxuXG4gICAgaWYgKHRoaXMuYWN0b3Iub2NjdXBhdGlvbikge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLm9jY3VwYXRpb24gPSB0aGlzLmFjdG9yLm9jY3VwYXRpb24ubmFtZVxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLm9jY3VwYXRpb25TZXQgPSB0cnVlXG4gICAgfSBlbHNlIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5vY2N1cGF0aW9uU2V0ID0gZmFsc2VcblxuICAgIGlmICh0aGlzLmFjdG9yLmFyY2hldHlwZSkge1xuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmluZm9zLmFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlLm5hbWVcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5hcmNoZXR5cGVTZXQgPSB0cnVlXG4gICAgfSBlbHNlIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5hcmNoZXR5cGVTZXQgPSBmYWxzZVxuXG4gICAgc2hlZXREYXRhLnRvdGFsRXhwZXJpZW5jZSA9IHRoaXMuYWN0b3IuZXhwZXJpZW5jZVBvaW50c1xuICAgIHNoZWV0RGF0YS50b3RhbE9jY3VwYXRpb24gPSB0aGlzLmFjdG9yLm9jY3VwYXRpb25Qb2ludHNTcGVudFxuICAgIHNoZWV0RGF0YS5pbnZhbGlkT2NjdXBhdGlvblBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5vY2N1cGF0aW9uUG9pbnRzU3BlbnQpICE9PVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3Iuc3lzdGVtLmRldmVsb3BtZW50Py5vY2N1cGF0aW9uKVxuICAgIHNoZWV0RGF0YS50b3RhbEFyY2hldHlwZSA9IHRoaXMuYWN0b3IuYXJjaGV0eXBlUG9pbnRzU3BlbnRcbiAgICBzaGVldERhdGEuaW52YWxpZEFyY2hldHlwZVBvaW50cyA9XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5hcmNoZXR5cGVQb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5zeXN0ZW0uZGV2ZWxvcG1lbnQ/LmFyY2hldHlwZSlcbiAgICBzaGVldERhdGEudG90YWxQZXJzb25hbCA9IHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudFxuICAgIHNoZWV0RGF0YS5pbnZhbGlkUGVyc29uYWxQb2ludHMgPVxuICAgICAgTnVtYmVyKHRoaXMuYWN0b3IucGVyc29uYWxQb2ludHNTcGVudCkgIT09XG4gICAgICBOdW1iZXIodGhpcy5hY3Rvci5zeXN0ZW0uZGV2ZWxvcG1lbnQ/LnBlcnNvbmFsKVxuICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNYXggPSBOdW1iZXIoXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbS5jcmVkaXRSYXRpbmcubWF4XG4gICAgKVxuICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdNaW4gPSBOdW1iZXIoXG4gICAgICB0aGlzLmFjdG9yLm9jY3VwYXRpb24/LnN5c3RlbS5jcmVkaXRSYXRpbmcubWluXG4gICAgKVxuICAgIHNoZWV0RGF0YS5pbnZhbGlkQ3JlZGl0UmF0aW5nID1cbiAgICAgIHRoaXMuYWN0b3IuY3JlZGl0UmF0aW5nU2tpbGw/LnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvbiA+XG4gICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nTWF4IHx8XG4gICAgICB0aGlzLmFjdG9yLmNyZWRpdFJhdGluZ1NraWxsPy5zeXN0ZW0uYWRqdXN0bWVudHM/Lm9jY3VwYXRpb24gPFxuICAgICAgc2hlZXREYXRhLmNyZWRpdFJhdGluZ01pblxuICAgIHNoZWV0RGF0YS5wdWxwVGFsZW50Q291bnQgPSBzaGVldERhdGEuaXRlbXNCeVR5cGUudGFsZW50Py5sZW5ndGhcbiAgICAgID8gc2hlZXREYXRhLml0ZW1zQnlUeXBlLnRhbGVudD8ubGVuZ3RoXG4gICAgICA6IDBcbiAgICBzaGVldERhdGEubWluUHVscFRhbGVudHMgPSB0aGlzLmFjdG9yLmFyY2hldHlwZT8uc3lzdGVtLnRhbGVudHNcbiAgICAgID8gdGhpcy5hY3Rvci5hcmNoZXR5cGU/LnN5c3RlbS50YWxlbnRzXG4gICAgICA6IDBcbiAgICBzaGVldERhdGEuaW52YWxpZFB1bHBUYWxlbnRzID0gc2hlZXREYXRhLnB1bHBUYWxlbnRDb3VudCA8IHNoZWV0RGF0YS5taW5QdWxwVGFsZW50c1xuXG4gICAgc2hlZXREYXRhLmhhc0RldmVsb3BtZW50UGhhc2UgPSB0aGlzLmFjdG9yLmhhc0RldmVsb3BtZW50UGhhc2VcblxuICAgIHNoZWV0RGF0YS5hbGxvd0RldmVsb3BtZW50ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJylcbiAgICBzaGVldERhdGEuYWxsb3dDaGFyQ3JlYXRpb24gPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdjaGFyQ3JlYXRpb25FbmFibGVkJylcbiAgICBzaGVldERhdGEuZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayA9IGdhbWUuc2V0dGluZ3MuZ2V0KFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ2RldmVsb3BtZW50Um9sbEZvckx1Y2snXG4gICAgKVxuICAgIHNoZWV0RGF0YS5zaG93RGV2UGFubmVsID0gc2hlZXREYXRhLmFsbG93RGV2ZWxvcG1lbnQgfHwgc2hlZXREYXRhLmFsbG93Q2hhckNyZWF0aW9uXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cyA9IFtdXG4gICAgZm9yIChjb25zdCBrZXkgaW4gQ09DNy5tb25ldGFyeUZvcm1hdHMpIHtcbiAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlGb3JtYXRzLnB1c2goeyBrZXksIHZhbDogZ2FtZS5pMThuLmxvY2FsaXplKENPQzcubW9uZXRhcnlGb3JtYXRzW2tleV0pIH0pXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLnNob3dDdXJyZW5jeVN5bWJvbCA9IFsnZGVjaW1hbExlZnQnLCAnZGVjaW1hbFJpZ2h0JywgJ2ludGVnZXJMZWZ0JywgJ2ludGVnZXJSaWdodCddLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpXG5cbiAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlUeXBlcykge1xuICAgICAgaWYgKENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5sZW5ndGggPT09IDAgfHwgQ09DNy5tb25ldGFyeVR5cGVzW2tleV0uZmlsdGVyLmluY2x1ZGVzKHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQpKSB7XG4gICAgICAgIHNoZWV0RGF0YS5fbW9uZXRhcnlUeXBlcy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5uYW1lKSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5tYW51YWxDcmVkaXQgPSB0aGlzLmFjdG9yLmdldEFjdG9yRmxhZygnbWFudWFsQ3JlZGl0JylcbiAgICBpZiAoIXNoZWV0RGF0YS5tYW51YWxDcmVkaXQpIHtcbiAgICAgIHNoZWV0RGF0YS5tb25ldGFyeSA9IHtcbiAgICAgICAgc3BlbmRpbmdMZXZlbDogQ29DQWN0b3IubW9uZXRhcnlGb3JtYXQoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LmZvcm1hdCwgc2hlZXREYXRhLmRhdGEuc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCwgdGhpcy5hY3Rvci5zcGVuZGluZ0xldmVsKSxcbiAgICAgICAgYXNzZXRzOiBDb0NBY3Rvci5tb25ldGFyeUZvcm1hdChzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0LCBzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuc3ltYm9sLCB0aGlzLmFjdG9yLmFzc2V0cyksXG4gICAgICAgIGNhc2g6IENvQ0FjdG9yLm1vbmV0YXJ5Rm9ybWF0KHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5mb3JtYXQsIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5tb25ldGFyeS5zeW1ib2wsIHRoaXMuYWN0b3IuY2FzaClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICBzaGVldERhdGEuc3VtbWFyaXplZCA9IHRoaXMuc3VtbWFyaXplZCAmJiAhc2hlZXREYXRhLnBlcm1pc3Npb25MaW1pdGVkXG4gICAgc2hlZXREYXRhLnNraWxsTGlzdCA9IFtdXG4gICAgbGV0IHByZXZpb3VzU3BlYyA9ICcnXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiBzaGVldERhdGEuc2tpbGxzKSB7XG4gICAgICBpZiAoc2hlZXREYXRhLnNraWxsU2hvd1VuY29tbW9uIHx8ICFza2lsbC5zeXN0ZW0ucHJvcGVydGllcy5yYXJpdHkpIHtcbiAgICAgICAgaWYgKHNraWxsLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwpIHtcbiAgICAgICAgICBpZiAocHJldmlvdXNTcGVjICE9PSBza2lsbC5zeXN0ZW0uc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIHByZXZpb3VzU3BlYyA9IHNraWxsLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxsTGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgaXNTcGVjaWFsaXphdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgbmFtZTogc2tpbGwuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuc2tpbGxMaXN0LnB1c2goc2tpbGwpXG4gICAgICB9XG4gICAgfVxuICAgIHNoZWV0RGF0YS5za2lsbHNCeVZhbHVlID0gWy4uLnNoZWV0RGF0YS5za2lsbHNdLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIHJldHVybiBiLnN5c3RlbS52YWx1ZSAtIGEuc3lzdGVtLnZhbHVlXG4gICAgfSlcbiAgICBzaGVldERhdGEudG9wU2tpbGxzID0gWy4uLnNoZWV0RGF0YS5za2lsbHNCeVZhbHVlXS5zbGljZSgwLCAxNClcbiAgICBzaGVldERhdGEuc2tpbGxzQnlWYWx1ZSA9IHNoZWV0RGF0YS5za2lsbHNCeVZhbHVlLmZpbHRlcihcbiAgICAgIHNraWxsID0+IHNoZWV0RGF0YS5za2lsbFNob3dVbmNvbW1vbiB8fCAhc2tpbGwuc3lzdGVtLnByb3BlcnRpZXMucmFyaXR5XG4gICAgKVxuICAgIHNoZWV0RGF0YS50b3BXZWFwb25zID0gWy4uLnNoZWV0RGF0YS5tZWxlZVdwbiwgLi4uc2hlZXREYXRhLnJhbmdlV3BuXVxuICAgICAgLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIGEuc3lzdGVtLnNraWxsLm1haW4/LnZhbHVlIC0gYi5zeXN0ZW0uc2tpbGwubWFpbj8udmFsdWVcbiAgICAgIH0pXG4gICAgICAucmV2ZXJzZSgpXG4gICAgICAuc2xpY2UoMCwgMylcbiAgICBzaGVldERhdGEuZGlzcGxheVBsYXllck5hbWUgPSBnYW1lLnNldHRpbmdzLmdldChcbiAgICAgICdDb0M3JyxcbiAgICAgICdkaXNwbGF5UGxheWVyTmFtZU9uU2hlZXQnXG4gICAgKVxuICAgIGlmIChzaGVldERhdGEuZGlzcGxheVBsYXllck5hbWUgJiYgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5pbmZvcy5wbGF5ZXJuYW1lKSB7XG4gICAgICBjb25zdCB1c2VyID0gdGhpcy5hY3Rvci5jaGFyYWN0ZXJVc2VyXG4gICAgICBpZiAodXNlcikge1xuICAgICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uaW5mb3MucGxheWVybmFtZSA9IHVzZXIubmFtZVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5za2lsbExpc3RFbXB0eSA9IHNoZWV0RGF0YS5za2lsbHMubGVuZ3RoID09PSAwXG5cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdpdGVtJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzcGVsbCcpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAndGFsZW50JykgfHxcbiAgICAgICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCAmJiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZVRhbGVudHMnKSlcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVN0YXR1c2VzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzdGF0dXMnKSB8fFxuICAgICAgIXNoZWV0RGF0YS5kYXRhLnN5c3RlbS5mbGFncy5sb2NrZWRcblxuICAgIHNoZWV0RGF0YS5oYXNJbnZlbnRvcnkgPVxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5SXRlbXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5Qm9va3MgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVRhbGVudHMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3RhdHVzZXMgfHxcbiAgICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5V2VhcG9uc1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQmFja3N0b3J5ID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmJhY2tzdG9yeSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgX3NhdmVTY3JvbGxQb3NpdGlvbnMgKGh0bWwpIHtcbiAgICBzdXBlci5fc2F2ZVNjcm9sbFBvc2l0aW9ucyhodG1sKVxuICAgIGNvbnN0IHNlbGVjdG9ycyA9IFsnLnJpZ2h0LXBhbmVsIC50YWIuZGV2ZWxvcG1lbnQgb2wnXVxuICAgIHRoaXMuX3Njcm9sbFBvc2l0aW9uc1ggPSBzZWxlY3RvcnMucmVkdWNlKChwb3MsIHNlbCkgPT4ge1xuICAgICAgY29uc3QgZWwgPSBodG1sLmZpbmQoc2VsKVxuICAgICAgcG9zW3NlbF0gPSBBcnJheS5mcm9tKGVsKS5tYXAoZWwgPT4gZWwuc2Nyb2xsTGVmdClcbiAgICAgIHJldHVybiBwb3NcbiAgICB9LCB7fSlcbiAgfVxuXG4gIF9yZXN0b3JlU2Nyb2xsUG9zaXRpb25zIChodG1sKSB7XG4gICAgc3VwZXIuX3Jlc3RvcmVTY3JvbGxQb3NpdGlvbnMoaHRtbClcbiAgICBjb25zdCBzZWxlY3RvcnMgPSBbJy5yaWdodC1wYW5lbCAudGFiLmRldmVsb3BtZW50IG9sJ11cbiAgICBjb25zdCBwb3NpdGlvbnMgPSB0aGlzLl9zY3JvbGxQb3NpdGlvbnNYIHx8IHt9XG4gICAgZm9yIChjb25zdCBzZWwgb2Ygc2VsZWN0b3JzKSB7XG4gICAgICBjb25zdCBlbCA9IGh0bWwuZmluZChzZWwpXG4gICAgICBlbC5lYWNoKChpLCBlbCkgPT4geyBlbC5zY3JvbGxMZWZ0ID0gcG9zaXRpb25zW3NlbF0/LltpXSB8fCAwIH0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSA1ZSBBY3RvciBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXRWMicsICdhY3RvcicsICdjaGFyYWN0ZXInXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyL2luZGV4Lmh0bWwnLFxuICAgICAgd2lkdGg6IDY4NyxcbiAgICAgIGhlaWdodDogNjIzLFxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxuICAgICAgZHJhZ0Ryb3A6IFt7IGRyYWdTZWxlY3RvcjogJy5pdGVtJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dLFxuICAgICAgc2Nyb2xsWTogWycucmlnaHQtcGFuZWwgLnRhYiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3NraWxscydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBpZiAodGhpcy5hY3Rvci5pc093bmVyKSB7XG4gICAgICAvLyBNT0RJRjogMC44Lnggb3duZXIgZGVwcmVjYXRlZCAgPT4gaXNPd25lclxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnNraWxsLW5hbWUucm9sbGFibGUuZmxhZ2dlZDRkZXYnKVxuICAgICAgICAuY2xpY2soYXN5bmMgZXZlbnQgPT4gdGhpcy5fb25Ta2lsbERldihldmVudCkpXG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCcucmVzZXQtb2NjdXBhdGlvbicpXG4gICAgICAgIC5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0T2NjdXBhdGlvbigpKVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLnJlc2V0LWFyY2hldHlwZScpXG4gICAgICAgIC5jbGljayhhc3luYyAoKSA9PiBhd2FpdCB0aGlzLmFjdG9yLnJlc2V0QXJjaGV0eXBlKCkpXG4gICAgICBodG1sLmZpbmQoJy5vcGVuLWl0ZW0nKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZXRhaWxzKGV2ZW50KSlcbiAgICAgIC8vIGh0bWxcbiAgICAgIC8vICAgLmZpbmQoJ1tuYW1lPVwiZGF0YS5hdHRyaWJzLmhwLnZhbHVlXCJdJylcbiAgICAgIC8vICAgLmNoYW5nZShhc3luYyBldmVudCA9PntcbiAgICAgIC8vICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICAvLyAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICAgIC8vICAgICBsZXQgdmFsdWUgPSBOdW1iZXIoIGV2ZW50LmN1cnJlbnRUYXJnZXQ/LnZhbHVlKVxuICAgICAgLy8gICAgIGlmKCAhaXNOYU4odmFsdWUpKSBhd2FpdCB0aGlzLmFjdG9yLnNldEhwKGV2ZW50KVxuICAgICAgLy8gICAgIGVsc2UgdWkubm90aWZpY2F0aW9ucy53YXJuKCdFcnJvciBwYXJzaW5nIEhQIHZhbHVlJylcbiAgICAgIC8vICAgfSlcbiAgICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1saXN0LW1vZGUnKS5jbGljayhldmVudCA9PiB7XG4gICAgICAgIHRoaXMudG9nZ2xlU2tpbGxMaXN0TW9kZShldmVudClcbiAgICAgIH0pXG4gICAgICBodG1sLmZpbmQoJy50b2dnbGUtdW5jb21tb24tbW9kZScpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgICAgdGhpcy50b2dnbGVTa2lsbFVuY29tbW9uTW9kZShldmVudClcbiAgICAgIH0pXG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2FuaXR5LWxvc3MtdHlwZS1hZGQnKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkFkZFNhbml0eUxvc3NSZWFzb24uYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcuc2FuaXR5LWxvc3MtdHlwZS1kZWxldGUnKVxuICAgICAgICAgIC5jbGljayh0aGlzLl9vbkRlbGV0ZVNhbml0eUxvc3NSZWFzb24uYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbFxuICAgICAgICAgIC5maW5kKCcudG9nZ2xlLWtlZXBlci1mbGFncycpXG4gICAgICAgICAgLmNsaWNrKHRoaXMuX29uVG9nZ2xlS2VlcGVyRmxhZ3MuYmluZCh0aGlzKSlcbiAgICAgICAgaHRtbC5maW5kKCcuYWRkLW1vbmV0YXJ5JykuY2xpY2sodGhpcy5fb25BZGRNb25ldGFyeS5iaW5kKHRoaXMpKVxuICAgICAgICBodG1sLmZpbmQoJy5yZW1vdmUtbW9uZXRhcnknKS5jbGljayh0aGlzLl9vblJlbW92ZU1vbmV0YXJ5LmJpbmQodGhpcykpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uQWRkTW9uZXRhcnkgKCkge1xuICAgIGNvbnN0IHZhbHVlcyA9IHRoaXMuYWN0b3Iuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyA/IGR1cGxpY2F0ZSh0aGlzLmFjdG9yLnN5c3RlbS5tb25ldGFyeS52YWx1ZXMpIDogW11cbiAgICB2YWx1ZXMucHVzaCh7XG4gICAgICBuYW1lOiAnJyxcbiAgICAgIG1pbjogbnVsbCxcbiAgICAgIG1heDogbnVsbCxcbiAgICAgIGNhc2hUeXBlOiAwLFxuICAgICAgY2FzaFZhbHVlOiAnJyxcbiAgICAgIGFzc2V0c1R5cGU6IDAsXG4gICAgICBhc3NldHNWYWx1ZTogJycsXG4gICAgICBzcGVuZGluZ1R5cGU6IDAsXG4gICAgICBzcGVuZGluZ1ZhbHVlOiAnJ1xuICAgIH0pXG4gICAgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyc6IHZhbHVlcyB9KVxuICB9XG5cbiAgX29uUmVtb3ZlTW9uZXRhcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkaXYgPSBhLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCB2YWx1ZXMgPSBkdXBsaWNhdGUodGhpcy5hY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKVxuICAgIHZhbHVlcy5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJzogdmFsdWVzIH0pXG4gIH1cblxuICBfb25Ub2dnbGVLZWVwZXJGbGFncyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgc3dpdGNoIChldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuZmxhZykge1xuICAgICAgY2FzZSAnbXl0aG9zSW5zYW5pdHlFeHBlcmllbmNlZCc6XG4gICAgICAgIHRoaXMuYWN0b3Iuc2V0RmxhZyhcbiAgICAgICAgICAnQ29DNycsXG4gICAgICAgICAgJ215dGhvc0luc2FuaXR5RXhwZXJpZW5jZWQnLFxuICAgICAgICAgICF0aGlzLmFjdG9yLm15dGhvc0luc2FuaXR5RXhwZXJpZW5jZWRcbiAgICAgICAgKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbXl0aG9zSGFyZGVuZWQnOlxuICAgICAgICB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnbXl0aG9zSGFyZGVuZWQnLCAhdGhpcy5hY3Rvci5teXRob3NIYXJkZW5lZClcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25BZGRTYW5pdHlMb3NzUmVhc29uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBuZXcgQ29DN0NyZWF0ZU15dGhvc0VuY291bnRlcihcbiAgICAgIHtcbiAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IsXG4gICAgICAgIHR5cGU6IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlXG4gICAgICB9LFxuICAgICAge31cbiAgICApLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgX29uRGVsZXRlU2FuaXR5TG9zc1JlYXNvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgb2Zmc2V0ID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgICAgLmNsb3Nlc3QoJy5mbGV4cm93JylcbiAgICAgIC5kYXRhKCdvZmZzZXQnKVxuICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSB0aGlzLmFjdG9yLnN5c3RlbS5zYW5pdHlMb3NzRXZlbnRzID8/IFtdXG4gICAgc2FuaXR5TG9zc0V2ZW50cy5zcGxpY2Uob2Zmc2V0LCAxKVxuICAgIHNhbml0eUxvc3NFdmVudHMuc29ydChmdW5jdGlvbiAobGVmdCwgcmlnaHQpIHtcbiAgICAgIHJldHVybiBsZWZ0LnR5cGUubG9jYWxlQ29tcGFyZShyaWdodC50eXBlKVxuICAgIH0pXG4gICAgdGhpcy5hY3Rvci51cGRhdGUoeyAnc3lzdGVtLnNhbml0eUxvc3NFdmVudHMnOiBzYW5pdHlMb3NzRXZlbnRzIH0pXG4gIH1cblxuICBhc3luYyB0b2dnbGVTa2lsbExpc3RNb2RlIChldmVudCkge1xuICAgIGF3YWl0IHRoaXMuYWN0b3Iuc2V0RmxhZyhcbiAgICAgICdDb0M3JyxcbiAgICAgICdza2lsbExpc3RNb2RlJyxcbiAgICAgICF0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxMaXN0TW9kZScpXG4gICAgKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUgKGV2ZW50KSB7XG4gICAgYXdhaXQgdGhpcy5hY3Rvci5zZXRGbGFnKFxuICAgICAgJ0NvQzcnLFxuICAgICAgJ3NraWxsU2hvd1VuY29tbW9uJyxcbiAgICAgICF0aGlzLmFjdG9yLmdldEZsYWcoJ0NvQzcnLCAnc2tpbGxTaG93VW5jb21tb24nKVxuICAgIClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblNraWxsRGV2IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBza2lsbElkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpLmRhdGFzZXQuaXRlbUlkXG4gICAgYXdhaXQgdGhpcy5hY3Rvci5kZXZlbG9wU2tpbGwoc2tpbGxJZCwgZXZlbnQuc2hpZnRLZXkpXG4gIH1cblxuICBfb25JdGVtRGV0YWlscyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgdHlwZSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuZGF0YXNldC50eXBlXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3JbdHlwZV1cbiAgICBpZiAoaXRlbSkgaXRlbS5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIGNvbnN0IHN5c3RlbSA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSk/LnN5c3RlbVxuICAgIGlmIChzeXN0ZW0ubW9uZXRhcnk/LnZhbHVlcykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IE9iamVjdC52YWx1ZXMoc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyB8fCBbXSlcbiAgICB9XG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cblxuICBzdGF0aWMgcmVuZGVyU2hlZXQgKHNoZWV0LCBodG1sKSB7XG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJykpIHtcbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kJykpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtYmcnLFxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtYmcnLFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZCcpXG4gICAgICAgICAgKVxuICAgICAgICAgIC8vIGNvbnN0IGJvcmRlckltYWdlID0gc2hlZXQuZWxlbWVudC5maW5kKCdmb3JtJykuY3NzKCdib3JkZXItaW1hZ2UnKTtcbiAgICAgICAgICAvLyBzaGVldC5lbGVtZW50LmZpbmQoJ2Zvcm0nKS5jc3MoJ2JvcmRlci1pbWFnZScsICcnKTtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrU2hlZXRCYWNrZ3JvdW5kVHlwZScpICE9PSAnc2xpY2UnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBsZXQgc3R5bGVTaGVldCwgY3NzUnVsZUluZGV4XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRvY3VtZW50LnN0eWxlU2hlZXRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgIGlmIChkb2N1bWVudC5zdHlsZVNoZWV0c1tpXS5ocmVmPy5lbmRzV2l0aCgnY29jN2cuY3NzJykpIHtcbiAgICAgICAgICAgICAgICBzdHlsZVNoZWV0ID0gZG9jdW1lbnQuc3R5bGVTaGVldHNbaV1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzdHlsZVNoZWV0KSB7XG4gICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVTaGVldC5ydWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgIHN0eWxlU2hlZXQucnVsZXNbaV0uc2VsZWN0b3JUZXh0ID09PSAnLnNoZWV0VjIuY2hhcmFjdGVyIGZvcm0nXG4gICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICBjc3NSdWxlSW5kZXggPSBpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGNzc1J1bGVJbmRleCkge1xuICAgICAgICAgICAgICBjb25zdCBDU1NTdHlsZSA9IHN0eWxlU2hlZXQucnVsZXNbY3NzUnVsZUluZGV4XS5zdHlsZVxuICAgICAgICAgICAgICBDU1NTdHlsZS5yZW1vdmVQcm9wZXJ0eSgnYm9yZGVyLWltYWdlJylcbiAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnLFxuICAgICAgICAgICAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHN3aXRjaCAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnKSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ2F1dG8nOlxuICAgICAgICAgICAgICAgICAgQ1NTU3R5bGUuc2V0UHJvcGVydHkoJ2JhY2tncm91bmQtc2l6ZScsICdhdXRvJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnY29udGFpbic6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvbnRhaW4nKVxuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdjb3Zlcic6XG4gICAgICAgICAgICAgICAgICBDU1NTdHlsZS5zZXRQcm9wZXJ0eSgnYmFja2dyb3VuZC1zaXplJywgJ2NvdmVyJylcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgIENTU1N0eWxlLnNldFByb3BlcnR5KCdiYWNrZ3JvdW5kLXNpemUnLCAnYXV0bycpXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5nc1xuICAgICAgICAgICAgLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgICAgLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW90aGVyLXNoZWV0LWJnJyxcbiAgICAgICAgICAgIFwidXJsKCAnLi9hc3NldHMvaW1hZ2VzL3ZvaWQud2VicCcpXCJcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgICAnLS1vdGhlci1zaGVldC1iZycsXG4gICAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKS50b0xvd2VyQ2FzZSgpID09PVxuICAgICAgICAgICdudWxsJ1xuICAgICAgICApIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgICAgXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvdm9pZC53ZWJwJylcIlxuICAgICAgICAgIClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAgICctLW1haW4tc2hlZXQtaW1hZ2UnLFxuICAgICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya1NoZWV0SW1hZ2UnKVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InKSkge1xuICAgICAgICBzaGVldC5lbGVtZW50LmNzcyhcbiAgICAgICAgICAnLS1tYWluLXNoZWV0LWZyb250LWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrRnJvbnRDb2xvcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1iYWNrLWNvbG9yJyxcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJylcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtJbnRlcmFjdGl2ZUNvbG9yJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoXG4gICAgICAgICAgJy0tbWFpbi1zaGVldC1pbnRlcmFjdGl2ZS1jb2xvcicsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya0ludGVyYWN0aXZlQ29sb3InKVxuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydHdvcmtGaXhlZFNraWxsTGVuZ3RoJykpIHtcbiAgICAgICAgc2hlZXQuZWxlbWVudC5jc3MoJy0tc2tpbGwtbGVuZ3RoJywgJ2F1dG8nKVxuICAgICAgICBzaGVldC5lbGVtZW50LmNzcygnLS1za2lsbC1zcGVjaWFsaXphdGlvbi1sZW5ndGgnLCAnYXV0bycpXG4gICAgICB9XG5cbiAgICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnQnKSkge1xuICAgICAgICBjb25zdCBjdXN0b21TaGVldEZvbnQgPSBuZXcgRm9udEZhY2UoXG4gICAgICAgICAgJ2N1c3RvbVNoZWV0Rm9udCcsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250JylcbiAgICAgICAgKVxuICAgICAgICBjdXN0b21TaGVldEZvbnRcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZhY2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpKSB7XG4gICAgICAgIGNvbnN0IGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnQgPSBuZXcgRm9udEZhY2UoXG4gICAgICAgICAgJ2N1c3RvbVNoZWV0Rm9udCcsXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Qm9sZCcpLFxuICAgICAgICAgIHsgd2VpZ2h0OiAnYm9sZCcgfVxuICAgICAgICApXG4gICAgICAgIGN1c3RvbVNoZWV0Q3Vyc2l2ZUZvbnRcbiAgICAgICAgICAubG9hZCgpXG4gICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKGxvYWRlZEZhY2UpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmZvbnRzLmFkZChsb2FkZWRGYWNlKVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnJvcilcbiAgICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250U2l6ZScpKSB7XG4gICAgICAgIGNvbnN0IHNpemUgPSBgJHtnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnR3b3JrTWFpbkZvbnRTaXplJyl9cHhgXG4gICAgICAgIGlmIChzaXplICE9PSAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJykpIHtcbiAgICAgICAgICAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJywgc2l6ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2Ygc2hlZXQuYWN0b3I/LnN5c3RlbS5wYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGVldC5hY3Rvci5zeXN0ZW0ucGFubmVsKSkge1xuICAgICAgICBjb25zdCBwYW5uZWxDbGFzcyA9IGNoYXRIZWxwZXIuY2FtZWxDYXNlVG9IeXBoZW4oa2V5KVxuICAgICAgICBjb25zdCBwYW5uZWwgPSBodG1sLmZpbmQoYC5wYW5uZWwuJHtwYW5uZWxDbGFzc31gKVxuICAgICAgICBpZiAodmFsdWUuZXhwYW5kZWQpIHBhbm5lbC5hZGRDbGFzcygnZXhwYW5kZWQnKVxuICAgICAgICBlbHNlIHBhbm5lbC5yZW1vdmVDbGFzcygnZXhwYW5kZWQnKVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUgKi9cbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4vY2hlY2suanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q29tYmF0IHtcbiAgc3RhdGljIHJlbmRlckNvbWJhdFRyYWNrZXIgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIGNvbnN0IGN1cnJlbnRDb21iYXQgPSBkYXRhLmNvbWJhdHNbZGF0YS5jdXJyZW50SW5kZXggLSAxXVxuICAgIGlmICghY3VycmVudENvbWJhdCkgcmV0dXJuXG5cbiAgICAvLyBUT0RPIDogU2kgbGUgY29tYmF0IGVzdCBkZWphIGRlYnV0w6kgYXZhbnQgY2hhcmdlbWVudCBsYSBmb25jdGlvbiBkJ2luaXRpYXRpdmUgcG9pbnRlIHZlcnMgbCdhbmNpZW5uZS5cbiAgICAvLyBsYSBmb25jdGlvbiBhdHRyaWJ1w6llIGVzdCBkYXRhLmNvbWJhdC5yb2xsSW5pdGlhdGl2ZVxuICAgIGh0bWwuZmluZCgnLmNvbWJhdGFudCcpLmVhY2goKGksIGVsKSA9PiB7XG4gICAgICAvLyBpZiggZ2FtZS5jb21iYXQuc3RhcnRlZCl7XG5cbiAgICAgIGNvbnN0IGNvbWJJZCA9IGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jb21iYXRhbnQtaWQnKVxuICAgICAgY29uc3QgY29tYmF0YW50Q29udHJvbHNEaXYgPSBlbC5xdWVyeVNlbGVjdG9yKCcuY29tYmF0YW50LWNvbnRyb2xzJylcbiAgICAgIC8vIGNvbnN0IGNvbWJhdGFudCA9IGdhbWUuY29tYmF0LmdldENvbWJhdGFudChjb21iSWQpO1xuICAgICAgY29uc3QgY29tYmF0YW50ID0gY3VycmVudENvbWJhdC5jb21iYXRhbnRzLmdldChjb21iSWQpXG5cbiAgICAgIGlmIChjb21iYXRhbnQuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgICAkKGNvbWJhdGFudENvbnRyb2xzRGl2KS5wcmVwZW5kKFxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFjdGl2ZSBhZGQtaW5pdFwiIHRpdGxlPVwiJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAnQ29DNy5QdXRHdW5Bd2F5J1xuICAgICAgICAgICl9XCIgZGF0YS1jb250cm9sPVwiZHJhd0d1blwiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1yZXZvbHZlclwiPjwvaT48L2E+YFxuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAkKGNvbWJhdGFudENvbnRyb2xzRGl2KS5wcmVwZW5kKFxuICAgICAgICAgIGA8YSBjbGFzcz1cImNvbWJhdGFudC1jb250cm9sIGFkZC1pbml0XCIgdGl0bGU9XCIke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICdDb0M3LkRyYXdHdW4nXG4gICAgICAgICAgKX1cIiBkYXRhLWNvbnRyb2w9XCJkcmF3R3VuXCI+PGkgY2xhc3M9XCJnYW1lLWljb24gZ2FtZS1pY29uLXJldm9sdmVyXCI+PC9pPjwvYT5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSA9PT0gJ29wdGlvbmFsJyAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkaXNwbGF5SW5pdEFzVGV4dCcpXG4gICAgICApIHtcbiAgICAgICAgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlKSB7XG4gICAgICAgICAgY29uc3QgdG9rZW5Jbml0aWF0aXZlID0gZWwucXVlcnlTZWxlY3RvcignLnRva2VuLWluaXRpYXRpdmUnKVxuICAgICAgICAgIGNvbnN0IGluaXRpYXRpdmVUZXN0ID0gdG9rZW5Jbml0aWF0aXZlLnF1ZXJ5U2VsZWN0b3IoJy5pbml0aWF0aXZlJylcbiAgICAgICAgICBjb25zdCByb2xsID1cbiAgICAgICAgICAgIDEwMCAqIGNvbWJhdGFudC5pbml0aWF0aXZlIC0gMTAwICogTWF0aC5mbG9vcihjb21iYXRhbnQuaW5pdGlhdGl2ZSlcbiAgICAgICAgICBzd2l0Y2ggKE1hdGguZmxvb3IoY29tYmF0YW50LmluaXRpYXRpdmUpKSB7XG4gICAgICAgICAgICBjYXNlIENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZnVtYmxlOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZnVtYmxlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgIGluaXRpYXRpdmVUZXN0LnRpdGxlID0gcm9sbFxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmZhaWx1cmU6XG4gICAgICAgICAgICAgIHRva2VuSW5pdGlhdGl2ZS5jbGFzc0xpc3QuYWRkKCdmYWlsdXJlJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZhaWx1cmUnKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5yZWd1bGFyOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgncmVndWxhci1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5UmVndWxhcidcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5oYXJkOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnaGFyZC1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5SGFyZCdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5leHRyZW1lOlxuICAgICAgICAgICAgICB0b2tlbkluaXRpYXRpdmUuY2xhc3NMaXN0LmFkZCgnZXh0cmVtZS1zdWNjZXNzJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5RXh0cmVtZSdcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICBpbml0aWF0aXZlVGVzdC50aXRsZSA9IHJvbGxcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgQ29DN0NoZWNrLnN1Y2Nlc3NMZXZlbC5jcml0aWNhbDpcbiAgICAgICAgICAgICAgdG9rZW5Jbml0aWF0aXZlLmNsYXNzTGlzdC5hZGQoJ2NyaXRpY2FsJylcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QuaW5uZXJUZXh0ID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgICAgICdDb0M3LlJvbGxEaWZmaWN1bHR5Q3JpdGljYWwnXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgaW5pdGlhdGl2ZVRlc3QudGl0bGUgPSByb2xsXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGNvbWJhdGFudC5pbml0aWF0aXZlIDwgMCkge1xuICAgICAgICBjb25zdCBoNCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy50b2tlbi1uYW1lJykucXVlcnlTZWxlY3RvcignaDQnKVxuICAgICAgICBjb25zdCBzcGFuID0gZWwucXVlcnlTZWxlY3Rvcignc3Bhbi5pbml0aWF0aXZlJylcbiAgICAgICAgaDQuc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICAgIGg0LnN0eWxlLnRleHRTaGFkb3cgPSAnMXB4IDFweCA0cHggZGFya3JlZCdcbiAgICAgICAgc3Bhbi5zdHlsZS5mb250V2VpZ2h0ID0gJzkwMCdcbiAgICAgICAgc3Bhbi5zdHlsZS50ZXh0U2hhZG93ID0gJzFweCAxcHggNHB4IGRhcmtyZWQnXG5cbiAgICAgICAgZWwuc3R5bGUuY29sb3IgPSAnZGFya3JlZCdcbiAgICAgICAgZWwuc3R5bGUuYmFja2dyb3VuZCA9ICdibGFjaydcbiAgICAgICAgZWwuc3R5bGUuZm9udFdlaWdodCA9ICc5MDAnXG4gICAgICB9XG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5hZGQtaW5pdCcpLmNsaWNrKGV2ZW50ID0+IENvQzdDb21iYXQuX29uVG9nZ2xlR3VuKGV2ZW50KSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBfb25Ub2dnbGVHdW4gKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG4gICAgY29uc3QgYnRuID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxpID0gYnRuLmNsb3Nlc3QoJy5jb21iYXRhbnQnKVxuICAgIGNvbnN0IGMgPSBhd2FpdCBnYW1lLmNvbWJhdC5jb21iYXRhbnRzLmdldChsaS5kYXRhc2V0LmNvbWJhdGFudElkKVxuICAgIGlmIChjLmFjdG9yLmlzT3duZXIpIHtcbiAgICAgIGlmIChjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpIHtcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXdhaXQgYy5zZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicsIHRydWUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbmV3SW5pdCA9IGF3YWl0IGMuYWN0b3Iucm9sbEluaXRpYXRpdmUoISFjLmdldEZsYWcoJ0NvQzcnLCAnaGFzR3VuJykpXG4gICAgaWYgKGMuZ2V0RmxhZygnQ29DNycsICdoYXNHdW4nKSkge1xuICAgICAgaWYgKGMuaW5pdGlhdGl2ZSA8IG5ld0luaXQpIGdhbWUuY29tYmF0LnNldEluaXRpYXRpdmUoYy5pZCwgbmV3SW5pdClcbiAgICB9IGVsc2UgZ2FtZS5jb21iYXQuc2V0SW5pdGlhdGl2ZShjLmlkLCBuZXdJbml0KVxuICB9XG59XG5cbi8qKlxuICogUm9sbCBpbml0aWF0aXZlIGZvciBvbmUgb3IgbXVsdGlwbGUgQ29tYmF0YW50cyB3aXRoaW4gdGhlIENvbWJhdCBlbnRpdHlcbiAqIEBwYXJhbSB7c3RyaW5nfHN0cmluZ1tdfSBpZHMgICAgIEEgQ29tYmF0YW50IGlkIG9yIEFycmF5IG9mIGlkcyBmb3Igd2hpY2ggdG8gcm9sbFxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zPXt9XSAgICAgQWRkaXRpb25hbCBvcHRpb25zIHdoaWNoIG1vZGlmeSBob3cgaW5pdGlhdGl2ZSByb2xscyBhcmUgY3JlYXRlZCBvciBwcmVzZW50ZWQuXG4gKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBbb3B0aW9ucy5mb3JtdWxhXSAgICAgICAgIEEgbm9uLWRlZmF1bHQgaW5pdGlhdGl2ZSBmb3JtdWxhIHRvIHJvbGwuIE90aGVyd2lzZSB0aGUgc3lzdGVtIGRlZmF1bHQgaXMgdXNlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudXBkYXRlVHVybj10cnVlXSAgICAgVXBkYXRlIHRoZSBDb21iYXQgdHVybiBhZnRlciBhZGRpbmcgbmV3IGluaXRpYXRpdmUgc2NvcmVzIHRvIGtlZXAgdGhlIHR1cm4gb24gdGhlIHNhbWUgQ29tYmF0YW50LlxuICogQHBhcmFtIHtvYmplY3R9IFtvcHRpb25zLm1lc3NhZ2VPcHRpb25zPXt9XSAgICBBZGRpdGlvbmFsIG9wdGlvbnMgd2l0aCB3aGljaCB0byBjdXN0b21pemUgY3JlYXRlZCBDaGF0IE1lc3NhZ2VzXG4gKiBAcmV0dXJuIHtQcm9taXNlPENvbWJhdD59ICAgICAgICBBIHByb21pc2Ugd2hpY2ggcmVzb2x2ZXMgdG8gdGhlIHVwZGF0ZWQgQ29tYmF0IGVudGl0eSBvbmNlIHVwZGF0ZXMgYXJlIGNvbXBsZXRlLlxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcm9sbEluaXRpYXRpdmUgKFxuICBpZHMsXG4gIHsgZm9ybXVsYSA9IG51bGwsIHVwZGF0ZVR1cm4gPSB0cnVlLCBtZXNzYWdlT3B0aW9ucyA9IHt9IH0gPSB7fVxuKSB7XG4gIC8vIEl0ZXJhdGUgb3ZlciBDb21iYXRhbnRzLCBwZXJmb3JtaW5nIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgZWFjaFxuICBjb25zdCB1cGRhdGVzID0gW11cbiAgZm9yIChjb25zdCBbLCBpZF0gb2YgaWRzLmVudHJpZXMoKSkge1xuICAgIC8vIEdldCBDb21iYXRhbnQgZGF0YSAobm9uLXN0cmljdGx5KVxuICAgIGNvbnN0IGNvbWJhdGFudCA9IHRoaXMuY29tYmF0YW50cy5nZXQoaWQpXG5cbiAgICAvLyBQcm9kdWNlIGFuIGluaXRpYXRpdmUgcm9sbCBmb3IgdGhlIENvbWJhdGFudFxuICAgIGNvbnN0IHJvbGwgPSBhd2FpdCBjb21iYXRhbnQuYWN0b3Iucm9sbEluaXRpYXRpdmUoXG4gICAgICAhIWNvbWJhdGFudC5nZXRGbGFnKCdDb0M3JywgJ2hhc0d1bicpXG4gICAgKVxuICAgIHVwZGF0ZXMucHVzaCh7IF9pZDogaWQsIGluaXRpYXRpdmU6IHJvbGwgfSlcbiAgfVxuICBpZiAoIXVwZGF0ZXMubGVuZ3RoKSByZXR1cm4gdGhpc1xuXG4gIC8vIFVwZGF0ZSBtdWx0aXBsZSBjb21iYXRhbnRzXG4gIGF3YWl0IHRoaXMudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0NvbWJhdGFudCcsIHVwZGF0ZXMpXG5cbiAgcmV0dXJuIHRoaXNcbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIGR1cGxpY2F0ZSwgZXhwYW5kT2JqZWN0LCBmbGF0dGVuT2JqZWN0LCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIEl0ZW0sIG1lcmdlT2JqZWN0ICovXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DSURCYXRjaCBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdjb2MtaWQtZWRpdG9yJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9jb2MtaWQtYmF0Y2guaGJzJyxcbiAgICAgIHdpZHRoOiA3MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHRpdGxlOiAnQ29DNy5Db0NJREZsYWcudGl0bGUnLFxuICAgICAgY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgICBzdWJtaXRPbkNsb3NlOiBmYWxzZSxcbiAgICAgIHN1Ym1pdE9uQ2hhbmdlOiBmYWxzZVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuZm91bmRLZXlzID0gT2JqZWN0LmtleXMoc2hlZXREYXRhLm9iamVjdC5mb3VuZEtleXMpLnJlZHVjZSgob3V0LCBrZXkpID0+IHtcbiAgICAgIG91dC5wdXNoKHsgbmFtZToga2V5LCBrZXk6IHNoZWV0RGF0YS5vYmplY3QuZm91bmRLZXlzW2tleV0gfSlcbiAgICAgIHJldHVybiBvdXRcbiAgICB9LCBbXSkuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgc2hlZXREYXRhLm1pc3NpbmdOYW1lcyA9IE9iamVjdC5rZXlzKHNoZWV0RGF0YS5vYmplY3QubWlzc2luZ05hbWVzKS5yZWR1Y2UoKG91dCwga2V5KSA9PiB7XG4gICAgICBvdXQucHVzaCh7IGtleTogc2hlZXREYXRhLm9iamVjdC5mb3VuZEtleXNba2V5XSA/PyAnJywgbmFtZToga2V5LCBjdXN0b206IHNoZWV0RGF0YS5vYmplY3QubWlzc2luZ05hbWVzW2tleV0sIHN1ZmZpeDogc2hlZXREYXRhLm9iamVjdC5taXNzaW5nTmFtZXNba2V5XS5yZXBsYWNlKHRoaXMub2JqZWN0LnN1ZmZpeFJlZ0V4cCwgJycpIH0pXG4gICAgICByZXR1cm4gb3V0XG4gICAgfSwgW10pLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sLmZpbmQoJy5leGlzdGluZycpLmNoYW5nZSh0aGlzLm9uU2V0TmFtZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmZhLXdhbmQtbWFnaWMnKS5jbGljayh0aGlzLm9uQ2xpY2tHdWVzcy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnaW5wdXQnKS5rZXl1cCh0aGlzLm9uS2V5dXAuYmluZCh0aGlzKSlcbiAgfVxuXG4gIG9uU2V0TmFtZSAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzW29iai5jbG9zZXN0KCdsaScpLmRhdGEoJ25hbWUnKV0gPSBvYmoudmFsKClcbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgb25DbGlja0d1ZXNzIChldmVudCkge1xuICAgIGNvbnN0IG9iaiA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBuYW1lID0gb2JqLmNsb3Nlc3QoJ2xpJykuZGF0YSgnbmFtZScpXG4gICAgdGhpcy5vYmplY3QubWlzc2luZ05hbWVzW25hbWVdID0gdGhpcy5vYmplY3QuaWRQcmVmaXggKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKG5hbWUpXG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIG9uS2V5dXAgKGV2ZW50KSB7XG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IG5hbWUgPSBvYmouY2xvc2VzdCgnbGknKS5kYXRhKCduYW1lJylcbiAgICB0aGlzLm9iamVjdC5taXNzaW5nTmFtZXNbbmFtZV0gPSB0aGlzLm9iamVjdC5pZFByZWZpeCArIG9iai52YWwoKVxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKGV2ZW50LnN1Ym1pdHRlcikge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LnR5cGVOYW1lID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2tpbGwnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgICAgYXdhaXQgQ29DSURCYXRjaC5wcm9jZXNzU2tpbGxLZXlzKHRoaXMub2JqZWN0LnVwZGF0ZUxpc3QsIHRoaXMub2JqZWN0Lm1pc3NpbmdOYW1lcylcbiAgICAgIH1cbiAgICAgIHRoaXMub2JqZWN0LnJlc29sdmUodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgcHJvY2Vzc1NraWxsS2V5cyAodXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIGNvbnN0IGFjdG9ycyA9IHt9XG4gICAgY29uc3Qgc2NlbmVzID0ge31cbiAgICBmb3IgKGNvbnN0IHVwZGF0ZSBvZiB1cGRhdGVMaXN0KSB7XG4gICAgICB1cGRhdGUuY29jaWRGbGFnLmlkID0gbWlzc2luZ05hbWVzW3VwZGF0ZS5uYW1lXVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuY29jaWRGbGFnLmxhbmcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZS5jb2NpZEZsYWcubGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5jb2NpZEZsYWcucHJpb3JpdHkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZS5jb2NpZEZsYWcucHJpb3JpdHkgPSAwXG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHVwZGF0ZS5jb2NpZEZsYWcuZXJhcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlLmNvY2lkRmxhZy5lcmFzID0ge31cbiAgICAgIH1cbiAgICAgIGNvbnN0IGZsYWdzID0gZmxhdHRlbk9iamVjdCh7IGZsYWdzOiB7IENvQzc6IHsgY29jaWRGbGFnOiB1cGRhdGUuY29jaWRGbGFnIH0gfSB9KVxuICAgICAgaWYgKHR5cGVvZiB1cGRhdGUuc2NlbmUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2NlbmVzW3VwZGF0ZS5zY2VuZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQodXBkYXRlLnNjZW5lKVxuICAgICAgICAgIHNjZW5lc1t1cGRhdGUuc2NlbmVdID0gc2NlbmUudG9PYmplY3QoKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRva2VuT2Zmc2V0ID0gc2NlbmVzW3VwZGF0ZS5zY2VuZV0udG9rZW5zLmZpbmRJbmRleCh0ID0+IHQuX2lkID09PSB1cGRhdGUudG9rZW4pXG4gICAgICAgIGlmICh0b2tlbk9mZnNldCA+IC0xKSB7XG4gICAgICAgICAgY29uc3QgaXRlbU9mZnNldCA9IHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zLmZpbmRJbmRleChpID0+IGkuX2lkID09PSB1cGRhdGUuaXRlbSlcbiAgICAgICAgICBpZiAoaXRlbU9mZnNldCA+IC0xKSB7XG4gICAgICAgICAgICBjb25zdCBleHBhbmRlZEZsYWdzID0gZXhwYW5kT2JqZWN0KE9iamVjdC5lbnRyaWVzKGZsYWdzKS5yZWR1Y2UoKG91dCwgZW50cnkpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGVudHJ5WzBdLm1hdGNoKC9eZmxhZ3NcXC5Db0M3XFwuY29jaWRGbGFnLykpIHtcbiAgICAgICAgICAgICAgICBvdXRbZW50cnlbMF1dID0gZW50cnlbMV1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICByZXR1cm4gb3V0XG4gICAgICAgICAgICB9LCB7fSkpXG4gICAgICAgICAgICBzY2VuZXNbdXBkYXRlLnNjZW5lXS50b2tlbnNbdG9rZW5PZmZzZXRdLmFjdG9yRGF0YS5pdGVtc1tpdGVtT2Zmc2V0XSA9IG1lcmdlT2JqZWN0KHNjZW5lc1t1cGRhdGUuc2NlbmVdLnRva2Vuc1t0b2tlbk9mZnNldF0uYWN0b3JEYXRhLml0ZW1zW2l0ZW1PZmZzZXRdLCBleHBhbmRlZEZsYWdzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdXBkYXRlLmFjdG9yICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpZiAodHlwZW9mIGFjdG9yc1t1cGRhdGUuYWN0b3JdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGFjdG9yc1t1cGRhdGUuYWN0b3JdID0gW11cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBpdGVtID0ge1xuICAgICAgICAgIF9pZDogdXBkYXRlLml0ZW1cbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyhmbGFncykpIHtcbiAgICAgICAgICBpZiAoa2V5Lm1hdGNoKC9eZmxhZ3NcXC5Db0M3XFwuY29jaWRGbGFnLykpIHtcbiAgICAgICAgICAgIGl0ZW1ba2V5XSA9IGZsYWdzW2tleV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWN0b3JzW3VwZGF0ZS5hY3Rvcl0ucHVzaChpdGVtKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHtcbiAgICAgICAgICBfaWQ6IHVwZGF0ZS5pdGVtXG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoZmxhZ3MpKSB7XG4gICAgICAgICAgaWYgKGtleS5tYXRjaCgvXmZsYWdzXFwuQ29DN1xcLmNvY2lkRmxhZy8pKSB7XG4gICAgICAgICAgICBpdGVtW2tleV0gPSBmbGFnc1trZXldXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xuICAgICAgYXdhaXQgSXRlbS51cGRhdGVEb2N1bWVudHMoaXRlbXMpXG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhhY3RvcnMpLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBhY3RvcklkIG9mIE9iamVjdC5rZXlzKGFjdG9ycykpIHtcbiAgICAgICAgYXdhaXQgSXRlbS51cGRhdGVEb2N1bWVudHMoYWN0b3JzW2FjdG9ySWRdLCB7IHBhcmVudDogZ2FtZS5hY3RvcnMuZ2V0KGFjdG9ySWQpIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhzY2VuZXMpLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBzY2VuZUlkIG9mIE9iamVjdC5rZXlzKHNjZW5lcykpIHtcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBnYW1lLnNjZW5lcy5nZXQoc2NlbmVJZClcbiAgICAgICAgc2NlbmUudXBkYXRlKHNjZW5lc1tzY2VuZUlkXSlcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBwb3B1bGF0ZVNraWxsS2V5cyAodXBkYXRlTGlzdCwgbWlzc2luZ05hbWVzLCBmb3VuZEtleXMpIHtcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGdhbWUuYWN0b3JzLmNvbnRlbnRzKSB7XG4gICAgICBjb25zdCBhY3RvckRhdGEgPSBhY3Rvci50b09iamVjdCgpXG4gICAgICBpZiAoYWN0b3JEYXRhLml0ZW1zKSB7XG4gICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3RvckRhdGEuaXRlbXMpIHtcbiAgICAgICAgICBjb25zdCBpdGVtRGF0YSA9IGl0ZW0gaW5zdGFuY2VvZiBDT05GSUcuSXRlbS5kb2N1bWVudENsYXNzID8gaXRlbS50b09iamVjdCgpIDogaXRlbVxuICAgICAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgICAgICBpZiAoIWl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQ/Lm1hdGNoKC9eaS5za2lsbC8pKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgbWlzc2luZ05hbWVzW2l0ZW1EYXRhLm5hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlTGlzdC5wdXNoKHtcbiAgICAgICAgICAgICAgICBhY3RvcjogYWN0b3IuX2lkLFxuICAgICAgICAgICAgICAgIGl0ZW06IGl0ZW1EYXRhLl9pZCxcbiAgICAgICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgICAgIGNvY2lkRmxhZzogaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnID8/IHt9XG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBmb3VuZEtleXNbaXRlbURhdGEubmFtZV0gPSBpdGVtRGF0YS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZ2FtZS5pdGVtcy5jb250ZW50cykge1xuICAgICAgY29uc3QgaXRlbURhdGEgPSBpdGVtIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGl0ZW0udG9PYmplY3QoKSA6IGl0ZW1cbiAgICAgIGlmIChpdGVtRGF0YS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICAgIGlmICghaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZD8ubWF0Y2goL15pLnNraWxsLykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG1pc3NpbmdOYW1lc1tpdGVtRGF0YS5uYW1lXSA9ICcnXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZUxpc3QucHVzaCh7XG4gICAgICAgICAgICBpdGVtOiBpdGVtRGF0YS5faWQsXG4gICAgICAgICAgICBuYW1lOiBpdGVtRGF0YS5uYW1lLFxuICAgICAgICAgICAgY29jaWRGbGFnOiBpdGVtRGF0YS5mbGFncy5Db0M3Py5jb2NpZEZsYWcgPz8ge31cbiAgICAgICAgICB9KVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvdW5kS2V5c1tpdGVtRGF0YS5uYW1lXSA9IGl0ZW1EYXRhLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChjb25zdCBzY2VuZSBvZiBnYW1lLnNjZW5lcykge1xuICAgICAgY29uc3Qgc2NlbmVEYXRhID0gc2NlbmUudG9PYmplY3QoKVxuICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBzY2VuZURhdGEudG9rZW5zID8/IFtdKSB7XG4gICAgICAgIGlmICh0b2tlbi5hY3RvcklkICYmICF0b2tlbi5hY3RvckxpbmspIHtcbiAgICAgICAgICBjb25zdCBhY3RvckRhdGEgPSBkdXBsaWNhdGUodG9rZW4uYWN0b3JEYXRhKVxuICAgICAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBhY3RvckRhdGEuaXRlbXMgPz8gW10pIHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW1EYXRhID0gaXRlbSBpbnN0YW5jZW9mIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3MgPyBpdGVtLnRvT2JqZWN0KCkgOiBpdGVtXG4gICAgICAgICAgICBpZiAoaXRlbURhdGEudHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgICAgICBpZiAoIWl0ZW1EYXRhLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQ/Lm1hdGNoKC9eaS5za2lsbC8pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICBtaXNzaW5nTmFtZXNbaXRlbURhdGEubmFtZV0gPSAnJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1cGRhdGVMaXN0LnB1c2goe1xuICAgICAgICAgICAgICAgICAgc2NlbmU6IHNjZW5lRGF0YS5faWQsXG4gICAgICAgICAgICAgICAgICB0b2tlbjogdG9rZW4uX2lkLFxuICAgICAgICAgICAgICAgICAgaXRlbTogaXRlbURhdGEuX2lkLFxuICAgICAgICAgICAgICAgICAgbmFtZTogaXRlbURhdGEubmFtZSxcbiAgICAgICAgICAgICAgICAgIGNvY2lkRmxhZzogaXRlbURhdGEuZmxhZ3MuQ29DNz8uY29jaWRGbGFnID8/IHt9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3VuZEtleXNbaXRlbURhdGEubmFtZV0gPSBpdGVtRGF0YS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChPYmplY3Qua2V5cyhtaXNzaW5nTmFtZXMpLmZpbHRlcihrZXkgPT4gbWlzc2luZ05hbWVzW2tleV0gPT09ICcnKS5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogL15pXFwuc2tpbGxcXC4vLCB0eXBlOiAnaScsIGVyYTogZmFsc2UgfSlcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBpdGVtcykge1xuICAgICAgICBmb3VuZEtleXNbaXRlbS5uYW1lXSA9IGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3Qga2V5IGluIGZsYXR0ZW5PYmplY3QoZ2FtZS5pMThuLnRyYW5zbGF0aW9ucy5Db0M3LkNvQ0lERmxhZy5rZXlzID8/IHt9KSkge1xuICAgICAgICBmb3VuZEtleXNbZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcua2V5cy4nICsga2V5KV0gPSBrZXlcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgbmFtZSBpbiBtaXNzaW5nTmFtZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBmb3VuZEtleXNbbmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbWlzc2luZ05hbWVzW25hbWVdID0gZm91bmRLZXlzW25hbWVdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlICh0eXBlKSB7XG4gICAgY29uc3QgdXBkYXRlTGlzdCA9IFtdXG4gICAgY29uc3QgbWlzc2luZ05hbWVzID0ge31cbiAgICBjb25zdCBmb3VuZEtleXMgPSB7fVxuICAgIGxldCB0eXBlTmFtZSA9ICcnXG4gICAgbGV0IGlkUHJlZml4ID0gJydcbiAgICBsZXQgc3VmZml4UmVnRXhwID0gbnVsbFxuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICB0eXBlTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5Ta2lsbCcpXG4gICAgICAgIGlkUHJlZml4ID0gJ2kuc2tpbGwuJ1xuICAgICAgICBzdWZmaXhSZWdFeHAgPSAvXmlcXC5za2lsbFxcLi9cbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBhd2FpdCBDb0NJREJhdGNoLnBvcHVsYXRlU2tpbGxLZXlzKHVwZGF0ZUxpc3QsIG1pc3NpbmdOYW1lcywgZm91bmRLZXlzKVxuICAgIGlmIChPYmplY3Qua2V5cyhtaXNzaW5nTmFtZXMpLmZpbHRlcihrZXkgPT4gbWlzc2luZ05hbWVzW2tleV0gPT09ICcnKS5sZW5ndGggPT09IDApIHtcbiAgICAgIGF3YWl0IENvQ0lEQmF0Y2gucHJvY2Vzc1NraWxsS2V5cyh1cGRhdGVMaXN0LCBtaXNzaW5nTmFtZXMpXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICBjb25zdCBkbGcgPSBuZXcgQ29DSURCYXRjaCh7IHR5cGVOYW1lLCBpZFByZWZpeCwgc3VmZml4UmVnRXhwLCB1cGRhdGVMaXN0LCBtaXNzaW5nTmFtZXMsIGZvdW5kS2V5cywgcmVzb2x2ZSB9KVxuICAgICAgZGxnLnJlbmRlcih0cnVlKVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcsIERpYWxvZywgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGZvdW5kcnksIGdhbWUsIGlzTmV3ZXJWZXJzaW9uLCBtZXJnZU9iamVjdCwgdWkgKi9cbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DSURCYXRjaCB9IGZyb20gJy4vYXBwcy9jb2MtaWQtYmF0Y2guanMnXG5cbmV4cG9ydCBjbGFzcyBVcGRhdGVyIHtcbiAgc3RhdGljIGFzeW5jIGNoZWNrRm9yVXBkYXRlICgpIHtcbiAgICBsZXQgc3lzdGVtVXBkYXRlVmVyc2lvbiA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZVZlcnNpb24nKVxuICAgIGlmIChnYW1lLmFjdG9ycy5zaXplICsgZ2FtZS5zY2VuZXMuc2l6ZSArIGdhbWUuaXRlbXMuc2l6ZSArIGdhbWUuam91cm5hbC5zaXplICsgZ2FtZS50YWJsZXMuc2l6ZSA9PT0gMCkge1xuICAgICAgLy8gSWYgdGhlcmUgYXJlIG5vIGFjdG9ycywgaXRlbXMsIGpvdXJuYWxzLCByb2xsIHRhYmxlcywgb3Igc2NlbmVzIHNraXAgd29ybGQgdXBkYXRlXG4gICAgICBzeXN0ZW1VcGRhdGVWZXJzaW9uID0gZ2FtZS5zeXN0ZW0udmVyc2lvblxuICAgICAgYXdhaXQgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIHN5c3RlbVVwZGF0ZVZlcnNpb24pXG4gICAgfVxuICAgIGNvbnN0IHJ1bk1pZ3JhdGUgPSBpc05ld2VyVmVyc2lvbihnYW1lLnN5c3RlbS52ZXJzaW9uLCBzeXN0ZW1VcGRhdGVWZXJzaW9uID8/ICcwJylcbiAgICB0aGlzLnVwZGF0ZWRNb2R1bGVzID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlZE1vZHVsZVZlcnNpb24nKSB8fCB7fVxuICAgIHRoaXMuY3VycmVudE1vZHVsZXMgPSB7fVxuICAgIGZvciAoY29uc3QgcGFjayBvZiBnYW1lLnBhY2tzKSB7XG4gICAgICBpZiAoIVsnQ29DNycsICd3b3JsZCddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEucGFja2FnZU5hbWUpICYmIFsnQWN0b3InLCAnSXRlbScsICdTY2VuZSddLmluY2x1ZGVzKHBhY2subWV0YWRhdGEudHlwZSkpIHtcbiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5jdXJyZW50TW9kdWxlcywgcGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSkpIHtcbiAgICAgICAgICAvLyBPbmx5IG5lZWQgdG8gY2hlY2sgZWFjaCBtb2R1bGUgb25jZVxuICAgICAgICAgIGNvbnN0IG1vZHVsZSA9IGdhbWUubW9kdWxlcy5nZXQocGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSlcbiAgICAgICAgICBpZiAobW9kdWxlKSB7XG4gICAgICAgICAgICBpZiAocnVuTWlncmF0ZSB8fCAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMudXBkYXRlZE1vZHVsZXMsIG1vZHVsZS5pZCkgfHwgU3RyaW5nKHRoaXMudXBkYXRlZE1vZHVsZXNbbW9kdWxlLmlkXSkgIT09IFN0cmluZyhtb2R1bGUudmVyc2lvbikpIHtcbiAgICAgICAgICAgICAgLy8gQSBtaWdyYXRpb24gaXMgcmVxdWlyZWQsIG1vZHVsZSBoYXMgbm90IGJlZW4gdXBkYXRlZCBiZWZvcmUsIG9yIHRoZSB2ZXJzaW9uIG51bWJlciBoYXMgY2hhbmdlZFxuICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRNb2R1bGVzW21vZHVsZS5pZF0gPSBtb2R1bGUudmVyc2lvblxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocnVuTWlncmF0ZSB8fCBPYmplY3Qua2V5cyh0aGlzLmN1cnJlbnRNb2R1bGVzKS5sZW5ndGggPiAwKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgICAgbmV3IERpYWxvZyh7XG4gICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRpdGxlJyksXG4gICAgICAgICAgY29udGVudDogZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuY3VycmVudE1vZHVsZXMpLmxlbmd0aCA9PT0gMFxuICAgICAgICAgICAgICA/ICdDb0M3Lk1pZ3JhdGUuTWVzc2FnZSdcbiAgICAgICAgICAgICAgOiAnQ29DNy5NaWdyYXRlLldpdGhNb2R1bGVzTWVzc2FnZScsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHZlcnNpb246IGdhbWUuc3lzdGVtLnZlcnNpb24sXG4gICAgICAgICAgICAgIG1vZHVsZXM6XG4gICAgICAgICAgICAgICAgJzx1bD48bGk+JyArXG4gICAgICAgICAgICAgICAgT2JqZWN0LmtleXModGhpcy5jdXJyZW50TW9kdWxlcylcbiAgICAgICAgICAgICAgICAgIC5tYXAobW9kID0+IGdhbWUubW9kdWxlcy5nZXQobW9kKS50aXRsZSlcbiAgICAgICAgICAgICAgICAgIC5qb2luKCc8L2xpPjxsaT4nKSArXG4gICAgICAgICAgICAgICAgJzwvbGk+PC91bD4nXG4gICAgICAgICAgICB9XG4gICAgICAgICAgKSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvblVwZGF0ZScpLFxuICAgICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4gVXBkYXRlci51cGRhdGUoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNraXA6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLkJ1dHRvblNraXAnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSkucmVuZGVyKHRydWUpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXcgRGlhbG9nKHtcbiAgICAgICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuVGl0bGUnKSxcbiAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuR01SZXF1aXJlZCcsIHtcbiAgICAgICAgICAgIHZlcnNpb246IGdhbWUuc3lzdGVtLnZlcnNpb25cbiAgICAgICAgICB9KSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICBPSzoge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk1pZ3JhdGUuQnV0dG9uT2theScpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KS5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZURvY3VtZW50cygpXG5cbiAgICAvLyAvLyBJZiB3ZSBwdXQgdXAgYSB0ZW1wb3Jhcnkgc2NlbmUgcmV0dXJuIHRoZSB1c2VyIGFuZCByZW1vdmUgaXRcbiAgICAvLyBpZiAoXG4gICAgLy8gICB0eXBlb2YgdGhpcy50ZW1wb3JhcnlTY2VuZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyAgIHR5cGVvZiB0aGlzLm9yaWdpbmFsU2NlbmUgIT09ICd1bmRlZmluZWQnXG4gICAgLy8gKSB7XG4gICAgLy8gICBhd2FpdCB0aGlzLm9yaWdpbmFsU2NlbmUudmlldygpXG4gICAgLy8gICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpXG4gICAgLy8gICBhd2FpdCB0aGlzLnRlbXBvcmFyeVNjZW5lLmRlbGV0ZSgpXG4gICAgLy8gfVxuXG4gICAgLy8gTWlncmF0ZSBTZXR0aW5ncyBpZiBQdWxwIFJ1bGVzIGlzIGVuYWJsZWQgdHVybiBvbiBhbGwgcnVsZXNcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVzJykpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRG91YmxlTWF4SGVhbHRoJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlRGV2ZWxvcG1lbnRSb2xsTHVjaycsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZU9yZ2FuaXphdGlvbicsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZVRhbGVudHMnLCB0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAncHVscFJ1bGVGYXN0ZXJSZWNvdmVyeScsIHRydWUpXG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZU1ham9yV291bmRzJywgdHJ1ZSlcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJywgdHJ1ZSlcbiAgICB9XG5cbiAgICBhd2FpdCBDb0NJREJhdGNoLmNyZWF0ZSgnc2tpbGwnKVxuXG4gICAgY29uc3Qgc2V0dGluZ3MgPSBtZXJnZU9iamVjdCh0aGlzLnVwZGF0ZWRNb2R1bGVzIHx8IHt9LCB0aGlzLmN1cnJlbnRNb2R1bGVzKVxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywgc2V0dGluZ3MpXG4gICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc3lzdGVtVXBkYXRlVmVyc2lvbicsIGdhbWUuc3lzdGVtLnZlcnNpb24pXG5cbiAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkNvbXBsZXRlJyksIHtcbiAgICAgIHBlcm1hbmVudDogdHJ1ZVxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgdXBkYXRlRG9jdW1lbnRzICgpIHtcbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yc1xuICAgIGZvciAoY29uc3QgYWN0b3Igb2YgZ2FtZS5hY3RvcnMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB0aGlzLm1pZ3JhdGVBY3RvckRhdGEoYWN0b3IudG9PYmplY3QoKSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIEFjdG9yIGRvY3VtZW50ICR7YWN0b3IubmFtZX1gKVxuICAgICAgICAgIGF3YWl0IGFjdG9yLnVwZGF0ZSh1cGRhdGVEYXRhLCB7IGVuZm9yY2VUeXBlczogZmFsc2UgfSlcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBkZXRhaWxzJywgZXJyKVxuICAgICAgICBlcnIubWVzc2FnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5FcnJvckFjdG9yJywge1xuICAgICAgICAgIG5hbWU6IGFjdG9yLm5hbWUsXG4gICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2VcbiAgICAgICAgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihlcnIubWVzc2FnZSwgeyBwZXJtYW5lbnQ6IHRydWUgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEl0ZW1zXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGdhbWUuaXRlbXMuY29udGVudHMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVJdGVtRGF0YShpdGVtLnRvT2JqZWN0KCkpXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYE1pZ3JhdGluZyBJdGVtIGRvY3VtZW50ICR7aXRlbS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgaXRlbS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JJdGVtJywge1xuICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgV29ybGQgVGFibGVzXG4gICAgZm9yIChjb25zdCB0YWJsZSBvZiBnYW1lLnRhYmxlcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVRhYmxlRGF0YSh0YWJsZS50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgVGFibGUgZG9jdW1lbnQgJHt0YWJsZS5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgdGFibGUudXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yVGFibGUnLCB7XG4gICAgICAgICAgbmFtZTogdGFibGUubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgTWFjcm9zXG4gICAgZm9yIChjb25zdCBtYWNybyBvZiBnYW1lLm1hY3Jvcy5jb250ZW50cykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZU1hY3JvRGF0YShtYWNyby50b09iamVjdCgpKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eSh1cGRhdGVEYXRhKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBNaWdyYXRpbmcgTWFjcm8gZG9jdW1lbnQgJHttYWNyby5uYW1lfWApXG4gICAgICAgICAgYXdhaXQgbWFjcm8udXBkYXRlKHVwZGF0ZURhdGEsIHsgZW5mb3JjZVR5cGVzOiBmYWxzZSB9KVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0Vycm9yIGRldGFpbHMnLCBlcnIpXG4gICAgICAgIGVyci5tZXNzYWdlID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLkVycm9yTWFjcm8nLCB7XG4gICAgICAgICAgbmFtZTogbWFjcm8ubmFtZSxcbiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZVxuICAgICAgICB9KVxuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGVyci5tZXNzYWdlLCB7IHBlcm1hbmVudDogdHJ1ZSB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1pZ3JhdGUgU2NlbmVzIFtUb2tlbl0gQWN0b3JzXG4gICAgZm9yIChjb25zdCBzY2VuZSBvZiBnYW1lLnNjZW5lcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVNjZW5lRGF0YShzY2VuZSlcbiAgICAgICAgaWYgKCFmb3VuZHJ5LnV0aWxzLmlzRW1wdHkodXBkYXRlRGF0YSkpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgTWlncmF0aW5nIFNjZW5lIGRvY3VtZW50ICR7c2NlbmUubmFtZX1gKVxuICAgICAgICAgIC8vIGlmIChcbiAgICAgICAgICAvLyAgIHNjZW5lLmlkID09PSBnYW1lLnNjZW5lcy5jdXJyZW50LmlkICYmXG4gICAgICAgICAgLy8gICB0eXBlb2YgdGhpcy50ZW1wb3JhcnlTY2VuZSA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAvLyAgIHR5cGVvZiB0aGlzLm9yaWdpbmFsU2NlbmUgPT09ICd1bmRlZmluZWQnXG4gICAgICAgICAgLy8gKSB7XG4gICAgICAgICAgLy8gICB0aGlzLnRlbXBvcmFyeVNjZW5lID0gYXdhaXQgU2NlbmUuY3JlYXRlKHtcbiAgICAgICAgICAvLyAgICAgbmFtZTogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5NaWdyYXRlLlVwZGF0ZUN1cnJlbnRTY2VuZScpLFxuICAgICAgICAgIC8vICAgICBiYWNrZ3JvdW5kQ29sb3I6ICcjMDAwMDAwJ1xuICAgICAgICAgIC8vICAgfSlcbiAgICAgICAgICAvLyAgIHRoaXMub3JpZ2luYWxTY2VuZSA9IHNjZW5lXG4gICAgICAgICAgLy8gICBhd2FpdCBEcmF3aW5nRG9jdW1lbnQuY3JlYXRlKFxuICAgICAgICAgIC8vICAgICB7XG4gICAgICAgICAgLy8gICAgICAgYXV0aG9yOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgICAgLy8gICAgICAgc2hhcGU6IHtcbiAgICAgICAgICAvLyAgICAgICAgIHR5cGU6ICdyJyxcbiAgICAgICAgICAvLyAgICAgICAgIHdpZHRoOiAxNjAwLFxuICAgICAgICAgIC8vICAgICAgICAgaGVpZ2h0OiAyMDBcbiAgICAgICAgICAvLyAgICAgICB9LFxuICAgICAgICAgIC8vICAgICAgIHg6IDIyMDAsXG4gICAgICAgICAgLy8gICAgICAgeTogMjIwMCxcbiAgICAgICAgICAvLyAgICAgICB6OiAwLFxuICAgICAgICAgIC8vICAgICAgIHN0cm9rZVdpZHRoOiAwLFxuICAgICAgICAgIC8vICAgICAgIHRleHQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTWlncmF0ZS5VcGRhdGVDdXJyZW50U2NlbmUnKSxcbiAgICAgICAgICAvLyAgICAgICBmb250RmFtaWx5OiAnU2lnbmlrYScsXG4gICAgICAgICAgLy8gICAgICAgZm9udFNpemU6IDEyOCxcbiAgICAgICAgICAvLyAgICAgICB0ZXh0Q29sb3I6ICcjRkZGRkZGJyxcbiAgICAgICAgICAvLyAgICAgICB0ZXh0QWxwaGE6IDEsXG4gICAgICAgICAgLy8gICAgICAgaGlkZGVuOiBmYWxzZSxcbiAgICAgICAgICAvLyAgICAgICBsb2NrZWQ6IHRydWVcbiAgICAgICAgICAvLyAgICAgfSxcbiAgICAgICAgICAvLyAgICAge1xuICAgICAgICAgIC8vICAgICAgIHBhcmVudDogdGhpcy50ZW1wb3JhcnlTY2VuZVxuICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgLy8gICApXG4gICAgICAgICAgLy8gICBhd2FpdCB0aGlzLnRlbXBvcmFyeVNjZW5lLnZpZXcoKVxuICAgICAgICAgIC8vICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApKVxuICAgICAgICAgIC8vIH1cbiAgICAgICAgICBhd2FpdCBzY2VuZS51cGRhdGUodXBkYXRlRGF0YSwgeyBlbmZvcmNlVHlwZXM6IGZhbHNlIH0pXG4gICAgICAgIH1cbiAgICAgICAgc2NlbmUudG9rZW5zLmZvckVhY2godCA9PiAodC5fYWN0b3IgPSBudWxsKSlcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JTY2VuZScsIHtcbiAgICAgICAgICBuYW1lOiBzY2VuZS5uYW1lLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWlncmF0ZSBXb3JsZCBDb21wZW5kaXVtIFBhY2tzXG4gICAgZm9yIChjb25zdCBwYWNrIG9mIGdhbWUucGFja3MpIHtcbiAgICAgIGlmIChcbiAgICAgICAgcGFjay5tZXRhZGF0YS5wYWNrYWdlTmFtZSAhPT0gJ0NvQzcnICYmXG4gICAgICAgIFsnQWN0b3InLCAnSXRlbScsICdNYWNybycsICdSb2xsVGFibGUnLCAnU2NlbmUnXS5pbmNsdWRlcyhcbiAgICAgICAgICBwYWNrLm1ldGFkYXRhLnR5cGVcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGF3YWl0IFVwZGF0ZXIubWlncmF0ZUNvbXBlbmRpdW1EYXRhKHBhY2spXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVBY3RvckRhdGEgKGFjdG9yKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yQXJ0d29yayhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JLZWVwZXJOb3RlcyhhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZShhY3RvciwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlQWN0b3JTdGF0dXNFZmZlY3RBY3RpdmUoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yU2FuTG9zc1JlYXNvbnMoYWN0b3IsIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUFjdG9yTW9uZXRhcnkoYWN0b3IsIHVwZGF0ZURhdGEpXG5cbiAgICAvLyBNaWdyYXRlIFdvcmxkIEFjdG9yIEl0ZW1zXG4gICAgaWYgKGFjdG9yLml0ZW1zKSB7XG4gICAgICBjb25zdCBpdGVtcyA9IGFjdG9yLml0ZW1zLnJlZHVjZSgoYXJyLCBpKSA9PiB7XG4gICAgICAgIGNvbnN0IGl0ZW1EYXRhID1cbiAgICAgICAgICBpIGluc3RhbmNlb2YgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA/IGkudG9PYmplY3QoKSA6IGlcbiAgICAgICAgY29uc3QgaXRlbVVwZGF0ZSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGl0ZW1EYXRhKVxuICAgICAgICBpZiAoIWZvdW5kcnkudXRpbHMuaXNFbXB0eShpdGVtVXBkYXRlKSkge1xuICAgICAgICAgIGl0ZW1VcGRhdGUuX2lkID0gaXRlbURhdGEuX2lkXG4gICAgICAgICAgYXJyLnB1c2goZXhwYW5kT2JqZWN0KGl0ZW1VcGRhdGUpKVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJcbiAgICAgIH0sIFtdKVxuICAgICAgaWYgKGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdXBkYXRlRGF0YS5pdGVtcyA9IGl0ZW1zXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBtaWdyYXRlQ29tcGVuZGl1bURhdGEgKHBhY2spIHtcbiAgICBjb25zdCBkb2N1bWVudFR5cGUgPSBwYWNrLm1ldGFkYXRhLnR5cGVcbiAgICBpZiAoXG4gICAgICAhWydBY3RvcicsICdJdGVtJywgJ01hY3JvJywgJ1JvbGxUYWJsZScsICdTY2VuZSddLmluY2x1ZGVzKGRvY3VtZW50VHlwZSlcbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIFVubG9jayB0aGUgcGFjayBmb3IgZWRpdGluZ1xuICAgIGNvbnN0IHdhc0xvY2tlZCA9IHBhY2subG9ja2VkXG4gICAgYXdhaXQgcGFjay5jb25maWd1cmUoeyBsb2NrZWQ6IGZhbHNlIH0pXG5cbiAgICB0cnkge1xuICAgICAgYXdhaXQgcGFjay5taWdyYXRlKClcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdwYWNrIG1pZ3JhdGUgZmFpbGVkJywgcGFjaywgZXJyKVxuICAgIH1cbiAgICBjb25zdCBkb2N1bWVudHMgPSBhd2FpdCBwYWNrLmdldERvY3VtZW50cygpXG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgY29tcGVuZGl1bSBlbnRyaWVzIC0gYXBwbHlpbmcgZmluZS10dW5lZCBtaWdyYXRpb24gZnVuY3Rpb25zXG4gICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jdW1lbnRzKSB7XG4gICAgICBsZXQgdXBkYXRlRGF0YSA9IHt9XG4gICAgICB0cnkge1xuICAgICAgICBzd2l0Y2ggKGRvY3VtZW50VHlwZSkge1xuICAgICAgICAgIGNhc2UgJ0FjdG9yJzpcbiAgICAgICAgICAgIHVwZGF0ZURhdGEgPSBVcGRhdGVyLm1pZ3JhdGVBY3RvckRhdGEoZG9jLnRvT2JqZWN0KCkpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ0l0ZW0nOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZUl0ZW1EYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdNYWNybyc6XG4gICAgICAgICAgICB1cGRhdGVEYXRhID0gVXBkYXRlci5taWdyYXRlTWFjcm9EYXRhKGRvYy50b09iamVjdCgpKVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdSb2xsVGFibGUnOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVRhYmxlRGF0YShkb2MudG9PYmplY3QoKSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnU2NlbmUnOlxuICAgICAgICAgICAgdXBkYXRlRGF0YSA9IFVwZGF0ZXIubWlncmF0ZVNjZW5lRGF0YShkb2MpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIC8vIFNhdmUgdGhlIGVudHJ5LCBpZiBkYXRhIHdhcyBjaGFuZ2VkXG4gICAgICAgIGlmICghZm91bmRyeS51dGlscy5pc0VtcHR5KHVwZGF0ZURhdGEpKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgTWlncmF0ZWQgJHtkb2N1bWVudFR5cGV9IGRvY3VtZW50ICR7ZG9jLm5hbWV9IGluIENvbXBlbmRpdW0gJHtwYWNrLmNvbGxlY3Rpb259YFxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCBkb2MudXBkYXRlKHVwZGF0ZURhdGEpXG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZGV0YWlscycsIGVycilcbiAgICAgICAgZXJyLm1lc3NhZ2UgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3Lk1pZ3JhdGUuRXJyb3JEb2N1bWVudFBhY2snLCB7XG4gICAgICAgICAgbmFtZTogZG9jLm5hbWUsXG4gICAgICAgICAgY29sbGVjdGlvbjogcGFjay5jb2xsZWN0aW9uLFxuICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlXG4gICAgICAgIH0pXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZXJyLm1lc3NhZ2UsIHsgcGVybWFuZW50OiB0cnVlIH0pXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQXBwbHkgdGhlIG9yaWdpbmFsIGxvY2tlZCBzdGF0dXMgZm9yIHRoZSBwYWNrXG4gICAgYXdhaXQgcGFjay5jb25maWd1cmUoeyBsb2NrZWQ6IHdhc0xvY2tlZCB9KVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVJdGVtRGF0YSAoaXRlbSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEl0ZW1cbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUVtYmVkZGVkdjEwKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1FeHBlcmllbmNlKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1BcnR3b3JrKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkKGl0ZW0sIHVwZGF0ZURhdGEpXG4gICAgVXBkYXRlci5fbWlncmF0ZUl0ZW1LZWVwZXJOb3RlcyhpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtU3BlbGxBdXRvbWF0ZWQoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUtlZXBlck5vdGVzTWVyZ2UoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbUVyYXMoaXRlbSwgdXBkYXRlRGF0YSlcbiAgICBVcGRhdGVyLl9taWdyYXRlSXRlbXYxMChpdGVtLCB1cGRhdGVEYXRhKVxuICAgIFVwZGF0ZXIuX21pZ3JhdGVJdGVtQm9va1VuaXRzKGl0ZW0sIHVwZGF0ZURhdGEpXG5cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIG1pZ3JhdGVNYWNyb0RhdGEgKHRhYmxlKSB7XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG5cbiAgICAvLyBVcGRhdGUgV29ybGQgQWN0b3JcbiAgICBVcGRhdGVyLl9taWdyYXRlTWFjcm9BcnR3b3JrKHRhYmxlLCB1cGRhdGVEYXRhKVxuXG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBtaWdyYXRlVGFibGVEYXRhICh0YWJsZSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuXG4gICAgLy8gVXBkYXRlIFdvcmxkIEFjdG9yXG4gICAgVXBkYXRlci5fbWlncmF0ZVRhYmxlQXJ0d29yayh0YWJsZSwgdXBkYXRlRGF0YSlcblxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgbWlncmF0ZVNjZW5lRGF0YSAoc2NlbmUpIHtcbiAgICBjb25zdCByZXR1cm5zID0ge1xuICAgICAgdG9rZW5zOiBbXVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHNjZW5lLnRva2VucyAhPT0gJ3VuZGVmaW5lZCcgJiYgc2NlbmUudG9rZW5zLmxlbmd0aCkge1xuICAgICAgcmV0dXJucy50b2tlbnMgPSBzY2VuZS50b2tlbnMubWFwKHRva2VuID0+IHtcbiAgICAgICAgY29uc3QgdCA9IHRva2VuLnRvT2JqZWN0KClcbiAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgICAgIFVwZGF0ZXIuX21pZ3JhdGVUb2tlbkFydHdvcmsodCwgdXBkYXRlRGF0YSlcbiAgICAgICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLmxlbmd0aCkge1xuICAgICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodCwgdXBkYXRlRGF0YSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXQuYWN0b3JJZCB8fCB0LmFjdG9yTGluaykge1xuICAgICAgICAgIHQuYWN0b3JEYXRhID0ge31cbiAgICAgICAgfSBlbHNlIGlmICghZ2FtZS5hY3RvcnMuaGFzKHQuYWN0b3JJZCkpIHtcbiAgICAgICAgICB0LmFjdG9ySWQgPSBudWxsXG4gICAgICAgICAgdC5hY3RvckRhdGEgPSB7fVxuICAgICAgICB9IGVsc2UgaWYgKCF0LmFjdG9yTGluaykge1xuICAgICAgICAgIGNvbnN0IGFjdG9yRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHQuYWN0b3JEYXRhKVxuICAgICAgICAgIGFjdG9yRGF0YS50eXBlID0gdG9rZW4uYWN0b3I/LnR5cGVcbiAgICAgICAgICBjb25zdCB1cGRhdGUgPSBVcGRhdGVyLm1pZ3JhdGVBY3RvckRhdGEoYWN0b3JEYXRhKVxuICAgICAgICAgIDtbJ2l0ZW1zJywgJ2VmZmVjdHMnXS5mb3JFYWNoKGVtYmVkZGVkTmFtZSA9PiB7XG4gICAgICAgICAgICBpZiAoIXVwZGF0ZVtlbWJlZGRlZE5hbWVdPy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVzID0gbmV3IE1hcCh1cGRhdGVbZW1iZWRkZWROYW1lXS5tYXAodSA9PiBbdS5faWQsIHVdKSlcbiAgICAgICAgICAgIHQuYWN0b3JEYXRhW2VtYmVkZGVkTmFtZV0uZm9yRWFjaChvcmlnaW5hbCA9PiB7XG4gICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZSA9IHVwZGF0ZXMuZ2V0KG9yaWdpbmFsLl9pZClcbiAgICAgICAgICAgICAgaWYgKHVwZGF0ZSkgbWVyZ2VPYmplY3Qob3JpZ2luYWwsIHVwZGF0ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBkZWxldGUgdXBkYXRlW2VtYmVkZGVkTmFtZV1cbiAgICAgICAgICB9KVxuICAgICAgICAgIG1lcmdlT2JqZWN0KHQuYWN0b3JEYXRhLCB1cGRhdGUpXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiByZXR1cm5zXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXMgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBbXG4gICAgICAgICdhcmNoZXR5cGUnLFxuICAgICAgICAnY2hhc2UnLFxuICAgICAgICAnaXRlbScsXG4gICAgICAgICdvY2N1cGF0aW9uJyxcbiAgICAgICAgJ3NldHVwJyxcbiAgICAgICAgJ3NraWxsJyxcbiAgICAgICAgJ3NwZWxsJyxcbiAgICAgICAgJ3N0YXR1cycsXG4gICAgICAgICd0YWxlbnQnLFxuICAgICAgICAnd2VhcG9uJ1xuICAgICAgXS5pbmNsdWRlcyhpdGVtLnR5cGUpXG4gICAgKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uID09PSAnc3RyaW5nJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24nXSA9IHtcbiAgICAgICAgICB2YWx1ZTogaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24sXG4gICAgICAgICAga2VlcGVyOiAnJ1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICB0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24gPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uJ10gPSB7XG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gPSAnJ1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUV4cGVyaWVuY2UgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoaXRlbS50eXBlID09PSAnc2tpbGwnKSB7XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSddID0gMFxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbUFydHdvcmsgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBsZXQgaW1hZ2UgPSBTdHJpbmcoaXRlbS5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgdXBkYXRlRGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICB9XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NldHVwJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5pbWcgPVxuICAgICAgICAgICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ29jY3VwYXRpb24nKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5za2lsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpbWFnZSA9IFN0cmluZyh2LmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uaW1nID1cbiAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IFtvLCBnXSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5ncm91cHMpKSB7XG4gICAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGcuc2tpbGxzKSkge1xuICAgICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGltYWdlID0gU3RyaW5nKHYuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5ncm91cHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBpdGVtLnN5c3RlbS5ncm91cHNcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLmltZyA9XG4gICAgICAgICAgICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc3BlbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uc3BlbGxzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9IGl0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWxscyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnYXJjaGV0eXBlJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uc2tpbGxzKSkge1xuICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgICAgIGlmIChpbWFnZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9IGl0ZW0uc3lzdGVtLnNraWxsc1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddW2tdLmltZyA9XG4gICAgICAgICAgICAgICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlSXRlbVNwZWxsQXV0b21hdGVkIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyAmJiB0eXBlb2YgaXRlbS5zeXN0ZW0uY29zdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jYXN0aW5nVGltZSddID0gaXRlbS5zeXN0ZW0uY2FzdGluZ1RpbWUgfHwgJydcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5oaXRQb2ludHMnXSA9IGl0ZW0uc3lzdGVtLmNvc3QuaHAgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLm1hZ2ljUG9pbnRzJ10gPSBpdGVtLnN5c3RlbS5jb3N0Lm1wIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5zYW5pdHknXSA9IGl0ZW0uc3lzdGVtLmNvc3Quc2FuIHx8IDBcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb3N0cy5wb3dlciddID0gaXRlbS5zeXN0ZW0uY29zdC5wb3cgfHwgMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvc3RzLm90aGVycyddID0gJydcblxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09Y29zdCddID0gbnVsbFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLi09dW5pZGVudGlmaWVkJ10gPSBudWxsXG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCb29rIGF1dG9tYXRpb24gd2FzIGluY3JlYXNlZCBpbiAwLjYuNVxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaXRlbSBEb2N1bWVudCBkYXRhIGV4cHJlc3NlZCBhcyBhIHBsYWluIG9iamVjdFxuICAgKiBAcGFyYW0ge2pzb259IHVwZGF0ZURhdGEgRGlmZmVyZW50aWFsIHVwZGF0ZSBkYXRhIHdoaWNoIG1vZGlmaWVzIHRoZSBleGlzdGluZyB2YWx1ZXMgb2YgdGhpcyBkb2N1bWVudCBkYXRhXG4gICAqIEByZXR1cm5zIHtqc29ufSBEaWZmZXJlbnRpYWwgdXBkYXRlIGRhdGEgd2hpY2ggbW9kaWZpZXMgdGhlIGV4aXN0aW5nIHZhbHVlcyBvZiB0aGlzIGRvY3VtZW50IGRhdGFcbiAgICovXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICAvKiogSWYgYm9vayBzdGlsbCBoYXMgdGhlIHN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWQga2V5IHRoZW4gcnVuIG1pZ3JhdGUgb24gaXQgKi9cbiAgICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24udW5pZGVudGlmaWVkICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAvKiogRmllbGRzIGNoYW5nZWQgZnJvbSBudWxsIGRlZmF1bHQgdG8gZW1wdHkgc3RyaW5nICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdXRob3InXSA9IGl0ZW0uc3lzdGVtLmF1dGhvciB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGF0ZSddID0gaXRlbS5zeXN0ZW0uZGF0ZSB8fCAnJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubGFuZ3VhZ2UnXSA9IGl0ZW0uc3lzdGVtLmxhbmd1YWdlIHx8ICcnXG4gICAgICAgIC8qKiBGaWVsZHMgY2hhbmdlZCBmcm9tIG51bGwvc3RyaW5nIGRlZmF1bHRzIHRvIGludGVnZXIgdG8gMCAqL1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2FuaXR5TG9zcyddID0gaXRlbS5zeXN0ZW0uc2FuTG9zcyB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5teXRob3NSYXRpbmcnXSA9IE51bWJlcihpdGVtLnN5c3RlbS5teXRob3NSYXRpbmcpIHx8IDBcbiAgICAgICAgLyoqIFJlbmFtZWQvbW92ZWQgZmllbGRzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb250ZW50J10gPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi51bmlkZW50aWZpZWRcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXNcbiAgICAgICAgLyoqIE5ldyBmaWVsZHMgc2V0IGRlZmF1bHQgdmFsdWVzICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kaWZmaWN1bHR5TGV2ZWwnXSA9ICdyZWd1bGFyJ1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZnVsbFN0dWRpZXMnXSA9IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluaXRpYWxSZWFkaW5nJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ua2VlcGVyTm90ZXMnXSA9ICcnXG4gICAgICAgIC8qKiBNb3ZlIGFuZCByZW5hbWUgZ2FpbiBmaWVsZHMgdG8gZ2FpbnMsIGRlZmF1bHQgTmFOIHZhbHVlcyB0byAwICovXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5jdGh1bGh1TXl0aG9zLmluaXRpYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4uY3RodWxodU15dGhvcy5DTUkpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLmN0aHVsaHVNeXRob3MuZmluYWwnXSA9XG4gICAgICAgICAgTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4uY3RodWxodU15dGhvcy5DTUYpIHx8IDBcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdhaW5zLm9jY3VsdCddID0gTnVtYmVyKGl0ZW0uc3lzdGVtLmdhaW4ub2NjdWx0KSB8fCAwXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5nYWlucy5vdGhlcnMnXSA9IFtdXG4gICAgICAgIC8qKiBOZXcgc3R1ZHkgZmllbGQgZGVmYXVsdCBuZWNlc3NhcnkgdG8gaW50ZWdlciBvZiB3ZWVrc1N0dWR5VGltZSBvciAwIGlmIG5vdCBzZXQgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnN0dWR5J10gPSB7XG4gICAgICAgICAgbmVjZXNzYXJ5OiBOdW1iZXIoaXRlbS5zeXN0ZW0ud2Vla3NTdHVkeVRpbWUpIHx8IDAsXG4gICAgICAgICAgcHJvZ3Jlc3M6IDAsXG4gICAgICAgICAgdW5pdHM6ICdDb0M3LndlZWtzJ1xuICAgICAgICB9XG4gICAgICAgIC8qKiBSZW1vdmUgb2xkIGtleXMgKi9cbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09c2FuTG9zcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT13ZWVrc1N0dWR5VGltZSddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1nYWluJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbi4tPXVuaWRlbnRpZmllZCddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24uLT1ub3RlcyddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ2FpbnMuLT1vdGhlciddID0gbnVsbFxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1wcm9wZXJ0aWVzJ10gPSBudWxsXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWZsYWdzJ10gPSBudWxsXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtQm9va1VuaXRzIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ2Jvb2snKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zdHVkeS51bml0cyA9PT0gJ3VuZGVmaW5lZCdcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc3R1ZHkudW5pdHMnXSA9ICdDb0M3LndlZWtzJ1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1LZWVwZXJOb3Rlc01lcmdlIChpdGVtLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJyB8fCBpdGVtLnR5cGUgPT09ICdib29rJykge1xuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5ub3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciArIGl0ZW0uc3lzdGVtLm5vdGVzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ubm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1ub3RlcyddID0gbnVsbFxuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBpdGVtLnN5c3RlbS5rZWVwZXJOb3RlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID1cbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmtlZXBlck5vdGVzICsgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlciddID0gaXRlbS5zeXN0ZW0ua2VlcGVyTm90ZXNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1rZWVwZXJOb3RlcyddID0gbnVsbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW1FbWJlZGRlZHYxMCAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChpdGVtLnR5cGUgPT09ICdvY2N1cGF0aW9uJykge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbbywgZ10gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZ3JvdXBzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhnLnNraWxscykpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICBpdGVtLnN5c3RlbS5ncm91cHNbb10uc2tpbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxuICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ3NldHVwJ10uaW5jbHVkZXMoaXRlbS50eXBlKSkge1xuICAgICAgbGV0IGNoYW5nZWQgPSBmYWxzZVxuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uaXRlbXMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uaXRlbXNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ10gPSBpdGVtLnN5c3RlbS5pdGVtc1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoWydhcmNoZXR5cGUnLCAnb2NjdXBhdGlvbiddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgIGxldCBjaGFuZ2VkID0gZmFsc2VcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmICh0eXBlb2Ygdi5zeXN0ZW0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbHNba10uc3lzdGVtID0gdi5kYXRhXG4gICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChbJ2Jvb2snXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5zcGVsbHMpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdiAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHYuc3lzdGVtID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc3BlbGxzW2tdLnN5c3RlbSA9IHYuZGF0YVxuICAgICAgICAgICAgY2hhbmdlZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVsbHMnXSA9IGl0ZW0uc3lzdGVtLnNwZWxsc1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUl0ZW12MTAgKGl0ZW0sIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBpdGVtLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICh0eXBlb2YgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID09PSAndW5kZWZpbmVkJyB8fCBpdGVtLnN5c3RlbS5za2lsbE5hbWUgPT09ICcnKVxuICAgICkge1xuICAgICAgdXBkYXRlRGF0YS5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAvLyBVcGRhdGUgUG9saXNoIGRvZGdlIHRyYW5zbGF0aW9uIGZyb20gVW5pa2kgdG8gVW5payB0byBtYXRjaCB1cGRhdGUgdG8gbGFuZy9wbC5qc29uXG4gICAgICBpZiAodXBkYXRlRGF0YS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgIHVwZGF0ZURhdGEubmFtZSA9ICdVbmlrJ1xuICAgICAgfVxuICAgICAgY29uc3QgcGFydHMgPSBDb0M3SXRlbS5nZXROYW1lUGFydHNTcGVjKFxuICAgICAgICB1cGRhdGVEYXRhLm5hbWUsXG4gICAgICAgIHR5cGVvZiBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgPyBpdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgIDogaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgIClcbiAgICAgIHVwZGF0ZURhdGEubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbE5hbWUnXSA9IHBhcnRzLnNraWxsTmFtZVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhpdGVtLnN5c3RlbS5pdGVtcykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXSA9IGl0ZW0uc3lzdGVtLml0ZW1zXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLml0ZW1zJ11ba10ubmFtZSA9PT0gJ1VuaWtpJykge1xuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUsXG4gICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgPyB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbi5ncm91cFxuICAgICAgICAgICAgICAgIDogdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIClcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5pdGVtcyddW2tdLm5hbWUgPSBwYXJ0cy5uYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaXRlbXMnXVtrXS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gPSBwYXJ0cy5zcGVjaWFsaXphdGlvblxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXRlbS50eXBlID09PSAnb2NjdXBhdGlvbicpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgW28sIGddIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLmdyb3VwcykpIHtcbiAgICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoZy5za2lsbHMpKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICB2LnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddID0gaXRlbS5zeXN0ZW0uZ3JvdXBzXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gdi5uYW1lXG4gICAgICAgICAgICAgIGlmICh1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPT09ICdVbmlraScpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLm5hbWUgPSAnVW5paydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lLFxuICAgICAgICAgICAgICAgIHR5cGVvZiB2LnN5c3RlbS5zcGVjaWFsaXphdGlvbj8uZ3JvdXAgPT09ICdzdHJpbmcnXG4gICAgICAgICAgICAgICAgICA/IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uLmdyb3VwXG4gICAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmdyb3VwcyddW29dLnNraWxsc1trXS5uYW1lID0gcGFydHMubmFtZVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5za2lsbE5hbWUgPVxuICAgICAgICAgICAgICAgIHBhcnRzLnNraWxsTmFtZVxuICAgICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uZ3JvdXBzJ11bb10uc2tpbGxzW2tdLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9XG4gICAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gJ2FyY2hldHlwZScpIHtcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW0uc3lzdGVtLnNraWxscykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB2ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHYudHlwZSA9PT0gJ3NraWxsJyAmJlxuICAgICAgICAgICAgKHR5cGVvZiB2LnN5c3RlbS5za2lsbE5hbWUgPT09ICd1bmRlZmluZWQnIHx8IHYuc3lzdGVtLnNraWxsTmFtZSA9PT0gJycpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNraWxscyddID0gaXRlbS5zeXN0ZW0uc2tpbGxzXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHYubmFtZVxuICAgICAgICAgICAgaWYgKHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID09PSAnVW5pa2knKSB7XG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lID0gJ1VuaWsnXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5uYW1lLFxuICAgICAgICAgICAgICB0eXBlb2Ygdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24/Lmdyb3VwID09PSAnc3RyaW5nJ1xuICAgICAgICAgICAgICAgID8gdi5zeXN0ZW0uc3BlY2lhbGl6YXRpb24uZ3JvdXBcbiAgICAgICAgICAgICAgICA6IHYuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICApXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10ubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5za2lsbHMnXVtrXS5zeXN0ZW0uc2tpbGxOYW1lID0gcGFydHMuc2tpbGxOYW1lXG4gICAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2tpbGxzJ11ba10uc3lzdGVtLnNwZWNpYWxpemF0aW9uID1cbiAgICAgICAgICAgICAgcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVJdGVtRXJhcyAoaXRlbSwgdXBkYXRlRGF0YSkge1xuICAgIGlmICh0eXBlb2YgaXRlbS5zeXN0ZW0uZXJhcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIC8vIDE5MjAgPT4gc3RhbmRhcmRcbiAgICAgIC8vIG1kcm4gPT4gbW9kZXJuIC8gbW9kZXJuUHVscFxuICAgICAgLy8gcHVscCA9PiBwdWxwXG4gICAgICAvLyBkZHRzID0+IGRvd25EYXJrZXJUcmFpbHMgLyBkb3duRGFya2VyVHJhaWxzUHVscFxuICAgICAgLy8gZHJrYSA9PiBkYXJrQWdlcyAvIGRhcmtBZ2VzUHVscFxuICAgICAgLy8gZ2xpdCA9PiBnYXNMaWdodFxuICAgICAgLy8gbnZjdCA9PiBpbnZpY3R1c1xuICAgICAgbGV0IGVyYXMgPSB7fVxuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoaXRlbS5zeXN0ZW0uZXJhcykpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB0cnVlIHx8ICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnICYmIHR5cGVvZiB2YWx1ZS5zZWxlY3RlZCAhPT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJzE5MjAnOlxuICAgICAgICAgICAgICBlcmFzLnN0YW5kYXJkID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbWRybic6XG4gICAgICAgICAgICAgIGVyYXMubW9kZXJuID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLm1vZGVyblB1bHAgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdwdWxwJzpcbiAgICAgICAgICAgICAgZXJhcy5wdWxwID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnZGR0cyc6XG4gICAgICAgICAgICAgIGVyYXMuZG93bkRhcmtlclRyYWlscyA9IHRydWVcbiAgICAgICAgICAgICAgZXJhcy5kb3duRGFya2VyVHJhaWxzUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2Rya2EnOlxuICAgICAgICAgICAgICBlcmFzLmRhcmtBZ2VzID0gdHJ1ZVxuICAgICAgICAgICAgICBlcmFzLmRhcmtBZ2VzUHVscCA9IHRydWVcbiAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ2dsaXQnOlxuICAgICAgICAgICAgICBlcmFzLmdhc0xpZ2h0ID0gdHJ1ZVxuICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnbnZjdCc6XG4gICAgICAgICAgICAgIGVyYXMuaW52aWN0dXMgPSB0cnVlXG4gICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaXRlbS50eXBlID09PSAnc2V0dXAnKSB7XG4gICAgICAgIC8vIElmIG1vcmUgdGhhbiBvbmUgZXJhIHRha2UgdGhlIGZpcnN0IG9uZSBvbmx5XG4gICAgICAgIGNvbnN0IGtleSA9IE9iamVjdC5rZXlzKGVyYXMpWzBdXG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBlcmFzID0geyBba2V5XTogdHJ1ZSB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSWYgbm8gZXJhcyBkZWZhdWx0IHRvIHN0YW5kYXJkXG4gICAgICAgICAgZXJhcyA9IHsgc3RhbmRhcmQ6IHRydWUgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjb25zdCBDb0M3ID0ge1xuICAgICAgICBjb2NpZEZsYWc6IHtcbiAgICAgICAgICBpZDogJycsXG4gICAgICAgICAgbGFuZzogZ2FtZS5pMThuLmxhbmcsXG4gICAgICAgICAgcHJpb3JpdHk6IDAsXG4gICAgICAgICAgZXJhc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGl0ZW0uZmxhZ3M/LkNvQzcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGl0ZW0uZmxhZ3MuQ29DNyA9IENvQzdcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNyddID0gQ29DN1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnID0gQ29DNy5jb2NpZEZsYWdcbiAgICAgICAgdXBkYXRlRGF0YVsnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnXSA9IENvQzcuY29jaWRGbGFnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMgPSBDb0M3LmNvY2lkRmxhZy5lcmFzXG4gICAgICAgIHVwZGF0ZURhdGFbJ2ZsYWdzLkNvQzcuY29jaWRGbGFnLmVyYXMnXSA9IENvQzcuY29jaWRGbGFnLmVyYXNcbiAgICAgIH1cbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS4tPWVyYXMnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvckFydHdvcmsgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgbGV0IGltYWdlID0gU3RyaW5nKGFjdG9yLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBpZiAoXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZT8uc3JjICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcoYWN0b3IucHJvdG90eXBlVG9rZW4udGV4dHVyZS5zcmMpLm1hdGNoKFxuICAgICAgICAvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispL1xuICAgICAgKVxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3Byb3RvdHlwZVRva2VuLnRleHR1cmUuc3JjJ10gPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy8nICsgaW1hZ2VbMV1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBhY3Rvci5lZmZlY3RzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoYWN0b3IuZWZmZWN0cykpIHtcbiAgICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pY29uKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgICAgaWYgKHR5cGVvZiB1cGRhdGVEYXRhLmVmZmVjdHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB1cGRhdGVEYXRhLmVmZmVjdHMgPSBhY3Rvci5lZmZlY3RzXG4gICAgICAgICAgfVxuICAgICAgICAgIHVwZGF0ZURhdGEuZWZmZWN0c1trXS5pY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvcktlZXBlck5vdGVzIChhY3RvciwgdXBkYXRlRGF0YSkge1xuICAgIGlmIChbJ2NoYXJhY3RlcicsICducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhhY3Rvci50eXBlKSkge1xuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmRlc2NyaXB0aW9uID09PSAndW5kZWZpbmVkJ1xuICAgICAgKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5kZXNjcmlwdGlvbiddID0ge1xuICAgICAgICAgIGtlZXBlcjogJydcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yTW9uZXRhcnkgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKGFjdG9yLnR5cGUgPT09ICdjaGFyYWN0ZXInICYmIHR5cGVvZiBhY3Rvci5zeXN0ZW0uY3JlZGl0Py5tdWx0aXBsaWVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdD8ubW9uZXRhcnlTeW1ib2wgPyBhY3Rvci5zeXN0ZW0uY3JlZGl0Lm1vbmV0YXJ5U3ltYm9sIDogJyQnXG4gICAgICBpZiAodXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnN5bWJvbCddLnRvU3RyaW5nKCkudHJpbSgpID09PSAnJykge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkuc3ltYm9sJ10gPSAnJCdcbiAgICAgIH1cbiAgICAgIGNvbnN0IG11bHRpcGxpZXIgPSBwYXJzZUludChhY3Rvci5zeXN0ZW0uY3JlZGl0Lm11bHRpcGxpZXIpID8gcGFyc2VJbnQoYWN0b3Iuc3lzdGVtLmNyZWRpdC5tdWx0aXBsaWVyKSA6IDFcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS5zcGVudCddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5zcGVudFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmFzc2V0c0RldGFpbHMnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuYXNzZXRzRGV0YWlsc1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnNwZW5kaW5nTGV2ZWwnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuc3BlbmRpbmdMZXZlbFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmNhc2gnXSA9IGFjdG9yLnN5c3RlbS5jcmVkaXQuY2FzaFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LmFzc2V0cyddID0gYWN0b3Iuc3lzdGVtLmNyZWRpdC5hc3NldHNcbiAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnXSA9IGR1cGxpY2F0ZShhY3Rvci5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKVxuICAgICAgaWYgKG11bHRpcGxpZXIgIT09IDEpIHtcbiAgICAgICAgZm9yIChjb25zdCB2YWx1ZSBvZiB1cGRhdGVEYXRhWydzeXN0ZW0ubW9uZXRhcnkudmFsdWVzJ10pIHtcbiAgICAgICAgICB2YWx1ZS5jYXNoVmFsdWUgPSBtdWx0aXBsaWVyICogdmFsdWUuY2FzaFZhbHVlXG4gICAgICAgICAgdmFsdWUuYXNzZXRzVmFsdWUgPSBtdWx0aXBsaWVyICogdmFsdWUuYXNzZXRzVmFsdWVcbiAgICAgICAgICB2YWx1ZS5zcGVuZGluZ1ZhbHVlID0gbXVsdGlwbGllciAqIHZhbHVlLnNwZW5kaW5nVmFsdWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09Y3JlZGl0J10gPSBudWxsXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JTYW5Mb3NzUmVhc29ucyAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoXG4gICAgICBhY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJyAmJlxuICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbT8uZW5jb3VudGVyZWRDcmVhdHVyZXMgIT09ICd1bmRlZmluZWQnXG4gICAgKSB7XG4gICAgICBjb25zdCBncm91cHMgPSB7fVxuICAgICAgZm9yIChjb25zdCBzYW5pdHlMb3NzRXZlbnQgb2YgYWN0b3Iuc3lzdGVtLmVuY291bnRlcmVkQ3JlYXR1cmVzKSB7XG4gICAgICAgIGlmIChzYW5pdHlMb3NzRXZlbnQudG90YWxMb3NzID4gMCkge1xuICAgICAgICAgIGdyb3Vwc1tzYW5pdHlMb3NzRXZlbnQubmFtZV0gPSBNYXRoLm1heChcbiAgICAgICAgICAgIGdyb3Vwc1tzYW5pdHlMb3NzRXZlbnQubmFtZV0gPz8gMCxcbiAgICAgICAgICAgIHNhbml0eUxvc3NFdmVudC50b3RhbExvc3NcbiAgICAgICAgICApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IHNhbml0eUxvc3NFdmVudHMgPSBbXVxuICAgICAgZm9yIChjb25zdCBuYW1lIGluIGdyb3Vwcykge1xuICAgICAgICBzYW5pdHlMb3NzRXZlbnRzLnB1c2goe1xuICAgICAgICAgIHR5cGU6IG5hbWUsXG4gICAgICAgICAgdG90YWxMb3NzOiBncm91cHNbbmFtZV0sXG4gICAgICAgICAgaW1tdW5pdHk6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2FuaXR5TG9zc0V2ZW50cyddID0gc2FuaXR5TG9zc0V2ZW50c1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLi09ZW5jb3VudGVyZWRDcmVhdHVyZXMnXSA9IG51bGxcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVBY3RvclN0YXR1c0VmZmVjdEFjdGl2ZSAoYWN0b3IsIHVwZGF0ZURhdGEpIHtcbiAgICBpZiAoWydjaGFyYWN0ZXInLCAnbnBjJywgJ2NyZWF0dXJlJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkpIHtcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgKHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzICE9PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uY29uZGl0aW9ucyA9PT0gJ3VuZGVmaW5lZCcpXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuY3JpdGljYWxXb3VuZHMudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnVuY29uc2Npb3VzLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5keWluZy52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuZGVhZC52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMucHJvbmUudmFsdWUnXSA9IGZhbHNlXG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnRlbXBvSW5zYW5lLnZhbHVlJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5pbmRlZkluc2FuZS52YWx1ZSddID0gZmFsc2VcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5jcml0aWNhbFdvdW5kcz8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uY3JpdGljYWxXb3VuZHMudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuY3JpdGljYWxXb3VuZHMudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnVuY29uc2Npb3VzPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy51bmNvbnNjaW91cy52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy51bmNvbnNjaW91cy52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uZHlpbmc/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LmR5aW5nLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmR5aW5nLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5kZWFkPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5kZWFkLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLmRlYWQudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoXG4gICAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnByb25lPy52YWx1ZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5wcm9uZS52YWx1ZVxuICAgICAgICApIHtcbiAgICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uY29uZGl0aW9ucy5wcm9uZS52YWx1ZSddID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLnN0YXR1cz8udGVtcG9JbnNhbmU/LnZhbHVlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgIGFjdG9yLnN5c3RlbS5zdGF0dXM/LnRlbXBvSW5zYW5lLnZhbHVlXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5jb25kaXRpb25zLnRlbXBvSW5zYW5lLnZhbHVlJ10gPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uc3RhdHVzPy5pbmRlZkluc2FuZT8udmFsdWUgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLnN0YXR1cz8uaW5kZWZJbnNhbmUudmFsdWVcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmNvbmRpdGlvbnMuaW5kZWZJbnNhbmUudmFsdWUnXSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGFjdG9yLmVmZmVjdHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgZWZmZWN0cyA9IGFjdG9yLmVmZmVjdHNcbiAgICAgICAgICBsZXQgY2hhbmdlZCA9IGZhbHNlXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGltID0gZWZmZWN0cy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBlZmZlY3QgPSBlZmZlY3RzW2ldXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IGVmZmVjdC5pY29uLm1hdGNoKFxuICAgICAgICAgICAgICAvXFwvKGhhbmdpbmctc3BpZGVyfHRlbnRhY2xlcy1za3VsbHxhcm0tc2xpbmd8aGVhcnQtYmVhdHN8dG9tYnN0b25lfGtub2NrZWQtb3V0LXN0YXJzfGZhbGxpbmd8c2t1bGx8dW5jb25zY2lvdXMpXFwuL1xuICAgICAgICAgICAgKVxuICAgICAgICAgICAgaWYgKG1hdGNoICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGxldCBzdGF0dXNJZCA9ICcnXG4gICAgICAgICAgICAgIHN3aXRjaCAobWF0Y2hbMV0pIHtcbiAgICAgICAgICAgICAgICBjYXNlICdoYW5naW5nLXNwaWRlcic6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICd0ZW1wb0luc2FuZSdcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAndGVudGFjbGVzLXNrdWxsJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ2luZGVmSW5zYW5lJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdhcm0tc2xpbmcnOlxuICAgICAgICAgICAgICAgICAgc3RhdHVzSWQgPSAnY3JpdGljYWxXb3VuZHMnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2hlYXJ0LWJlYXRzJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ2R5aW5nJ1xuICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICd0b21ic3RvbmUnOlxuICAgICAgICAgICAgICAgIGNhc2UgJ3NrdWxsJzpcbiAgICAgICAgICAgICAgICAgIHN0YXR1c0lkID0gJ2RlYWQnXG4gICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2tub2NrZWQtb3V0LXN0YXJzJzpcbiAgICAgICAgICAgICAgICBjYXNlICd1bmNvbnNjaW91cyc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICd1bmNvbnNjaW91cydcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnZmFsbGluZyc6XG4gICAgICAgICAgICAgICAgICBzdGF0dXNJZCA9ICdwcm9uZSdcbiAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKHN0YXR1c0lkICE9PSAnJykge1xuICAgICAgICAgICAgICAgIGlmICghdXBkYXRlRGF0YVtgc3lzdGVtLmNvbmRpdGlvbnMuJHtzdGF0dXNJZH0udmFsdWVgXSkge1xuICAgICAgICAgICAgICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmNvbmRpdGlvbnMuJHtzdGF0dXNJZH0udmFsdWVgXSA9IHRydWVcbiAgICAgICAgICAgICAgICAgIGNoYW5nZWQgPSB0cnVlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChlZmZlY3QuZmxhZ3MuY29yZT8uc3RhdHVzSWQgIT09IHN0YXR1c0lkKSB7XG4gICAgICAgICAgICAgICAgICBlZmZlY3RzW2ldID0gbWVyZ2VPYmplY3QoZWZmZWN0LCB7XG4gICAgICAgICAgICAgICAgICAgIGZsYWdzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgY29yZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzSWRcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICBjaGFuZ2VkID0gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICAgICAgdXBkYXRlRGF0YS5lZmZlY3RzID0gZWZmZWN0c1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uLT1zdGF0dXMnXSA9IG51bGxcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVwZGF0ZURhdGFcbiAgfVxuXG4gIHN0YXRpYyBfbWlncmF0ZUFjdG9yTnBjQ3JlYXR1cmUgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFsnbnBjJ10uaW5jbHVkZXMoYWN0b3IudHlwZSkgJiYgdHlwZW9mIGFjdG9yLnN5c3RlbSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0eXBlb2YgYWN0b3Iuc3lzdGVtLnNwZWNpYWwgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5zcGVjaWFsJ10gPSB7XG4gICAgICAgICAgY2hlY2tQYXNzZWQ6IG51bGwsXG4gICAgICAgICAgY2hlY2tGYWlsbGVkOiBudWxsXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dGFja3NQZXJSb3VuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dGFja3NQZXJSb3VuZCddID0gMVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgc3RhdGljIF9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkgKGFjdG9yLCB1cGRhdGVEYXRhKSB7XG4gICAgaWYgKFxuICAgICAgYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicgJiZcbiAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0/LmF0dHJpYnM/LnNhbiAhPT0gJ3VuZGVmaW5lZCdcbiAgICApIHtcbiAgICAgIGNvbnN0IG9uZUZpZnRoU2FuaXR5ID0gTWF0aC5jZWlsKGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi52YWx1ZSAvIDUpXG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMuc2FuLmRhaWx5TG9zcyddID0gMFxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMuc2FuLm9uZUZpZnRoU2FuaXR5ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHkgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4ub25lRmlmdGhTYW5pdHknXSA9ICcgLyAnICsgb25lRmlmdGhTYW5pdHlcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5hdHRyaWJzLnNhbi5kYWlseUxvc3MgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5zYW4uZGFpbHlMb3NzJ10gPSAwXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gbnVsbCB8fFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLnZhbHVlID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwudmFsdWUnXSA9IDBcbiAgICAgIH1cbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIGFjdG9yLnN5c3RlbS5pbmRlZmluaXRlSW5zYW5pdHlMZXZlbCA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgICAgYWN0b3Iuc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsID09PSBudWxsIHx8XG4gICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0uaW5kZWZpbml0ZUluc2FuaXR5TGV2ZWwubWF4ID09PSBudWxsXG4gICAgICApIHtcbiAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmluZGVmaW5pdGVJbnNhbml0eUxldmVsLm1heCddID0gb25lRmlmdGhTYW5pdHlcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAudmFsdWUgPT09IG51bGxcbiAgICAgICAgKSB7XG4gICAgICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLmF0dHJpYnMubXAudmFsdWUnXSA9IG9uZUZpZnRoU2FuaXR5XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFxuICAgICAgICAgIHR5cGVvZiBhY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC5tYXggPT09ICd1bmRlZmluZWQnIHx8XG4gICAgICAgICAgYWN0b3Iuc3lzdGVtLmF0dHJpYnMubXAubWF4ID09PSBudWxsXG4gICAgICAgICkge1xuICAgICAgICAgIHVwZGF0ZURhdGFbJ3N5c3RlbS5hdHRyaWJzLm1wLm1heCddID0gb25lRmlmdGhTYW5pdHlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKFxuICAgICAgICB0eXBlb2YgYWN0b3Iuc3lzdGVtLm5vdGVzID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgICBhY3Rvci5zeXN0ZW0ubm90ZXMgPT09IG51bGxcbiAgICAgICkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubm90ZXMnXSA9ICcnXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVNYWNyb0FydHdvcmsgKHRhYmxlLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBTdHJpbmcodGFibGUuaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVUYWJsZUFydHdvcmsgKHRhYmxlLCB1cGRhdGVEYXRhKSB7XG4gICAgbGV0IGltYWdlID0gU3RyaW5nKHRhYmxlLmltZykubWF0Y2goL3N5c3RlbXNcXC9Db0M3XFwvYXJ0d29ya1xcL2ljb25zXFwvKC4rKS8pXG4gICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICB1cGRhdGVEYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zLycgKyBpbWFnZVsxXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyh0YWJsZS5yZXN1bHRzKSkge1xuICAgICAgaW1hZ2UgPSBTdHJpbmcodi5pbWcpLm1hdGNoKC9zeXN0ZW1zXFwvQ29DN1xcL2FydHdvcmtcXC9pY29uc1xcLyguKykvKVxuICAgICAgaWYgKGltYWdlICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2YgdXBkYXRlRGF0YS5yZXN1bHRzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHVwZGF0ZURhdGEucmVzdWx0cyA9IHRhYmxlLnJlc3VsdHNcbiAgICAgICAgfVxuICAgICAgICB1cGRhdGVEYXRhLnJlc3VsdHNba10uaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICBzdGF0aWMgX21pZ3JhdGVUb2tlbkFydHdvcmsgKHRva2VuLCB1cGRhdGVEYXRhKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBTdHJpbmcodG9rZW4uaW1nKS5tYXRjaCgvc3lzdGVtc1xcL0NvQzdcXC9hcnR3b3JrXFwvaWNvbnNcXC8oLispLylcbiAgICBpZiAoaW1hZ2UgIT09IG51bGwpIHtcbiAgICAgIHVwZGF0ZURhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvJyArIGltYWdlWzFdXG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuLyoqXG4gKiBuYW1lQ2hhcmFjdGVycyBsaXN0IG9mIGNoYXJhY3RlcnMgdGhhdCBjYW4gYmUgcGFydCBvZiBhIFtdIGZvciBjaGFyYWN0ZXIsIHNraWxsLCBvciB3ZWFwb24gbmFtZXMgdXNlZCBpbiBicmFja2V0IGV4cHJlc3Npb24uXG4gKlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZGVzY3JpcHRpb25cIiBsYW5nIGtleSB0byBzaG93IGluIHRoZSBsYW5ndWFnZSBzZWxlY3Rpb24gZGlhbG9nIGJveC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmRiTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBEYW1hZ2UgQm9udXMgZS5nLiBEQjogXCJkYk5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmFybW9yTm9uZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBubyBBcm1vdXIgQm9udXMgZS5nLiBBcm1vcjogXCJhcm1vck5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZE5vbmVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgbm8gYXR0YWNrcyBlLmcuIEF0dGFja3MgUGVyIFJvdW5kOiBcImF0dGFja3NQZXJSb3VuZE5vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNhbkxvc3NOb25lXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIG5vIHNhbml0eSBsb3NzIGUuZy4gU0FOIGxvc3M6IFwic2FuTG9zc05vbmVcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmZ1bGxkYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBkYW1hZ2UgYm9udXMgaW4gYXR0cmlidXRlcyBhbmQgd2VhcG9uIGRhbWFnZSBlLmcuIERCOiBcImZ1bGxkYlwiIC8gV2VhcG9uIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2ICsgXCJmdWxsZGJcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LmhhbGZkYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSBoYWxmIGRhbWFnZSBib251cyBpbiB3ZWFwb24gZGFtYWdlIGUuZy4gV2VhcG9uIDUwJSAoMjUvMTApLCBkYW1hZ2UgMUQ2ICsgXCJoYWxmZGJcIi5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25Db21iYXRzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgY29tYmF0IC8gd2VhcG9uIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+Lm5ld0NvbWJhdEhlYWRlclwiIElmIHRoZXJlIGlzIG5vIGNvbWJhdCAvIHdlYXBvbiBzZWN0aW9uLCBhZGQgdGhpcyBzZWN0aW9uIHdlcmUgaXQgcHJvYmFibHkgaXMsIHRoaXMgbmVlZHMgdG8gbWF0Y2hlZCBieSBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uQ29tYmF0c1wiLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc2VjdGlvblNraWxsc1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBpbmRpY2F0ZSB0aGUgc3RhcnQgb2YgdGhlIHNraWxscyBzZWN0aW9uIG9mIHRleHQuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5zZWN0aW9uTGFuZ2F1Z2VzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIGluZGljYXRlIHRoZSBzdGFydCBvZiB0aGUgbGFuZ3VhZ2VzIHNlY3Rpb24gb2YgdGV4dC5cbiAqIFwia2V5cy48bGFuZ3VhZ2U+LnNlY3Rpb25TcGVsbHNcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gaW5kaWNhdGUgdGhlIHN0YXJ0IG9mIHRoZSBzcGVsbHMgc2VjdGlvbiBvZiB0ZXh0LlxuICogXCJrZXlzLjxsYW5ndWFnZT4uaGFuZGd1blwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBoYW5kZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5yaWZsZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSByaWZsZSB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uc21iXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIHN1Ym1hY2hpbmUgZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5tYWNoaW5lR3VuXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiB3ZWFwb24gbmFtZSBpcyBhIG1hY2hpbmUgZ3VuIHR5cGUuXG4gKiBcImtleXMuPGxhbmd1YWdlPi5sYXVuY2hlZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgY29tYmF0IHNlY3Rpb24gd2VhcG9uIG5hbWUgaXMgYSBsYXVuY2hlZCB0eXBlLlxuICogXCJrZXlzLjxsYW5ndWFnZT4uZXhhbXBsZVwiIFN0cmluZyB0aGF0IHNob3VsZCBzaG93IGFzIGEgcGxhY2Vob2xkZXIgZXhhbXBsZS5cbiAqXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmFnZVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYWdlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGFnZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm9jY3VwYXRpb25cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG9jY3VwYXRpb24sIG5hbWVkIGNhcHR1cmluZyBncm91cCA8b2NjdXBhdGlvbj4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnN0clwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc3RyZW5ndGggY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c3RyPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uY29uXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb25zdGl0dXRpb24gY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8Y29uPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uc2l6XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzaXplIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNpej4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmludFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgaW50ZWxsaWdlbmNlIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGludD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnBvd1wiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgcG93ZXIgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8cG93Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uZGV4XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBkZXh0ZXJpdHkgY2hhcmFjdGVyaXN0aWMsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGV4Pi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXBwXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBhcHBlYXJhbmNlIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGFwcD4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmVkdVwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZWR1Y2F0aW9uIGNoYXJhY3RlcmlzdGljLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGVkdT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNhblwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2FuaXR5IHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8c2FuPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uaHBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGhpdCBwb2ludHMgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGhwPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubXBcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG1hZ2ljIHBvaW50cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bXA+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5kYlwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgZGFtYWdlIGJvbnVzIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxkYj4gaWYgbWF0Y2hpbmcgXCJrZXlzLjxsYW5ndWFnZT4uZGJOb25lXCIgdGhlbiAwLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5idWlsZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYnVpbGQgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGJ1aWxkPi5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4uYXJtb3JcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGRhbWFnZSBib251cyBhdHRyaWJ1dGUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8ZGI+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LmFybW9yTm9uZVwiIHRoZW4gMC5cbiAqIFwidHJhbnNsYXRpb25zLjxsYW5ndWFnZT4ubW92XCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBtb3ZlbWVudCByYXRlIGF0dHJpYnV0ZSwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxtb3Y+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5sY2tcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGx1Y2sgYXR0cmlidXRlLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPGxjaz4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LmF0dGFja3NQZXJSb3VuZFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgYXR0YWNrcyBwZXIgcm91bmQsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8YXR0YWNrc1BlclJvdW5kPiBpZiBtYXRjaGluZyBcImtleXMuPGxhbmd1YWdlPi5hdHRhY2tzUGVyUm91bmROb25lXCIgdGhlbiAwLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5zYW5Mb3NzXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBzYW4gbG9zcyBtaW4vbWF4LCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPHNhbkxvc3M+IGlmIG1hdGNoaW5nIFwia2V5cy48bGFuZ3VhZ2U+LnNhbkxvc3NOb25lXCIgdGhlbiBub25lLlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi53ZWFwb25cIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIGNvbWJhdCBzZWN0aW9uLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgd2VhcG9uIDxuYW1lPiwgb3B0aW9uYWwgPHBlcmNlbnRhZ2U+LCBhbmQgPGRhbWFnZT4uIERhbWFnZSBjYW4gY29udGFpbiBcImtleXMuPGxhbmd1YWdlPi5mdWxsZGJcIiBhbmQgXCJrZXlzLjxsYW5ndWFnZT4uaGFsZmRiXCIuXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LndlYXBvbkRvZGdlXCIgUmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIE5QQyBjb21iYXQgc2VjdGlvbiBkb2RnZSBza2lsbCwgbmFtZWQgY2FwdHVyaW5nIGdyb3VwIDxuYW1lPiBhbmQgPHBlcmNlbnRhZ2U+LlxuICogXCJ0cmFuc2xhdGlvbnMuPGxhbmd1YWdlPi5za2lsbFwiIFJlZ3VsYXIgZXhwcmVzc2lvbiB0byBtYXRjaCBOUEMgc2tpbGwgc2VjdGlvbiBza2lsbCBuYW1lLCBuYW1lZCBjYXB0dXJpbmcgZ3JvdXAgPG5hbWU+IGFuZCA8cGVyY2VudGFnZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lmd1ZXNzU3RhcnRDb21iYXRcIiBSZWd1bGFyIGV4cHJlc3Npb24gaWYgdGhlcmUgaXMgbm8gY29tYmF0IHNlY3Rpb24gZmluZCB0aGVzZSBhcmUgbGlrZWx5IHRvIGJlIHRoZSBmaXJzdCB3ZWFwb24gbmFtZSwgXCJrZXlzLjxsYW5ndWFnZT4ubmV3Q29tYmF0SGVhZGVyXCIgaXMgdGhlbiBhZGRlZCBiZWZvcmUgaXQgdG8gZ2V0IHRoZSBncm91cHNcbiAqXG4gKiBUaGVzZSBzaG91bGQgbm90IGJlIGVkaXRlZCBhcyB0aGV5IHNob3VsZCB3b3JrIGFzIGlzXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+Lm5hbWVcIiBSZWd1bGFyIGV4cHJlc3Npb24gdG8gbWF0Y2ggTlBDIG5hbWUsIG5hbWVkIGNhcHR1cmluZyBncm91cCA8bmFtZT4uXG4gKiBcInRyYW5zbGF0aW9ucy48bGFuZ3VhZ2U+LnNlY3Rpb25zXCIgUmVndWxhciBleHByZXNzaW9uIHRvIHNwbGl0IHRleHQgaW50byBjb21iYXQsIHNraWxsLCBsYW5ndWFnZSwgYW5kIHNwZWxscyBzZWN0aW9uXG4gKlxuICogSWYgdGhlcmUgaXMgbmV3IGZ1bmN0aW9uYWxpdHkgY2hlY2sgZm9yIHRoaXMgc3RyaW5nIGluIHRoZSB0cmFuc2xhdGlvbnMgLyBrZXlzIGZvciB5b3VyIGxhbmd1YWdlIFwiTkVXIEtFWSBCRUxPVyAtIFRSQU5TTEFUSU9OIFJFUVVJUkVEXCJcbiAqL1xuY29uc3QgbmFtZUNoYXJhY3RlcnMgPVxuICAnXFxcXHUzMDAwXFxcXHUzNDAwLVxcXFx1NERCRlxcXFx1NEUwMC1cXFxcdTlGRkZcXFxcd1xcXFwoXFxcXClcXFxcLVxcXFwvJlwiXFwnJyArXG4gIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoXG4gICAgJ2HMgWXMgWnMgW/MgcOgw6jDrMOyw7nDgMOIw4zDksOZw6HDqcOtw7PDusO9w4HDicONw5PDmsOdw6LDqsOuw7TDu8OCw4rDjsOUw5vDo8Oxw7XDg8SAw5HDlcOkw6vDr8O2w7zDv8OEw4vDj8OWw5zFuMOgw6jDp8OHw5/DmMO4w4XDpcOGw6bFk+KAnOKAncKrwrvEhcSHxJnFgsWEw7PFm8W6xbzEhMSGxJjFgcWDw5PFmsW5xbsnXG4gIClcblxuY29uc3Qga2V5cyA9IHtcbiAgZW46IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuRW5nbGlzaCcsXG4gICAgZGJOb25lOiAnbm9uZScsXG4gICAgYXJtb3JOb25lOiAnbm9uZScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25vbmUnLFxuICAgIHNhbkxvc3NOb25lOiAnbm9uZScsXG4gICAgZnVsbGRiOiAnKCcgKyAnRGFtYWdlIEJvbnVzfERCJyArICcpJyxcbiAgICBoYWxmZGI6ICcoJyArICfCvXxoYWxmJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnY29tYmF0fGZpZ2h0aW5nIGF0dGFja3MnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0JyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ3NraWxscycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnbGFuZ3VhZ2VzJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdzcGVsbHMnICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcgR3VufFJldm9sdmVyfFBpc3RvbHxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArICdSaWZsZXxTaG90Z3VufENhcmJpbmV8R2F1Z2UgfExlZS1FbmZpZWxkfEVsZXBoYW50JyArICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2VycycgKyAnKScsXG4gICAgbGF1bmNoZWQ6ICcoPzx0eXBlPicgKyAnTW9sb3RvdnxHcmVuYWRlfER5bmFtaXRlJyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ0V4YW1wbGUgQ2hhcmFjdGVyLCBhZ2UgMjdcXG5TVFIgNzUgQ09OIDYwIFNJWiA4MCBERVggNzAgQVBQIDYwIElOVCA4MFxcblBPVyA1MCBFRFUgODUgU0FOIDU1IEhQIDE0IERCOiAxRDRcXG5CdWlsZDogMSBNb3ZlOiA3IE1QOiAxMCBMdWNrOiA0MCBBcm1vcjogMVxcbkF0dGFja3MgcGVyIHJvdW5kOiAzIFNBTiBsb3NzOiAxZDQvMWQ4XFxuQ29tYmF0XFxuQml0ZSA1MCUgKDI1LzEwKSwgZGFtYWdlIDFENlxcbkJyYXdsIDMwJSAoMTUvNiksIGRhbWFnZSAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZGFtYWdlIDFEOCsxXFxuRG9kZ2UgNTAlICgyNS8xMClcXG5Ta2lsbHNcXG5BbmltYWwgSGFuZGxpbmcgNTUlLCBDaGFybSAzMCUsIEZpcnN0IEFpZCAyNSUsIERpc2d1aXNlIDIwJSxcXG5MaXN0ZW4gNTAlLCBNZWRpY2luZSA0NSUsIFBlcnN1YWRlIDI1JSwgUHN5Y2hvbG9neSA3NSUsXFxuU2NpZW5jZSAoQXN0cm9ub215KSA5MCUsIFNjaWVuY2UgKEJvdGFueSkgMzUlLCBTY2llbmNlIChab29sb2d5KSAxMCUsXFxuU3BvdCBIaWRkZW4gMzUlLCBTdGVhbHRoIDEwJVxcbkxhbmd1YWdlczogRW5nbGlzaCA4MCUsIEVrbG8gNSUuXFxuU3BlbGxzOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcbiAgfSxcbiAgZGU6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuR2VybWFuJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBkaWNlU2hvcnQ6ICd3fGQnLFxuICAgIGZ1bGxkYjogJygnICsgJ1NjaGFkZW5zYm9udXN8U2InICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBTY2hhZGVuc2JvbnVzfFNiLzInICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdLYW1wZnxBbmdyaWZmOnxBTkdSSUZGRScgKyAnKVs6XFxuXScsXG4gICAgbmV3Q29tYmF0SGVhZGVyOiAnXFxuJyArICdLYW1wZicgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOiAnXFxuKD86JyArICdGZXJ0aWdrZWl0ZW4nICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ1NwcmFjaGVuJyArICcpWzpcXG5dJyxcbiAgICBzZWN0aW9uU3BlbGxzOiAnXFxuKD86JyArICdaYXViZXInICsgJylbOlxcbl0nLFxuICAgIGhhbmRndW46XG4gICAgICAnKD88dHlwZT4nICtcbiAgICAgICcgR3VufFJldm9sdmVyfFBpc3RvbGV8SGFuZGd1bnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0dld2VocnxTY2hyb3RmbGludGV8Q2FyYWJpbmVyfEthcmFiaW5lcnxHYXVnZSB8TGVlLUVuZmllbGR8RWxlZmFudGVuJyArXG4gICAgICAnKScsXG4gICAgc21iOiAnKD88dHlwZT4nICsgJ1N1Ym1hY2hpbmUgR3VufFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JhbmF0ZXxEeW5hbWl0JyArICcpJyxcbiAgICBleGFtcGxlOlxuICAgICAgJ1Zvcm5hbWUgTmFjaG5hbWVcXG5BbHRlcjogMjlcXG5CZXJ1ZjogRWluIEJlcnVmXFxuU1QgNTBcXG5NQSA2MFxcbktPIDYwXFxuR0UgNjBcXG5HUiA1NVxcbkVSIDY1XFxuSU4gODBcXG5CSSA4NVxcblRyZWZmZXJwdW5rdGU6IDExXFxuR2Vpc3RpZ2UgU3RhYmlsaXTDpHQ6IDYwXFxuU2NoYWRlbnNib251czogMFxcblN0YXR1cjogMFxcbk1hZ2llcHVua3RlOiAxMlxcbkJld2VndW5nc3dlaXRlOiA4XFxuXFxuS2FtcGZcXG5BbmdyaWZmZTogMVxcbkhhbmRnZW1lbmdlIDMwJSAoMTUvNiksIFNjaGFkZW4gMUQzXFxuTWVzc2VyIDMwJSAoMTUvNiksIFNjaGFkZW4gMUQ0XFxuQXVzd2VpY2hlbiAzMCUgKDE1LzYpXFxuXFxuRmVydGlna2VpdGVuOiBBbnRocm9wb2xvZ2llIDcwJSAoMzUvMTQpLCBBcmNow6RvbG9naWUgMzAlICgxNS82KSwgQmlibGlvdGhla3NudXR6dW5nIDUwJSAoMjUvMTApLCBFcnN0ZSBIaWxmZSA1MCUgKDI1LzEwKSwgRmluYW56a3JhZnQgNDAlICgyMC84KSwgR2VzY2hpY2h0ZSA2MCUgKDMwLzEyKSwgS2xldHRlcm4gNTAlICgyNS8xMClcXG5cXG5TcHJhY2hlbjogRW5nbGlzY2ggODUlICg0Mi8xNyk7IERldXRzY2ggNDUlICgyMi85KSwgTGF0ZWluIDQ1JSAoMjIvOSknXG4gIH0sXG4gIHBsOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LlBvbGlzaCcsXG4gICAgZGJOb25lOiAnYnJhaycsXG4gICAgYXJtb3JOb25lOiAnYnJhaycsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ2JyYWsnLFxuICAgIHNhbkxvc3NOb25lOiAnYnJhaycsXG4gICAgZGljZVNob3J0OiAna3xkJyxcbiAgICBmdWxsZGI6ICcoJyArICdNb2R5ZmlrYXRvciBPYnJhxbxlxYR8TU8nICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBNT3xNTy8yJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czogJ1xcbig/OicgKyAnV2Fsa2F8QXRha2knICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnV2Fsa2EnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnVW1pZWrEmXRub8WbY2knICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0rEmXp5a2knICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1pha2zEmWNpYScgKyAnKVs6XFxuXScsXG4gICAgaGFuZGd1bjpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJyBQaXN0b2xldHxSZXdvbHdlcnxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ0thcmFiaW58U3RyemVsYmF8V2lhdHLDs3drYXxHYXJhbmR8R2F1Z2UgfExlZS1FbmZpZWxkfFN0cnplbGJhIG5hIHPFgm9uaWUnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnUGlzdG9sZXQgbWFzenlub3d5fFRob21wc29uJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnMnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vxYJvdG93YXxHcmFuYXR8TGFza2EgZHluYW1pdHV8RHluYW1pdCcgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdQcnp5a8WCYWRvd2EgcG9zdGHEhywgMjcgbGF0XFxuQmlibGlvdGVrYXJ6XFxuUyA3NSBLT04gNjAgQkMgODAgWlIgNzAgV1lHIDYwIElOVCA4MFxcbk1PQyA1MCBXWUsgODUgUCA1NSBQVyAxNCBNTzogMUQ0XFxuS3J6ZXBhOiAxIFJ1Y2g6IDcgUE06IDEwIFN6Y3rEmcWbY2llOiA0MCBQYW5jZXJ6OiAxXFxuQXRha2kgdyBydW5kemllOiAzIFV0cmF0YSBQb2N6eXRhbG5vxZtjaTogMUs0LzFLOFxcbldhbGthXFxuVWdyeXppZW5pZSA1MCUgKDI1LzEwKSwgb2JyYcW8ZW5pYSAxSzZcXG5XYWxrYSAzMCUgKDE1LzYpLCBvYnJhxbxlbmlhIDFLM1xcbkRlcnJpbmdlciA0MCUgKDIwLzgpLCBvYnJhxbxlbmlhIDFLOCsxXFxuVW5payA1MCUgKDI1LzEwKVxcblVtaWVqxJl0bm/Fm2NpXFxuVHJlc3VyYSBad2llcnrEhXQgNTUlLCBVcm9rIE9zb2Jpc3R5IDMwJSwgUGllcndzemEgUG9tb2MgMjUlLCBVa3J5d2FuaWUgMjAlLFxcbk5hc8WCdWNoaXdhbmllIDUwJSwgTWVkeWN5bmEgNDUlLCBQcnpla29ueXdhbmllIDI1JSwgUHN5Y2hvbG9naWEgNzUlLFxcbk5hdWthIChBc3Ryb25vbWlhKSA5MCUsIE5hdWthIChCb3RhbmlrYSkgMzUlLCBOYXVrYSAoWm9vbG9naWEpIDEwJSxcXG5TcG9zdHJ6ZWdhd2N6b8WbxIcgMzUlLCBVa3J5d2FuaWUgMTAlXFxuSsSZenlraTogQW5naWVsc2tpIDgwJSwgRWtsbyA1JS5cXG5aYWtsxJljaWE6IFByenl6d2FuaWUgTlBDLCBPZGVzxYJhbmllIE5QQy4nXG4gIH0sXG4gIGZyOiB7XG4gICAgZGVzY3JpcHRpb246ICdDb0M3LkZyZW5jaCcsXG4gICAgZGJOb25lOiAnQWN1bmUnLFxuICAgIGFybW9yTm9uZTogJyg/OkFjdW5lfGF1Y3VuZSknLFxuICAgIGF0dGFja3NQZXJSb3VuZE5vbmU6ICdBY3VuZScsXG4gICAgc2FuTG9zc05vbmU6ICdBY3VuZScsXG4gICAgZnVsbGRiOiAnKCcgKyAnQkR8Qm9udXMgYXV4IGRvbW1hZ2VzfEltcGFjdHxJbXAnICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fDEvMiBJbXB8SW1wLzInICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdDb21iYXR8QXJtZXN8QXR0YXF1ZXMnICsgJylbOlxcbl0nLFxuICAgIG5ld0NvbWJhdEhlYWRlcjogJ1xcbicgKyAnQ29tYmF0JyArICdcXG4nLFxuICAgIHNlY3Rpb25Ta2lsbHM6ICdcXG4oPzonICsgJ0NvbXDDqXRlbmNlcycgKyAnKD86XFxcXHMqXFxcXChbXlxcXFwpXStcXFxcKSk/KVs6XFxuXScsXG4gICAgc2VjdGlvbkxhbmdhdWdlczogJ1xcbig/OicgKyAnTGFuZ3Vlcz8nICsgJylcXFxccypbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ1NvcnRpbMOoZ2VzXFxcXHMqfFNvcnRzJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnUmV2b2x2ZXJ8UGlzdG9sZXR8RGVycmluZ2VyfEJlcmV0dGF8THVnZXJ8RGVzZXJ0IEVhZ2xlfCBcXFxcLjM4JyArXG4gICAgICAnKScsXG4gICAgcmlmbGU6ICcoPzx0eXBlPicgKyAnQ2FyYWJpbmV8TGVlLUVuZmllbGR8RnVzaWwnICsgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTTUd8VGhvbXBzb24nICsgJyknLFxuICAgIG1hY2hpbmVHdW46ICcoPzx0eXBlPicgKyAnQnJvd25pbmd8Vmlja2Vyc3xNaXRyYWlsbGV1c2UnICsgJyknLFxuICAgIGxhdW5jaGVkOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnQm9vbWVyYW5nIGRlIGd1ZXJyZXxKYXZlbGluZXxQaWVycmV8U2h1cmlrZW58QsOidG9uIGRlIGR5bmFtaXRlfENvY2t0YWlsIE1vbG90b3Z8R3JlbmFkZSDDoCBtYWlufE1vbG90b3Z8R3JlbmFkZXxEeW5hbWl0ZScgK1xuICAgICAgJyknLFxuICAgIGV4YW1wbGU6XG4gICAgICAnRXhhbXBsZSBDaGFyYWN0ZXIsIDI3IGFuc1xcbkZPUiA3NSBDT04gNjAgVEFJIDgwIERFWCA3MCBBUFAgNjAgSU5UIDgwXFxuUE9VIDUwIMOJRFUgODUgU0FOIDU1IFBWIDE0IEJEOiAxRDRcXG5DYXJydXJlOiAxIE12dDogNyBQTTogMTAgQ2hhbmNlOiA0MCBBcm11cmU6IDFcXG5BdHRhcXVlcyBwYXIgcm91bmQgMyBQZXJ0ZSBkZSBTQU46IDFkNC8xZDhcXG5BdHRhcXVlc1xcbkJpdGUgNTAlICgyNS8xMCksIGRvbW1hZ2UgMUQ2XFxuQnJhd2wgMzAlICgxNS82KSwgZG9tbWFnZSAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZG9tbWFnZSAxRDgrMVxcbkVzcXVpdmVyIDUwJSAoMjUvMTApXFxuQ29tcMOpdGVuY2VzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5MYW5ndWU6IEVuZ2xpc2ggODAlLCBFa2xvIDUlLlxcblNvcnRpbMOoZ2VzOiBTdW1tb24gTlBDLCBEaXNwZWwgTlBDLidcbiAgfSxcbiAgZXM6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuU3BhbmlzaCcsXG4gICAgZGJOb25lOiAnbmluZ3VuYScsXG4gICAgYXJtb3JOb25lOiAnbmluZ3VuYScsXG4gICAgYXR0YWNrc1BlclJvdW5kTm9uZTogJ25pbmd1bm8nLFxuICAgIHNhbkxvc3NOb25lOiAnbm8nLFxuICAgIGZ1bGxkYjogJygnICsgJ0JEfGJkfGJvbmlmaWNhY2nDs24gZGUgZGHDsW8nICsgJyknLFxuICAgIGhhbGZkYjogJygnICsgJ8K9fG1lZGlvIGRhw7FvfG1pdGFkfGRhw7FvIGEgbGEgbWl0YWQnICsgJyknLFxuICAgIHNlY3Rpb25Db21iYXRzOiAnXFxuKD86JyArICdDb21iYXRlfEFybWFzJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdGUnICsgJ1xcbicsXG4gICAgc2VjdGlvblNraWxsczogJ1xcbig/OicgKyAnSGFiaWxpZGFkZXMnICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0lkaW9tYXN8TGVuZ3VhamVzfExlbmd1YXMnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ0Nvbmp1cm9zfEhlY2hpem9zJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnUmV2b2x2ZXJ8UGlzdG9sYXxEZXJyaW5nZXJ8QmVyZXR0YXxMdWdlcnxEZXNlcnQgRWFnbGV8IFxcXFwuMzgnICtcbiAgICAgICcpJyxcbiAgICByaWZsZTpcbiAgICAgICcoPzx0eXBlPicgK1xuICAgICAgJ1JpZmxlfENhcmFiaW5hfExlZS1FbmZpZWxkfENhemEgRWxlZmFudGVzfEZ1c2lsfEVzY29wZXRhfEdhbGdhfFJlY29ydGFkYScgK1xuICAgICAgJyknLFxuICAgIHNtYjogJyg/PHR5cGU+JyArICdTdWJmdXNpbHxUaG9tcHNvbicgKyAnKScsXG4gICAgbWFjaGluZUd1bjogJyg/PHR5cGU+JyArICdCcm93bmluZ3xWaWNrZXJzfEFtZXRyYWxsYWRvcmEnICsgJyknLFxuICAgIGxhdW5jaGVkOiAnKD88dHlwZT4nICsgJ01vbG90b3Z8R3JhbmFkYXxEaW5hbWl0YScgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICdFeGFtcGxlIENoYXJhY3RlciwgMjcgYcOxb3NcXG5GVUUgNzUgQ09OIDYwIFRBTSA4MCBERVMgNzAgQVBBIDYwIElOVCA4MFxcblBPRCA1MCBFRFUgODUgQ09SIDU1IFBWIDE0IEJEOiAxRDRcXG5Db3JwdWxlbmNpYTogMSBNb3ZpbWllbnRvOiA3IFBNOiAxMCBTdWVydGU6IDQwIEFybWFkdXJhOiAxXFxuTsO6bWVybyBkZSBBdGFxdWVzIDMgUMOpcmRpZGEgZGUgY29yZHVyYTogMWQ0LzFkOFxcbkNvbWJhdGVcXG5CaXRlIDUwJSAoMjUvMTApLCBkYcOxbyAxRDZcXG5CcmF3bCAzMCUgKDE1LzYpLCBkYcOxbyAxRDNcXG5EZXJyaW5nZXIgNDAlICgyMC84KSwgZGHDsW8gMUQ4KzFcXG5Fc3F1aXZhciA1MCUgKDI1LzEwKVxcbkhhYmlsaWRhZGVzXFxuQW5pbWFsIEhhbmRsaW5nIDU1JSwgQ2hhcm0gMzAlLCBGaXJzdCBBaWQgMjUlLCBEaXNndWlzZSAyMCUsXFxuTGlzdGVuIDUwJSwgTWVkaWNpbmUgNDUlLCBQZXJzdWFkZSAyNSUsIFBzeWNob2xvZ3kgNzUlLFxcblNjaWVuY2UgKEFzdHJvbm9teSkgOTAlLCBTY2llbmNlIChCb3RhbnkpIDM1JSwgU2NpZW5jZSAoWm9vbG9neSkgMTAlLFxcblNwb3QgSGlkZGVuIDM1JSwgU3RlYWx0aCAxMCVcXG5JZGlvbWFzOiBFbmdsaXNoIDgwJSwgRWtsbyA1JS5cXG5Db25qdXJvczogU3VtbW9uIE5QQywgRGlzcGVsIE5QQy4nXG4gIH0sXG4gICd6aC1UVyc6IHtcbiAgICBkZXNjcmlwdGlvbjogJ0NvQzcuVHJhZGl0aW9uYWxDaGluZXNlJyxcbiAgICBkYk5vbmU6ICdub25lJyxcbiAgICBhcm1vck5vbmU6ICdub25lJyxcbiAgICBhdHRhY2tzUGVyUm91bmROb25lOiAnbm9uZScsXG4gICAgc2FuTG9zc05vbmU6ICdub25lJyxcbiAgICBmdWxsZGI6ICcoJyArICdEYW1hZ2UgQm9udXN8REJ85YK35a6z5Yqg5YC8JyArICcpJyxcbiAgICAvKiBORVcgS0VZIEJFTE9XIC0gVFJBTlNMQVRJT04gUkVRVUlSRUQgKi9cbiAgICBoYWxmZGI6ICcoJyArICfCvXxoYWxmJyArICcpJyxcbiAgICBzZWN0aW9uQ29tYmF0czpcbiAgICAgICdcXG4oPzonICsgJ2NvbWJhdHxmaWdodGluZyBhdHRhY2tzfOaIsOmspeaKgOiDvXzmiLDprKXliJfooah85q2m5ZmoJyArICcpWzpcXG5dJyxcbiAgICBuZXdDb21iYXRIZWFkZXI6ICdcXG4nICsgJ0NvbWJhdCcgKyAnXFxuJyxcbiAgICBzZWN0aW9uU2tpbGxzOlxuICAgICAgJ1xcbig/OicgKyAnKD86U2tpbGxzfOaKgOiDveWIl+ihqCknICsgJyg/OlxcXFxzKlxcXFwoW15cXFxcKV0rXFxcXCkpPylbOlxcbl0nLFxuICAgIHNlY3Rpb25MYW5nYXVnZXM6ICdcXG4oPzonICsgJ0xhbmd1YWdlc3zoqp7oqIAnICsgJylbOlxcbl0nLFxuICAgIHNlY3Rpb25TcGVsbHM6ICdcXG4oPzonICsgJ3NwZWxsc3zlkpLmlofliJfooah85ZKS5paHJyArICcpWzpcXG5dJyxcbiAgICBoYW5kZ3VuOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAnIOmBgueZvOanjXxcXFxcLjIy55+t5Y+j6Ieq5YuV5omL5qeNfFxcXFwuMjXnn63lj6PmiYvmp40o5Zau566hKXxcXFxcLjMy5oiWN1xcXFwuNjVtbeW3pui8quaJi+anjXxcXFxcLjMy5oiWN1xcXFwuNjVtbeiHquWLleaJi+anjXxcXFxcLjM1NyBNYWdudW3lt6bovKrmiYvmp418XFxcXC4zOOaIljltbeW3pui8quaJi+anjXxcXFxcLjM46Ieq5YuV5omL5qeNfOiynembt+WhlE05fOagvOa0m+WFizE3fDltbeiHquWLleaJi+anjXzpra/moLxQMDh8XFxcXC40MeW3pui8quaJi+anjXxcXFxcLjQ06aas5qC85Y2X5bem6Lyq5omL5qeNfFxcXFwuNDXlt6bovKrmiYvmp418XFxcXC40NeiHquWLleaJi+anjXzmspnmvKDkuYvpt7l8R3VufFJldm9sdmVyfFBpc3RvbHxIYW5kZ3VufERlcnJpbmdlcnxCZXJldHRhfEx1Z2VyfERlc2VydCBFYWdsZXwgXFxcXC4zOCcgK1xuICAgICAgJyknLFxuICAgIHJpZmxlOlxuICAgICAgJyg/PHR5cGU+JyArXG4gICAgICAn5q2l5qeNfOWNoeizk+anjXzljYroh6rli5XmraXmp41854216LGh5qeNfFJpZmxlfFNob3RndW58Q2FyYmluZXxHYXVnZSB8TGVlLUVuZmllbGR8RWxlcGhhbnQnICtcbiAgICAgICcpJyxcbiAgICBzbWI6ICcoPzx0eXBlPicgKyAnU3VibWFjaGluZSBHdW58VGhvbXBzb2586KGd6YuS5qeNJyArICcpJyxcbiAgICBtYWNoaW5lR3VuOiAnKD88dHlwZT4nICsgJ0Jyb3duaW5nfFZpY2tlcnN85qmf5qeNJyArICcpJyxcbiAgICBsYXVuY2hlZDogJyg/PHR5cGU+JyArICdNb2xvdG92fEdyZW5hZGV8RHluYW1pdGXniIbngrjnial85omL5qa05b2IfOmHjeatpuWZqCcgKyAnKScsXG4gICAgZXhhbXBsZTpcbiAgICAgICfnpLrnr4Top5LoibIsIOW5tOm9oSAyN1xcbuWKm+mHjyA3NSDpq5Tos6ogNjAg6auU5Z6LIDgwIOaVj+aNtyA3MCDlpJboso4gNjAg5pm65YqbIDgwXFxu5oSP5b+XIDUwIOaVmeiCsiA4NSBTQU4gNTUgSFAgMTQgREI6IDFENFxcbumrlOagvDogMSBNb3ZlOiA3IE1QOiAxMCDlubjpgYs6IDQwIOitt+eUsjogMVxcbuaUu+aTiuasoeaVuDogMyDnkIbmmbrllqrlpLE6IDFkNC8xZDhcXG7miLDprKXliJfooahcXG7lkqwgNTAlICgyNS8xMCksIOWCt+WusyAxRDZcXG7nqbrmiYsgMzAlICgxNS82KSwg5YK35a6zIDFEM1xcbuaJi+anjSA0MCUgKDIwLzgpLCDlgrflrrMgMUQ4KzFcXG7ploPpgb8gNTAlICgyNS8xMClcXG7mioDog73liJfooahcXG7li5XnianpprTppIogNTUlLCDlj5bmgoUgMzAlLCDmgKXmlZEgMjUlLCDmvZvooYwgMjAlLFxcbuiBhuiBvSA1MCUsIOiXpeWtuCA0NSUsIOeyvuelnuWIhuaekCAyNSUsIOW/g+eQhuWtuCA3NSUsXFxu56eR5a24ICjlj7jms5Xnp5HlrbgpIDkwJSwg56eR5a24ICjlr4bnorzlrbgpIDM1JSwgXFxu5YG15p+lIDM1JSwg5Zas6KOdIDEwJVxcbuiqnuiogDog57K16KqeIDgwJSwg6K6A5ZSHIDUlLlxcbuWSkuaWhzog5Y+s5ZaaIE5QQywg5oyH5o+uIE5QQy4nXG4gIH1cbn1cblxuY29uc3QgdHJhbnNsYXRpb25zID0ge1xuICBlbjoge1xuICAgIGFnZTogJyg/PCFbYS16XSknICsgJ2FnZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOlxuICAgICAgJ1ssXFxcXHNdKicgKyAnT2NjdXBhdGlvbicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVFInICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT04nICsgJyhcXFxccyo6KT9cXFxccyooPzxjb24+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzaXo6ICcoPzwhW2Etel0pJyArICdTSVonICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1cnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdERVgnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdBUFAnICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IVthLXpdKSg/OicgKyAnU0FOfFNhbml0eScgKyAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArICdIUHxIaXQgcG9pbnRzJyArICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ01QfE1hZ2ljIHBvaW50cycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmVuLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RFxcXFxkKyk/fCcgK1xuICAgICAga2V5cy5lbi5kYk5vbmUgK1xuICAgICAgJylbLFxcXFxzXFxuXSonLFxuICAgIGJ1aWxkOiAnKD88IVthLXpdKScgKyAnQnVpbGQnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm1vcicgK1xuICAgICAgJyhcXFxccyo6KT9cXFxccysoPzxhcm1vcj4nICtcbiAgICAgIGtleXMuZW4uYXJtb3JOb25lICtcbiAgICAgICd8XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbW92OiAnKD88IVthLXpdKScgKyAnTW92ZScgKyAnKFxcXFxzKjopP1xcXFxzKig/PG1vdj5cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBsY2s6ICcoPzwhW2Etel0pJyArICdMdWNrJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdHRhY2tzIHBlciByb3VuZHwjIEF0dGFja3MnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZW4uYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU2FuaXR5IGxvc3N8U0FOIGxvc3MnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmVuLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGREP1srXFxcXGRdKlxcXFwvXFxcXGREP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdkYW1hZ2UnICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmVuLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0RvZGdlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIC8vIFNraWxsIHNob3VsZCBub3QgYmUgbmFtZWQgXCJUaGUgcGxheWVyIGhhc1wiIC8gXCJidXQgdGhleSByZWdlbmVyYXRlXCIgcmVxdWlyZWQgZm9yIFwiQSBDb2xkIEZpcmUgV2l0aGluXCJcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6ICcoXnwoPzwhLClcXG4pKCcgKyAnRmlnaHRpbmd8RmlyZWFybXN8QnJhd2x8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lbi5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVuLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZW4uc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZGU6IHtcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdBbHRlcicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGFnZT5cXFxcZCspWyxcXFxcc10qJyxcbiAgICBvY2N1cGF0aW9uOiAnWyxcXFxcc10qJyArICdCZXJ1ZicgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0tPJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnR1InICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ01BJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnR0UnICsgJyhcXFxccyo6KT9cXFxccyooPzxkZXg+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhcHA6ICcoPzwhW2Etel0pJyArICdFUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0JJJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdnU3xTVEF8R2Vpc3RpZ2UgU3RhYmlsaXTDpHQnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdUUHxUcmVmZmVycHVua3RlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNUHxNYWdpZXB1bmt0ZScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLmRlLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RHxXXFxcXGQrKT98JyArXG4gICAgICBrZXlzLmRlLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1N0YXR1cnxTdGF0LicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pJyArXG4gICAgICAnUGFuemVydW5nJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5kZS5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0JXfEJld2VndW5nc3dlaXRlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnR2zDvGNrJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBbmdyaWZmZSBwcm8gUnVuZGV8QW5ncmlmZmV8UHJvIFJ1bmRlJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmRlLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1N0YWJpbGl0w6R0c3Zlcmx1c3QnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLmRlLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGRbRFddP1srXFxcXGRdKlxcXFwvXFxcXGRbRFddP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdTY2hhZGVuJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQrd3xkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmRlLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2R8dyk/XFxcXGQrKSopKylcXFxcKT8nLFxuICAgIHdlYXBvbkRvZGdlOlxuICAgICAgJyg/PG5hbWU+JyArXG4gICAgICAnQXVzd2VpY2hlbicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICAvLyBTa2lsbCBzaG91bGQgbm90IGJlIG5hbWVkIFwiVGhlIHBsYXllciBoYXNcIiAvIFwiYnV0IHRoZXkgcmVnZW5lcmF0ZVwiIHJlcXVpcmVkIGZvciBcIkEgQ29sZCBGaXJlIFdpdGhpblwiXG4gICAgc2tpbGw6XG4gICAgICAnXig/PG5hbWU+WzpcXFxcKi5cXFxccycgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKD88IScgK1xuICAgICAgJ1RoZSBwbGF5ZXIgaGFzfGJ1dCB0aGV5IHJlZ2VuZXJhdGUnICtcbiAgICAgICcpKVxcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVteZF0lP1xcXFwpPyhcXFxccypcXFxcKFxcXFxkKy9cXFxcZCtcXFxcKSk/W1xcXFwuLDtdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgK1xuICAgICAgJ0FuZ3JpZmZlfEhhbmRnZW1lbmdlfE5haGthbXBmfEZhdXN0ZmV1ZXJ3YWZmZXxCZWnDn2VuJyArXG4gICAgICAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5kZS5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmRlLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZGUuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgcGw6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKScgKyAnXFxcXHMrKD86JyArICdsYXRhfGxhdHxyb2snICsgJylbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246ICdbLFxcXFxzXSonICsgJ1phd8OzZCcgKyAnKFxcXFxzKjopP1xcXFxzKyg/PG9jY3VwYXRpb24+LispWyxcXFxcc1xcbl0qJyxcbiAgICBzdHI6ICcoPzwhW2Etel0pJyArICdTJyArICcoXFxcXHMqOik/XFxcXHMqKD88c3RyPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgY29uOiAnKD88IVthLXpdKScgKyAnS09OJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnQkMnICsgJyhcXFxccyo6KT9cXFxccyooPzxzaXo+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBpbnQ6ICcoPzwhW2Etel0pJyArICdJTlQnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdNT0MnICsgJyhcXFxccyo6KT9cXFxccyooPzxwb3c+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkZXg6ICcoPzwhW2Etel0pJyArICdaUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ1dZRycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ1dZSycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUHxQb2N6eXRhbG5vxZvEhycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BXfFB1bmt0eSBXeXRyenltYcWCb8WbY2knICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BNfFB1bmt0eSBNYWdpaScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88bXA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBkYjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICBrZXlzLnBsLmZ1bGxkYiArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxkYj5bKy1dP1xcXFxkKyg/OmRcXFxcZCt8RHxLXFxcXGQrKT98JyArXG4gICAgICBrZXlzLnBsLmRiTm9uZSArXG4gICAgICAnKVssXFxcXHNcXG5dKicsXG4gICAgYnVpbGQ6ICcoPzwhW2Etel0pJyArICdLcnplcGEnICsgJyhcXFxccyo6KT9cXFxccysoPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdQYW5jZXJ6JyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5wbC5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdSdWNoJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ1N6Y3rEmcWbY2llJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdGFraSB3IHJ1bmR6aWV8IyBBdGFraScgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88YXR0YWNrc1BlclJvdW5kPicgK1xuICAgICAga2V5cy5wbC5hdHRhY2tzUGVyUm91bmROb25lICtcbiAgICAgICd8XFxcXGQrKD8hZCkpWyxcXFxcc1xcbl0qJyxcbiAgICBzYW5Mb3NzOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdVdHJhdGEgUG9jenl0YWxub8WbY2l8dXRyYXRhIFAnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PHNhbkxvc3M+JyArXG4gICAgICBrZXlzLnBsLnNhbkxvc3NOb25lICtcbiAgICAgICd8XFxcXGRbREtdP1srXFxcXGRdKlxcXFwvXFxcXGRbREtdP1srXFxcXGRdKilbLFxcXFxzXFxuXSonLFxuICAgIHdlYXBvbjpcbiAgICAgICcoXnxcXFxcbikoPzxuYW1lPlsuXFxcXHQgJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSspKFxcXFwqKiw/XFxcXHMrfFxcXFwqKSg/OlxcXFwofCg/PHBlcmNlbnRhZ2U+XFxcXGQrKSUsPyg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKVxcXFxzKiw/KT8pPyhcXFxccyonICtcbiAgICAgICdvYnJhxbxlbmlhJyArXG4gICAgICAnKT9cXFxccysoPzxkYW1hZ2U+KDo/KDo/XFxcXGQra3xkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLnBsLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ1VuaWsnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiUoPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXCkpPycsXG4gICAgLy8gU2tpbGwgc2hvdWxkIG5vdCBiZSBuYW1lZCBcIlRoZSBwbGF5ZXIgaGFzXCIgLyBcImJ1dCB0aGV5IHJlZ2VuZXJhdGVcIiByZXF1aXJlZCBmb3IgXCJBIENvbGQgRmlyZSBXaXRoaW5cIlxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnV2Fsa2F8QnJvxYQgUGFsbmF8QmlqYXR5a2F8VWdyeXppZW5pZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5wbC5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLnBsLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMucGwuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZnI6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKVxcXFxzKicgKyAnYW5zJyArICcoPyFbYS16XSlbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ0ZPUicgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1RBSScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFWCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQUCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ8OJRFUnICsgJyhcXFxccyo6KT9cXFxccyooPzxlZHU+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBzYW46XG4gICAgICAnKD88IShbYS16XXxkZVxcXFxzKSkoPzonICtcbiAgICAgICdTQU58U2FudMOpIE1lbnRhbGUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PHNhbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGhwOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQVnxQb2ludHMgZGUgdmllJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdQTXxQb2ludHMgZGUgbWFnaWUnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5mci5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZnIuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICdDYXJydXJlJyArICcoXFxcXHMqOik/XFxcXHMrKD88YnVpbGQ+WystXT9cXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBhcm1vcjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnQXJtdXJlfFByb3RlY3Rpb24nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5mci5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ012dHxNb3V2ZW1lbnR8RMOpcGxhY2VtZW50JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnQ2hhbmNlJyArICcoXFxcXHMqOik/XFxcXHMrKD88bGNrPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgYXR0YWNrc1BlclJvdW5kOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdBdHRhcXVlcyBwYXIgcm91bmQnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXMuZnIuYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUGVydGUgZGUgU2FudMOpIG1lbnRhbGV8UGVydGUgZGUgU0FOJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5mci5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqKD86JyArXG4gICAgICAnZG9tbWFnZXxkw6lnw6J0cycgK1xuICAgICAgJykpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmZyLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0VzcXVpdmVyPycgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspXFxcXCk/XFxcXHMqJSg/OlxcXFxzKlxcXFwoXFxcXGQrXFxcXC9cXFxcZCtcXFxcKSk/JyxcbiAgICBza2lsbDpcbiAgICAgICdeKD88bmFtZT5bOlxcXFwqLlxcXFxzJyArXG4gICAgICBuYW1lQ2hhcmFjdGVycyArXG4gICAgICAnXSsoPzwhJyArXG4gICAgICAnVGhlIHBsYXllciBoYXN8YnV0IHRoZXkgcmVnZW5lcmF0ZScgK1xuICAgICAgJykpXFxcXHMrXFxcXCg/KD88cGVyY2VudGFnZT5cXFxcZCspW15kXSU/XFxcXCk/KFxcXFxzKlxcXFwoXFxcXGQrL1xcXFxkK1xcXFwpKT9bXFxcXC4sXT9cXFxccyonLFxuICAgIGd1ZXNzU3RhcnRDb21iYXQ6XG4gICAgICAnKF58KD88ISwpXFxuKSgnICsgJ0F1IGNvbnRhY3R8w4AgZGlzdGFuY2V8Q29tYmF0IHJhcHByb2Now6l8Qml0ZScgKyAnKScsXG4gICAgbmFtZTogJ14oPzxuYW1lPltcXFxcLlxcXFxzJyArIG5hbWVDaGFyYWN0ZXJzICsgJ10rKVssXFxcXHNcXG5dKycsXG4gICAgc2VjdGlvbnM6XG4gICAgICAnKCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uQ29tYmF0cyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5mci5zZWN0aW9uU2tpbGxzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmZyLnNlY3Rpb25MYW5nYXVnZXMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZnIuc2VjdGlvblNwZWxscyArXG4gICAgICAnKSdcbiAgfSxcbiAgZXM6IHtcbiAgICBhZ2U6ICcoPzxhZ2U+XFxcXGQrKVxcXFxzKicgKyAnYVvDscORXW9zJyArICcoPyFbYS16XSlbLFxcXFxzXSonLFxuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY3VwYWNpw7NuJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ0ZVRScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHN0cj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGNvbjogJyg/PCFbYS16XSknICsgJ0NPTicgKyAnKFxcXFxzKjopP1xcXFxzKig/PGNvbj5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNpejogJyg/PCFbYS16XSknICsgJ1RBTScgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PGludD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHBvdzogJyg/PCFbYS16XSknICsgJ1BPRCcgKyAnKFxcXFxzKjopP1xcXFxzKig/PHBvdz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGRleDogJyg/PCFbYS16XSknICsgJ0RFUycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQQScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGFwcD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGVkdTogJyg/PCFbYS16XSknICsgJ0VEVScgKyAnKFxcXFxzKjopP1xcXFxzKig/PGVkdT5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbjpcbiAgICAgICcoPzwhW2Etel0pKD86JyArICdDT1J8Q29yZHVyYScgKyAnKShcXFxccyo6KT9cXFxccyooPzxzYW4+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBocDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnUFZ8UHVudG9zIGRlIHZpZGF8UFxcXFwuID9WXFxcXC4nICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PGhwPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgbXA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1BNfFB1bnRvcyBNw6FnaWNvc3xQdW50b3MgZGUgTWFnaWEnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKyg/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5cy5lcy5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMrKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXMuZXMuZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICdDb3JwdWxlbmNpYScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGJ1aWxkPlsrLV0/XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgYXJtb3I6XG4gICAgICAnKD88IVthLXpdKScgK1xuICAgICAgJ0FybWFkdXJhJyArXG4gICAgICAnKFxcXFxzKjopP1xcXFxzKyg/PGFybW9yPicgK1xuICAgICAga2V5cy5lcy5hcm1vck5vbmUgK1xuICAgICAgJ3xcXFxcZCspWyxcXFxcc1xcbl0qJyxcbiAgICBtb3Y6ICcoPzwhW2Etel0pJyArICdNb3ZpbWllbnRvJyArICcoXFxcXHMqOik/XFxcXHMqKD88bW92PlxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGxjazogJyg/PCFbYS16XSknICsgJ1N1ZXJ0ZScgKyAnKFxcXFxzKjopP1xcXFxzKyg/PGxjaz5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGF0dGFja3NQZXJSb3VuZDpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnTsO6bWVybyBkZSBBdGFxdWVzJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxhdHRhY2tzUGVyUm91bmQ+JyArXG4gICAgICBrZXlzLmVzLmF0dGFja3NQZXJSb3VuZE5vbmUgK1xuICAgICAgJ3xcXFxcZCsoPyFkKSlbLFxcXFxzXFxuXSonLFxuICAgIHNhbkxvc3M6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ1DDqXJkaWRhIGRlIGNvcmR1cmF8UMOpcmRpZGEgZGUgQ09SJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccysoPzxzYW5Mb3NzPicgK1xuICAgICAga2V5cy5lcy5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqJyArXG4gICAgICAnZGHDsW8nICtcbiAgICAgICcpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzLmVzLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0VzcXVpdmFyJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylcXFxcKT9cXFxccyolKD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDpcbiAgICAgICcoXnwoPzwhLClcXG4pKCcgKyAnQ29tYmF0aXJ8QXJtYXMgZGUgZnVlZ298UGVsZWF8TW9yZGlzY28nICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXMuZXMuc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5cy5lcy5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzLmVzLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH0sXG4gICd6aC1UVyc6IHtcbiAgICBhZ2U6ICcoPzwhW2Etel0pJyArICdhZ2V85bm06b2hJyArICcoXFxcXHMqOik/XFxcXHMqKD88YWdlPlxcXFxkKylbLFxcXFxzXSonLFxuICAgIC8qIE5FVyBLRVkgQkVMT1cgLSBUUkFOU0xBVElPTiBSRVFVSVJFRCAqL1xuICAgIG9jY3VwYXRpb246XG4gICAgICAnWyxcXFxcc10qJyArICdPY2N1cGF0aW9uJyArICcoXFxcXHMqOik/XFxcXHMrKD88b2NjdXBhdGlvbj4uKylbLFxcXFxzXFxuXSonLFxuICAgIHN0cjogJyg/PCFbYS16XSknICsgJ1NUUnzlipvph48nICsgJyhcXFxccyo6KT9cXFxccyooPzxzdHI+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBjb246ICcoPzwhW2Etel0pJyArICdDT0586auU6LOqJyArICcoXFxcXHMqOik/XFxcXHMqKD88Y29uPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2l6OiAnKD88IVthLXpdKScgKyAnU0lafOmrlOWeiycgKyAnKFxcXFxzKjopP1xcXFxzKig/PHNpej5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGludDogJyg/PCFbYS16XSknICsgJ0lOVHzmmbrlipsnICsgJyhcXFxccyo6KT9cXFxccyooPzxpbnQ+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBwb3c6ICcoPzwhW2Etel0pJyArICdQT1d85oSP5b+XJyArICcoXFxcXHMqOik/XFxcXHMqKD88cG93PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGV4OiAnKD88IVthLXpdKScgKyAnREVYfOaVj+aNtycgKyAnKFxcXFxzKjopP1xcXFxzKig/PGRleD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIGFwcDogJyg/PCFbYS16XSknICsgJ0FQUHzlpJboso4nICsgJyhcXFxccyo6KT9cXFxccyooPzxhcHA+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBlZHU6ICcoPzwhW2Etel0pJyArICdFRFV85pWZ6IKyJyArICcoXFxcXHMqOik/XFxcXHMqKD88ZWR1PlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgc2FuOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdTQU58U2FuaXR5fOeQhuaZuicgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88c2FuPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgaHA6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0hQfEhpdCBwb2ludHN855Sf5ZG9JyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxocD5cXFxcZCt8LSlbLFxcXFxzXFxuXSonLFxuICAgIG1wOlxuICAgICAgJyg/PCFbYS16XSkoPzonICtcbiAgICAgICdNUHxNYWdpYyBwb2ludHMnICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PG1wPlxcXFxkK3wtKVssXFxcXHNcXG5dKicsXG4gICAgZGI6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAga2V5c1snemgtVFcnXS5mdWxsZGIgK1xuICAgICAgJykoXFxcXHMqOik/XFxcXHMqKD88ZGI+WystXT9cXFxcZCsoPzpkXFxcXGQrfERcXFxcZCspP3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uZGJOb25lICtcbiAgICAgICcpWyxcXFxcc1xcbl0qJyxcbiAgICBidWlsZDpcbiAgICAgICcoPzwhW2Etel0pJyArICdCdWlsZHzpq5TmoLwnICsgJyhcXFxccyo6KT9cXFxccyooPzxidWlsZD5bKy1dP1xcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIGFybW9yOlxuICAgICAgJyg/PCFbYS16XSknICtcbiAgICAgICdBcm1vcnzorbfnlLInICtcbiAgICAgICcoXFxcXHMqOik/XFxcXHMqKD88YXJtb3I+JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmFybW9yTm9uZSArXG4gICAgICAnfFxcXFxkKylbLFxcXFxzXFxuXSonLFxuICAgIG1vdjogJyg/PCFbYS16XSknICsgJ01vdmUnICsgJyhcXFxccyo6KT9cXFxccyooPzxtb3Y+XFxcXGQrKVssXFxcXHNcXG5dKicsXG4gICAgbGNrOiAnKD88IVthLXpdKScgKyAnTHVja3zlubjpgYsnICsgJyhcXFxccyo6KT9cXFxccyooPzxsY2s+XFxcXGQrfC0pWyxcXFxcc1xcbl0qJyxcbiAgICBhdHRhY2tzUGVyUm91bmQ6XG4gICAgICAnKD88IVthLXpdKSg/OicgK1xuICAgICAgJ0F0dGFja3MgcGVyIHJvdW5kfCMgQXR0YWNrc3zmlLvmk4rmrKHmlbh8IyDmlLvmk4onICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzKig/PGF0dGFja3NQZXJSb3VuZD4nICtcbiAgICAgIGtleXNbJ3poLVRXJ10uYXR0YWNrc1BlclJvdW5kTm9uZSArXG4gICAgICAnfFxcXFxkKyg/IWQpKVssXFxcXHNcXG5dKicsXG4gICAgc2FuTG9zczpcbiAgICAgICcoPzwhW2Etel0pKD86JyArXG4gICAgICAnU2FuaXR5IGxvc3N8U0FOIGxvc3N855CG5pm65Zaq5aSxfFNBTuWAvOaQjeWksXxTQU7lgLzllqrlpLF85omjU0FOJyArXG4gICAgICAnKShcXFxccyo6KT9cXFxccyooPzxzYW5Mb3NzPicgK1xuICAgICAga2V5c1snemgtVFcnXS5zYW5Mb3NzTm9uZSArXG4gICAgICAnfFxcXFxkRD9bK1xcXFxkXSpcXFxcL1xcXFxkRD9bK1xcXFxkXSopWyxcXFxcc1xcbl0qJyxcbiAgICB3ZWFwb246XG4gICAgICAnKF58XFxcXG4pKD88bmFtZT5bLlxcXFx0ICcgK1xuICAgICAgbmFtZUNoYXJhY3RlcnMgK1xuICAgICAgJ10rKShcXFxcKiosP1xcXFxzK3xcXFxcKikoPzpcXFxcKHwoPzxwZXJjZW50YWdlPlxcXFxkKyklLD8oPzpcXFxccypcXFxcKFxcXFxkK1xcXFwvXFxcXGQrXFxcXClcXFxccyosPyk/KT8oXFxcXHMqKD86JyArXG4gICAgICAnZGFtYWdlfOWCt+WusycgK1xuICAgICAgJykpP1xcXFxzKyg/PGRhbWFnZT4oOj8oOj9cXFxcZCtkKT9cXFxcZCsoXFxcXHMqL1xcXFxzKnxcXFxccypbKy1dXFxcXHMqKD86JyArXG4gICAgICBrZXlzWyd6aC1UVyddLmZ1bGxkYiArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5oYWxmZGIgK1xuICAgICAgJylcXFxccyp8XFxcXHMqWystXVxcXFxzKig6P1xcXFxkK2QpP1xcXFxkKykqKSspXFxcXCk/JyxcbiAgICB3ZWFwb25Eb2RnZTpcbiAgICAgICcoPzxuYW1lPicgK1xuICAgICAgJ0RvZGdlfOmWg+mBv3zploPourInICtcbiAgICAgICcpKFxcXFxzKjopP1xcXFxzK1xcXFwoPyg/PHBlcmNlbnRhZ2U+XFxcXGQrKVxcXFwpP1xcXFxzKiU/KD86XFxcXHMqXFxcXChcXFxcZCtcXFxcL1xcXFxkK1xcXFwpKT8nLFxuICAgIHNraWxsOlxuICAgICAgJ14oPzxuYW1lPls6XFxcXCouXFxcXHMnICtcbiAgICAgIG5hbWVDaGFyYWN0ZXJzICtcbiAgICAgICddKyg/PCEnICtcbiAgICAgICdUaGUgcGxheWVyIGhhc3xidXQgdGhleSByZWdlbmVyYXRlJyArXG4gICAgICAnKSlcXFxccytcXFxcKD8oPzxwZXJjZW50YWdlPlxcXFxkKylbXmRdJT9cXFxcKT8oXFxcXHMqXFxcXChcXFxcZCsvXFxcXGQrXFxcXCkpP1tcXFxcLixdP1xcXFxzKicsXG4gICAgZ3Vlc3NTdGFydENvbWJhdDogJyhefCg/PCEsKVxcbikoJyArICfov5HmiLDmioDog7185bCE5pOK5oqA6IO9fEJyYXdsfEJpdGUnICsgJyknLFxuICAgIG5hbWU6ICdeKD88bmFtZT5bXFxcXC5cXFxccycgKyBuYW1lQ2hhcmFjdGVycyArICddKylbLFxcXFxzXFxuXSsnLFxuICAgIHNlY3Rpb25zOlxuICAgICAgJygnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvbkNvbWJhdHMgK1xuICAgICAgJ3wnICtcbiAgICAgIGtleXNbJ3poLVRXJ10uc2VjdGlvblNraWxscyArXG4gICAgICAnfCcgK1xuICAgICAga2V5c1snemgtVFcnXS5zZWN0aW9uTGFuZ2F1Z2VzICtcbiAgICAgICd8JyArXG4gICAgICBrZXlzWyd6aC1UVyddLnNlY3Rpb25TcGVsbHMgK1xuICAgICAgJyknXG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIENvQzdBY3RvckltcG9ydGVyUmVnRXhwIHtcbiAgc3RhdGljIGNoZWNrTGFuZ3VhZ2UgKGxhbmcgPSBudWxsKSB7XG4gICAgaWYgKCFsYW5nKSB7XG4gICAgICBsYW5nID0gZ2FtZS5pMThuLmxhbmdcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0cmFuc2xhdGlvbnNbbGFuZ10gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBsYW5nID0gJ2VuJ1xuICAgIH1cbiAgICByZXR1cm4gbGFuZ1xuICB9XG5cbiAgc3RhdGljIGdldEV4YW1wbGVUZXh0IChsYW5nKSB7XG4gICAgbGV0IGV4YW1wbGUgPSBrZXlzLmVuLmV4YW1wbGVcbiAgICBpZiAodHlwZW9mIGtleXNbbGFuZ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBleGFtcGxlID0ga2V5c1tsYW5nXS5leGFtcGxlXG4gICAgfVxuICAgIHJldHVybiBleGFtcGxlXG4gIH1cblxuICBzdGF0aWMgZ2V0VHJhbnNsYXRpb25zICgpIHtcbiAgICBjb25zdCBvdXRwdXQgPSB7fVxuICAgIGZvciAoY29uc3Qga2V5IGluIGtleXMpIHtcbiAgICAgIG91dHB1dFtrZXldID0ga2V5c1trZXldLmRlc2NyaXB0aW9uXG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxuXG4gIHN0YXRpYyBnZXRLZXlzIChsYW5nKSB7XG4gICAgcmV0dXJuIGtleXNbbGFuZ10gfHwga2V5cy5lblxuICB9XG5cbiAgc3RhdGljIGdldFJlZ3VsYXJFeHByZXNzaW9ucyAobGFuZykge1xuICAgIHJldHVybiB0cmFuc2xhdGlvbnNbbGFuZ10gfHwgdHJhbnNsYXRpb25zLmVuXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBY3RvciwgQ09ORklHLCBkdXBsaWNhdGUsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCB9IGZyb20gJy4vYWN0b3ItaW1wb3J0ZXItcmVnZXhwLmpzJ1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW1zL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIENvQzdBY3RvckltcG9ydGVyIGhlbHBlciBjbGFzcyB0byBpbXBvcnQgYW4gQWN0b3IgZnJvbSB0aGUgcmF3IHRleHQgZGVzY3JpcHRpb24uXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3QWN0b3JJbXBvcnRlciB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLnBhcnNlZCA9IHt9XG4gICAgdGhpcy5pdGVtTG9jYXRpb25zID0gJydcbiAgfVxuXG4gIHN0YXRpYyBnZXQgYXNOdW1iZXIgKCkge1xuICAgIHJldHVybiAnbidcbiAgfVxuXG4gIHN0YXRpYyBnZXQgYXNTdHJpbmcgKCkge1xuICAgIHJldHVybiAncydcbiAgfVxuXG4gIC8qKlxuICAgKiBnZXRSZWdFeCwgZ2V0IFJlZ0V4cCBvYmplY3QgaWYgbm90IGN1cnJlbnRseSBhIFJlZ0V4cCBvYmplY3RcbiAgICogQHBhcmFtIHtNaXhlZH0gcmVnZXggUmVnRXhwIG9yIHN0cmluZ1xuICAgKiBAcGFyYW0ge1N0cmluZ30gbW9kaWZpZXJzIGlmIHN0cmluZyB3YXMgc3VwcGxpZWQgaW4gcmVnZXggbGlzdCBvZiBtb2RpZmllcnMgdG8gYWRkIHRvIHRoZSBSZWdFeHBcbiAgICogQHJldHVybnMge1JlZ0V4cH1cbiAgICovXG4gIGdldFJlZ0V4IChyZWdleCwgbW9kaWZpZXJzID0gJ2l1Jykge1xuICAgIGlmIChyZWdleC5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ1JlZ0V4cCcpIHtcbiAgICAgIHJldHVybiByZWdleFxuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlZ0V4cChyZWdleCwgbW9kaWZpZXJzKVxuICB9XG5cbiAgLyoqXG4gICAqIGNsZWFuU3RyaW5nLCByZW1vdmVzIG5ldyBsaW5lIGFuZCBjYXJyaWVyIHJldHVybiBjaGFyYWN0ZXIgYW5kIGxhdGVyYWwgc3BhY2VzIGZyb20gYSBzdHJpbmdcbiAgICogQHBhcmFtIHtTdHJpbmd9IHMgdGhlIHN0cmluZyB0byBjbGVhblxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgY2xlYW5lZCBzdHJpbmdcbiAgICovXG4gIGNsZWFuU3RyaW5nIChzKSB7XG4gICAgcmV0dXJuIHNcbiAgICAgIC5yZXBsYWNlKC8oXFxufFxccikvZywgJyAnKVxuICAgICAgLnJlcGxhY2UoL15cXHMqLywgJycpXG4gICAgICAucmVwbGFjZSgvXFxzKlxcLj9cXHMqXFwuPyQvLCAnJylcbiAgfVxuXG4gIC8qKlxuICAgKiB0cmFuc2xhdGVSb2xsLCB0cmFuc2xhdGVzIGxhbmd1YWdlIHNwZWNpZmljIHNob3J0Zm9ybSBvZiBkaWNlIChEKSBpbiByb2xsc1xuICAgKiBFeGFtcGxlIGZvciBHZXJtYW4gcm9sbHM6IDFXNCA9PiAxRDQuXG4gICAqIERpY2Ugc2hvcnRmb3JtIGlzIGNvbmZpZ3VyZWQgdXNpbmcga2V5cy5kaWNlU2hvcnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHMgdGhlIHJvbGwgdG8gYmUgdHJhbnNsYXRlZFxuICAgKiBAcmV0dXJucyB7U3RyaW5nfSB0aGUgdHJhbnNsYXRlZCByb2xsXG4gICAqL1xuICB0cmFuc2xhdGVSb2xsIChzKSB7XG4gICAgaWYgKHR5cGVvZiBzID09PSAndW5kZWZpbmVkJykgcmV0dXJuIHNcbiAgICBpZiAodHlwZW9mIHRoaXMua2V5cy5kaWNlU2hvcnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCByZWdFeCA9IG5ldyBSZWdFeHAoXG4gICAgICAgICcoPzxuMT5cXFxcZCspJyArIHRoaXMua2V5cy5kaWNlU2hvcnQgKyAnKD88bjI+XFxcXGQrKScsXG4gICAgICAgICdpdWcnXG4gICAgICApXG4gICAgICByZXR1cm4gcy5yZXBsYWNlKHJlZ0V4LCAnJDxuMT5EJDxuMj4nKVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiB0b0hUTUwsIGNvbnZlcnRzIGEgc3RyaW5nIHRvIEhUTUwgc3RyaXBpbmcgb3V0IGVtcHR5IGxpbmVzIG9yIGxpbmVzIHRoYXQgY29udGFpbiBqdXN0ICwgb3IgLlxuICAgKiBAcGFyYW0ge1N0cmluZ30gcyB0aGUgc3RyaW5nIHRvIGNvbnZlcnRcbiAgICogQHJldHVybnMge1N0cmluZ30gdGhlIEhUTUwgb3IgYW4gZW1wdHkgc3RyaW5nXG4gICAqL1xuICB0b0hUTUwgKHMpIHtcbiAgICBpZiAocy50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgcyA9IHNcbiAgICAgIC50cmltKClcbiAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgIC5tYXAodGV4dCA9PiB0ZXh0LnRyaW0oKS5yZXBsYWNlKC9eWywuXFxzXSskLywgJycpKVxuICAgICAgLmZpbHRlcih0ZXh0ID0+IHRleHQpXG4gICAgICAuam9pbignPC9wPjxwPicpXG4gICAgaWYgKHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gJydcbiAgICB9XG4gICAgcmV0dXJuICc8cD4nICsgcyArICc8L3A+J1xuICB9XG5cbiAgLyoqXG4gICAqIGNoZWNrIGV4cGVjdHMgYSBrZXkgZnJvbSB0aGlzLnJlZ0V4IHdpbGwgYXR0ZW1wdCB0byBtYXRjaCB0aGUgdGV4dFxuICAgKiBAcGFyYW0ge1N0cmluZ30gcmVnRXhLZXkga2V5IGluIHRoaXMucmVnRXhcbiAgICogQHBhcmFtIHtKU09OfVxuICAgKiAtIHJlbW92ZUZyb21UZXh0IHJlbW92ZSBmcm9tIHRoaXMudGV4dFxuICAgKiAtIHNhdmVLZXlzIGFkZCBncm91cCBrZXlzIHRvIHRoaXMucGFyc2VkXG4gICAqIC0gdHlwZSBJZiBhZGRpbmcgd2l0aCBzYXZlS2V5cyBzZXQgdHlwZSAoQ29DN0FjdG9ySW1wb3J0ZXIuYXNTdHJpbmcgLyBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlcilcbiAgICogLSB0ZXh0IElmIHNldCB1c2UgdGhpcyBpbnN0ZWFkIG9mIHRoaXMudGV4dFxuICAgKiAtIHJlcXVpcmVkR3JvdXAgSWYgbm90IGZhbHNlIHJlcXVpcmUgc3BlY2lmaWVkIGtleSBpbiBSZWdFeHAgZ3JvdXBzXG4gICAqIEByZXR1cm5zIHtGYWxzZX0ve0pTT04gZ3JvdXBzICcnIGlzIG1hdGNoZWQgc3RyaW5nfVxuICAgKi9cbiAgY2hlY2sgKFxuICAgIHJlZ0V4S2V5LFxuICAgIHtcbiAgICAgIHJlbW92ZUZyb21UZXh0ID0gdHJ1ZSxcbiAgICAgIHNhdmVLZXlzID0gdHJ1ZSxcbiAgICAgIHR5cGUgPSBDb0M3QWN0b3JJbXBvcnRlci5hc1N0cmluZyxcbiAgICAgIHRleHQgPSBmYWxzZSxcbiAgICAgIHJlcXVpcmVkR3JvdXAgPSBmYWxzZVxuICAgIH0gPSB7fVxuICApIHtcbiAgICBsZXQgb3V0cHV0ID0gZmFsc2VcbiAgICBsZXQgcmVnRXhwID0gZmFsc2VcbiAgICBpZiAodHlwZW9mIHRoaXMucmVnRXhbcmVnRXhLZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmVnRXhwID0gdGhpcy5nZXRSZWdFeCh0aGlzLnJlZ0V4W3JlZ0V4S2V5XSlcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLmtleXNbcmVnRXhLZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgcmVnRXhwID0gdGhpcy5nZXRSZWdFeCh0aGlzLmtleXNbcmVnRXhLZXldKVxuICAgIH1cbiAgICBpZiAocmVnRXhwICE9PSBmYWxzZSkge1xuICAgICAgaWYgKHRleHQgPT09IGZhbHNlKSB7XG4gICAgICAgIHRleHQgPSB0aGlzLnRleHRcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNoZWNrID0gcmVnRXhwLmV4ZWModGV4dClcbiAgICAgIGxldCB2YWx1ZSA9IG51bGxcbiAgICAgIGlmIChcbiAgICAgICAgY2hlY2sgIT09IG51bGwgJiZcbiAgICAgICAgKHJlcXVpcmVkR3JvdXAgPT09IGZhbHNlIHx8XG4gICAgICAgICAgdHlwZW9mIChjaGVjay5ncm91cHMgfHwge30pW3JlcXVpcmVkR3JvdXBdICE9PSAndW5kZWZpbmVkJylcbiAgICAgICkge1xuICAgICAgICBvdXRwdXQgPSBjaGVjay5ncm91cHMgfHwge31cbiAgICAgICAgaWYgKHJlbW92ZUZyb21UZXh0KSB7XG4gICAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnJlcGxhY2UoY2hlY2tbMF0udHJpbSgpLCAnXFxuJykudHJpbSgpXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNhdmVLZXlzKSB7XG4gICAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoY2hlY2suZ3JvdXBzKSkge1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgIGNhc2UgQ29DN0FjdG9ySW1wb3J0ZXIuYXNTdHJpbmc6XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZWRba2V5XSA9IFN0cmluZyhjaGVjay5ncm91cHNba2V5XSkucmVwbGFjZSgnXFxuJywgJyAnKVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgIGNhc2UgQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXI6XG4gICAgICAgICAgICAgICAgdmFsdWUgPSBOdW1iZXIoY2hlY2suZ3JvdXBzW2tleV0pXG4gICAgICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgIHRoaXMucGFyc2VkW2tleV0gPSBOdW1iZXIoY2hlY2suZ3JvdXBzW2tleV0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG91dHB1dFsnLXNvdXJjZSddID0gY2hlY2tbMF1cbiAgICAgICAgb3V0cHV0WyctaW5kZXgnXSA9IGNoZWNrLmluZGV4XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxuXG4gIC8qKlxuICAgKiBwcm9jZXNzQ29tYmF0IGV4dHJhY3RzIGNvbWJhdCAvIGRvZGdlIGluZm9ybWF0aW9uIGZyb20gYSBzdWJzZWN0aW9uIG9mIHRleHRcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHQgdGhlIHJhdyB0ZXh0IG9mIHRoZSBjb21iYXQgc2VjdGlvblxuICAgKiBAcmV0dXJucyB2b2lkXG4gICAqL1xuICBwcm9jZXNzQ29tYmF0ICh0ZXh0KSB7XG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmxvZygnY29tYmF0IHRleHQnLCB0ZXh0KVxuICAgIH1cbiAgICBsZXQgd2VhcG9uXG4gICAgbGV0IGRvZGdlXG4gICAgbGV0IG5ld2xpbmVcbiAgICBsZXQgbGFzdFBlcmNlbnQgPSBmYWxzZVxuICAgIGxldCBtYXhMb29wcyA9IDQwXG4gICAgZG8ge1xuICAgICAgbWF4TG9vcHMtLVxuICAgICAgdGV4dCA9IHRleHQudHJpbSgpXG4gICAgICBpZiAoXG4gICAgICAgIChkb2RnZSA9IHRoaXMuY2hlY2soJ3dlYXBvbkRvZGdlJywgeyBzYXZlS2V5czogZmFsc2UsIHRleHQgfSkpXG4gICAgICApIHtcbiAgICAgICAgdGV4dCA9IHRleHQucmVwbGFjZShkb2RnZVsnLXNvdXJjZSddLCAnXFxuJylcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZC5za2lsbHMgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5wYXJzZWQuc2tpbGxzID0gW11cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZC5za2lsbHMucHVzaCh7XG4gICAgICAgICAgbmFtZTogdGhpcy5jbGVhblN0cmluZyhkb2RnZS5uYW1lKSxcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKGRvZGdlLnBlcmNlbnRhZ2UpLFxuICAgICAgICAgIHB1c2g6IGZhbHNlXG4gICAgICAgIH0pXG4gICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAod2VhcG9uID0gdGhpcy5jaGVjaygnd2VhcG9uJywge1xuICAgICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgICB0ZXh0LFxuICAgICAgICAgIHJlcXVpcmVkR3JvdXA6IGxhc3RQZXJjZW50ID09PSBmYWxzZSA/ICdwZXJjZW50YWdlJyA6IGZhbHNlXG4gICAgICAgIH0pKVxuICAgICAgKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2Uod2VhcG9uWyctc291cmNlJ10sICdcXG4nKVxuICAgICAgICBjb25zdCBuYW1lID0gdGhpcy5jbGVhblN0cmluZyh3ZWFwb24ubmFtZSB8fCAnJylcbiAgICAgICAgbGV0IGRhbWFnZSA9IHRoaXMudHJhbnNsYXRlUm9sbCh0aGlzLmNsZWFuU3RyaW5nKHdlYXBvbi5kYW1hZ2UgfHwgJycpKVxuICAgICAgICBjb25zdCBpc1JhbmdlZCA9ICEhKFxuICAgICAgICAgIHRoaXMuY2hlY2soJ2hhbmRndW4nLCB7XG4gICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXG4gICAgICAgICAgfSkgfHxcbiAgICAgICAgICB0aGlzLmNoZWNrKCdyaWZsZScsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ3NtYicsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KSB8fFxuICAgICAgICAgIHRoaXMuY2hlY2soJ21hY2hpbmVHdW4nLCB7XG4gICAgICAgICAgICB0ZXh0OiBuYW1lLFxuICAgICAgICAgICAgcmVtb3ZlRnJvbVRleHQ6IGZhbHNlLFxuICAgICAgICAgICAgc2F2ZUtleXM6IGZhbHNlXG4gICAgICAgICAgfSkgfHxcbiAgICAgICAgICB0aGlzLmNoZWNrKCdsYXVuY2hlZCcsIHtcbiAgICAgICAgICAgIHRleHQ6IG5hbWUsXG4gICAgICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgICAgICBzYXZlS2V5czogZmFsc2VcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIGlmIChcbiAgICAgICAgICB3ZWFwb24ucGVyY2VudGFnZSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiB3ZWFwb24ucGVyY2VudGFnZSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgbGFzdFBlcmNlbnQgPSBOdW1iZXIod2VhcG9uLnBlcmNlbnRhZ2UpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGFzdFBlcmNlbnQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGZvdW5kXG4gICAgICAgIGxldCBhaGRiID0gZmFsc2VcbiAgICAgICAgbGV0IGFkZGIgPSBmYWxzZVxuICAgICAgICBkbyB7XG4gICAgICAgICAgZm91bmQgPSB0aGlzLmdldFJlZ0V4KFxuICAgICAgICAgICAgJ1xcXFxzKlsrLV0/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICB0aGlzLmtleXMuaGFsZmRiICtcbiAgICAgICAgICAgICAgJylcXFxccyooJyArXG4gICAgICAgICAgICAgIHRoaXMua2V5cy5mdWxsZGIgK1xuICAgICAgICAgICAgICAnKT9bLStdP1xcXFxzKignICtcbiAgICAgICAgICAgICAgdGhpcy5wYXJzZWQuZGIucmVwbGFjZSgvXlstK10vLCAnJykgK1xuICAgICAgICAgICAgICAnKT8nXG4gICAgICAgICAgKS5leGVjKGRhbWFnZSlcbiAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgIGFoZGIgPSB0cnVlXG4gICAgICAgICAgICBkYW1hZ2UgPSBkYW1hZ2UucmVwbGFjZShmb3VuZFswXSwgJycpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGZvdW5kID0gdGhpcy5nZXRSZWdFeChcbiAgICAgICAgICAgICAgJ1xcXFxzKlsrLV0/XFxcXHMqKCcgK1xuICAgICAgICAgICAgICAgIHRoaXMua2V5cy5mdWxsZGIgK1xuICAgICAgICAgICAgICAgICcpXFxcXHMqWy0rXT9cXFxccyooJyArXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZWQuZGIucmVwbGFjZSgvXlstK10vLCAnJykgK1xuICAgICAgICAgICAgICAgICcpPydcbiAgICAgICAgICAgICkuZXhlYyhkYW1hZ2UpXG4gICAgICAgICAgICBpZiAoZm91bmQpIHtcbiAgICAgICAgICAgICAgYWRkYiA9IHRydWVcbiAgICAgICAgICAgICAgZGFtYWdlID0gZGFtYWdlLnJlcGxhY2UoZm91bmRbMF0sICcnKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSB3aGlsZSAoZm91bmQpXG4gICAgICAgIGNvbnN0IGRhbWFnZXMgPSBkYW1hZ2Uuc3BsaXQoJy8nKVxuICAgICAgICBjb25zdCBpc1Nob3RndW4gPSBkYW1hZ2VzLmxlbmd0aCA9PT0gM1xuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgdHlwZTogJ3dlYXBvbicsXG4gICAgICAgICAgc3lzdGVtOiB7XG4gICAgICAgICAgICBza2lsbDoge1xuICAgICAgICAgICAgICBpZDogbGFzdFBlcmNlbnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7fSxcbiAgICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICAgIG5vcm1hbDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBpc1Nob3RndW4gPyAxMCA6IDAsXG4gICAgICAgICAgICAgICAgZGFtYWdlOiBkYW1hZ2VzWzBdXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGxvbmc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXNTaG90Z3VuID8gMjAgOiAwLFxuICAgICAgICAgICAgICAgIGRhbWFnZTogaXNTaG90Z3VuID8gZGFtYWdlc1sxXSA6ICcnXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGV4dHJlbWU6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogaXNTaG90Z3VuID8gNTAgOiAwLFxuICAgICAgICAgICAgICAgIGRhbWFnZTogaXNTaG90Z3VuID8gZGFtYWdlc1syXSA6ICcnXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gU2V0IHNvbWUgb2YgdGhlIHByb3BlcnRpZXNcbiAgICAgICAgZGF0YS5zeXN0ZW0ucHJvcGVydGllcy5zaG90Z3VuID0gaXNTaG90Z3VuXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMucm5nZCA9IGlzUmFuZ2VkIHx8IGlzU2hvdGd1blxuICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLm1lbGVlID0gIWRhdGEuc3lzdGVtLnByb3BlcnRpZXMucm5nZFxuICAgICAgICBkYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLmFoZGIgPSBhaGRiXG4gICAgICAgIGRhdGEuc3lzdGVtLnByb3BlcnRpZXMuYWRkYiA9IGFkZGJcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLnBhcnNlZC5hdHRhY2tzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMucGFyc2VkLmF0dGFja3MgPSBbXVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyc2VkLmF0dGFja3MucHVzaChkYXRhKVxuICAgICAgfSBlbHNlIGlmICgobmV3bGluZSA9IHRleHQubWF0Y2goL14oLispXFxuLykpKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2UobmV3bGluZVswXSwgJ1xcbicpXG4gICAgICB9IGVsc2UgaWYgKChuZXdsaW5lID0gdGV4dC5tYXRjaCgvXlteXFxuXSskLykpKSB7XG4gICAgICAgIHRleHQgPSAnJ1xuICAgICAgfVxuICAgIH0gd2hpbGUgKG1heExvb3BzID4gMCAmJiAoISF3ZWFwb24gfHwgISFkb2RnZSB8fCAhIXRleHQpKVxuICAgIGlmIChtYXhMb29wcyA9PT0gMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JVbmV4cGVjdGVkV2VhcG9uVGV4dCcpXG4gICAgICApXG4gICAgICBjb25zb2xlLmRlYnVnKCdVbmV4cGVjdGVkIHdlYXBvbnM6JywgdGV4dClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcHJvY2Vzc1NraWxscyBleHRyYWN0cyBza2lsbHMgLyBsYW5ndWFnZSBpbmZvcm1hdGlvbiBmcm9tIGEgc3Vic2VjdGlvbiBvZiB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgc2tpbGxzIC8gbGFuZ3VhZ2Ugc2VjdGlvblxuICAgKiBAcmV0dXJucyB2b2lkXG4gICAqL1xuICBwcm9jZXNzU2tpbGxzICh0ZXh0LCBrZXkgPSAnc2tpbGxzJykge1xuICAgIGlmICh0ZXh0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBicmVha3MgPSB0ZXh0LnNwbGl0KC9cXC5cXHI/XFxuLylcbiAgICBpZiAoYnJlYWtzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRleHQgPSBicmVha3NbMF1cbiAgICB9XG4gICAgbGV0IHNraWxsXG4gICAgbGV0IG1heExvb3BzID0gNDBcbiAgICBkbyB7XG4gICAgICBtYXhMb29wcy0tXG4gICAgICB0ZXh0ID0gdGV4dC50cmltKClcbiAgICAgIHNraWxsID0gdGhpcy5jaGVjaygnc2tpbGwnLCB7IHNhdmVLZXlzOiBmYWxzZSwgdGV4dCB9KVxuICAgICAgaWYgKHNraWxsKSB7XG4gICAgICAgIHRleHQgPSB0ZXh0LnJlcGxhY2Uoc2tpbGxbJy1zb3VyY2UnXSwgJ1xcbicpXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJzZWRba2V5XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLnBhcnNlZFtrZXldID0gW11cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhcnNlZFtrZXldLnB1c2goe1xuICAgICAgICAgIG5hbWU6IHRoaXMuY2xlYW5TdHJpbmcoc2tpbGwubmFtZSksXG4gICAgICAgICAgdmFsdWU6IE51bWJlcihza2lsbC5wZXJjZW50YWdlKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0gd2hpbGUgKG1heExvb3BzID4gMCAmJiBza2lsbClcbiAgICBpZiAobWF4TG9vcHMgPT09IDApIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yVW5leHBlY3RlZFNraWxsc1RleHQnKVxuICAgICAgKVxuICAgICAgY29uc29sZS5kZWJ1ZygnVW5leHBlY3RlZCBza2lsbHM6JywgdGV4dClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogcHJvY2Vzc1NwZWxscyBleHRyYWN0cyBzcGVsbCBpbmZvcm1hdGlvbiBmcm9tIGEgc3Vic2VjdGlvbiBvZiB0ZXh0XG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0IHRoZSByYXcgdGV4dCBvZiB0aGUgc3BlbGwgc2VjdGlvblxuICAgKiBAcmV0dXJucyB2b2lkXG4gICAqL1xuICBwcm9jZXNzU3BlbGxzICh0ZXh0KSB7XG4gICAgaWYgKHRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGJyZWFrcyA9IHRleHQuc3BsaXQoL1xcLlxccj9cXG4vKVxuICAgIGlmIChicmVha3MubGVuZ3RoID4gMSkge1xuICAgICAgdGV4dCA9IGJyZWFrc1swXVxuICAgIH1cbiAgICBjb25zdCBzcGVsbHNBcnIgPSB0ZXh0LnJlcGxhY2UoLyhbXFxuXFxyXSspL2csICcgJykuc3BsaXQoLyg/PCFcXChbXildKyksLylcbiAgICB0aGlzLnRleHQgPSB0aGlzLnRleHQucmVwbGFjZSh0ZXh0LnRyaW0oKSwgJ1xcbicpXG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiBzcGVsbHNBcnIpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5wYXJzZWQuc3BlbGxzID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLnBhcnNlZC5zcGVsbHMgPSBbXVxuICAgICAgfVxuICAgICAgdGhpcy5wYXJzZWQuc3BlbGxzLnB1c2godGhpcy5jbGVhblN0cmluZyhzcGVsbCkpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHBhcnNlQ2hhcmFjdGVyIGV4dHJhY3RzIGluZm9ybWF0aW9uIGZyb20gdGhlIHJhdyB0ZXh0IGRlc2NyaXB0aW9uIG9mIGFuIGVudGl0eSAoTlBDIG9yIENyZWF0dXJlKVxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dCB0aGUgcmF3IHRleHQgb2YgdGhlIGVudGl0eVxuICAgKiBAcmV0dXJucyBleHRyYWN0ZWREYXRhIG9iamVjdCB3aXRoIHRoZSBlbnRpdHkgZGF0YVxuICAgKi9cbiAgYXN5bmMgcGFyc2VDaGFyYWN0ZXIgKHRleHQpIHtcbiAgICAvLyBSZXBsYWNlIFwiRW4gRGFzaFwiIGFuZCBcIkVtIERhc2hcIiBkYXNoZXMgd2l0aCAtIGFuZCBcIlJpZ2h0IFNpbmdsZSBRdW90YXRpb24gTWFya1wiIHdpdGggJ1xuICAgIHRoaXMudGV4dCA9IFN0cmluZyh0ZXh0KVxuICAgICAgLnRyaW0oKVxuICAgICAgLnJlcGxhY2UoL1xcdTIwMTN8XFx1MjAxNHxcXHUyMjEyL2csICctJylcbiAgICAgIC5yZXBsYWNlKC9cXHUyMDE5L2csIFwiJ1wiKVxuICAgICAgLnJlcGxhY2UoL1tcXHVkYmMwLVxcdWRiZmVdW1xcdWRjMDAtXFx1ZGZmZl0vZywgJycpXG4gICAgLy8gRWFybGllc3QgY2hhcmFjdGVyIHRoYXQgaGFzIGJlZW4gdXNlZCwgdG8gd29yayBvdXQgdGhlIGhlYWRlclxuICAgIGxldCBtaW4gPSB0aGlzLnRleHQubGVuZ3RoXG4gICAgLy8gU1RSLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGxldCBjaGVjayA9IHRoaXMuY2hlY2soJ3N0cicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbXG4gICAgICAnLWluZGV4J1xuICAgIF1cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gQ09OLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnY29uJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gU0laLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnc2l6JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gSU5ULCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnaW50JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gUE9XLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygncG93JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gREVYLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnZGV4JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gQVBQLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnYXBwJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gRURVLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnZWR1JywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gU0FOLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnc2FuJywgeyB0eXBlOiBDb0M3QWN0b3JJbXBvcnRlci5hc051bWJlciB9KVsnLWluZGV4J11cbiAgICBpZiAoIWlzTmFOKGNoZWNrKSkge1xuICAgICAgbWluID0gTWF0aC5taW4obWluLCBjaGVjaylcbiAgICB9XG4gICAgLy8gSFAsIGlmIGJlcmZvcmUgdGhhbiBwcmV2aW91cyBtaW4gdXBkYXRlIGl0XG4gICAgY2hlY2sgPSB0aGlzLmNoZWNrKCdocCcsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlbJy1pbmRleCddXG4gICAgaWYgKCFpc05hTihjaGVjaykpIHtcbiAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgY2hlY2spXG4gICAgfVxuICAgIC8vIE1QLCBpZiBiZXJmb3JlIHRoYW4gcHJldmlvdXMgbWluIHVwZGF0ZSBpdFxuICAgIGNoZWNrID0gdGhpcy5jaGVjaygnbXAnLCB7IHR5cGU6IENvQzdBY3RvckltcG9ydGVyLmFzTnVtYmVyIH0pWyctaW5kZXgnXVxuICAgIGlmICghaXNOYU4oY2hlY2spKSB7XG4gICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIGNoZWNrKVxuICAgIH1cbiAgICAvLyBXb3JrIG91dCB0aGUgaGVhZGVyIGJhc2VkIG9uIHByZXZpb3VzIG1pbmltdW0gbWF0Y2hlZCBjaGFyYWN0ZXJcbiAgICBsZXQgaGVhZGVyXG4gICAgaWYgKG1pbiA+IDApIHtcbiAgICAgIGhlYWRlciA9IHRoaXMudGV4dC5zdWJzdHIoMCwgbWluKVxuICAgICAgLy8gR2V0IG5hbWUgZnJvbSBoZWFkZXJcbiAgICAgIGNoZWNrID0gdGhpcy5jaGVjaygnbmFtZScsIHsgdGV4dDogaGVhZGVyIH0pXG4gICAgICBpZiAoY2hlY2sgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vIElmIG5vdCBmb3VuZCB1c2UgZGVmYXVsdCBOUEMgbmFtZVxuICAgICAgICB0aGlzLnBhcnNlZC5uYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkltcG9ydGVkVW5uYW1lZENoYXJhY3RlcicpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBSZW1vdmUgbmFtZSBmcm9tIGhlYWRlclxuICAgICAgICBoZWFkZXIgPSBoZWFkZXIucmVwbGFjZShjaGVja1snLXNvdXJjZSddLCAnXFxuJylcbiAgICAgIH1cbiAgICAgIC8vIEdldCBhZ2UgZnJvbSBoZWFkZXJcbiAgICAgIGNoZWNrID0gdGhpcy5jaGVjaygnYWdlJywgeyB0ZXh0OiBoZWFkZXIgfSlcbiAgICAgIGlmIChjaGVjayAhPT0gZmFsc2UpIHtcbiAgICAgICAgLy8gSWYgZm91bmQgcmVtb3ZlIGFnZSBmcm9tIGhlYWRlclxuICAgICAgICBoZWFkZXIgPSBoZWFkZXIucmVwbGFjZShjaGVja1snLXNvdXJjZSddLCAnXFxuJylcbiAgICAgIH1cbiAgICAgIC8vIEdldCBvY2N1cGF0aW9uIGZyb20gaGVhZGVyXG4gICAgICBpZiAoIXRoaXMuY2hlY2soJ29jY3VwYXRpb24nLCB7IHRleHQ6IGhlYWRlciB9KSAmJiBoZWFkZXIudHJpbSgpICE9PSAnJykge1xuICAgICAgICAvLyBJZiBvY2N1cGF0aW9uIGlzIG5vdCBmb3VuZCBidXQgdGhlcmUgaXMgYSBoZWFkZXIgc2V0IHRoZSBvY2N1cGF0aW9uIHRvIHRoZSByZW1haW5pbmcgaGVhZGVyXG4gICAgICAgIGxldCBvY2N1cGF0aW9uID0gaGVhZGVyXG4gICAgICAgIGlmIChoZWFkZXIuaW5kZXhPZignLicpID4gLTEpIHtcbiAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBhIGZ1bGwgc3RvcCBqdXN0IHVzZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgaGVhZGVyIGFzIHRoZSBvY2N1cGF0aW9uXG4gICAgICAgICAgb2NjdXBhdGlvbiA9IGhlYWRlci5zdWJzdHIoMCwgaGVhZGVyLmluZGV4T2YoJy4nKSArIDEpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXJzZWQub2NjdXBhdGlvbiA9IG9jY3VwYXRpb25cbiAgICAgICAgICAucmVwbGFjZSgvKFtcXG5cXHJdKykvZywgJyAnKVxuICAgICAgICAgIC50cmltKClcbiAgICAgICAgICAucmVwbGFjZSgvLCQvLCAnJylcbiAgICAgICAgdGhpcy50ZXh0ID0gdGhpcy50ZXh0LnJlcGxhY2Uob2NjdXBhdGlvbi50cmltKCksICdcXG4nKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBUaGVyZSBpcyBubyBoZWFkZXIgc2V0IGRlZmF1bHQgTlBDIG5hbWVcbiAgICAgIHRoaXMucGFyc2VkLm5hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW1wb3J0ZWRVbm5hbWVkQ2hhcmFjdGVyJylcbiAgICB9XG4gICAgLy8gSWYgdGhlcmUgaXMgYW4gb2NjdXBhdGlvbiBidXQgbm8gYWdlIGNoZWNrIGlmIHRoZSBvY2N1cGF0aW9uIHN0YXJ0cyBudW1iZXIgc3BsaXQgYWdlIGFuZCBvY2N1cGF0aW9uXG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHRoaXMucGFyc2VkLm9jY3VwYXRpb24gIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgdGhpcy5wYXJzZWQuYWdlID09PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgY29uc3Qgb2NjdXBhdGlvbkFnZSA9IHRoaXMucGFyc2VkLm9jY3VwYXRpb24ubWF0Y2goXG4gICAgICAgIC9eKD88YWdlPlxcZCspLCg/PG9jY3VwYXRpb24+LispJC9cbiAgICAgIClcbiAgICAgIGlmIChvY2N1cGF0aW9uQWdlKSB7XG4gICAgICAgIHRoaXMucGFyc2VkLmFnZSA9IG9jY3VwYXRpb25BZ2UuZ3JvdXBzLmFnZVxuICAgICAgICB0aGlzLnBhcnNlZC5vY2N1cGF0aW9uID0gb2NjdXBhdGlvbkFnZS5ncm91cHMub2NjdXBhdGlvbi50cmltKClcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gR2V0IGRhbWFnZSBib251cywgaWYgbm90IGZvdW5kIG9yIG5vbmUgc2V0IHRvIDBcbiAgICBpZiAoXG4gICAgICAhdGhpcy5jaGVjaygnZGInKSB8fFxuICAgICAgdGhpcy5jaGVjaygnZGJOb25lJywge1xuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgdGV4dDogdGhpcy5wYXJzZWQuZGJcbiAgICAgIH0pXG4gICAgKSB7XG4gICAgICB0aGlzLnBhcnNlZC5kYiA9ICcwJ1xuICAgIH1cbiAgICB0aGlzLnBhcnNlZC5kYiA9IHRoaXMudHJhbnNsYXRlUm9sbCh0aGlzLnBhcnNlZC5kYilcbiAgICAvLyBHZXQgYnVpbGRcbiAgICB0aGlzLmNoZWNrKCdidWlsZCcpXG4gICAgLy8gR2V0IGFybW9yLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgICF0aGlzLmNoZWNrKCdhcm1vcicpIHx8XG4gICAgICB0aGlzLmNoZWNrKCdhcm1vck5vbmUnLCB7XG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZSxcbiAgICAgICAgc2F2ZUtleXM6IGZhbHNlLFxuICAgICAgICB0ZXh0OiB0aGlzLnBhcnNlZC5hcm1vclxuICAgICAgfSlcbiAgICApIHtcbiAgICAgIHRoaXMucGFyc2VkLmFybW9yID0gJzAnXG4gICAgfVxuICAgIC8vIEdldCBtb3ZlbWVudFxuICAgIHRoaXMuY2hlY2soJ21vdicsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlcbiAgICAvLyBHZXQgbHVja1xuICAgIHRoaXMuY2hlY2soJ2xjaycsIHsgdHlwZTogQ29DN0FjdG9ySW1wb3J0ZXIuYXNOdW1iZXIgfSlcbiAgICAvLyBHZXQgc2FuaXR5IGxvc3NcbiAgICB0aGlzLmNoZWNrKCdzYW5Mb3NzJylcbiAgICB0aGlzLnBhcnNlZC5zYW5Mb3NzID0gdGhpcy50cmFuc2xhdGVSb2xsKHRoaXMucGFyc2VkLnNhbkxvc3MpXG4gICAgLy8gR2V0IGF0dGFja3MgcGVyIHJvdW5kLCBpZiBub3QgZm91bmQgb3Igbm9uZSBzZXQgdG8gMFxuICAgIGlmIChcbiAgICAgIHRoaXMuY2hlY2soJ2F0dGFja3NQZXJSb3VuZCcpICYmXG4gICAgICB0aGlzLmNoZWNrKCdhdHRhY2tzUGVyUm91bmROb25lJywge1xuICAgICAgICByZW1vdmVGcm9tVGV4dDogZmFsc2UsXG4gICAgICAgIHNhdmVLZXlzOiBmYWxzZSxcbiAgICAgICAgdGV4dDogdGhpcy5wYXJzZWQuYXR0YWNrc1BlclJvdW5kXG4gICAgICB9KVxuICAgICkge1xuICAgICAgdGhpcy5wYXJzZWQuYXR0YWNrc1BlclJvdW5kID0gJzAnXG4gICAgfVxuICAgIC8vIENoZWNrIGlmIHRoZXJlIGlzIGEgY29tYmF0IHNlY3Rpb25cbiAgICB0aGlzLnRleHQgPSAnXFxuJyArIHRoaXMudGV4dFxuICAgIGxldCBzZWN0aW9ucyA9IHRoaXMuZ2V0UmVnRXgoJygnICsgdGhpcy5rZXlzLnNlY3Rpb25Db21iYXRzICsgJyknLCAnaScpXG4gICAgaWYgKHRoaXMudGV4dC5tYXRjaChzZWN0aW9ucykgPT09IG51bGwpIHtcbiAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGNvbWJhdCBzZWN0aW9uIGd1ZXNzIHdoZXJlIGl0IHN0YXJ0c1xuICAgICAgc2VjdGlvbnMgPSB0aGlzLmNoZWNrKCdndWVzc1N0YXJ0Q29tYmF0Jywge1xuICAgICAgICBzYXZlS2V5czogZmFsc2UsXG4gICAgICAgIHJlbW92ZUZyb21UZXh0OiBmYWxzZVxuICAgICAgfSlcbiAgICAgIGlmIChzZWN0aW9ucykge1xuICAgICAgICAvLyBBZGQgYSBoZWFkZXIgdG8gdGhlIHN0YXJ0IG9mIHRoZSBjb21iYXQgc2VjdGlvblxuICAgICAgICB0aGlzLnRleHQgPSBbXG4gICAgICAgICAgdGhpcy50ZXh0LnNsaWNlKDAsIHNlY3Rpb25zWyctaW5kZXgnXSksXG4gICAgICAgICAgdGhpcy5rZXlzLm5ld0NvbWJhdEhlYWRlcixcbiAgICAgICAgICB0aGlzLnRleHQuc2xpY2Uoc2VjdGlvbnNbJy1pbmRleCddKVxuICAgICAgICBdLmpvaW4oJycpXG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNwbGl0IHRoZSBzZWN0aW9ucyBDb21iYXQsIFNraWxscywgTGFuZ3VhZ2VzLCBhbmQgU3BlbGxzXG4gICAgY29uc3QgcmVnRXhwU2VjdGlvbnMgPSB0aGlzLmdldFJlZ0V4KHRoaXMucmVnRXguc2VjdGlvbnMsICdpJylcbiAgICBzZWN0aW9ucyA9IHRoaXMudGV4dC5zcGxpdChyZWdFeHBTZWN0aW9ucylcbiAgICBpZiAoc2VjdGlvbnMgIT09IG51bGwpIHtcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IHNlY3Rpb25zLmxlbmd0aDsgaSA8IGltOyBpKyspIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHNlY3Rpb25zW2ldLm1hdGNoKFxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvbkNvbWJhdHMgKyAnKScsICdpJylcbiAgICAgICAgICApICE9PSBudWxsICYmXG4gICAgICAgICAgdHlwZW9mIHNlY3Rpb25zW2kgKyAxXSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgKSB7XG4gICAgICAgICAgLy8gSWYgc2VjdGlvbiBpcyBjb21iYXRcbiAgICAgICAgICB0aGlzLnRleHQgPSAoJ1xcbicgKyB0aGlzLnRleHQgKyAnXFxuJylcbiAgICAgICAgICAgIC5yZXBsYWNlKHNlY3Rpb25zW2ldLCAnXFxuJylcbiAgICAgICAgICAgIC50cmltKClcbiAgICAgICAgICB0aGlzLnByb2Nlc3NDb21iYXQoc2VjdGlvbnNbaSArIDFdKVxuICAgICAgICAgIGkrK1xuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHNlY3Rpb25zW2ldLm1hdGNoKFxuICAgICAgICAgICAgdGhpcy5nZXRSZWdFeCgnKCcgKyB0aGlzLmtleXMuc2VjdGlvblNraWxscyArICcpJywgJ2knKVxuICAgICAgICAgICkgIT09IG51bGwgJiZcbiAgICAgICAgICB0eXBlb2Ygc2VjdGlvbnNbaSArIDFdICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICApIHtcbiAgICAgICAgICAvLyBJZiBzZWN0aW9uIGlzIHNraWxsc1xuICAgICAgICAgIHRoaXMudGV4dCA9ICgnXFxuJyArIHRoaXMudGV4dCArICdcXG4nKVxuICAgICAgICAgICAgLnJlcGxhY2Uoc2VjdGlvbnNbaV0sICdcXG4nKVxuICAgICAgICAgICAgLnRyaW0oKVxuICAgICAgICAgIHRoaXMucHJvY2Vzc1NraWxscyhzZWN0aW9uc1tpICsgMV0pXG4gICAgICAgICAgaSsrXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uTGFuZ2F1Z2VzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgbGFuZ3VhZ2VzXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU2tpbGxzKHNlY3Rpb25zW2kgKyAxXSwgJ2xhbmd1YWdlcycpXG4gICAgICAgICAgaSsrXG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgc2VjdGlvbnNbaV0ubWF0Y2goXG4gICAgICAgICAgICB0aGlzLmdldFJlZ0V4KCcoJyArIHRoaXMua2V5cy5zZWN0aW9uU3BlbGxzICsgJyknLCAnaScpXG4gICAgICAgICAgKSAhPT0gbnVsbCAmJlxuICAgICAgICAgIHR5cGVvZiBzZWN0aW9uc1tpICsgMV0gIT09ICd1bmRlZmluZWQnXG4gICAgICAgICkge1xuICAgICAgICAgIC8vIElmIHNlY3Rpb24gaXMgc3BlbGxzXG4gICAgICAgICAgdGhpcy50ZXh0ID0gKCdcXG4nICsgdGhpcy50ZXh0ICsgJ1xcbicpXG4gICAgICAgICAgICAucmVwbGFjZShzZWN0aW9uc1tpXSwgJ1xcbicpXG4gICAgICAgICAgICAudHJpbSgpXG4gICAgICAgICAgdGhpcy5wcm9jZXNzU3BlbGxzKHNlY3Rpb25zW2kgKyAxXSlcbiAgICAgICAgICBpKytcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBBbnkgcmVtYWluaW5nIHRleHQgYWRkIHRvIEdNIG5vdGVzIHNvIHlvdSBjYW4gZWFzaWx5IHNlZSBpZiB0aGVyZSBhcmUgYW55IG9idmlvdXMgaXNzdWUgb3IganVzdCBnZW5lcmFsIG5vdGVzXG4gICAgdGhpcy5wYXJzZWQuZ21ub3RlcyA9IHRoaXMudG9IVE1MKHRoaXMudGV4dClcbiAgICByZXR1cm4gdGhpcy5wYXJzZWRcbiAgfVxuXG4gIGRpc2FibGVBdHRyaWJBdXRvIChrZXksIGF0dHJpYlZhbHVlLCBjaGVjaywgdXBkYXRlRGF0YSkge1xuICAgIGNvbnN0IHZhbHVlID0gTWF0aC5tYXgoMCwgTnVtYmVyKGF0dHJpYlZhbHVlKSlcbiAgICBpZiAodmFsdWUgIT09IE51bWJlcihjaGVjaykpIHtcbiAgICAgIHVwZGF0ZURhdGFbYHN5c3RlbS5hdHRyaWJzLiR7a2V5fS5hdXRvYF0gPSBmYWxzZVxuICAgICAgdXBkYXRlRGF0YVtgc3lzdGVtLmF0dHJpYnMuJHtrZXl9LnZhbHVlYF0gPSB2YWx1ZVxuICAgICAgaWYgKGtleSA9PT0gJ2J1aWxkJykge1xuICAgICAgICB1cGRhdGVEYXRhW2BzeXN0ZW0uYXR0cmlicy4ke2tleX0uY3VycmVudGBdID0gdmFsdWVcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVwZGF0ZURhdGFbYHN5c3RlbS5hdHRyaWJzLiR7a2V5fS5tYXhgXSA9IHZhbHVlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVEYXRhXG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGFuIGVudGl0eSAoYG5wY2Agb3IgYGNyZWF0dXJlYCkgZnJvbSB0aGUgb2JqZWN0IHdpdGggdGhlIGFscmVhZHkgcGFyc2VkIGVudGl0eSBkYXRhXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjaGFyYWN0ZXJEYXRhIG9iamVjdCB3aXRoIHRoZSBkYXRhIGV4dHJhY3RlZCBmcm9tIHRoZSBjaGFyYWN0ZXJcbiAgICogQHBhcmFtIHtTdHJpbmd9IGVudGl0eVR5cGVTdHJpbmcgZW50aXR5IHR5cGUgb2J0YWluZWQgZnJvbSB0aGUgdXNlciBpbnB1dFxuICAgKiBAcmV0dXJucyB7QWN0b3J9IHRoZSBjcmVhdGVkIGZvdW5kcnkgYEFjdG9yYFxuICAgKi9cbiAgYXN5bmMgY3JlYXRlRW50aXR5IChjaGFyYWN0ZXJEYXRhLCBlbnRpdHlUeXBlKSB7XG4gICAgY29uc3QgaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyID1cbiAgICAgIGF3YWl0IENvQzdVdGlsaXRpZXMuY3JlYXRlSW1wb3J0Q2hhcmFjdGVyc0ZvbGRlcklmTm90RXhpc3RzKClcbiAgICBpZiAoZW50aXR5VHlwZSAhPT0gJ25wYycpIHtcbiAgICAgIGVudGl0eVR5cGUgPSAnY3JlYXR1cmUnXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHtcbiAgICAgIG5hbWU6IGNoYXJhY3RlckRhdGEubmFtZSxcbiAgICAgIHR5cGU6IGVudGl0eVR5cGUsXG4gICAgICBmb2xkZXI6IGltcG9ydGVkQ2hhcmFjdGVyc0ZvbGRlci5pZCxcbiAgICAgIGRhdGE6IGNoYXJhY3RlckRhdGEuYWN0b3JcbiAgICB9XG4gICAgY29uc3QgbnBjID0gYXdhaXQgQWN0b3IuY3JlYXRlKGFjdG9yRGF0YSlcbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBjaGFyYWN0ZXJEYXRhLml0ZW1zLCB7XG4gICAgICByZW5kZXJTaGVldDogZmFsc2VcbiAgICB9KVxuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuICAgIGxldCB2YWx1ZSA9IDBcbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5ocD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnaHAnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuaHAudmFsdWUsXG4gICAgICAgIG5wYy5ocE1heCxcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tcD8udmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmRpc2FibGVBdHRyaWJBdXRvKFxuICAgICAgICAnbXAnLFxuICAgICAgICBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMubXAudmFsdWUsXG4gICAgICAgIG5wYy5tcE1heCxcbiAgICAgICAgdXBkYXRlRGF0YVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tb3Y/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kaXNhYmxlQXR0cmliQXV0byhcbiAgICAgICAgJ21vdicsXG4gICAgICAgIGNoYXJhY3RlckRhdGEuYWN0b3IuYXR0cmlicy5tb3YudmFsdWUsXG4gICAgICAgIG5wYy5tb3YsXG4gICAgICAgIHVwZGF0ZURhdGFcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuYnVpbGQ/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5kaXNhYmxlQXR0cmliQXV0byhcbiAgICAgICAgJ2J1aWxkJyxcbiAgICAgICAgY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmJ1aWxkLnZhbHVlLFxuICAgICAgICBucGMuYnVpbGQsXG4gICAgICAgIHVwZGF0ZURhdGFcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGFyYWN0ZXJEYXRhLmFjdG9yLmF0dHJpYnMuZGI/LnZhbHVlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFsdWUgPSBTdHJpbmcoY2hhcmFjdGVyRGF0YS5hY3Rvci5hdHRyaWJzLmRiLnZhbHVlKS5yZXBsYWNlKC9eXFwrXFxzKi8sICcnKVxuICAgICAgaWYgKHZhbHVlICE9PSBTdHJpbmcobnBjLmRiKSkge1xuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5kYi5hdXRvJ10gPSBmYWxzZVxuICAgICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uYXR0cmlicy5kYi52YWx1ZSddID0gdmFsdWVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKE9iamVjdC5rZXlzKHVwZGF0ZURhdGEpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ3VwZGF0ZURhdGE6JywgdXBkYXRlRGF0YSlcbiAgICAgIH1cbiAgICAgIGF3YWl0IG5wYy51cGRhdGUodXBkYXRlRGF0YSlcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlSXRlbURhdGEgPSBbXVxuICAgIGxldCBsYXN0V2VhcG9uU2tpbGwgPSBudWxsXG4gICAgZm9yIChjb25zdCBwYWlyIG9mIHRoaXMud2VhcG9uU2tpbGxzKSB7XG4gICAgICBpZiAocGFpclswXSAhPT0gZmFsc2UpIHtcbiAgICAgICAgbGFzdFdlYXBvblNraWxsID0gbnBjLml0ZW1zLmZpbHRlcihcbiAgICAgICAgICBpID0+IGkubmFtZSA9PT0gcGFpclswXS5uYW1lICYmXG4gICAgICAgICAgICBpLnR5cGUgPT09ICdza2lsbCcgJiZcbiAgICAgICAgICAgIE51bWJlcihpLnN5c3RlbS52YWx1ZSkgPT09IE51bWJlcihwYWlyWzBdLnN5c3RlbS52YWx1ZSlcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgY29uc3Qgd2VhcG9uID0gbnBjLml0ZW1zLmZpbHRlcihcbiAgICAgICAgaSA9PiBpLm5hbWUgPT09IHBhaXJbMV0ubmFtZSAmJlxuICAgICAgICAgIGkudHlwZSA9PT0gJ3dlYXBvbicgJiZcbiAgICAgICAgICBpLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlID09PSBwYWlyWzFdLnN5c3RlbS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgICApXG4gICAgICBpZiAobGFzdFdlYXBvblNraWxsWzBdICYmIHdlYXBvblswXSkge1xuICAgICAgICB1cGRhdGVJdGVtRGF0YS5wdXNoKHtcbiAgICAgICAgICBfaWQ6IHdlYXBvblswXS5pZCxcbiAgICAgICAgICAnc3lzdGVtLnNraWxsLm1haW4uaWQnOiBsYXN0V2VhcG9uU2tpbGxbMF0uaWQsXG4gICAgICAgICAgJ3N5c3RlbS5za2lsbC5tYWluLm5hbWUnOiBsYXN0V2VhcG9uU2tpbGxbMF0ubmFtZVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodXBkYXRlSXRlbURhdGEubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZygndXBkYXRlSXRlbURhdGE6JywgdXBkYXRlSXRlbURhdGEpXG4gICAgICB9XG4gICAgICBhd2FpdCBucGMudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCB1cGRhdGVJdGVtRGF0YSlcbiAgICB9XG4gICAgcmV0dXJuIG5wY1xuICB9XG5cbiAgLyoqXG4gICAqIGFjdG9yRGF0YSwgY29udmVydCBwYXJzZUNoYXJhY3RlciBkYXRhIGludG8gQWN0b3IgZGF0YVxuICAgKiBAcGFyYW0ge09iamVjdH0gcGMgb2JqZWN0IHdpdGggdGhlIGRhdGEgZXh0cmFjdGVkIGZyb20gdGhlIGNoYXJhY3RlciBhcyByZXR1cm5lZCBmcm9tIGBwYXJzZUNoYXJhY3RlcmBcbiAgICogQHJldHVybnMge09iamVjdH0gZm9ybWF0dGVkIEFjdG9yIGRhdGFcbiAgICovXG4gIGFjdG9yRGF0YSAocGMpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgY2hhcmFjdGVyaXN0aWNzOiB7fSxcbiAgICAgIGF0dHJpYnM6IHt9LFxuICAgICAgaW5mb3M6IHt9LFxuICAgICAgc3BlY2lhbDoge30sXG4gICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICBrZWVwZXI6ICcnXG4gICAgICB9LFxuICAgICAgZmxhZ3M6IHtcbiAgICAgICAgbG9ja2VkOiBmYWxzZSxcbiAgICAgICAgZGlzcGxheUZvcm11bGE6IGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFtcbiAgICAgICdzdHInLFxuICAgICAgJ2NvbicsXG4gICAgICAnc2l6JyxcbiAgICAgICdkZXgnLFxuICAgICAgJ2FwcCcsXG4gICAgICAnaW50JyxcbiAgICAgICdwb3cnLFxuICAgICAgJ2VkdSdcbiAgICBdKSB7XG4gICAgICBpZiAodHlwZW9mIHBjW2tleV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRhdGEuY2hhcmFjdGVyaXN0aWNzW2tleV0gPSB7XG4gICAgICAgICAgdmFsdWU6IE51bWJlcihwY1trZXldKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnc2FuJywgJ21vdicsICdidWlsZCcsICdhcm1vcicsICdsY2snLCAnaHAnLCAnbXAnXSkge1xuICAgICAgaWYgKHR5cGVvZiBwY1trZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBkYXRhLmF0dHJpYnNba2V5XSA9IHtcbiAgICAgICAgICB2YWx1ZTogTnVtYmVyKHBjW2tleV0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwYy5kYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuYXR0cmlicy5kYiA9IHtcbiAgICAgICAgdmFsdWU6IHBjLmRiXG4gICAgICB9XG4gICAgfVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnYWdlJywgJ29jY3VwYXRpb24nXSkge1xuICAgICAgaWYgKHR5cGVvZiBwY1trZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBkYXRhLmluZm9zW2tleV0gPSBwY1trZXldXG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcGMuc2FuTG9zcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IFtwYXNzZWQsIGZhaWxlZF0gPSBwYy5zYW5Mb3NzLnNwbGl0KCcvJylcbiAgICAgIGRhdGEuc3BlY2lhbC5zYW5Mb3NzID0ge1xuICAgICAgICBjaGVja1Bhc3NlZDogcGFzc2VkLFxuICAgICAgICBjaGVja0ZhaWxsZWQ6IGZhaWxlZFxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHBjLmF0dGFja3NQZXJSb3VuZCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuc3BlY2lhbC5hdHRhY2tzUGVyUm91bmQgPSBOdW1iZXIocGMuYXR0YWNrc1BlclJvdW5kKVxuICAgIH1cbiAgICBkYXRhLmRlc2NyaXB0aW9uLmtlZXBlciA9IHBjLmdtbm90ZXNcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnYWN0b3JEYXRhOicsIGRhdGEpXG4gICAgfVxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICAvKipcbiAgICogaXRlbXNEYXRhLCBjb252ZXJ0IHBhcnNlQ2hhcmFjdGVyIGRhdGEgaW50byBBY3RvciBpdGVtIGRhdGFcbiAgICogQHBhcmFtIHtPYmplY3R9IHBjIG9iamVjdCB3aXRoIHRoZSBkYXRhIGV4dHJhY3RlZCBmcm9tIHRoZSBjaGFyYWN0ZXIgYXMgcmV0dXJuZWQgZnJvbSBgcGFyc2VDaGFyYWN0ZXJgXG4gICAqIEByZXR1cm5zIHtPYmplY3R9IGZvcm1hdHRlZCBBY3RvciBkYXRhXG4gICAqL1xuICBhc3luYyBpdGVtc0RhdGEgKHBjKSB7XG4gICAgY29uc3QgaXRlbXMgPSBbXVxuICAgIHRoaXMud2VhcG9uU2tpbGxzID0gW11cbiAgICAvLyBXZWFwb24gc2tpbGxzXG4gICAgaWYgKHR5cGVvZiBwYy5hdHRhY2tzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBhdHRhY2sgb2YgcGMuYXR0YWNrcykge1xuICAgICAgICBsZXQgc2tpbGwgPSBmYWxzZVxuICAgICAgICBpZiAoYXR0YWNrLnN5c3RlbT8uc2tpbGw/LmlkICE9PSB0cnVlKSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLndlYXBvblNraWxsKGF0dGFjaylcbiAgICAgICAgICBpdGVtcy5wdXNoKHNraWxsKVxuICAgICAgICB9XG4gICAgICAgIGF0dGFjay5zeXN0ZW0uc2tpbGwuaWQgPSBudWxsXG4gICAgICAgIGl0ZW1zLnB1c2goYXR0YWNrKVxuICAgICAgICB0aGlzLndlYXBvblNraWxscy5wdXNoKFtza2lsbCwgYXR0YWNrXSlcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU2tpbGxzXG4gICAgaWYgKHR5cGVvZiBwYy5za2lsbHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IHNraWxsIG9mIHBjLnNraWxscykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsIHNraWxsLm5hbWUsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICB9KVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLmJhc2UgPSBza2lsbC52YWx1ZVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2tpbGwucHVzaCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5wdXNoID0gc2tpbGwucHVzaFxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtcy5wdXNoKGR1cGxpY2F0ZShjbG9uZWQpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7fVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2tpbGwucHVzaCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIG9wdGlvbnMucHVzaCA9IHNraWxsLnB1c2hcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlbXMucHVzaChDb0NBY3Rvci5lbXB0eVNraWxsKHNraWxsLm5hbWUsIHNraWxsLnZhbHVlLCBvcHRpb25zKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICAvLyBMYW5ndWFnZXNcbiAgICBpZiAodHlwZW9mIHBjLmxhbmd1YWdlcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgcGMubGFuZ3VhZ2VzKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgc2tpbGwubmFtZSwge1xuICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgIH0pXG4gICAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3QgY2xvbmVkID0gZXhpc3RpbmcudG9PYmplY3QoKVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHNraWxsLnZhbHVlXG4gICAgICAgICAgaXRlbXMucHVzaChkdXBsaWNhdGUoY2xvbmVkKSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtcy5wdXNoKFxuICAgICAgICAgICAgQ29DQWN0b3IuZW1wdHlTa2lsbChza2lsbC5uYW1lLCBza2lsbC52YWx1ZSwge1xuICAgICAgICAgICAgICBpbWc6IENvQzdJdGVtLmljb25MYW5ndWFnZSxcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246ICdMYW5ndWFnZSdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFNwZWxsc1xuICAgIGlmICh0eXBlb2YgcGMuc3BlbGxzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgZm9yIChjb25zdCBuYW1lIG9mIHBjLnNwZWxscykge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdzcGVsbCcsIG5hbWUsIHtcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICB9KVxuICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGNvbnN0IGNsb25lZCA9IGV4aXN0aW5nLnRvT2JqZWN0KClcbiAgICAgICAgICBpdGVtcy5wdXNoKGR1cGxpY2F0ZShjbG9uZWQpKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1zLnB1c2goQ29DQWN0b3IuZW1wdHlTcGVsbChuYW1lKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXRlbXNcbiAgfVxuXG4gIC8qKiB3ZWFwb25Ta2lsbCB0cmllcyB0byBndWVzcyB3aGF0IGtpbmQgb2Ygd2VhcG9uIHNraWxsIHRvIHVzZSBmb3Igd2VhcG9uIGZyb20gaXQncyBuYW1lXG4gICAqIEBwYXJhbSB3ZWFwb246IEpTT04sIHdlYXBvbiBkYXRhXG4gICAqL1xuICBhc3luYyB3ZWFwb25Ta2lsbCAod2VhcG9uKSB7XG4gICAgbGV0IHNraWxsID0gbnVsbFxuICAgIGlmICh0aGlzLmdldFJlZ0V4KCdoYW5kZ3VuJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ0hhbmRndW4nLCB7XG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgIH0pXG4gICAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgICBjb25zb2xlLmRlYnVnKGAke3dlYXBvbi5uYW1lfSB1c2VzIEhhbmRndW4gc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UmVnRXgoJ3JpZmxlJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ1JpZmxlL1Nob3RndW4nLCB7XG4gICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgc291cmNlOiB0aGlzLml0ZW1Mb2NhdGlvbnNcbiAgICAgIH0pXG4gICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ1JpZmxlJywge1xuICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgICB9KVxuICAgICAgICBpZiAoIXNraWxsKSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCAnU2hvdGd1bicsIHtcbiAgICAgICAgICAgIGNvbWJhdDogdHJ1ZSxcbiAgICAgICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBSaWZsZSBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgnc21iJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ1N1Ym1hY2hpbmUgR3VuJywge1xuICAgICAgICBjb21iYXQ6IHRydWUsXG4gICAgICAgIHNvdXJjZTogdGhpcy5pdGVtTG9jYXRpb25zXG4gICAgICB9KVxuICAgICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgICAgY29uc29sZS5kZWJ1ZyhgJHt3ZWFwb24ubmFtZX0gdXNlcyBTdWJtYWNoaW5lIEd1biBza2lsbDogJHtza2lsbH1gKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5nZXRSZWdFeCgnbWFjaGluZUd1bicpLmV4ZWMod2VhcG9uLm5hbWUpKSB7XG4gICAgICBza2lsbCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCdza2lsbCcsICdNYWNoaW5lIEd1bicsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgTWFjaGluZSBHdW4gc2tpbGw6ICR7c2tpbGx9YClcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZ2V0UmVnRXgoJ2xhdW5jaGVkJykuZXhlYyh3ZWFwb24ubmFtZSkpIHtcbiAgICAgIHNraWxsID0gYXdhaXQgQ29DN1V0aWxpdGllcy5ndWVzc0l0ZW0oJ3NraWxsJywgJ0xhdW5jaCcsIHtcbiAgICAgICAgY29tYmF0OiB0cnVlLFxuICAgICAgICBzb3VyY2U6IHRoaXMuaXRlbUxvY2F0aW9uc1xuICAgICAgfSlcbiAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoYCR7d2VhcG9uLm5hbWV9IHVzZXMgTGF1bmNoIHNraWxsOiAke3NraWxsfWApXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChza2lsbCAhPT0gbnVsbCAmJiB0eXBlb2Ygc2tpbGwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBza2lsbENsb25lID0gc2tpbGwuY2xvbmUoe1xuICAgICAgICBzeXN0ZW06IHtcbiAgICAgICAgICB2YWx1ZTogd2VhcG9uLnN5c3RlbT8uc2tpbGw/LmlkXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICByZXR1cm4gc2tpbGxDbG9uZVxuICAgIH1cbiAgICBjb25zdCBmaXJlYXJtcyA9IHdlYXBvbi5zeXN0ZW0/LnByb3BlcnRpZXM/LnJuZ2RcbiAgICBjb25zdCBwYXJ0cyA9IENvQzdJdGVtLmdldE5hbWVQYXJ0c1NwZWMoXG4gICAgICB3ZWFwb24ubmFtZSxcbiAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgZmlyZWFybXNcbiAgICAgICAgICA/ICdDb0M3LkZpcmVhcm1TcGVjaWFsaXphdGlvbk5hbWUnXG4gICAgICAgICAgOiAnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZSdcbiAgICAgIClcbiAgICApXG4gICAgY29uc3QgbmV3U2tpbGwgPSB7XG4gICAgICB0eXBlOiAnc2tpbGwnLFxuICAgICAgbmFtZTogcGFydHMubmFtZSxcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBza2lsbE5hbWU6IHBhcnRzLnNraWxsTmFtZSxcbiAgICAgICAgc3BlY2lhbGl6YXRpb246IHBhcnRzLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgc3BlY2lhbDogdHJ1ZSxcbiAgICAgICAgICBmaWdodGluZzogIWZpcmVhcm1zLFxuICAgICAgICAgIGZpcmVhcm06IGZpcmVhcm1zLFxuICAgICAgICAgIGNvbWJhdDogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBiYXNlOiB3ZWFwb24uc3lzdGVtPy5za2lsbD8uaWQsXG4gICAgICAgIHZhbHVlOiB3ZWFwb24uc3lzdGVtPy5za2lsbD8uaWRcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoXG4gICAgICAgIGBXZWFwb24gc2tpbGwgbm90IGZvdW5kIGZvciAke3dlYXBvbi5uYW1lfSwgY3JlYXRpbmcgYSBuZXcgb25lYCxcbiAgICAgICAgbmV3U2tpbGxcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIG5ld1NraWxsXG4gIH1cblxuICAvKipcbiAgICogbmVlZHNDb252ZXJzaW9uIGRvZXMgYW4gZXZhbHVhdGlvbiB0byBzZWUgaWYgdGhlIGdpdmVuIG5wYyBuZWVkcyB0byBiZSBjb252ZXJ0ZWQgdG8gN3RoIEVkaXRpb25cbiAgICogUmV0dXJucyBgZmFsc2VgIHdoZW4gYW55IG9mIHRoZSBDaGFyYWN0ZXJpc3RpY3MgdmFsdWUgaXQncyBhYm92ZSAyOVxuICAgKi9cbiAgbmVlZHNDb252ZXJzaW9uIChucGMpIHtcbiAgICBsZXQgbmVlZHNDb252ZXJzaW9uUmVzdWx0ID0gdHJ1ZVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFtcbiAgICAgICdzdHInLFxuICAgICAgJ2NvbicsXG4gICAgICAnc2l6JyxcbiAgICAgICdkZXgnLFxuICAgICAgJ2FwcCcsXG4gICAgICAnaW50JyxcbiAgICAgICdwb3cnLFxuICAgICAgJ2VkdSdcbiAgICBdKSB7XG4gICAgICBpZiAodHlwZW9mIG5wY1trZXldICE9PSAndW5kZWZpbmVkJyAmJiBucGNba2V5XSA+IDMwKSB7XG4gICAgICAgIG5lZWRzQ29udmVyc2lvblJlc3VsdCA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCduZWVkc0NvbnZlcnNpb246JywgbmVlZHNDb252ZXJzaW9uUmVzdWx0KVxuICAgIH1cbiAgICByZXR1cm4gbmVlZHNDb252ZXJzaW9uUmVzdWx0XG4gIH1cblxuICAvKipcbiAgICogY3JlYXRlQWN0b3IgbWFpbiBtZXRob2QgdG8gY3JlYXRlIGFuIGBBY3RvcmAgZnJvbSBhIGdpdmUgdXNlciBpbnB1dCwgdGFrZXMgb24gYWNjb3VudCB0aGUgbGFuZywgZW50aXR5IHR5cGUsXG4gICAqIHRoZSBjb252ZXJ0IHRvIDcgRWRpdGlvbiBmbGFnLCBhbmQgdGhlIHJhdyBlbnRpdHkgZGF0YS5cbiAgICogQHBhcmFtIHtPYmplY3R9IGlucHV0cyBpbnB1dHMgZnJvbSB0aGUgZm9ybSB0byBjcmVhdGUgYW4gQWN0b3JcbiAgICogQHJldHVybnMge0FjdG9yfSB0aGUgZm91bmRyeSBgQWN0b3JgIGZyb20gdGhlIGdpdmVuIGBpbnB1dGAgb3B0aW9uc1xuICAgKi9cbiAgYXN5bmMgY3JlYXRlQWN0b3IgKGlucHV0cykge1xuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdjcmVhdGVBY3RvcjonLCBpbnB1dHMpXG4gICAgfVxuICAgIGNvbnN0IGxhbmcgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKGlucHV0cy5sYW5nKVxuICAgIHRoaXMua2V5cyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldEtleXMobGFuZylcbiAgICB0aGlzLnJlZ0V4ID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuZ2V0UmVndWxhckV4cHJlc3Npb25zKGxhbmcpXG4gICAgdGhpcy5pdGVtTG9jYXRpb25zID0gaW5wdXRzLnNvdXJjZVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmRlYnVnKCdSZWd1bGFyIEV4cHJlc3Npb25zOicsIGxhbmcsIHRoaXMua2V5cywgdGhpcy5yZWdFeClcbiAgICB9XG4gICAgbGV0IGNoYXJhY3RlciA9IGF3YWl0IHRoaXMucGFyc2VDaGFyYWN0ZXIoaW5wdXRzLnRleHQpXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ3BhcnNlQ2hhcmFjdGVyOicsIGNoYXJhY3RlcilcbiAgICB9XG4gICAgaWYgKFxuICAgICAgKGlucHV0cy5jb252ZXJ0RnJvbTZFID09PSAnY29jLWd1ZXNzJyAmJlxuICAgICAgICB0aGlzLm5lZWRzQ29udmVyc2lvbihjaGFyYWN0ZXIpKSB8fFxuICAgICAgaW5wdXRzLmNvbnZlcnRGcm9tNkUgPT09ICdjb2MtY29udmVydCdcbiAgICApIHtcbiAgICAgIGNoYXJhY3RlciA9IGF3YWl0IHRoaXMuY29udmVydDdFKGNoYXJhY3RlcilcbiAgICB9XG4gICAgY29uc3QgY2hhcmFjdGVyRGF0YSA9IHtcbiAgICAgIG5hbWU6IGNoYXJhY3Rlci5uYW1lLFxuICAgICAgYWN0b3I6IHRoaXMuYWN0b3JEYXRhKGNoYXJhY3RlciksXG4gICAgICBpdGVtczogYXdhaXQgdGhpcy5pdGVtc0RhdGEoY2hhcmFjdGVyKVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaW5wdXRzLnRlc3RNb2RlICE9PSAndW5kZWZpbmVkJyAmJiBpbnB1dHMudGVzdE1vZGUgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBjaGFyYWN0ZXJEYXRhXG4gICAgfVxuICAgIGNvbnN0IG5wYyA9IGF3YWl0IHRoaXMuY3JlYXRlRW50aXR5KGNoYXJhY3RlckRhdGEsIGlucHV0cy5lbnRpdHkpXG4gICAgcmV0dXJuIG5wY1xuICB9XG5cbiAgLyoqXG4gICAqIGNvbnZlcnQ3RSBDb252ZXJ0cyB0aGUgZ2l2ZW4gZW50aXR5IGZyb20gNiBlZGl0aW9uIHRvIDcgZWRpdGlvblxuICAgKiBAcGFyYW0ge09iamVjdH0gdGhlIGVudGl0eSBvYmplY3QgYXMgb2J0YWluZWQgZnJvbSBgcGFyc2VDaGFyYWN0ZXJgXG4gICAqIEByZXR1cm4gdGhlIHNhbWUgb2JqZWN0IGJ1dCB3aXRoIHVwZGF0ZWQgY2hhcmFjdGVyaXN0aWNzIGZvciA3IGVkaXRpb25cbiAgICovXG4gIGFzeW5jIGNvbnZlcnQ3RSAoY3JlYXR1cmUpIHtcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnQ29udmVydGluZyBucGMnLCBjcmVhdHVyZSlcbiAgICB9XG4gICAgZm9yIChjb25zdCBrZXkgb2YgWydzdHInLCAnY29uJywgJ3NpeicsICdkZXgnLCAnYXBwJywgJ2ludCcsICdwb3cnXSkge1xuICAgICAgaWYgKHR5cGVvZiBjcmVhdHVyZVtrZXldICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjcmVhdHVyZVtrZXldICo9IDVcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjcmVhdHVyZS5lZHUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoY3JlYXR1cmUuZWR1IDw9IDE4KSB7XG4gICAgICAgIGNyZWF0dXJlLmVkdSAqPSA1XG4gICAgICB9IGVsc2UgaWYgKGNyZWF0dXJlLmVkdSA8PSAyNikge1xuICAgICAgICBjcmVhdHVyZS5lZHUgPSBjcmVhdHVyZS5lZHUgKyA5MCAtIDE4XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBjcmVhdHVyZS5lZHUgPj0yOFxuICAgICAgICBjcmVhdHVyZS5lZHUgPSA5OVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIGNyZWF0dXJlLmRiICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGNyZWF0dXJlLmRiID09PSAnLTFkNCcpIHtcbiAgICAgICAgY3JlYXR1cmUuZGIgPSAtMVxuICAgICAgfSBlbHNlIGlmIChjcmVhdHVyZS5kYiA9PT0gJy0xZDYnKSB7XG4gICAgICAgIGNyZWF0dXJlLmRiID0gLTJcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUuZGVidWcoJ2NvbnZlcnQ3RTogJywgY3JlYXR1cmUpXG4gICAgfVxuICAgIHJldHVybiBjcmVhdHVyZVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRmlsZSwgRmlsZVBpY2tlciwgZ2FtZSwgdWkgKi9cbmV4cG9ydCBjbGFzcyBDb0M3RGlyZWN0b3J5UGlja2VyIGV4dGVuZHMgRmlsZVBpY2tlciB7XG4gIGdldCB0aXRsZSAoKSB7XG4gICAgcmV0dXJuIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QaWNrRGlyZWN0b3J5JylcbiAgfVxuXG4gIF9vblN1Ym1pdCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcGF0aCA9IGV2ZW50LnRhcmdldC50YXJnZXQudmFsdWVcbiAgICBjb25zdCBhY3RpdmVTb3VyY2UgPSB0aGlzLmFjdGl2ZVNvdXJjZVxuICAgIGNvbnN0IGJ1Y2tldCA9IGV2ZW50LnRhcmdldC5idWNrZXQgPyBldmVudC50YXJnZXQuYnVja2V0LnZhbHVlIDogbnVsbFxuICAgIHRoaXMuZmllbGQudmFsdWUgPSBDb0M3RGlyZWN0b3J5UGlja2VyLmZvcm1hdCh7XG4gICAgICBhY3RpdmVTb3VyY2UsXG4gICAgICBidWNrZXQsXG4gICAgICBwYXRoXG4gICAgfSlcbiAgICB0aGlzLmNsb3NlKClcbiAgfVxuXG4gIHN0YXRpYyBEZWZhdWx0RGlyZWN0b3J5ICh2YWwpIHtcbiAgICByZXR1cm4gdmFsID09PSBudWxsID8gJycgOiBTdHJpbmcodmFsKVxuICB9XG5cbiAgc3RhdGljIGZvcm1hdCAodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUuYnVja2V0ICE9PSBudWxsXG4gICAgICA/IGBbJHt2YWx1ZS5hY3RpdmVTb3VyY2V9OiR7dmFsdWUuYnVja2V0fV0gJHt2YWx1ZS5wYXRofWBcbiAgICAgIDogYFske3ZhbHVlLmFjdGl2ZVNvdXJjZX1dICR7dmFsdWUucGF0aH1gXG4gIH1cblxuICBzdGF0aWMgcGFyc2UgKHJhdykge1xuICAgIGNvbnN0IHN0ciA9IHJhdyA/PyAnJ1xuICAgIGNvbnN0IG1hdGNoZXMgPSBzdHIubWF0Y2goL15cXFsoW146XSspKDooLispKT9cXF1cXHMqKC4rKT8kL3UpXG5cbiAgICBpZiAobWF0Y2hlcykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgYWN0aXZlU291cmNlOiBtYXRjaGVzWzFdLFxuICAgICAgICBidWNrZXQ6IG1hdGNoZXNbM10gPz8gJycsXG4gICAgICAgIGN1cnJlbnQ6IG1hdGNoZXNbNF1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2ZVNvdXJjZTogJ2RhdGEnLFxuICAgICAgYnVja2V0OiBudWxsLFxuICAgICAgY3VycmVudDogc3RyXG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHByb2Nlc3NIdG1sIChodG1sKSB7XG4gICAgJChodG1sKVxuICAgICAgLmZpbmQoJ2lucHV0W2RhdGEtZHR5cGU9XCJEZWZhdWx0RGlyZWN0b3J5XCJdJylcbiAgICAgIC5lYWNoKChpLCBlbCkgPT4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9ICQoZWwpXG4gICAgICAgIGlucHV0LnByb3AoJ3JlYWRvbmx5JywgdHJ1ZSlcbiAgICAgICAgaWYgKCFpbnB1dC5uZXh0KCkubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgcGlja2VyID0gbmV3IENvQzdEaXJlY3RvcnlQaWNrZXIoe1xuICAgICAgICAgICAgZmllbGQ6IGlucHV0WzBdLFxuICAgICAgICAgICAgLi4uQ29DN0RpcmVjdG9yeVBpY2tlci5wYXJzZShpbnB1dC52YWwoKSlcbiAgICAgICAgICB9KVxuICAgICAgICAgIGNvbnN0IHBpY2tlckJ1dHRvbiA9ICQoXG4gICAgICAgICAgICAnPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJmaWxlLXBpY2tlclwiIHRpdGxlPVwiJyArXG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QaWNrRGlyZWN0b3J5JykgK1xuICAgICAgICAgICAgICAnXCI+PGkgY2xhc3M9XCJmYXMgZmEtZmlsZS1pbXBvcnQgZmEtZndcIj48L2k+PC9idXR0b24+J1xuICAgICAgICAgIClcbiAgICAgICAgICBDb0M3RGlyZWN0b3J5UGlja2VyLmNyZWF0ZURlZmF1bHREaXJlY3RvcnkoKVxuICAgICAgICAgIHBpY2tlckJ1dHRvbi5vbignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICBwaWNrZXIucmVuZGVyKHRydWUpXG4gICAgICAgICAgfSlcbiAgICAgICAgICBpbnB1dC5wYXJlbnQoKS5hcHBlbmQocGlja2VyQnV0dG9uKVxuICAgICAgICB9XG4gICAgICB9KVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgJChodG1sKS5maW5kKCdvbC5maWxlcy1saXN0JykucmVtb3ZlKClcbiAgICAkKGh0bWwpLmZpbmQoJ2Zvb3RlciBkaXYnKS5yZW1vdmUoKVxuICAgICQoaHRtbCkuZmluZCgnZm9vdGVyIGJ1dHRvbicpLnRleHQoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBpY2tEaXJlY3RvcnknKSlcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBjcmVhdGVEZWZhdWx0RGlyZWN0b3J5ICgpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBDb0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGhvbGVVcGxvYWREaXJlY3RvcnknKVxuICAgIClcbiAgICB0cnkge1xuICAgICAgYXdhaXQgQ29DN0RpcmVjdG9yeVBpY2tlci5jcmVhdGVEaXJlY3RvcnkoXG4gICAgICAgIHBhcnNlZC5hY3RpdmVTb3VyY2UsXG4gICAgICAgIHBhcnNlZC5jdXJyZW50LFxuICAgICAgICB7IGJ1Y2tldDogcGFyc2VkLmJ1Y2tldCB9XG4gICAgICApXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmICghZS5tZXNzYWdlLnN0YXJ0c1dpdGgoJ0VFWElTVCcpKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXJVcGxvYWRFcnJvcicpXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIHVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeSAoZmlsZSwgZmlsZW5hbWUpIHtcbiAgICBjb25zdCBwYXJzZWQgPSBDb0M3RGlyZWN0b3J5UGlja2VyLnBhcnNlKFxuICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGhvbGVVcGxvYWREaXJlY3RvcnknKVxuICAgIClcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEZpbGVQaWNrZXIudXBsb2FkKFxuICAgICAgcGFyc2VkLmFjdGl2ZVNvdXJjZSxcbiAgICAgIHBhcnNlZC5jdXJyZW50LFxuICAgICAgbmV3IEZpbGUoW2ZpbGVdLCBmaWxlbmFtZSwge1xuICAgICAgICB0eXBlOiAnaW1hZ2UvcG5nJ1xuICAgICAgfSksXG4gICAgICB7IGJ1Y2tldDogcGFyc2VkLmJ1Y2tldCB9XG4gICAgKVxuICAgIGlmICghcmVzcG9uc2UucGF0aCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlsZVVwbG9hZEVycm9yJykpXG4gICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHBhcnNlZC5jdXJyZW50ICsgJy8nICsgZmlsZW5hbWVcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEFjdG9yLCBDT05GSUcsIGR1cGxpY2F0ZSwgZ2FtZSwgdWksIGZldGNoICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5cbi8qKlxuICogQ29DN0FjdG9ySW1wb3J0ZXIgaGVscGVyIGNsYXNzIHRvIGltcG9ydCBhbiBBY3RvciBmcm9tIHRoZSByYXcgdGV4dCBkZXNjcmlwdGlvbi5cbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciB7XG4gIC8qKlxuICAgKiBDb21wb3NlIHRoZSBCYWNrc3RvcnkgZnJvbSB0aGUgZGlmZmVyZW50IGJsb2Nrcy5cbiAgICogQHBhcmFtIHt9IGJhY2tzdG9yeUpTT04gRGhvbGVIb3VzZSBiYWNrc3RvcnkgSlNPTlxuICAgKiBAcmV0dXJucyBIVE1MIHdpdGggdGhlIGZvcm1hdHRlZCBiYWNrc3RvcnlcbiAgICovXG4gIHN0YXRpYyBnZXRCYWNrc3RvcnkgKGJhY2tzdG9yeUpTT04pIHtcbiAgICBjb25zdCBzZWN0aW9ucyA9IFtcbiAgICAgIFsnZGVzY3JpcHRpb24nLCAnRGVzY3JpcHRpb24nXSxcbiAgICAgIFsndHJhaXRzJywgJ1RyYWl0cyddLFxuICAgICAgWydpZGVvbG9neScsICdJZGVvbG9neSddLFxuICAgICAgWydpbmp1cnVlcycsICdJbmp1cmllcycsICdpbmp1cmllcyddLFxuICAgICAgWydwZW9wbGUnLCAnUGVvcGxlJ10sXG4gICAgICBbJ3Bob2JpYXMnLCAnUGhvYmlhcyddLFxuICAgICAgWydsb2NhdGlvbnMnLCAnTG9jYXRpb25zJ10sXG4gICAgICBbJ3RvbWVzJywgJ1RvbWVzJ10sXG4gICAgICBbJ3Bvc3Nlc3Npb25zJywgJ1Bvc3Nlc3Npb25zJ10sXG4gICAgICBbJ2VuY291bnRlcnMnLCAnRW5jb3VudGVycyddXG4gICAgXVxuICAgIGNvbnN0IGJhY2tzdG9yeSA9IHtcbiAgICAgIGJsb2NrOiBbXSxcbiAgICAgIHNlY3Rpb25zOiBbXVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNlY3Rpb24gb2Ygc2VjdGlvbnMpIHtcbiAgICAgIGlmIChiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dICE9PSBudWxsKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2VjdGlvblsyXSA9PT0gJ3VuZGVmaW5lZCcgfHwgc2VjdGlvblsyXSA9PT0gJycpIHtcbiAgICAgICAgICBzZWN0aW9uWzJdID0gc2VjdGlvblswXVxuICAgICAgICB9XG4gICAgICAgIGJhY2tzdG9yeS5ibG9jay5wdXNoKFxuICAgICAgICAgIGA8aDM+JHtzZWN0aW9uWzFdfTwvaDM+XFxuPGRpdiBjbGFzcz1cIiR7c2VjdGlvblsyXX1cIj5cXG4ke1xuICAgICAgICAgICAgYmFja3N0b3J5SlNPTltzZWN0aW9uWzBdXVxuICAgICAgICAgIH1cXG48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgICAgYmFja3N0b3J5LnNlY3Rpb25zLnB1c2goe1xuICAgICAgICAgIHRpdGxlOiBzZWN0aW9uWzFdLFxuICAgICAgICAgIHZhbHVlOiBiYWNrc3RvcnlKU09OW3NlY3Rpb25bMF1dXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGJhY2tzdG9yeS5ibG9jayA9XG4gICAgICAnPGgyPkJhY2tzdG9yeTwvaDI+XFxuJyArIGJhY2tzdG9yeS5ibG9jay5qb2luKCdcXG4nLCBiYWNrc3RvcnkuYmxvY2spXG4gICAgcmV0dXJuIGJhY2tzdG9yeVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7SlNPTn0gZGhvbGVIb3VzZURhdGEgRGhvbGVIb3VzZUpTT05cbiAgICogQHJldHVybnNcbiAgICovXG4gIHN0YXRpYyBhc3luYyBjb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEgKGRob2xlSG91c2VEYXRhLCBvcHRpb25zKSB7XG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTb3VyY2U6JywgZGhvbGVIb3VzZURhdGEpXG4gICAgfVxuICAgIGRob2xlSG91c2VEYXRhID0gZGhvbGVIb3VzZURhdGEuSW52ZXN0aWdhdG9yXG4gICAgY29uc3QgYmFja3N0b3JpZXMgPSBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuZ2V0QmFja3N0b3J5KFxuICAgICAgZGhvbGVIb3VzZURhdGEuQmFja3N0b3J5XG4gICAgKVxuICAgIGNvbnN0IGNEYXRhID0ge1xuICAgICAgbmFtZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLk5hbWUsXG4gICAgICBhY3Rvcjoge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcbiAgICAgICAgICBzdHI6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TVFIsIDEwKSB9LFxuICAgICAgICAgIGNvbjogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkNPTiwgMTApIH0sXG4gICAgICAgICAgc2l6OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU0laLCAxMCkgfSxcbiAgICAgICAgICBkZXg6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5ERVgsIDEwKSB9LFxuICAgICAgICAgIGFwcDogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkFQUCwgMTApIH0sXG4gICAgICAgICAgaW50OiB7IHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSU5ULCAxMCkgfSxcbiAgICAgICAgICBwb3c6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5QT1csIDEwKSB9LFxuICAgICAgICAgIGVkdTogeyB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkVEVSwgMTApIH1cbiAgICAgICAgfSxcbiAgICAgICAgYXR0cmliczoge1xuICAgICAgICAgIHNhbjoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5TYW5pdHksIDEwKSxcbiAgICAgICAgICAgIG1heDogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLlNhbml0eU1heCwgMTApLFxuICAgICAgICAgICAgZGFpbHlMaW1pdDogTWF0aC5mbG9vcihkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuU2FuaXR5IC8gNSlcbiAgICAgICAgICB9LFxuICAgICAgICAgIGhwOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkhpdFB0cywgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuSGl0UHRzTWF4LCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1wOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLk1hZ2ljUHRzLCAxMCksXG4gICAgICAgICAgICBtYXg6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5NYWdpY1B0c01heCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBsY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTHVjaywgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBtb3Y6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTW92ZSwgMTApLFxuICAgICAgICAgICAgbWF4OiBwYXJzZUludChkaG9sZUhvdXNlRGF0YS5DaGFyYWN0ZXJpc3RpY3MuTW92ZSwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYjogeyB2YWx1ZTogZGhvbGVIb3VzZURhdGEuQ2hhcmFjdGVyaXN0aWNzLkRhbWFnZUJvbnVzIH0sXG4gICAgICAgICAgYnVpbGQ6IHsgdmFsdWU6IHBhcnNlSW50KGRob2xlSG91c2VEYXRhLkNoYXJhY3RlcmlzdGljcy5CdWlsZCwgMTApIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5mb3M6IHtcbiAgICAgICAgICBvY2N1cGF0aW9uOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuT2NjdXBhdGlvbixcbiAgICAgICAgICBhZ2U6IGRob2xlSG91c2VEYXRhLlBlcnNvbmFsRGV0YWlscy5BZ2UsXG4gICAgICAgICAgc2V4OiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuR2VuZGVyLFxuICAgICAgICAgIHJlc2lkZW5jZTogZGhvbGVIb3VzZURhdGEuUGVyc29uYWxEZXRhaWxzLlJlc2lkZW5jZSxcbiAgICAgICAgICBiaXJ0aHBsYWNlOiBkaG9sZUhvdXNlRGF0YS5QZXJzb25hbERldGFpbHMuQmlydGhwbGFjZVxuICAgICAgICB9LFxuICAgICAgICBiYWNrc3Rvcnk6IGJhY2tzdG9yaWVzLmJsb2NrLFxuICAgICAgICBiaW9ncmFwaHk6IGJhY2tzdG9yaWVzLnNlY3Rpb25zLFxuICAgICAgICBkZXNjcmlwdGlvbjoge1xuICAgICAgICAgIGtlZXBlcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRob2xlSG91c2VBY3RvckltcG9ydGVyU291cmNlJylcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNraWxsczogYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmV4dHJhY3RTa2lsbHMoXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlNraWxscy5Ta2lsbCA/PyBbXSxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKSxcbiAgICAgIHBvc3Nlc2lvbnM6IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0UG9zc2Vzc2lvbnMoXG4gICAgICAgIGRob2xlSG91c2VEYXRhLlBvc3Nlc3Npb25zPy5pdGVtID8/IFtdLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBjRGF0YVxuICB9XG5cbiAgc3RhdGljIG1ha2VTa2lsbE5hbWUgKG5hbWUsIHNwZWNpYWxpemF0aW9uKSB7XG4gICAgaWYgKHNwZWNpYWxpemF0aW9uID09PSAnTm9uZScpIHtcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ0FueSdcbiAgICB9XG4gICAgaWYgKG5hbWUgPT09ICdMYW5ndWFnZSAoT3RoZXIpJyB8fCBuYW1lID09PSAnTGFuZ3VhZ2UgKE93biknKSB7XG4gICAgICBuYW1lID0gJ0xhbmd1YWdlJ1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ09wZXJhdGUgSGVhdnkgTWFjaGluZScpIHtcbiAgICAgIG5hbWUgPSAnT3BlcmF0ZSBIZWF2eSBNYWNoaW5lcnknXG4gICAgfSBlbHNlIGlmIChuYW1lID09PSAnVGhyb3cnICYmIHNwZWNpYWxpemF0aW9uID09PSAnJykge1xuICAgICAgbmFtZSA9ICdGaWdodGluZydcbiAgICAgIHNwZWNpYWxpemF0aW9uID0gJ1Rocm93J1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgc2tpbGxOYW1lOiBzcGVjaWFsaXphdGlvbiA9PT0gJycgPyBuYW1lIDogc3BlY2lhbGl6YXRpb24sXG4gICAgICBzcGVjaWFsaXphdGlvbjogc3BlY2lhbGl6YXRpb24gPT09ICcnID8gJycgOiBuYW1lLFxuICAgICAgbmFtZTogbmFtZSArIChzcGVjaWFsaXphdGlvbiA9PT0gJycgPyAnJyA6ICcgKCcgKyBzcGVjaWFsaXphdGlvbiArICcpJylcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZXh0cmFjdFNraWxscyAoZGhvbGVIb3VzZXNraWxscywgb3B0aW9ucykge1xuICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgZm9yIChjb25zdCBza2lsbCBvZiBkaG9sZUhvdXNlc2tpbGxzKSB7XG4gICAgICBpZiAoXG4gICAgICAgIHNraWxsLnN1YnNraWxsID09PSAnTm9uZScgJiZcbiAgICAgICAgc2tpbGwudmFsdWUgPT09ICcxJyAmJlxuICAgICAgICBza2lsbC5oYWxmID09PSAnMCcgJiZcbiAgICAgICAgc2tpbGwuZmlmdGggPT09ICcwJ1xuICAgICAgKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBjb25zdCBwYXJ0cyA9IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5tYWtlU2tpbGxOYW1lKFxuICAgICAgICBza2lsbC5uYW1lLFxuICAgICAgICBza2lsbC5zdWJza2lsbCA/PyAnJ1xuICAgICAgKVxuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnc2tpbGwnLCBwYXJ0cy5uYW1lLCB7XG4gICAgICAgIHNvdXJjZTogb3B0aW9ucy5zb3VyY2UsXG4gICAgICAgIGZhbGxiYWNrQW55OiB0cnVlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxuICAgICAgICBjbG9uZWQubmFtZSA9IHBhcnRzLm5hbWVcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5za2lsbE5hbWUgPSBwYXJ0cy5za2lsbE5hbWVcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5zcGVjaWFsaXphdGlvbiA9IHBhcnRzLnNwZWNpYWxpemF0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjbG9uZWQgPSBDb0NBY3Rvci5lbXB0eVNraWxsKFxuICAgICAgICAgIHBhcnRzLnNraWxsTmFtZSxcbiAgICAgICAgICBwYXJzZUludChza2lsbC52YWx1ZSA/PyAwLCAxMCksXG4gICAgICAgICAge1xuICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246XG4gICAgICAgICAgICAgIHBhcnRzLnNwZWNpYWxpemF0aW9uID09PSAnJyA/IGZhbHNlIDogcGFydHMuc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID0gY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID8/IHt9XG4gICAgICAgIGlmIChwYXJ0cy5zcGVjaWFsaXphdGlvbiA9PT0gJ0ZpZ2h0aW5nJykge1xuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZyA9IHRydWVcbiAgICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMuY29tYmF0ID0gdHJ1ZVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5wdXNoID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmIChwYXJ0cy5zcGVjaWFsaXphdGlvbiA9PT0gJ0ZpcmVhcm1zJykge1xuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5maXJlYXJtID0gdHJ1ZVxuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQgPSB0cnVlXG4gICAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzLnB1c2ggPSBmYWxzZVxuICAgICAgICB9IGVsc2UgaWYgKHBhcnRzLnNraWxsTmFtZSA9PT0gJ0RvZGdlJykge1xuICAgICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5wdXNoID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGNsb25lZC5zeXN0ZW0uc2tpbGxOYW1lID09PSAnQW55Jykge1xuICAgICAgICBjbG9uZWQubmFtZSA9IGNsb25lZC5uYW1lLnJlcGxhY2UoJyAoQW55KScsICcgKE5vbmUpJylcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5za2lsbE5hbWUgPSAnTm9uZSdcbiAgICAgIH1cbiAgICAgIGNsb25lZC5zeXN0ZW0uYmFzZSA9IHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKVxuICAgICAgY2xvbmVkLnN5c3RlbS52YWx1ZSA9IHBhcnNlSW50KHNraWxsLnZhbHVlID8/IDAsIDEwKVxuICAgICAgY2xvbmVkLnN5c3RlbS5mbGFncyA9IGNsb25lZC5zeXN0ZW0uZmxhZ3MgPz8ge31cbiAgICAgIGNsb25lZC5zeXN0ZW0uZmxhZ3Mub2NjdXBhdGlvbiA9XG4gICAgICAgIHNraWxsLm9jY3VwYXRpb24gPT09IHRydWUgfHwgc2tpbGwub2NjdXBhdGlvbiA9PT0gJ3RydWUnXG4gICAgICBza2lsbHMucHVzaChjbG9uZWQpXG4gICAgfVxuICAgIHJldHVybiBza2lsbHNcbiAgfVxuXG4gIHN0YXRpYyBmaW5kV2VhcG9uU2tpbGxJZCAoc2tpbGxOYW1lLCBjaGFyYWN0ZXIpIHtcbiAgICBjb25zdCBza2lsbHMgPSBjaGFyYWN0ZXIuZ2V0RW1iZWRkZWRDb2xsZWN0aW9uKCdJdGVtJylcbiAgICBjb25zdCBjaGVja05hbWUgPSBza2lsbE5hbWUucmVwbGFjZSgvXlxcKCguKylcXCkkLywgJyQxJylcbiAgICBjb25zdCBjaGFyYWN0ZXJTa2lsbCA9IHNraWxscy5maW5kKGkgPT4ge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgaS5zeXN0ZW0/LnNraWxsTmFtZSA9PT0gY2hlY2tOYW1lIHx8XG4gICAgICAgIGkuc3lzdGVtPy5za2lsbE5hbWU/LmluZGV4T2YoY2hlY2tOYW1lKSA+IC0xXG4gICAgICApXG4gICAgfSlcbiAgICByZXR1cm4gY2hhcmFjdGVyU2tpbGxcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBleHRyYWN0UG9zc2Vzc2lvbnMgKGRob2xlaG91c2VQb3NzZXNzaW9ucywgb3B0aW9ucykge1xuICAgIGNvbnN0IGl0ZW1zID0gW11cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGhvbGVob3VzZVBvc3Nlc3Npb25zKSAmJiBkaG9sZWhvdXNlUG9zc2Vzc2lvbnMgIT0gbnVsbCkge1xuICAgICAgZGhvbGVob3VzZVBvc3Nlc3Npb25zID0gW2Rob2xlaG91c2VQb3NzZXNzaW9uc11cbiAgICB9XG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRob2xlaG91c2VQb3NzZXNzaW9ucykge1xuICAgICAgY29uc3QgZXhpc3RpbmcgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmd1ZXNzSXRlbSgnaXRlbScsIGl0ZW0uZGVzY3JpcHRpb24sIHtcbiAgICAgICAgc291cmNlOiBvcHRpb25zLnNvdXJjZVxuICAgICAgfSlcbiAgICAgIGxldCBjbG9uZWQgPSBudWxsXG4gICAgICBpZiAodHlwZW9mIGV4aXN0aW5nICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjbG9uZWQgPSBkdXBsaWNhdGUoZXhpc3RpbmcudG9PYmplY3QoKSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsb25lZCA9IHtcbiAgICAgICAgICBuYW1lOiBpdGVtLmRlc2NyaXB0aW9uLFxuICAgICAgICAgIHR5cGU6ICdpdGVtJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpdGVtcy5wdXNoKGNsb25lZClcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZXh0cmFjdFdlYXBvbnMgKGRob2xlaG91c2VXZWFwb25zLCBjaGFyYWN0ZXIsIG9wdGlvbnMpIHtcbiAgICBjb25zdCB3ZWFwb25zID0gW11cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoZGhvbGVob3VzZVdlYXBvbnMpKSB7XG4gICAgICBkaG9sZWhvdXNlV2VhcG9ucyA9IFtkaG9sZWhvdXNlV2VhcG9uc11cbiAgICB9XG4gICAgZm9yIChjb25zdCB3ZWFwb24gb2YgZGhvbGVob3VzZVdlYXBvbnMpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLmZpbmRXZWFwb25Ta2lsbElkKFxuICAgICAgICB3ZWFwb24uc2tpbGxuYW1lLFxuICAgICAgICBjaGFyYWN0ZXJcbiAgICAgIClcbiAgICAgIGNvbnN0IGRhbWFnZSA9IHdlYXBvbi5kYW1hZ2UucmVwbGFjZSgvXFwrREIvaSwgJycpXG4gICAgICBjb25zdCBhZGRiID0gZGFtYWdlICE9PSB3ZWFwb24uZGFtYWdlXG4gICAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ3Vlc3NJdGVtKCd3ZWFwb24nLCB3ZWFwb24ubmFtZSwge1xuICAgICAgICBzb3VyY2U6IG9wdGlvbnMuc291cmNlXG4gICAgICB9KVxuICAgICAgbGV0IGNsb25lZCA9IG51bGxcbiAgICAgIGlmICh0eXBlb2YgZXhpc3RpbmcgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGNsb25lZCA9IGR1cGxpY2F0ZShleGlzdGluZy50b09iamVjdCgpKVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnNraWxsLm1haW4ubmFtZSA9IHNraWxsPy5uYW1lID8/ICcnXG4gICAgICAgIGNsb25lZC5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHNraWxsPy5pZCA/PyAnJ1xuICAgICAgICBjbG9uZWQuc3lzdGVtLnJhbmdlID0gY2xvbmVkLnN5c3RlbS5yYW5nZSA/PyB7fVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnJhbmdlLm5vcm1hbCA9IGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucmFuZ2Uubm9ybWFsLmRhbWFnZSA9IGRhbWFnZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLmFtbW8gPSB3ZWFwb24uYW1tb1xuICAgICAgICBjbG9uZWQuc3lzdGVtLm1hbGZ1bmN0aW9uID0gd2VhcG9uLm1hbGZcbiAgICAgICAgY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID0gY2xvbmVkLnN5c3RlbS5wcm9wZXJ0aWVzID8/IHt9XG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5tZWxlZSA9XG4gICAgICAgICAgc2tpbGw/LnN5c3RlbS5wcm9wZXJ0aWVzPy5maWdodGluZyA/PyBmYWxzZVxuICAgICAgICBjbG9uZWQuc3lzdGVtLnByb3BlcnRpZXMucm5nZCA9XG4gICAgICAgICAgc2tpbGw/LnN5c3RlbS5wcm9wZXJ0aWVzPy5maXJlYXJtID8/IGZhbHNlXG4gICAgICAgIGNsb25lZC5zeXN0ZW0ucHJvcGVydGllcy5hZGRiID0gYWRkYlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2xvbmVkID0ge1xuICAgICAgICAgIG5hbWU6IHdlYXBvbi5uYW1lLFxuICAgICAgICAgIHR5cGU6ICd3ZWFwb24nLFxuICAgICAgICAgIHN5c3RlbToge1xuICAgICAgICAgICAgc2tpbGw6IHtcbiAgICAgICAgICAgICAgbWFpbjoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNraWxsPy5uYW1lID8/ICcnLFxuICAgICAgICAgICAgICAgIGlkOiBza2lsbD8uaWQgPz8gJydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHJhbmdlOiB7XG4gICAgICAgICAgICAgIG5vcm1hbDoge1xuICAgICAgICAgICAgICAgIGRhbWFnZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYW1tbzogd2VhcG9uLmFtbW8sXG4gICAgICAgICAgICBtYWxmdW5jdGlvbjogd2VhcG9uLm1hbGYsXG4gICAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICAgIG1lbGVlOiBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpZ2h0aW5nID8/IGZhbHNlLFxuICAgICAgICAgICAgICBybmdkOiBza2lsbD8uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0gPz8gZmFsc2UsXG4gICAgICAgICAgICAgIGFkZGJcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHdlYXBvbnMucHVzaChjbG9uZWQpXG4gICAgfVxuICAgIHJldHVybiB3ZWFwb25zXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2F2ZVBvcnRyYWl0IChiYXNlNjRQb3J0cmFpdCwgZmlsZU5hbWUpIHtcbiAgICBjb25zdCBiYXNlNjRSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgJ2RhdGE6aW1hZ2UvcG5nO2Jhc2U2NCwnICsgYmFzZTY0UG9ydHJhaXRcbiAgICApXG4gICAgY29uc3QgaW1hZ2VCbG9iID0gYXdhaXQgYmFzZTY0UmVzcG9uc2UuYmxvYigpXG4gICAgY29uc3QgZmlsZVBhdGggPSBDb0M3RGlyZWN0b3J5UGlja2VyLnVwbG9hZFRvRGVmYXVsdERpcmVjdG9yeShcbiAgICAgIGltYWdlQmxvYixcbiAgICAgIGZpbGVOYW1lXG4gICAgKVxuICAgIHJldHVybiBmaWxlUGF0aFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZU5QQ0Zyb21EaG9sZUhvdXNlIChkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSwgb3B0aW9ucykge1xuICAgIGlmICghZ2FtZS51c2VyPy5jYW4oJ0ZJTEVTX1VQTE9BRCcpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0b3JJbXBvcnRlclVwbG9hZEVycm9yJylcbiAgICAgIClcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBjaGFyYWN0ZXJEYXRhID1cbiAgICAgIGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5jb252ZXJ0RGhvbGVIb3VzZUNoYXJhY3RlckRhdGEoXG4gICAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLFxuICAgICAgICBvcHRpb25zXG4gICAgICApXG4gICAgaWYgKENPTkZJRy5kZWJ1Zy5Db0M3SW1wb3J0ZXIpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdDaGFyYWN0ZXIgRGF0YTonLCBjaGFyYWN0ZXJEYXRhKVxuICAgIH1cbiAgICBjb25zdCBpbXBvcnRlZENoYXJhY3RlcnNGb2xkZXIgPVxuICAgICAgYXdhaXQgQ29DN1V0aWxpdGllcy5jcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMoKVxuICAgIGlmICghQ29DN0RpcmVjdG9yeVBpY2tlci5jcmVhdGVEZWZhdWx0RGlyZWN0b3J5KCkpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBhY3RvckRhdGEgPSB7XG4gICAgICBuYW1lOiBjaGFyYWN0ZXJEYXRhLm5hbWUsXG4gICAgICB0eXBlOiAnY2hhcmFjdGVyJyxcbiAgICAgIGZvbGRlcjogaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyLmlkLFxuICAgICAgZGF0YTogY2hhcmFjdGVyRGF0YS5hY3RvclxuICAgIH1cbiAgICBjb25zdCBucGMgPSBhd2FpdCBBY3Rvci5jcmVhdGUoYWN0b3JEYXRhKVxuICAgIC8vIElmIHBvc3NpYmxlIHVwbG9hZCB0aGUgaW1hZ2UgcG9ydHJhaXRcbiAgICBpZiAoXG4gICAgICBkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YS5JbnZlc3RpZ2F0b3IuUGVyc29uYWxEZXRhaWxzLlBvcnRyYWl0Py5sZW5ndGggPiAxMFxuICAgICkge1xuICAgICAgY29uc3QgZmlsZU5hbWUgPSAnYXZhdGFyLScgKyBucGMuaWQgKyAnLnBuZydcbiAgICAgIGNvbnN0IHBvcnRyYWl0ID0gYXdhaXQgQ29DN0Rob2xlSG91c2VBY3RvckltcG9ydGVyLnNhdmVQb3J0cmFpdChcbiAgICAgICAgZGhvbGVIb3VzZUNoYXJhY3RlckRhdGEuSW52ZXN0aWdhdG9yLlBlcnNvbmFsRGV0YWlscy5Qb3J0cmFpdCxcbiAgICAgICAgZmlsZU5hbWVcbiAgICAgIClcbiAgICAgIGlmIChwb3J0cmFpdCAhPT0gZmFsc2UpIHtcbiAgICAgICAgbnBjLnVwZGF0ZSh7XG4gICAgICAgICAgaW1nOiBwb3J0cmFpdFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5sb2coJ0l0ZW1zOiAnLCBjaGFyYWN0ZXJEYXRhLml0ZW1zKVxuICAgIH1cbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBjaGFyYWN0ZXJEYXRhLnNraWxscywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcbiAgICBhd2FpdCBucGMuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBjaGFyYWN0ZXJEYXRhLnBvc3Nlc2lvbnMsIHtcbiAgICAgIHJlbmRlclNoZWV0OiBmYWxzZVxuICAgIH0pXG4gICAgY29uc3Qgd2VhcG9ucyA9IGF3YWl0IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlci5leHRyYWN0V2VhcG9ucyhcbiAgICAgIGRob2xlSG91c2VDaGFyYWN0ZXJEYXRhLkludmVzdGlnYXRvci5XZWFwb25zPy53ZWFwb24gPz8gW10sXG4gICAgICBucGMsXG4gICAgICBvcHRpb25zXG4gICAgKVxuICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICBjb25zb2xlLmxvZygnV2VhcG9uczogJywgd2VhcG9ucylcbiAgICB9XG4gICAgYXdhaXQgbnBjLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgd2VhcG9ucywge1xuICAgICAgcmVuZGVyU2hlZXQ6IGZhbHNlXG4gICAgfSlcblxuICAgIHJldHVybiBucGNcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgRm9ybUFwcGxpY2F0aW9uLCBnYW1lLCBIb29rcywgbWVyZ2VPYmplY3QsIHVpLCBGaWxlUmVhZGVyICovXG5cbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyIH0gZnJvbSAnLi9hY3Rvci1pbXBvcnRlci5qcydcbmltcG9ydCB7IENvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciB9IGZyb20gJy4vZGhvbGVob3VzZV9pbXBvcnRlci5qcydcbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyUmVnRXhwIH0gZnJvbSAnLi9hY3Rvci1pbXBvcnRlci1yZWdleHAuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZycsICdhY3Rvci1pbXBvcnRlciddLFxuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BY3RvckltcG9ydGVyJyksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9hY3Rvci1pbXBvcnRlci5odG1sJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgd2lkdGg6IDYwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgfSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgZGF0YS5pbXBvcnRUeXBlID0gZGF0YS5vYmplY3QuaW1wb3J0VHlwZVxuICAgIGRhdGEuY29udmVydDZFID0gZGF0YS5vYmplY3QuY29udmVydDZFXG4gICAgZGF0YS5zb3VyY2UgPSBkYXRhLm9iamVjdC5zb3VyY2VcbiAgICBkYXRhLmNoYXJhY3RlckRhdGEgPSBkYXRhLm9iamVjdC5jaGFyYWN0ZXJEYXRhXG4gICAgZGF0YS5jYW5VcGxvYWQgPSBnYW1lLnVzZXI/LmNhbignRklMRVNfVVBMT0FEJylcbiAgICBpZiAoWyducGMnLCAnY3JlYXR1cmUnXS5pbmNsdWRlcyhkYXRhLmltcG9ydFR5cGUpKSB7XG4gICAgICBkYXRhLmxhbmd1YWdlcyA9IENvQzdBY3RvckltcG9ydGVyUmVnRXhwLmdldFRyYW5zbGF0aW9ucygpXG4gICAgICBkYXRhLmxhbmd1YWdlID0gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuY2hlY2tMYW5ndWFnZShcbiAgICAgICAgZGF0YS5vYmplY3QubGFuZ3VhZ2VcbiAgICAgIClcbiAgICAgIGRhdGEucGxhY2Vob2xkZXIgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRFeGFtcGxlVGV4dChkYXRhLmxhbmd1YWdlKVxuICAgIH1cblxuICAgIHJldHVybiBkYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sLmZpbmQoJyNkaG9sZWhvdXNlLWNoYXJhY3Rlci1wcmV2aWV3JykuaGlkZSgpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJyNjb2MtZW50aXR5LXR5cGUsI2NvYy1lbnRpdHktbGFuZycpXG4gICAgICAuY2hhbmdlKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJyNkaG9sZWhvdXNlLWpzb24tZmlsZS1waWNrZXInKVxuICAgICAgLmNoYW5nZSh0aGlzLl9vbkpTT05GaWxlU2VsZWN0ZWQuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcjY29jLXBhc3RlZC1jaGFyYWN0ZXItZGF0YScpXG4gICAgICAub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyc1Rvb0V4dGVuZGVkID0gJCh0aGlzKVxuICAgICAgICAgIC52YWwoKVxuICAgICAgICAgIC5tYXRjaCgvW1xcdWRiYzAtXFx1ZGJmZV1bXFx1ZGMwMC1cXHVkZmZmXS8pXG4gICAgICAgIGNvbnN0IHByb21wdCA9ICQoJyNjb2MtcHJvbXB0JylcbiAgICAgICAgaWYgKHByb21wdC5kYXRhKCdleHRlbmRlZCcpICYmIGNoYXJhY3RlcnNUb29FeHRlbmRlZCkge1xuICAgICAgICAgIHByb21wdFxuICAgICAgICAgICAgLmh0bWwoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRleHRGaWVsZEludmFsaWRDaGFyYWN0ZXJzJykpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2Vycm9yJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm9tcHQuaHRtbChwcm9tcHQuZGF0YSgndGV4dCcpKS5yZW1vdmVDbGFzcygnZXJyb3InKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLnRyaWdnZXIoJ2tleXVwJylcblxuICAgIGh0bWwuZmluZCgnLnN1Ym1pdC1idXR0b24nKS5jbGljayh0aGlzLl9vbkNsaWNrU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdmb3JtJykuc3VibWl0KGUgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcmV0dXJucyBnZXRJbnB1dHMgZXh0cmFjdHMgdGhlIGRhdGEgZnJvbSB0aGUgaW5wdXQgZmllbGRzIGFuZFxuICAgKiBhZGRzIGEgYC5gIGF0IHRoZSBlbmQgaWYgaXQncyBub3QgYWxyZWFkeSB0aGVyZS5cbiAgICovXG4gIHN0YXRpYyBnZXRJbnB1dHMgKGZvcm0pIHtcbiAgICBjb25zdCBpbnB1dHMgPSB7fVxuICAgIGlucHV0cy5lbnRpdHkgPSBmb3JtLmZpbmQoJyNjb2MtZW50aXR5LXR5cGUnKS52YWwoKS50cmltKClcbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnZW50aXR5IHR5cGU6JywgaW5wdXRzLmVudGl0eSlcbiAgICB9XG4gICAgaWYgKGZvcm0uZmluZCgnI2NvYy1jb252ZXJ0LTZFJykubGVuZ3RoID4gMCkge1xuICAgICAgaW5wdXRzLmNvbnZlcnRGcm9tNkUgPSBmb3JtLmZpbmQoJyNjb2MtY29udmVydC02RScpLnZhbCgpLnRyaW0oKVxuICAgIH1cbiAgICBpZiAoZm9ybS5maW5kKCcjY29jLWVudGl0eS1sYW5nJykubGVuZ3RoID4gMCkge1xuICAgICAgaW5wdXRzLmxhbmcgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5jaGVja0xhbmd1YWdlKFxuICAgICAgICBmb3JtLmZpbmQoJyNjb2MtZW50aXR5LWxhbmcnKS52YWwoKS50cmltKClcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGZvcm0uZmluZCgnI3NvdXJjZScpLmxlbmd0aCA+IDApIHtcbiAgICAgIGlucHV0cy5zb3VyY2UgPSBmb3JtLmZpbmQoJyNzb3VyY2UnKS52YWwoKS50cmltKClcbiAgICB9XG4gICAgaWYgKGZvcm0uZmluZCgnI2NvYy1wYXN0ZWQtY2hhcmFjdGVyLWRhdGEnKS5sZW5ndGggPiAwKSB7XG4gICAgICBpbnB1dHMudGV4dCA9IGZvcm0uZmluZCgnI2NvYy1wYXN0ZWQtY2hhcmFjdGVyLWRhdGEnKS52YWwoKS50cmltKClcbiAgICB9XG5cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygncmVjZWl2ZWQgdGV4dCcsICcjIycgKyBpbnB1dHMudGV4dCArICcjIycpXG4gICAgfVxuICAgIHJldHVybiBpbnB1dHNcbiAgfVxuXG4gIF9vbkpTT05GaWxlU2VsZWN0ZWQgKGV2ZW50KSB7XG4gICAgY29uc3QganNvbkZpbGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaG9sZWhvdXNlLWpzb24tZmlsZS1waWNrZXInKVxuICAgIGNvbnN0IHBvcnRyYWl0SW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcbiAgICAgICdkaG9sZWhvdXNlLWNoYXJhY3Rlci1wb3J0cmFpdCdcbiAgICApXG4gICAgY29uc3QgY2hhcmFjdGVyTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkaG9sZWhvdXNlLWNoYXJhY3Rlci1uYW1lJylcbiAgICBjb25zdCBwcmV2aWV3ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2Rob2xlaG91c2UtY2hhcmFjdGVyLXByZXZpZXcnKVxuICAgIGNvbnN0IGZpbGUgPSBqc29uRmlsZUlucHV0LmZpbGVzWzBdXG4gICAgY29uc3QgZGlhbG9nID0gdGhpc1xuICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgZGlhbG9nLmNoYXJhY3RlckpTT04gPSBKU09OLnBhcnNlKGZpbGVSZWFkZXIucmVzdWx0KVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAkKCcjY29jLXByb21wdCcpXG4gICAgICAgICAgLmh0bWwoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRleHRGaWVsZEludmFsaWRKU09OJykpXG4gICAgICAgICAgLmFkZENsYXNzKCdlcnJvcicpXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG4gICAgICBjb25zdCBwZXJzb25hbERldGFpbHMgPVxuICAgICAgICBkaWFsb2cuY2hhcmFjdGVySlNPTj8uSW52ZXN0aWdhdG9yPy5QZXJzb25hbERldGFpbHNcbiAgICAgIGlmICghcGVyc29uYWxEZXRhaWxzKSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkRob2xlSG91c2VJbnZhbGlkQWN0b3InKVxuICAgICAgICApXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuICAgICAgY2hhcmFjdGVyTmFtZS50ZXh0Q29udGVudCA9IHBlcnNvbmFsRGV0YWlscy5OYW1lXG4gICAgICBwb3J0cmFpdEltYWdlLnNyYyA9ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsJyArIHBlcnNvbmFsRGV0YWlscy5Qb3J0cmFpdFxuICAgICAgcHJldmlldy5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgICAgJCgnLmRpYWxvZy5hY3Rvci1pbXBvcnRlcicpLmhlaWdodCgnYXV0bycpXG4gICAgfVxuICAgIGZpbGVSZWFkZXIucmVhZEFzVGV4dChmaWxlKVxuICB9XG5cbiAgX29uQ2hhbmdlU3VibWl0IChldmVudCkge1xuICAgIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICB9XG5cbiAgYXN5bmMgX29uQ2xpY2tTdWJtaXQgKGV2ZW50KSB7XG4gICAgY29uc3QgaWQgPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYnV0dG9uXG4gICAgaWYgKGlkID09PSAnbm8nKSB7XG4gICAgICB0aGlzLmNsb3NlKClcbiAgICB9IGVsc2UgaWYgKGlkID09PSAnZ2V0RXhhbXBsZU5vdycpIHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cC5nZXRFeGFtcGxlVGV4dChcbiAgICAgICAgdGhpcy5vYmplY3QubGFuZ3VhZ2VcbiAgICAgIClcbiAgICAgIENvQzdVdGlsaXRpZXMuY29weVRvQ2xpcGJvYXJkKGNvbnRlbnQpLnRoZW4oKCkgPT4ge1xuICAgICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5pbmZvKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db3BpZWQnKSlcbiAgICAgIH0pXG4gICAgfSBlbHNlIGlmIChpZCA9PT0gJ2ltcG9ydCcpIHtcbiAgICAgIGNvbnN0IGFwcCA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnZGl2LmRpYWxvZy5hY3Rvci1pbXBvcnRlcicpXG4gICAgICBhcHAuaGlkZSgpXG4gICAgICBjb25zdCBmb3JtID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5jbG9zZXN0KCdmb3JtJylcbiAgICAgIGNvbnN0IGlucHV0cyA9IENvQzdBY3RvckltcG9ydGVyRGlhbG9nLmdldElucHV0cyhmb3JtKVxuICAgICAgaWYgKGlucHV0cy5lbnRpdHkgPT09ICdkaG9sZWhvdXNlJyAmJiB0aGlzLmNoYXJhY3RlckpTT04pIHtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyID1cbiAgICAgICAgICBhd2FpdCBDb0M3RGhvbGVIb3VzZUFjdG9ySW1wb3J0ZXIuY3JlYXRlTlBDRnJvbURob2xlSG91c2UoXG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlckpTT04sXG4gICAgICAgICAgICB7IHNvdXJjZTogaW5wdXRzLnNvdXJjZSB9XG4gICAgICAgICAgKVxuICAgICAgICBpZiAoY2hhcmFjdGVyICE9PSBmYWxzZSkge1xuICAgICAgICAgIGlmIChDT05GSUcuZGVidWcuQ29DN0ltcG9ydGVyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdjaGFyYWN0ZXI6JywgY2hhcmFjdGVyKVxuICAgICAgICAgIH1cbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmluZm8oXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFjdG9ySW1wb3J0ZWQnLCB7XG4gICAgICAgICAgICAgIGFjdG9yVHlwZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLkNoYXJhY3RlcicpLFxuICAgICAgICAgICAgICBhY3Rvck5hbWU6IGNoYXJhY3Rlci5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgICBhd2FpdCBjaGFyYWN0ZXIuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICAgICAgdGhpcy5jbG9zZSgpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXBwLnNob3coKVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGlucHV0cy50ZXh0ICYmIGlucHV0cy50ZXh0ICE9PSAnJykge1xuICAgICAgICBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5pbXBvcnRBY3RvcihpbnB1dHMpXG4gICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYXBwLnNob3coKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGVcbiAgICogQSBzdWJjbGFzcyBvZiB0aGUgRm9ybUFwcGxpY2F0aW9uIG11c3QgaW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZC5cbiAgICovXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBmb3JtRGF0YSkge1xuICAgIHRoaXMub2JqZWN0LmltcG9ydFR5cGUgPSBmb3JtRGF0YVsnY29jLWVudGl0eS10eXBlJ11cbiAgICB0aGlzLm9iamVjdC5jaGFyYWN0ZXJEYXRhID0gZm9ybURhdGFbJ2NvYy1wYXN0ZWQtY2hhcmFjdGVyLWRhdGEnXT8udHJpbSgpXG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnY29jLWNvbnZlcnQtNkUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmNvbnZlcnQ2RSA9IGZvcm1EYXRhWydjb2MtY29udmVydC02RSddXG4gICAgfVxuICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1lbnRpdHktbGFuZyddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3QubGFuZ3VhZ2UgPSBmb3JtRGF0YVsnY29jLWVudGl0eS1sYW5nJ11cbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YS5zb3VyY2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5zb3VyY2UgPSBmb3JtRGF0YS5zb3VyY2VcbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBpbXBvcnRBY3RvciBpbXBvcnRzIGFuIEFjdG9yIHVzaW5nIHRoZSBkaWFsb2cgZGF0YVxuICAgKiBAcGFyYW0ge2h0bWx9IGh0bWxcbiAgICovXG4gIHN0YXRpYyBhc3luYyBpbXBvcnRBY3RvciAoaW5wdXRzKSB7XG4gICAgaWYgKGlucHV0cy50ZXh0W2lucHV0cy50ZXh0Lmxlbmd0aF0gIT09ICcuJykge1xuICAgICAgaW5wdXRzLnRleHQgKz0gJy4nIC8vIEFkZCBhIGRvdCBhIHRoZSBlbmQgdG8gaGVscCB0aGUgcmVnZXggZmluZCB0aGUgZW5kXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yID0gbmV3IENvQzdBY3RvckltcG9ydGVyKClcbiAgICBjb25zdCBjcmVhdGVkQWN0b3IgPSBhd2FpdCBhY3Rvci5jcmVhdGVBY3RvcihpbnB1dHMpXG4gICAgLy8gQWN0b3IgY3JlYXRlZCwgTm90aWZ5IHRoZSB1c2VyIGFuZCBzaG93IHRoZSBzaGVldC5cbiAgICBpZiAoQ09ORklHLmRlYnVnLkNvQzdJbXBvcnRlcikge1xuICAgICAgY29uc29sZS5kZWJ1ZygnY3JlYXRlZEFjdG9yOicsIGNyZWF0ZWRBY3RvcilcbiAgICB9XG4gICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKFxuICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BY3RvckltcG9ydGVkJywge1xuICAgICAgICBhY3RvclR5cGU6IGNyZWF0ZWRBY3Rvci50eXBlPy50b1VwcGVyQ2FzZSgpLFxuICAgICAgICBhY3Rvck5hbWU6IGNyZWF0ZWRBY3Rvci5uYW1lXG4gICAgICB9KVxuICAgIClcbiAgICBhd2FpdCBjcmVhdGVkQWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgLy8gY29uc3QgdXBkYXRlZCA9IGF3YWl0IFVwZGF0ZXIudXBkYXRlQWN0b3IobnBjKVxuICAgIC8vIGNvbnNvbGUuZGVidWcoJ3VwZGF0ZWQ6JywgdXBkYXRlZClcbiAgfVxuXG4gIC8vIC8qKlxuICAvLyAgKiBjcmVhdGUgaXQncyB0aGUgZGVmYXVsdCB3ZWIgdG8gY3JhdGUgdGhlIENvQzdBY3RvckltcG9ydGVyRGlhbG9nXG4gIC8vICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICBvcHRpb25zLmltcG9ydFR5cGUgPSBvcHRpb25zLmltcG9ydFR5cGUgPz8gJ25wYydcbiAgICBvcHRpb25zLmxhbmd1YWdlID1cbiAgICAgIG9wdGlvbnMubGFuZ3VhZ2UgPz8gQ29DN0FjdG9ySW1wb3J0ZXJSZWdFeHAuY2hlY2tMYW5ndWFnZShudWxsKVxuICAgIG9wdGlvbnMuY29udmVydDZFID0gb3B0aW9ucy5sYW5ndWFnZSA/PyAnY29jLWd1ZXNzJ1xuICAgIG9wdGlvbnMuc291cmNlID0gb3B0aW9ucy5zb3VyY2UgPz8gJ2l3bXMnXG4gICAgb3B0aW9ucy5jaGFyYWN0ZXJEYXRhID0gb3B0aW9ucy5jaGFyYWN0ZXJEYXRhID8/ICcnXG5cbiAgICBuZXcgQ29DN0FjdG9ySW1wb3J0ZXJEaWFsb2cob3B0aW9ucykucmVuZGVyKHRydWUpXG4gIH1cbn1cblxuSG9va3Mub25jZSgncmVhZHknLCAoKSA9PiB7XG4gIGlmIChnYW1lLm1vZHVsZXMuZ2V0KCdDb0M3LUltcG9ydGVyLVRlc3RzJyk/LmFjdGl2ZSkge1xuICAgIHdpbmRvdy5Db0M3QWN0b3JJbXBvcnRlciA9IENvQzdBY3RvckltcG9ydGVyXG4gIH1cbn0pXG4iLCIvKiBnbG9iYWwgRGlhbG9nLCBkdXBsaWNhdGUsIGdhbWUgKi9cbmV4cG9ydCBjbGFzcyBEcm9wQ29DSUQgZXh0ZW5kcyBEaWFsb2cge1xuICBzdGF0aWMgcHJvY2Vzc0Zvcm0gKHJlc3BvbnNlLCBlbGVtZW50LCByZXNvbHZlKSB7XG4gICAgaWYgKGVsZW1lbnQuZmluZCgnaW5wdXQnKS5pcygnOmNoZWNrZWQnKSkge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnZHJvcENvQ0lEJywgKHJlc3BvbnNlID8gJ1knIDogJ04nKSlcbiAgICB9XG4gICAgcmVzb2x2ZShyZXNwb25zZSlcbiAgfVxuXG4gIHN0YXRpYyBwcm9jZXNzSXRlbSAocmVzcG9uc2UsIGl0ZW0pIHtcbiAgICBpZiAocmVzcG9uc2UgJiYgaXRlbS5mbGFncz8uQ29DNz8uY29jaWRGbGFnPy5pZCkge1xuICAgICAgcmV0dXJuIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWRcbiAgICB9XG4gICAgcmV0dXJuIGR1cGxpY2F0ZShpdGVtKVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoKSB7XG4gICAgY29uc3QgZHJvcENvQ0lEID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZHJvcENvQ0lEJylcbiAgICBzd2l0Y2ggKGRyb3BDb0NJRCkge1xuICAgICAgY2FzZSAnJzpcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgIGNvbnN0IGRsZyA9IG5ldyBEcm9wQ29DSUQoe1xuICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELk5hbWUnKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6ICc8cD4nICsgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuRGlhbG9nJykgKyAnPC9wPjxwPjxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBpZD1cInJlbWVtYmVydGhpc1wiIHN0eWxlPVwidmVydGljYWwtYWxpZ246IHN1YjtcIj48bGFiZWwgZm9yPVwicmVtZW1iZXJ0aGlzXCI+JyArIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELlJlbWVtYmVyJykgKyAnPC9sYWJlbD48L3A+JyxcbiAgICAgICAgICAgIGNsYXNzZXM6IFsnY29jNycsICdhcHAnLCAnZGlhbG9nJ10sXG4gICAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICAgIHllczoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1llcycpLFxuICAgICAgICAgICAgICAgIGNhbGxiYWNrOiAoZWxlbWVudCkgPT4geyBEcm9wQ29DSUQucHJvY2Vzc0Zvcm0odHJ1ZSwgZWxlbWVudCwgcmVzb2x2ZSkgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBubzoge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS10aW1lc1wiPjwvaT4nLFxuICAgICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ05vJyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IChlbGVtZW50KSA9PiB7IERyb3BDb0NJRC5wcm9jZXNzRm9ybShmYWxzZSwgZWxlbWVudCwgcmVzb2x2ZSkgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBkbGcucmVuZGVyKHRydWUpXG4gICAgICAgIH0pXG4gICAgICBjYXNlICdZJzpcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIGNhc2UgJ04nOlxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBEcmFnRHJvcCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IERyb3BDb0NJRCB9IGZyb20gJy4uLy4uL2FwcHMvZHJvcC1jb2MtaWQuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdPY2N1cGF0aW9uU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtIC5pdGVtLW5hbWUgaDQnKVxuICAgICAgLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdza2lsbHMnKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLml0ZW0tZGVsZXRlJylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1EZWxldGUoZXZlbnQsICdza2lsbHMnKSlcblxuICAgIGh0bWwuZmluZCgnLmdyb3VwLWl0ZW0tZGVsZXRlJykuY2xpY2sodGhpcy5fb25Hcm91cEl0ZW1EZWxldGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5ncm91cC1jb250cm9sJykuY2xpY2sodGhpcy5fb25Hcm91cENvbnRyb2wuYmluZCh0aGlzKSlcblxuICAgIGNvbnN0IGRyYWdEcm9wID0gbmV3IERyYWdEcm9wKHtcbiAgICAgIGRyb3BTZWxlY3RvcjogJy5kcm9wcGFibGUnLFxuICAgICAgY2FsbGJhY2tzOiB7IGRyb3A6IHRoaXMuX29uRHJvcC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIGRyYWdEcm9wLmJpbmQoaHRtbFswXSlcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3AgKGV2ZW50LCB0eXBlID0gJ3NraWxsJywgY29sbGVjdGlvbk5hbWUgPSAnc2tpbGxzJykge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3Qgb3B0aW9uYWxTa2lsbCA9IGV2ZW50Py5jdXJyZW50VGFyZ2V0Py5jbGFzc0xpc3Q/LmNvbnRhaW5zKCdvcHRpb25hbC1za2lsbHMnKVxuICAgIGNvbnN0IG9sID0gZXZlbnQ/LmN1cnJlbnRUYXJnZXQ/LmNsb3Nlc3QoJ29sJylcbiAgICBjb25zdCBpbmRleCA9IG9sPy5kYXRhc2V0Py5ncm91cFxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG5cbiAgICBsZXQgdXNlQ29DSUQgPSAwXG4gICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgY29uc3QgZ3JvdXBzID0gdGhpcy5pdGVtLnN5c3RlbS5ncm91cHMgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5ncm91cHMpIDogW11cblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcbiAgICAgIGlmICghW3R5cGVdLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKG9wdGlvbmFsU2tpbGwpIHtcbiAgICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgICAvLyBHZW5lcmljIHNwZWNpYWxpemF0aW9uIGNhbiBiZSBpbmNsdWRlZCBtYW55IHRpbWVzXG4gICAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWUpKSB7XG4gICAgICAgICAgICBjb250aW51ZSAvLyBJZiBza2lsbCBpcyBhbHJlYWR5IGluIG1haW4gZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChncm91cHNbaW5kZXhdLnNraWxscy5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlIC8vIElmIHNraWxsIGlzIGFscmVhZHkgaW4gZ3JvdXAgZG9uJ3QgYWRkIGl0XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHVzZUNvQ0lEID09PSAwKSB7XG4gICAgICAgICAgdXNlQ29DSUQgPSBhd2FpdCBEcm9wQ29DSUQuY3JlYXRlKClcbiAgICAgICAgfVxuICAgICAgICBncm91cHNbaW5kZXhdLnNraWxscyA9IGdyb3Vwc1tpbmRleF0uc2tpbGxzLmNvbmNhdChbRHJvcENvQ0lELnByb2Nlc3NJdGVtKHVzZUNvQ0lELCBpdGVtKV0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIUNvQzdJdGVtLmlzQW55U3BlYyhpdGVtKSkge1xuICAgICAgICAgIC8vIEdlbmVyaWMgc3BlY2lhbGl6YXRpb24gY2FuIGJlIGluY2x1ZGVkIG1hbnkgdGltZXNcbiAgICAgICAgICBpZiAoY29sbGVjdGlvbi5maW5kKGVsID0+IGVsLm5hbWUgPT09IGl0ZW0ubmFtZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBncm91cHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBzYW1lIHNraWxsIGlzIGluIG9uZSBvZiB0aGUgZ3JvdXAgcmVtb3ZlIGl0IGZyb20gdGhlIGdyb3Vwc1xuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBncm91cHNbaV0uc2tpbGxzLmZpbmRJbmRleChcbiAgICAgICAgICAgICAgZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lXG4gICAgICAgICAgICApXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgIGdyb3Vwc1tpXS5za2lsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodXNlQ29DSUQgPT09IDApIHtcbiAgICAgICAgICB1c2VDb0NJRCA9IGF3YWl0IERyb3BDb0NJRC5jcmVhdGUoKVxuICAgICAgICB9XG4gICAgICAgIGNvbGxlY3Rpb24ucHVzaChEcm9wQ29DSUQucHJvY2Vzc0l0ZW0odXNlQ29DSUQsIGl0ZW0pKVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICB9XG5cbiAgYXN5bmMgX29uR3JvdXBDb250cm9sIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBhID0gZXZlbnQuY3VycmVudFRhcmdldFxuXG4gICAgLy8gQWRkIG5ldyBkYW1hZ2UgY29tcG9uZW50XG4gICAgaWYgKGEuY2xhc3NMaXN0LmNvbnRhaW5zKCdhZGQtZ3JvdXAnKSkge1xuICAgICAgYXdhaXQgdGhpcy5fb25TdWJtaXQoZXZlbnQpIC8vIFN1Ym1pdCBhbnkgdW5zYXZlZCBjaGFuZ2VzXG4gICAgICBjb25zdCBncm91cHMgPSB0aGlzLml0ZW0uc3lzdGVtLmdyb3Vwc1xuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uZ3JvdXBzJzogZ3JvdXBzLmNvbmNhdChbeyBvcHRpb25zOiAwLCBza2lsbHM6IFtdIH1dKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoYS5jbGFzc0xpc3QuY29udGFpbnMoJ3JlbW92ZS1ncm91cCcpKSB7XG4gICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCkgLy8gU3VibWl0IGFueSB1bnNhdmVkIGNoYW5nZXNcbiAgICAgIGNvbnN0IGdyb3VwcyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmdyb3VwcylcbiAgICAgIGNvbnN0IG9sID0gYS5jbG9zZXN0KCcuaXRlbS1saXN0Lmdyb3VwJylcbiAgICAgIGdyb3Vwcy5zcGxpY2UoTnVtYmVyKG9sLmRhdGFzZXQuZ3JvdXApLCAxKVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uZ3JvdXBzJzogZ3JvdXBzIH0pXG4gICAgfVxuICB9XG5cbiAgX29uSXRlbVN1bW1hcnkgKGV2ZW50LCBjb2xsZWN0aW9uTmFtZSA9ICdpdGVtcycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgb2JqID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGxpID0gb2JqLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBncm91cCA9IG9iai5jbG9zZXN0KCcuZ3JvdXAnKVxuICAgIGxldCBpdGVtXG4gICAgaWYgKGdyb3VwLmxlbmd0aCkge1xuICAgICAgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzW2dyb3VwLmRhdGEoJ2dyb3VwJyldW2NvbGxlY3Rpb25OYW1lXS5maW5kKHMgPT4ge1xuICAgICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICAgIHJldHVybiBzLl9pZCA9PT0gbGkuZGF0YSgnaXRlbS1pZCcpXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAoIWl0ZW0pIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjaGF0RGF0YSA9IGl0ZW0uc3lzdGVtLmRlc2NyaXB0aW9uXG5cbiAgICAvLyBUb2dnbGUgc3VtbWFyeVxuICAgIGlmIChsaS5oYXNDbGFzcygnZXhwYW5kZWQnKSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGxpLmNoaWxkcmVuKCcuaXRlbS1zdW1tYXJ5JylcbiAgICAgIHN1bW1hcnkuc2xpZGVVcCgyMDAsICgpID0+IHN1bW1hcnkucmVtb3ZlKCkpXG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGRpdiA9ICQoYDxkaXYgY2xhc3M9XCJpdGVtLXN1bW1hcnlcIj4ke2NoYXREYXRhLnZhbHVlfTwvZGl2PmApXG4gICAgICBjb25zdCBwcm9wcyA9ICQoJzxkaXYgY2xhc3M9XCJpdGVtLXByb3BlcnRpZXNcIj48L2Rpdj4nKVxuICAgICAgLy8gZm9yIChjb25zdCBwIG9mIGNoYXREYXRhLnByb3BlcnRpZXMpIHsgcHJvcHMuYXBwZW5kKGA8c3BhbiBjbGFzcz1cInRhZ1wiPiR7cH08L3NwYW4+YCkgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcbiAgICAgIGxpLmFwcGVuZChkaXYuaGlkZSgpKVxuICAgICAgZGl2LnNsaWRlRG93bigyMDApXG4gICAgfVxuICAgIGxpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpXG4gIH1cblxuICBhc3luYyBfb25JdGVtRGVsZXRlIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgY29uc3QgaXRlbSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCkuY2xvc2VzdCgnLml0ZW0nKVxuICAgIGNvbnN0IGl0ZW1JZCA9IGl0ZW0uZGF0YSgnaXRlbS1pZCcpXG4gICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICBjb25zdCBpdGVtSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXS5maW5kSW5kZXgoaSA9PiAoaXRlbUlkICYmIGkuX2lkID09PSBpdGVtSWQpIHx8IChDb0NJZCAmJiBpID09PSBDb0NJZCkpXG4gICAgaWYgKGl0ZW1JbmRleCA+IC0xKSB7XG4gICAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICAgIGNvbGxlY3Rpb24uc3BsaWNlKGl0ZW1JbmRleCwgMSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uR3JvdXBJdGVtRGVsZXRlIChldmVudCkge1xuICAgIGNvbnN0IGl0ZW0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBncm91cCA9IE51bWJlcihpdGVtLmNsb3Nlc3QoJy5pdGVtLWxpc3QuZ3JvdXAnKS5kYXRhKCdncm91cCcpKVxuICAgIGNvbnN0IGdyb3VwcyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmdyb3VwcylcbiAgICBpZiAodHlwZW9mIGdyb3Vwc1tncm91cF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zdCBpdGVtSWQgPSBpdGVtLmRhdGEoJ2l0ZW0taWQnKVxuICAgICAgY29uc3QgQ29DSWQgPSBpdGVtLmRhdGEoJ2NvY2lkJylcbiAgICAgIGNvbnN0IGl0ZW1JbmRleCA9IGdyb3Vwc1tncm91cF0uc2tpbGxzLmZpbmRJbmRleChpID0+IChpdGVtSWQgJiYgaS5faWQgPT09IGl0ZW1JZCkgfHwgKENvQ0lkICYmIGkgPT09IENvQ0lkKSlcbiAgICAgIGlmIChpdGVtSW5kZXggPiAtMSkge1xuICAgICAgICBncm91cHNbZ3JvdXBdLnNraWxscy5zcGxpY2UoaXRlbUluZGV4LCAxKVxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5ncm91cHMnOiBncm91cHMgfSlcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICdvY2N1cGF0aW9uJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvb2NjdXBhdGlvbi5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScgfV0sXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG5cbiAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmV4cGFuZEl0ZW1BcnJheSh7IGl0ZW1MaXN0OiBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzIH0pXG5cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIGZvciAobGV0IGluZGV4ID0gMCwgbGVuID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGluZGV4IDwgbGVuOyBpbmRleCsrKSB7XG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscyB9KVxuXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5pc0VtcHR5ID0gc2hlZXREYXRhLmRhdGEuc3lzdGVtLmdyb3Vwc1tpbmRleF0uc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgfVxuXG4gICAgc2hlZXREYXRhLm9jY3VwYXRpb25Qb2ludHNTdHJpbmcgPSBDb0M3T2NjdXBhdGlvblNoZWV0Lm9jY3VwYXRpb25Qb2ludHNTdHJpbmcoc2hlZXREYXRhLmRhdGEuc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cylcblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0udHlwZSkpIHtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0gPyBDT0M3Lm9jY3VwYXRpb25Qcm9wZXJ0aWVzW2tleV0gOiBudWxsKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgc3RhdGljIG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKG9jY3VwYXRpb25Ta2lsbFBvaW50cykge1xuICAgIGNvbnN0IG9wdGlvbm5hbCA9IFtdXG4gICAgY29uc3QgbWFuZGF0b3J5ID0gW11cbiAgICBmb3IgKGNvbnN0IFtrZXksIGNhcmFjXSBvZiBPYmplY3QuZW50cmllcyhvY2N1cGF0aW9uU2tpbGxQb2ludHMpKSB7XG4gICAgICBpZiAoY2FyYWMubXVsdGlwbGllcikge1xuICAgICAgICBjb25zdCBjYXJhY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoYENIQVJBQy4ke2tleS50b1VwcGVyQ2FzZSgpfWApXG4gICAgICAgIGlmIChjYXJhYy5zZWxlY3RlZCAmJiBjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgIG9wdGlvbm5hbC5wdXNoKGAke2NhcmFjTmFtZX14JHtjYXJhYy5tdWx0aXBsaWVyfWApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkICYmICFjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgIG1hbmRhdG9yeS5wdXNoKGAke2NhcmFjTmFtZX14JHtjYXJhYy5tdWx0aXBsaWVyfWApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgbGV0IG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgPSAnJ1xuICAgIGNvbnN0IG9yU3RyaW5nID0gYCAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpfSBgXG4gICAgaWYgKG1hbmRhdG9yeS5sZW5ndGgpIG9jY3VwYXRpb25Qb2ludHNTdHJpbmcgKz0gbWFuZGF0b3J5LmpvaW4oJyArICcpXG4gICAgaWYgKG9wdGlvbm5hbC5sZW5ndGggJiYgbWFuZGF0b3J5Lmxlbmd0aCkge1xuICAgICAgb2NjdXBhdGlvblBvaW50c1N0cmluZyArPSBgICsgKCR7b3B0aW9ubmFsLmpvaW4ob3JTdHJpbmcpfSlgXG4gICAgfVxuICAgIGlmIChvcHRpb25uYWwubGVuZ3RoICYmICFtYW5kYXRvcnkubGVuZ3RoKSB7XG4gICAgICBvY2N1cGF0aW9uUG9pbnRzU3RyaW5nICs9IG9wdGlvbm5hbC5qb2luKG9yU3RyaW5nKVxuICAgIH1cbiAgICByZXR1cm4gb2NjdXBhdGlvblBvaW50c1N0cmluZ1xuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKT8uc3lzdGVtXG4gICAgaWYgKHN5c3RlbS5ncm91cHMpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uZ3JvdXBzJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uZ3JvdXBzIHx8IFtdXG4gICAgICApXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5pdGVtLnN5c3RlbS5ncm91cHMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGZvcm1EYXRhW2BzeXN0ZW0uZ3JvdXBzLiR7aW5kZXh9LnNraWxsc2BdID0gZHVwbGljYXRlKFxuICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5za2lsbHNcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIHN1cGVyLl91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQWN0b3IsIENoYXRNZXNzYWdlLCBDT05TVCwgZHVwbGljYXRlLCBGb3JtQXBwbGljYXRpb24sIGdhbWUsIEhvb2tzLCBtZXJnZU9iamVjdCwgcmFuZG9tSUQsIHJlbmRlclRlbXBsYXRlLCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uL2NvbmZpZy5qcydcbmltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3JzL2FjdG9yLmpzJ1xuaW1wb3J0IHsgQ29DN09jY3VwYXRpb25TaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy9vY2N1cGF0aW9uLmpzJ1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4vY29jNy1wYXJzZXIuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZyB9IGZyb20gJy4uL2FwcHMvc2tpbGwtc3BlY2lhbGl6YXRpb24tc2VsZWN0LWRpYWxvZy5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdJbnZlc3RpZ2F0b3JXaXphcmQgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGlkOiAnaW52ZXN0aWdhdG9yLXdpemFyZC1hcHBsaWNhdGlvbicsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2ludmVzdGlnYXRvci13aXphcmQnXSxcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW52ZXN0aWdhdG9yV2l6YXJkLlRpdGxlJyksXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkLmhicycsXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA2MDAsXG4gICAgICBjbG9zZU9uU3VibWl0OiBmYWxzZSxcbiAgICAgIHNjcm9sbFk6IFsnLnNjcm9sbHNlY3Rpb24nXSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuZHJhZ2dhYmxlJywgZHJvcFNlbGVjdG9yOiBudWxsIH1dXG4gICAgfSlcbiAgfVxuXG4gIGdldCBwYWdlTGlzdCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIFBBR0VfTk9ORTogLTEsXG4gICAgICBQQUdFX0lOVFJPRFVDVElPTjogMCxcbiAgICAgIFBBR0VfQ09ORklHVVJBVElPTjogMSxcbiAgICAgIFBBR0VfU0VUVVBTOiAyLFxuICAgICAgUEFHRV9BUkNIRVRZUEVTOiAzLFxuICAgICAgUEFHRV9DSEFSQUNUSVNUSUNTOiA0LFxuICAgICAgUEFHRV9BVFRSSUJVVEVTOiA1LFxuICAgICAgUEFHRV9WSUVXX0FUVFJJQlVURVM6IDYsXG4gICAgICBQQUdFX09DQ1VQQVRJT05TOiA3LFxuICAgICAgUEFHRV9PQ0NVUEFUSU9OX1NLSUxMUzogOCxcbiAgICAgIFBBR0VfQVJDSEVUWVBFX1NLSUxMUzogOSxcbiAgICAgIFBBR0VfUE9JTlRTX1NLSUxMUzogMTAsXG4gICAgICBQQUdFX0lOVkVTVElHQVRPUjogMTEsXG4gICAgICBQQUdFX0JBQ0tTVE9SWTogMTIsXG4gICAgICBQQUdFX0NSRUFURTogMTNcbiAgICB9XG4gIH1cblxuICBnZXQgY2hhcmFjdGVyaXN0aWNzTWV0aG9kcyAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIE1FVEhPRF9ERUZBVUxUOiAxLFxuICAgICAgTUVUSE9EX1JPTEw6IDEsXG4gICAgICBNRVRIT0RfUE9JTlRTOiAyLFxuICAgICAgTUVUSE9EX1ZBTFVFUzogM1xuICAgIH1cbiAgfVxuXG4gIGdldCBjb2NpZENyZWRpdFJhdGluZyAoKSB7XG4gICAgcmV0dXJuICdpLnNraWxsLmNyZWRpdC1yYXRpbmcnXG4gIH1cblxuICBnZXQgY29jaWRMYW5ndWFnZU93biAoKSB7XG4gICAgcmV0dXJuICdpLnNraWxsLmxhbmd1YWdlLW93bidcbiAgfVxuXG4gIGdldCBwYWdlT3JkZXIgKCkge1xuICAgIGNvbnN0IHBhZ2VzID0gdGhpcy5wYWdlTGlzdFxuICAgIGxldCBwYWdlT3JkZXIgPSBbXG4gICAgICBwYWdlcy5QQUdFX0lOVFJPRFVDVElPTlxuICAgIF1cbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQ09ORklHVVJBVElPTilcbiAgICB9XG4gICAgaWYgKHRoaXMub2JqZWN0LmRlZmF1bHRTZXR1cCA9PT0gJycpIHtcbiAgICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfU0VUVVBTKVxuICAgIH1cbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKSkge1xuICAgICAgcGFnZU9yZGVyLnB1c2gocGFnZXMuUEFHRV9BUkNIRVRZUEVTKVxuICAgIH1cbiAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0NIQVJBQ1RJU1RJQ1MpXG4gICAgaWYgKCFnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpKSB7XG4gICAgICBwYWdlT3JkZXIucHVzaChwYWdlcy5QQUdFX0FUVFJJQlVURVMpXG4gICAgfVxuICAgIHBhZ2VPcmRlciA9IHBhZ2VPcmRlci5jb25jYXQoW1xuICAgICAgcGFnZXMuUEFHRV9WSUVXX0FUVFJJQlVURVMsXG4gICAgICBwYWdlcy5QQUdFX09DQ1VQQVRJT05TLFxuICAgICAgcGFnZXMuUEFHRV9PQ0NVUEFUSU9OX1NLSUxMU1xuICAgIF0pXG4gICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykpIHtcbiAgICAgIHBhZ2VPcmRlci5wdXNoKHBhZ2VzLlBBR0VfQVJDSEVUWVBFX1NLSUxMUylcbiAgICB9XG4gICAgcGFnZU9yZGVyID0gcGFnZU9yZGVyLmNvbmNhdChbXG4gICAgICBwYWdlcy5QQUdFX1BPSU5UU19TS0lMTFMsXG4gICAgICBwYWdlcy5QQUdFX0lOVkVTVElHQVRPUixcbiAgICAgIHBhZ2VzLlBBR0VfQkFDS1NUT1JZLFxuICAgICAgcGFnZXMuUEFHRV9DUkVBVEVcbiAgICBdKVxuICAgIHJldHVybiBwYWdlT3JkZXJcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBsb2FkQ2FjaGVJdGVtQnlDb0NJRCAoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogL15pXFwuLywgdHlwZTogJ2knLCBzaG93TG9hZGluZzogdHJ1ZSB9KS50aGVuKChpdGVtcykgPT4ge1xuICAgICAgICBjb25zdCBsaXN0ID0ge31cbiAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGl0ZW1zKSB7XG4gICAgICAgICAgbGlzdFtpdGVtLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkXSA9IGl0ZW1cbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlKGxpc3QpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBmaWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEIChyZWdleHApIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoYXdhaXQgdGhpcy5vYmplY3QuY2FjaGVDb0NJRCkuZmlsdGVyKGVudHJ5ID0+IGVudHJ5WzBdLm1hdGNoKHJlZ2V4cCkpLm1hcChlbnRyeSA9PiBlbnRyeVsxXSlcbiAgfVxuXG4gIGFzeW5jIGdldENhY2hlSXRlbUJ5Q29DSUQgKGlkKSB7XG4gICAgcmV0dXJuIChhd2FpdCB0aGlzLm9iamVjdC5jYWNoZUNvQ0lEKVtpZF0gPz8gZmFsc2VcbiAgfVxuXG4gIGFzeW5jIGV4cGFuZEl0ZW1BcnJheSAoaXRlbUxpc3QpIHtcbiAgICBjb25zdCBpdGVtcyA9IGl0ZW1MaXN0LmZpbHRlcihpdCA9PiB0eXBlb2YgaXQgIT09ICdzdHJpbmcnKVxuICAgIGNvbnN0IGNvY2lkcyA9IGl0ZW1MaXN0LmZpbHRlcihpdCA9PiB0eXBlb2YgaXQgPT09ICdzdHJpbmcnKVxuICAgIGlmIChjb2NpZHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBzb3VyY2UgPSBhd2FpdCB0aGlzLm9iamVjdC5jYWNoZUNvQ0lEXG4gICAgICBjb25zdCBtaXNzaW5nID0gW11cbiAgICAgIGZvciAoY29uc3QgY29jaWQgb2YgY29jaWRzKSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc291cmNlW2NvY2lkXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpdGVtcy5wdXNoKHNvdXJjZVtjb2NpZF0pXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWlzc2luZy5wdXNoKGNvY2lkKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAobWlzc2luZy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZXJhID0gZ2FtZS5pMThuLmZvcm1hdChDT0M3LmVyYXNbdGhpcy5vYmplY3QuZGVmYXVsdEVyYV0gPz8gJ0NvQzcuQ29DSURGbGFnLmVycm9yLnVua25vd24tZXJhJywgeyBlcmE6IHRoaXMub2JqZWN0LmRlZmF1bHRFcmEgfSlcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmRvY3VtZW50cy1ub3QtZm91bmQnLCB7IGNvY2lkczogbWlzc2luZy5qb2luKCcsICcpLCBsYW5nOiBnYW1lLmkxOG4ubGFuZywgZXJhIH0pKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaXRlbXNcbiAgfVxuXG4gIGdldEFnZUFkanVzdG1lbnRzICgpIHtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycykge1xuICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSA9IDBcbiAgICB9XG4gICAgLy8gZWR1OiBvcHRpb25hbCAtIG51bWJlciBvZiBlZHUgaW1wcm92ZW1lbnQgY2hlY2tzXG4gICAgLy8gZGVkdWN0OiBvcHRpb25hbCAtIGRlZHVjdCBbdG90YWxdIGJldHdlZW4gW2Zyb21dXG4gICAgLy8gcmVkdWNlOiBvcHRpb25hbCAtIGRlZHVjdCBbdG90bGFdIGZyb20gW2Zyb21dXG4gICAgLy8gbHVjazogb3B0aW9uYWwgLSByZXJvbGwgbHVjayBhbmQgdGFrZSBoaWdoZXJcbiAgICBpZiAoIWdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzJykpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5hZ2UgPj0gNDApIHtcbiAgICAgICAgY29uc3Qga2V5ID0gTWF0aC5mbG9vcih0aGlzLm9iamVjdC5hZ2UgLyAxMClcbiAgICAgICAgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cyA9IHtcbiAgICAgICAgICBlZHU6IHtcbiAgICAgICAgICAgIHRvdGFsOiAoa2V5IC0gMiA+IDQgPyA0IDoga2V5IC0gMiksXG4gICAgICAgICAgICByb2xsZWQ6IGZhbHNlXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZWR1Y3Q6IHtcbiAgICAgICAgICAgIHRvdGFsOiAoa2V5ID4gMSA/IDUgKiBNYXRoLnBvdygyLCBrZXkgLSA0KSA6IDApLFxuICAgICAgICAgICAgZnJvbTogWydzdHInLCAnY29uJywgJ2RleCddLFxuICAgICAgICAgICAgdmFsdWVzOiB7fVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmVkdWNlOiB7XG4gICAgICAgICAgICB0b3RhbDogKGtleSAtIDMpICogNSxcbiAgICAgICAgICAgIGZyb206ICdhcHAnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub2JqZWN0LmFnZSA+PSAyMCkge1xuICAgICAgICB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzID0ge1xuICAgICAgICAgIGVkdToge1xuICAgICAgICAgICAgdG90YWw6IDEsXG4gICAgICAgICAgICByb2xsZWQ6IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMub2JqZWN0LmFnZSA+PSAxNSkge1xuICAgICAgICB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzID0ge1xuICAgICAgICAgIGRlZHVjdDoge1xuICAgICAgICAgICAgdG90YWw6IDUsXG4gICAgICAgICAgICBmcm9tOiBbJ3N0cicsICdzaXonXSxcbiAgICAgICAgICAgIHZhbHVlczoge31cbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlZHVjZToge1xuICAgICAgICAgICAgdG90YWw6IDUsXG4gICAgICAgICAgICBmcm9tOiAnZWR1J1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbHVjazogdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMucmVkdWNlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1t0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLnJlZHVjZS5mcm9tXSA9IC10aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLnJlZHVjZS50b3RhbFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IGF3YWl0IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cblxuICAgIHNoZWV0RGF0YS5wYWdlcyA9IHRoaXMucGFnZUxpc3RcblxuICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gZmFsc2VcbiAgICBzaGVldERhdGEuY3JlYXRlQnV0dG9uID0gZmFsc2VcblxuICAgIGxldCBzZXR1cFxuICAgIGxldCBhcmNoZXR5cGVcbiAgICBsZXQgb2NjdXBhdGlvblxuXG4gICAgbGV0IHNob3dNb25ldGFyeSA9IGZhbHNlXG5cbiAgICBzd2l0Y2ggKHNoZWV0RGF0YS5vYmplY3Quc3RlcCkge1xuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9JTlRST0RVQ1RJT046XG4gICAgICAgIHNoZWV0RGF0YS5lcmEgPSBnYW1lLmkxOG4uZm9ybWF0KENPQzcuZXJhc1tzaGVldERhdGEub2JqZWN0LmRlZmF1bHRFcmFdID8/ICdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiBzaGVldERhdGEub2JqZWN0LmRlZmF1bHRFcmEgfSlcbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQ09ORklHVVJBVElPTjpcbiAgICAgICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnNldHVwcyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5zZXR1cFxcLi8pXG4gICAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb25zID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLm9jY3VwYXRpb25cXC4vKVxuICAgICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGVzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLmFyY2hldHlwZVxcLi8pXG4gICAgICAgICAgc2V0dXAgPSBzaGVldERhdGEuc2V0dXBzLmZpbmQocyA9PiBzLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkID09PSBzaGVldERhdGEub2JqZWN0LmRlZmF1bHRTZXR1cClcbiAgICAgICAgICBpZiAodHlwZW9mIHNldHVwID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0U2V0dXAgPSAnJ1xuICAgICAgICAgICAgc2hlZXREYXRhLm9iamVjdC5zZXR1cCA9ICcnXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5kZXNjcmlwdGlvbiA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChzZXR1cC5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUpXG4gICAgICAgICAgfVxuICAgICAgICAgIHNoZWV0RGF0YS5vd25lcnNoaXAgPSB7XG4gICAgICAgICAgICBbQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5OT05FXTogJ09XTkVSU0hJUC5OT05FJyxcbiAgICAgICAgICAgIFtDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLkxJTUlURURdOiAnT1dORVJTSElQLkxJTUlURUQnLFxuICAgICAgICAgICAgW0NPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuT0JTRVJWRVJdOiAnT1dORVJTSElQLk9CU0VSVkVSJyxcbiAgICAgICAgICAgIFtDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSXTogJ09XTkVSU0hJUC5PV05FUidcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLl9lcmFzID0gW11cbiAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhDT0M3LmVyYXMpKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuX2VyYXMucHVzaCh7XG4gICAgICAgICAgICAgIGlkOiBrZXksXG4gICAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSh2YWx1ZSlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzID0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzXG4gICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ERUZBVUxUXG4gICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3QuZW5mb3JjZVBvaW50QnV5KSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1BPSU5UU1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9WQUxVRVNcbiAgICAgICAgICB9XG4gICAgICAgICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgIHNoZWV0RGF0YS5oYXNBcmNoZXR5cGVzID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKVxuICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfU0VUVVBTOlxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5kZWZhdWx0U2V0dXAgPT09ICcnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnNldHVwcyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5zZXR1cFxcLi8pXG4gICAgICAgICAgc2hlZXREYXRhLnNldHVwcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5zZXR1cCAhPT0gJycpIHtcbiAgICAgICAgICAgIHNldHVwID0gc2hlZXREYXRhLnNldHVwcy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5zZXR1cClcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5kZXNjcmlwdGlvbiA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChzZXR1cC5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUpXG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0FSQ0hFVFlQRVM6XG4gICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGVzID0gYXdhaXQgdGhpcy5maWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEKC9eaVxcLmFyY2hldHlwZVxcLi8pXG4gICAgICAgIGlmIChzaGVldERhdGEuYXJjaGV0eXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUgIT09ICcnKSB7XG4gICAgICAgICAgICBhcmNoZXR5cGUgPSBzaGVldERhdGEuYXJjaGV0eXBlcy5maW5kKHMgPT4gcy5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gc2hlZXREYXRhLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgICAgICAgICBpZiAodHlwZW9mIGFyY2hldHlwZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlc2NyaXB0aW9uID0gQ29DN1BhcnNlci5lbnJpY2hIVE1MKGFyY2hldHlwZS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUpXG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5ib251c1BvaW50cyA9IGFyY2hldHlwZS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgICAgICAgICAgICAgY29uc3QgY29yZUNoYXJhY3RlcmlzdGljcyA9IFtdXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgY29yZUNoYXJhY3RlcmlzdGljIGluIGFyY2hldHlwZS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljcykge1xuICAgICAgICAgICAgICAgIGlmIChhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NbY29yZUNoYXJhY3RlcmlzdGljXSkge1xuICAgICAgICAgICAgICAgICAgY29yZUNoYXJhY3RlcmlzdGljcy5wdXNoKGNvcmVDaGFyYWN0ZXJpc3RpYylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgaWYgKGNvcmVDaGFyYWN0ZXJpc3RpY3MubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljID0gJydcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChjb3JlQ2hhcmFjdGVyaXN0aWNzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9IGNvcmVDaGFyYWN0ZXJpc3RpY3NbMF1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljID0gY29yZUNoYXJhY3RlcmlzdGljcy5tYXAoYyA9PiBjLnRvTG9jYWxlVXBwZXJDYXNlKCkpLmpvaW4oJyAnICsgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk9yJykgKyAnICcpXG4gICAgICAgICAgICAgIGNvbnN0IHNraWxscyA9IFtdXG4gICAgICAgICAgICAgIGFyY2hldHlwZS5zeXN0ZW0uc2tpbGxzID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkoYXJjaGV0eXBlLnN5c3RlbS5za2lsbHMpXG4gICAgICAgICAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2YgYXJjaGV0eXBlLnN5c3RlbS5za2lsbHMpIHtcbiAgICAgICAgICAgICAgICBza2lsbHMucHVzaChza2lsbC5uYW1lKVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbHMgPSBza2lsbHMuam9pbignLCAnKVxuICAgICAgICAgICAgICBzaGVldERhdGEuc3VnZ2VzdGVkT2NjdXBhdGlvbnMgPSBDb0M3UGFyc2VyLmVucmljaEhUTUwoYXJjaGV0eXBlLnN5c3RlbS5zdWdnZXN0ZWRPY2N1cGF0aW9ucylcbiAgICAgICAgICAgICAgc2hlZXREYXRhLnN1Z2dlc3RlZFRyYWl0cyA9IENvQzdQYXJzZXIuZW5yaWNoSFRNTChhcmNoZXR5cGUuc3lzdGVtLnN1Z2dlc3RlZFRyYWl0cylcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfQ0hBUkFDVElTVElDUzpcbiAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMgPSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHNcbiAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9ST0xMXG4gICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwICE9PSAnJykge1xuICAgICAgICAgIHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgICAgICAgIGlmICh0eXBlb2Ygc2V0dXAgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBpZiAoc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCB8fCB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkpIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCA9IHNoZWV0RGF0YS5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9QT0lOVFNcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgICAgICBzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kID0gc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLnNldHVwID0ge1xuICAgICAgICAgICAgICB0b3RhbDogMCxcbiAgICAgICAgICAgICAgcG9pbnRzOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy52YWx1ZSxcbiAgICAgICAgICAgICAgY2hhcmFjdGVyaXN0aWNzOiBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnc3RyJyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuc3RyLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuU3RyZW5ndGgnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdjb24nLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5jb24sXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5Db25zdGl0dXRpb24nXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICBrZXk6ICdzaXonLFxuICAgICAgICAgICAgICAgICAgcm9sbDogc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5zaXosXG4gICAgICAgICAgICAgICAgICBsYWJlbDogJ0NIQVJBQy5TaXplJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnZGV4JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZGV4LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRGV4dGVyaXR5J1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnYXBwJyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuYXBwLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuQXBwZWFyYW5jZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ2ludCcsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmludCxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLkludGVsbGlnZW5jZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIGtleTogJ3BvdycsXG4gICAgICAgICAgICAgICAgICByb2xsOiBzZXR1cC5zeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLnBvdyxcbiAgICAgICAgICAgICAgICAgIGxhYmVsOiAnQ0hBUkFDLlBvd2VyJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAga2V5OiAnZWR1JyxcbiAgICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZWR1LFxuICAgICAgICAgICAgICAgICAgbGFiZWw6ICdDSEFSQUMuRWR1Y2F0aW9uJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgbHVjazoge1xuICAgICAgICAgICAgICAgIHJvbGw6IHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMubHVjayxcbiAgICAgICAgICAgICAgICBsYWJlbDogJ0NvQzcuTHVjaydcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3MgPSBbXVxuICAgICAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3QuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgICAgICAgICBhcmNoZXR5cGUgPSBhd2FpdCB0aGlzLmdldENhY2hlSXRlbUJ5Q29DSUQodGhpcy5vYmplY3QuYXJjaGV0eXBlKVxuICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyY2hldHlwZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGNvcmVDaGFyYWN0ZXJpc3RpYyBpbiBhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3MpIHtcbiAgICAgICAgICAgICAgICAgIGlmIChhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NbY29yZUNoYXJhY3RlcmlzdGljXSkge1xuICAgICAgICAgICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBrZXk6IGNvcmVDaGFyYWN0ZXJpc3RpYyxcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4uZm9ybWF0KHNoZWV0RGF0YS5zZXR1cC5jaGFyYWN0ZXJpc3RpY3MuZmluZChjID0+IGMua2V5ID09PSBjb3JlQ2hhcmFjdGVyaXN0aWMpPy5sYWJlbCA/PyAnVW5rbm93bicpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICBpZiAoYXJjaGV0eXBlLnN5c3RlbS5jb3JlQ2hhcmFjdGVyaXN0aWNzRm9ybXVsYS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5zZXR1cC5jaGFyYWN0ZXJpc3RpY3MuZmluZChjID0+IGMua2V5ID09PSB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMpLnJvbGwgPSBhcmNoZXR5cGUuc3lzdGVtLmNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhLnZhbHVlXG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgZW1wdGllcyA9IGZhbHNlXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiBzaGVldERhdGEub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgICAgICAgIGlmIChzaGVldERhdGEub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgaWYgKGtleSAhPT0gJ2x1Y2snKSB7XG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEuc2V0dXAudG90YWwgKz0gcGFyc2VJbnQoc2hlZXREYXRhLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZW1wdGllcyA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYykge1xuICAgICAgICAgICAgICBzaGVldERhdGEuY29yZUNoYXJhY3RlcmlzdGljID0gdGhpcy5vYmplY3QuY29yZUNoYXJhY3RlcmlzdGljLnRvTG9jYWxlVXBwZXJDYXNlKClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghZW1wdGllcyAmJiB0aGlzLm9iamVjdC5hZ2UgPj0gMTUpIHtcbiAgICAgICAgICAgICAgaWYgKFtzaGVldERhdGEuY2hhcmFjdGVyaXN0aWNzTWV0aG9kcy5NRVRIT0RfUk9MTCwgc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFU10uaW5jbHVkZXMoc2hlZXREYXRhLmNoYXJhY3RlcmlzdGljc01ldGhvZCkpIHtcbiAgICAgICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICAgICAgfSBlbHNlIGlmIChzaGVldERhdGEuc2V0dXAudG90YWwudG9TdHJpbmcoKSA9PT0gc2hlZXREYXRhLnNldHVwLnBvaW50cy50b1N0cmluZygpKSB7XG4gICAgICAgICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9BVFRSSUJVVEVTOlxuICAgICAgICBzaGVldERhdGEucHVscFJ1bGVJZ25vcmVBZ2VQZW5hbHRpZXMgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllcycpXG4gICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICBzaGVldERhdGEucG9pbnRzID0ge31cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzW2tleV0gPSB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApLFxuICAgICAgICAgICAgbWluOiAtcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgMSxcbiAgICAgICAgICAgIGxhYmVsOiBDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMoa2V5KS5sYWJlbFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1ICE9PSAndW5kZWZpbmVkJyAmJiAhdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUucm9sbGVkKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5kZWR1Y3QgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLmRlZHVjdFRvdGFsID0gMFxuICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LmZyb20pIHtcbiAgICAgICAgICAgIHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCA9IHNoZWV0RGF0YS5kZWR1Y3RUb3RhbCAtIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBzaGVldERhdGEuZGVkdWN0RnJvbSA9IHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LmZyb20ubWFwKG4gPT4gZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuJyArIG4udG9VcHBlckNhc2UoKSkpLmpvaW4oJywgJykucmVwbGFjZSgvKCwgKShbXixdKykkLywgJyQxJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PcicpICsgJyAkMicpLnJlcGxhY2UoL14oW14sXSspLChbXixdKykkLywgJyQxJDInKVxuICAgICAgICAgIGlmIChzaGVldERhdGEuZGVkdWN0VG90YWwgIT09IHRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZGVkdWN0LnRvdGFsKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnJlZHVjZUZyb20gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy4nICsgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5yZWR1Y2UuZnJvbS50b1VwcGVyQ2FzZSgpKVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5sdWNrICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNoZWV0RGF0YS5sdWNrVmFsdWUgPSBNYXRoLm1heCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5sdWNrLCB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrKVxuICAgICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrID09PSAwKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IGZhbHNlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfVklFV19BVFRSSUJVVEVTOlxuICAgICAgICBzaGVldERhdGEucG9pbnRzID0ge31cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMpIHtcbiAgICAgICAgICBzaGVldERhdGEucG9pbnRzW2tleV0gPSB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApLFxuICAgICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICAgIHN1ZmZpeDogJyUnLFxuICAgICAgICAgICAgbGFiZWw6IENvQzdVdGlsaXRpZXMuZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyhrZXkpLmxhYmVsXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuZGIgPSB7XG4gICAgICAgICAgdmFsdWU6IENvQ0FjdG9yLmRiRnJvbUNoYXJhY3RlcmlzdGljcyhzaGVldERhdGEucG9pbnRzKSxcbiAgICAgICAgICBwcmVmaXg6ICcnLFxuICAgICAgICAgIHN1ZmZpeDogJycsXG4gICAgICAgICAgbGFiZWw6ICdDb0M3LkJvbnVzRGFtYWdlJ1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc05hTihzaGVldERhdGEucG9pbnRzLmRiLnZhbHVlKSB8fCBOdW1iZXIoc2hlZXREYXRhLnBvaW50cy5kYi52YWx1ZSkgPj0gMCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMuZGIucHJlZml4ID0gJysnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5idWlsZCA9IHtcbiAgICAgICAgICB2YWx1ZTogQ29DQWN0b3IuYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuQnVpbGQnXG4gICAgICAgIH1cbiAgICAgICAgaWYgKE51bWJlcihzaGVldERhdGEucG9pbnRzLmJ1aWxkLnZhbHVlKSA+PSAwKSB7XG4gICAgICAgICAgc2hlZXREYXRhLnBvaW50cy5idWlsZC5wcmVmaXggPSAnKydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLmhwID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5ocEZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cywgJ2NoYXJhY3RlcicpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuSGl0UG9pbnRzJ1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMuaHAucHJlZml4ID0gc2hlZXREYXRhLnBvaW50cy5ocC52YWx1ZSArICcvJ1xuICAgICAgICBzaGVldERhdGEucG9pbnRzLm1wID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5tcEZyb21DaGFyYWN0ZXJpc3RpY3Moc2hlZXREYXRhLnBvaW50cyksXG4gICAgICAgICAgcHJlZml4OiAnJyxcbiAgICAgICAgICBzdWZmaXg6ICcnLFxuICAgICAgICAgIGxhYmVsOiAnQ29DNy5NYWdpY1BvaW50cydcbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEucG9pbnRzLm1wLnByZWZpeCA9IHNoZWV0RGF0YS5wb2ludHMubXAudmFsdWUgKyAnLydcbiAgICAgICAgc2hlZXREYXRhLnBvaW50cy5zYW4gPSB7XG4gICAgICAgICAgdmFsdWU6IHNoZWV0RGF0YS5wb2ludHMucG93LnZhbHVlLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnLzk5JyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuU2FuaXR5J1xuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5wb2ludHMubW92ID0ge1xuICAgICAgICAgIHZhbHVlOiBDb0NBY3Rvci5tb3ZGcm9tQ2hhcmFjdGVyaXN0aWNzKHNoZWV0RGF0YS5wb2ludHMsICdjaGFyYWN0ZXInLCB0aGlzLm9iamVjdC5hZ2UpLFxuICAgICAgICAgIHByZWZpeDogJycsXG4gICAgICAgICAgc3VmZml4OiAnJyxcbiAgICAgICAgICBsYWJlbDogJ0NvQzcuTW92ZW1lbnQnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfT0NDVVBBVElPTlM6XG4gICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9ucyA9IGF3YWl0IHRoaXMuZmlsdGVyQ2FjaGVJdGVtQnlDb0NJRCgvXmlcXC5vY2N1cGF0aW9uXFwuLylcbiAgICAgICAgc2hlZXREYXRhLm9jY3VwYXRpb25zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5vY2N1cGF0aW9uICE9PSAnJykge1xuICAgICAgICAgIG9jY3VwYXRpb24gPSBzaGVldERhdGEub2NjdXBhdGlvbnMuZmluZChzID0+IHMuZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPT09IHNoZWV0RGF0YS5vYmplY3Qub2NjdXBhdGlvbilcbiAgICAgICAgICBpZiAodHlwZW9mIG9jY3VwYXRpb24gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuZGVzY3JpcHRpb24gPSBDb0M3UGFyc2VyLmVucmljaEhUTUwob2NjdXBhdGlvbi5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUpXG4gICAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvblBvaW50c1N0cmluZyA9IENvQzdPY2N1cGF0aW9uU2hlZXQub2NjdXBhdGlvblBvaW50c1N0cmluZyhvY2N1cGF0aW9uLnN5c3RlbS5vY2N1cGF0aW9uU2tpbGxQb2ludHMpXG4gICAgICAgICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nID0gb2NjdXBhdGlvbi5zeXN0ZW0uY3JlZGl0UmF0aW5nXG4gICAgICAgICAgICBzaGVldERhdGEucGVyc29uYWwgPSBvY2N1cGF0aW9uLnN5c3RlbS5wZXJzb25hbFxuICAgICAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsVGV4dCA9IG9jY3VwYXRpb24uc3lzdGVtLnBlcnNvbmFsVGV4dFxuICAgICAgICAgICAgc2hlZXREYXRhLnNraWxscyA9IGF3YWl0IHRoaXMuZXhwYW5kSXRlbUFycmF5KG9jY3VwYXRpb24uc3lzdGVtLnNraWxscylcbiAgICAgICAgICAgIHNoZWV0RGF0YS5ncm91cHMgPSB7fVxuICAgICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgc2hlZXREYXRhLmdyb3Vwc1tpbmRleF0gPSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uczogb2NjdXBhdGlvbi5zeXN0ZW0uZ3JvdXBzW2luZGV4XS5vcHRpb25zLFxuICAgICAgICAgICAgICAgIHNraWxsczogW11cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEuZ3JvdXBzW2luZGV4XS5za2lsbHMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbaW5kZXhdLnNraWxscylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNoZWV0RGF0YS5wb2ludHMgPSAwXG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0gW11cbiAgICAgICAgICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb24uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgICAgICAgICAgaWYgKGNhcmFjLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNhcmFjLm9wdGlvbmFsKSB7XG4gICAgICAgICAgICAgICAgICBvcHRpb25zLnB1c2goY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldLCAxMCkgKyBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVyc1trZXldLCAxMCkpKVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEucG9pbnRzICs9IGNhcmFjLm11bHRpcGxpZXIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBzaGVldERhdGEucG9pbnRzICs9IE1hdGgubWF4KC4uLm9wdGlvbnMpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9JTlZFU1RJR0FUT1I6XG4gICAgICAgIHNoZWV0RGF0YS5sYW5ndWFnZSA9ICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkTGFuZ3VhZ2VPd25dICE9PSAndW5kZWZpbmVkJylcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5sYW5ndWFnZSkge1xuICAgICAgICAgIHNoZWV0RGF0YS5sYW5ndWFnZU5hbWUgPSB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW3RoaXMuY29jaWRMYW5ndWFnZU93bl0uaXRlbS5uYW1lXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc2hlZXREYXRhLmxhbmd1YWdlTmFtZSA9ICcnXG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfT0NDVVBBVElPTl9TS0lMTFM6XG4gICAgICAgIHNoZWV0RGF0YS5kZWZhdWx0ID0gMFxuICAgICAgICBzaGVldERhdGEuc2VsZWN0ZWQgPSAwXG4gICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zID0gW11cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2tpbGxJdGVtcykge1xuICAgICAgICAgIGxldCBncm91cCA9ICdvdGhlcidcbiAgICAgICAgICBjb25zdCByb3dzID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5sZW5ndGhcbiAgICAgICAgICBjb25zdCBpc011bHRpcGxlID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uZmxhZ3MuaXNNdWx0aXBsZVxuICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBpbmRleDogLTEsXG4gICAgICAgICAgICAgIG5hbWU6IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgZ3JvdXAsXG4gICAgICAgICAgICAgIHRvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgIGlzQ3JlZGl0UmF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNNdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgaXNQaWNrYWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByb3dzOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBsZXQgaXNQaWNrYWJsZSA9IGZhbHNlXG4gICAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaXNPY2N1cGF0aW9uRGVmYXVsdCkge1xuICAgICAgICAgICAgICBncm91cCA9ICdkZWZhdWx0J1xuICAgICAgICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGlzUGlja2FibGUgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc2hlZXREYXRhLmRlZmF1bHQrK1xuICAgICAgICAgICAgfSBlbHNlIGlmIChzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pbk9jY3VwYXRpb25Hcm91cCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgZ3JvdXAgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5pbk9jY3VwYXRpb25Hcm91cFxuICAgICAgICAgICAgICBpZiAoaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIGlzUGlja2FibGUgPSB0cnVlXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gJ290aGVyJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRvZ2dsZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLm9jY3VwYXRpb25Ub2dnbGVcbiAgICAgICAgICAgIGlmIChpc1BpY2thYmxlKSB7XG4gICAgICAgICAgICAgIHRvZ2dsZSA9IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgc3BlY2lhbGl6YXRpb24gPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgICAgICAgbGV0IHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgbGV0IHBpY2tlZCA9IGZhbHNlXG4gICAgICAgICAgICBsZXQgZGVsZXRlYWJsZSA9IGZhbHNlXG4gICAgICAgICAgICBpZiAodHlwZW9mIHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICBwaWNrZWQgPSB0cnVlXG4gICAgICAgICAgICAgIHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgICAgICBwaWNrZWQgPSB0cnVlXG4gICAgICAgICAgICAgIHNwZWNpYWxpemF0aW9uID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQuc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICAgIHNraWxsTmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkLnN5c3RlbS5za2lsbE5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0b2dnbGUgfHwgKGlzUGlja2FibGUgJiYgcGlja2VkKSkge1xuICAgICAgICAgICAgICBzaGVldERhdGEuc2VsZWN0ZWQrK1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IG5hbWUgPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5pdGVtLm5hbWVcbiAgICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuY29jaWRMYW5ndWFnZU93bikge1xuICAgICAgICAgICAgICBuYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFpc1BpY2thYmxlICYmIHBpY2tlZCkge1xuICAgICAgICAgICAgICBuYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWlzUGlja2FibGUgJiYgcGlja2VkKSB7XG4gICAgICAgICAgICAgIGRlbGV0ZWFibGUgPSAhc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uYXJjaGV0eXBlVG9nZ2xlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgIHRvZ2dsZSxcbiAgICAgICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmlzQ3JlZGl0UmF0aW5nLFxuICAgICAgICAgICAgICBpc011bHRpcGxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNQaWNrYWJsZSxcbiAgICAgICAgICAgICAgcGlja2VkLFxuICAgICAgICAgICAgICBkZWxldGVhYmxlLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbixcbiAgICAgICAgICAgICAgc2tpbGxOYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEubWF4ID0gKHBhcnNlSW50KHNoZWV0RGF0YS5kZWZhdWx0LCAxMCkgfHwgMCkgKyAocGFyc2VJbnQoc2hlZXREYXRhLm9iamVjdC5wZXJzb25hbCwgMTApIHx8IDApICsgT2JqZWN0LnZhbHVlcyhzaGVldERhdGEub2JqZWN0Lm9jY3VwYXRpb25Hcm91cHMpLnJlZHVjZSgocywgdikgPT4gcyArIChwYXJzZUludCh2LCAxMCkgfHwgMCksIDApXG4gICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgICBpZiAoc2hlZXREYXRhLnNlbGVjdGVkID09PSBzaGVldERhdGEubWF4KSB7XG4gICAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSBzaGVldERhdGEucGFnZXMuUEFHRV9BUkNIRVRZUEVfU0tJTExTOlxuICAgICAgICBzaGVldERhdGEubWF4ID0gMFxuICAgICAgICBzaGVldERhdGEuc2VsZWN0ZWQgPSAwXG4gICAgICAgIHNoZWV0RGF0YS5za2lsbEl0ZW1zID0gW11cbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5vYmplY3Quc2tpbGxJdGVtcykge1xuICAgICAgICAgIGxldCBncm91cCA9ICdvdGhlcidcbiAgICAgICAgICBjb25zdCByb3dzID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5sZW5ndGhcbiAgICAgICAgICBjb25zdCBpc011bHRpcGxlID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uZmxhZ3MuaXNNdWx0aXBsZVxuICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBpbmRleDogLTEsXG4gICAgICAgICAgICAgIG5hbWU6IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZSxcbiAgICAgICAgICAgICAgZ3JvdXAsXG4gICAgICAgICAgICAgIHRvZ2dsZTogZmFsc2UsXG4gICAgICAgICAgICAgIGlzQ3JlZGl0UmF0aW5nOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNNdWx0aXBsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgaXNQaWNrYWJsZTogZmFsc2VcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCByb3dzOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBsZXQgaXNQaWNrYWJsZSA9IGZhbHNlXG4gICAgICAgICAgICBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uaXNBcmNoZXR5cGVEZWZhdWx0KSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gJ2RlZmF1bHQnXG4gICAgICAgICAgICAgIGlmIChpc011bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgaXNQaWNrYWJsZSA9IHRydWVcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBzaGVldERhdGEubWF4KytcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGdyb3VwID0gJ290aGVyJ1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IHRvZ2dsZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLmFyY2hldHlwZVRvZ2dsZVxuICAgICAgICAgICAgaWYgKGlzUGlja2FibGUpIHtcbiAgICAgICAgICAgICAgdG9nZ2xlID0gZmFsc2VcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzcGVjaWFsaXphdGlvbiA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICBsZXQgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgICAgICAgICBsZXQgcGlja2VkID0gZmFsc2VcbiAgICAgICAgICAgIGxldCBkZWxldGVhYmxlID0gZmFsc2VcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIHBpY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWRcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHBpY2tlZCA9IHRydWVcbiAgICAgICAgICAgICAgc3BlY2lhbGl6YXRpb24gPSBzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5zZWxlY3RlZC5zeXN0ZW0uc3BlY2lhbGl6YXRpb25cbiAgICAgICAgICAgICAgc2tpbGxOYW1lID0gc2hlZXREYXRhLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF0uc2VsZWN0ZWQuc3lzdGVtLnNraWxsTmFtZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRvZ2dsZSB8fCAoaXNQaWNrYWJsZSAmJiBwaWNrZWQpKSB7XG4gICAgICAgICAgICAgIHNoZWV0RGF0YS5zZWxlY3RlZCsrXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgbmFtZSA9IHNoZWV0RGF0YS5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZVxuICAgICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5jb2NpZExhbmd1YWdlT3duKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIWlzUGlja2FibGUgJiYgcGlja2VkKSB7XG4gICAgICAgICAgICAgIG5hbWUgPSBzcGVjaWFsaXphdGlvbiArICcgKCcgKyBza2lsbE5hbWUgKyAnKSdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNQaWNrYWJsZSAmJiBwaWNrZWQpIHtcbiAgICAgICAgICAgICAgZGVsZXRlYWJsZSA9ICFzaGVldERhdGEub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XS5vY2N1cGF0aW9uVG9nZ2xlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5wdXNoKHtcbiAgICAgICAgICAgICAga2V5LFxuICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgICAgZ3JvdXA6IGdyb3VwLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgIHRvZ2dsZSxcbiAgICAgICAgICAgICAgaXNDcmVkaXRSYXRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgICBpc011bHRpcGxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNQaWNrYWJsZSxcbiAgICAgICAgICAgICAgcGlja2VkLFxuICAgICAgICAgICAgICBkZWxldGVhYmxlLFxuICAgICAgICAgICAgICBzcGVjaWFsaXphdGlvbixcbiAgICAgICAgICAgICAgc2tpbGxOYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuc2tpbGxJdGVtcy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgaWYgKHNoZWV0RGF0YS5zZWxlY3RlZCA9PT0gc2hlZXREYXRhLm1heCkge1xuICAgICAgICAgIHNoZWV0RGF0YS5jYW5OZXh0ID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2Ugc2hlZXREYXRhLnBhZ2VzLlBBR0VfUE9JTlRTX1NLSUxMUzpcbiAgICAgICAgc2hlZXREYXRhLnNraWxscyA9IFtdXG4gICAgICAgIHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdPa2F5ID0gISh0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4ID4gMClcbiAgICAgICAgc2hlZXREYXRhLnBlcnNvbmFsID0ge1xuICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgIHRvdGFsOiAyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzLmludCwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMuaW50LCAxMCkpLFxuICAgICAgICAgIHJlbWFpbmluZzogMFxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uID0ge1xuICAgICAgICAgIGNvdW50OiAwLFxuICAgICAgICAgIHRvdGFsOiAwLFxuICAgICAgICAgIHJlbWFpbmluZzogMFxuICAgICAgICB9XG4gICAgICAgIHNoZWV0RGF0YS5hcmNoZXR5cGUgPSB7XG4gICAgICAgICAgY291bnQ6IDAsXG4gICAgICAgICAgdG90YWw6IDAsXG4gICAgICAgICAgcmVtYWluaW5nOiAwXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Quc2V0dXAgIT09ICcnKSB7XG4gICAgICAgICAgc2hvd01vbmV0YXJ5ID0gKGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRChzaGVldERhdGEub2JqZWN0LnNldHVwKSkuc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcy5sZW5ndGggPiAwXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNoZWV0RGF0YS5vYmplY3Qub2NjdXBhdGlvbiAhPT0gJycpIHtcbiAgICAgICAgICBvY2N1cGF0aW9uID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0Lm9jY3VwYXRpb24pXG4gICAgICAgICAgaWYgKG9jY3VwYXRpb24pIHtcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBbXVxuICAgICAgICAgICAgZm9yIChjb25zdCBba2V5LCBjYXJhY10gb2YgT2JqZWN0LmVudHJpZXMob2NjdXBhdGlvbi5zeXN0ZW0ub2NjdXBhdGlvblNraWxsUG9pbnRzKSkge1xuICAgICAgICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FyYWMub3B0aW9uYWwpIHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnMucHVzaChjYXJhYy5tdWx0aXBsaWVyICogKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSkpXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLnRvdGFsICs9IGNhcmFjLm11bHRpcGxpZXIgKiAocGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApICsgcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG9wdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbi50b3RhbCArPSBNYXRoLm1heCguLi5vcHRpb25zKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vYmplY3QuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgICAgIGNvbnN0IGFyY2hldHlwZSA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQodGhpcy5vYmplY3QuYXJjaGV0eXBlKVxuICAgICAgICAgIGlmIChhcmNoZXR5cGUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBzaGVldERhdGEuYXJjaGV0eXBlLnRvdGFsID0gYXJjaGV0eXBlWzBdLnN5c3RlbS5ib251c1BvaW50c1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5vYmplY3Quc2tpbGxJdGVtcykubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNraWxsSXRlbXMpIHtcbiAgICAgICAgICAgIGNvbnN0IHNraWxsID0gdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gc2tpbGwucm93cy5sZW5ndGg7IGluZGV4IDwgaW07IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgY29uc3Qgcm93ID0gc2tpbGwucm93c1tpbmRleF1cbiAgICAgICAgICAgICAgaWYgKCFza2lsbC5mbGFncy5pc011bHRpcGxlIHx8IHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IGR1cGxpY2F0ZShza2lsbC5pdGVtKVxuICAgICAgICAgICAgICAgIGlmIChyb3cuc2VsZWN0ZWQgIT09IGZhbHNlICYmIHR5cGVvZiByb3cuc2VsZWN0ZWQgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICBpdGVtID0gZHVwbGljYXRlKHJvdy5zZWxlY3RlZClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IGJhc2UgPSBpdGVtLnN5c3RlbS5iYXNlXG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOdW1lcmljKGJhc2UpKSB7XG4gICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZWdFeCA9IG5ldyBSZWdFeHAoJ0AnICsga2V5LCAnaScpXG4gICAgICAgICAgICAgICAgICAgIGJhc2UgPSBiYXNlLnJlcGxhY2UocmVnRXgsIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSlcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOdW1lcmljKGJhc2UpKSB7XG4gICAgICAgICAgICAgICAgICBiYXNlID0gTWF0aC5mbG9vcihuZXcgUm9sbChiYXNlKS5ldmFsdWF0ZSh7IGFzeW5jOiBmYWxzZSB9KS50b3RhbClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHRvdGFsUG9pbnRzID0gcGFyc2VJbnQoYmFzZSwgMTApXG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihyb3cucGVyc29uYWxQb2ludHMpID4gMCkge1xuICAgICAgICAgICAgICAgICAgY29uc3QgbnVtID0gTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cylcbiAgICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5wZXJzb25hbC5jb3VudCArPSBudW1cbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihyb3cub2NjdXBhdGlvblBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIocm93Lm9jY3VwYXRpb25Qb2ludHMpXG4gICAgICAgICAgICAgICAgICBzaGVldERhdGEub2NjdXBhdGlvbi5jb3VudCArPSBudW1cbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihyb3cuYXJjaGV0eXBlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihyb3cuYXJjaGV0eXBlUG9pbnRzKVxuICAgICAgICAgICAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZS5jb3VudCArPSBudW1cbiAgICAgICAgICAgICAgICAgIHRvdGFsUG9pbnRzID0gdG90YWxQb2ludHMgKyBudW1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKE51bWJlcihyb3cuZXhwZXJpZW5jZVBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICAgICAgICBjb25zdCBudW0gPSBOdW1iZXIocm93LmV4cGVyaWVuY2VQb2ludHMpXG4gICAgICAgICAgICAgICAgICB0b3RhbFBvaW50cyA9IHRvdGFsUG9pbnRzICsgbnVtXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGxldCBuYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gdGhpcy5jb2NpZExhbmd1YWdlT3duKSB7XG4gICAgICAgICAgICAgICAgICBuYW1lID0gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChza2lsbC5mbGFncy5pc0NyZWRpdFJhdGluZykge1xuICAgICAgICAgICAgICAgICAgbmFtZSA9IG5hbWUgKyAnIFsnICsgdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1pbiArICcgLSAnICsgdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1heCArICddJ1xuICAgICAgICAgICAgICAgICAgaWYgKHRvdGFsUG9pbnRzID49IHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZy5taW4gJiYgdG90YWxQb2ludHMgPD0gdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1heCkge1xuICAgICAgICAgICAgICAgICAgICBzaGVldERhdGEuY3JlZGl0UmF0aW5nT2theSA9IHRydWVcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByb3cuc2VsZWN0ZWQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgICBuYW1lID0gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgcm93LnNlbGVjdGVkICsgJyknXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNoZWV0RGF0YS5za2lsbHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICBrZXksXG4gICAgICAgICAgICAgICAgICBpbmRleCxcbiAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICBpc09jY3VwYXRpb246IHJvdy5vY2N1cGF0aW9uVG9nZ2xlLFxuICAgICAgICAgICAgICAgICAgaXNBcmNoZXR5cGU6IHJvdy5hcmNoZXR5cGVUb2dnbGUsXG4gICAgICAgICAgICAgICAgICBiYXNlLFxuICAgICAgICAgICAgICAgICAgcGVyc29uYWxQb2ludHM6IHJvdy5wZXJzb25hbFBvaW50cyxcbiAgICAgICAgICAgICAgICAgIG9jY3VwYXRpb25Qb2ludHM6IHJvdy5vY2N1cGF0aW9uUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgYXJjaGV0eXBlUG9pbnRzOiByb3cuYXJjaGV0eXBlUG9pbnRzLFxuICAgICAgICAgICAgICAgICAgZXhwZXJpZW5jZVBvaW50czogcm93LmV4cGVyaWVuY2VQb2ludHMsXG4gICAgICAgICAgICAgICAgICB0b3RhbFBvaW50cyxcbiAgICAgICAgICAgICAgICAgIHNob3dDcmVkaXRSYXRpbmc6IHNob3dNb25ldGFyeSAmJiBrZXkgPT09IHRoaXMuY29jaWRDcmVkaXRSYXRpbmdcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHNoZWV0RGF0YS5za2lsbHMuc29ydChDb0M3VXRpbGl0aWVzLnNvcnRCeU5hbWVLZXkpXG4gICAgICAgICAgaWYgKHNoZWV0RGF0YS5jcmVkaXRSYXRpbmdPa2F5KSB7XG4gICAgICAgICAgICBzaGVldERhdGEuY2FuTmV4dCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBzaGVldERhdGEucGVyc29uYWwucmVtYWluaW5nID0gc2hlZXREYXRhLnBlcnNvbmFsLnRvdGFsIC0gc2hlZXREYXRhLnBlcnNvbmFsLmNvdW50XG4gICAgICAgIHNoZWV0RGF0YS5vY2N1cGF0aW9uLnJlbWFpbmluZyA9IHNoZWV0RGF0YS5vY2N1cGF0aW9uLnRvdGFsIC0gc2hlZXREYXRhLm9jY3VwYXRpb24uY291bnRcbiAgICAgICAgc2hlZXREYXRhLmFyY2hldHlwZS5yZW1haW5pbmcgPSBzaGVldERhdGEuYXJjaGV0eXBlLnRvdGFsIC0gc2hlZXREYXRhLmFyY2hldHlwZS5jb3VudFxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0JBQ0tTVE9SWTpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IGFsbEJhY2tzdG9yaWVzID0gYXdhaXQgdGhpcy5vYmplY3QuY2FjaGVCYWNrc3Rvcmllc1xuICAgICAgICAgIHNoZWV0RGF0YS5iYWNrc3RvcmllcyA9IHt9XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgc2hlZXREYXRhLmJhY2tzdG9yaWVzW2luZGV4XSA9IHtcbiAgICAgICAgICAgICAgaW5kZXgsXG4gICAgICAgICAgICAgIG5hbWU6IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS5uYW1lLFxuICAgICAgICAgICAgICByb2xsczogKGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5maW5kQ29jSWRJbkxpc3QodGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLmtleSwgYWxsQmFja3N0b3JpZXMpLmxlbmd0aCA/IHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS5rZXkgOiAnJyksXG4gICAgICAgICAgICAgIHZhbHVlOiB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIHNoZWV0RGF0YS5jcmVhdGVCdXR0b24gPSBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlIHNoZWV0RGF0YS5wYWdlcy5QQUdFX0NSRUFURTpcbiAgICAgICAgc2hlZXREYXRhLmNhbk5leHQgPSB0cnVlXG4gICAgICAgIHNoZWV0RGF0YS5jcmVhdGVCdXR0b24gPSB0cnVlXG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwua2V5cHJlc3MoZSA9PiAvdGV4dGFyZWEvaS50ZXN0KChlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQpLnRhZ05hbWUpIHx8IChlLmtleUNvZGUgfHwgZS53aGljaCB8fCBlLmNoYXJDb2RlIHx8IDApICE9PSAxMylcbiAgICBodG1sLmZpbmQoJy5zdWJtaXRfb25fY2hhbmdlJykuY2hhbmdlKHRoaXMuX29uQ2hhbmdlU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcucm9sbC1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uUm9sbENoYXJhY3RlcmlzdGljLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaW5jcmVhc2UtMTAtY2hhcmFjdGVyaXN0aWMnKS5jbGljayh0aGlzLl9vbkluY3JlYXNlQ2hhcmFjdGVyaXN0aWMxMC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmluY3JlYXNlLWNoYXJhY3RlcmlzdGljJykuY2xpY2sodGhpcy5fb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGVjcmVhc2UtY2hhcmFjdGVyaXN0aWMnKS5jbGljayh0aGlzLl9vbkRlY3JlYXNlQ2hhcmFjdGVyaXN0aWMuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5kZWNyZWFzZS0xMC1jaGFyYWN0ZXJpc3RpYycpLmNsaWNrKHRoaXMuX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYzEwLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24ucm9sbF9hbGwnKS5jbGljayh0aGlzLl9vblJvbGxBbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJ2J1dHRvbi5yb2xsX2VkdScpLmNsaWNrKHRoaXMuX29uUm9sbEVkdS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uLnJvbGxfbHVjaycpLmNsaWNrKHRoaXMuX29uUm9sbEx1Y2suYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtIGlucHV0LnN1Ym1pdF9vbl9ibHVyJykuYmx1cih0aGlzLl9vbkNoYW5nZVN1Ym1pdC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0gaW5wdXQuc2F2ZS1jaGFyYWN0ZXJpc3RpYy1vbi1ibHVyJykuYmx1cih0aGlzLl9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYy5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0udG9nZ2xlYWJsZScpLmNsaWNrKHRoaXMuX29uVG9nZ2xlU2tpbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5pdGVtLmNsaWNrYWJsZScpLmNsaWNrKHRoaXMuX29uQ2xpY2tQaWNrU2tpbGwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5za2lsbHMtbGlzdCBpbnB1dCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tTa2lsbFNwZWNpYWwuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy5za2lsbHMtbGlzdCAucmVtb3ZlLXNraWxsJykuY2xpY2sodGhpcy5fb25DbGlja1JlbW92ZVNraWxsLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuaXRlbSBpbnB1dC5za2lsbC1hZGp1c3RtZW50JykuYmx1cih0aGlzLl9vbkNoYW5nZVNraWxsUG9pbnRzLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCd0ZXh0YXJlYS5iYWNrc3RvcnktdGV4dCcpLmtleXVwKHRoaXMuX29uQ2hhbmdlQmFja3N0b3J5VGV4dC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnYnV0dG9uLmJhY2tzdG9yeS1yb2xsJykuY2xpY2sodGhpcy5fb25Sb2xsQmFja3N0b3J5LmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCdidXR0b24uYmFja3N0b3J5LXJlc2V0JykuY2xpY2sodGhpcy5fb25SZXNldEJhY2tzdG9yeS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgcm9sbE1lc3NhZ2UgKHJvbGxzKSB7XG4gICAgaWYgKHJvbGxzLmxlbmd0aCkge1xuICAgICAgY29uc3QgaHRtbCA9IFtdXG4gICAgICBmb3IgKGNvbnN0IHJvbGwgb2Ygcm9sbHMpIHtcbiAgICAgICAgaHRtbC5wdXNoKGF3YWl0IHJlbmRlclRlbXBsYXRlKFJvbGwuQ0hBVF9URU1QTEFURSwge1xuICAgICAgICAgIGZvcm11bGE6IChDb0M3VXRpbGl0aWVzLmdldENoYXJhY3RlcmlzdGljTmFtZXMocm9sbFswXSk/LmxhYmVsID8/IHJvbGxbMF0pICsgJzogJyArIHJvbGxbMV0sXG4gICAgICAgICAgdG9vbHRpcDogYXdhaXQgcm9sbFsyXS5nZXRUb29sdGlwKCksXG4gICAgICAgICAgdG90YWw6IHJvbGxbMl0udG90YWxcbiAgICAgICAgfSkpXG4gICAgICB9XG4gICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudDogaHRtbC5qb2luKCc8ZGl2PiZuYnNwOzwvZGl2PicpLFxuICAgICAgICB3aGlzcGVyOiBDaGF0TWVzc2FnZS5nZXRXaGlzcGVyUmVjaXBpZW50cygnR00nKVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhZGRJdGVtVG9MaXN0IChpdGVtLCB7IGlzT2NjdXBhdGlvbkRlZmF1bHQgPSBmYWxzZSwgaW5PY2N1cGF0aW9uR3JvdXAgPSBmYWxzZSwgb2NjdXBhdGlvblRvZ2dsZSA9IGZhbHNlLCBpc0FyY2hldHlwZURlZmF1bHQgPSBmYWxzZSwgYXJjaGV0eXBlVG9nZ2xlID0gZmFsc2UsIGlzQ3JlZGl0UmF0aW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgY29uc3Qga2V5ID0gKGl0ZW0uZmxhZ3MuQ29DNz8uY29jaWRGbGFnPy5pZCA/PyBpdGVtLm5hbWUpXG4gICAgaWYgKGl0ZW0udHlwZSAhPT0gJ3NraWxsJykge1xuICAgICAgdGhpcy5vYmplY3QuaW52ZXN0aWdhdG9ySXRlbXMucHVzaChpdGVtKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGNvbnN0IGlzTXVsdGlwbGUgPSAhIShpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnNwZWNpYWwgJiYgKChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLnJlcXVpcmVzbmFtZSAmJiAhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMub25seW9uZSA/PyBmYWxzZSkpIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucGlja25hbWVvbmx5IHx8IGl0ZW0ubmFtZSA9PT0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5BbnlTcGVjTmFtZScpKSlcbiAgICBjb25zdCBmbGFncyA9IHtcbiAgICAgIGlzT2NjdXBhdGlvbkRlZmF1bHQsXG4gICAgICBpbk9jY3VwYXRpb25Hcm91cCxcbiAgICAgIGlzQXJjaGV0eXBlRGVmYXVsdCxcbiAgICAgIGlzQ3JlZGl0UmF0aW5nLFxuICAgICAgb2NjdXBhdGlvblRvZ2dsZSxcbiAgICAgIGFyY2hldHlwZVRvZ2dsZVxuICAgIH1cbiAgICBjb25zdCByb3dzID0ge1xuICAgICAgb2NjdXBhdGlvblBvaW50czogJycsXG4gICAgICBhcmNoZXR5cGVQb2ludHM6ICcnLFxuICAgICAgZXhwZXJpZW5jZVBvaW50czogJycsXG4gICAgICBwZXJzb25hbFBvaW50czogJycsXG4gICAgICBzZWxlY3RlZDogZmFsc2VcbiAgICB9XG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0gPSB7XG4gICAgICAgIGl0ZW0sXG4gICAgICAgIGZsYWdzOiBtZXJnZU9iamVjdChmbGFncywgeyBpc011bHRpcGxlIH0sIHsgaW5wbGFjZTogZmFsc2UgfSksXG4gICAgICAgIHJvd3M6IFtdXG4gICAgICB9XG4gICAgICBpZiAoIWlzTXVsdGlwbGUgfHwgIShpc09jY3VwYXRpb25EZWZhdWx0ID09PSBmYWxzZSAmJiBpbk9jY3VwYXRpb25Hcm91cCA9PT0gZmFsc2UgJiYgaXNBcmNoZXR5cGVEZWZhdWx0ID09PSBmYWxzZSkpIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MucHVzaChtZXJnZU9iamVjdChmbGFncywgcm93cywgeyBpbnBsYWNlOiBmYWxzZSB9KSlcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFpc011bHRpcGxlKSB7XG4gICAgICAgIGZvciAoY29uc3QgZmxhZyBpbiBmbGFncykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzWzBdW2ZsYWddID0gdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbMF1bZmxhZ10gfHwgZmxhZ3NbZmxhZ11cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3MucHVzaChtZXJnZU9iamVjdChmbGFncywgcm93cywgeyBpbnBsYWNlOiBmYWxzZSB9KSlcbiAgICAgIH1cbiAgICAgIGZvciAoY29uc3QgZmxhZyBpbiBmbGFncykge1xuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uZmxhZ3NbZmxhZ10gPSB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uZmxhZ3NbZmxhZ10gfHwgZmxhZ3NbZmxhZ11cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFpc011bHRpcGxlICYmIGZsYWdzLmlzQ3JlZGl0UmF0aW5nKSB7XG4gICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1swXS5vY2N1cGF0aW9uUG9pbnRzID0gdGhpcy5vYmplY3QuY3JlZGl0UmF0aW5nLm1pblxuICAgIH1cbiAgfVxuXG4gIGNsZWFyU2V0dXBQb2ludHMgKCkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID0gJydcbiAgICB9XG4gIH1cblxuICBhc3luYyBzZXRTa2lsbExpc3RzICgpIHtcbiAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zID0ge31cbiAgICB0aGlzLm9iamVjdC5vY2N1cGF0aW9uR3JvdXBzID0ge31cbiAgICB0aGlzLm9iamVjdC5pbnZlc3RpZ2F0b3JJdGVtcyA9IFtdXG4gICAgdGhpcy5vYmplY3QucGxhY2VhYmxlID0gZHVwbGljYXRlKHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcylcbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICBjb25zdCBvY2N1cGF0aW9uID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0Lm9jY3VwYXRpb24pXG4gICAgbGV0IGFyY2hldHlwZSA9IGZhbHNlXG4gICAgaWYgKHRoaXMub2JqZWN0LmFyY2hldHlwZSAhPT0gJycpIHtcbiAgICAgIGFyY2hldHlwZSA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5hcmNoZXR5cGUpXG4gICAgfVxuICAgIGlmIChzZXR1cCAmJiBvY2N1cGF0aW9uICYmICghZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAncHVscFJ1bGVBcmNoZXR5cGUnKSB8fCBhcmNoZXR5cGUpKSB7XG4gICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9ucyA9IFtdXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2V0dXAuc3lzdGVtLmJpb1NlY3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBzZXR1cC5zeXN0ZW0uYmlvU2VjdGlvbnNbaW5kZXhdLFxuICAgICAgICAgIHZhbHVlOiAnJyxcbiAgICAgICAgICBrZXk6ICdydC4uYmFja3N0b3J5LScgKyBDb0M3VXRpbGl0aWVzLnRvS2ViYWJDYXNlKHNldHVwLnN5c3RlbS5iaW9TZWN0aW9uc1tpbmRleF0pXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5wZXJzb25hbCA9IG9jY3VwYXRpb24uc3lzdGVtLnBlcnNvbmFsXG4gICAgICB0aGlzLm9iamVjdC5wZXJzb25hbFRleHQgPSBvY2N1cGF0aW9uLnN5c3RlbS5wZXJzb25hbFRleHRcbiAgICAgIHRoaXMub2JqZWN0LmNyZWRpdFJhdGluZyA9IG9jY3VwYXRpb24uc3lzdGVtLmNyZWRpdFJhdGluZ1xuICAgICAgbGV0IGl0ZW1zID0gW11cbiAgICAgIGl0ZW1zID0gYXdhaXQgdGhpcy5leHBhbmRJdGVtQXJyYXkoc2V0dXAuc3lzdGVtLml0ZW1zKVxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbXNbaW5kZXhdKVxuICAgICAgfVxuICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5za2lsbHMpXG4gICAgICBmb3IgKGxldCBpbmRleCA9IDAsIGltID0gaXRlbXMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaXNPY2N1cGF0aW9uRGVmYXVsdDogdHJ1ZSwgb2NjdXBhdGlvblRvZ2dsZTogdHJ1ZSB9KVxuICAgICAgfVxuICAgICAgZm9yIChsZXQgZ3JvdXAgPSAwLCBnbSA9IG9jY3VwYXRpb24uc3lzdGVtLmdyb3Vwcy5sZW5ndGg7IGdyb3VwIDwgZ207IGdyb3VwKyspIHtcbiAgICAgICAgdGhpcy5vYmplY3Qub2NjdXBhdGlvbkdyb3Vwc1tncm91cF0gPSBvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbZ3JvdXBdLm9wdGlvbnNcbiAgICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShvY2N1cGF0aW9uLnN5c3RlbS5ncm91cHNbZ3JvdXBdLnNraWxscylcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaW5PY2N1cGF0aW9uR3JvdXA6IGdyb3VwIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChhcmNoZXR5cGUpIHtcbiAgICAgICAgaXRlbXMgPSBhd2FpdCB0aGlzLmV4cGFuZEl0ZW1BcnJheShhcmNoZXR5cGUuc3lzdGVtLnNraWxscylcbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGl0ZW1zLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICAgIHRoaXMuYWRkSXRlbVRvTGlzdChpdGVtc1tpbmRleF0sIHsgaXNBcmNoZXR5cGVEZWZhdWx0OiB0cnVlLCBhcmNoZXR5cGVUb2dnbGU6IHRydWUgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKE51bWJlcih0aGlzLm9iamVjdC5jcmVkaXRSYXRpbmcubWF4KSA+IDApIHtcbiAgICAgICAgY29uc3QgbmFtZUNyZWRpdFJhdGluZyA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmtleXMuJyArIHRoaXMuY29jaWRDcmVkaXRSYXRpbmcpXG4gICAgICAgIGNvbnN0IGZsYWdzID0geyBpc09jY3VwYXRpb25EZWZhdWx0OiB0cnVlLCBvY2N1cGF0aW9uVG9nZ2xlOiB0cnVlLCBpc0NyZWRpdFJhdGluZzogdHJ1ZSB9XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QodGhpcy5vYmplY3Quc2tpbGxJdGVtc1t0aGlzLmNvY2lkQ3JlZGl0UmF0aW5nXS5pdGVtLCBmbGFncylcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1tuYW1lQ3JlZGl0UmF0aW5nXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QodGhpcy5vYmplY3Quc2tpbGxJdGVtc1tuYW1lQ3JlZGl0UmF0aW5nXS5pdGVtLCBmbGFncylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBza2lsbCA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSUQodGhpcy5jb2NpZENyZWRpdFJhdGluZylcbiAgICAgICAgICBpZiAoc2tpbGwubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3Qoc2tpbGxbMF0sIGZsYWdzKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9vbkRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5KSB7XG4gICAgICBjb25zdCBkcmFnRGF0YSA9IHsgdHlwZTogJ2ludmVzdGlnYXRvckNoYXJhY3RlcmlzdGljJywga2V5OiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuY2hhcmFjdGVyaXN0aWNLZXksIHZhbHVlOiBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudmFsdWUgfVxuICAgICAgZXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgZGF0YUxpc3QgPSBKU09OLnBhcnNlKGV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKCd0ZXh0L3BsYWluJykpXG4gICAgICBpZiAodHlwZW9mIGRhdGFMaXN0LnR5cGUgIT09ICd1bmRlZmluZWQnICYmIGRhdGFMaXN0LnR5cGUgPT09ICdpbnZlc3RpZ2F0b3JDaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgZGF0YUxpc3QuZGVzdGluYXRpb24gPSBldmVudC50YXJnZXQuY2xvc2VzdCgnbGknKS5kYXRhc2V0LmNoYXJhY3RlcmlzdGljS2V5XG4gICAgICAgIGRhdGFMaXN0Lm9rYXkgPSBmYWxzZVxuICAgICAgICBpZiAoZGF0YUxpc3Qua2V5ID09PSAnLScgJiYgdHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMub2JqZWN0LnBsYWNlYWJsZS5pbmRleE9mKHBhcnNlSW50KGRhdGFMaXN0LnZhbHVlLCAxMCkpXG4gICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNwbGljZShpbmRleCwgMSlcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5wdXNoKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSwgMTApKVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSBwYXJzZUludChkYXRhTGlzdC52YWx1ZSwgMTApXG4gICAgICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlLnNvcnQoKS5yZXZlcnNlKClcbiAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldICE9PSAndW5kZWZpbmVkJyAmJiBkYXRhTGlzdC5kZXN0aW5hdGlvbiA9PT0gJy0nKSB7XG4gICAgICAgICAgaWYgKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gIT09ICcnKSB7XG4gICAgICAgICAgICB0aGlzLm9iamVjdC5wbGFjZWFibGUucHVzaChwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldLCAxMCkpXG4gICAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldID0gJydcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZS5zb3J0KCkucmV2ZXJzZSgpXG4gICAgICAgICAgICBkYXRhTGlzdC5va2F5ID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmRlc3RpbmF0aW9uXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBjb25zdCB0ZW1wID0gKHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2RhdGFMaXN0LmtleV0gPT09ICcnID8gJycgOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5rZXldLCAxMCkpXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbZGF0YUxpc3Qua2V5XSA9ICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPT09ICcnID8gJycgOiBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0sIDEwKSlcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1tkYXRhTGlzdC5kZXN0aW5hdGlvbl0gPSB0ZW1wXG4gICAgICAgICAgZGF0YUxpc3Qub2theSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZiAoZGF0YUxpc3Qub2theSkge1xuICAgICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICB9XG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG4gICAgaWYgKFt0aGlzLnBhZ2VMaXN0LlBBR0VfQVJDSEVUWVBFX1NLSUxMUywgdGhpcy5wYWdlTGlzdC5QQUdFX09DQ1VQQVRJT05fU0tJTExTXS5pbmNsdWRlcyh0aGlzLm9iamVjdC5zdGVwKSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICB0aGlzLmFkZEl0ZW1Ub0xpc3QoaXRlbSlcbiAgICAgICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX29uQ2xpY2tTa2lsbFNwZWNpYWwgKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgfVxuXG4gIF9vbkNsaWNrUmVtb3ZlU2tpbGwgKGV2ZW50KSB7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCBrZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5wYXJlbnROb2RlPy5kYXRhc2V0Py5rZXlcbiAgICBjb25zdCBpbmRleCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LnBhcmVudE5vZGU/LmRhdGFzZXQ/LmluZGV4XG4gICAgaWYgKHR5cGVvZiB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0/LnJvd3NbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3Muc3BsaWNlKGluZGV4LCBpbmRleClcbiAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlU2tpbGwgKGV2ZW50KSB7XG4gICAgY29uc3Qga2V5ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8ua2V5XG4gICAgY29uc3QgaW5kZXggPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py5pbmRleFxuICAgIGNvbnN0IHRvZ2dsZUtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LnRvZ2dsZUtleVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldPy5yb3dzW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gIXRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrUGlja1NraWxsIChldmVudCkge1xuICAgIGNvbnN0IGtleSA9IGV2ZW50LmN1cnJlbnRUYXJnZXQ/LmRhdGFzZXQ/LmtleVxuICAgIGNvbnN0IGluZGV4ID0gZXZlbnQuY3VycmVudFRhcmdldD8uZGF0YXNldD8uaW5kZXhcbiAgICBjb25zdCB0b2dnbGVLZXkgPSBldmVudC5jdXJyZW50VGFyZ2V0Py5kYXRhc2V0Py50b2dnbGVLZXlcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XS5yb3dzW2luZGV4XVt0b2dnbGVLZXldID0gZmFsc2VcbiAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgIH1cbiAgICAgIGxldCBza2lsbExpc3QgPSBbXVxuICAgICAgY29uc3QgZ3JvdXAgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NHcm91cEZyb21LZXkoa2V5KVxuICAgICAgaWYgKGdyb3VwKSB7XG4gICAgICAgIHNraWxsTGlzdCA9IChhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEUmVnZXhCZXN0KHsgY29jaWRSZWdFeHA6IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChncm91cCkgKyAnLiskJyksIHR5cGU6ICdpJyB9KSkuZmlsdGVyKGl0ZW0gPT4ge1xuICAgICAgICAgIHJldHVybiAhKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnNwZWNpYWwgJiYgISEoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lIHx8IGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LnBpY2tuYW1lb25seSkpXG4gICAgICAgIH0pXG4gICAgICAgIGlmIChza2lsbExpc3QubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHNraWxsTGlzdC5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3Qgc2tpbGxEYXRhID0gYXdhaXQgU2tpbGxTcGVjaWFsaXphdGlvblNlbGVjdERpYWxvZy5jcmVhdGUoe1xuICAgICAgICBza2lsbHM6IHNraWxsTGlzdCxcbiAgICAgICAgYWxsb3dDdXN0b206ICh0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0uaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8ucmVxdWlyZXNuYW1lID8/IGZhbHNlKSxcbiAgICAgICAgZml4ZWRCYXNlVmFsdWU6IHRydWUsXG4gICAgICAgIHNwZWNpYWxpemF0aW9uTmFtZTogdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uLFxuICAgICAgICBsYWJlbDogdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLml0ZW0ubmFtZVxuICAgICAgfSlcbiAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgIGlmIChza2lsbERhdGEuc2VsZWN0ZWQgIT09ICcnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gc2tpbGxMaXN0LmZpbmQoaSA9PiBpLmlkID09PSBza2lsbERhdGEuc2VsZWN0ZWQpXG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdW3RvZ2dsZUtleV0gPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpbGxEYXRhLm5hbWUgIT09ICcnKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3Quc2tpbGxJdGVtc1trZXldLnJvd3NbaW5kZXhdLnNlbGVjdGVkID0gc2tpbGxEYXRhLm5hbWVcbiAgICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bdG9nZ2xlS2V5XSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IHNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgaWYgKHNraWxsRGF0YS5zZWxlY3RlZCAhPT0gJycpIHtcbiAgICAgICAgICBzZWxlY3RlZCA9IHNraWxsTGlzdC5maW5kKGkgPT4gaS5pZCA9PT0gc2tpbGxEYXRhLnNlbGVjdGVkKVxuICAgICAgICB9IGVsc2UgaWYgKHNraWxsRGF0YS5uYW1lICE9PSAnJykge1xuICAgICAgICAgIHNlbGVjdGVkID0gc2tpbGxEYXRhLm5hbWVcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93cy5wdXNoKHtcbiAgICAgICAgICBpc09jY3VwYXRpb25EZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgICBpbk9jY3VwYXRpb25Hcm91cDogZmFsc2UsXG4gICAgICAgICAgaXNBcmNoZXR5cGVEZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgICBpc0NyZWRpdFJhdGluZzogZmFsc2UsXG4gICAgICAgICAgb2NjdXBhdGlvblRvZ2dsZTogKHRvZ2dsZUtleSA9PT0gJ29jY3VwYXRpb25Ub2dnbGUnKSxcbiAgICAgICAgICBhcmNoZXR5cGVUb2dnbGU6ICh0b2dnbGVLZXkgPT09ICdhcmNoZXR5cGVUb2dnbGUnKSxcbiAgICAgICAgICBvY2N1cGF0aW9uUG9pbnRzOiAnJyxcbiAgICAgICAgICBhcmNoZXR5cGVQb2ludHM6ICcnLFxuICAgICAgICAgIGV4cGVyaWVuY2VQb2ludHM6ICcnLFxuICAgICAgICAgIHBlcnNvbmFsUG9pbnRzOiAnJyxcbiAgICAgICAgICBzZWxlY3RlZFxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VTa2lsbFBvaW50cyAoZXZlbnQpIHtcbiAgICBjb25zdCBpbnB1dCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBhZGp1c3RtZW50ID0gaW5wdXQuZGF0YSgnYWRqdXN0bWVudCcpXG4gICAgY29uc3QgbGkgPSBpbnB1dC5jbG9zZXN0KCdsaScpXG4gICAgY29uc3Qga2V5ID0gbGkuZGF0YSgna2V5JylcbiAgICBjb25zdCBpbmRleCA9IGxpLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNraWxsSXRlbXNba2V5XT8ucm93c1tpbmRleF1bYWRqdXN0bWVudF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm9iamVjdC5za2lsbEl0ZW1zW2tleV0ucm93c1tpbmRleF1bYWRqdXN0bWVudF0gPSBpbnB1dC52YWwoKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhbmdlQmFja3N0b3J5VGV4dCAoZXZlbnQpIHtcbiAgICBjb25zdCB0ZXh0YXJlYSA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICBjb25zdCBpbmRleCA9IHRleHRhcmVhLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSA9IHRleHRhcmVhLnZhbCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEJhY2tzdG9yeSAoZXZlbnQpIHtcbiAgICBjb25zdCBidXR0b24gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgaW5kZXggPSBidXR0b24uZGF0YSgnaW5kZXgnKVxuICAgIGNvbnN0IGtleSA9IGJ1dHRvbi5kYXRhKCdrZXknKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3Qgcm9sbHRhYmxlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRChrZXkpXG4gICAgICBpZiAocm9sbHRhYmxlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCB0YWJsZVJlc3VsdCA9IGF3YWl0IHJvbGx0YWJsZVswXS5yb2xsKClcbiAgICAgICAgaWYgKHRhYmxlUmVzdWx0LnJlc3VsdHNbMF0udHlwZSA9PT0gQ09OU1QuVEFCTEVfUkVTVUxUX1RZUEVTLlRFWFQpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWUgPSAodGhpcy5vYmplY3QuYmlvU2VjdGlvbnNbaW5kZXhdLnZhbHVlICsgJ1xcbicgKyB0YWJsZVJlc3VsdC5yZXN1bHRzWzBdLnRleHQudHJpbSgpKS50cmltKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRCYWNrc3RvcnkgKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gJChldmVudC5jdXJyZW50VGFyZ2V0KVxuICAgIGNvbnN0IGluZGV4ID0gYnV0dG9uLmRhdGEoJ2luZGV4JylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMub2JqZWN0LmJpb1NlY3Rpb25zW2luZGV4XS52YWx1ZSA9ICcnXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25Sb2xsTHVjayAoZXZlbnQpIHtcbiAgICBjb25zdCBzZXR1cCA9IGF3YWl0IHRoaXMuZ2V0Q2FjaGVJdGVtQnlDb0NJRCh0aGlzLm9iamVjdC5zZXR1cClcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgIGNvbnN0IGRpZSA9IGF3YWl0IG5ldyBSb2xsKHNldHVwLnN5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMubHVjay50b1N0cmluZygpKS5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgICB0aGlzLm9iamVjdC5zZXR1cE1vZGlmaWVycy5sdWNrID0gW2RpZS50b3RhbF1cbiAgICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZShSb2xsLkNIQVRfVEVNUExBVEUsIHtcbiAgICAgICAgZm9ybXVsYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkludmVzdGlnYXRvcldpemFyZC5Sb2xsVHdpY2VGb3JMdWNrJykgKyAnOiAnICsgc2V0dXAuc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5yb2xscy5sdWNrLnRvU3RyaW5nKCksXG4gICAgICAgIHRvb2x0aXA6IGF3YWl0IGRpZS5nZXRUb29sdGlwKCksXG4gICAgICAgIHRvdGFsOiBkaWUudG90YWxcbiAgICAgIH0pXG4gICAgICBDaGF0TWVzc2FnZS5jcmVhdGUoe1xuICAgICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICAgIHNwZWFrZXI6IHtcbiAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgfSxcbiAgICAgICAgY29udGVudDogaHRtbCxcbiAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgIH0pXG4gICAgICB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxFZHUgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGlmICh0eXBlb2YgdGhpcy5vYmplY3QucmVxdWlyZXNBZ2VBZGp1c3RtZW50cy5lZHUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoIXRoaXMub2JqZWN0LnJlcXVpcmVzQWdlQWRqdXN0bWVudHMuZWR1LnJvbGxlZCAmJiB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS50b3RhbCkge1xuICAgICAgICBsZXQgdmFsdWUgPSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5lZHUsIDEwKVxuICAgICAgICBjb25zdCBtZXNzYWdlID0gW11cbiAgICAgICAgZm9yIChsZXQgcm9sbHMgPSB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS50b3RhbDsgcm9sbHMgPiAwOyByb2xscy0tKSB7XG4gICAgICAgICAgY29uc3QgZGllID0gYXdhaXQgbmV3IFJvbGwoJzFkMTAwJykuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgIGlmIChkaWUudG90YWwgPiB2YWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgYXVnbWVudERpZSA9IGF3YWl0IG5ldyBSb2xsKCcxZDEwJykuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgICAgICAgICAgbWVzc2FnZS5wdXNoKGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtc3VjY2Vzc1wiPiR7Z2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICAgJ0NvQzcuRGV2U3VjY2VzcycsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NIQVJBQy5FZHVjYXRpb24nKSxcbiAgICAgICAgICAgICAgICBkaWU6IGRpZS50b3RhbCxcbiAgICAgICAgICAgICAgICBzY29yZTogdmFsdWUsXG4gICAgICAgICAgICAgICAgYXVnbWVudDogYXVnbWVudERpZS50b3RhbFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YClcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBwYXJzZUludChhdWdtZW50RGllLnRvdGFsLCAxMClcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVzc2FnZS5wdXNoKGA8c3BhbiBjbGFzcz1cInVwZ3JhZGUtZmFpbGVkXCI+JHtnYW1lLmkxOG4uZm9ybWF0KFxuICAgICAgICAgICAgICAnQ29DNy5EZXZGYWlsdXJlJyxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW06IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ0hBUkFDLkVkdWNhdGlvbicpLFxuICAgICAgICAgICAgICAgIGRpZTogZGllLnRvdGFsLFxuICAgICAgICAgICAgICAgIHNjb3JlOiB2YWx1ZVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICApfTwvc3Bhbj48YnI+YClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgICAgICBmbGF2b3I6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsQWxsNERldicpLFxuICAgICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgICBzcGVha2VyOiB7XG4gICAgICAgICAgICBhbGlhczogZ2FtZS51c2VyLm5hbWVcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbnRlbnQ6IG1lc3NhZ2Uuam9pbignJyksXG4gICAgICAgICAgd2hpc3BlcjogQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnMuZWR1ID0gdmFsdWUgLSBwYXJzZUludCh0aGlzLm9iamVjdC5zZXR1cFBvaW50cy5lZHUsIDEwKVxuICAgICAgICB0aGlzLm9iamVjdC5yZXF1aXJlc0FnZUFkanVzdG1lbnRzLmVkdS5yb2xsZWQgPSB0cnVlXG4gICAgICAgIHRoaXMucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgX29uUm9sbEFsbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3Qgcm9sbHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IG9mIFsnc3RyJywgJ2NvbicsICdzaXonLCAnZGV4JywgJ2FwcCcsICdpbnQnLCAncG93JywgJ2VkdScsICdsdWNrJ10pIHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMucm9sbENoYXJhY3RlcmlzdGljKGtleSlcbiAgICAgIGlmIChyZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgIHJvbGxzLnB1c2gocmVzdWx0KVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnJvbGxNZXNzYWdlKHJvbGxzKVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgMTAsIGxpLmRhdGFzZXQubWluLCBsaS5kYXRhc2V0Lm1heClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBsaS5kYXRhc2V0LmtleSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5Q2hhcmFjdGVyaXN0aWMobGkuZGF0YXNldC5rZXksIDEwKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uSW5jcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBpZiAodHlwZW9mIGxpLmRhdGFzZXQub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5taW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5T2Zmc2V0KGxpLmRhdGFzZXQub2Zmc2V0LCAxLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAxKVxuICAgIH1cbiAgICB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSBldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5pdGVtJylcbiAgICBpZiAodHlwZW9mIGxpLmRhdGFzZXQub2Zmc2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5taW4gIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBsaS5kYXRhc2V0Lm1heCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubW9kaWZ5T2Zmc2V0KGxpLmRhdGFzZXQub2Zmc2V0LCAtMSwgbGkuZGF0YXNldC5taW4sIGxpLmRhdGFzZXQubWF4KVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGxpLmRhdGFzZXQua2V5ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5tb2RpZnlDaGFyYWN0ZXJpc3RpYyhsaS5kYXRhc2V0LmtleSwgLTEpXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgaWYgKHR5cGVvZiBsaS5kYXRhc2V0Lm9mZnNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGxpLmRhdGFzZXQubWluICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgbGkuZGF0YXNldC5tYXggIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeU9mZnNldChsaS5kYXRhc2V0Lm9mZnNldCwgLTEwLCBsaS5kYXRhc2V0Lm1pbiwgbGkuZGF0YXNldC5tYXgpXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbGkuZGF0YXNldC5rZXkgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLm1vZGlmeUNoYXJhY3RlcmlzdGljKGxpLmRhdGFzZXQua2V5LCAtMTApXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBtb2RpZnlPZmZzZXQgKGtleSwgdmFsdWUsIG1pbiwgbWF4KSB7XG4gICAgdGhpcy5vYmplY3Quc2V0dXBNb2RpZmllcnNba2V5XSA9IE1hdGgubWF4KE1hdGgubWluKHBhcnNlSW50KHRoaXMub2JqZWN0LnNldHVwTW9kaWZpZXJzW2tleV0sIDEwKSArIHZhbHVlLCBwYXJzZUludChtYXgsIDEwKSksIHBhcnNlSW50KG1pbiwgMTApKVxuICB9XG5cbiAgbW9kaWZ5Q2hhcmFjdGVyaXN0aWMgKGtleSwgdmFsdWUpIHtcbiAgICBjb25zdCBsaSA9IHRoaXMuX2VsZW1lbnRbMF0ucXVlcnlTZWxlY3RvcihgbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpPy5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpXG4gICAgaWYgKGlucHV0KSB7XG4gICAgICBpbnB1dC52YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSkgKyB2YWx1ZVxuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSA9IE51bWJlcihpbnB1dC52YWx1ZSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25Sb2xsQ2hhcmFjdGVyaXN0aWMgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgY2hhcmFjS2V5ID0gbGkuZGF0YXNldC5rZXlcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLnJvbGxDaGFyYWN0ZXJpc3RpYyhjaGFyYWNLZXkpXG4gICAgaWYgKHJlc3VsdCAhPT0gZmFsc2UpIHtcbiAgICAgIHRoaXMucm9sbE1lc3NhZ2UoW3Jlc3VsdF0pXG4gICAgfVxuICAgIHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyByb2xsQ2hhcmFjdGVyaXN0aWMgKGtleSkge1xuICAgIGNvbnN0IGxpID0gJChgI2ludmVzdGlnYXRvci13aXphcmQtYXBwbGljYXRpb24gbGkuaXRlbVtkYXRhLWtleT0ke2tleX1dYClcbiAgICBjb25zdCBpbnB1dCA9IGxpLmZpbmQoJ2lucHV0JylcbiAgICBjb25zdCBmb3JtdWxhID0gbGkuZGF0YSgncm9sbCcpXG4gICAgaWYgKGlucHV0ICYmIGZvcm11bGEpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZCB8fCB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID09PSAnJykge1xuICAgICAgICBjb25zdCByb2xsID0gbmV3IFJvbGwoZm9ybXVsYS50b1N0cmluZygpKVxuICAgICAgICBhd2FpdCByb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgaW5wdXQudmFsKHJvbGwudG90YWwpXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gPSBOdW1iZXIocm9sbC50b3RhbClcbiAgICAgICAgcmV0dXJuIFtrZXksIGZvcm11bGEudG9TdHJpbmcoKSwgcm9sbF1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICAvKiogQG92ZXJyaWRlXG4gICAqIEEgc3ViY2xhc3Mgb2YgdGhlIEZvcm1BcHBsaWNhdGlvbiBtdXN0IGltcGxlbWVudCB0aGUgX29uQ2hhbmdlU3VibWl0IG1ldGhvZC5cbiAgICovXG4gIF9vbkNoYW5nZVN1Ym1pdCAoZXZlbnQpIHtcbiAgICB0aGlzLl9vblN1Ym1pdChldmVudClcbiAgfVxuXG4gIF9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyAoZXZlbnQpIHtcbiAgICBjb25zdCBvYmogPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgY29uc3QgbmFtZSA9IG9iai5wcm9wKCduYW1lJylcbiAgICBpZiAodHlwZW9mIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW25hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5vYmplY3Quc2V0dXBQb2ludHNbbmFtZV0gPSBvYmoudmFsKClcbiAgICAgIGxldCBlbXB0aWVzID0gZmFsc2VcbiAgICAgIGxldCB0b3RhbCA9IDBcbiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzKSB7XG4gICAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldICE9PSAnJykge1xuICAgICAgICAgIGlmIChrZXkgIT09ICdsdWNrJykge1xuICAgICAgICAgICAgdG90YWwgKz0gcGFyc2VJbnQodGhpcy5vYmplY3Quc2V0dXBQb2ludHNba2V5XSwgMTApXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVtcHRpZXMgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGNvbnN0IG9ialRvdGFsID0gb2JqLmNsb3Nlc3QoJ29sLml0ZW0tbGlzdCcpLmZpbmQoJ3NwYW4udG90YWwnKVxuICAgICAgY29uc3QgbWF4ID0gcGFyc2VJbnQob2JqVG90YWwuc2libGluZ3MoJ3NwYW4udmFsdWUnKS50ZXh0KCksIDEwKVxuICAgICAgb2JqVG90YWwudGV4dCh0b3RhbClcbiAgICAgIGlmICh0b3RhbCA9PT0gbWF4ICYmICFlbXB0aWVzKSB7XG4gICAgICAgIGlmIChvYmouY2xvc2VzdCgnZm9ybScpLmZpbmQoJ2J1dHRvbi5zdWJtaXQtYnV0dG9uW2RhdGEtYnV0dG9uPW5leHRdJykubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKG9iai5jbG9zZXN0KCdmb3JtJykuZmluZCgnYnV0dG9uLnN1Ym1pdC1idXR0b25bZGF0YS1idXR0b249bmV4dF0nKS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldFBhZ2VOdW1iZXIgKGRpcmVjdGlvbikge1xuICAgIGNvbnN0IHBhZ2VPcmRlciA9IHRoaXMucGFnZU9yZGVyXG4gICAgY29uc3Qga2V5ID0gcGFyc2VJbnQoT2JqZWN0LmtleXMocGFnZU9yZGVyKS5maW5kKGtleSA9PiBwYWdlT3JkZXJba2V5XSA9PT0gdGhpcy5vYmplY3Quc3RlcCksIDEwKSArIGRpcmVjdGlvblxuICAgIHJldHVybiBwYWdlT3JkZXJba2V5XVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZVxuICAgKiBBIHN1YmNsYXNzIG9mIHRoZSBGb3JtQXBwbGljYXRpb24gbXVzdCBpbXBsZW1lbnQgdGhlIF91cGRhdGVPYmplY3QgbWV0aG9kLlxuICAgKi9cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgaWYgKFsnYmFjaycsICduZXh0J10uaW5jbHVkZXMoZXZlbnQuc3VibWl0dGVyPy5kYXRhc2V0LmJ1dHRvbikpIHtcbiAgICAgIGlmIChldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lLmluZGV4T2YoJ2N1cnJlbnRseS1zdWJtaXR0aW5nJykgPiAtMSkge1xuICAgICAgICByZXR1cm5cbiAgICAgIH1cbiAgICAgIGV2ZW50LnN1Ym1pdHRlci5jbGFzc05hbWUgPSBldmVudC5zdWJtaXR0ZXIuY2xhc3NOYW1lICsgJyBjdXJyZW50bHktc3VibWl0dGluZydcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZm9ybURhdGFbJ3dvcmxkLWVyYSddICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtb3duZXJzaGlwJ10gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFNldHVwICE9PSBmb3JtRGF0YVsnZGVmYXVsdC1zZXR1cCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRTZXR1cCA9IGZvcm1EYXRhWydkZWZhdWx0LXNldHVwJ11cbiAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnLCB0aGlzLm9iamVjdC5kZWZhdWx0U2V0dXApXG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwID0gdGhpcy5vYmplY3QuZGVmYXVsdFNldHVwXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdE93bmVyc2hpcCAhPT0gZm9ybURhdGFbJ2RlZmF1bHQtb3duZXJzaGlwJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdE93bmVyc2hpcCA9IGZvcm1EYXRhWydkZWZhdWx0LW93bmVyc2hpcCddXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZE93bmVyc2hpcCcsIHRoaXMub2JqZWN0LmRlZmF1bHRPd25lcnNoaXApXG4gICAgICB9XG4gICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdEVyYSAhPT0gZm9ybURhdGFbJ3dvcmxkLWVyYSddKSB7XG4gICAgICAgIGNvbnN0IG9iaiA9ICQodGhpcy5lbGVtZW50LmZpbmQoJ2Zvcm0nKSlcbiAgICAgICAgY29uc3Qgc3RhcnRlZCA9IERhdGUubm93KClcbiAgICAgICAgb2JqLmZpbmQoJy5kaWFsb2ctYnV0dG9uczpmaXJzdCcpLmhpZGUoKVxuICAgICAgICBvYmouZmluZCgnLnNjcm9sbHNlY3Rpb246Zmlyc3QnKS5oaWRlKClcbiAgICAgICAgb2JqLmZpbmQoJy5lcmFjaGFuZ2U6Zmlyc3QnKS5zaG93KClcbiAgICAgICAgdGhpcy5vYmplY3QuZGVmYXVsdEVyYSA9IGZvcm1EYXRhWyd3b3JsZC1lcmEnXVxuICAgICAgICBhd2FpdCBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICd3b3JsZEVyYScsIHRoaXMub2JqZWN0LmRlZmF1bHRFcmEpXG4gICAgICAgIHRoaXMub2JqZWN0LmNhY2hlQ29DSUQgPSBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmxvYWRDYWNoZUl0ZW1CeUNvQ0lEKClcbiAgICAgICAgLy8gVG8gcHJldmVudCBmbGFzaGluZyBzaG93IG1lc3NhZ2UgZm9yIGF0IGxlYXN0IDUwMCBtc1xuICAgICAgICBjb25zdCBidWZmZXIgPSA1MDAgLSAoRGF0ZS5ub3coKSAtIHN0YXJ0ZWQpXG4gICAgICAgIC8vIERvbid0IGJvdGhlciBpZiBsZXNzIHRoYW4gMTBtcyByZW1haW5pbmdcbiAgICAgICAgaWYgKGJ1ZmZlciA+IDEwKSB7XG4gICAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGJ1ZmZlcikpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICgodHlwZW9mIGZvcm1EYXRhWydjaGFyYWN0ZXJpc3RpY3MtbWV0aG9kJ10gIT09ICd1bmRlZmluZWQnKSkge1xuICAgICAgICBjb25zdCB0eXBlID0gTnVtYmVyKGZvcm1EYXRhWydjaGFyYWN0ZXJpc3RpY3MtbWV0aG9kJ10pXG4gICAgICAgIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX0RFRkFVTFQpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSBmYWxzZVxuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFtdXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gdGhpcy5jaGFyYWN0ZXJpc3RpY3NNZXRob2RzLk1FVEhPRF9QT0lOVFMpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lbmZvcmNlUG9pbnRCdXkgPSB0cnVlXG4gICAgICAgICAgdGhpcy5vYmplY3QucXVpY2tGaXJlVmFsdWVzID0gW11cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSB0aGlzLmNoYXJhY3RlcmlzdGljc01ldGhvZHMuTUVUSE9EX1ZBTFVFUykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmVuZm9yY2VQb2ludEJ1eSA9IGZhbHNlXG4gICAgICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3B1bHBSdWxlQXJjaGV0eXBlJykpIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFs5MCwgODAsIDcwLCA2MCwgNjAsIDUwLCA1MCwgNDBdXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcyA9IFs4MCwgNzAsIDYwLCA2MCwgNTAsIDUwLCA1MCwgNDBdXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFBvaW50QnV5JywgdGhpcy5vYmplY3QuZW5mb3JjZVBvaW50QnV5KVxuICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWlja0ZpcmUnLCB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMpXG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZCA9ICh0eXBlb2YgZm9ybURhdGFbJ3Jlcm9sbHMtZW5hYmxlZCddID09PSAnc3RyaW5nJylcbiAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFJlcm9sbHMnLCB0aGlzLm9iamVjdC5yZXJvbGxzRW5hYmxlZClcbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG51bSA9IE51bWJlcihmb3JtRGF0YVsncXVpY2stZmlyZS12YWx1ZXMtJyArIGldKVxuICAgICAgICBpZiAobnVtID4gMCkge1xuICAgICAgICAgIHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlc1tpXSA9IG51bVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMuc29ydCgpLnJldmVyc2UoKVxuICAgICAgdGhpcy5vYmplY3QucGxhY2VhYmxlID0gZHVwbGljYXRlKHRoaXMub2JqZWN0LnF1aWNrRmlyZVZhbHVlcylcbiAgICAgIGlmICh0eXBlb2YgZm9ybURhdGFbJ2RlZmF1bHQtZW5hYmxlZCddID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5LnRvU3RyaW5nKCkgPT09ICcwJykge1xuICAgICAgICAgIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSA9IDFcbiAgICAgICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScsIHRoaXMub2JqZWN0LmRlZmF1bHRRdWFudGl0eSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkgPSBmb3JtRGF0YVsnZGVmYXVsdC1xdWFudGl0eSddXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVhbnRpdHknLCB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkpXG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5LnRvU3RyaW5nKCkgIT09ICcwJykge1xuICAgICAgICB0aGlzLm9iamVjdC5kZWZhdWx0UXVhbnRpdHkgPSAwXG4gICAgICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JywgdGhpcy5vYmplY3QuZGVmYXVsdFF1YW50aXR5KVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2Mtc2V0dXAnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5zZXR1cCAhPT0gZm9ybURhdGFbJ2NvYy1zZXR1cCddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LnNldHVwID0gZm9ybURhdGFbJ2NvYy1zZXR1cCddXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0U2tpbGxMaXN0cygpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLm9iamVjdC5hcmNoZXR5cGUgIT09IGZvcm1EYXRhWydjb2MtYXJjaGV0eXBlJ10pIHtcbiAgICAgICAgdGhpcy5vYmplY3QuYXJjaGV0eXBlID0gZm9ybURhdGFbJ2NvYy1hcmNoZXR5cGUnXVxuICAgICAgICB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgPSAnJ1xuICAgICAgICB0aGlzLmNsZWFyU2V0dXBQb2ludHMoKVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0Lm9jY3VwYXRpb24gIT09IGZvcm1EYXRhWydjb2Mtb2NjdXBhdGlvbiddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0Lm9jY3VwYXRpb24gPSBmb3JtRGF0YVsnY29jLW9jY3VwYXRpb24nXVxuICAgICAgICBhd2FpdCB0aGlzLnNldFNraWxsTGlzdHMoKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLm9iamVjdC5zZXR1cFBvaW50cykge1xuICAgICAgICBpZiAodHlwZW9mIGZvcm1EYXRhW2tleV0gIT09ICd1bmRlZmluZWQnICYmIHRoaXMub2JqZWN0LnNldHVwUG9pbnRzW2tleV0gIT09IGZvcm1EYXRhW2tleV0pIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5zZXR1cFBvaW50c1trZXldID0gZm9ybURhdGFba2V5XVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLm9iamVjdC5jb3JlQ2hhcmFjdGVyaXN0aWMgIT09IGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddKSB7XG4gICAgICAgIHRoaXMub2JqZWN0LmNvcmVDaGFyYWN0ZXJpc3RpYyA9IGZvcm1EYXRhWydjb2MtY29yZS1jaGFyYWN0ZXJpc3RpYyddXG4gICAgICAgIHRoaXMuY2xlYXJTZXR1cFBvaW50cygpXG4gICAgICAgIHRoaXMub2JqZWN0LnBsYWNlYWJsZSA9IGR1cGxpY2F0ZSh0aGlzLm9iamVjdC5xdWlja0ZpcmVWYWx1ZXMpXG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGZsYXRLZXlzID0gWyduYW1lJywgJ2FnZScsICdyZXNpZGVuY2UnLCAnYmlydGhwbGFjZScsICdsYW5ndWFnZScsICdhdmF0YXInLCAndG9rZW4nXVxuICAgIGZvciAoY29uc3Qga2V5IG9mIGZsYXRLZXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGZvcm1EYXRhW2tleV0gIT09ICd1bmRlZmluZWQnICYmIHRoaXMub2JqZWN0W2tleV0gIT09IGZvcm1EYXRhW2tleV0pIHtcbiAgICAgICAgdGhpcy5vYmplY3Rba2V5XSA9IGZvcm1EYXRhW2tleV1cbiAgICAgICAgaWYgKGtleSA9PT0gJ2FnZScpIHtcbiAgICAgICAgICB0aGlzLmdldEFnZUFkanVzdG1lbnRzKClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZXZlbnQuc3VibWl0dGVyPy5kYXRhc2V0LmJ1dHRvbiA9PT0gJ2JhY2snKSB7XG4gICAgICBjb25zdCBwYWdlTnVtYmVyID0gdGhpcy5nZXRQYWdlTnVtYmVyKC0xKVxuICAgICAgaWYgKHR5cGVvZiBwYWdlTnVtYmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICB0aGlzLm9iamVjdC5zdGVwID0gcGFnZU51bWJlclxuICAgICAgICAvLyBXaGVuIG1vdmluZyBzdGVwIHJlc2V0IHNjcm9sbCBoZWlnaHRcbiAgICAgICAgY29uc3Qgb2JqID0gdGhpcy5lbGVtZW50LmZpbmQoJy5zY3JvbGxzZWN0aW9uJylcbiAgICAgICAgaWYgKG9iai5sZW5ndGggJiYgb2JqWzBdLnNjcm9sbFRvcCkge1xuICAgICAgICAgIG9ialswXS5zY3JvbGxUb3AgPSAwXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGV2ZW50LnN1Ym1pdHRlcj8uZGF0YXNldC5idXR0b24gPT09ICduZXh0Jykge1xuICAgICAgaWYgKHRoaXMub2JqZWN0LnN0ZXAgPT09IHRoaXMucGFnZUxpc3QuUEFHRV9DUkVBVEUgfHwgKHRoaXMub2JqZWN0LnN0ZXAgPT09IHRoaXMucGFnZUxpc3QuUEFHRV9CQUNLU1RPUlkgJiYgZ2FtZS51c2VyLnJvbGUgPj0gQ09OU1QuVVNFUl9QRVJNSVNTSU9OUy5BQ1RPUl9DUkVBVEUuZGVmYXVsdFJvbGUpKSB7XG4gICAgICAgIHRoaXMuYXR0ZW1wdFRvQ3JlYXRlKClcbiAgICAgICAgcmV0dXJuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBwYWdlTnVtYmVyID0gdGhpcy5nZXRQYWdlTnVtYmVyKDEpXG4gICAgICAgIGlmICh0eXBlb2YgcGFnZU51bWJlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5zdGVwID0gcGFnZU51bWJlclxuICAgICAgICAgIC8vIFdoZW4gbW92aW5nIHN0ZXAgcmVzZXQgc2Nyb2xsIGhlaWdodFxuICAgICAgICAgIGNvbnN0IG9iaiA9IHRoaXMuZWxlbWVudC5maW5kKCcuc2Nyb2xsc2VjdGlvbicpXG4gICAgICAgICAgaWYgKG9iai5sZW5ndGggJiYgb2JqWzBdLnNjcm9sbFRvcCkge1xuICAgICAgICAgICAgb2JqWzBdLnNjcm9sbFRvcCA9IDBcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgfVxuXG4gIGFzeW5jIGF0dGVtcHRUb0NyZWF0ZSAoKSB7XG4gICAgY29uc3QgYWN0b3JEYXRhID0gYXdhaXQgdGhpcy5ub3JtYWxpemVDaGFyYWN0ZXJEYXRhKHRoaXMub2JqZWN0KVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSB8fCBnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZSkge1xuICAgICAgY29uc3QgYWN0b3IgPSBhd2FpdCBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZUNoYXJhY3RlcihhY3RvckRhdGEpXG4gICAgICBhY3Rvci5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBrZWVwZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodSA9PiB1LmFjdGl2ZSAmJiB1LmlzR00pXG4gICAgICBpZiAoa2VlcGVycy5sZW5ndGgpIHtcbiAgICAgICAgYWN0b3JEYXRhLm93bmVyc2hpcFtnYW1lLnVzZXIuaWRdID0gQ09OU1QuRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUy5PV05FUlxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXItd2l6YXJkJyxcbiAgICAgICAgICBsaXN0ZW5lcjoga2VlcGVyc1swXS5pZCxcbiAgICAgICAgICBwYXlsb2FkOiBhY3RvckRhdGFcbiAgICAgICAgfVxuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW52ZXN0aWdhdG9yV2l6YXJkLkNyZWF0aW5nSW52ZXN0aWdhdG9yJylcbiAgICAgICAgKVxuICAgICAgICB0aGlzLmNsb3NlKClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTWlzc2luZ0tlZXBlclVzZXInKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgbm9ybWFsaXplQ2hhcmFjdGVyRGF0YSAoZGF0YSkge1xuICAgIGNvbnN0IHdlYXBvblNraWxscyA9IHtcbiAgICAgIG1lbGVlOiB7fSxcbiAgICAgIHJuZ2Q6IHt9XG4gICAgfVxuICAgIGNvbnN0IGl0ZW1zID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBkYXRhLnNraWxsSXRlbXMpIHtcbiAgICAgIGNvbnN0IHNraWxsID0gZGF0YS5za2lsbEl0ZW1zW2tleV1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMCwgaW0gPSBza2lsbC5yb3dzLmxlbmd0aDsgaW5kZXggPCBpbTsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCByb3cgPSBza2lsbC5yb3dzW2luZGV4XVxuICAgICAgICBpZiAoIXNraWxsLmZsYWdzLmlzTXVsdGlwbGUgfHwgcm93LnNlbGVjdGVkICE9PSBmYWxzZSkge1xuICAgICAgICAgIGxldCBpdGVtID0gZHVwbGljYXRlKHNraWxsLml0ZW0pXG4gICAgICAgICAgaWYgKHJvdy5zZWxlY3RlZCAhPT0gZmFsc2UgJiYgdHlwZW9mIHJvdy5zZWxlY3RlZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIGl0ZW0gPSBkdXBsaWNhdGUocm93LnNlbGVjdGVkKVxuICAgICAgICAgICAgcm93LnNlbGVjdGVkID0gZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHJvdy5vY2N1cGF0aW9uVG9nZ2xlKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5mbGFncy5vY2N1cGF0aW9uID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAocm93LmFyY2hldHlwZVRvZ2dsZSkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uZmxhZ3MuYXJjaGV0eXBlID0gdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBsZXQgYmFzZSA9IGl0ZW0uc3lzdGVtLmJhc2VcbiAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEuc2V0dXBQb2ludHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVnRXggPSBuZXcgUmVnRXhwKCdAJyArIGtleSwgJ2knKVxuICAgICAgICAgICAgICBiYXNlID0gYmFzZS5yZXBsYWNlKHJlZ0V4LCBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIU51bWJlci5pc051bWVyaWMoYmFzZSkpIHtcbiAgICAgICAgICAgIGJhc2UgPSBNYXRoLmZsb29yKG5ldyBSb2xsKGJhc2UpLmV2YWx1YXRlKHsgYXN5bmM6IGZhbHNlIH0pLnRvdGFsKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpdGVtLnN5c3RlbS5iYXNlID0gYmFzZVxuICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzID0gaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMgPz8ge31cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5wZXJzb25hbFBvaW50cykgPiAwKSB7XG4gICAgICAgICAgICBpdGVtLnN5c3RlbS5hZGp1c3RtZW50cy5wZXJzb25hbCA9IHBhcnNlSW50KHJvdy5wZXJzb25hbFBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChOdW1iZXIocm93Lm9jY3VwYXRpb25Qb2ludHMpID4gMCkge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uYWRqdXN0bWVudHMub2NjdXBhdGlvbiA9IHBhcnNlSW50KHJvdy5vY2N1cGF0aW9uUG9pbnRzLCAxMClcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKE51bWJlcihyb3cuYXJjaGV0eXBlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmFyY2hldHlwZSA9IHBhcnNlSW50KHJvdy5hcmNoZXR5cGVQb2ludHMsIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoTnVtYmVyKHJvdy5leHBlcmllbmNlUG9pbnRzKSA+IDApIHtcbiAgICAgICAgICAgIGl0ZW0uc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UgPSBwYXJzZUludChyb3cuZXhwZXJpZW5jZVBvaW50cywgMTApXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChrZXkgPT09IHRoaXMuY29jaWRMYW5ndWFnZU93bikge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID0gZGF0YS5sYW5ndWFnZVxuICAgICAgICAgICAgaXRlbS5uYW1lID0gaXRlbS5zeXN0ZW0uc3BlY2lhbGl6YXRpb24gKyAnICgnICsgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lICsgJyknXG4gICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygcm93LnNlbGVjdGVkID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGxOYW1lID0gcm93LnNlbGVjdGVkXG4gICAgICAgICAgICBpdGVtLl9pZCA9IHJhbmRvbUlEKClcbiAgICAgICAgICAgIGl0ZW0ubmFtZSA9IGl0ZW0uc3lzdGVtLnNwZWNpYWxpemF0aW9uICsgJyAoJyArIGl0ZW0uc3lzdGVtLnNraWxsTmFtZSArICcpJ1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBpdGVtLmZsYWdzLkNvQzc/LmNvY2lkRmxhZz8uaWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgIGl0ZW0uZmxhZ3MuQ29DNy5jb2NpZEZsYWcuaWQgPSBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZ3Vlc3NJZChpdGVtKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uZmlnaHRpbmcpIHtcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLm5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbE5hbWVdID0gaXRlbS5faWRcbiAgICAgICAgICB9IGVsc2UgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXM/LmZpcmVhcm0pIHtcbiAgICAgICAgICAgIHdlYXBvblNraWxscy5ybmdkW2l0ZW0ubmFtZV0gPSBpdGVtLl9pZFxuICAgICAgICAgICAgd2VhcG9uU2tpbGxzLnJuZ2RbaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXSA9IGl0ZW0uX2lkXG4gICAgICAgICAgfVxuICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKGNvbnN0IHNvdXJjZUl0ZW0gb2YgZGF0YS5pbnZlc3RpZ2F0b3JJdGVtcykge1xuICAgICAgY29uc3QgaXRlbSA9IGR1cGxpY2F0ZShzb3VyY2VJdGVtKVxuICAgICAgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMubWVsZWUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5uYW1lXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpdGVtLnN5c3RlbS5za2lsbC5tYWluLmlkID0gd2VhcG9uU2tpbGxzLm1lbGVlW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5tZWxlZVtpdGVtLnN5c3RlbS5za2lsbC5hbHRlcm5hdGl2Lm5hbWVdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGl0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYuaWQgPSB3ZWFwb25Ta2lsbHMubWVsZWVbaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5uYW1lXVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKGl0ZW0uc3lzdGVtLnByb3BlcnRpZXMucm5nZCkge1xuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwubWFpbi5pZCA9IHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLm1haW4ubmFtZV1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaXRlbS5zeXN0ZW0uc2tpbGwuYWx0ZXJuYXRpdi5pZCA9IHdlYXBvblNraWxscy5ybmdkW2l0ZW0uc3lzdGVtLnNraWxsLmFsdGVybmF0aXYubmFtZV1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaXRlbXMucHVzaChpdGVtKVxuICAgIH1cbiAgICBsZXQgbW9uZXRhcnkgPSB7fVxuICAgIGNvbnN0IHNldHVwID0gYXdhaXQgdGhpcy5nZXRDYWNoZUl0ZW1CeUNvQ0lEKHRoaXMub2JqZWN0LnNldHVwKVxuICAgIGlmIChzZXR1cCkge1xuICAgICAgbW9uZXRhcnkgPSBkdXBsaWNhdGUoc2V0dXAuc3lzdGVtLm1vbmV0YXJ5KVxuICAgIH1cbiAgICBjb25zdCBkZXZlbG9wbWVudCA9IHtcbiAgICAgIHBlcnNvbmFsOiAyICogKHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmludCwgMTApKSxcbiAgICAgIG9jY3VwYXRpb246IDAsXG4gICAgICBhcmNoZXR5cGU6IDBcbiAgICB9XG4gICAgaWYgKGRhdGEuYXJjaGV0eXBlICE9PSAnJykge1xuICAgICAgY29uc3QgYXJjaGV0eXBlID0gYXdhaXQgZ2FtZS5zeXN0ZW0uYXBpLmNvY2lkLmZyb21Db0NJRChkYXRhLmFyY2hldHlwZSlcbiAgICAgIGlmIChhcmNoZXR5cGUubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIGl0ZW1zLnB1c2goYXJjaGV0eXBlWzBdLnRvT2JqZWN0KCkpXG4gICAgICAgIGRldmVsb3BtZW50LmFyY2hldHlwZSA9IGFyY2hldHlwZVswXS5zeXN0ZW0uYm9udXNQb2ludHNcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRhdGEub2NjdXBhdGlvbiAhPT0gJycpIHtcbiAgICAgIGNvbnN0IG9jY3VwYXRpb24gPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZnJvbUNvQ0lEKGRhdGEub2NjdXBhdGlvbilcbiAgICAgIGlmIChvY2N1cGF0aW9uLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBpdGVtcy5wdXNoKG9jY3VwYXRpb25bMF0udG9PYmplY3QoKSlcbiAgICAgICAgY29uc3Qgb3B0aW9ucyA9IFtdXG4gICAgICAgIGZvciAoY29uc3QgW2tleSwgY2FyYWNdIG9mIE9iamVjdC5lbnRyaWVzKG9jY3VwYXRpb25bMF0uc3lzdGVtLm9jY3VwYXRpb25Ta2lsbFBvaW50cykpIHtcbiAgICAgICAgICBpZiAoY2FyYWMuc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIGlmIChjYXJhYy5vcHRpb25hbCkge1xuICAgICAgICAgICAgICBvcHRpb25zLnB1c2goY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKSlcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRldmVsb3BtZW50Lm9jY3VwYXRpb24gKz0gY2FyYWMubXVsdGlwbGllciAqIChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzW2tleV0sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnNba2V5XSwgMTApKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgZGV2ZWxvcG1lbnQub2NjdXBhdGlvbiArPSBNYXRoLm1heCguLi5vcHRpb25zKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGJpb2dyYXBoeSA9IFtdXG4gICAgZm9yIChsZXQgaW5kZXggPSAwLCBpbSA9IGRhdGEuYmlvU2VjdGlvbnMubGVuZ3RoOyBpbmRleCA8IGltOyBpbmRleCsrKSB7XG4gICAgICBiaW9ncmFwaHkucHVzaCh7XG4gICAgICAgIHRpdGxlOiBkYXRhLmJpb1NlY3Rpb25zW2luZGV4XS5uYW1lLFxuICAgICAgICB2YWx1ZTogZGF0YS5iaW9TZWN0aW9uc1tpbmRleF0udmFsdWVcbiAgICAgIH0pXG4gICAgfVxuICAgIGNvbnN0IGFjdG9yRGF0YSA9IHtcbiAgICAgIHR5cGU6ICdjaGFyYWN0ZXInLFxuICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgaW1nOiBkYXRhLmF2YXRhcixcbiAgICAgIHN5c3RlbToge1xuICAgICAgICBjaGFyYWN0ZXJpc3RpY3M6IHtcbiAgICAgICAgICBzdHI6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnN0ciwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5zdHIsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgY29uOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5jb24sIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuY29uLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpejoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuc2l6LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLnNpeiwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZXg6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmRleCwgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5kZXgsIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYXBwOiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5hcHAsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuYXBwLCAxMClcbiAgICAgICAgICB9LFxuICAgICAgICAgIGludDoge1xuICAgICAgICAgICAgdmFsdWU6IHBhcnNlSW50KGRhdGEuc2V0dXBQb2ludHMuaW50LCAxMCkgKyBwYXJzZUludChkYXRhLnNldHVwTW9kaWZpZXJzLmludCwgMTApXG4gICAgICAgICAgfSxcbiAgICAgICAgICBwb3c6IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnBvdywgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5wb3csIDEwKVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZWR1OiB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyc2VJbnQoZGF0YS5zZXR1cFBvaW50cy5lZHUsIDEwKSArIHBhcnNlSW50KGRhdGEuc2V0dXBNb2RpZmllcnMuZWR1LCAxMClcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGF0dHJpYnM6IHtcbiAgICAgICAgICBsY2s6IHtcbiAgICAgICAgICAgIHZhbHVlOiBNYXRoLm1heChwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLmx1Y2ssIDEwKSwgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5sdWNrLCAxMCkpXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzYW46IHtcbiAgICAgICAgICAgIHZhbHVlOiBwYXJzZUludChkYXRhLnNldHVwUG9pbnRzLnBvdywgMTApICsgcGFyc2VJbnQoZGF0YS5zZXR1cE1vZGlmaWVycy5wb3csIDEwKVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW5mb3M6IHtcbiAgICAgICAgICBhZ2U6IGRhdGEuYWdlLFxuICAgICAgICAgIHJlc2lkZW5jZTogZGF0YS5yZXNpZGVuY2UsXG4gICAgICAgICAgYmlydGhwbGFjZTogZGF0YS5iaXJ0aHBsYWNlXG4gICAgICAgIH0sXG4gICAgICAgIGRldmVsb3BtZW50LFxuICAgICAgICBiaW9ncmFwaHksXG4gICAgICAgIG1vbmV0YXJ5XG4gICAgICB9LFxuICAgICAgcHJvdG90eXBlVG9rZW46IHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBhY3Rvckxpbms6IHRydWUsXG4gICAgICAgIHRleHR1cmU6IHtcbiAgICAgICAgICBzcmM6IGRhdGEudG9rZW5cbiAgICAgICAgfSxcbiAgICAgICAgZGlzcG9zaXRpb246IENPTlNULlRPS0VOX0RJU1BPU0lUSU9OUy5GUklFTkRMWSxcbiAgICAgICAgc2lnaHQ6IHtcbiAgICAgICAgICBlbmFibGVkOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBpdGVtcyxcbiAgICAgIG93bmVyc2hpcDoge1xuICAgICAgICBkZWZhdWx0OiBwYXJzZUludChkYXRhLmRlZmF1bHRPd25lcnNoaXAsIDEwKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYWN0b3JEYXRhXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQ2hhcmFjdGVyRnJvbURhdGEgKGFjdG9yRGF0YSkge1xuICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgQ29DN0ludmVzdGlnYXRvcldpemFyZC5jcmVhdGVDaGFyYWN0ZXIoYWN0b3JEYXRhKVxuICAgIGNvbnN0IGZ1bmN0aW9uSWQgPSBIb29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+IHtcbiAgICAgIGlmIChhcHAub2JqZWN0LmlkID09PSBhY3Rvci5pZCkge1xuICAgICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIHtcbiAgICAgICAgICB0eXBlOiAnb3Blbi1jaGFyYWN0ZXInLFxuICAgICAgICAgIGxpc3RlbmVyOiBPYmplY3Qua2V5cyhhY3RvckRhdGEub3duZXJzaGlwKS5maW5kKGsgPT4gayAhPT0gJ2RlZmF1bHQnKSxcbiAgICAgICAgICBwYXlsb2FkOiBhY3Rvci5pZFxuICAgICAgICB9KVxuICAgICAgICBIb29rcy5vZmYoJ3JlbmRlckFjdG9yU2hlZXQnLCBmdW5jdGlvbklkKVxuICAgICAgfVxuICAgIH0pXG4gICAgYWN0b3Iuc2hlZXQucmVuZGVyKHRydWUpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgY3JlYXRlQ2hhcmFjdGVyIChhY3RvckRhdGEpIHtcbiAgICBjb25zdCBhY3RvciA9IGF3YWl0IEFjdG9yLmNyZWF0ZShhY3RvckRhdGEpXG4gICAgYXdhaXQgYWN0b3IudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uYXR0cmlicy5ocC52YWx1ZSc6IGFjdG9yLnJhd0hwTWF4LFxuICAgICAgJ3N5c3RlbS5hdHRyaWJzLm1wLnZhbHVlJzogYWN0b3IucmF3TXBNYXgsXG4gICAgICAnc3lzdGVtLmF0dHJpYnMuc2FuLm1heCc6IGFjdG9yLnJhd01wTWF4XG4gICAgfSlcbiAgICBhd2FpdCBhY3Rvci5yZXNldERhaWx5U2FuaXR5KClcbiAgICByZXR1cm4gYWN0b3JcbiAgfVxuXG4gIC8qKlxuICAgKiBjcmVhdGUgaXQncyB0aGUgZGVmYXVsdCB3YXkgdG8gY3JlYXRlIHRoZSBDb0M3Q2hhcmFjdGVyV2l6YXJkXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgY3JlYXRlIChvcHRpb25zID0ge30pIHtcbiAgICAvLyBUcnkgYW5kIHByZXJlcXVzdCBhcyBtYW55IENvQ0lEcyBkdWUgdG8gdGhlIHdheSB0aGV5IGhhdmUgdG8gYmUgbG9hZGVkXG4gICAgb3B0aW9ucyA9IG1lcmdlT2JqZWN0KHtcbiAgICAgIHN0ZXA6IDAsXG4gICAgICBkZWZhdWx0U2V0dXA6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFNldHVwJyksXG4gICAgICBkZWZhdWx0UXVhbnRpdHk6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JyksXG4gICAgICBkZWZhdWx0T3duZXJzaGlwOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRPd25lcnNoaXAnKSxcbiAgICAgIGRlZmF1bHRFcmE6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJyksXG4gICAgICByZXJvbGxzRW5hYmxlZDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUmVyb2xscycpLFxuICAgICAgZW5mb3JjZVBvaW50QnV5OiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRQb2ludEJ1eScpLFxuICAgICAgcXVpY2tGaXJlVmFsdWVzOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWlja0ZpcmUnKSxcbiAgICAgIHBsYWNlYWJsZTogZHVwbGljYXRlKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1aWNrRmlyZScpKSxcbiAgICAgIGNhY2hlQ29DSUQ6IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQubG9hZENhY2hlSXRlbUJ5Q29DSUQoKSxcbiAgICAgIGNhY2hlQmFja3N0b3JpZXM6IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5mcm9tQ29DSURSZWdleEJlc3QoeyBjb2NpZFJlZ0V4cDogL15ydFxcLlxcLmJhY2tzdG9yeS0vLCB0eXBlOiAncnQnIH0pLFxuICAgICAgY2FjaGVJdGVtczoge30sXG4gICAgICBzZXR1cDogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnKSxcbiAgICAgIHNraWxsSXRlbXM6IHt9LFxuICAgICAgb2NjdXBhdGlvbkdyb3Vwczoge30sXG4gICAgICBpbnZlc3RpZ2F0b3JJdGVtczogW10sXG4gICAgICBzZXR1cFBvaW50czoge1xuICAgICAgICBzdHI6ICcnLFxuICAgICAgICBjb246ICcnLFxuICAgICAgICBzaXo6ICcnLFxuICAgICAgICBkZXg6ICcnLFxuICAgICAgICBhcHA6ICcnLFxuICAgICAgICBpbnQ6ICcnLFxuICAgICAgICBwb3c6ICcnLFxuICAgICAgICBlZHU6ICcnLFxuICAgICAgICBsdWNrOiAnJ1xuICAgICAgfSxcbiAgICAgIHNldHVwTW9kaWZpZXJzOiB7XG4gICAgICAgIHN0cjogMCxcbiAgICAgICAgY29uOiAwLFxuICAgICAgICBzaXo6IDAsXG4gICAgICAgIGRleDogMCxcbiAgICAgICAgYXBwOiAwLFxuICAgICAgICBpbnQ6IDAsXG4gICAgICAgIHBvdzogMCxcbiAgICAgICAgZWR1OiAwLFxuICAgICAgICBsdWNrOiAwXG4gICAgICB9LFxuICAgICAgYXJjaGV0eXBlOiAnJyxcbiAgICAgIGNvcmVDaGFyYWN0ZXJpc3RpYzogJycsXG4gICAgICBvY2N1cGF0aW9uOiAnJyxcbiAgICAgIGJpb1NlY3Rpb25zOiBbXSxcbiAgICAgIHBlcnNvbmFsOiAwLFxuICAgICAgcGVyc29uYWxUZXh0OiAnJyxcbiAgICAgIGNyZWRpdFJhdGluZzoge1xuICAgICAgICBtaW46IDAsXG4gICAgICAgIG1heDogMFxuICAgICAgfSxcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgYWdlOiAnJyxcbiAgICAgIHJlcXVpcmVzQWdlQWRqdXN0bWVudHM6IGZhbHNlLFxuICAgICAgcmVzaWRlbmNlOiAnJyxcbiAgICAgIGJpcnRocGxhY2U6ICcnLFxuICAgICAgbGFuZ3VhZ2U6ICcnLFxuICAgICAgYXZhdGFyOiAnaWNvbnMvc3ZnL215c3RlcnktbWFuLnN2ZycsXG4gICAgICB0b2tlbjogJ2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi5zdmcnXG4gICAgfSwgb3B0aW9ucylcbiAgICBuZXcgQ29DN0ludmVzdGlnYXRvcldpemFyZChvcHRpb25zKS5yZW5kZXIodHJ1ZSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGNhbnZhcywgZm91bmRyeSwgZ2FtZSwgUGxhY2VhYmxlc0xheWVyICovXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4vY2hhdC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdDb250ZW50TGlua0RpYWxvZyB9IGZyb20gJy4vYXBwcy9jb2M3LWNvbnRlbnQtbGluay1kaWFsb2cuanMnXG5pbXBvcnQgeyBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIH0gZnJvbSAnLi9hcHBzL2ludmVzdGlnYXRvci13aXphcmQuanMnXG5cbmNsYXNzIENvQzdNZW51TGF5ZXIgZXh0ZW5kcyBQbGFjZWFibGVzTGF5ZXIge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgc3VwZXIoKVxuICAgIHRoaXMub2JqZWN0cyA9IHt9XG4gIH1cblxuICBzdGF0aWMgZ2V0IGxheWVyT3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3Qoc3VwZXIubGF5ZXJPcHRpb25zLCB7XG4gICAgICBuYW1lOiAnY29jN21lbnUnLFxuICAgICAgekluZGV4OiA2MFxuICAgIH0pXG4gIH1cblxuICBzdGF0aWMgZ2V0IGRvY3VtZW50TmFtZSAoKSB7XG4gICAgcmV0dXJuICdUb2tlbidcbiAgfVxuXG4gIGdldCBwbGFjZWFibGVzICgpIHtcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN01lbnUge1xuICBzdGF0aWMgZ2V0QnV0dG9ucyAoY29udHJvbHMpIHtcbiAgICBjYW52YXMuY29jN2dtdG9vbHMgPSBuZXcgQ29DN01lbnVMYXllcigpXG4gICAgY29uc3QgaXNLZWVwZXIgPSBnYW1lLnVzZXIuaXNHTVxuICAgIGNvbnN0IHNob3dIaWRkZW5EZXZNZW51ID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaGlkZGVuZGV2bWVudScpXG4gICAgY29udHJvbHMucHVzaCh7XG4gICAgICBuYW1lOiAnY29jN21lbnUnLFxuICAgICAgdGl0bGU6ICdDb0M3LkdtVG9vbHMnLFxuICAgICAgbGF5ZXI6ICdjb2M3Z210b29scycsXG4gICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi10ZW50YWNsZS1zdHJpa2UnLFxuICAgICAgdmlzaWJsZTogaXNLZWVwZXIsXG4gICAgICB0b29sczogW1xuICAgICAgICB7XG4gICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtYW5nbGUtZG91YmxlLXVwJyxcbiAgICAgICAgICBuYW1lOiAnZGV2cGhhc2UnLFxuICAgICAgICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJyksXG4gICAgICAgICAgdGl0bGU6ICdDb0M3LkRldlBoYXNlJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyB0b2dnbGUgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVEZXZQaGFzZSh0b2dnbGUpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS11c2VyLWVkaXQnLFxuICAgICAgICAgIG5hbWU6ICdjaGFyY3JlYXRlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2NoYXJDcmVhdGlvbkVuYWJsZWQnKSxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuQ2hhckNyZWF0aW9uTW9kZScsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgdG9nZ2xlID0+XG4gICAgICAgICAgICBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZUNoYXJDcmVhdGlvbih0b2dnbGUpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS11c2VyLXBsdXMnLFxuICAgICAgICAgIG5hbWU6ICdhY3Rvci1pbXBvcnQnLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5BY3RvckltcG9ydGVyJyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5jcmVhdGUoKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnV0dG9uOiB0cnVlLFxuICAgICAgICAgIGljb246ICdmYXMgZmEtdXNlci1jaGVjaycsXG4gICAgICAgICAgbmFtZTogJ2ludmVzdGlnYXRvci13aXphcmQnLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5JbnZlc3RpZ2F0b3JXaXphcmQuVGl0bGUnLFxuICAgICAgICAgIG9uQ2xpY2s6IGFzeW5jICgpID0+IGF3YWl0IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQuY3JlYXRlKClcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRvZ2dsZTogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZmFzIGZhLWNlcnRpZmljYXRlJyxcbiAgICAgICAgICBjbGFzczogJ3hwX3RvZ2dsZScsXG4gICAgICAgICAgbmFtZTogJ3hwdG9nZ2xlJyxcbiAgICAgICAgICBhY3RpdmU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3hwRW5hYmxlZCcpLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy50b2dnbGVYUCcsXG4gICAgICAgICAgb25DbGljazogYXN5bmMgdG9nZ2xlID0+IGF3YWl0IENvQzdVdGlsaXRpZXMudG9nZ2xlWFBHYWluKHRvZ2dsZSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJ1dHRvbjogdHJ1ZSxcbiAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1jYXJkLWpva2VyJyxcbiAgICAgICAgICBuYW1lOiAnZmFrZXJvbGwnLFxuICAgICAgICAgIHRpdGxlOiAnQ29DNy5GYWtlUm9sbCcsXG4gICAgICAgICAgb25DbGljazogQ29DN0NoYXQuZmFrZVJvbGxNZXNzYWdlXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBidXR0b246IHRydWUsXG4gICAgICAgICAgaWNvbjogJ2ZhcyBmYS1tb29uJyxcbiAgICAgICAgICBuYW1lOiAnc3RhcnRyZXN0JyxcbiAgICAgICAgICB0aXRsZTogJ0NvQzcuc3RhcnRSZXN0JyxcbiAgICAgICAgICBvbkNsaWNrOiBhc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldFRhcmdldCgpXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICAgIGlmIChzaG93SGlkZGVuRGV2TWVudSkge1xuICAgICAgY2FudmFzLmNvYzdEZXZUb29scyA9IG5ldyBDb0M3TWVudUxheWVyKClcbiAgICAgIGNvbnRyb2xzLnB1c2goe1xuICAgICAgICBuYW1lOiAnY29jN0Rldk1lbnUnLFxuICAgICAgICB0aXRsZTpcbiAgICAgICAgICBcIkRldiB0b29scy4gSWYgeW91IGRvbid0IGtub3cgd2hhdCBpdCBpcywgeW91IGRvbid0IG5lZWQgaXQgYW5kIHlvdSBzaG91bGRuJ3QgdXNlIGl0ICEhXCIsXG4gICAgICAgIGxheWVyOiAnY29jN0RldlRvb2xzJyxcbiAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tcG9saWNlLWJhZGdlJyxcbiAgICAgICAgdmlzaWJsZTogaXNLZWVwZXIsXG4gICAgICAgIHRvb2xzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgdG9nZ2xlOiB0cnVlLFxuICAgICAgICAgICAgaWNvbjogJ2dhbWUtaWNvbiBnYW1lLWljb24tZGljZS1maXJlJyxcbiAgICAgICAgICAgIG5hbWU6ICdhbHdheXNDcml0JyxcbiAgICAgICAgICAgIGFjdGl2ZTogZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQsXG4gICAgICAgICAgICB0aXRsZTogJ0FsbCByb2xscyB3aWxsIGNyaXQnLFxuICAgICAgICAgICAgb25DbGljazogdG9nZ2xlID0+IHtcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0Z1bWJsZSA9IGZhbHNlXG4gICAgICAgICAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNDcml0ID0gdG9nZ2xlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0b2dnbGU6IHRydWUsXG4gICAgICAgICAgICBpY29uOiAnZ2FtZS1pY29uIGdhbWUtaWNvbi1maXJlLWV4dGluZ3Vpc2hlcicsXG4gICAgICAgICAgICBuYW1lOiAnYWx3YXlzRnVtYmxlJyxcbiAgICAgICAgICAgIGFjdGl2ZTogZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0Z1bWJsZSxcbiAgICAgICAgICAgIHRpdGxlOiAnQWxsIHJvbGxzIHdpbGwgZnVtYmxlJyxcbiAgICAgICAgICAgIG9uQ2xpY2s6IHRvZ2dsZSA9PiB7XG4gICAgICAgICAgICAgIGdhbWUuQ29DNy5kZXYuZGljZS5hbHdheXNGdW1ibGUgPSB0b2dnbGVcbiAgICAgICAgICAgICAgZ2FtZS5Db0M3LmRldi5kaWNlLmFsd2F5c0NyaXQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBzdGF0aWMgcmVuZGVyQ29udHJvbHMgKGFwcCwgaHRtbCwgZGF0YSkge1xuICAgIGNvbnN0IGlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBjb25zdCBrZWVwZXJNZW51ID0gaHRtbC5maW5kKCcuZ2FtZS1pY29uLXRlbnRhY2xlLXN0cmlrZScpLnBhcmVudCgpXG4gICAga2VlcGVyTWVudS5hZGRDbGFzcygnY29jNy1tZW51JylcbiAgICBpZiAoaXNLZWVwZXIpIHtcbiAgICAgIGtlZXBlck1lbnUuYWZ0ZXIoXG4gICAgICAgICc8bGkgY2xhc3M9XCJzY2VuZS1jb250cm9sIGNvYzctbWVudSBjb2M3LWNyZWF0ZS1saW5rXCIgdGl0bGU9XCInICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ3JlYXRlTGluaycpICtcbiAgICAgICAgICAnXCI+PGkgY2xhc3M9XCJmYXMgZmEtbGlua1wiPjwvaT48L2xpPidcbiAgICAgIClcbiAgICB9XG4gICAga2VlcGVyTWVudS5hZnRlcihcbiAgICAgICc8bGkgY2xhc3M9XCJzY2VuZS1jb250cm9sIGNvYzctbWVudSBjb2M3LWRpY2Utcm9sbFwiIHRpdGxlPVwiJyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Sb2xsRGljZScpICtcbiAgICAgICAgJ1wiPjxpIGNsYXNzPVwiZ2FtZS1pY29uIGdhbWUtaWNvbi1kMTBcIj48L2k+PC9saT4nXG4gICAgKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuY29jNy1tZW51LmNvYzctZGljZS1yb2xsJylcbiAgICAgIC5jbGljayhldmVudCA9PiBDb0M3VXRpbGl0aWVzLnJvbGxEaWNlKGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLmNvYzctbWVudS5jb2M3LWNyZWF0ZS1saW5rJylcbiAgICAgIC5jbGljayhldmVudCA9PiBDb0M3Q29udGVudExpbmtEaWFsb2cuY3JlYXRlKGV2ZW50KSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgQ29DN0xpbmsgfSBmcm9tICcuL2NvYzctbGluay5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdDYW52YXMge1xuICBzdGF0aWMgZ2V0IENPQzdfVFlQRVNfU1VQUE9SVEVEICgpIHtcbiAgICByZXR1cm4gWydDb0M3TGluaycsICdsb2NhdG9yJywgJ2dldFRva2VuJ11cbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBvbkRyb3BTb21ldGhpbmcgKGNhbnZhcywgZGF0YSkge1xuICAgIGlmIChcbiAgICAgIGRhdGEudHlwZSAmJlxuICAgICAgQ29DN0NhbnZhcy5DT0M3X1RZUEVTX1NVUFBPUlRFRC5pbmNsdWRlcyhkYXRhLnR5cGUpXG4gICAgKSB7XG4gICAgICBjb25zdCBncmlkU2l6ZSA9IGNhbnZhcy5zY2VuZS5ncmlkLnNpemVcbiAgICAgIGNvbnN0IHggPSBkYXRhLnggLSBncmlkU2l6ZSAvIDJcbiAgICAgIGNvbnN0IHkgPSBkYXRhLnkgLSBncmlkU2l6ZSAvIDJcbiAgICAgIGNvbnN0IGhlaWdodCA9IGdyaWRTaXplXG4gICAgICBjb25zdCB3aWR0aCA9IGdyaWRTaXplXG4gICAgICBsZXQgZHJvcFRhcmdldFRva2VucyA9IGNhbnZhcy50b2tlbnMucGxhY2VhYmxlcy5maWx0ZXIob2JqID0+IHtcbiAgICAgICAgY29uc3QgYyA9IG9iai5jZW50ZXJcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBOdW1iZXIuYmV0d2VlbihjLngsIHgsIHggKyB3aWR0aCkgJiZcbiAgICAgICAgICBOdW1iZXIuYmV0d2VlbihjLnksIHksIHkgKyBoZWlnaHQpXG4gICAgICAgIClcbiAgICAgIH0pIC8vIEZpbmQgZHJvcCB0YXJnZXQuXG4gICAgICBpZiAoIWRyb3BUYXJnZXRUb2tlbnMubGVuZ3RoKSBkcm9wVGFyZ2V0VG9rZW5zID0gY2FudmFzLnRva2Vucy5jb250cm9sbGVkIC8vIElmIG5vIHRhcmdldCB3aGlzcGVyIHRvIHNlbGVjdGVkIHRva2VuXG4gICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICBjYXNlICdDb0M3TGluayc6XG4gICAgICAgICAgaWYgKGRhdGEuY2hlY2sgPT09IENvQzdMaW5rLkNIRUNLX1RZUEUuRUZGRUNUKSB7XG4gICAgICAgICAgICBpZiAoZHJvcFRhcmdldFRva2Vucy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgZm9yIChjb25zdCB0b2tlbiBvZiBkcm9wVGFyZ2V0VG9rZW5zKSB7XG4gICAgICAgICAgICAgICAgQ29DN0xpbmsuX29uTGlua0FjdG9yQ2xpY2sodG9rZW4uYWN0b3IsIGRhdGEpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIEFwcGx5IHRvIGV2ZXJ5b25lID8gb3Igb25seSBwbGF5ZXJzID8gb3Igbm9ib2R5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChkcm9wVGFyZ2V0VG9rZW5zLmxlbmd0aCkge1xuICAgICAgICAgICAgQ29DN0xpbmsudG9XaGlzcGVyTWVzc2FnZShkYXRhLCBkcm9wVGFyZ2V0VG9rZW5zLmZpbHRlcih0ID0+IHQuYWN0b3Iub3duZXJzLmxlbmd0aCkubWFwKHQgPT4gdC5hY3RvcikpXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIENvQzdMaW5rLnRvV2hpc3Blck1lc3NhZ2UoZGF0YSwgZ2FtZS51c2Vycy5wbGF5ZXJzLmZpbHRlcih1ID0+ICEhdS5jaGFyYWN0ZXIpLm1hcCh1ID0+IHUuY2hhcmFjdGVyKSlcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnZ2V0VG9rZW4nOlxuICAgICAgICAgIGlmICh0eXBlb2YgZGF0YS5hcHBJZCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRhdGEuY2FsbEJhY2sgPT09ICdzdHJpbmcnICYmIHR5cGVvZiB1aS53aW5kb3dzW2RhdGEuYXBwSWRdICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgdWkud2luZG93c1tkYXRhLmFwcElkXVtkYXRhLmNhbGxCYWNrXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdWkud2luZG93c1tkYXRhLmFwcElkXVtkYXRhLmNhbGxCYWNrXShkcm9wVGFyZ2V0VG9rZW5zKVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuXG4gICAgICAgIC8vIEhhbmRsZXMgZ2VuZXJpYyBjYW52YSBkcm9wLlxuICAgICAgICAvLyBkYXRhVHJhbnNmZXIgbXVzdCBpbmNsdWRlIDpcbiAgICAgICAgLy8gLSBkb2NVdWlkIDogdGhlIFV1aWQgb2YgdGhlIGRvY3VtZW50IHRvIGNhbGxcbiAgICAgICAgLy8gLSBjYWxsQmFjayA6IHRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvbiB0byBjYWxsIGluIHRoZSBkb2N1bWVudC5cbiAgICAgICAgLy8gVXNlZCB0byBzZWxlY3QgbG9jYXRpb24gZm9yIGNoYXNlXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgaWYgKGRhdGEuZG9jVXVpZCAmJiBkYXRhLmNhbGxCYWNrKSB7XG4gICAgICAgICAgICBjb25zdCBkb2MgPSBDb0M3VXRpbGl0aWVzLlNmcm9tVXVpZChkYXRhLmRvY1V1aWQpXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIGRvY1tkYXRhLmNhbGxCYWNrXSAmJlxuICAgICAgICAgICAgICB0eXBlb2YgZG9jW2RhdGEuY2FsbEJhY2tdID09PSAnZnVuY3Rpb24nXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBkYXRhLnNjZW5lID0gY2FudmFzLnNjZW5lLnV1aWRcbiAgICAgICAgICAgICAgICBkb2NbZGF0YS5jYWxsQmFja10oZGF0YSlcbiAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZXJyb3IubWVzc2FnZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiLyogZ2xvYmFsIENPTkZJRywgRGlhbG9nLCBnYW1lLCBTZXR0aW5ncyAqL1xuZXhwb3J0IGNsYXNzIENvQzdTZXR0aW5nc0RpcmVjdG9yeSBleHRlbmRzIFNldHRpbmdzIHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnI3NldHRpbmdzLWdhbWUnKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YnV0dG9uIGNsYXNzPVwidHJpZ2dlci1kYXRhLW1pZ3JhdGlvblwiPjxpIGNsYXNzPVwiZmFzIGZhLXdyZW5jaFwiPjwvaT4gJyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyQnV0dG9uJykgK1xuICAgICAgICAgICAgJzwvYnV0dG9uPidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCcjc2V0dGluZ3MtZG9jdW1lbnRhdGlvbicpXG4gICAgICAgIC5hcHBlbmQoJzxidXR0b24gY2xhc3M9XCJ0cmlnZ2VyLXN5c3RlbS1tYW51YWxcIj48aSBjbGFzcz1cImZhcyBmYS1ib29rc1wiPjwvaT4gJyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TeXN0ZW0uRG9jdW1lbnRhdGlvbicpICtcbiAgICAgICAgJzwvYnV0dG9uPicpXG4gICAgICBodG1sLmZpbmQoJy50cmlnZ2VyLWRhdGEtbWlncmF0aW9uJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBuZXcgRGlhbG9nKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5UcmlnZ2VyVGl0bGUnKSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRyaWdnZXJDb250ZW50cycpLFxuICAgICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgICBtaWdyYXRlOiB7XG4gICAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLWNoZWNrXCI+PC9pPicsXG4gICAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NaWdyYXRlLlRyaWdnZXJSZXN0YXJ0JyksXG4gICAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3N5c3RlbVVwZGF0ZVZlcnNpb24nLCAwKVxuICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjbG9zZToge1xuICAgICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1iYW5cIj48L2k+JyxcbiAgICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDYW5jZWwnKSxcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge31cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdjbG9zZSdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHt9XG4gICAgICAgICkucmVuZGVyKHRydWUpXG4gICAgICB9KVxuICAgICAgaHRtbC5maW5kKCcudHJpZ2dlci1zeXN0ZW0tbWFudWFsJykuY2xpY2soYXN5bmMgKCkgPT4ge1xuICAgICAgICAoYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc3lzdGVtLWRvYycpLmdldERvY3VtZW50KENPTkZJRy5Db0M3Lk1hbnVhbCkpPy5zaGVldC5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ29tcGVuZGl1bURpcmVjdG9yeSwgRGlhbG9nLCBnYW1lICovXG5leHBvcnQgY2xhc3MgQ29DN0NvbXBlbmRpdW1EaXJlY3RvcnkgZXh0ZW5kcyBDb21wZW5kaXVtRGlyZWN0b3J5IHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGxldCB0cmFuc2xhdGVkID0gZmFsc2VcbiAgICBpZiAoZ2FtZS5pMThuLmxhbmcgPT09ICdlbicpIHtcbiAgICAgIHRyYW5zbGF0ZWQgPSB0cnVlXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgZ2FtZS5iYWJlbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBmb3IgKGNvbnN0IHYgb2YgT2JqZWN0LnZhbHVlcyhnYW1lLmJhYmVsZS5tb2R1bGVzKSkge1xuICAgICAgICBpZiAodi5sYW5nID09PSBnYW1lLmkxOG4ubGFuZykge1xuICAgICAgICAgIHRyYW5zbGF0ZWQgPSB0cnVlXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCF0cmFuc2xhdGVkKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdmb290ZXIuZGlyZWN0b3J5LWZvb3RlcicpXG4gICAgICAgIC5hcHBlbmQoXG4gICAgICAgICAgJzxhIGNsYXNzPVwiY29tcGVuZGl1bS10cmFuc2xhdGlvblwiIHRpdGxlPVwiJyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVUaXRsZScpICtcbiAgICAgICAgICAgICdcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVRpdGxlJykgK1xuICAgICAgICAgICAgJzwvYT4nXG4gICAgICAgIClcbiAgICAgIGh0bWwuZmluZCgnLmNvbXBlbmRpdW0tdHJhbnNsYXRpb24nKS5jbGljaygoKSA9PiB7XG4gICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICAgICc8cD4nICtcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSG93VG9UcmFuc2xhdGVXYXJuaW5nJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUluc3RhbGxCYWJlbGUnKSArXG4gICAgICAgICAgJzwvcD4nICtcbiAgICAgICAgICAnPHA+JyArXG4gICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lkhvd1RvVHJhbnNsYXRlSW5zdGFsbFRyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZUVuYWJsZVRyYW5zbGF0aW9uJykgK1xuICAgICAgICAgICc8L3A+JyArXG4gICAgICAgICAgJzxwPicgK1xuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZU5vVHJhbnNsYXRpb24nKSArXG4gICAgICAgICAgJzwvcD4nXG4gICAgICAgIG5ldyBEaWFsb2coXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ib3dUb1RyYW5zbGF0ZVRpdGxlJyksXG4gICAgICAgICAgICBjb250ZW50OiBtZXNzYWdlLFxuICAgICAgICAgICAgYnV0dG9uczoge30sXG4gICAgICAgICAgICBkZWZhdWx0OiAnY2xvc2UnXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7fVxuICAgICAgICApLnJlbmRlcih0cnVlKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBBY3RvckRpcmVjdG9yeSwgQ09OU1QsIGdhbWUgKi9cbmltcG9ydCB7IENvQzdBY3RvckltcG9ydGVyRGlhbG9nIH0gZnJvbSAnLi9hcHBzL2FjdG9yLWltcG9ydGVyLWRpYWxvZy5qcydcbmltcG9ydCB7IENvQzdJbnZlc3RpZ2F0b3JXaXphcmQgfSBmcm9tICcuL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdBY3RvckRpcmVjdG9yeSBleHRlbmRzIEFjdG9yRGlyZWN0b3J5IHtcbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuXG4gICAgLy8gQWxsb3cgSW52ZXN0aWdhdG9yIFdpemFyZFxuICAgIC8vICAqIElmIHRoZSB1c2VyIHJvbGUgaXMgYWxsb3dlZCB0byBjcmVhdGUgYWN0b3JzXG4gICAgLy8gICogSWYgdGhlIHVzZXIgaGFzIGxlc3Mgb3duZWQgYWN0b3JzIHRoYW4gYWxsb3dlZCBpbiBzZXR0aW5nc1xuICAgIGxldCBhbGxvd1dpemFyZCA9IGdhbWUudXNlci5yb2xlID49IENPTlNULlVTRVJfUEVSTUlTU0lPTlMuQUNUT1JfQ1JFQVRFLmRlZmF1bHRSb2xlXG4gICAgaWYgKCFhbGxvd1dpemFyZCkge1xuICAgICAgY29uc3QgYWxsb3dlZCA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFF1YW50aXR5JylcbiAgICAgIGlmIChhbGxvd2VkID4gMCkge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IGdhbWUuYWN0b3JzLmZpbHRlcihhID0+IFthLm93bmVyc2hpcC5kZWZhdWx0LCAoYS5vd25lcnNoaXBbZ2FtZS51c2VyLmlkXSA/PyBDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk5PTkUpXS5pbmNsdWRlcyhDT05TVC5ET0NVTUVOVF9PV05FUlNISVBfTEVWRUxTLk9XTkVSKSkubGVuZ3RoXG4gICAgICAgIGFsbG93V2l6YXJkID0gZXhpc3RpbmcgPCBhbGxvd2VkXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFsbG93V2l6YXJkKSB7XG4gICAgICBodG1sXG4gICAgICAgIC5maW5kKCdmb290ZXIuZGlyZWN0b3J5LWZvb3RlcicpXG4gICAgICAgIC5hcHBlbmQoJzxhIGNsYXNzPVwiaW52ZXN0aWdhdG9yLXdpemFyZFwiPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSW52ZXN0aWdhdG9yV2l6YXJkLlRpdGxlJykgKyAnPC9hPicpXG4gICAgICBodG1sLmZpbmQoJy5pbnZlc3RpZ2F0b3Itd2l6YXJkJykuY2xpY2soKCkgPT4ge1xuICAgICAgICBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZSgpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChnYW1lLnVzZXIucm9sZSA+PSBDT05TVC5VU0VSX1BFUk1JU1NJT05TLkFDVE9SX0NSRUFURS5kZWZhdWx0Um9sZSkge1xuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnZm9vdGVyLmRpcmVjdG9yeS1mb290ZXInKVxuICAgICAgICAuYXBwZW5kKFxuICAgICAgICAgICc8YSBjbGFzcz1cImFjdG9yLWltcG9ydFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdG9ySW1wb3J0ZXInKSArXG4gICAgICAgICAgICAnPC9hPidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCcuYWN0b3ItaW1wb3J0JykuY2xpY2soKCkgPT4ge1xuICAgICAgICBDb0M3QWN0b3JJbXBvcnRlckRpYWxvZy5jcmVhdGUoKVxuICAgICAgfSlcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5leHBvcnQgY2xhc3MgQ29DN0RlY2FkZXJEU05GYWNlcyB7XG4gIGNvbnN0cnV0b3IgKCkge1xuICAgIHRoaXMuc2VsZWN0ZWQgPSAnJ1xuICB9XG5cbiAgc2V0RmFjZXMgKCkge1xuICAgIGxldCBzZWxlY3RlZCA9IGdhbWUudXNlci5nZXRGbGFnKCdkaWNlLXNvLW5pY2UnLCAnYXBwZWFyYW5jZScpPy5nbG9iYWxcbiAgICAgIC5zeXN0ZW1cbiAgICBpZiAoc2VsZWN0ZWQgIT09IHRoaXMuc2VsZWN0ZWQpIHtcbiAgICAgIGxldCBkYXRhXG4gICAgICBsZXQgZGVzdGluYXRpb25cbiAgICAgIGxldCBzb3VyY2VEaWUgPSBnYW1lLmRpY2UzZC5EaWNlRmFjdG9yeS5zeXN0ZW1zW3NlbGVjdGVkXT8uZGljZS5maW5kKFxuICAgICAgICBkID0+IGQudHlwZSA9PT0gJ2QxMDAnXG4gICAgICApXG4gICAgICBpZiAodHlwZW9mIHNvdXJjZURpZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgc291cmNlRGllID0gZ2FtZS5kaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtcy5zdGFuZGFyZC5kaWNlLmZpbmQoXG4gICAgICAgICAgZCA9PiBkLnR5cGUgPT09ICdkMTAwJ1xuICAgICAgICApXG4gICAgICAgIHNlbGVjdGVkID0gJ3N0YW5kYXJkJ1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBzb3VyY2VEaWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGRlc3RpbmF0aW9uID0gZ2FtZS5kaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtcy5zdGFuZGFyZC5kaWNlLmZpbmRJbmRleChcbiAgICAgICAgICBkID0+IGQudHlwZSA9PT0gJ2R0J1xuICAgICAgICApXG4gICAgICAgIGRhdGEgPSBPYmplY3QuYXNzaWduKHt9LCBzb3VyY2VEaWUpXG4gICAgICAgIGRhdGEudHlwZSA9ICdkdCdcbiAgICAgICAgZ2FtZS5kaWNlM2QuRGljZUZhY3Rvcnkuc3lzdGVtcy5zdGFuZGFyZC5kaWNlW2Rlc3RpbmF0aW9uXSA9XG4gICAgICAgICAgT2JqZWN0LmFzc2lnbihzb3VyY2VEaWUuY29uc3RydWN0b3IucHJvdG90eXBlLCBkYXRhKVxuICAgICAgfVxuICAgICAgdGhpcy5zZWxlY3RlZCA9IHNlbGVjdGVkXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIERpYWxvZywgZ2FtZSwgbWVyZ2VPYmplY3QsIFJvbGwsIHJlbmRlclRlbXBsYXRlLCB1aSAqL1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdJdGVtIH0gZnJvbSAnLi4vaXRlbS5qcydcbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1NwZWxsIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3BlbnRhZ3JhbS1yb3NlLnN2ZydcbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0XG4gIH1cblxuICBhc3luYyBjYXN0ICgpIHtcbiAgICBpZiAoIXRoaXMuaXNPd25lZCkge1xuICAgICAgLyoqIFRoaXMgaXMgbm90IG93bmVkIGJ5IGFueSBBY3RvciAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdE93bmVkJykpXG4gICAgfVxuICAgIGNvbnN0IGNvc3RzID0gdGhpcy5zeXN0ZW0uY29zdHNcbiAgICBjb25zdCBsb3NzZXMgPSBbXVxuICAgIGxldCBjb252ZXJ0U3VycGx1c0ludG9IaXRQb2ludHNcbiAgICBjb3N0cy5tYWdpY1BvaW50cyA9IENvQzdVdGlsaXRpZXMuaXNGb3JtdWxhKGNvc3RzLm1hZ2ljUG9pbnRzKVxuICAgICAgPyAoYXdhaXQgbmV3IFJvbGwoY29zdHMubWFnaWNQb2ludHMpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KSkudG90YWxcbiAgICAgIDogcGFyc2VJbnQoY29zdHMubWFnaWNQb2ludHMpXG4gICAgaWYgKFxuICAgICAgY29zdHMubWFnaWNQb2ludHMgJiZcbiAgICAgIGNvc3RzLm1hZ2ljUG9pbnRzID4gdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5tcC52YWx1ZVxuICAgICkge1xuICAgICAgY29udmVydFN1cnBsdXNJbnRvSGl0UG9pbnRzID0gYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbnZlcnRlZEhpdFBvaW50cyA9XG4gICAgICAgICAgY29zdHMubWFnaWNQb2ludHMgLSB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlXG4gICAgICAgIGNvbnN0IGNvbnZlcnRlZE1hZ2ljUG9pbnRzID0gY29zdHMubWFnaWNQb2ludHMgLSBjb252ZXJ0ZWRIaXRQb2ludHNcbiAgICAgICAgY29uc3QgZGF0YSA9IHtcbiAgICAgICAgICB0aXRsZTogJyAnLFxuICAgICAgICAgIGNvbnRlbnQ6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTm90RW5vdWdoTWFnaWNQb2ludHMnLCB7XG4gICAgICAgICAgICBhY3Rvck1hZ2ljUG9pbnRzOiB0aGlzLmFjdG9yLnN5c3RlbS5hdHRyaWJzLm1wLnZhbHVlLFxuICAgICAgICAgICAgY29udmVydGVkSGl0UG9pbnRzLFxuICAgICAgICAgICAgY29udmVydGVkTWFnaWNQb2ludHMsXG4gICAgICAgICAgICBvcmlnaW5hbE1hZ2ljUG9pbnRzOiBjb3N0cy5tYWdpY1BvaW50cyxcbiAgICAgICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcbiAgICAgICAgICB9KSxcbiAgICAgICAgICBidXR0b25zOiB7XG4gICAgICAgICAgICBjYW5jZWw6IHtcbiAgICAgICAgICAgICAgaWNvbjogJzxpIGNsYXNzPVwiZmFzIGZhLXRpbWVzXCI+PC9pPicsXG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2FuY2VsJyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoZmFsc2UpXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcm9jZWVkOiB7XG4gICAgICAgICAgICAgIGljb246ICc8aSBjbGFzcz1cImZhcyBmYS1jaGVja1wiPjwvaT4nLFxuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlByb2NlZWQnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb3N0cy5oaXRQb2ludHMgPSBjb252ZXJ0ZWRIaXRQb2ludHNcbiAgICAgICAgICAgICAgICBjb3N0cy5tYWdpY1BvaW50cyA9IGNvbnZlcnRlZE1hZ2ljUG9pbnRzXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUodHJ1ZSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGVmYXVsdDogJ2NhbmNlbCcsXG4gICAgICAgICAgY2xhc3NlczogWydjb2M3JywgJ2RpYWxvZyddXG4gICAgICAgIH1cbiAgICAgICAgbmV3IERpYWxvZyhkYXRhKS5yZW5kZXIodHJ1ZSlcbiAgICAgIH0pXG4gICAgICBpZiAoIWNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cykgcmV0dXJuXG4gICAgfVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGNvc3RzKSkge1xuICAgICAgaWYgKCF2YWx1ZSB8fCBOdW1iZXIodmFsdWUpID09PSAwKSBjb250aW51ZVxuICAgICAgbG9zc2VzLnB1c2goYXdhaXQgdGhpcy5yZXNvbHZlTG9zc2VzKGtleSwgdmFsdWUpKVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL2NoYXQuaHRtbCdcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRoaXMuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7IGRlc2NyaXB0aW9uLCBsb3NzZXMgfSlcbiAgICByZXR1cm4gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogdGhpcy5uYW1lLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gIH1cblxuICBhc3luYyByZXNvbHZlTG9zc2VzIChjaGFyYWN0ZXJpc3RpYywgdmFsdWUpIHtcbiAgICBsZXQgY2hhcmFjdGVyaXN0aWNOYW1lXG4gICAgbGV0IGxvc3NcbiAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEodmFsdWUpKSB7XG4gICAgICBsb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgfSBlbHNlIHtcbiAgICAgIGxvc3MgPSBwYXJzZUludCh2YWx1ZSlcbiAgICB9XG4gICAgY29uc3QgYWN0b3JEYXRhID0gdGhpcy5hY3Rvci5zeXN0ZW1cbiAgICBzd2l0Y2ggKGNoYXJhY3RlcmlzdGljKSB7XG4gICAgICBjYXNlICdoaXRQb2ludHMnOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGl0UG9pbnRzJylcbiAgICAgICAgdGhpcy5hY3Rvci5kZWFsRGFtYWdlKGxvc3MsIHsgaWdub3JlQXJtb3I6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Nhbml0eSc6XG4gICAgICAgIGNoYXJhY3RlcmlzdGljTmFtZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5TYW5pdHlQb2ludHMnKVxuICAgICAgICB0aGlzLmdyYW50U2FuaXR5TG9zcyhsb3NzKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbWFnaWNQb2ludHMnOlxuICAgICAgICBjaGFyYWN0ZXJpc3RpY05hbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFnaWNQb2ludHMnKVxuICAgICAgICB0aGlzLmFjdG9yLnNldE1wKGFjdG9yRGF0YS5hdHRyaWJzLm1wLnZhbHVlIC0gbG9zcylcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Bvd2VyJzpcbiAgICAgICAgY2hhcmFjdGVyaXN0aWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuUG93ZXInKVxuICAgICAgICB0aGlzLmFjdG9yLnVwZGF0ZSh7XG4gICAgICAgICAgJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlJzpcbiAgICAgICAgICAgIGFjdG9yRGF0YS5jaGFyYWN0ZXJpc3RpY3MucG93LnZhbHVlIC0gbG9zc1xuICAgICAgICB9KVxuICAgIH1cbiAgICByZXR1cm4geyBjaGFyYWN0ZXJpc3RpY05hbWUsIGxvc3MgfVxuICB9XG5cbiAgLyoqIEJ5cGFzcyB0aGUgU2FuaXR5IGNoZWNrIGFuZCBqdXN0IHJvbGwgdGhlIGRhbWFnZSAqL1xuICBhc3luYyBncmFudFNhbml0eUxvc3MgKHZhbHVlKSB7XG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5DYXN0aW5nU3BlbGwnLCB7XG4gICAgICAgIHNwZWxsOiB0aGlzLm5hbWVcbiAgICAgIH0pLFxuICAgICAgY29udGVudDogaHRtbFxuICAgIH0pXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IG1lc3NhZ2UuZ2V0SFRNTCgpXG4gICAgaWYgKHR5cGVvZiBjYXJkLmxlbmd0aCAhPT0gJ3VuZGVmaW5lZCcgJiYgY2FyZC5sZW5ndGggPT09IDEpIHtcbiAgICAgIGNvbnN0IHNhbml0eUxvc3MgPSB2YWx1ZVxuICAgICAgaHRtbCA9IGNhcmQuZmluZCgnLmNoYXQtY2FyZCcpWzBdXG4gICAgICBodG1sLmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKFxuICAgICAgICBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgYWN0b3JLZXk6IHRoaXMuYWN0b3IuaWQsXG4gICAgICAgICAgZmFzdEZvcndhcmQ6IGZhbHNlLFxuICAgICAgICAgIHNhbkRhdGE6IHtcbiAgICAgICAgICAgIHNhbk1pbjogc2FuaXR5TG9zcyxcbiAgICAgICAgICAgIHNhbk1heDogc2FuaXR5TG9zc1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIGNvbnN0IHNhbml0eUNoZWNrID0gU2FuQ2hlY2tDYXJkLmdldEZyb21DYXJkKGh0bWwpXG4gICAgICBhd2FpdCBzYW5pdHlDaGVjay5ieXBhc3NSb2xsU2FuKClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLnJvbGxTYW5Mb3NzKClcbiAgICAgIHNhbml0eUNoZWNrLnVwZGF0ZUNoYXRDYXJkKClcbiAgICB9XG4gIH1cblxuICBhc3luYyB1cGRhdGUgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5jb250ZXh0LnBhcmVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiB0aGlzLmNvbnRleHQuYm9va0lkICE9PSAndW5kZWZpbmVkJ1xuICAgICkge1xuICAgICAgbGV0IGl0ZW1cbiAgICAgIGxldCBib29rXG4gICAgICAvLyBsZXQgc3BlbGxEYXRhXG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICBpdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5jb250ZXh0LmJvb2tJZClcbiAgICAgICAgYm9vayA9IGl0ZW0udG9PYmplY3QoKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYm9vayA9IHRoaXMuY29udGV4dC5wYXJlbnQuaXRlbXMuZ2V0KHRoaXMuY29udGV4dC5ib29rSWQpLnRvT2JqZWN0KClcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGkgPSAwLCBpbSA9IGJvb2suc3lzdGVtLnNwZWxscy5sZW5ndGg7IGkgPCBpbTsgaSsrKSB7XG4gICAgICAgIGlmIChib29rLnN5c3RlbS5zcGVsbHNbaV0uX2lkID09PSB0aGlzLmlkKSB7XG4gICAgICAgICAgYm9vay5zeXN0ZW0uc3BlbGxzW2ldID0gbWVyZ2VPYmplY3QoYm9vay5zeXN0ZW0uc3BlbGxzW2ldLCBkYXRhKVxuICAgICAgICAgIC8vIHNwZWxsRGF0YSA9IGJvb2suc3lzdGVtLnNwZWxsc1tpXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jb250ZXh0LnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICBhd2FpdCBpdGVtLnVwZGF0ZSh7XG4gICAgICAgICAgJ3N5c3RlbS5zcGVsbHMnOiBib29rLnN5c3RlbS5zcGVsbHNcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5zaGVldC5vYmplY3QgPSBuZXcgQ29DN1NwZWxsKFxuICAgICAgICAgIGJvb2suc3lzdGVtLnNwZWxscy5maW5kKHNwZWxsID0+IHNwZWxsLl9pZCA9PT0gdGhpcy5pZCksXG4gICAgICAgICAgdGhpcy5jb250ZXh0XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuY29udGV4dC5wYXJlbnQudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbYm9va10pXG4gICAgICAgIHRoaXMuc2hlZXQub2JqZWN0ID0gbmV3IENvQzdTcGVsbChcbiAgICAgICAgICBib29rLnN5c3RlbS5zcGVsbHMuZmluZChzcGVsbCA9PiBzcGVsbC5faWQgPT09IHRoaXMuaWQpLFxuICAgICAgICAgIHRoaXMuY29udGV4dFxuICAgICAgICApXG4gICAgICB9XG4gICAgICB0aGlzLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH0gZWxzZSB7XG4gICAgICBhd2FpdCBzdXBlci51cGRhdGUoZGF0YSwgY29udGV4dClcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDaGF0TWVzc2FnZSwgZHVwbGljYXRlLCBnYW1lLCByZW5kZXJUZW1wbGF0ZSwgUm9sbCwgdWkgKi9cbmltcG9ydCB7IFNhbkNoZWNrQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvc2FuLWNoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3U3BlbGwgfSBmcm9tICcuLi9zcGVsbC9kYXRhLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0Jvb2sgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLmltZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGRhdGEuaW1nID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvc2VjcmV0LWJvb2suc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICB9XG5cbiAgLyoqIENvbnZlcnQgdGhlIGRpZmZpY3VsdHkgb24gdGhlIHNlbGVjdCBlbGVtZW50IHRvIGEgZm9ybWF0IGFjY2VwdGVkICovXG4gIHN0YXRpYyBjb252ZXJ0RGlmZmljdWx0eSAoZGlmZmljdWx0eSkge1xuICAgIHN3aXRjaCAoZGlmZmljdWx0eSkge1xuICAgICAgY2FzZSAnaGFyZCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmhhcmRcbiAgICAgIGNhc2UgJ2V4dHJlbWUnOlxuICAgICAgICByZXR1cm4gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5leHRyZW1lXG4gICAgICBjYXNlICdjcml0aWNhbCc6XG4gICAgICAgIHJldHVybiBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLmNyaXRpY2FsXG4gICAgICBjYXNlICd1bnJlYWRhYmxlJzpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwuaW1wb3NzaWJsZVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIENvQzdDaGVjay5kaWZmaWN1bHR5TGV2ZWwucmVndWxhclxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgdGhlIGZ1dHVyZTogYWRkIGFkdmFuY2VkIHJ1bGVzIGZvciBsZWFybmluZyBzcGVsbHMsIHBnLiAxNzZcbiAgICogQHBhcmFtIFt7RG9jdW1lbnR9XSBzcGVsbHNcbiAgICogQHJldHVybnMge1Byb21pc2U8RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgYWRkU3BlbGxzIChzcGVsbHMpIHtcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5zeXN0ZW0uc3BlbGxzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5zcGVsbHMpXG4gICAgICA6IFtdXG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiBzcGVsbHMpIHtcbiAgICAgIGNvbGxlY3Rpb24ucHVzaChzcGVsbClcbiAgICB9XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5zcGVsbHMnOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBzcGVsbERldGFpbCAoaW5kZXgpIHtcbiAgICBjb25zdCBpc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgY29uc3QgZGF0YSA9IHRoaXMuc3lzdGVtLnNwZWxsc1tpbmRleF1cbiAgICBjb25zdCBwYXJlbnQgPSB0aGlzLmFjdG9yID8gdGhpcy5hY3RvciA6IG51bGxcbiAgICBjb25zdCBzcGVsbCA9IG5ldyBDb0M3U3BlbGwoZGF0YSwgeyBwYXJlbnQsIGJvb2tJZDogdGhpcy5pZCB9KVxuICAgIGlmIChpc0tlZXBlciB8fCBzcGVsbC5zeXN0ZW0ubGVhcm5lZCkge1xuICAgICAgcmV0dXJuIGF3YWl0IHNwZWxsLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGFsbCB0aGUgbG9naWMgaW52b2x2aW5nIHRoZSBhdHRlbXB0IG9mIGluaXRpYWwgcmVhZGluZ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZX0gQHNlZSBsaXN0ZW4gQHNlZSBncmFudEluaXRpYWxSZWFkaW5nXG4gICAqL1xuICBhc3luYyBhdHRlbXB0SW5pdGlhbFJlYWRpbmcgKCkge1xuICAgIC8qKiBDb252ZXJ0cyB0aGUgZGlmZmljdWx0eSB2YWx1ZSB0byBzb21ldGhpbmcgYWNjZXB0ZWQgYnkgQ29DN0NoZWNrICovXG4gICAgY29uc3QgZGlmZmljdWx0eSA9IENvQzdCb29rLmNvbnZlcnREaWZmaWN1bHR5KFxuICAgICAgdGhpcy5zeXN0ZW0uZGlmZmljdWx0eUxldmVsXG4gICAgKVxuICAgIGNvbnN0IGxhbmd1YWdlID0gdGhpcy5zeXN0ZW0ubGFuZ3VhZ2VcbiAgICBjb25zdCBza2lsbCA9IHRoaXMuYWN0b3I/LmdldFNraWxsc0J5TmFtZShsYW5ndWFnZSlcbiAgICBpZiAoIXNraWxsKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9IGVsc2UgaWYgKHNraWxsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLyoqXG4gICAgICAgKiBUaGUgQWN0b3Igd2hvIG93bnMgdGhpcyBkb2VzIG5vdCBoYXZlIHRoZSBza2lsbCBvZlxuICAgICAgICogdGhlIGxhbmd1YWdlIGluIHdoaWNoIGl0IHdhcyB3cml0dGVuXG4gICAgICAgKi9cbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlVua25vd25MYW5ndWFnZScsIHsgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSB9KVxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBjaGVjay5za2lsbCA9IHNraWxsWzBdLmlkXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gZGlmZmljdWx0eVxuICAgICAgY2hlY2sucGFyZW50ID0gdGhpcy51dWlkXG4gICAgICBjaGVjay5jb250ZXh0ID0gJ0lOSVRJQUxfUkVBRElORydcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVhZEF0dGVtcHQnLCB7XG4gICAgICAgIGJvb2s6IHRoaXMubmFtZSxcbiAgICAgICAgbGFuZ3VhZ2UsXG4gICAgICAgIGRpZmZpY3VsdHk6IHRoaXMuc3lzdGVtLmRpZmZpY3VsdHlMZXZlbFxuICAgICAgfSlcbiAgICAgIGF3YWl0IGNoZWNrLnJvbGwoKVxuICAgICAgcmV0dXJuIGF3YWl0IGNoZWNrLnRvTWVzc2FnZSgpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0cyBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBpbnRlcmFjdHMgaW4gc29tZSB3YXkgd2l0aCBwcm9ncmVzcyBiYXJcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1vZGUgJ3Jlc2V0JyB8fCAnaW5jcmVhc2UnIHx8ICdkZWNyZWFzZSdcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIGp1c3Qgc28gdGhhdCBwcm9ncmVzcyBpcyBub3QgZ3JlYXRlciB0aGFuIG5lY2Vzc2FyeVxuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBjaGFuZ2VQcm9ncmVzcyAobW9kZSwgdmFsdWUpIHtcbiAgICBpZiAoIXRoaXMuaXNPd25lZCAmJiBtb2RlICE9PSAncmVzZXQnKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZyAmJiBtb2RlICE9PSAncmVzZXQnKSB7XG4gICAgICAvKiogQWN0b3IgZGlkIG5vdCBwZXJmb3JtZWQgYW4gaW5pdGlhbCByZWFkaW5nIGZpcnN0ICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Jbml0aWFsUmVhZGluZ05lZWRlZCcsIHtcbiAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoIXRoaXMuc3lzdGVtLnR5cGUubXl0aG9zICYmIG1vZGUgIT09ICdyZXNldCcpIHtcbiAgICAgIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob3RNeXRob3NUb21lJykpXG4gICAgfVxuICAgIGNvbnN0IG5lY2Vzc2FyeSA9IHRoaXMuc3lzdGVtLnN0dWR5Lm5lY2Vzc2FyeVxuICAgIGxldCBmdWxsU3R1ZHkgPSB0aGlzLnN5c3RlbS5mdWxsU3R1ZHlcbiAgICBsZXQgcHJvZ3Jlc3MgPSB0aGlzLnN5c3RlbS5zdHVkeS5wcm9ncmVzc1xuICAgIGlmIChpc05hTihwcm9ncmVzcykpIHtcbiAgICAgIC8qKiBJdCBzZWVtcyBhIGxpdHRsZSBpbXBvc3NpYmxlLCBidXQgeW91IG5ldmVyIGtub3cgKi9cbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAwXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAodmFsdWUgJiYgcHJvZ3Jlc3MgPiB2YWx1ZSkge1xuICAgICAgLyoqXG4gICAgICAgKiBQcm9ncmVzcyB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gdmFsdWUgZW50ZXJlZCBieSB1c2VyIGFzIG5lY2Vzc2FyeSxcbiAgICAgICAqIHJlc2V0IHByb2dyZXNzIHRvIGJlIGVxdWFsIG5lY2Vzc2FyeSBhbmQgY29tcGxldGUgZnVsbCBzdHVkeVxuICAgICAgICovXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uZnVsbFN0dWR5JzogKytmdWxsU3R1ZHksXG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiB2YWx1ZVxuICAgICAgfSlcbiAgICAgIHJldHVybiBhd2FpdCB0aGlzLmNvbXBsZXRlRnVsbFN0dWR5KClcbiAgICB9XG4gICAgaWYgKG1vZGUgPT09ICdpbmNyZWFzZScgJiYgcHJvZ3Jlc3MgPCBuZWNlc3NhcnkpIHtcbiAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gcGx1cyBpY29uIHRvIGluY3JlYXNlIHByb2dyZXNzICovXG4gICAgICBpZiAoKGF3YWl0IHRoaXMuY2hlY2tFeGhhdXN0aW9uKCkpICE9PSBmYWxzZSkgcmV0dXJuXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7XG4gICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiArK3Byb2dyZXNzXG4gICAgICB9KVxuICAgICAgaWYgKHByb2dyZXNzID09PSBuZWNlc3NhcnkpIHtcbiAgICAgICAgLyoqIENvbXBsZXRlIGZ1bGwgc3R1ZHkgaWYgcHJvZ3Jlc3MgaXMgZXF1YWwgbmVjZXNzYXJ5ICovXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5mdWxsU3R1ZHknOiArK2Z1bGxTdHVkeSB9KVxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5ncmFudEZ1bGxTdHVkeSgpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChtb2RlID09PSAnZGVjcmVhc2UnICYmIHByb2dyZXNzID4gMCkge1xuICAgICAgLyoqIFVzZXIgY2xpY2tlZCBvbiBtaW51cyBpY29uIHRvIGRlY3JlYXNlIHByb2dyZXNzICovXG4gICAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLnN0dWR5LnByb2dyZXNzJzogLS1wcm9ncmVzc1xuICAgICAgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBjaGVja0V4aGF1c3Rpb24gKCkge1xuICAgIGNvbnN0IGFjdG9yTXl0aG9zVmFsdWUgPSB0aGlzLmFjdG9yPy5jdGh1bGh1TXl0aG9zXG4gICAgY29uc3QgbXl0aG9zUmF0aW5nID0gdGhpcy5zeXN0ZW0ubXl0aG9zUmF0aW5nXG4gICAgaWYgKHRoaXMuc3lzdGVtLmluaXRpYWxSZWFkaW5nKSB7XG4gICAgICBpZiAoYWN0b3JNeXRob3NWYWx1ZSA+PSBteXRob3NSYXRpbmcpIHtcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAgICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiB0aGlzLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnlcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkJvb2tIYXNOb3RoaW5nTW9yZVRvVGVhY2gnLCB7XG4gICAgICAgICAgICBhY3RvcjogdGhpcy5hY3Rvci5uYW1lLFxuICAgICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgICAgfSlcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGdyYW50RnVsbFN0dWR5ICgpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLnR5cGUubXl0aG9zKSByZXR1cm5cbiAgICBpZiAoKGF3YWl0IHRoaXMuY2hlY2tFeGhhdXN0aW9uKCkpICE9PSBmYWxzZSkgcmV0dXJuXG4gICAgY29uc3QgYWN0b3JNeXRob3NWYWx1ZSA9IHRoaXMuYWN0b3IuY3RodWxodU15dGhvc1xuICAgIGNvbnN0IGRldmVsb3BtZW50cyA9IFtdXG4gICAgY29uc3QgbXl0aG9zUmF0aW5nID0gdGhpcy5zeXN0ZW0ubXl0aG9zUmF0aW5nXG4gICAgbGV0IG15dGhvc0ZpbmFsID0gdGhpcy5zeXN0ZW0uZ2FpbnMuY3RodWxodU15dGhvcy5maW5hbFxuICAgIGlmIChhY3Rvck15dGhvc1ZhbHVlICsgbXl0aG9zRmluYWwgPiBteXRob3NSYXRpbmcpIHtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPD0gbXl0aG9zRmluYWw7IGluZGV4KyspIHtcbiAgICAgICAgaWYgKGFjdG9yTXl0aG9zVmFsdWUgKyBteXRob3NGaW5hbCAtIGluZGV4IDw9IG15dGhvc1JhdGluZykge1xuICAgICAgICAgIG15dGhvc0ZpbmFsIC09IGluZGV4XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHJlYWRlciBhdXRvbWF0aWNhbGx5IGdhaW5zIGEgc2tpbGwgdGljayBmb3IgdGhlXG4gICAgICogbGFuZ3VhZ2UgaW4gd2hpY2ggdGhlIGJvb2sgaXMgd3JpdHRlblxuICAgICAqL1xuICAgIGRldmVsb3BtZW50cy5wdXNoKFxuICAgICAge1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jdGh1bGh1LW15dGhvcycpLFxuICAgICAgICBnYWluOiBwYXJzZUludChteXRob3NGaW5hbClcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHRoaXMuc3lzdGVtLmxhbmd1YWdlLFxuICAgICAgICBnYWluOiAnZGV2ZWxvcG1lbnQnXG4gICAgICB9XG4gICAgKVxuICAgIGF3YWl0IHRoaXMuZ3JhbnRTa2lsbERldmVsb3BtZW50KGRldmVsb3BtZW50cylcbiAgICBhd2FpdCB0aGlzLnJvbGxTYW5pdHlMb3NzKClcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgJ3N5c3RlbS5mdWxsU3R1ZGllcyc6ICsrdGhpcy5zeXN0ZW0uZnVsbFN0dWRpZXNcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGdyYW50SW5pdGlhbFJlYWRpbmcgKCkge1xuICAgIC8qKiBJZiBpbml0aWFsIHJlYWRpbmcgaGFzIGFscmVhZHkgYmVlbiBkb25lIHRoZXJlIGlzIG5vdGhpbmcgdG8gZG8gaGVyZSAqL1xuICAgIGlmICh0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZykgcmV0dXJuXG4gICAgY29uc3QgZGV2ZWxvcG1lbnRzID0gW11cbiAgICBjb25zdCBteXRob3MgPSB7XG4gICAgICBnYWluczogdGhpcy5zeXN0ZW0uZ2FpbnMuY3RodWxodU15dGhvcy5pbml0aWFsLFxuICAgICAgdHlwZTogdGhpcy5zeXN0ZW0udHlwZS5teXRob3NcbiAgICB9XG4gICAgY29uc3Qgb2NjdWx0ID0ge1xuICAgICAgZ2FpbnM6IHRoaXMuc3lzdGVtLmdhaW5zLm9jY3VsdCxcbiAgICAgIHR5cGU6IHRoaXMuc3lzdGVtLnR5cGUub2NjdWx0XG4gICAgfVxuICAgIGNvbnN0IG90aGVyID0ge1xuICAgICAgZ2FpbnM6IHRoaXMuc3lzdGVtLmdhaW5zLm90aGVycyxcbiAgICAgIHR5cGU6IHRoaXMuc3lzdGVtLnR5cGUub3RoZXJcbiAgICB9XG4gICAgaWYgKG15dGhvcy50eXBlICYmIG15dGhvcy5nYWlucykge1xuICAgICAgZGV2ZWxvcG1lbnRzLnB1c2goe1xuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29DSURGbGFnLmtleXMuaS5za2lsbC5jdGh1bGh1LW15dGhvcycpLFxuICAgICAgICBnYWluOiBwYXJzZUludChteXRob3MuZ2FpbnMpXG4gICAgICB9KVxuICAgIH1cbiAgICBpZiAob2NjdWx0LnR5cGUgJiYgb2NjdWx0LmdhaW5zKSB7XG4gICAgICBkZXZlbG9wbWVudHMucHVzaCh7XG4gICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PY2N1bHQnKSxcbiAgICAgICAgZ2FpbjogcGFyc2VJbnQob2NjdWx0LmdhaW5zKVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKG90aGVyLnR5cGUpIHtcbiAgICAgIGZvciAoY29uc3Qgc2tpbGwgb2Ygb3RoZXIuZ2FpbnMpIHtcbiAgICAgICAgY29uc3QgcGF0dGVybiA9IHNraWxsLm5hbWUubWF0Y2goL14oLispIFxcKCguKylcXCkkLylcbiAgICAgICAgLyoqIFNhbml0aXphdGlvbiB0byBkZWFsIHdpdGggc3BlY2lhbGl6YXRpb25zICovXG4gICAgICAgIGlmIChwYXR0ZXJuKSB7XG4gICAgICAgICAgc2tpbGwuc3BlY2lhbGl6YXRpb24gPSBwYXR0ZXJuWzFdXG4gICAgICAgICAgc2tpbGwubmFtZSA9IHBhdHRlcm5bMl1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc2tpbGwudmFsdWUgIT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgICBza2lsbC52YWx1ZSA9IChcbiAgICAgICAgICAgIGF3YWl0IG5ldyBSb2xsKHNraWxsLnZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICApLnRvdGFsXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlKSB7XG4gICAgICAgICAgZGV2ZWxvcG1lbnRzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogc2tpbGwubmFtZSxcbiAgICAgICAgICAgIGdhaW46IHNraWxsLnZhbHVlLFxuICAgICAgICAgICAgc3BlY2lhbGl6YXRpb246IHNraWxsLnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLmdyYW50U2tpbGxEZXZlbG9wbWVudChkZXZlbG9wbWVudHMpXG4gICAgaWYgKChteXRob3MudHlwZSB8fCBvY2N1bHQudHlwZSkgJiYgdGhpcy5zeXN0ZW0uc2FuaXR5TG9zcykge1xuICAgICAgYXdhaXQgdGhpcy5yb2xsU2FuaXR5TG9zcygpXG4gICAgfVxuICAgIC8qKiBNYXJrIGluaXRpYWwgcmVhZGluZyBhcyBjb21wbGV0ZSAqL1xuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uaW5pdGlhbFJlYWRpbmcnOiB0cnVlIH0pXG4gIH1cblxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIHtJdGVtfSBzcGVsbGxlYXJuZWQgVGhlIHNwZWxsIHRoYXQgd2FzIGxlYXJuZWQgc3VjY2Vzc2Z1bGx5IGZyb20gYm9va1xuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgZ3JhbnRTcGVsbExlYXJuaW5nIChzcGVsbGxlYXJuZWQpIHtcbiAgICBmb3IgKGNvbnN0IHNwZWxsIG9mIHRoaXMuc3lzdGVtLnNwZWxscykge1xuICAgICAgaWYgKHNwZWxsLl9pZCA9PT0gc3BlbGxsZWFybmVkLl9pZCkge1xuICAgICAgICBzcGVsbC5zeXN0ZW0ubGVhcm5lZCA9IHRydWVcbiAgICAgICAgLy8gRG9lcyB0aGUgYWN0b3IgYWxyZWFkeSBoYXMgYSBzcGVsbCBvZiB0aGF0IG5hbWU/IFRoZW4gZG8gbm90IGFkZCB0aGUgc3BlbGxcbiAgICAgICAgY29uc3QgZXhpc3RpbmdTcGVsbCA9IGF3YWl0IHRoaXMuYWN0b3IuaXRlbXMuZmluZChcbiAgICAgICAgICBpdGVtID0+XG4gICAgICAgICAgICBpdGVtLnR5cGUgPT09ICdzcGVsbCcgJiYgaXRlbS5uYW1lID09PSBzcGVsbGxlYXJuZWQubmFtZVxuICAgICAgICApXG4gICAgICAgIGlmICghZXhpc3RpbmdTcGVsbCkge1xuICAgICAgICAgIHNwZWxsbGVhcm5lZC5zeXN0ZW0ubGVhcm5lZCA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LlNwZWxsQWxyZWFkeUxlYXJuZWQnLCB7XG4gICAgICAgICAgICAgIHNwZWxsOiBzcGVsbGxlYXJuZWQubmFtZSxcbiAgICAgICAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBTYXZlIHNwZWxsIGxpc3Qgb2YgYm9va1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5zcGVsbHMnOiB0aGlzLnN5c3RlbS5zcGVsbHMgfSlcbiAgICAvLyBBZGQgbGVhcm5lZCBzcGVsbCB0byBhY3RvclxuICAgIGlmIChzcGVsbGxlYXJuZWQuc3lzdGVtLmxlYXJuZWQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5TcGVsbFN1Y2Nlc3NmdWxseUxlYXJuZWQnLCB7XG4gICAgICAgICAgc3BlbGw6IHNwZWxsbGVhcm5lZC5uYW1lLFxuICAgICAgICAgIGJvb2s6IHRoaXMubmFtZVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgYXdhaXQgdGhpcy5hY3Rvci5jcmVhdGVFbWJlZGRlZERvY3VtZW50cygnSXRlbScsIFtcbiAgICAgICAgZHVwbGljYXRlKHNwZWxsbGVhcm5lZClcbiAgICAgIF0pXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY2VpdmVzIGFuIEFycmF5IG9mIHNraWxscyBhbmQgaGFuZGxlcyBhbGwgdGhlIGxvZ2ljIHRvIGRldmVsb3AgdGhlbVxuICAgKiBAcGFyYW0ge0FycmF5fSBkZXZlbG9wbWVudHMgQHNlZSBncmFudEluaXRpYWxSZWFkaW5nXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gdXBkYXRlIHRvIEl0ZW0gZG9jdW1lbnRcbiAgICovXG4gIGFzeW5jIGdyYW50U2tpbGxEZXZlbG9wbWVudCAoZGV2ZWxvcG1lbnRzKSB7XG4gICAgaWYgKGRldmVsb3BtZW50cy5sZW5ndGggPT09IDApIHJldHVyblxuICAgIGZvciAoY29uc3QgZGV2ZWxvcG1lbnQgb2YgZGV2ZWxvcG1lbnRzKSB7XG4gICAgICAvKiogVGVzdCBpZiB0aGUgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIHplcm8gKi9cbiAgICAgIGlmICghZGV2ZWxvcG1lbnQuZ2FpbikgY29udGludWVcbiAgICAgIGxldCBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuZ2V0U2tpbGxzQnlOYW1lKGRldmVsb3BtZW50Lm5hbWUpXG4gICAgICAvKiogVGhlIEFjdG9yIGRvZXMgbm90IG93biB0aGlzIHNraWxsLCBjcmVhdGUgYSBuZXcgb25lXG4gICAgICAgKiBGaXJzdCwgY2hlY2sgaWYgdGhlcmUgaXMgYW55IHNraWxsIGluIHRoZSBnYW1lIHdpdGggdGhlIHNhbWUgbmFtZVxuICAgICAgICogSW4gdGhlIGxhc3QgYWx0ZXJuYXRpdmUganVzdCBjcmVhdGUgYSBuZXcgZ2VuZXJpYyBza2lsbFxuICAgICAgICovXG4gICAgICBpZiAoc2tpbGwubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnN0IGV4aXN0aW5nU2tpbGwgPSBhd2FpdCBnYW1lLml0ZW1zLmZpbmQoXG4gICAgICAgICAgaXRlbSA9PlxuICAgICAgICAgICAgaXRlbS50eXBlID09PSAnc2tpbGwnICYmIGl0ZW0ubmFtZSA9PT0gZGV2ZWxvcG1lbnQubmFtZVxuICAgICAgICApXG4gICAgICAgIGlmIChleGlzdGluZ1NraWxsKSB7XG4gICAgICAgICAgc2tpbGwgPSBhd2FpdCB0aGlzLmFjdG9yLmNyZWF0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW1xuICAgICAgICAgICAgZHVwbGljYXRlKGV4aXN0aW5nU2tpbGwpXG4gICAgICAgICAgXSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBza2lsbCA9IGF3YWl0IHRoaXMuYWN0b3IuY3JlYXRlU2tpbGwoZGV2ZWxvcG1lbnQubmFtZSwgMClcbiAgICAgICAgICBpZiAoZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb24pIHtcbiAgICAgICAgICAgIGF3YWl0IHNraWxsWzBdLnVwZGF0ZSh7XG4gICAgICAgICAgICAgICdzeXN0ZW0ucHJvcGVydGllcy5zcGVjaWFsJzogdHJ1ZSxcbiAgICAgICAgICAgICAgJ3N5c3RlbS5zcGVjaWFsaXphdGlvbic6IGRldmVsb3BtZW50LnNwZWNpYWxpemF0aW9uXG4gICAgICAgICAgICB9KVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc2tpbGwgPSBza2lsbFswXVxuICAgICAgaWYgKGRldmVsb3BtZW50LmdhaW4gPT09ICdkZXZlbG9wbWVudCcpIHtcbiAgICAgICAgLyoqIFNpbXBseSBtYXJrIHRoZSBza2lsbCBmb3IgZGV2ZWxvcG1lbnQgKi9cbiAgICAgICAgYXdhaXQgc2tpbGwuZmxhZ0ZvckRldmVsb3BlbWVudCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKipcbiAgICAgICAgICogSWYgdGhlIHJlY2VpdmVkIHZhbHVlIGdhaW5lZCBpcyBudW1lcmljLCBlbnN1cmUgdGhhdCB0aGUgYW1vdW50XG4gICAgICAgICAqIHdpbGwgbm90IGV4Y2VlZCB0aGUgbWF4aW11bSB2YWx1ZSBvZiA5OVxuICAgICAgICAgKi9cbiAgICAgICAgaWYgKHNraWxsLnZhbHVlICsgZGV2ZWxvcG1lbnQuZ2FpbiA+IDk5KSB7XG4gICAgICAgICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8PSBkZXZlbG9wbWVudC5nYWluOyBpbmRleCsrKSB7XG4gICAgICAgICAgICBpZiAoc2tpbGwudmFsdWUgKyBkZXZlbG9wbWVudC5nYWluIC0gaW5kZXggPD0gOTkpIHtcbiAgICAgICAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiAtPSBpbmRleFxuICAgICAgICAgICAgICBhd2FpdCBza2lsbC5pbmNyZWFzZUV4cGVyaWVuY2UoZGV2ZWxvcG1lbnQuZ2FpbilcbiAgICAgICAgICAgICAgY29udGludWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYXdhaXQgc2tpbGwuaW5jcmVhc2VFeHBlcmllbmNlKGRldmVsb3BtZW50LmdhaW4pXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnNob3dEZXZlbG9wbWVudHNUYWJsZShkZXZlbG9wbWVudHMpXG4gIH1cblxuICAvKipcbiAgICogU3Vic2VxdWVudCBwZXJpb2RzIG9mIGZ1bGwgc3R1ZHkgbWF5IGJlIHVuZGVydGFrZW4sIHRoZSBkaWZmZXJlbmNlIGJlaW5nXG4gICAqIHRoYXQgZWFjaCBzdHVkeSB3aWxsIHRha2UgdHdpY2UgYXMgbG9uZyBhcyB0aGUgcHJldmlvdXMgb25lXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyByZWRvRnVsbFN0dWR5ICgpIHtcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZSh7ICdzeXN0ZW0uc3R1ZHkucHJvZ3Jlc3MnOiAwIH0pXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICdzeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5JzogdGhpcy5zeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5ICogMlxuICAgIH0pXG4gIH1cblxuICAvKiogQnlwYXNzIHRoZSBTYW5pdHkgY2hlY2sgYW5kIGp1c3Qgcm9sbCB0aGUgZGFtYWdlICovXG4gIGFzeW5jIHJvbGxTYW5pdHlMb3NzICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc3lzdGVtLnNhbml0eUxvc3NcbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnJykgcmV0dXJuXG4gICAgY29uc3QgdGVtcGxhdGUgPSBTYW5DaGVja0NhcmQudGVtcGxhdGVcbiAgICBsZXQgaHRtbCA9IGF3YWl0IHJlbmRlclRlbXBsYXRlKHRlbXBsYXRlLCB7fSlcbiAgICBjb25zdCBtZXNzYWdlID0gYXdhaXQgQ2hhdE1lc3NhZ2UuY3JlYXRlKHtcbiAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgIHNwZWFrZXI6IENoYXRNZXNzYWdlLmdldFNwZWFrZXIoeyBhY3RvcjogdGhpcy5hY3RvciB9KSxcbiAgICAgIGZsYXZvcjogZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5SZWFkaW5nTXl0aG9zVG9tZScsIHtcbiAgICAgICAgYm9vazogdGhpcy5uYW1lXG4gICAgICB9KSxcbiAgICAgIGNvbnRlbnQ6IGh0bWxcbiAgICB9KVxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBtZXNzYWdlLmdldEhUTUwoKVxuICAgIGlmICh0eXBlb2YgY2FyZC5sZW5ndGggIT09ICd1bmRlZmluZWQnICYmIGNhcmQubGVuZ3RoID09PSAxKSB7XG4gICAgICBjb25zdCBzYW5pdHlMb3NzID0gKGF3YWl0IG5ldyBSb2xsKHZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSkpLnRvdGFsXG4gICAgICBodG1sID0gY2FyZC5maW5kKCcuY2hhdC1jYXJkJylbMF1cbiAgICAgIGh0bWwuZGF0YXNldC5vYmplY3QgPSBlc2NhcGUoXG4gICAgICAgIEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBhY3RvcktleTogdGhpcy5hY3Rvci5pZCxcbiAgICAgICAgICBmYXN0Rm9yd2FyZDogZmFsc2UsXG4gICAgICAgICAgc2FuRGF0YToge1xuICAgICAgICAgICAgc2FuTWluOiBzYW5pdHlMb3NzLFxuICAgICAgICAgICAgc2FuTWF4OiBzYW5pdHlMb3NzXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgY29uc3Qgc2FuaXR5Q2hlY2sgPSBTYW5DaGVja0NhcmQuZ2V0RnJvbUNhcmQoaHRtbClcbiAgICAgIGF3YWl0IHNhbml0eUNoZWNrLmJ5cGFzc1JvbGxTYW4oKVxuICAgICAgYXdhaXQgc2FuaXR5Q2hlY2sucm9sbFNhbkxvc3MoKVxuICAgICAgc2FuaXR5Q2hlY2sudXBkYXRlQ2hhdENhcmQoKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgdGFibGUgaW4gdGhlIGNoYXQgd2l0aCBhbGwgc2tpbGwgZGV2ZWxvcG1lbnRzIG9idGFpbmVkXG4gICAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gZGV2ZWxvcG1lbnRzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlPERvY3VtZW50Pn0gY3JlYXRlIENoYXRNZXNzYWdlXG4gICAqL1xuICBhc3luYyBzaG93RGV2ZWxvcG1lbnRzVGFibGUgKGRldmVsb3BtZW50cykge1xuICAgIC8qKiBQcmVwYXJlIHRoZSBBcnJheSBkYXRhIHRvIGJlIHNob3duIHRvIHRoZSBlbmQgdXNlciBpbiBjaGF0ICovXG4gICAgZm9yIChjb25zdCBkZXZlbG9wbWVudCBvZiBkZXZlbG9wbWVudHMpIHtcbiAgICAgIGlmIChkZXZlbG9wbWVudC5zcGVjaWFsaXphdGlvbikge1xuICAgICAgICBkZXZlbG9wbWVudC5uYW1lID0gYCR7ZGV2ZWxvcG1lbnQuc3BlY2lhbGl6YXRpb259ICgke2RldmVsb3BtZW50Lm5hbWV9KWBcbiAgICAgIH1cbiAgICAgIGlmIChkZXZlbG9wbWVudC5nYWluID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAgIGRldmVsb3BtZW50LmdhaW4gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWFya2VkRm9yRGV2ZWxvcG1lbnQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGV2ZWxvcG1lbnQuZ2FpbiA9IGArJHtkZXZlbG9wbWVudC5nYWlufSAke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Qb2ludHMnXG4gICAgICAgICl9YFxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB0ZW1wbGF0ZSA9ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svZGV2ZWxvcG1lbnQuaHRtbCdcbiAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGVtcGxhdGUsIHsgZGV2ZWxvcG1lbnRzIH0pXG4gICAgcmV0dXJuIGF3YWl0IENoYXRNZXNzYWdlLmNyZWF0ZSh7XG4gICAgICB1c2VyOiBnYW1lLnVzZXIuaWQsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHsgYWN0b3I6IHRoaXMuYWN0b3IgfSksXG4gICAgICBmbGF2b3I6IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuR2FpbnNGb3JSZWFkaW5nJywgeyBib29rOiB0aGlzLm5hbWUgfSksXG4gICAgICBjb250ZW50OiBodG1sXG4gICAgfSlcbiAgfVxuXG4gIGFzeW5jIGF0dGVtcHRTcGVsbExlYXJuaW5nIChpZCkge1xuICAgIGlmICghdGhpcy5pc093bmVkKSB7XG4gICAgICAvKiogVGhpcyBpcyBub3Qgb3duZWQgYnkgYW55IEFjdG9yICovXG4gICAgICByZXR1cm4gdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90T3duZWQnKSlcbiAgICB9XG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbml0aWFsUmVhZGluZykge1xuICAgICAgLyoqIEFjdG9yIGRpZCBub3QgcGVyZm9ybWVkIGFuIGluaXRpYWwgcmVhZGluZyBmaXJzdCAqL1xuICAgICAgcmV0dXJuIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuSW5pdGlhbFJlYWRpbmdOZWVkZWQnLCB7XG4gICAgICAgICAgYWN0b3I6IHRoaXMuYWN0b3IubmFtZSxcbiAgICAgICAgICBib29rOiB0aGlzLm5hbWVcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICB9XG4gICAgY29uc3Qgc3BlbGwgPSB0aGlzLnN5c3RlbS5zcGVsbHMuZmluZChzcGVsbCA9PiB7XG4gICAgICByZXR1cm4gc3BlbGwuX2lkID09PSBpZFxuICAgIH0pXG4gICAgaWYgKHNwZWxsKSB7XG4gICAgICBjb25zdCBjaGVjayA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgY2hlY2suYWN0b3IgPSB0aGlzLmFjdG9yXG4gICAgICBjaGVjay5kaWZmaWN1bHR5ID0gQ29DN0NoZWNrLmRpZmZpY3VsdHlMZXZlbC5oYXJkXG4gICAgICBjaGVjay5wYXJlbnQgPSB0aGlzLnV1aWRcbiAgICAgIGNoZWNrLmZsYXZvciA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuTGVhcm5TcGVsbEF0dGVtcHQnLCB7XG4gICAgICAgIGJvb2s6IHRoaXMubmFtZSxcbiAgICAgICAgc3BlbGw6IHNwZWxsLm5hbWVcbiAgICAgIH0pXG4gICAgICBjaGVjay5jb250ZXh0ID0gJ1NQRUxMX0xFQVJOSU5HJ1xuICAgICAgY2hlY2suc3BlbGwgPSBzcGVsbFxuICAgICAgYXdhaXQgY2hlY2sucm9sbENoYXJhY3RlcmlzdGljKCdpbnQnKVxuICAgICAgYXdhaXQgY2hlY2sudG9NZXNzYWdlKClcbiAgICB9XG4gIH1cblxuICAvKiogTGlzdGVuIHRvIGNoYW5nZXMgb24gdGhlIGNoZWNrIGNhcmQgKi9cbiAgYXN5bmMgdXBkYXRlUm9sbCAocm9sbCkge1xuICAgIGNvbnN0IGNoZWNrID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGwpXG5cbiAgICAvKiogV2lsbCBrbm93IGlmIHVzZXIgcHVzaCB0aGUgcm9sbCBvciBzcGVuZCBMdWNrICovXG4gICAgaWYgKGNoZWNrLnBhc3NlZCkge1xuICAgICAgaWYgKGNoZWNrLmNvbnRleHQgPT09ICdJTklUSUFMX1JFQURJTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50SW5pdGlhbFJlYWRpbmcoKVxuICAgICAgfSBlbHNlIGlmIChjaGVjay5jb250ZXh0ID09PSAnU1BFTExfTEVBUk5JTkcnKSB7XG4gICAgICAgIHJldHVybiBhd2FpdCB0aGlzLmdyYW50U3BlbGxMZWFybmluZyhjaGVjay5zcGVsbClcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDaGF0TWVzc2FnZSwgZGVlcENsb25lLCBGb3JtRGF0YUV4dGVuZGVkLCBmb3VuZHJ5LCBmcm9tVXVpZCwgZ2FtZSwgSG9va3MsIG1lcmdlT2JqZWN0LCByZW5kZXJUZW1wbGF0ZSwgc29ja2V0bGliLCB1aSAqL1xuXG5jb25zdCBFQ0NfQ0xBU1MgPSAnZW5oYW5jZWQtY2hhdC1jYXJkJ1xuXG5jb25zdCBQRVJNSVNTSU9OX1RZUEUgPSB7XG4gIEdNOiAnZ20nLCAvLyB1c2VyIGlzIEdNXG4gIE5PVF9HTTogJyFnbScsIC8vIHVzZXIgaXMgTk9UIGdtIChoaWRlIHRvIEdNIGluIGNhc2Ugb2YgdmlzaWJpbGl0eSlcbiAgU1BFQUtFUjogJ3NwZWFrZXInLCAvLyB0aGUgc3BlYWtlciBpcyBhbiBhY3RvciBjb250cm9sZWQvb3duZWQgYnkgdGhlIHVzZXJcbiAgVVNFUjogJ3VzZXInLCAvLyB0aGUgdXNlciBpcyB0aGUgbWVzc2FnZSdzIGF1dGhvclxuICBFVkVSWU9ORTogJ2FsbCcsIC8vIGVxdWl2YWxlbnQgdG8gZW1wdHkgc3RyaW5nXG4gIEJMQUNLTElTVDogJ2JsYWNrbGlzdCcgLy8gaW52ZXJ0IHRoZSBsb2dpY1xufVxuXG5jb25zdCBTVEFURSA9IHtcbiAgT046ICdzd2l0Y2hlZC1vbicsXG4gIE9GRjogJ3N3aXRjaGVkLW9mZidcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGluaXRFQ0MgKC4uLmNhcmRjbGFzcykge1xuICAvLyBIb29rcy5vbmNlKCdpbml0JywgZnVuY3Rpb24gKCkge1xuICAvLyB9KVxuXG4gIEhvb2tzLm9uKCdyZW5kZXJDaGF0TG9nJywgKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLmluamVjdENTUyhhcHAsIGh0bWwsIGRhdGEpXG4gIClcblxuICBIb29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBmdW5jdGlvbiAoKSB7XG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkY2xhc3MpXG4gICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5zb2NrZXQgPSBzb2NrZXRsaWIucmVnaXN0ZXJTeXN0ZW0oZ2FtZS5zeXN0ZW0uaWQpIC8vIFNvY2tldCBpcyBhdHRhY2hlZCB0byBjdXJyZW50IHN5c3RlbVxuICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCd1cGRhdGVNZXNzYWdlJywgdXBkYXRlTWVzc2FnZSlcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignR01VcGRhdGUnLCBHTVVwZGF0ZSlcbiAgICBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5yZWdpc3RlcignYWR2aXNlJywgYWR2aXNlKVxuICAgIC8vIEVuaGFuY2VkQ2hhdENhcmRMaWIuc29ja2V0LnJlZ2lzdGVyKCdnbXRyYWRlaXRlbXRvJywgZ210cmFkZWl0ZW10bylcbiAgfSlcblxuICBIb29rcy5vbigncmVuZGVyQ2hhdE1lc3NhZ2UnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICAgIEVuaGFuY2VkQ2hhdENhcmQuYmluZExpc3RlbmVycyhodG1sKVxuICApXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZU1lc3NhZ2UgKG1lc3NhZ2VJZCwgbmV3Q29udGVudCkge1xuICBjb25zdCBjaGF0TWVzc2FnZSA9IGdhbWUubWVzc2FnZXMuZ2V0KG1lc3NhZ2VJZClcblxuICBhd2FpdCBjaGF0TWVzc2FnZS51cGRhdGUoe1xuICAgIGNvbnRlbnQ6IG5ld0NvbnRlbnRcbiAgfSlcbn1cblxuYXN5bmMgZnVuY3Rpb24gR01VcGRhdGUgKGRhdGEsIG9wdGlvbnMsIGNhcmRDbGFzc05hbWUsIG1lc3NhZ2VJZCA9IHVuZGVmaW5lZCkge1xuICBjb25zdCBjYXJkID0gYXdhaXQgRW5oYW5jZWRDaGF0Q2FyZC5mcm9tRGF0YShcbiAgICBkYXRhLFxuICAgIG9wdGlvbnMsXG4gICAgY2FyZENsYXNzTmFtZSxcbiAgICBtZXNzYWdlSWRcbiAgKVxuICBhd2FpdCBjYXJkLkdNVXBkYXRlKClcbiAgLy8gY29uc3QgZGlmZiA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdCggZGF0YSwgY2FyZC50b09iamVjdCgpKVxuICByZXR1cm4gY2FyZC50b09iamVjdCgpXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkdmlzZSAoKSB7fVxuXG5jbGFzcyBFbmhhbmNlZENoYXRDYXJkTGliIHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHRoaXMudHlwZXMgPSBuZXcgTWFwKClcbiAgICB0aGlzLnNvY2tldCA9IG51bGxcbiAgICAvLyB0aGlzLmVuaGFuY2VkQ2hhdENhcmRDbGFzcyA9IEVuaGFuY2VkQ2hhdENhcmRcbiAgfVxuXG4gIHN0YXRpYyBpbmplY3RDU1MgKCkge1xuICAgIGxldCBzdHlsZSA9ICQoJ2hlYWQnKS5maW5kKCdzdHlsZScpXG4gICAgaWYgKCFzdHlsZT8ubGVuZ3RoKSB7XG4gICAgICAkKCdoZWFkJykuYXBwZW5kKCQoJzxzdHlsZSAgdHlwZT1cInRleHQvY3NzXCI+PC9zdHlsZT4nKSlcbiAgICAgIHN0eWxlID0gJCgnaGVhZCcpLmZpbmQoJ3N0eWxlJylcbiAgICB9XG4gICAgc3R5bGUuYXBwZW5kKFxuICAgICAgYC5lY2MtcmVzdHJpY3RlZCB7Y29sb3I6IHJlZH1cbiAgICAuZWNjLXJlc3RyaWN0ZWQ6aG92ZXIge2N1cnNvcjogbm90LWFsbG93ZWR9YFxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBzZXQgc29ja2V0ICh4KSB7XG4gICAgaWYgKCFnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliKSB7XG4gICAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliID0gbmV3IEVuaGFuY2VkQ2hhdENhcmRMaWIoKVxuICAgIH1cbiAgICBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldCA9IHhcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc29ja2V0ICgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ0VDQyBub3QgSW5pdGlhbGl6ZWQnKVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdFQ0Mgbm8gc29ja2V0JylcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG4gICAgcmV0dXJuIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIuc29ja2V0XG4gIH1cblxuICBzdGF0aWMgZ2V0IHR5cGVzICgpIHtcbiAgICBpZiAoIWdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIpIHtcbiAgICAgIGdhbWUuZW5oYW5jZWRDaGF0Q2FyZHNMaWIgPSBuZXcgRW5oYW5jZWRDaGF0Q2FyZExpYigpXG4gICAgfVxuICAgIHJldHVybiBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnR5cGVzXG4gIH1cblxuICBzdGF0aWMgcmVnaXN0ZXIgKGNhcmRDb25zdHJ1Y3RvcnMpIHtcbiAgICBjYXJkQ29uc3RydWN0b3JzLmZvckVhY2goY2FyZENvbnN0cnVjdG9yID0+IHtcbiAgICAgIGlmICghRW5oYW5jZWRDaGF0Q2FyZExpYi50eXBlcy5nZXQoY2FyZENvbnN0cnVjdG9yLm5hbWUpKSB7XG4gICAgICAgIEVuaGFuY2VkQ2hhdENhcmRMaWIudHlwZXMuc2V0KGNhcmRDb25zdHJ1Y3Rvci5uYW1lLCBjYXJkQ29uc3RydWN0b3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIC8vIHN0YXRpYyBnbV9vblRvZ2dsZSAoZGF0YSl7XG4gIC8vICAgdWkubm90aWZpY2F0aW9ucy5pbmZvKCAnZ21fb25Ub2dnbGUnKVxuICAvLyB9XG59XG5cbmZ1bmN0aW9uIHNldEJ5UGF0aCAob2JqLCBwYXRoLCB2YWx1ZSkge1xuICBjb25zdCBwYXJ0cyA9IHBhdGguc3BsaXQoJy4nKVxuICBsZXQgbyA9IG9ialxuICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBpZiAoIW9bcGFydHNbaV1dKSBvW3BhcnRzW2ldXSA9IHt9XG4gICAgICBvID0gb1twYXJ0c1tpXV1cbiAgICB9XG4gIH1cblxuICBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXSA9IHZhbHVlXG59XG5cbmZ1bmN0aW9uIGdldEJ5UGF0aCAob2JqLCBwYXRoKSB7XG4gIGNvbnN0IHBhcnRzID0gcGF0aC5zcGxpdCgnLicpXG4gIGxldCBvID0gb2JqXG4gIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGlmICghb1twYXJ0c1tpXV0pIHJldHVybiB1bmRlZmluZWRcbiAgICAgIG8gPSBvW3BhcnRzW2ldXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvW3BhcnRzW3BhcnRzLmxlbmd0aCAtIDFdXVxufVxuXG5leHBvcnQgY2xhc3MgRW5oYW5jZWRDaGF0Q2FyZCB7XG4gIC8vIHN0YXRpYyByZWdpc3RlciAoY2FyZENvbnN0cnVjdG9yKSB7XG4gIC8vICAgRW5oYW5jZWRDaGF0Q2FyZExpYi5yZWdpc3RlcihjYXJkQ29uc3RydWN0b3IpXG4gIC8vIH1cblxuICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9LCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLmRhdGEgPSBkYXRhXG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MpIHRoaXMuZGF0YS5mbGFncyA9IHt9XG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsZWQgb25seSBvbmNlIGJlZm9yZSBzZW5kaW5nIG1lc3NhZ2UgdG8gY2hhdC5cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhc3luYyBpbml0aWFsaXplICgpIHt9XG5cbiAgZ2V0IG9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdCh0aGlzLmNvbnN0cnVjdG9yLmRlZmF1bHRPcHRpb25zLCB0aGlzLl9vcHRpb25zKVxuICB9XG5cbiAgc2V0IG9wdGlvbnMgKHgpIHtcbiAgICB0aGlzLl9vcHRpb25zID0geFxuICB9XG5cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLnRlbXBsYXRlXG4gIH1cblxuICBnZXQgY3NzQ2xhc3NlcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9ucy5jbGFzc2VzPy5qb2luKCcgJylcbiAgfVxuXG4gIGdldCBzcGVha2VyICgpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLm9vYykgcmV0dXJuIGdhbWUudXNlclxuICAgIGlmIChcbiAgICAgIHRoaXMub3B0aW9ucy5zcGVha2VyICYmXG4gICAgICBDaGF0TWVzc2FnZS5nZXRTcGVha2VyQWN0b3IodGhpcy5vcHRpb25zLnNwZWFrZXIpXG4gICAgKSB7XG4gICAgICByZXR1cm4gQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlckFjdG9yKHRoaXMub3B0aW9ucy5zcGVha2VyKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZS51c2VyXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICAvLyBhd2FpdCB0aGlzLmFzc2lnbk9iamVjdHMoKVxuICAgIHJldHVybiB7XG4gICAgICBjYXJkOiB0aGlzLFxuICAgICAgZmxhZ3M6IHRoaXMuZmxhZ3MsXG4gICAgICBkYXRhOiB0aGlzLnRvT2JqZWN0KCksXG4gICAgICBvcHRpb25zOiB0aGlzLm9wdGlvbnMsXG4gICAgICBjc3M6IHRoaXMuY3NzQ2xhc3NlcyxcbiAgICAgIHVzZXI6IGdhbWUudXNlcixcbiAgICAgIHNwZWFrZXI6IHRoaXMuc3BlYWtlclxuICAgIH1cbiAgfVxuXG4gIHRvT2JqZWN0ICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YSkgcmV0dXJuXG4gICAgY29uc3QgZGF0YSA9IHt9XG4gICAgZm9yIChjb25zdCBrIG9mIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkpIHtcbiAgICAgIGNvbnN0IHYgPSB0aGlzLmRhdGFba11cbiAgICAgIGlmICh2IGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgIGRhdGFba10gPSB2LnRvT2JqZWN0ID8gdi50b09iamVjdCgpIDogZGVlcENsb25lKHYpXG4gICAgICB9IGVsc2UgZGF0YVtrXSA9IHZcbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIGFzeW5jIHRvTWVzc2FnZSAob3B0aW9ubmFsQ2hhdERhdGEgPSB7fSkge1xuICAgIC8vIE1hcCBlY2MgY2FyZCB0eXBlIGlmIG5vdCByZWdpc3RlcmVkIGFscmVhZHlcbiAgICAvLyB0aGlzLnJlZ2lzdGVyRUNDQ2xhc3MoKVxuXG4gICAgYXdhaXQgdGhpcy5pbml0aWFsaXplKClcblxuICAgIC8vIFB1Ymxpc2ggYnkgY3VycmVudCB1c2VyIGJ5IGRlZmF1bHQgdW5sZXNzIG9wdGlvbnMuR01jaGF0Q2FyZFxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLmdldERhdGEoKVxuICAgIGNvbnN0IGh0bWwgPSBhd2FpdCByZW5kZXJUZW1wbGF0ZSh0aGlzLnRlbXBsYXRlLCBkYXRhKVxuICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQoaHRtbClbMF1cbiAgICBpZiAodGhpcy5vcHRpb25zLmF0dGFjaE9iamVjdCkge1xuICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMub2JqZWN0RGF0YVN0cmluZylcbiAgICB9XG4gICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQuZWNjQ2xhc3MgPSB0aGlzLmNvbnN0cnVjdG9yLm5hbWVcbiAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLm9wdGlvbnMuY2xhc3NlcylcblxuICAgIGNvbnN0IHNwZWFrZXIgPVxuICAgICAgdGhpcy5vcHRpb25zLnNwZWFrZXIgJiYgIXRoaXMub3B0aW9ucy5vb2NcbiAgICAgICAgPyBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKHRoaXMub3B0aW9ucy5zcGVha2VyKVxuICAgICAgICA6IHt9XG5cbiAgICAvLyBjb25zdCB1c2VySWQgPSB0aGlzLm9wdGlvbnMudXNlcklkID8gdGhpcy5vcHRpb25zLnVzZXJJZCA6IGdhbWUudXNlci5pZFxuXG4gICAgY29uc3QgY2hhdERhdGEgPSBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KFxuICAgICAge1xuICAgICAgICAvLyB1c2VyOiB1c2VySWQsXG4gICAgICAgIHVzZXI6IGdhbWUudXNlci5pZCxcbiAgICAgICAgc3BlYWtlcixcbiAgICAgICAgZmxhdm9yOiBnYW1lLmkxOG4ubG9jYWxpemUodGhpcy5vcHRpb25zLnRpdGxlKSxcbiAgICAgICAgY29udGVudDogaHRtbENhcmRFbGVtZW50Lm91dGVySFRNTFxuICAgICAgfSxcbiAgICAgIG9wdGlvbm5hbENoYXREYXRhXG4gICAgKVxuXG4gICAgaWYgKFsnZ21yb2xsJywgJ2JsaW5kcm9sbCddLmluY2x1ZGVzKHRoaXMucm9sbE1vZGUpKSB7XG4gICAgICBjaGF0RGF0YS53aGlzcGVyID0gQ2hhdE1lc3NhZ2UuZ2V0V2hpc3BlclJlY2lwaWVudHMoJ0dNJylcbiAgICB9XG4gICAgaWYgKHRoaXMucm9sbE1vZGUgPT09ICdzZWxmcm9sbCcpIGNoYXREYXRhLndoaXNwZXIgPSBbZ2FtZS51c2VyLmlkXVxuICAgIGlmICh0aGlzLnJvbGxNb2RlID09PSAnYmxpbmRyb2xsJykgY2hhdERhdGEuYmxpbmQgPSB0cnVlXG5cbiAgICBDaGF0TWVzc2FnZS5jcmVhdGUoY2hhdERhdGEpLnRoZW4obXNnID0+IHtcbiAgICAgIHJldHVybiBtc2dcbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlQ2hhdENhcmQgKHsgYXR0YWNoT2JqZWN0ID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAvLyBUT0RPIHRoZSB3aG9sZSBmdW5jdGlvbiBoYXMgdG8gYmUgZXhlY3V0ZWQgYnkgR00gaWYgb3B0aW9ucy5HTWNoYXRDYXJkXG4gICAgaWYgKHRoaXMub3B0aW9ucy5jb21wdXRlKSBhd2FpdCB0aGlzLmxvY2FsQ29tcHV0ZSgpXG4gICAgaWYgKHRoaXMub3B0aW9ucy5HTVVwZGF0ZSkgYXdhaXQgdGhpcy5FeGVjdXRlR01VcGRhdGUoKVxuICAgIGlmICghdGhpcy5tZXNzYWdlSWQpIHtcbiAgICAgIHRoaXMudG9NZXNzYWdlKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuZ2V0RGF0YSgpXG4gICAgICBjb25zdCBodG1sID0gYXdhaXQgcmVuZGVyVGVtcGxhdGUodGhpcy50ZW1wbGF0ZSwgZGF0YSlcbiAgICAgIGNvbnN0IGh0bWxDYXJkRWxlbWVudCA9ICQucGFyc2VIVE1MKGh0bWwpWzBdXG5cbiAgICAgIC8vIEF0dGFjaCB0aGUgb2JqZWN0IHRvIHRoZSBtZXNzYWdlLlxuICAgICAgaWYgKGF0dGFjaE9iamVjdCAmJiAhdGhpcy5kYXRhLkVFQ19BQ1RJT04/LmRldGFjaERhdGEpIHtcbiAgICAgICAgaHRtbENhcmRFbGVtZW50LmRhdGFzZXQub2JqZWN0ID0gZXNjYXBlKHRoaXMub2JqZWN0RGF0YVN0cmluZylcbiAgICAgIH1cbiAgICAgIGh0bWxDYXJkRWxlbWVudC5kYXRhc2V0LmVjY0NsYXNzID0gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgICBodG1sQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZCguLi50aGlzLm9wdGlvbnMuY2xhc3NlcylcblxuICAgICAgLy8gVXBkYXRlIHRoZSBtZXNzYWdlLlxuICAgICAgZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi5zb2NrZXQuZXhlY3V0ZUFzR00oXG4gICAgICAgICd1cGRhdGVNZXNzYWdlJyxcbiAgICAgICAgdGhpcy5tZXNzYWdlSWQsXG4gICAgICAgIGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUxcbiAgICAgIClcbiAgICAgIC8vIGNvbnN0IGNoYXRNZXNzYWdlID0gZ2FtZS5tZXNzYWdlcy5nZXQodGhpcy5tZXNzYWdlSWQpXG5cbiAgICAgIC8vIGNvbnN0IG1zZyA9IGF3YWl0IGNoYXRNZXNzYWdlLnVwZGF0ZSh7IC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIGNvbnRlbnQ6IGh0bWxDYXJkRWxlbWVudC5vdXRlckhUTUwgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxuICAgICAgLy8gfSkgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxuICAgICAgLy8gYXdhaXQgdWkuY2hhdC51cGRhdGVNZXNzYWdlKG1zZywgZmFsc2UpIC8vRGlzcGF0Y2ggcmVxdWVzdCBieSBzb2NrZXRcbiAgICAgIC8vIHJldHVybiBtc2cgLy9EaXNwYXRjaCByZXF1ZXN0IGJ5IHNvY2tldFxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgLy8gaHRtbC5vbihcbiAgICAvLyAgICdjbGljaycsXG4gICAgLy8gICBgLiR7RUNDX0NMQVNTfSAuZWNjLXJhZGlvLXN3aXRjaGAsXG4gICAgLy8gICB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpXG4gICAgLy8gKVxuICAgIGh0bWwub24oJ2NoYW5nZScsICdpbnB1dCxzZWxlY3QsdGV4dGFyZWEnLCB0aGlzLl9vbkNoYW5nZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gLmVjYy1zd2l0Y2hgLCB0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2NsaWNrJywgYC4ke0VDQ19DTEFTU30gLnN1Ym1pdGAsIHRoaXMuX29uU3VibWl0LmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignZm9jdXNvdXQnLCBgLiR7RUNDX0NMQVNTfSBpbnB1dGAsIHRoaXMuX29uQ2hhbmdlLmJpbmQodGhpcykpXG4gICAgaHRtbC5vbignY2xpY2snLCBgLiR7RUNDX0NMQVNTfSBidXR0b25gLCB0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwub24oJ2tleWRvd24nLCBgLiR7RUNDX0NMQVNTfSBmb3JtYCwgdGhpcy5fb25LZXkuYmluZCh0aGlzKSlcblxuICAgIC8vIGNvbnN0IHZpc2kgPSBodG1sLmZpbmQoJ1tkYXRhLWVjYy12aXNpYmlsaXR5XScpXG4gICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB2aXNpLmxlbmd0aDsgaSsrKSB7XG4gICAgLy8gICBjb25zdCBlbCA9IHZpc2lbaV07XG4gICAgLy8gICBhd2FpdCB0aGlzLnNldFZpc2liaWxpdHkoZWwpXG5cbiAgICAvLyB9XG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnW2RhdGEtZWNjLXZpc2liaWxpdHldJylcbiAgICAgIC5lYWNoKGFzeW5jIChpLCBlbCkgPT4gYXdhaXQgdGhpcy5zZXRWaXNpYmlsaXR5KGVsKSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnW2RhdGEtZWNjLXBlcm1pc3Npb25zXScpXG4gICAgICAuZWFjaChhc3luYyAoaSwgZWwpID0+IGF3YWl0IHRoaXMuc2V0UGVybWlzc2lvbihlbCkpXG4gICAgaHRtbC5maW5kKGAuJHtFQ0NfQ0xBU1N9IC5lY2Mtc3dpdGNoYCkuZWFjaCgoaSwgZWwpID0+IHRoaXMuc2V0U3RhdGUoZWwpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKGAuJHtFQ0NfQ0xBU1N9IGlucHV0W3R5cGU9XCJyYWRpb1wiXWApXG4gICAgICAuZWFjaCgoaSwgZWwpID0+IHRoaXMuc2V0UmFkaW9TdGF0ZShlbCkpXG4gICAgLy8gaHRtbC5maW5kKGAuJHtFQ0NfQ0xBU1N9IC5lY2MtcmFkaW8tc3dpdGNoYCkuZWFjaCggKGksIGVsKSA9PiB0aGlzLnNldFN0YXRlKGVsKSlcbiAgfVxuXG4gIHNldFN0YXRlIChlbGVtZW50KSB7XG4gICAgaWYgKCFlbGVtZW50KSByZXR1cm5cbiAgICBpZiAoZWxlbWVudC5kYXRhc2V0LmZsYWcpIHtcbiAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZChcbiAgICAgICAgdGhpcy5mbGFnc1tlbGVtZW50LmRhdGFzZXQuZmxhZ10gPyBTVEFURS5PTiA6IFNUQVRFLk9GRlxuICAgICAgKVxuICAgIH1cbiAgICBpZiAoZWxlbWVudC5kYXRhc2V0Lm5hbWUpIHtcbiAgICAgIGNvbnN0IHZhbHVlID0gZ2V0QnlQYXRoKHRoaXMsIGVsZW1lbnQuZGF0YXNldC5uYW1lKVxuICAgICAgZWxlbWVudC5jbGFzc0xpc3QuYWRkKHZhbHVlID8gU1RBVEUuT04gOiBTVEFURS5PRkYpXG4gICAgfVxuICB9XG5cbiAgc2V0UmFkaW9TdGF0ZSAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudCB8fCAhZWxlbWVudC5uYW1lKSByZXR1cm5cbiAgICBjb25zdCBzcGxpdGVkID0gZWxlbWVudC5uYW1lLnNwbGl0KCcuJylcbiAgICBpZiAoc3BsaXRlZFswXS50b0xvd2VyQ2FzZSgpICE9PSAnZGF0YScpIHJldHVyblxuICAgIGlmICh0aGlzLmRhdGEgJiYgdHlwZW9mIHRoaXMuZGF0YVtzcGxpdGVkWzFdXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmICh0aGlzLmRhdGFbc3BsaXRlZFsxXV0gPT09IGVsZW1lbnQudmFsdWUpIHtcbiAgICAgICAgZWxlbWVudC5jaGVja2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIHNldFZpc2liaWxpdHkgKGVsZW1lbnQpIHtcbiAgICBpZiAoIWVsZW1lbnQuZGF0YXNldC5lY2NWaXNpYmlsaXR5KSByZXR1cm5cbiAgICBjb25zdCBjYW5Zb3VTZWUgPSBhd2FpdCB0aGlzLmhhc1Blcm0oZWxlbWVudC5kYXRhc2V0LmVjY1Zpc2liaWxpdHksIHRydWUpXG4gICAgaWYgKCFjYW5Zb3VTZWUpIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xuICB9XG5cbiAgYXN5bmMgc2V0UGVybWlzc2lvbiAoZWxlbWVudCkge1xuICAgIGlmICghZWxlbWVudC5kYXRhc2V0LmVjY1Blcm1pc3Npb25zKSByZXR1cm5cbiAgICBjb25zdCBjYW5Zb3VNb2QgPSBhd2FpdCB0aGlzLmhhc1Blcm0oZWxlbWVudC5kYXRhc2V0LmVjY1Blcm1pc3Npb25zKVxuICAgIGlmICghY2FuWW91TW9kKSB7XG4gICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2VjYy1yZXN0cmljdGVkJylcbiAgICAgIGlmICgkKGVsZW1lbnQpLmlzKCdpbnB1dCcpKSB7XG4gICAgICAgIGlmIChlbGVtZW50LnR5cGUgPT09ICdyYW5nZScpICQoZWxlbWVudCkuYXR0cignZGlzYWJsZWQnLCB0cnVlKVxuICAgICAgICBlbHNlICQoZWxlbWVudCkuYXR0cigncmVhZG9ubHknLCB0cnVlKVxuICAgICAgfVxuICAgICAgaWYgKCQoZWxlbWVudCkuaXMoJ3NlbGVjdCcpKSAkKGVsZW1lbnQpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSlcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIGN1cnJlbnQgdXNlciBhcyBwZXJtaXNzaW9uIGFnYWluc3QgYSBzdHJpbmcgb2YgYWxsb3dlZCBwZXJzb25zLlxuICAgKiBJZiB0aGUgc3RyaW5nIGlzIGVtcHR5IHBlcm1pc3Npb24gYXJlIGFsbCBncmFudGVkXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZXN0cmljdGVkVG8gICBBIHN0cmluZyBjb250YWluaW5nIHRoZSBzZXQgb2YgcGxheWVyIGFsbG93ZWQuIFZhbHVlIGNhbiBiZSBvd25lciwgZ20sIHBsYXllcnMsIHV1aWQgc2VwYXJhdGVkIGJ5IHNwYWNlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gdmlzaW9uICAgICAgICBpZiB0cnVlIGdtIHdpbGwgYmUgY29uc2lkZXJlZCBmb3IgcGVybWlzc2lvbnMuIGZhbHNlID0gZ20gaGFzIGFsd2F5cyByaWdodC4gdHJ1ZSBHTSBwZXJtaXNzaW9uIHdpbGwgYmUgY2hlY2tlZFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgaGFzUGVybSAocmVzdHJpY3RlZFRvLCB2aXNpb24gPSBmYWxzZSkge1xuICAgIGlmICghcmVzdHJpY3RlZFRvLmxlbmd0aCkgcmV0dXJuIHRydWVcbiAgICBsZXQgcGVybWlzc2lvbnNBcnJheSA9IHJlc3RyaWN0ZWRUby5zcGxpdCgnICcpXG4gICAgY29uc3Qgd2hpdGVMaXN0ID0gIXBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLkJMQUNLTElTVClcbiAgICBpZiAoIXdoaXRlTGlzdCkge1xuICAgICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKFxuICAgICAgICBlID0+IGUgIT09IFBFUk1JU1NJT05fVFlQRS5CTEFDS0xJU1RcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBpZiAoIXZpc2lvbikgcmV0dXJuIHRydWUgLy8gR00gY2FuIGFsd2F5cyBtb2RpZnkgZXZlcnl0aGluZyAhIE5haFxuICAgICAgaWYgKHBlcm1pc3Npb25zQXJyYXkuaW5jbHVkZXMoUEVSTUlTU0lPTl9UWVBFLkdNKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZSAmJiB3aGl0ZUxpc3RcbiAgICAgIH1cbiAgICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5OT1RfR00pKSB7XG4gICAgICAgIHJldHVybiBmYWxzZSB8fCAhd2hpdGVMaXN0XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGVybWlzc2lvbnNBcnJheSA9IHBlcm1pc3Npb25zQXJyYXkuZmlsdGVyKGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLkdNKVxuICAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihcbiAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLk5PVF9HTVxuICAgIClcblxuICAgIC8vICAgcmV0dXJuIGZhbHNlIHx8ICF3aGl0ZUxpc3QgLy9JZiBwYXNzIHRoZSBmaWx0ZXIgcmV0dXJuIGZhbHNlIHVubGVzcyBpdCdzIGEgYmxhY2tsaXN0XG4gICAgLy8gfSBlbHNlIHtcbiAgICAvLyAgIHBlcm1pc3Npb25zQXJyYXkgPSBwZXJtaXNzaW9uc0FycmF5LmZpbHRlcihlID0+IGUgIT0gUEVSTUlTU0lPTl9UWVBFLkdNKVxuICAgIC8vIH1cblxuICAgIGlmIChwZXJtaXNzaW9uc0FycmF5LmluY2x1ZGVzKFBFUk1JU1NJT05fVFlQRS5VU0VSKSkge1xuICAgICAgaWYgKHRoaXMubWVzc2FnZS5pc0F1dGhvcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0IC8vIGlzQXV0aG9yIHZzIHVzZXIuaXNPd25lciA/XG4gICAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLlVTRVJcbiAgICAgIClcbiAgICB9XG5cbiAgICBpZiAocGVybWlzc2lvbnNBcnJheS5pbmNsdWRlcyhQRVJNSVNTSU9OX1RZUEUuU1BFQUtFUikpIHtcbiAgICAgIGNvbnN0IHNwZWFrZXIgPSB0aGlzLm1lc3NhZ2UuZGF0YS5zcGVha2VyXG4gICAgICBpZiAoc3BlYWtlci50b2tlbiAmJiBzcGVha2VyLnNjZW5lKSB7XG4gICAgICAgIGNvbnN0IGFjdG9yID0gYXdhaXQgZnJvbVV1aWQoXG4gICAgICAgICAgYFNjZW5lLiR7c3BlYWtlci5zY2VuZX0uVG9rZW4uJHtzcGVha2VyLnRva2VufWBcbiAgICAgICAgKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICBpZiAoYWN0b3IuaXNPd25lcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc3BlYWtlci5hY3Rvcikge1xuICAgICAgICBjb25zdCBhY3RvciA9IGdhbWUuYWN0b3JzLmdldChzcGVha2VyLmFjdG9yKVxuICAgICAgICBpZiAoYWN0b3IpIHtcbiAgICAgICAgICBpZiAoYWN0b3IuaXNPd25lcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIGVsc2UgaWYgKHNwZWFrZXIudXNlcikge1xuICAgICAgLy8gICBpZiAoZ2FtZS51c2VyLmlkID09IHNwZWFrZXIudXNlcikgcmV0dXJuIHRydWUgJiYgd2hpdGVMaXN0XG4gICAgICAvLyB9XG4gICAgICBwZXJtaXNzaW9uc0FycmF5ID0gcGVybWlzc2lvbnNBcnJheS5maWx0ZXIoXG4gICAgICAgIGUgPT4gZSAhPT0gUEVSTUlTU0lPTl9UWVBFLlNQRUFLRVJcbiAgICAgIClcbiAgICB9XG4gICAgLy8gQWxsIGZpbHRlciBwYXNzZWQsIGFycmF5IHNob3VsZCBjb250YWlucyBvbmx5IHV1aWRzIG9yIGFjdG9yL3Rva2VuIGlkc1xuICAgIGlmIChwZXJtaXNzaW9uc0FycmF5Lmxlbmd0aCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwZXJtaXNzaW9uc0FycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHV1aWQgPSBwZXJtaXNzaW9uc0FycmF5W2ldXG4gICAgICAgIGxldCBhY3RvciA9IGF3YWl0IGZyb21VdWlkKHV1aWQpXG4gICAgICAgIGlmICghYWN0b3IpIGFjdG9yID0gZ2FtZS5hY3RvcnMuZ2V0KHV1aWQpXG4gICAgICAgIGlmIChhY3Rvcikge1xuICAgICAgICAgIHJldHVybiBhY3Rvci5pc093bmVyXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihgVW5hYmxlIHRvIGZpbmQgYWN0b3IgJHt1dWlkfWApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlIHx8ICF3aGl0ZUxpc3QgLy8gSWYgcGFzcyB0aGUgZmlsdGVyIHJldHVybiBmYWxzZSB1bmxlc3MgaXQncyBhIGJsYWNrbGlzdFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGJpbmRMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBjb25zdCBodG1sTWVzc2FnZUVsZW1lbnQgPSBodG1sWzBdXG4gICAgY29uc3QgaHRtbENhcmRFbGVtZW50ID0gaHRtbE1lc3NhZ2VFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke0VDQ19DTEFTU31gKVxuICAgIGlmICghaHRtbENhcmRFbGVtZW50KSByZXR1cm5cblxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCBFbmhhbmNlZENoYXRDYXJkLmZyb21IVE1MQ2FyZEVsZW1lbnQoaHRtbENhcmRFbGVtZW50KVxuICAgIGlmICghY2FyZCkgcmV0dXJuXG4gICAgY2FyZC5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICB9XG5cbiAgZ2V0IGZsYWdzICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmZsYWdzXG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gcmVhc3NpZ24gb2JqZWN0IGZyb20gdGhlIGRhdGEgc3RydWN0dXJlLlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgYXNzaWduT2JqZWN0cyAoKSB7fVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0byB1cGRhdGUgb2JqZWN0IGFmdGVyIGRhdGEgY2hhbmdlLlxuICAgKiBUaGlzIGlzIGNhbGxlZCBieSB0aGUgbG9jYWwgY2xpZW50XG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBhc3luYyBsb2NhbENvbXB1dGUgKCkge31cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdG8gdXBkYXRlIG9iamVjdCBhZnRlciBkYXRhIGNoYW5nZS5cbiAgICogVGhpcyBpcyBjYWxsZWQgYnkgb25lIG9mIHRoZSBHTSBjbGllbnRzLlxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgYXN5bmMgR01VcGRhdGUgKCkge31cblxuICBhc3luYyBFeGVjdXRlR01VcGRhdGUgKCkge1xuICAgIGNvbnN0IG5ld0RhdGEgPSBhd2FpdCBnYW1lLmVuaGFuY2VkQ2hhdENhcmRzTGliLnNvY2tldC5leGVjdXRlQXNHTShcbiAgICAgICdHTVVwZGF0ZScsXG4gICAgICB0aGlzLnRvT2JqZWN0KCksXG4gICAgICB0aGlzLl9vcHRpb25zLFxuICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgdGhpcy5tZXNzYWdlSWRcbiAgICApXG5cbiAgICB0aGlzLmRhdGEgPSBuZXdEYXRhXG4gICAgYXdhaXQgdGhpcy5hc3NpZ25PYmplY3RzKClcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50IHdpbGwgY2hlY2sgZm9yIGFuIGFjdGlvbiAoZGF0YS1hY3Rpb24pXG4gICAqIGlmIGEgbWV0aG9kIHdpdGggdGhhdCBuYW1lIGV4aXN0IGl0IHdpbGwgYmUgdHJpZ2dlcmVkLlxuICAgKi9cbiAgYXN5bmMgX29uQnV0dG9uIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcblxuICAgIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnIC8vIEF2b2lkIG11bHRpcGxlIHB1c2hcbiAgICBjb25zdCBhY3Rpb24gPSB0YXJnZXQuZGF0YXNldC5hY3Rpb25cblxuICAgIGxldCBmb3JtVXBkYXRlXG4gICAgbGV0IGFjdGlvblVwZGF0ZSA9IGZhbHNlXG5cbiAgICAvLyBpZiAoJ3N1Ym1pdCcgPT0gdGFyZ2V0LnR5cGUpIHtcbiAgICAvLyAgIGNvbnNvbGUud2FybignQnV0dG9uIGlzIGFsc28gYSBzdWJtaXQnKVxuICAgIC8vIH1cblxuICAgIC8vIFBlcmZvcm0gY2FyZCB1cGRhdGUgZmlyc3RcbiAgICBjb25zdCBjYXJkID0gdGFyZ2V0LmNsb3Nlc3QoYC4ke0VDQ19DTEFTU31gKVxuICAgIGlmIChjYXJkKSBmb3JtVXBkYXRlID0gdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgQ291bGQgbm90IGZpbmQgYSBFRUMgY2xhc3MgZm9yIHRoaXMgY2FyZDogJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9YFxuICAgICAgKVxuICAgIH1cblxuICAgIGNvbnN0IG9yaWdpbmFsRGlzcGxheVN0eWxlID0gdGFyZ2V0LnN0eWxlLmRpc3BsYXlcblxuICAgIGlmICghYWN0aW9uKSB7XG4gICAgICBjb25zb2xlLndhcm4oJ25vIGFjdGlvbiBhc3NvY2lhdGVkIHdpdGggdGhpcyBidXR0b24nKVxuICAgICAgaWYgKCFmb3JtVXBkYXRlKSByZXR1cm4gLy8gSWYgdGhlIGZvcm0gd2FzIHVwZGF0ZWQgd2Ugc3RpbGwgdXBkYXRlIHRoZSBjYXJkXG4gICAgfVxuICAgIGlmICghdGhpc1thY3Rpb25dKSB7XG4gICAgICBjb25zb2xlLndhcm4oYG5vICR7YWN0aW9ufSBhY3Rpb24gZm91bmQgZm9yIHRoaXMgY2FyZGApXG4gICAgICBpZiAoIWZvcm1VcGRhdGUpIHJldHVybiAvLyBJZiB0aGUgZm9ybSB3YXMgdXBkYXRlZCB3ZSBzdGlsbCB1cGRhdGUgdGhlIGNhcmRcbiAgICB9XG4gICAgaWYgKHRoaXNbYWN0aW9uXSkge1xuICAgICAgYWN0aW9uVXBkYXRlID0gYXdhaXQgdGhpc1thY3Rpb25dKHsgZXZlbnQsIHVwZGF0ZUNhcmQ6IGZhbHNlIH0pXG4gICAgfVxuXG4gICAgaWYgKGZvcm1VcGRhdGUgfHwgYWN0aW9uVXBkYXRlKSBhd2FpdCB0aGlzLnVwZGF0ZUNoYXRDYXJkKClcbiAgICBlbHNlIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gb3JpZ2luYWxEaXNwbGF5U3R5bGVcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqIEByZXR1cm5zIGZhbHNlIGlmIGtleSBpcyBlbnRlciB0byBhdm9pZCBnbG9iYWwgc3VibWlzc2lvblxuICAgKi9cbiAgX29uS2V5IChldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFbnRlcicpIHRoaXMuX29uU3VibWl0KGV2ZW50KVxuICAgIHJldHVybiBldmVudC5rZXkgIT09ICdFbnRlcidcbiAgfVxuXG4gIF9vbkNoYW5nZSAoZXZlbnQpIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLnN1Ym1pdE9uQ2hhbmdlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fb25TdWJtaXQoZXZlbnQpXG4gICAgfVxuICB9XG5cbiAgX29uU3VibWl0IChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCB0YWdOYW1lID0gdGFyZ2V0LnRhZ05hbWVcbiAgICBpZiAodGFnTmFtZSA9PT0gJ0JVVFRPTicgJiYgJ2FjdGlvbicgaW4gdGFyZ2V0LmRhdGFzZXQpIHJldHVybiAvL1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuICAgIGNvbnN0IGNhcmQgPSB0YXJnZXQuY2xvc2VzdChgLiR7RUNDX0NMQVNTfWApXG4gICAgaWYgKCFjYXJkKSByZXR1cm5cbiAgICBjb25zdCB1cGRhdGVzID0gdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgaWYgKHVwZGF0ZXMpIHRoaXMudXBkYXRlQ2hhdENhcmQoKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIHRoZSBmb3JtIGZyb20gdGhlIGNhcmQgYW5kIHVwZGF0ZSB0aGUgZGF0YSBzdHJ1Y3R1cmVcbiAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gY2FyZFxuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgX3VwZGF0ZSAoY2FyZCkge1xuICAgIGNvbnN0IGZvcm1zID0gY2FyZC5xdWVyeVNlbGVjdG9yQWxsKCdmb3JtJylcbiAgICBsZXQgdXBkYXRlcyA9IGZhbHNlXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmb3Jtcy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgZm9ybSA9IGZvcm1zW2ldXG4gICAgICBjb25zdCBmZCA9IG5ldyBGb3JtRGF0YUV4dGVuZGVkKGZvcm0pXG4gICAgICBjb25zdCBkYXRhID0gZmQub2JqZWN0XG4gICAgICAvLyBkYXRhID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KFxuICAgICAgLy8gICB0aGlzLmRhdGEsXG4gICAgICAvLyAgIGZvdW5kcnkudXRpbHMuZXhwYW5kT2JqZWN0KGRhdGEpXG4gICAgICAvLyApXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhKSkge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IGdldEJ5UGF0aCh0aGlzLCBrZXkpXG4gICAgICAgIGlmICghKG9sZFZhbHVlID09PSB2YWx1ZSkpIHtcbiAgICAgICAgICBzZXRCeVBhdGgodGhpcywga2V5LCB2YWx1ZSlcbiAgICAgICAgICB1cGRhdGVzID0gdHJ1ZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1cGRhdGVzXG4gIH1cblxuICBnZXQgbWVzc2FnZSAoKSB7XG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlXG4gICAgaWYgKHRoaXMuX21lc3NhZ2VJZCkgcmV0dXJuIGdhbWUubWVzc2FnZXMuZ2V0KHRoaXMuX21lc3NhZ2VJZClcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBzZXQgbWVzc2FnZSAoeCkge1xuICAgIHRoaXMuX21lc3NhZ2UgPSB4XG4gIH1cblxuICBnZXQgbWVzc2FnZUlkICgpIHtcbiAgICBpZiAodGhpcy5fbWVzc2FnZUlkKSByZXR1cm4gdGhpcy5fbWVzc2FnZUlkXG4gICAgaWYgKHRoaXMuX21lc3NhZ2UpIHJldHVybiB0aGlzLl9tZXNzYWdlLmlkXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgc2V0IG1lc3NhZ2VJZCAoeCkge1xuICAgIHRoaXMuX21lc3NhZ2VJZCA9IHhcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhdHRhY2hPYmplY3Q6IHRydWUsXG4gICAgICBjbGFzc2VzOiBbRUNDX0NMQVNTXSxcbiAgICAgIGV4Y2x1ZGU6IFtdLFxuICAgICAgZXhjbHVkZVN0YXJ0V2l0aDogJ18nLFxuICAgICAgc3VibWl0T25DaGFuZ2U6IHRydWUsXG4gICAgICBzcGVha2VyOiBDaGF0TWVzc2FnZS5nZXRTcGVha2VyKCksXG4gICAgICBvb2M6IGZhbHNlLCAvLyAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLm9vYz1mYWxzZV0gIFVzZSB0aGUgc3BlYWtlci9nZXRzcGVha2VyLiBpZiB0cnVlIHVzZSB0aGUgdXNlciBpbnN0ZWFkXG4gICAgICBjb21wdXRlOiB0cnVlLCAvLyAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMuY29tcHV0ZS5sb2NhbD10cnVlXSBpbnZvcXVlIHRoZSBjb21wdXRlIG1ldGhvZCBhcyBsb2NhbCB1c2VyID0+IG5lZWQgdG8gb3ZlcnJpZGUgbG9jYWxDb21wdXRlXG4gICAgICBHTVVwZGF0ZTogZmFsc2UgLy8gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNvbXB1dGUuR009ZmFsc2VdIGludm9xdWUgdGhlIEdNVXBkYXRlIG1ldGhvZCBhcyBHTSA9PiBuZWVkIHRvIG92ZXJyaWRlIEdNVXBkYXRlXG4gICAgfVxuICB9XG5cbiAgZ2V0IG9iamVjdERhdGFTdHJpbmcgKCkge1xuICAgIGNvbnN0IHNhdmVEYXRhID0ge1xuICAgICAgZGF0YTogdGhpcy5kYXRhLFxuICAgICAgb3B0aW9uczogdGhpcy5fb3B0aW9uc1xuICAgIH1cbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoc2F2ZURhdGEsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHJldHVybiB1bmRlZmluZWRcbiAgICAgIGlmICh0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgcmV0dXJuIHZhbHVlXG4gICAgfSlcbiAgfVxuXG4gIGdldCByb2xsTW9kZSAoKSB7XG4gICAgaWYgKCF0aGlzLl9yb2xsTW9kZSkgdGhpcy5fcm9sbE1vZGUgPSBnYW1lLnNldHRpbmdzLmdldCgnY29yZScsICdyb2xsTW9kZScpXG4gICAgcmV0dXJuIHRoaXMuX3JvbGxNb2RlXG4gIH1cblxuICBzZXQgcm9sbE1vZGUgKHgpIHtcbiAgICBpZiAoeCA9PT0gZmFsc2UpIHRoaXMuX3JvbGxNb2RlID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ2NvcmUnLCAncm9sbE1vZGUnKVxuICAgIHRoaXMuX3JvbGxNb2RlID0geFxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGZyb21NZXNzYWdlSWQgKG1lc3NhZ2VJZCkge1xuICAgIGNvbnN0IG1lc3NhZ2UgPSBnYW1lLm1lc3NhZ2VzLmdldChtZXNzYWdlSWQpXG4gICAgaWYgKCFtZXNzYWdlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgY2FyZCA9IGF3YWl0IHRoaXMuZnJvbU1lc3NhZ2UobWVzc2FnZSlcbiAgICBjYXJkLm1lc3NhZ2VJZCA9IG1lc3NhZ2VJZFxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbU1lc3NhZ2UgKG1lc3NhZ2UpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9ICQobWVzc2FnZS5kYXRhLmNvbnRlbnQpWzBdXG4gICAgaWYgKCFjYXJkRWxlbWVudCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGNhcmQgPSBhd2FpdCB0aGlzLmZyb21IVE1MQ2FyZEVsZW1lbnQoY2FyZEVsZW1lbnQpXG4gICAgY2FyZC5tZXNzYWdlID0gbWVzc2FnZVxuICAgIHJldHVybiBjYXJkXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgZnJvbUhUTUxDYXJkRWxlbWVudCAoaHRtbWxDYXJkKSB7XG4gICAgaWYgKCFodG1tbENhcmQpIHJldHVyblxuICAgIGlmICghaHRtbWxDYXJkLmRhdGFzZXQuZWNjQ2xhc3MpIHJldHVyblxuICAgIGlmICghaHRtbWxDYXJkLmRhdGFzZXQub2JqZWN0KSByZXR1cm5cbiAgICBjb25zdCBjYXJkRGF0YSA9IEpTT04ucGFyc2UodW5lc2NhcGUoaHRtbWxDYXJkLmRhdGFzZXQub2JqZWN0KSlcbiAgICBjb25zdCBtZXNzYWdlID0gaHRtbWxDYXJkLmNsb3Nlc3QoJy5tZXNzYWdlJylcbiAgICBjb25zdCBtZXNzYWdlSWQgPSBtZXNzYWdlPy5kYXRhc2V0Py5tZXNzYWdlSWRcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLmZyb21EYXRhKFxuICAgICAgY2FyZERhdGEuZGF0YSxcbiAgICAgIGNhcmREYXRhLm9wdGlvbnMsXG4gICAgICBodG1tbENhcmQuZGF0YXNldC5lY2NDbGFzcyxcbiAgICAgIG1lc3NhZ2VJZFxuICAgIClcbiAgfVxuXG4gIHN0YXRpYyBhc3luYyBmcm9tRGF0YSAoZGF0YSwgb3B0aW9ucywgY2FyZENsYXNzTmFtZSwgbWVzc2FnZUlkID0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgQ2FyZENsYXNzID0gZ2FtZS5lbmhhbmNlZENoYXRDYXJkc0xpYi50eXBlcy5nZXQoY2FyZENsYXNzTmFtZSlcblxuICAgIGlmICghQ2FyZENsYXNzKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBVbmtub3duIGNoYXQgY2FyZCB0eXBlOiAke2NhcmRDbGFzc05hbWV9YClcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBjYXJkID0gbmV3IENhcmRDbGFzcyhkYXRhLCBvcHRpb25zKVxuICAgIGlmIChtZXNzYWdlSWQpIGNhcmQubWVzc2FnZUlkID0gbWVzc2FnZUlkXG4gICAgYXdhaXQgY2FyZC5hc3NpZ25PYmplY3RzKClcbiAgICByZXR1cm4gY2FyZFxuICB9XG5cbiAgc2V0RGF0YSAobmFtZSkge1xuICAgIGlmICghbmFtZSAmJiAhKCQudHlwZShuYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICBzZXRCeVBhdGgodGhpcywgbmFtZSwgdHJ1ZSlcbiAgfVxuXG4gIHVuc2V0RGF0YSAobmFtZSkge1xuICAgIGlmICghbmFtZSAmJiAhKCQudHlwZShuYW1lKSA9PT0gJ3N0cmluZycpKSByZXR1cm5cbiAgICBzZXRCeVBhdGgodGhpcywgbmFtZSwgZmFsc2UpXG4gIH1cblxuICB0b2dnbGVEYXRhIChuYW1lKSB7XG4gICAgaWYgKCFuYW1lICYmICEoJC50eXBlKG5hbWUpID09PSAnc3RyaW5nJykpIHJldHVyblxuICAgIGNvbnN0IHZhbHVlID0gZ2V0QnlQYXRoKHRoaXMsIG5hbWUpXG4gICAgc2V0QnlQYXRoKHRoaXMsIG5hbWUsICF2YWx1ZSlcbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICAvLyBjb25zdCBhbnN3ZXIgPSBhd2FpdCBFbmhhbmNlZENoYXRDYXJkTGliLnNvY2tldC5leGVjdXRlQXNHTSgnZ21fb25Ub2dnbGUnLCB7XG4gICAgLy8gICBldmVudDogZXZlbnQsXG4gICAgLy8gICBjYXJkOiB0aGlzXG4gICAgLy8gfSlcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKCdhY3Rpb24nIGluIHRhcmdldC5kYXRhc2V0KSByZXR1cm4gdGhpcy5fb25CdXR0b24oZXZlbnQpXG4gICAgaWYgKFxuICAgICAgdGFyZ2V0ICYmXG4gICAgICB0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdnbS1zZWxlY3Qtb25seScpICYmXG4gICAgICAhZ2FtZS51c2VyLmlzR01cbiAgICApIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBuYW1lID0gdGFyZ2V0LmRhdGFzZXQuZmxhZ1xuICAgICAgPyBgZGF0YS5mbGFncy4ke3RhcmdldC5kYXRhc2V0LmZsYWd9YFxuICAgICAgOiB0YXJnZXQuZGF0YXNldC5uYW1lXG4gICAgaWYgKCFuYW1lKSByZXR1cm5cbiAgICBjb25zdCB0b2dnbGUgPSB0YXJnZXQuY2xvc2VzdCgnLmVjYy1yYWRpbycpXG4gICAgaWYgKCF0b2dnbGUpIHtcbiAgICAgIHRoaXMudG9nZ2xlRGF0YShuYW1lKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBidXR0b25zID0gdG9nZ2xlLnF1ZXJ5U2VsZWN0b3JBbGwoJy5lY2Mtc3dpdGNoJylcbiAgICAgIGZvciAoY29uc3QgYiBvZiBidXR0b25zKSB7XG4gICAgICAgIGNvbnN0IGJOYW1lID0gYi5kYXRhc2V0LmZsYWdcbiAgICAgICAgICA/IGBkYXRhLmZsYWdzLiR7Yi5kYXRhc2V0LmZsYWd9YFxuICAgICAgICAgIDogYi5kYXRhc2V0Lm5hbWVcbiAgICAgICAgdGhpcy51bnNldERhdGEoYk5hbWUpXG4gICAgICB9XG4gICAgICB0aGlzLnNldERhdGEobmFtZSlcbiAgICB9XG4gICAgY29uc3QgY2FyZCA9IHRhcmdldC5jbG9zZXN0KGAuJHtFQ0NfQ0xBU1N9YClcbiAgICBpZiAodGhpcy5vcHRpb25zLnN1Ym1pdE9uQ2hhbmdlKSB7XG4gICAgICBpZiAoY2FyZCkgdGhpcy5fdXBkYXRlKGNhcmQpXG4gICAgfVxuICAgIGF3YWl0IHRoaXMudXBkYXRlQ2hhdENhcmQoKSAvLyBTdWJtaXQgb24gY2hhbmdlID9cbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5cbmV4cG9ydCBjbGFzcyBfcGFydGljaXBhbnQge1xuICBjb25zdHJ1Y3RvciAoZGF0YSA9IHt9KSB7XG4gICAgdGhpcy5kYXRhID0gZGF0YVxuICB9XG5cbiAgX2ZldGNoICgpIHtcbiAgICBpZiAoIXRoaXMuX2RvYyAmJiB0aGlzLmRhdGEuZG9jVXVpZCkge1xuICAgICAgdGhpcy5fZG9jID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkodGhpcy5kYXRhLmRvY1V1aWQpXG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLl9hY3Rvcikge1xuICAgICAgaWYgKHRoaXMuX2RvYykge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuX2RvYy5jb25zdHJ1Y3Rvcj8ubmFtZSkge1xuICAgICAgICAgIGNhc2UgJ1Rva2VuRG9jdW1lbnQnOlxuICAgICAgICAgICAgdGhpcy5fYWN0b3IgPSB0aGlzLl9kb2MuYWN0b3JcbiAgICAgICAgICAgIGJyZWFrXG5cbiAgICAgICAgICBjYXNlICdDb0NBY3Rvcic6XG4gICAgICAgICAgICB0aGlzLl9hY3RvciA9IHRoaXMuX2RvY1xuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHRoaXMuX2FjdG9yID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLmRvY1V1aWQpXG4gICAgfVxuICB9XG5cbiAgZ2V0IGFjdG9yICgpIHtcbiAgICB0aGlzLl9mZXRjaCgpXG4gICAgcmV0dXJuIHRoaXMuX2FjdG9yXG4gIH1cblxuICBnZXQgaXNBY3RvciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzQWN0b3IgfHwgdGhpcy5oYXNWZWhpY2xlXG4gIH1cblxuICBnZXQgaXNBY3RpdmUgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuYWN0aXZlIHx8IGZhbHNlXG4gIH1cblxuICBnZXQga2V5ICgpIHtcbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLmFjdG9yS2V5XG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHJldHVybiB0aGlzLmFjdG9yLmFjdG9yS2V5XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGljb24gKCkge1xuICAgIGlmICghdGhpcy5pc0FjdG9yKSB7XG4gICAgICByZXR1cm4gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcXVlc3Rpb24tY2lyY2xlLXJlZ3VsYXIuc3ZnJ1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSByZXR1cm4gdGhpcy52ZWhpY2xlLmltZ1xuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5pbWdcbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZHJpdmVyICgpIHtcbiAgICBpZiAoIXRoaXMuX2RyaXZlcikge1xuICAgICAgdGhpcy5fZHJpdmVyID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckZyb21LZXkodGhpcy5kYXRhLmRvY1V1aWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kcml2ZXJcbiAgfVxuXG4gIGdldCB2ZWhpY2xlICgpIHtcbiAgICBpZiAodGhpcy5kYXRhLnZlaGljbGVLZXkpIHtcbiAgICAgIHRoaXMuX3ZlaGljbGUgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleSh0aGlzLmRhdGEudmVoaWNsZUtleSlcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3ZlaGljbGVcbiAgfVxuXG4gIGdldCBoYXNBY3RvciAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5hY3RvclxuICB9XG5cbiAgZ2V0IGhhc1ZlaGljbGUgKCkge1xuICAgIHJldHVybiAhIXRoaXMudmVoaWNsZVxuICB9XG5cbiAgZ2V0IG5hbWUgKCkge1xuICAgIGlmICh0aGlzLmhhc1ZlaGljbGUpIHJldHVybiB0aGlzLnZlaGljbGUubmFtZVxuICAgIGlmICh0aGlzLmhhc0FjdG9yKSByZXR1cm4gdGhpcy5hY3Rvci5uYW1lXG4gICAgcmV0dXJuIHRoaXMuZGF0YS5uYW1lIHx8IHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEubW92KSB7XG4gICAgICBpZiAodGhpcy5oYXNWZWhpY2xlKSB0aGlzLmRhdGEubW92ID0gdGhpcy52ZWhpY2xlLm1vdlxuICAgICAgZWxzZSBpZiAodGhpcy5oYXNBY3RvcikgdGhpcy5kYXRhLm1vdiA9IHRoaXMuYWN0b3IubW92XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5tb3YpIHtcbiAgICAgIGlmICghaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5tb3YpKSkgdGhpcy5kYXRhLmhhc1ZhbGlkTW92ID0gdHJ1ZVxuICAgICAgZWxzZSB7XG4gICAgICAgIHRoaXMuZGF0YS5oYXNWYWxpZE1vdiA9IGZhbHNlXG4gICAgICAgIHRoaXMuZGF0YS5tb3YgPSB1bmRlZmluZWRcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kYXRhLm1vdlxuICB9XG5cbiAgZ2V0IHV1aWQgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEudXVpZFxuICB9XG5cbiAgZ2V0IGhhc01heEJvbnVzRGljZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm9udXNEaWNlID49IDJcbiAgfVxuXG4gIGdldCBib251c0RpY2UgKCkge1xuICAgIGlmIChcbiAgICAgIGlzTmFOKHRoaXMuZGF0YS5ib251c0RpY2UpIHx8XG4gICAgICB0aGlzLmRhdGEuYm9udXNEaWNlIDwgMCB8fFxuICAgICAgdGhpcy5kYXRhLmJvbnVzRGljZSA+IDJcbiAgICApIHtcbiAgICAgIHJldHVybiAwXG4gICAgfVxuICAgIHJldHVybiB0aGlzLmRhdGEuYm9udXNEaWNlXG4gIH1cblxuICBzZXQgYm9udXNEaWNlICh4KSB7XG4gICAgaWYgKGlzTmFOKHgpKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdCb251cyBkaWNlIGNhbiBPbmx5IGJlIGEgbnVtYmVyJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoeCA+IDIpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoJ01heCAyIGJvbnVzIGRpY2UnKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh4IDwgMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignTm8gbmVnYXRpdiBib251cyBkaWNlJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLmRhdGEuYm9udXNEaWNlID0geFxuICB9XG5cbiAgZ2V0IGhwICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5ocCkge1xuICAgICAgdGhpcy5kYXRhLmhwID0gMFxuICAgIH1cbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgdGhpcy5kYXRhLmhwID0gdGhpcy5hY3Rvci5ocFxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGEuaHBcbiAgfVxuXG4gIHNldCBocCAoeCkge1xuICAgIHRoaXMuZGF0YS5ocCA9IHhcbiAgICBpZiAodGhpcy5hY3Rvcikge1xuICAgICAgdGhpcy5hY3Rvci5zZXRIcCh4KVxuICAgIH1cbiAgfVxuXG4gIGFkZEJvbnVzRGljZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5ib251c0RpY2UgPj0gMikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQWxyZWFkeSBoYXZlIG1heCBib251cyBkaWNlJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICB0aGlzLmRhdGEuYm9udXNEaWNlICs9IDFcbiAgfVxuXG4gIHJlbW92ZUJvbnVzRGljZSAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5ib251c0RpY2UgPD0gMCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignQWxyZWFkeSBoYXZlIDAgYm9udXMgZGljZScpXG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSAtPSAxXG4gIH1cblxuICByZXNldEJvbnVzRGljZSAoKSB7XG4gICAgdGhpcy5kYXRhLmJvbnVzRGljZSA9IDBcbiAgfVxuXG4gIGdldCBoYXNCb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc09uZUJvbnVzRGljZSB8fCB0aGlzLmhhc1R3b0JvbnVzRGljZVxuICB9XG5cbiAgZ2V0IGhhc09uZUJvbnVzRGljZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYm9udXNEaWNlID49IDFcbiAgfVxuXG4gIGdldCBoYXNUd29Cb251c0RpY2UgKCkge1xuICAgIHJldHVybiB0aGlzLmJvbnVzRGljZSA+PSAyXG4gIH1cblxuICBnZXQgY2FuQXNzaXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5hc3Npc3Q/Lmxlbmd0aCA+IDBcbiAgfVxuXG4gIGdldCBjYW5CZUNhdXRpb3VzICgpIHtcbiAgICByZXR1cm4gIXRoaXMuaGFzTWF4Qm9udXNEaWNlXG4gIH1cblxuICBnZXQgYXNzaXN0ICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmFzc2lzdCB8fCBbXVxuICB9XG5cbiAgZ2V0IGRleCAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEuZGV4KSB7XG4gICAgICBpZiAodGhpcy5oYXNWZWhpY2xlICYmIHRoaXMuaGFzRHJpdmVyKSB7XG4gICAgICAgIHRoaXMuZGF0YS5kZXggPSB0aGlzLmRyaXZlci5jaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuaGFzQWN0b3IpIHtcbiAgICAgICAgdGhpcy5kYXRhLmRleCA9IHRoaXMuYWN0b3IuY2hhcmFjdGVyaXN0aWNzLmRleC52YWx1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuZGV4KSB7XG4gICAgICBpZiAoIWlzTmFOKE51bWJlcih0aGlzLmRhdGEuZGV4KSkpIHRoaXMuZGF0YS5oYXNWYWxpZERleCA9IHRydWVcbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLmRhdGEuaGFzVmFsaWREZXggPSBmYWxzZVxuICAgICAgICB0aGlzLmRhdGEuZGV4ID0gMFxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLmRhdGEuZGV4XG4gIH1cblxuICBnZXQgaGFzQUd1blJlYWR5ICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLmhhc0FHdW5SZWFkeSB8fCBmYWxzZVxuICB9XG5cbiAgZ2V0IGluaXRpYXRpdmUgKCkge1xuICAgIGxldCBpbml0ID0gdGhpcy5kZXhcbiAgICBpZiAodGhpcy5oYXNBR3VuUmVhZHkpIHtcbiAgICAgIGluaXQgKz0gNTBcbiAgICB9XG4gICAgLy8gaWYoIHRoaXMuc3BlZWRDaGVjayl7XG4gICAgLy8gICBpZih0aGlzLnNwZWVkQ2hlY2suc2NvcmUpIGluaXQgKz0gdGhpcy5zcGVlZENoZWNrLnNjb3JlLzEwMFxuICAgIC8vIH1cblxuICAgIHJldHVybiBpbml0XG4gIH1cblxuICBnZXQgaXNDaGFzZXIgKCkge1xuICAgIHJldHVybiAhIXRoaXMuZGF0YS5jaGFzZXJcbiAgfVxuXG4gIGdldCBpc1ByZXkgKCkge1xuICAgIHJldHVybiAhdGhpcy5pc0NoYXNlclxuICB9XG5cbiAgZ2V0IGlzVmFsaWQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc1ZhbGlkRGV4ICYmIHRoaXMuaGFzVmFsaWRNb3ZcbiAgfVxuXG4gIGdldCBoYXNWYWxpZERleCAoKSB7XG4gICAgcmV0dXJuICFpc05hTihOdW1iZXIodGhpcy5kYXRhLmRleCkpXG4gIH1cblxuICBnZXQgaGFzVmFsaWRNb3YgKCkge1xuICAgIHJldHVybiAhaXNOYU4oTnVtYmVyKHRoaXMuZGF0YS5tb3YpKVxuICB9XG5cbiAgZ2V0IGhhc0RyaXZlciAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGFzVmVoaWNsZSAmJiB0aGlzLmhhc0FjdG9yXG4gIH1cblxuICBnZXQgbW92QWRqdXN0bWVudCAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5yb2xsRGF0YVN0cmluZykge1xuICAgICAgY29uc3Qgcm9sbCA9IENvQzdDaGVjay5mcm9tUm9sbFN0cmluZyh0aGlzLmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZylcbiAgICAgIGlmIChyb2xsKSB7XG4gICAgICAgIGlmICghcm9sbC5zdGFuZGJ5KSB7XG4gICAgICAgICAgaWYgKHJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkgcmV0dXJuIDFcbiAgICAgICAgICBlbHNlIGlmIChyb2xsLmZhaWxlZCkgcmV0dXJuIC0xXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIDBcbiAgfVxuXG4gIGdldCBhZGp1c3RlZE1vdiAoKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLm1vdiA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoaXNOYU4oTnVtYmVyKHRoaXMubW92KSkpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gTnVtYmVyKHRoaXMubW92KSArIHRoaXMubW92QWRqdXN0bWVudFxuICB9XG5cbiAgZ2V0IGhhc01vdkFkanVzdG1lbnQgKCkge1xuICAgIHJldHVybiB0aGlzLmhhc0JvbnVzTW92IHx8IHRoaXMuaGFzTWFsdXNNb3ZcbiAgfVxuXG4gIGdldCBoYXNCb251c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50ID4gMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIGdldCBoYXNNYWx1c01vdiAoKSB7XG4gICAgaWYgKHRoaXMuZGF0YS5tb3ZBZGp1c3RtZW50IDwgMCkgcmV0dXJuIHRydWVcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuXG4gIC8vIGdldCBvcHRpb25zKCl7XG4gIC8vICByZXR1cm4ge1xuICAvLyAgICBleGNsdWRlOiBbXSxcbiAgLy8gICAgZXhjbHVkZVN0YXJ0V2l0aDogJ18nXG4gIC8vICB9O1xuICAvLyB9XG5cbiAgLy8gZ2V0IGRhdGFTdHJpbmcoKXtcbiAgLy8gIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLCAoa2V5LHZhbHVlKT0+e1xuICAvLyAgICBpZiggbnVsbCA9PT0gdmFsdWUpIHJldHVybiB1bmRlZmluZWQ7XG4gIC8vICAgIGlmKCB0aGlzLm9wdGlvbnMuZXhjbHVkZT8uaW5jbHVkZXMoa2V5KSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgaWYoIGtleS5zdGFydHNXaXRoKHRoaXMub3B0aW9ucy5leGNsdWRlU3RhcnRXaXRoKSkgcmV0dXJuIHVuZGVmaW5lZDtcbiAgLy8gICAgcmV0dXJuIHZhbHVlO1xuICAvLyAgfSk7XG4gIC8vIH1cblxuICB0b29TbG93ICgpIHtcbiAgICB0aGlzLmRhdGEuZXhjbHVkZWQgPSB0cnVlXG4gIH1cblxuICBpbmNsdWRlSW5DaGFzZSAoKSB7XG4gICAgdGhpcy5kYXRhLmV4Y2x1ZGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IGZhbHNlXG4gIH1cblxuICBlc2NhcGVkICgpIHtcbiAgICB0aGlzLmRhdGEuZXNjYXBlZCA9IHRydWVcbiAgfVxuXG4gIHNldCBzbG93ZXN0ICh4KSB7XG4gICAgdGhpcy5kYXRhLnNsb3dlc3QgPSB4XG4gIH1cblxuICBnZXQgc2xvd2VzdCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YS5zbG93ZXN0XG4gIH1cblxuICBzZXQgZmFzdGVzdCAoeCkge1xuICAgIHRoaXMuZGF0YS5mYXN0ZXN0ID0geFxuICB9XG5cbiAgZ2V0IGZhc3Rlc3QgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuZmFzdGVzdFxuICB9XG5cbiAgY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zIChtaW5Nb3YpIHtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgdGhpcy5tb3ZlbWVudEFjdGlvbiA9PT0gJ3VuZGVmaW5lZCcgfHxcbiAgICAgIHR5cGVvZiB0aGlzLmFkanVzdGVkTW92ID09PSAndW5kZWZpbmVkJyB8fFxuICAgICAgaXNOYU4obWluTW92KVxuICAgICkge1xuICAgICAgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDBcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5tb3ZlbWVudEFjdGlvbiA9IDEgKyAodGhpcy5hZGp1c3RlZE1vdiAtIG1pbk1vdilcbiAgICB9XG4gICAgLy8gaWYoIHRoaXMubW92ZW1lbnRBY3Rpb24gPCAwKSB0aGlzLm1vdmVtZW50QWN0aW9uID0gMFxuICB9XG5cbiAgc2V0IG1vdmVtZW50QWN0aW9uICh4KSB7XG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uID0geFxuICB9XG5cbiAgZ2V0IG1vdmVtZW50QWN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uXG4gIH1cblxuICBzZXQgY3VycmVudE1vdmVtZW50QWN0aW9ucyAoeCkge1xuICAgIHRoaXMuZGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID0geFxuICB9XG5cbiAgZ2V0IGN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGEuY3VycmVudE1vdmVtZW50QWN0aW9ucyB8fCAwXG4gIH1cblxuICBnZXQgaGFzTWF4TXZ0QWN0aW9ucyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+PSB0aGlzLm1vdmVtZW50QWN0aW9uXG4gIH1cblxuICBnZXQgaGFzTm9NdnRBY3Rpb25zICgpIHtcbiAgICByZXR1cm4gdGhpcy5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDw9IDBcbiAgfVxuXG4gIGFkZE1vdmVtZW50QWN0aW9ucyAoeCA9IDEpIHtcbiAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKz0geFxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiB0aGlzLm1vdmVtZW50QWN0aW9uKSB7XG4gICAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSB0aGlzLm1vdmVtZW50QWN0aW9uXG4gICAgfVxuICB9XG5cbiAgYWx0ZXJNb3ZlbWVudEFjdGlvbnMgKHgpIHtcbiAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKz0geFxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiB0aGlzLm1vdmVtZW50QWN0aW9uKSB7XG4gICAgICB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSB0aGlzLm1vdmVtZW50QWN0aW9uXG4gICAgfVxuICB9XG5cbiAgZ2V0IG1vdmVtZW50QWN0aW9uQXJyYXkgKCkge1xuICAgIGNvbnN0IGJhc2VBcnJheSA9IEFycmF5KHRoaXMubW92ZW1lbnRBY3Rpb24pLmZpbGwoJ2Jhc2UnKVxuICAgIGlmICh0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPj0gMCkge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnM7IGkrKykge1xuICAgICAgICBiYXNlQXJyYXlbaV0gPSAnYmFzZSBhdmFpbGFibGUnXG4gICAgICB9XG4gICAgICByZXR1cm4gYmFzZUFycmF5XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucyA8IDApIHtcbiAgICAgIGNvbnN0IGRlZmljaXRBcnJheSA9IEFycmF5KE1hdGguYWJzKHRoaXMuY3VycmVudE1vdmVtZW50QWN0aW9ucykpLmZpbGwoXG4gICAgICAgICdkZWZpY2l0J1xuICAgICAgKVxuICAgICAgcmV0dXJuIGRlZmljaXRBcnJheS5jb25jYXQoYmFzZUFycmF5KVxuICAgIH1cbiAgfVxuXG4gIGdldCBjc3NDbGFzcyAoKSB7XG4gICAgY29uc3QgY3NzQ2xhc3NlcyA9IFtdXG4gICAgaWYgKHRoaXMuaXNDaGFzZXIpIGNzc0NsYXNzZXMucHVzaCgnY2hhc2VyJylcbiAgICBlbHNlIGNzc0NsYXNzZXMucHVzaCgncHJleScpXG4gICAgaWYgKHRoaXMuZGF0YS5leGNsdWRlZCkgY3NzQ2xhc3Nlcy5wdXNoKCdleGNsdWRlZCcsICd0b29fc2xvdycpXG4gICAgaWYgKHRoaXMuZGF0YS5lc2NhcGVkKSBjc3NDbGFzc2VzLnB1c2goJ2VzY2FwZWQnKVxuICAgIGlmICh0aGlzLmRhdGEuZmFzdGVzdCkgY3NzQ2xhc3Nlcy5wdXNoKCdmYXN0ZXN0JylcbiAgICBpZiAodGhpcy5kYXRhLnNsb3dlc3QpIGNzc0NsYXNzZXMucHVzaCgnc2xvd2VzdCcpXG4gICAgaWYgKHRoaXMuZGF0YS5hY3RpdmUpIGNzc0NsYXNzZXMucHVzaCgnYWN0aXZlJylcbiAgICBpZiAodGhpcy5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPD0gMCkgY3NzQ2xhc3Nlcy5wdXNoKCduby1hY3Rpb25zJylcbiAgICByZXR1cm4gY3NzQ2xhc3Nlcy5qb2luKCcgJylcbiAgfVxuXG4gIGdldCBzcGVlZENoZWNrICgpIHtcbiAgICBjb25zdCBjaGVjayA9IHt9XG4gICAgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5uYW1lKSBjaGVjay5uYW1lID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZVxuICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uc2NvcmUpIGNoZWNrLnNjb3JlID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2suc2NvcmVcbiAgICBjaGVjay5jc3NDbGFzc2VzID0gJydcbiAgICBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnJvbGxEYXRhU3RyaW5nKSB7XG4gICAgICBjaGVjay5yb2xsID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHRoaXMuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nKVxuICAgICAgaWYgKGNoZWNrLnJvbGwpIHtcbiAgICAgICAgaWYgKCFjaGVjay5yb2xsLnN0YW5kYnkgfHwgY2hlY2sucm9sbC5oYXNDYXJkKSB7XG4gICAgICAgICAgY2hlY2sucm9sbGVkID0gdHJ1ZVxuICAgICAgICAgIGNoZWNrLmlubGluZVJvbGwgPSBjaGVjay5yb2xsLmlubGluZUNoZWNrLm91dGVySFRNTFxuICAgICAgICAgIGNoZWNrLmNzc0NsYXNzZXMgKz0gJ3JvbGxlZCdcbiAgICAgICAgICBpZiAoIWNoZWNrLnJvbGwuc3RhbmRieSkge1xuICAgICAgICAgICAgaWYgKGNoZWNrLnJvbGwuc3VjY2Vzc0xldmVsID49IENvQzdDaGVjay5zdWNjZXNzTGV2ZWwuZXh0cmVtZSkge1xuICAgICAgICAgICAgICBjaGVjay5tb2RpZmllckNzcyA9ICd1cGdyYWRlJ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChjaGVjay5yb2xsLmZhaWxlZCkgY2hlY2subW9kaWZpZXJDc3MgPSAnZG93bmdyYWRlJ1xuICAgICAgICAgICAgaWYgKFxuICAgICAgICAgICAgICBjaGVjay5yb2xsLnN1Y2Nlc3NMZXZlbCA+PSBDb0M3Q2hlY2suc3VjY2Vzc0xldmVsLmV4dHJlbWUgfHxcbiAgICAgICAgICAgICAgY2hlY2sucm9sbC5mYWlsZWRcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBjaGVjay5oYXNNb2RpZmllciA9IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuaGFzQWN0b3IpIHtcbiAgICAgIGNoZWNrLm9wdGlvbnMgPSBbXVxuICAgICAgZm9yIChjb25zdCBjIG9mIFsnY29uJ10pIHtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyaXN0aWMgPSB0aGlzLmFjdG9yLmdldENoYXJhY3RlcmlzdGljKGMpXG4gICAgICAgIGlmIChjaGFyYWN0ZXJpc3RpYz8udmFsdWUpIGNoZWNrLm9wdGlvbnMucHVzaChjaGFyYWN0ZXJpc3RpYy5sYWJlbClcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuYWN0b3IuZHJpdmVTa2lsbHMpIHtcbiAgICAgICAgY2hlY2sub3B0aW9ucy5wdXNoKHMubmFtZSlcbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBzIG9mIHRoaXMuYWN0b3IucGlsb3RTa2lsbHMpIHtcbiAgICAgICAgY2hlY2sub3B0aW9ucy5wdXNoKHMubmFtZSlcbiAgICAgIH1cbiAgICAgIGNoZWNrLmhhc09wdGlvbnMgPSAhIWNoZWNrLm9wdGlvbnMubGVuZ3RoXG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3BlZWRDaGVjaz8uaWQpIHtcbiAgICAgICAgbGV0IGl0ZW0gPSB0aGlzLmFjdG9yLmZpbmQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXG4gICAgICAgIGlmICghaXRlbSkge1xuICAgICAgICAgIGNvbnN0IGdhbWVJdGVtID0gZ2FtZS5pdGVtcy5nZXQodGhpcy5kYXRhLnNwZWVkQ2hlY2suaWQpXG4gICAgICAgICAgaWYgKGdhbWVJdGVtKSBpdGVtID0gdGhpcy5hY3Rvci5maW5kKGdhbWVJdGVtLm5hbWUpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpdGVtJyAmJiBpdGVtLnZhbHVlLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLm5hbWVcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdjaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICAgICAgY2hlY2suaXNDaGFyYWN0ZXJpc3RpYyA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnYXR0cmlidXRlJ1xuICAgICAgICAgICAgY2hlY2suaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/Lm5hbWUpIHtcbiAgICAgICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuZmluZCh0aGlzLmRhdGEuc3BlZWRDaGVjay5uYW1lKVxuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdpdGVtJyAmJiBpdGVtLnZhbHVlLmRhdGE/LnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLm5hbWVcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnc2tpbGwnXG4gICAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2sucmVmU2V0ID0gdHJ1ZVxuICAgICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLnZhbHVlLnZhbHVlXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdjaGFyYWN0ZXJpc3RpYycpIHtcbiAgICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW0udmFsdWVcbiAgICAgICAgICAgIGNoZWNrLm5hbWUgPSBpdGVtLnZhbHVlLmxhYmVsXG4gICAgICAgICAgICBjaGVjay50eXBlID0gJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICAgICAgY2hlY2suaXNDaGFyYWN0ZXJpc3RpYyA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnJlZlNldCA9IHRydWVcbiAgICAgICAgICAgIGNoZWNrLnNjb3JlID0gaXRlbS52YWx1ZS52YWx1ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoaXRlbS50eXBlID09PSAnYXR0cmlidXRlJykge1xuICAgICAgICAgICAgY2hlY2sucmVmID0gaXRlbS52YWx1ZVxuICAgICAgICAgICAgY2hlY2submFtZSA9IGl0ZW0udmFsdWUubGFiZWxcbiAgICAgICAgICAgIGNoZWNrLnR5cGUgPSAnYXR0cmlidXRlJ1xuICAgICAgICAgICAgY2hlY2suaXNBdHRyaWJ1dGUgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5yZWZTZXQgPSB0cnVlXG4gICAgICAgICAgICBjaGVjay5zY29yZSA9IGl0ZW0udmFsdWUudmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zcGVlZENoZWNrPy5pZCkge1xuICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KHRoaXMuZGF0YS5zcGVlZENoZWNrLmlkKVxuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0uZGF0YT8udHlwZSA9PT0gJ3NraWxsJykge1xuICAgICAgICAgIGNoZWNrLnJlZiA9IGl0ZW1cbiAgICAgICAgICBjaGVjay5uYW1lID0gaXRlbS5uYW1lXG4gICAgICAgICAgY2hlY2sudHlwZSA9ICdza2lsbCdcbiAgICAgICAgICBjaGVjay5pc1NraWxsID0gdHJ1ZVxuICAgICAgICAgIGNoZWNrLnJlZlNldCA9IGZhbHNlXG4gICAgICAgICAgY2hlY2suc2NvcmUgPSBpdGVtLmJhc2VcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnNwZWVkQ2hlY2s/Lm5hbWUgJiYgdGhpcy5kYXRhLnNwZWVkQ2hlY2s/LnNjb3JlKSB7XG4gICAgICBjaGVjay5uYW1lID0gdGhpcy5kYXRhLnNwZWVkQ2hlY2submFtZVxuICAgICAgY2hlY2suc2NvcmUgPSB0aGlzLmRhdGEuc3BlZWRDaGVjay5zY29yZVxuICAgICAgY2hlY2sucmVmU2V0ID0gZmFsc2VcbiAgICB9XG5cbiAgICBjaGVjay5jYW5CZVJvbGxlZCA9IHRydWVcblxuICAgIGlmICghY2hlY2sucm9sbGVkICYmICFjaGVjay5zY29yZSkge1xuICAgICAgY2hlY2suY3NzQ2xhc3NlcyArPSAnIGludmFsaWQnXG4gICAgICBjaGVjay5jYW5CZVJvbGxlZCA9IGZhbHNlXG4gICAgfVxuICAgIGNoZWNrLmlzVmFsaWQgPSBjaGVjay5yb2xsZWQgJiYgIWlzTmFOKGNoZWNrLnNjb3JlKVxuXG4gICAgcmV0dXJuIGNoZWNrXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvcnRCeVJvbGVBbmREZXggKGEsIGIpIHtcbiAgaWYgKCFhICYmIGIpIHJldHVybiAxXG4gIGlmICghYiAmJiBhKSByZXR1cm4gLTFcbiAgaWYgKCFhICYmICFiKSByZXR1cm4gMFxuICAvLyBQdXQgY2hhc2VycyBmaXJzdFxuICBpZiAoYi5jaGFzZXIgJiYgIWEuY2hhc2VyKSByZXR1cm4gMVxuICBpZiAoYS5jaGFzZXIgJiYgIWIuY2hhc2VyKSByZXR1cm4gLTFcbiAgLy8gSWYgc2FtZXR5cGUgc29ydCBieSBkZXhcbiAgcmV0dXJuIGEuZGV4IC0gYi5kZXhcbn1cbiIsIi8qIGdsb2JhbCBkdXBsaWNhdGUsIGZvdW5kcnksIGdhbWUsIG1lcmdlT2JqZWN0LCBSb2xsLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0NoZWNrIH0gZnJvbSAnLi4vLi4vY2hlY2suanMnXG5pbXBvcnQgeyBFbmhhbmNlZENoYXRDYXJkIH0gZnJvbSAnLi4vLi4vY29tbW9uL2NoYXRjYXJkbGliL3NyYy9jaGF0Y2FyZGxpYi5qcydcbmltcG9ydCB7IENvQzdEaWNlIH0gZnJvbSAnLi4vLi4vZGljZS5qcydcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCB9IGZyb20gJy4uLy4uL2l0ZW1zL2NoYXNlL3BhcnRpY2lwYW50LmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IGNyZWF0ZUlubGluZVJvbGwgfSBmcm9tICcuLi9oZWxwZXIuanMnXG5cbmV4cG9ydCBjbGFzcyBDaGFzZU9ic3RhY2xlQ2FyZCBleHRlbmRzIEVuaGFuY2VkQ2hhdENhcmQge1xuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuaHRtbCcsXG4gICAgICBHTVVwZGF0ZTogdHJ1ZVxuICAgIH0pXG4gICAgb3B0aW9ucy5jbGFzc2VzLnB1c2goJ29ic3RhY2xlLWNhcmQnKVxuICAgIHJldHVybiBvcHRpb25zXG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGdldERhdGEgKCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEuc3RhdHVzID0gW11cbiAgICBkYXRhLnN0cmluZ3MgPSB7fVxuICAgIGRhdGEuZGlzcGxheUFjdG9yT25DYXJkID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGlzcGxheUFjdG9yT25DYXJkJylcbiAgICAvLyBkYXRhLnBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLnBhcnRpY2lwYW50RGF0YSlcblxuICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgbmFtZTpcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSArIGAgOiR7dGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdH1gXG4gICAgfSlcblxuICAgIGRhdGEuY2FyZC5icmVha2FibGVPYnN0YWNsZSA9XG4gICAgICBkYXRhLmRhdGEub2JzdGFjbGU/LmJhcnJpZXIgJiYgZGF0YS5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cyAvLyBUT0RPOiBDaGVjayBpZiB1c2VmdWxsXG4gICAgZGF0YS5jYXJkLnZhbGlkQ2hlY2sgPSBmYWxzZVxuXG4gICAgaWYgKFxuICAgICAgZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkICYmXG4gICAgICAoZGF0YS5kYXRhLm9ic3RhY2xlLmhhemFyZCB8fFxuICAgICAgICAoZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXIgJiYgIWRhdGEuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpKVxuICAgICkge1xuICAgICAgZGF0YS5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSA9IHRydWVcbiAgICAgIGRhdGEuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmICh0aGlzLnBhcnRpY2lwYW50Py5hY3Rvcikge1xuICAgICAgZGF0YS5za2lsbCA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZmluZChkYXRhLmRhdGEub2JzdGFjbGUuY2hlY2tOYW1lKVxuICAgICAgZGF0YS5jaGVja09wdGlvbnMgPSB0aGlzLmNoYXNlLmdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzKFxuICAgICAgICB0aGlzLmRhdGEucGFydGljaXBhbnRVdWlkXG4gICAgICApXG4gICAgICBpZiAoZGF0YS5za2lsbCkge1xuICAgICAgICBkYXRhLnZhbGlkQ2hlY2sgPSB0cnVlXG4gICAgICAgIGRhdGEudmFsaWRTa2lsbCA9IHRydWVcbiAgICAgIH0gZWxzZSBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhLmNoZWNrT3B0aW9ucyA9IHRoaXMuY2hhc2UuYWxsU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzXG4gICAgICBkYXRhLmR1bW15QWN0b3IgPSB0cnVlXG4gICAgICBpZiAoZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSAmJiBkYXRhLmRhdGEuY2hlY2tUaHJlc2hvbGQpIHtcbiAgICAgICAgZGF0YS52YWxpZENoZWNrID0gdHJ1ZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghZGF0YS5kYXRhLmJvbnVzRGljZSkgZGF0YS5kYXRhLmJvbnVzRGljZSA9IDBcblxuICAgIGlmIChcbiAgICAgIGRhdGEuZGF0YS5ib251c0RpY2UgPCAyICYmXG4gICAgICBkYXRhLmRhdGEudG90YWxBY3Rpb25Db3N0IDwgZGF0YS5kYXRhLm1vdmVtZW50QWN0aW9uXG4gICAgKSB7XG4gICAgICBkYXRhLmNhblRha2VDYXV0aW91c0FwcHJvYWNoID0gdHJ1ZVxuICAgIH1cblxuICAgIGRhdGEuY3VzdG9tV2VhcG9uID0gZmFsc2VcbiAgICBpZiAodGhpcy5kYXRhLndlYXBvbkNob2ljZSA9PT0gJzAnKSB7XG4gICAgICBkYXRhLmN1c3RvbVdlYXBvbiA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoZGF0YS52YWxpZENoZWNrKSB7XG4gICAgICBsZXQgY2hlY2tOYW1lLCB2YWx1ZVxuICAgICAgaWYgKGRhdGEuc2tpbGwpIHtcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5za2lsbC52YWx1ZS5uYW1lXG4gICAgICAgIHZhbHVlID0gZGF0YS5za2lsbC52YWx1ZS52YWx1ZVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2hlY2tOYW1lID0gZGF0YS5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZVxuICAgICAgICB2YWx1ZSA9IGRhdGEuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgfVxuICAgICAgZGF0YS5zdHJpbmdzLmNoZWNrUm9sbFJlcXVlc3QgPSBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkFza1JvbGwnLCB7XG4gICAgICAgIG5hbWU6IGNoZWNrTmFtZSxcbiAgICAgICAgdmFsdWVcbiAgICAgIH0pXG4gICAgICBpZiAoZGF0YS5kYXRhLmJvbnVzRGljZSAhPT0gMCkge1xuICAgICAgICBpZiAoZGF0YS5kYXRhLmJvbnVzRGljZSA+IDApIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgrJHtkYXRhLmRhdGEuYm9udXNEaWNlfSlgXG4gICAgICAgIH0gZWxzZSBkYXRhLnN0cmluZ3MuY2hlY2tSb2xsUmVxdWVzdCArPSBgICgke2RhdGEuZGF0YS5ib251c0RpY2V9KWBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGF0YS5kYXRhLnN0YXRlcz8ub2JzdGFjbGVEZWZpbmVkKSB7XG4gICAgICBkYXRhLnN0cmluZ3Mub2JzdGFjbGVEZWZpbmVkID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5GYWNpbmdPYnN0YWNsZScsIHtcbiAgICAgICAgdHlwZTogZGF0YS5kYXRhLm9ic3RhY2xlLmJhcnJpZXJcbiAgICAgICAgICA/IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BQmFycmllcicpXG4gICAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQUhhemFyZCcpXG4gICAgICB9KVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5uYW1lKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURlZmluZWQgKz0gYCAoJHtkYXRhLmRhdGEub2JzdGFjbGUubmFtZX0pYFxuICAgICAgfVxuXG4gICAgICBkYXRhLmRhdGEuc3RhdGVzLmNhbkFza1JvbGwgPSB0cnVlXG4gICAgICAvLyBkYXRhLmRhdGEuc3RhdGVzLm9ic3RhY2xlQ2FuQmVCcm9rZW4gPSBmYWxzZVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5iYXJyaWVyKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmFycmllcicpIH0pXG4gICAgICAgIGlmIChkYXRhLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5CcmVha2FibGUnKSB9KVxuICAgICAgICAgIC8vIGRhdGEuZGF0YS5zdGF0ZXMub2JzdGFjbGVDYW5CZUJyb2tlbiA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGRhdGEuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHtcbiAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7IG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXphcmQnKSB9KVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICBpZiAoIWRhdGEudmFsaWRDaGVjaykge1xuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vVmFsaWRDaGVjaycpLFxuICAgICAgICAgICAgY3NzOiAnZXJyb3InXG4gICAgICAgICAgfSlcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuRW50ZXJWYWx1ZVRpdGxlID0gZ2FtZS5pMThuLmZvcm1hdChcbiAgICAgICAgICAgICdDb0M3LlNraWxsU2VsZWN0QmFzZScsXG4gICAgICAgICAgICB7IG5hbWU6IGRhdGEuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgfVxuICAgICAgICAgIClcbiAgICAgICAgICBpZiAoIWRhdGEuZGF0YS5jaGVja1RocmVzaG9sZCkgZGF0YS5kYXRhLnN0YXRlcy5jYW5Bc2tSb2xsID0gZmFsc2VcbiAgICAgICAgfSBlbHNlIGlmICghZGF0YS52YWxpZFNraWxsKSB7XG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm9WYWxpZFNraWxsJyksXG4gICAgICAgICAgICBjc3M6ICd3YXJuaW5nJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhaykge1xuICAgICAgICBsZXQgZGFtYWdlU3RhdHVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJyZWFrRG93bicpXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8ub2JzdGFjbGVEYW1hZ2VSb2xsPy50b3RhbCkge1xuICAgICAgICAgIGRhbWFnZVN0YXR1cyArPSBgIDogJHt0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwudG90YWx9YFxuICAgICAgICB9XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgIG5hbWU6IGRhbWFnZVN0YXR1c1xuICAgICAgICB9KVxuXG4gICAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLm9ic3RhY2xlRGFtYWdlUm9sbGVkKSB7XG4gICAgICAgICAgaWYgKHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGw/LnRvdGFsIDw9IDApIHtcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURhbWFnZSA9XG4gICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ob0RhbWFnZURlYWx0JylcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGF0YS5pbmxpbmVEYW1hZ2VSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICAgICAgdGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsXG4gICAgICAgICAgICApPy5vdXRlckhUTUxcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZURhbWFnZSA9IGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuRGFtYWdlRGVhbHQnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiBkYXRhLmlubGluZURhbWFnZVJvbGxcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlKSB7XG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goeyBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmVnb3RpYXRlJykgfSlcbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuZGF0YS50b3RhbENhdXRpb3VzQXBwcm9hY2gpIHtcbiAgICAgICAgY29uc3QgY2F1dGlvdXNTdGF0dXMgPSB7XG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhdXRpb3VzJyksXG4gICAgICAgICAgY3NzOiAnJ1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoID4gMSkge1xuICAgICAgICAgIGNhdXRpb3VzU3RhdHVzLmNzcyA9ICdzdHJvbmcnXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLmNhdXRpb3VzQXBwcm9hY2hUeXBlID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuQmVpbmdWZXJ5Q2F1dGlvdXMnXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jYXV0aW91c0FwcHJvYWNoVHlwZSA9XG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQmVpbmdDYXV0aW91cycpXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UpIGNhdXRpb3VzU3RhdHVzLmNzcyArPSAnIGNvbnN1bWUnXG4gICAgICAgIGRhdGEuc3RhdHVzLnB1c2goY2F1dGlvdXNTdGF0dXMpXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2spIHtcbiAgICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQpIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZSAvLyBPbiBoYXphcmQsIHlvdSBwYXNzIGV2ZW4gaWYgeW91IGZhaWwgeW91ciByb2xsXG4gICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5tb3ZlUGxheWVyID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhLm1vdmVQbGF5ZXIgPSB0cnVlXG4gICAgICAgICAgZGF0YS5zdHJpbmdzLm9ic3RhY2xlUGFzc2VkID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuT2JzdGFjbGVQYXNzZWQnXG4gICAgICAgICAgKVxuICAgICAgICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5sdWNrU3BlbnQpIHtcbiAgICAgICAgICAgIGRhdGEuc3RyaW5ncy5vYnN0YWNsZVBhc3NlZCArPSBgICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuR290THVja3knXG4gICAgICAgICAgICApfSlgXG4gICAgICAgICAgfVxuICAgICAgICAgIGRhdGEuc3RhdHVzLnB1c2goe1xuICAgICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlN1Y2Nlc3MnKSxcbiAgICAgICAgICAgIGNzczogJ3N1Y2Nlc3MnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5pc0Z1bWJsZSkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5jaGVja0ZhaWxlZCA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5PYnN0YWNsZUZ1bWJsZScpXG4gICAgICAgICAgZGF0YS5zdGF0dXMucHVzaCh7XG4gICAgICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJyksXG4gICAgICAgICAgICBjc3M6ICdmdW1ibGUnXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRhLnN0cmluZ3MuY2hlY2tGYWlsZWQgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT2JzdGFjbGVGYWlsJylcbiAgICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICAgIG5hbWU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GYWlsdXJlJyksXG4gICAgICAgICAgICBjc3M6ICdmYWlsdXJlJ1xuICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkge1xuICAgICAgICBkYXRhLnN0cmluZ3MucGxheWVySW50ZW50aW9ucyA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5UcnlUb05lZ290aWF0ZUhhemFyZCdcbiAgICAgICAgKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuYmFycmllcikge1xuICAgICAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuVHJ5VG9HZXRQYXN0QmFycmllcnMnXG4gICAgICAgICAgKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhaykge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5wbGF5ZXJJbnRlbnRpb25zID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRyeVRvQnJlYWsnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2hlY2tSb2xsZWQpIHtcbiAgICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCkge1xuICAgICAgICAvLyBJZiB0aGUgY2FyZCBpcyByZXNvbHZlZCB0aGUgY2hlY2sgaXMgZnJvemVuXG4gICAgICAgIGRhdGEuaHRtbENoZWNrID0gYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suaW5saW5lQ2hlY2s/Lm91dGVySFRNTFxuICAgICAgfSBlbHNlIGRhdGEuaHRtbENoZWNrID0gYXdhaXQgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2suZ2V0SHRtbFJvbGwoKVxuICAgIH1cblxuICAgIC8vIGlmICh0aGlzLmRhdGEub2JqZWN0cz8uZmFpbGVkRGFtYWdlUm9sbCkge1xuICAgIC8vICAgaWYgKCFkYXRhLmRhdGEuYXJtb3IpIHtcbiAgICAvLyAgICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IpXG4gICAgLy8gICAgICAgZGF0YS5kYXRhLmFybW9yID1cbiAgICAvLyAgICAgICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGF0YS5kYXRhLmF0dHJpYnMuYXJtb3IudmFsdWUgfHwgMFxuICAgIC8vICAgfVxuICAgIC8vICAgaWYgKGRhdGEuZGF0YS5hcm1vcikge1xuICAgIC8vICAgICBpZiAoaXNOYU4oTnVtYmVyKGRhdGEuZGF0YS5hcm1vcikpKSBkYXRhLmRhdGEuYXJtb3IgPSBudWxsXG4gICAgLy8gICB9XG4gICAgLy8gfVxuXG4gICAgaWYgKHRoaXMuZGF0YS5zdGF0ZXMuY2FyZFJlc29sdmVkKSB7XG4gICAgICBkYXRhLnBsYXllckRhbWFnZVRha2VuID0gZmFsc2VcbiAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IGZhbHNlXG5cbiAgICAgIC8vIEhhcyB0aGUgb2JzdGFjbGUgY2hhbmdlZCA/XG4gICAgICBjb25zdCBkaWZmID0gdGhpcy5saXN0Q2hhbmdlcygpXG4gICAgICBpZiAoZGlmZi5jaGFuZ2VzKSB7XG4gICAgICAgIGRhdGEub2JzdGFsY2VEZWZpbml0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgIH1cblxuICAgICAgLy8gSXMgcGxheWVyIHRha2luZyBkYW1hZ2VcbiAgICAgIGlmICh0aGlzLmRhdGEub2JzdGFjbGUuaGFzRGFtYWdlICYmIHRoaXMuZGF0YS5vYmplY3RzPy5jaGVjaz8uaXNGYWlsdXJlKSB7XG4gICAgICAgIGRhdGEucGxheWVyRGFtYWdlVGFrZW4gPSB0cnVlXG4gICAgICAgIGRhdGEuaW5saW5lRGFtYWdlVGFrZW5Sb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWREYW1hZ2VSb2xsXG4gICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgICAvLyBpZiAoZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPCAwKVxuICAgICAgICAvLyAgIGRhdGEuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxuXG4gICAgICAgIGlmIChkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA9PT0gMCkge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Zb3VUYWtlTm9EYW1hZ2UnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc3RyaW5ncy5kYW1hZ2VUYWtlbiA9IGdhbWUuaTE4bi5mb3JtYXQoXG4gICAgICAgICAgICAnQ29DNy5Zb3VUYWtlU29tZURhbWFnZScsXG4gICAgICAgICAgICB7IGFtb3VudDogZGF0YS5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gfVxuICAgICAgICAgIClcbiAgICAgICAgfVxuICAgICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgICBuYW1lOlxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRvdGFsRGFtYWdlJykgK1xuICAgICAgICAgICAgYCA6JHtkYXRhLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbn1gXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCAmJlxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2s/LmlzRmFpbHVyZVxuICAgICAgKSB7XG4gICAgICAgIGRhdGEuYWN0aW9uTG9zdCA9IHRydWVcbiAgICAgICAgZGF0YS5zdHJpbmdzLmFjdGlvbkxvc3QgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuWW91TG9zdFRpbWUnKVxuICAgICAgICBkYXRhLmlubGluZUFjdGlvbkxvc3RSb2xsID0gY3JlYXRlSW5saW5lUm9sbChcbiAgICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsXG4gICAgICAgICk/Lm91dGVySFRNTFxuICAgICAgfVxuXG4gICAgICBkYXRhLnN0YXR1cy5wdXNoKHtcbiAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNhcmRSZXNvbHZlZCcpXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xuICAgICAgaWYgKHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICAgIGRhdGEuc3RyaW5ncy5maW5hbE91dGNvbWUgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTW92ZVRvTG9jYXRpb24nKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGF0YS5zdHJpbmdzLmZpbmFsT3V0Y29tZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAnQ29DNy5Eb250TW92ZVRvTG9jYXRpb24nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGRhdGFcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgR01VcGRhdGUgKCkge1xuICAgIGlmICghZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvQzc6IEdNVXBkYXRlIGNhbGxlZCBmcm9tIG5vbiBHTSB1c2VyJylcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQpIHtcbiAgICAgIC8vIENhcmQgaXMgcmVzb2x2ZWQsIGNvbXB1dGUgYWxsIGZvcm11bGFzIGFuZCBkYW1hZ2UuXG4gICAgICBpZiAodGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZERhbWFnZVJvbGw/LnRvdGFsKSB7XG4gICAgICAgIGNvbnN0IHRvdGFsRGFtYWdlID0gdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbC50b3RhbFxuICAgICAgICBjb25zdCBhcm1vclZhbHVlID0gdGhpcy5kYXRhLmZsYWdzLmlnbm9yZUFybW9yID8gMCA6IHRoaXMuZGF0YS5hcm1vclxuICAgICAgICBpZiAoQ29DN1V0aWxpdGllcy5pc0Zvcm11bGEoYXJtb3JWYWx1ZSkpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPSAoXG4gICAgICAgICAgICBhd2FpdCBuZXcgUm9sbChhcm1vclZhbHVlKS5yb2xsKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgICApLnRvdGFsXG4gICAgICAgIH0gZWxzZSBpZiAoIWlzTmFOKE51bWJlcihhcm1vclZhbHVlKSkpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuYXJtb3IgPSBOdW1iZXIoYXJtb3JWYWx1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4gPSB0b3RhbERhbWFnZSAtIHRoaXMuZGF0YS5hcm1vclxuICAgICAgICAgIGlmICh0aGlzLmRhdGEudG90YWxQbGF5ZXJEYW1hZ2VUYWtlbiA8IDApIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID0gMFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEucmVmbGVjdE9ic3RhbGVDaGFuZ2VzKSB7XG4gICAgICAgIHRoaXMuZGF0YS5yZWZsZWN0T2JzdGFsZUNoYW5nZXMgPSB0cnVlIC8vIEJ5IGRlZmF1bHQgcmVmbGVjdCBjaGFuZ2VzXG4gICAgICB9XG5cbiAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5tb3ZlUGxheWVyKSB7XG4gICAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID1cbiAgICAgICAgICAodGhpcy5kYXRhLnN0YXRlcy50cnlUb05lZ290aWF0ZSB8fCB0aGlzLmRhdGEub2JzdGFjbGUuaGF6YXJkKSAmJlxuICAgICAgICAgICF0aGlzLmRhdGEuc3RhdGVzLmZhaWxlZENvbnNlcXVlbmNlc1JvbGxlZFxuICAgICAgfVxuXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5iYXJyaWVyICYmXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMgJiZcbiAgICAgICAgdGhpcy5kYXRhLm9iamVjdHM/Lm9ic3RhY2xlRGFtYWdlUm9sbD8udG90YWxcbiAgICAgICkge1xuICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0aGlzLmRhdGEudG90YWxPYnN0YWNsZURhbWFnZSkge1xuICAgICAgICAgIHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlID1cbiAgICAgICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbC50b3RhbFxuICAgICAgICB9XG4gICAgICAgIGlmICh1bmRlZmluZWQgPT09IHRoaXMuZGF0YS5mbGFncy5vYnN0YWNsZURlc3RveWVkKSB7XG4gICAgICAgICAgdGhpcy5kYXRhLmZsYWdzLm9ic3RhY2xlRGVzdG95ZWQgPVxuICAgICAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLkhpdFBvaW50cyAtIHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlIDw9IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEuc3RhdGVzLmNsb3NlZCkge1xuICAgICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uQXJyYXkgPSBkdXBsaWNhdGUoXG4gICAgICAgIHRoaXMucGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb25BcnJheVxuICAgICAgKVxuICAgICAgdGhpcy5kYXRhLkVFQ19BQ1RJT04gPSB7IGRldGFjaERhdGE6IHRydWUgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXN5bmMgbG9jYWxDb21wdXRlICgpIHt9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyBhc3NpZ25PYmplY3RzICgpIHtcbiAgICBpZiAoXG4gICAgICB0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2sgJiZcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrPy5jb25zdHJ1Y3Rvcj8ubmFtZSA9PT0gJ09iamVjdCdcbiAgICApIHtcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrID0gQ29DN0NoZWNrLmZyb21EYXRhKHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrKVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzPy5vYnN0YWNsZURhbWFnZVJvbGwgJiZcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbD8uY29uc3RydWN0b3I/Lm5hbWUgPT09ICdPYmplY3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGwgPSBSb2xsLmZyb21EYXRhKFxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5vYnN0YWNsZURhbWFnZVJvbGxcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZERhbWFnZVJvbGwgJiZcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGw/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0J1xuICAgICkge1xuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbCA9IFJvbGwuZnJvbURhdGEoXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGxcbiAgICAgIClcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9iamVjdHM/LmZhaWxlZEFjdGlvblJvbGwgJiZcbiAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGw/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnT2JqZWN0J1xuICAgICkge1xuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbCA9IFJvbGwuZnJvbURhdGEoXG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGxcbiAgICAgIClcbiAgICB9XG4gIH1cblxuICAvKiogQG92ZXJyaWRlICovXG4gIGFzeW5jIGluaXRpYWxpemUgKCkge1xuICAgIC8vIGNvbnN0IGNoYXNlID0gYXdhaXQgZnJvbVV1aWQodGhpcy5kYXRhLmNoYXNlVXVpZClcbiAgICBpZiAoIXRoaXMuY2hhc2UpIHJldHVyblxuICAgIGlmICh0eXBlb2YgdGhpcy5jaGFzZS5hY3RpdmVQYXJ0aWNpcGFudERhdGE/LnV1aWQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YSA9PT0gJ3VuZGVmaW5lZCcpIHRoaXMuZGF0YSA9IHt9XG4gICAgaWYgKHR5cGVvZiB0aGlzLmRhdGEuc3RhdGVzID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhLnN0YXRlcyA9IHt9XG5cbiAgICAvLyBjb25zdCBsb2NhdGlvbiA9IGNoYXNlLmdldExvY2F0aW9uRGF0YSh0aGlzLmRhdGEubG9jYXRpb25VdWlkKVxuICAgIHRoaXMuZGF0YS5vYnN0YWNsZSA9IHRoaXMubG9jYXRpb24/Lm9ic3RhY2xlRGV0YWlscyAvLyBGZWVkIHRoZSBvYnN0YWNsZSBkZWZpbml0aW9uXG4gICAgLy8gdGhpcy5kYXRhLnBhcnRpY2lwYW50RGF0YSA9IGNoYXNlLmFjdGl2ZVBhcnRpY2lwYW50RGF0YVxuICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQgPSB0aGlzLmNoYXNlLmFjdGl2ZVBhcnRpY2lwYW50RGF0YS51dWlkXG5cbiAgICBpZiAodGhpcy5wYXJ0aWNpcGFudERhdGE/LmJvbnVzRGljZSA+IDApIHtcbiAgICAgIHRoaXMuZGF0YS5ib251c0RpY2UgPSB0aGlzLnBhcnRpY2lwYW50RGF0YS5ib251c0RpY2VcbiAgICAgIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gdHJ1ZVxuICAgICAgdGhpcy5kYXRhLmZsYWdzLmhhc0JvbnVzRGljZSA9IHRoaXMucGFydGljaXBhbnQuaGFzQm9udXNEaWNlXG4gICAgfVxuXG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uQXJyYXkgPSBkdXBsaWNhdGUoXG4gICAgICB0aGlzLnBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uQXJyYXlcbiAgICApXG4gICAgdGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uID0gdGhpcy5wYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCA9IDBcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudCAoKSB7XG4gICAgaWYgKCF0aGlzLnBhcnRpY2lwYW50RGF0YSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIC8vIGlmICghdGhpcy5fcGFydGljaXBhbnQpXG4gICAgLy8gICB0aGlzLl9wYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQodGhpcy5wYXJ0aWNpcGFudERhdGEpXG4gICAgLy8gcmV0dXJuIHRoaXMuX3BhcnRpY2lwYW50XG4gICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQodGhpcy5wYXJ0aWNpcGFudERhdGEpIC8vIFRPIFJFU0VUXG4gIH1cblxuICBnZXQgcGFydGljaXBhbnREYXRhICgpIHtcbiAgICBpZiAoIXRoaXMuY2hhc2UpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXRoaXMuZGF0YS5wYXJ0aWNpcGFudFV1aWQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5jaGFzZS5nZXRQYXJ0aWNpcGFudERhdGEodGhpcy5kYXRhLnBhcnRpY2lwYW50VXVpZClcbiAgfVxuXG4gIGdldCBsb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmNoYXNlKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgcmV0dXJuIHRoaXMuY2hhc2UuZ2V0TG9jYXRpb25EYXRhKHRoaXMuZGF0YS5sb2NhdGlvblV1aWQpXG4gIH1cblxuICBnZXQgb2JzdGFjbGUgKCkge1xuICAgIGlmICghdGhpcy5sb2NhdGlvbikgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLm9ic3RhY2xlRGV0YWlsc1xuICB9XG5cbiAgZ2V0IGNoYXNlICgpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5jaGFzZVV1aWQpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAoIXRoaXMuX2NoYXNlKSB0aGlzLl9jaGFzZSA9IENvQzdVdGlsaXRpZXMuU2Zyb21VdWlkKHRoaXMuZGF0YS5jaGFzZVV1aWQpXG4gICAgcmV0dXJuIHRoaXMuX2NoYXNlXG4gIH1cblxuICBnZXQgcm9sbCAoKSB7XG4gICAgbGV0IHJvbGxEYXRhXG4gICAgaWYgKHRoaXMucGFydGljaXBhbnQuYWN0b3IgJiYgdGhpcy5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZSkge1xuICAgICAgY29uc3QgYWN0b3JTa2lsbCA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZmluZChcbiAgICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmNoZWNrTmFtZVxuICAgICAgKVxuICAgICAgaWYgKHR5cGVvZiBhY3RvclNraWxsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByb2xsRGF0YSA9IGFjdG9yU2tpbGxcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJvbGxEYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcm9sbERhdGEuYWN0b3IgPSB7IGFjdG9yS2V5OiB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmlkIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUgJiYgdGhpcy5kYXRhLmNoZWNrVGhyZXNob2xkKSB7XG4gICAgICAgIHJvbGxEYXRhID0ge1xuICAgICAgICAgIHR5cGU6ICd2YWx1ZScsXG4gICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuZGF0YS5vYnN0YWNsZS5jaGVja05hbWUsXG4gICAgICAgICAgICB0aHJlc2hvbGQ6IHRoaXMuZGF0YS5jaGVja1RocmVzaG9sZFxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWN0b3I6IHtcbiAgICAgICAgICAgIG5hbWU6IHRoaXMucGFydGljaXBhbnQubmFtZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocm9sbERhdGEpIHtcbiAgICAgIHJvbGxEYXRhLmRpY2VNb2RpZmllciA9IHRoaXMuZGF0YT8uYm9udXNEaWNlIHx8IDBcbiAgICAgIHJvbGxEYXRhLmRpZmZpY3VsdHkgPSBDb0M3Q2hlY2suZGlmZmljdWx0eUxldmVsLnJlZ3VsYXJcbiAgICAgIHJvbGxEYXRhLmRlbnlQdXNoID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gcm9sbERhdGEgfHwgdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgdmFsaWRGYWlsZWRSb2xscyAoKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cz8uY2hlY2s/LmlzRmFpbHVyZSkgcmV0dXJuIGZhbHNlXG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNEYW1hZ2UpIHtcbiAgICAgIGNvbnN0IGRhbWFnZSA9XG4gICAgICAgIHR5cGVvZiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2UgPT09ICdudW1iZXInXG4gICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQ2hlY2tEYW1hZ2V9YFxuICAgICAgICAgIDogdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlXG4gICAgICBpZiAoIXRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZSkgcmV0dXJuIGZhbHNlXG4gICAgICBpZiAoXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZSAmJlxuICAgICAgICAhUm9sbC52YWxpZGF0ZShkYW1hZ2UpIC8vIFZhbGlkYXRlIG9ubHkgdGFrZSBhIHN0cmluZywgaWYgZGFtYWdlIGlzIGEgbnVtYmVyIGNvbnZlcnQgdG8gYSBzdHJpbmdcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRoaXMuZGF0YS5vYnN0YWNsZS5oYXphcmQgJiYgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0FjdGlvbkNvc3QpIHtcbiAgICAgIGNvbnN0IGFjdGlvbkNvc3QgPVxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QgPT09ICdudW1iZXInXG4gICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdH1gXG4gICAgICAgICAgOiB0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdFxuICAgICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdCkgcmV0dXJuIGZhbHNlXG4gICAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZEFjdGlvbkNvc3QgJiYgIVJvbGwudmFsaWRhdGUoYWN0aW9uQ29zdCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBnZXQgd2VhcG9uc09wdGlvbnMgKCkge1xuICAgIGNvbnN0IHdlYXBvbnMgPSBbXVxuICAgIHRoaXMucGFydGljaXBhbnQuYWN0b3I/Lml0ZW1UeXBlcz8ud2VhcG9uPy5mb3JFYWNoKHcgPT4ge1xuICAgICAgbGV0IGZvcm11bGEgPSB3LmRhdGEuZGF0YS5yYW5nZS5ub3JtYWwuZGFtYWdlXG4gICAgICBsZXQgZGIgPSB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRiXG4gICAgICBpZiAoZGIgPT09IG51bGwgfHwgTnVtYmVyKGRiKSA9PT0gMCkge1xuICAgICAgICBkYiA9ICcnXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkYiA9IGAke2RifWBcbiAgICAgIH1cblxuICAgICAgaWYgKGRiICYmICFkYi5zdGFydHNXaXRoKCctJykpIGRiID0gJysnICsgZGJcbiAgICAgIGlmICh3LmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFkZGIpIGZvcm11bGEgPSBmb3JtdWxhICsgZGJcbiAgICAgIGlmICh3LmRhdGEuZGF0YS5wcm9wZXJ0aWVzLmFoYmQpIGZvcm11bGEgPSBmb3JtdWxhICsgZGIgKyAnLzInXG4gICAgICB3ZWFwb25zLnB1c2goe1xuICAgICAgICBuYW1lOiBgJHt3LmRhdGEubmFtZX0gKCR7Zm9ybXVsYX0pYCxcbiAgICAgICAgZGFtYWdlOiBmb3JtdWxhLFxuICAgICAgICB1dWlkOiB3LnV1aWRcbiAgICAgIH0pXG4gICAgfSlcbiAgICB3ZWFwb25zLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgaWYgKFxuICAgICAgIXdlYXBvbnMuZmluZCh3ID0+XG4gICAgICAgIHcubmFtZVxuICAgICAgICAgIC50b1VwcGVyQ2FzZSgpXG4gICAgICAgICAgLnN0YXJ0c1dpdGgoXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVW5hcm1lZFdlYXBvbk5hbWUnKT8udG9VcHBlckNhc2UoKVxuICAgICAgICAgIClcbiAgICAgIClcbiAgICApIHtcbiAgICAgIGxldCBkYiA9ICcnXG4gICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICBkYiA9IHRoaXMucGFydGljaXBhbnQuYWN0b3IuZGJcbiAgICAgICAgaWYgKGRiICYmICFkYi5zdGFydHNXaXRoKCctJykpIGRiID0gJysnICsgZGJcbiAgICAgICAgaWYgKGRiID09PSBudWxsIHx8IE51bWJlcihkYikgPT09IDApIGRiID0gJydcbiAgICAgIH1cblxuICAgICAgd2VhcG9ucy51bnNoaWZ0KHtcbiAgICAgICAgbmFtZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlVuYXJtZWRXZWFwb25OYW1lJyl9ICgxRDMke2RifSlgLFxuICAgICAgICBkYW1hZ2U6IGAxRDMke2RifWAsXG4gICAgICAgIHV1aWQ6ICd1bmFybWVkJ1xuICAgICAgfSlcbiAgICB9XG5cbiAgICB3ZWFwb25zLnB1c2goe1xuICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk90aGVyJyksXG4gICAgICBkYW1hZ2U6IHRoaXMuZGF0YT8uY3VzdG9tV2VhcG9uRGFtYWdlIHx8IG51bGwsXG4gICAgICB1dWlkOiAwXG4gICAgfSlcbiAgICByZXR1cm4gd2VhcG9uc1xuICB9XG5cbiAgZ2V0IHVzZWRXZWFwb24gKCkge1xuICAgIGlmICghdGhpcy5kYXRhPy53ZWFwb25DaG9pY2UpIHtcbiAgICAgIGlmICghdGhpcy53ZWFwb25zT3B0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgaWYgKCF0aGlzLmRhdGEpIHRoaXMuZGF0YSA9IHt9IC8vIHVzZWxlc3MgISEhXG4gICAgICB0aGlzLmRhdGEud2VhcG9uQ2hvaWNlID0gdGhpcy53ZWFwb25zT3B0aW9uc1swXS51dWlkXG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS53ZWFwb25DaG9pY2UpIHtcbiAgICAgIGNvbnN0IHdlYXBvbiA9IHRoaXMud2VhcG9uc09wdGlvbnMuZmluZChcbiAgICAgICAgZSA9PiBlLnV1aWQgPT09IHRoaXMuZGF0YS53ZWFwb25DaG9pY2VcbiAgICAgIClcbiAgICAgIGlmICh3ZWFwb24pIHJldHVybiB3ZWFwb25cbiAgICB9XG4gIH1cblxuICBnZXQgaW5mbGljdGVkRGFtYWdlRm9ybXVsYSAoKSB7XG4gICAgaWYgKHRoaXMudXNlZFdlYXBvbikge1xuICAgICAgY29uc3Qgd2VhcG9uID0gdGhpcy51c2VkV2VhcG9uXG4gICAgICBpZiAod2VhcG9uICYmIHdlYXBvbi5kYW1hZ2UgJiYgUm9sbC52YWxpZGF0ZSh3ZWFwb24uZGFtYWdlKSkge1xuICAgICAgICByZXR1cm4gd2VhcG9uLmRhbWFnZVxuICAgICAgfVxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgdmFsaWRPYnN0YWNsZURhbWFnZSAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5kYXRhLm9ic3RhY2xlLmhhc0hpdFBvaW50cyAmJlxuICAgICAgIWlzTmFOKE51bWJlcih0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzKSkgJiZcbiAgICAgIE51bWJlcih0aGlzLmRhdGEub2JzdGFjbGUuSGl0UG9pbnRzKSA+IDAgJiZcbiAgICAgIHRoaXMuaW5mbGljdGVkRGFtYWdlRm9ybXVsYVxuICAgICkge1xuICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBnZXQgc3RyaW5ncyAoKSB7XG4gICAgY29uc3Qgc3RyaW5ncyA9IHt9XG4gICAgc3RyaW5ncy5kYW1hZ2VSb2xsUmVxdWVzdCA9IHRoaXMudXNlZFdlYXBvbi5uYW1lXG5cbiAgICByZXR1cm4gc3RyaW5nc1xuICB9XG5cbiAgLy8gQWN0aW9ucyA6XG4gIGFzeW5jIHZhbGlkYXRlQ2FyZCAob3B0aW9ucykge1xuICAgIGxldCBsb2FjdGlvbkNoYW5nZWRcbiAgICBsZXQgcGFydGljaXBhbnRDaGFnZWQgPSBmYWxzZVxuICAgIGNvbnN0IG9ic3RhY2xlVXBkYXRlID0ge31cbiAgICBvYnN0YWNsZVVwZGF0ZS5vYnN0YWNsZURldGFpbHMgPSB7fVxuICAgIGNvbnN0IHBhcnRpY2lwYW50VXBkYXRlID0ge31cbiAgICBpZiAodGhpcy5kYXRhLmZsYWdzLm9ic3RhY2xlRGVzdG95ZWQpIHtcbiAgICAgIGxvYWN0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlID0gZmFsc2VcbiAgICAgIG9ic3RhY2xlVXBkYXRlLm9ic3RhY2xlRGV0YWlscy5oYXphcmQgPSBmYWxzZVxuICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXIgPSBmYWxzZVxuICAgIH1cblxuICAgIGNvbnN0IGRpZmYgPSB0aGlzLmxpc3RDaGFuZ2VzKClcbiAgICBpZiAoZGlmZi5jaGFuZ2VzKSB7XG4gICAgICBpZiAodGhpcy5kYXRhLnJlZmxlY3RPYnN0YWxlQ2hhbmdlcykge1xuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkaWZmLm9ic3RhY2xlKSkge1xuICAgICAgICAgIGlmIChrZXkgIT09ICd0eXBlJykge1xuICAgICAgICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzW3ZhbHVlLmtleV0gPSB2YWx1ZS5uZXdcbiAgICAgICAgICAgIGxvYWN0aW9uQ2hhbmdlZCA9IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5kYXRhLnRvdGFsT2JzdGFjbGVEYW1hZ2UgPiAwICYmIHRoaXMuZGF0YS5vYnN0YWNsZS5oYXNIaXRQb2ludHMpIHtcbiAgICAgIGxldCByZW1haW5pbmdIcCA9IHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHNcbiAgICAgIHJlbWFpbmluZ0hwIC09IHRoaXMuZGF0YS50b3RhbE9ic3RhY2xlRGFtYWdlXG4gICAgICBpZiAocmVtYWluaW5nSHAgPCAwKSByZW1haW5pbmdIcCA9IDBcbiAgICAgIGlmICh0aGlzLm9ic3RhY2xlLkhpdFBvaW50cyAhPT0gcmVtYWluaW5nSHApIHtcbiAgICAgICAgb2JzdGFjbGVVcGRhdGUub2JzdGFjbGVEZXRhaWxzLkhpdFBvaW50cyA9IHJlbWFpbmluZ0hwXG4gICAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZS5IaXRQb2ludHMgPSByZW1haW5pbmdIcFxuICAgICAgICBsb2FjdGlvbkNoYW5nZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS50b3RhbFBsYXllckRhbWFnZVRha2VuID4gMCkge1xuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXG4gICAgICBpZiAodGhpcy5wYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICBhd2FpdCB0aGlzLnBhcnRpY2lwYW50LmFjdG9yLmRlYWxEYW1hZ2UoXG4gICAgICAgICAgdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW4sXG4gICAgICAgICAgeyBpZ25vcmVBcm1vcjogdHJ1ZSB9XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmhwID0gdGhpcy5wYXJ0aWNpcGFudERhdGEuaHBcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUuaHAgLT0gdGhpcy5kYXRhLnRvdGFsUGxheWVyRGFtYWdlVGFrZW5cbiAgICAgICAgaWYgKHBhcnRpY2lwYW50VXBkYXRlLmhwIDwgMCkgcGFydGljaXBhbnRVcGRhdGUuaHAgPSAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QgPiAwKSB7XG4gICAgICBwYXJ0aWNpcGFudENoYWdlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50VXBkYXRlLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPVxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50RGF0YS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zXG4gICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIC09IHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3RcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID09PSAndW5kZWZpbmVkJykgdGhpcy5kYXRhLmZsYWdzLmNvbnN1bWVCb251c0RpY2UgPSB0cnVlIC8vIEJvbnVzIGRpY2UgYXdhcmRlZCBkdXJpbmcgZmxvdyBhcmUgYmVpbmcgY29uc3VtZWRcblxuICAgIGlmICh0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSkge1xuICAgICAgcGFydGljaXBhbnRDaGFnZWQgPSB0cnVlXG4gICAgICBwYXJ0aWNpcGFudFVwZGF0ZS5ib251c0RpY2UgPSAwXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWlzTmFOKHRoaXMuZGF0YS5ib251c0RpY2UpICYmXG4gICAgICAgIHRoaXMuZGF0YS5ib251c0RpY2UgIT09IHRoaXMucGFydGljaXBhbnQuYm9udXNEaWNlXG4gICAgICApIHtcbiAgICAgICAgcGFydGljaXBhbnRVcGRhdGUuYm9udXNEaWNlID0gdGhpcy5kYXRhLmJvbnVzRGljZVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLmRhdGEubW92ZVBsYXllcikge1xuICAgICAgbGV0IHRhcmdldExvY2F0aW9uXG4gICAgICBpZiAodGhpcy5kYXRhLmZvcndhcmQpIHtcbiAgICAgICAgdGFyZ2V0TG9jYXRpb24gPSB0aGlzLmxvY2F0aW9uXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YXJnZXRMb2NhdGlvbiA9IHRoaXMuY2hhc2UuZ2V0TG9jYXRpb25TaGlmdCh0aGlzLmxvY2F0aW9uLnV1aWQsIHtcbiAgICAgICAgICBza2lwOiAtMVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICBpZiAodGFyZ2V0TG9jYXRpb24udXVpZCkge1xuICAgICAgICBhd2FpdCB0aGlzLmNoYXNlLm1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24oXG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudERhdGEudXVpZCxcbiAgICAgICAgICB0YXJnZXRMb2NhdGlvbi51dWlkLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNjcm9sbFRvTG9jYXRpb246IHRydWUsXG4gICAgICAgICAgICBhY3RpdmF0ZUxvY2F0aW9uOiBmYWxzZSxcbiAgICAgICAgICAgIHJlbmRlcjogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobG9hY3Rpb25DaGFuZ2VkKSB7XG4gICAgICBhd2FpdCB0aGlzLmNoYXNlLnVwZGF0ZUxvY2F0aW9uKHRoaXMubG9jYXRpb24udXVpZCwgb2JzdGFjbGVVcGRhdGUsIHtcbiAgICAgICAgcmVuZGVyOiBmYWxzZVxuICAgICAgfSlcbiAgICB9XG4gICAgaWYgKHBhcnRpY2lwYW50Q2hhZ2VkKSB7XG4gICAgICBhd2FpdCB0aGlzLmNoYXNlLnVwZGF0ZVBhcnRpY2lwYW50KFxuICAgICAgICB0aGlzLnBhcnRpY2lwYW50RGF0YS51dWlkLFxuICAgICAgICBwYXJ0aWNpcGFudFVwZGF0ZSxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICB9XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jbG9zZWQgPSB0cnVlXG4gICAgYXdhaXQgdGhpcy5jaGFzZS5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oKSAvLyBSZW5kZXIgd2lsbCBiZSBkb25lIHRoZXJlICFcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgZGVmaW5lT2JzdGFjbGUgKG9wdGlvbnMpIHtcbiAgICBpZiAoIXRoaXMuZGF0YS5zdGF0ZXMpIHRoaXMuZGF0YS5zdGF0ZXMgPSB7fVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEZWZpbmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB0cnlUb05lZ290aWF0ZU9ic3RhY2xlIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5icmVha09yTmVnb3RpYXRlRGVmaW5lZCA9IHRydWVcbiAgICB0aGlzLmRhdGEuc3RhdGVzLnRyeVRvTmVnb3RpYXRlID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHRyeVRvQnJlYWtEb3duT2JzdGFjbGUgKG9wdGlvbnMpIHtcbiAgICB0aGlzLmRhdGEuc3RhdGVzLmJyZWFrT3JOZWdvdGlhdGVEZWZpbmVkID0gdHJ1ZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgY2FuY2VsT2JzdGFjbGVEZWZpbml0aW9uIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5vYnN0YWNsZURlZmluZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGNhbmNlbEJyZWFrT3JQYXNzQ2hvaWNlIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEub2JzdGFjbGUuaGFzSGl0UG9pbnRzKSByZXR1cm4gdGhpcy5jYW5jZWxPYnN0YWNsZURlZmluaXRpb24oKVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMuYnJlYWtPck5lZ290aWF0ZURlZmluZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9OZWdvdGlhdGUgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMudHJ5VG9CcmVhayA9IGZhbHNlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJlcXVlc3RSb2xsIChvcHRpb25zKSB7XG4gICAgdGhpcy5kYXRhLnN0YXRlcy5wbGF5ZXJBY3Rpb25EZWZpbmVkID0gdHJ1ZVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyB0YWtlQ2F1dGlvdXNBcHByb2FjaCAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCkgdGhpcy5kYXRhLnRvdGFsQ2F1dGlvdXNBcHByb2FjaCA9IDBcbiAgICB0aGlzLmRhdGEudG90YWxDYXV0aW91c0FwcHJvYWNoICs9IDFcbiAgICB0aGlzLmRhdGEuYm9udXNEaWNlICs9IDFcbiAgICB0aGlzLmRhdGEudG90YWxBY3Rpb25Db3N0ICs9IDFcbiAgICBpZiAoIXRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlKSB7XG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuY29uc3VtZUJvbnVzRGljZSA9IHRydWVcbiAgICB9XG4gICAgaWYgKCF0aGlzLmRhdGEuZmxhZ3MuaGFzQm9udXNEaWNlKSB7XG4gICAgICB0aGlzLmRhdGEuZmxhZ3MuaGFzQm9udXNEaWNlID0gdHJ1ZVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLm1vdmVtZW50QWN0aW9uIDw9IHRoaXMuZGF0YS50b3RhbEFjdGlvbkNvc3QpIHsgLy8gQWxsIG1vdiBhY3Rpb24gaGF2ZSBiZWVuIHVzZWQgdG8gdGFrZSBjdWF0aW91cyBhcHByb2FjaC5cbiAgICAgIHRoaXMuZGF0YS5mbGFncy5jb25zdW1lQm9udXNEaWNlID0gZmFsc2UgLy8gRG8gbm90IGNvbnN1bWUgdGhlIGJvbnVzIGRpY2UuXG4gICAgICB0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gZmFsc2VcbiAgICB9XG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHJvbGxTa2lsbENoZWNrIChvcHRpb25zKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gb3B0aW9ucy5ldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Rpc2FibGVkJykpIHJldHVyblxuICAgIHRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdkaXNhYmxlZCcpXG4gICAgaWYgKCF0aGlzLnJvbGwpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdGhpbmdUb1JvbGwnKSlcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBpZiAoIXRoaXMuZGF0YS5vYmplY3RzKSB0aGlzLmRhdGEub2JqZWN0cyA9IHt9XG4gICAgdGhpcy5kYXRhLm9iamVjdHMuY2hlY2sgPSBDb0M3Q2hlY2suY3JlYXRlRnJvbUFjdG9yUm9sbERhdGEodGhpcy5yb2xsKVxuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMuY2hlY2spIHJldHVybiBmYWxzZVxuICAgIHRoaXMuZGF0YS5vYmplY3RzLmNoZWNrLmRlbnlQdXNoID0gdHJ1ZSAvLyBPYnN0YWNsZSBjaGVjayBjYW4ndCBiZSBwdXNoZWRcbiAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5fcGVyZm9ybSh7IGZvcmNlRFNOOiB0cnVlIH0pXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jaGVja1JvbGxlZCA9IHRydWVcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnZGlzYWJsZWQnKVxuICAgIGlmICh0aGlzLmRhdGEub2JqZWN0cy5jaGVjay5wYXNzZWQpIHtcbiAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZVxuICAgICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5kYXRhLmFybW9yID09PSAndW5kZWZpbmVkJyAmJiB0aGlzLnBhcnRpY2lwYW50LmFjdG9yKSB7XG4gICAgICAgIHRoaXMuZGF0YS5hcm1vciA9XG4gICAgICAgICAgdGhpcy5wYXJ0aWNpcGFudC5hY3Rvci5kYXRhLmRhdGEuYXR0cmlicy5hcm1vci52YWx1ZSB8fCAwXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIHVzZUx1Y2sgKG9wdGlvbnMpIHtcbiAgICBhd2FpdCBDb0M3Q2hlY2suYWx0ZXIodGhpcy5kYXRhLm9iamVjdHMuY2hlY2ssICd1c2VMdWNrJywge1xuICAgICAgdGFyZ2V0OiBvcHRpb25zLmV2ZW50LmN1cnJlbnRUYXJnZXQsXG4gICAgICB1cGRhdGU6IGZhbHNlXG4gICAgfSlcbiAgICBpZiAodGhpcy5kYXRhLm9iamVjdHMuY2hlY2sucGFzc2VkKSB7XG4gICAgICB0aGlzLmRhdGEuc3RhdGVzLmNhcmRSZXNvbHZlZCA9IHRydWVcbiAgICAgIHRoaXMuZGF0YS5tb3ZlUGxheWVyID0gdHJ1ZVxuICAgICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgfVxuICAgIHJldHVybiB0cnVlXG4gIH1cblxuICBhc3luYyByb2xsRmFpbENvbnNlcXVlbmNlcyAob3B0aW9ucykge1xuICAgIGlmICghdGhpcy5kYXRhLm9iamVjdHMpIHRoaXMuZGF0YS5vYmplY3RzID0ge31cbiAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhc0RhbWFnZSAmJiB0aGlzLmRhdGEub2JqZWN0cy5jaGVjaz8uaXNGYWlsdXJlKSB7XG4gICAgICBjb25zdCBkYW1hZ2UgPVxuICAgICAgICB0eXBlb2YgdGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlID09PSAnbnVtYmVyJ1xuICAgICAgICAgID8gYCR7dGhpcy5kYXRhLm9ic3RhY2xlLmZhaWxlZENoZWNrRGFtYWdlfWBcbiAgICAgICAgICA6IHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRDaGVja0RhbWFnZVxuICAgICAgdGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkRGFtYWdlUm9sbCA9IG5ldyBSb2xsKGRhbWFnZSlcbiAgICAgIGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZERhbWFnZVJvbGwuZXZhbHVhdGUoeyBhc3luYzogdHJ1ZSB9KVxuICAgIH1cbiAgICBpZiAodGhpcy5kYXRhLm9ic3RhY2xlLmhhemFyZCkge1xuICAgICAgaWYgKFxuICAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuaGFzQWN0aW9uQ29zdCAmJlxuICAgICAgICB0aGlzLmRhdGEub2JqZWN0cy5jaGVjaz8uaXNGYWlsdXJlXG4gICAgICApIHtcbiAgICAgICAgY29uc3QgYWN0aW9uQ29zdCA9XG4gICAgICAgICAgdHlwZW9mIHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0ID09PSAnbnVtYmVyJ1xuICAgICAgICAgICAgPyBgJHt0aGlzLmRhdGEub2JzdGFjbGUuZmFpbGVkQWN0aW9uQ29zdH1gXG4gICAgICAgICAgICA6IHRoaXMuZGF0YS5vYnN0YWNsZS5mYWlsZWRBY3Rpb25Db3N0XG4gICAgICAgIHRoaXMuZGF0YS5vYmplY3RzLmZhaWxlZEFjdGlvblJvbGwgPSBuZXcgUm9sbChhY3Rpb25Db3N0KVxuICAgICAgICBhd2FpdCB0aGlzLmRhdGEub2JqZWN0cy5mYWlsZWRBY3Rpb25Sb2xsLmV2YWx1YXRlKHsgYXN5bmM6IHRydWUgfSlcbiAgICAgICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAodGhpcy5kYXRhLm9iamVjdHMuZmFpbGVkQWN0aW9uUm9sbC50b3RhbCAtIDEpIC8vIDEgYWN0aW9uIGFscmVhZHkgc3BlbmQgZm9yIHNraWxsIGNoZWNrXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5mYWlsZWRDb25zZXF1ZW5jZXNSb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIGFzeW5jIGFza1JvbGxPYnN0YWNsZURhbWFnZSAob3B0aW9ucykge1xuICAgIHRoaXMuZGF0YS5zdGF0ZXMucGxheWVyQWN0aW9uRGVmaW5lZCA9IHRydWVcbiAgICByZXR1cm4gdHJ1ZVxuICB9XG5cbiAgYXN5bmMgcm9sbE9ic3RhY2xlRGFtYWdlIChvcHRpb25zKSB7XG4gICAgaWYgKCF0aGlzLmRhdGEub2JqZWN0cykgdGhpcy5kYXRhLm9iamVjdHMgPSB7fVxuICAgIHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbCA9IG5ldyBSb2xsKHRoaXMudXNlZFdlYXBvbj8uZGFtYWdlKVxuICAgIGF3YWl0IHRoaXMuZGF0YS5vYmplY3RzLm9ic3RhY2xlRGFtYWdlUm9sbC5ldmFsdWF0ZSh7IGFzeW5jOiB0cnVlIH0pXG4gICAgYXdhaXQgQ29DN0RpY2Uuc2hvd1JvbGxEaWNlM2QodGhpcy5kYXRhLm9iamVjdHMub2JzdGFjbGVEYW1hZ2VSb2xsKVxuICAgIHRoaXMuZGF0YS5zdGF0ZXMub2JzdGFjbGVEYW1hZ2VSb2xsZWQgPSB0cnVlXG4gICAgdGhpcy5kYXRhLnRvdGFsQWN0aW9uQ29zdCArPSAxXG4gICAgdGhpcy5kYXRhLnN0YXRlcy5jYXJkUmVzb2x2ZWQgPSB0cnVlXG4gICAgcmV0dXJuIHRydWVcbiAgfVxuXG4gIC8vIExpc3QgYWxsIGNoYW5nZXNcbiAgbGlzdENoYW5nZXMgKHZhbGlkYXRlID0gZmFsc2UpIHtcbiAgICBjb25zdCBkaWZmID0ge1xuICAgICAgb2JzdGFjbGU6IHt9LFxuICAgICAgcGxheWVyOiB7fSxcbiAgICAgIGNoYW5nZXM6IGZhbHNlXG4gICAgfVxuICAgIGNvbnN0IG5hbWVzID0ge1xuICAgICAgYmFycmllcjogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKSxcbiAgICAgIGhhemFyZDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKSxcbiAgICAgIGhhc0hpdFBvaW50czogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJyZWFrYWJsZScpLFxuICAgICAgSGl0UG9pbnRzOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuSGl0UG9pbnRzJyksXG4gICAgICBoYXNBY3Rpb25Db3N0OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWN0aW9uQ29zdCcpLFxuICAgICAgZmFpbGVkQWN0aW9uQ29zdDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFjdGlvbkNvc3QnKSxcbiAgICAgIGhhc0RhbWFnZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZpZ2h0QmFjaycpLFxuICAgICAgZmFpbGVkQ2hlY2tEYW1hZ2U6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5XZWFwb25EYW1hZ2UnKSxcbiAgICAgIGNoZWNrTmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNoZWNrJyksXG4gICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmFtZScpXG4gICAgfVxuXG4gICAgaWYgKHZhbGlkYXRlICYmICF0aGlzLmRhdGEudmFsaWRhdGlvbikge1xuICAgICAgdGhpcy5kYXRhLnZhbGlkYXRpb24gPSB7fVxuICAgIH1cblxuICAgIGNvbnN0IG5ld09ic3RhY2xlID0gZm91bmRyeS51dGlscy5kaWZmT2JqZWN0KFxuICAgICAgdGhpcy5vYnN0YWNsZSxcbiAgICAgIHRoaXMuZGF0YS5vYnN0YWNsZVxuICAgIClcbiAgICAvLyBjb25zdCBvbGRPYnN0YWNsZSA9IGZvdW5kcnkudXRpbHMuZGlmZk9iamVjdCh0aGlzLmRhdGEub2JzdGFjbGUsIHRoaXMub2JzdGFjbGUpXG5cbiAgICBmb3IgKGNvbnN0IFtrZXldIG9mIE9iamVjdC5lbnRyaWVzKG5ld09ic3RhY2xlKSkge1xuICAgICAgLy8gaWYgKCdiYXJyaWVyJyA9PSBrZXkgfHwgJ2hhemFyZCcgPT0ga2V5KVxuICAgICAgLy8ge1xuICAgICAgLy8gICBkaWZmLmNoYW5nZXMgPSB0cnVlXG4gICAgICAvLyAgIGRpZmYub2JzdGFjbGUudHlwZSA9IHtcbiAgICAgIC8vICAgICBvbGQ6IGdhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgIC8vICAgICAgIHRoaXMub2JzdGFjbGUuYmFycmllciA/ICdDb0M3LkJhcnJpZXInIDogJ0NvQzcuSGF6YXJkJ1xuICAgICAgLy8gICAgICksXG4gICAgICAvLyAgICAgbmV3OiBnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAvLyAgICAgICB0aGlzLmRhdGEub2JzdGFjbGUuYmFycmllciA/ICdDb0M3LkJhcnJpZXInIDogJ0NvQzcuSGF6YXJkJ1xuICAgICAgLy8gICAgICksXG4gICAgICAvLyAgICAga2V5OiAndHlwZScsXG4gICAgICAvLyAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlR5cGUnKVxuICAgICAgLy8gICB9XG4gICAgICAvLyAgIGlmICh2YWxpZGF0ZSkge1xuICAgICAgLy8gICAgIHRoaXMuZGF0YS52YWxpZGF0aW9uW2tleV0gPSB0cnVlXG4gICAgICAvLyAgICAgdGhpcy5kYXRhLnZhbGlkYXRpb24udHlwZSA9IHRydWVcbiAgICAgIC8vICAgfVxuICAgICAgLy8gfVxuICAgICAgLy8gZWxzZVxuICAgICAgLy8ge1xuICAgICAgaWYgKFxuICAgICAgICAhKFxuICAgICAgICAgIChuZXdPYnN0YWNsZVtrZXldID09PSAnJyAmJiB0aGlzLm9ic3RhY2xlW2tleV0gPT09IG51bGwpIHx8XG4gICAgICAgICAgKCFpc05hTihOdW1iZXIobmV3T2JzdGFjbGVba2V5XSkpICYmXG4gICAgICAgICAgICBOdW1iZXIobmV3T2JzdGFjbGVba2V5XSkgPT09IHRoaXMub2JzdGFjbGVba2V5XSlcbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIGRpZmYuY2hhbmdlcyA9IHRydWVcblxuICAgICAgICBkaWZmLm9ic3RhY2xlW2tleV0gPSB7XG4gICAgICAgICAgb2xkOiB0aGlzLm9ic3RhY2xlW2tleV0sXG4gICAgICAgICAgbmV3OiBuZXdPYnN0YWNsZVtrZXldLFxuICAgICAgICAgIG5hbWU6IG5hbWVzW2tleV0sXG4gICAgICAgICAga2V5XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbGlkYXRlKSB0aGlzLmRhdGEudmFsaWRhdGlvbltrZXldID0gdHJ1ZVxuICAgICAgfVxuICAgICAgLy8gfVxuICAgIH1cblxuICAgIHJldHVybiBkaWZmXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBjYW52YXMsIERpYWxvZywgZm91bmRyeSwgZ2FtZSwgbWVyZ2VPYmplY3QsIFBJWEksIFRva2VuLCBUb2tlbkRvY3VtZW50LCB1aSAqL1xuaW1wb3J0IHsgQ29DQWN0b3IgfSBmcm9tICcuLi8uLi9hY3RvcnMvYWN0b3IuanMnXG5pbXBvcnQgeyBDaGFzZU9ic3RhY2xlQ2FyZCB9IGZyb20gJy4uLy4uL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBfcGFydGljaXBhbnQsIHNvcnRCeVJvbGVBbmREZXggfSBmcm9tICcuL3BhcnRpY2lwYW50LmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXNlIGV4dGVuZHMgQ29DN0l0ZW0ge1xuICBjb25zdHJ1Y3RvciAoZGF0YSwgY29udGV4dCkge1xuICAgIGlmICh0eXBlb2YgZGF0YS5pbWcgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBkYXRhLmltZyA9ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3J1bm5pbmctc29saWQuc3ZnJ1xuICAgIH1cbiAgICBzdXBlcihkYXRhLCBjb250ZXh0KVxuICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHRcbiAgfVxuXG4gIC8vIEhhbmRsZSBwYXJ0aWNpcGFudHNcbiAgZ2V0IHBhcnRpY2lwYW50cyAoKSB7XG4gICAgY29uc3QgcExpc3QgPSBbXVxuICAgIGNvbnN0IHByZXlzID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICAuZmlsdGVyKHAgPT4gIXAuY2hhc2VyKVxuICAgICAgLm1hcChwID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocClcbiAgICAgIH0pXG4gICAgY29uc3QgY2hhc2VycyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgLmZpbHRlcihwID0+IHAuY2hhc2VyKVxuICAgICAgLm1hcChwID0+IHtcbiAgICAgICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocClcbiAgICAgIH0pXG4gICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICAvLyBwLmluZGV4ID0gcExpc3QubGVuZ3RoIC0gMVxuICAgICAgcC5hc3Npc3QgPSBbXVxuICAgICAgaWYgKHAuY2hhc2VyKSB7XG4gICAgICAgIHAuYXNzaXN0ID0gY2hhc2Vyc1xuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjLnV1aWQgIT09IHAudXVpZCAmJiAhYy5oYXNNYXhCb251c0RpY2UpXG4gICAgICAgICAgLm1hcChjID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IHV1aWQ6IGMudXVpZCwgbmFtZTogYy5uYW1lIH1cbiAgICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcC5hc3Npc3QgPSBwcmV5c1xuICAgICAgICAgIC5maWx0ZXIoYyA9PiBjLnV1aWQgIT09IHAudXVpZCAmJiAhYy5oYXNNYXhCb251c0RpY2UpXG4gICAgICAgICAgLm1hcChjID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7IHV1aWQ6IGMudXVpZCwgbmFtZTogYy5uYW1lIH1cbiAgICAgICAgICB9KVxuICAgICAgfVxuICAgICAgY29uc3QgcGFydGljcGFudCA9IG5ldyBfcGFydGljaXBhbnQocClcbiAgICAgIC8vIHBhcnRpY3BhbnQubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24oIHBhcnRpY3BhbnQudXVpZCkgLy8gUmVjdXJzaXZpdHlcbiAgICAgIHBMaXN0LnB1c2gocGFydGljcGFudClcbiAgICB9KVxuICAgIHJldHVybiBwTGlzdFxuICB9XG5cbiAgZ2V0IHBhcnRpY2lwYW50c09iamVjdCAoKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5wYXJ0aWNpcGFudHNcbiAgICBwYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIHAubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocC51dWlkKVxuICAgIH0pXG4gICAgcmV0dXJuIHBhcnRpY2lwYW50c1xuICB9XG5cbiAgZ2V0IGFjdGl2ZVBhcnRpY2lwYW50RGF0YSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gcC5hY3RpdmUpXG4gIH1cblxuICBnZXQgYWN0aXZlQWN0b3IgKCkge1xuICAgIGNvbnN0IHAgPSB0aGlzLmFjdGl2ZVBhcnRpY2lwYW50RGF0YVxuICAgIGlmICghcCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChwLmRvY1V1aWQpIHtcbiAgICAgIHJldHVybiBDb0M3VXRpbGl0aWVzLmdldEFjdG9yRnJvbUtleShwLmRvY1V1aWQpXG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGdldCBwYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92ICgpIHtcbiAgICBjb25zdCBwTGlzdCA9IHRoaXMuYWN0dWFsUGFydGljaXBhbnRzLnNvcnQoXG4gICAgICAoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3ZcbiAgICApXG4gICAgcExpc3QuZm9yRWFjaChwID0+IHtcbiAgICAgIHAubG9jYXRpb24gPSB0aGlzLmdldFBhcnRpY2lwYW50TG9jYXRpb24ocC51dWlkKVxuICAgIH0pXG4gICAgcmV0dXJuIHBMaXN0XG4gIH1cblxuICBnZXQgcGFydGljaXBhbnRzQnlJbml0aWF0aXZlICgpIHtcbiAgICBjb25zdCBwTGlzdCA9IHRoaXMuYWN0dWFsUGFydGljaXBhbnRzLnNvcnQoXG4gICAgICAoYSwgYikgPT4gYi5pbml0aWF0aXZlIC0gYS5pbml0aWF0aXZlXG4gICAgKVxuICAgIHBMaXN0LmZvckVhY2gocCA9PiB7XG4gICAgICBwLmxvY2F0aW9uID0gdGhpcy5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHAudXVpZClcbiAgICB9KVxuICAgIHJldHVybiBwTGlzdFxuICB9XG5cbiAgZ2V0IHByZXlzICgpIHtcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gIXAuaXNDaGFzZXIgJiYgcC5pc1ZhbGlkKSB8fCBbXVxuICB9XG5cbiAgZ2V0IGNoYXNlcnMgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiBwLmlzQ2hhc2VyICYmIHAuaXNWYWxpZCkgfHwgW11cbiAgfVxuXG4gIGdldCBhbGxIYXZlVmFsaWRNb3YgKCkge1xuICAgIHJldHVybiB0aGlzLnBhcnRpY2lwYW50cy5ldmVyeShlID0+IGUuaGFzVmFsaWRNb3YpXG4gIH1cblxuICBnZXQgYWxsSGF2ZVNwZWVkUm9sbCAoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFydGljaXBhbnRzLmV2ZXJ5KHAgPT4gcC5zcGVlZENoZWNrPy5yb2xsZWQpXG4gIH1cblxuICBnZXRQYXJ0aWNpcGFudExvY2F0aW9uIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBpZiAoIXRoaXMuc3lzdGVtLmxvY2F0aW9ucz8ubGlzdD8ubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuICAgIGlmICghdGhpcy5zdGFydGVkKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5sb2NhdGlvbnNcblxuICAgIGNvbnN0IGxvY2F0aW9uID0gbG9jYXRpb25zLmZpbmQobCA9PiB7XG4gICAgICBjb25zdCBscCA9IGwucGFydGljaXBhbnRzPy5maW5kKHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWQpXG4gICAgICByZXR1cm4gISFscFxuICAgIH0pXG4gICAgaWYgKGxvY2F0aW9uKSB7XG4gICAgICByZXR1cm4gbG9jYXRpb25cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0UGFydGljaXBhbnREYXRhIChwYXJ0aWNpcGFudFV1aWQpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBpZiAocGFydGljaXBhbnQpIHJldHVybiBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShwYXJ0aWNpcGFudCkgLy8gVE9ETyA6IGNoZWNrIGlmIHdlIG5lZWQgdG8gZHVwbGljYXRlXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0UGFydGljaXBhbnQgKHBhcnRpY2lwYW50VXVpZCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50RGF0YSA9IHRoaXMuZ2V0UGFydGljaXBhbnREYXRhKHBhcnRpY2lwYW50VXVpZClcbiAgICBpZiAocGFydGljaXBhbnREYXRhKSByZXR1cm4gbmV3IF9wYXJ0aWNpcGFudChwYXJ0aWNpcGFudERhdGEpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IG5leHRBY3RpdmVQYXJ0aWNpcGFudCAoKSB7XG4gICAgaWYgKCF0aGlzLnN0YXJ0ZWQpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUuZmluZChcbiAgICAgIHAgPT4gcC5kYXRhLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPiAwXG4gICAgKVxuICB9XG5cbiAgZ2V0IHNsb3dlc3RQcmV5ICgpIHtcbiAgICBjb25zdCBwcmV5cyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3YpXG4gICAgICA/LmZpbHRlcihwID0+IHAuaXNQcmV5KVxuICAgIGlmIChwcmV5cy5sZW5ndGggPiAwKSByZXR1cm4gcHJleXNbMF1cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBnZXQgZmFzdGVzdENoYXNlciAoKSB7XG4gICAgY29uc3QgY2hhc2VycyA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgICAuc29ydCgoYSwgYikgPT4gYS5hZGp1c3RlZE1vdiAtIGIuYWRqdXN0ZWRNb3YpXG4gICAgICA/LmZpbHRlcihwID0+IHAuaXNDaGFzZXIpXG4gICAgaWYgKGNoYXNlcnMubGVuZ3RoID4gMCkgcmV0dXJuIGNoYXNlcnMuc2xpY2UoLTEpLnBvcCgpXG4gICAgcmV0dXJuIHVuZGVmaW5lZFxuICB9XG5cbiAgZ2V0IGFjdHVhbFBhcnRpY2lwYW50cyAoKSB7XG4gICAgY29uc3Qgc2xvd2VzdFByZXkgPSB0aGlzLnNsb3dlc3RQcmV5XG4gICAgY29uc3QgZmFzdGVzdENoYXNlciA9IHRoaXMuZmFzdGVzdENoYXNlclxuICAgIGxldCBwTGlzdCA9IHRoaXMucGFydGljaXBhbnRzXG4gICAgaWYgKCF0aGlzLnN5c3RlbS5pbmNsdWRlTGF0ZWNvbWVycyAmJiBzbG93ZXN0UHJleSkge1xuICAgICAgcExpc3QgPSBwTGlzdC5maWx0ZXIocCA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgcC5pc1ByZXkgfHwgKHAuaXNDaGFzZXIgJiYgcC5hZGp1c3RlZE1vdiA+PSBzbG93ZXN0UHJleS5hZGp1c3RlZE1vdilcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuc3lzdGVtLmluY2x1ZGVFc2NhcGVkICYmIGZhc3Rlc3RDaGFzZXIpIHtcbiAgICAgIHBMaXN0ID0gcExpc3QuZmlsdGVyKHAgPT4ge1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIHAuaXNDaGFzZXIgfHwgKHAuaXNQcmV5ICYmIHAuYWRqdXN0ZWRNb3YgPD0gZmFzdGVzdENoYXNlci5hZGp1c3RlZE1vdilcbiAgICAgICAgKVxuICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gcExpc3RcbiAgfVxuXG4gIGdldCBzbG93ZXN0UGFydGljaXBhbnQgKCkge1xuICAgIGNvbnN0IHBMaXN0ID0gdGhpcy5wYXJ0aWNpcGFudHNCeUFkanVzdGVkTW92XG4gICAgaWYgKHBMaXN0Lmxlbmd0aCA+IDApIHJldHVybiBwTGlzdFswXVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZVBhcnRpY2lwYW50cyAobGlzdCwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSB0aGlzLmNsZWFuUGFydGljaXBhbnRMaXN0KGxpc3QpXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyB1cGRhdGVQYXJ0aWNpcGFudCAocGFydGljaWFudFV1aWQsIHVwZGF0ZURhdGEsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgY29uc3QgdXBkYXRlID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodXBkYXRlRGF0YSlcbiAgICBjb25zdCBwYXJ0aWNpcGFudEluZGV4ID0gcGFydGljaXBhbnRzLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaWFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBpZiAocGFydGljaXBhbnRJbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodXBkYXRlLnV1aWQpIGRlbGV0ZSB1cGRhdGUudXVpZFxuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QocGFydGljaXBhbnRzW3BhcnRpY2lwYW50SW5kZXhdLCB1cGRhdGUsIHtcbiAgICAgIG92ZXJ3cml0ZTogdHJ1ZVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgY2xlYW5QYXJ0aWNpcGFudExpc3QgKGxpc3QpIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gbGlzdCB8fCBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgbGlzdC5mb3JFYWNoKHAgPT4ge1xuICAgICAgbGV0IGRhdGFcbiAgICAgIGlmIChwLmNvbnN0cnVjdG9yLm5hbWUgPT09ICdfcGFydGljaXBhbnQnKSB7XG4gICAgICAgIGRhdGEgPSBwLmRhdGFcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRhdGEgPSBwXG4gICAgICB9XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZEluZGV4KHBhcnRpY2lwYW50c0RhdGEsIGRhdGEudXVpZClcbiAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YS5wdXNoKGRhdGEpXG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUGFydGljaXBhbnREYXRhTWlzc2luZycpKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YVtpbmRleF0gPSBkYXRhXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gcGFydGljaXBhbnRzRGF0YVxuICB9XG5cbiAgYXN5bmMgYXNzaXN0UGFydGljaXBhbnQgKFxuICAgIGFzc2lzdGFudFV1aWQsXG4gICAgYmVuZWZpY2lhcnlVdWlkLFxuICAgIHsgdXNlTW92ZW1lbnRBY3Rpb25zID0gdHJ1ZSwgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgYXNzaXN0YW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChhc3Npc3RhbnRVdWlkKVxuICAgIGNvbnN0IGJlbmVmaWNpYXJ5ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChiZW5lZmljaWFyeVV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IGFzc2lzdGFudEluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IGFzc2lzdGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBjb25zdCBiZW5lZmljaWFyeUluZGV4ID0gcGFydGljaXBhbnRzRGF0YS5maW5kSW5kZXgoXG4gICAgICBwID0+IGJlbmVmaWNpYXJ5VXVpZCA9PT0gcC51dWlkXG4gICAgKVxuXG4gICAgaWYgKCFhc3Npc3RhbnQgfHwgIWJlbmVmaWNpYXJ5KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QYXJ0aWNpcGFudE5vdEZvdW5kJykpXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgaWYgKGJlbmVmaWNpYXJ5Lmhhc01heEJvbnVzRGljZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5FcnJvckJlbmVmaWNpYXJ5QXRNYXhCb251cycsIHtcbiAgICAgICAgICBuYW1lOiBiZW5lZmljaWFyeS5uYW1lXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgaWYgKHVzZU1vdmVtZW50QWN0aW9ucykge1xuICAgICAgaWYgKGFzc2lzdGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgMSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnROb3RFbm91Z2hNb3ZlbWVudCcsIHtcbiAgICAgICAgICAgIGFzc2lzdGFudFV1aWQsXG4gICAgICAgICAgICBhY3Rpb25zOiBhc3Npc3RhbnQuY3VycmVudE1vdmVtZW50QWN0aW9uc1xuICAgICAgICAgIH0pXG4gICAgICAgIClcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgYXNzaXN0YW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKC0xKVxuICAgICAgcGFydGljaXBhbnRzRGF0YVthc3Npc3RhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShhc3Npc3RhbnQuZGF0YSlcbiAgICB9XG5cbiAgICBiZW5lZmljaWFyeS5hZGRCb251c0RpY2UoKVxuICAgIHBhcnRpY2lwYW50c0RhdGFbYmVuZWZpY2lhcnlJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIGJlbmVmaWNpYXJ5LmRhdGFcbiAgICApXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIHRvZ2dsZUJvbnVzRGljZSAocGFydGljaXBhbnRVdWlkLCBkaWNlTnVtYmVyLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcblxuICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG4gICAgaWYgKHBhcnRpY2lwYW50LmJvbnVzRGljZSA+PSBkaWNlTnVtYmVyKSBwYXJ0aWNpcGFudC5yZW1vdmVCb251c0RpY2UoKVxuICAgIGVsc2UgcGFydGljaXBhbnQuYWRkQm9udXNEaWNlKClcbiAgICBwYXJ0aWNpcGFudHNEYXRhW3BhcnRpY2lwYW50SW5kZXhdID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgKVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBhc3luYyBjYXV0aW91c0FwcHJvYWNoIChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgeyB1c2VNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLCByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudFV1aWROb3RGb3VuZCcsIHtcbiAgICAgICAgICBwYXJ0aWNpcGFudFV1aWRcbiAgICAgICAgfSlcbiAgICAgIClcbiAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudHNEYXRhID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUoXG4gICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICApXG4gICAgY29uc3QgcGFydGljaXBhbnRJbmRleCA9IHBhcnRpY2lwYW50c0RhdGEuZmluZEluZGV4KFxuICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgPT09IHAudXVpZFxuICAgIClcbiAgICBpZiAocGFydGljaXBhbnQuaGFzTWF4Qm9udXNEaWNlKSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICBnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkVycm9yUGFydGljaXBhbnRBdE1heEJvbnVzJywge1xuICAgICAgICAgIHBhcnRpY2lwYW50VXVpZFxuICAgICAgICB9KVxuICAgICAgKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh1c2VNb3ZlbWVudEFjdGlvbnMpIHtcbiAgICAgIGlmIChwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgMSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnROb3RFbm91Z2hNb3ZlbWVudCcsIHtcbiAgICAgICAgICAgIGFzc2lzdGFudFV1aWQ6IHBhcnRpY2lwYW50VXVpZCxcbiAgICAgICAgICAgIGFjdGlvbnM6IHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIHBhcnRpY2lwYW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKC0xKVxuICAgIH1cbiAgICBwYXJ0aWNpcGFudC5hZGRCb251c0RpY2UoKVxuICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHBhcnRpY2lwYW50LmRhdGFcbiAgICApXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIGFsdGVyUGFydGljaXBhbnRNb3ZlbWVudEFjdGlvbiAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIGNvdW50LFxuICAgIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcblxuICAgIGlmICghcGFydGljaXBhbnQpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnRVdWlkTm90Rm91bmQnLCB7XG4gICAgICAgICAgcGFydGljaXBhbnRVdWlkXG4gICAgICAgIH0pXG4gICAgICApXG4gICAgICByZXR1cm4gdW5kZWZpbmVkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG5cbiAgICBwYXJ0aWNpcGFudC5hbHRlck1vdmVtZW50QWN0aW9ucyhjb3VudClcblxuICAgIHBhcnRpY2lwYW50c0RhdGFbcGFydGljaXBhbnRJbmRleF0gPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgIHBhcnRpY2lwYW50LmRhdGFcbiAgICApXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoXG4gICAgICB7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzRGF0YSB9LFxuICAgICAgeyByZW5kZXIgfVxuICAgIClcbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybiAoe1xuICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgIGFjdGl2YXRlTG9jYXRpb24gPSB0cnVlLFxuICAgIHJlbmRlciA9IHRydWUsXG4gICAgaHRtbCA9IG51bGxcbiAgfSA9IHt9KSB7XG4gICAgY29uc3QgYWN0aXZlUGFydGljaXBhbnQgPSB0aGlzLm5leHRBY3RpdmVQYXJ0aWNpcGFudFxuICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbixcbiAgICAgIHJlbmRlcixcbiAgICAgIGh0bWxcbiAgICB9XG4gICAgaWYgKCFhY3RpdmVQYXJ0aWNpcGFudCkgcmV0dXJuIHRoaXMuYWN0aXZhdGVQYXJ0aWNpcGFudCh1bmRlZmluZWQsIG9wdGlvbnMpXG4gICAgcmV0dXJuIHRoaXMuYWN0aXZhdGVQYXJ0aWNpcGFudChhY3RpdmVQYXJ0aWNpcGFudC51dWlkLCBvcHRpb25zKVxuICB9XG5cbiAgYXN5bmMgYWN0aXZhdGVQYXJ0aWNpcGFudCAoXG4gICAgcGFydGljaXBhbnRVdWlkLFxuICAgIHtcbiAgICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgICAgYWN0aXZhdGVMb2NhdGlvbiA9IHRydWUsXG4gICAgICByZW5kZXIgPSB0cnVlLFxuICAgICAgaHRtbCA9IG51bGxcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgZGF0YVVwZGF0ZSA9IHRoaXMuZ2V0QWN0aXZhdGVQYXJ0aWNpcGFudFVwZGF0ZURhdGEocGFydGljaXBhbnRVdWlkLCB7XG4gICAgICBzY3JvbGxUb0xvY2F0aW9uLFxuICAgICAgYWN0aXZlTG9jYXRpb246IGFjdGl2YXRlTG9jYXRpb24sXG4gICAgICBodG1sXG4gICAgfSlcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShkYXRhVXBkYXRlLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgZ2V0QWN0aXZhdGVQYXJ0aWNpcGFudFVwZGF0ZURhdGEgKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICB7IHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLCBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSwgaHRtbCA9IG51bGwgfSA9IHt9XG4gICkge1xuICAgIGNvbnN0IHBVdWlkID0gcGFydGljaXBhbnRVdWlkXG4gICAgLy8gICA/IHBhcnRpY2lwYW50VXVpZFxuICAgIC8vICAgOiB0aGlzLnBhcnRpY2lwYW50c0J5SW5pdGlhdGl2ZVswXT8udXVpZFxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGFVcGRhdGUgPSB7fVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBkZWxldGUgcC5hY3RpdmVcbiAgICAgIGlmIChwVXVpZCAmJiBwVXVpZCA9PT0gcC51dWlkKSBwLmFjdGl2ZSA9IHRydWVcbiAgICB9KVxuICAgIHBhcnRpY2lwYW50c0RhdGFVcGRhdGVbJ3N5c3RlbS5wYXJ0aWNpcGFudHMnXSA9IHBhcnRpY2lwYW50c1xuXG4gICAgY29uc3QgcGFydGljaXBhbnRMb2NhdGlvbiA9IHRoaXMuZ2V0UGFydGljaXBhbnRMb2NhdGlvbihwVXVpZClcbiAgICBsZXQgbG9jYXRpb25zRGF0YVVwZGF0ZSA9IG51bGxcbiAgICBpZiAocGFydGljaXBhbnRMb2NhdGlvbikge1xuICAgICAgaWYgKGFjdGl2YXRlTG9jYXRpb24pIHtcbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZSA9IHRoaXMuZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEoXG4gICAgICAgICAgcGFydGljaXBhbnRMb2NhdGlvbi51dWlkLFxuICAgICAgICAgIHsgc2Nyb2xsVG9Mb2NhdGlvbiwgaHRtbCB9XG4gICAgICAgIClcbiAgICAgIH0gZWxzZSBpZiAoc2Nyb2xsVG9Mb2NhdGlvbikge1xuICAgICAgICBsb2NhdGlvbnNEYXRhVXBkYXRlID0ge31cbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nXSA9XG4gICAgICAgICAgdGhpcy5jaGFzZVRyYWNrQ3VycmVudFNjcm9sbFBvc2l0aW9uXG4gICAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGVbJ3N5c3RlbS5zY3JvbGwuY2hhc2VUcmFjay50byddID1cbiAgICAgICAgICB0aGlzLmdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uKHBhcnRpY2lwYW50TG9jYXRpb24udXVpZCwge1xuICAgICAgICAgICAgaHRtbFxuICAgICAgICAgIH0pXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uc0RhdGFVcGRhdGUgPSB0aGlzLmdldEFjdGl2YXRlTG9jYXRpb25VcGRhdGVEYXRhKHVuZGVmaW5lZCwge1xuICAgICAgICBzY3JvbGxUb0xvY2F0aW9uXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChsb2NhdGlvbnNEYXRhVXBkYXRlKSB7XG4gICAgICByZXR1cm4gZm91bmRyeS51dGlscy5tZXJnZU9iamVjdChcbiAgICAgICAgcGFydGljaXBhbnRzRGF0YVVwZGF0ZSxcbiAgICAgICAgbG9jYXRpb25zRGF0YVVwZGF0ZVxuICAgICAgKVxuICAgIH0gZWxzZSByZXR1cm4gcGFydGljaXBhbnRzRGF0YVVwZGF0ZVxuICB9XG5cbiAgYWN0aXZlUGFydGljaXBhbnRPYnN0YWNsZUNoZWNrIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeyBtb3ZlUGFydGljaXBhbnQgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBjYXJkID0gbmV3IENoYXNlT2JzdGFjbGVDYXJkKHtcbiAgICAgIGNoYXNlVXVpZDogdGhpcy51dWlkLFxuICAgICAgbG9jYXRpb25VdWlkLFxuICAgICAgbW92ZVBhcnRpY2lwYW50LFxuICAgICAgZm9yd2FyZDogbG9jYXRpb25VdWlkICE9PSB0aGlzLmFjdGl2ZUxvY2F0aW9uLnV1aWRcbiAgICB9KVxuICAgIGNhcmQudG9NZXNzYWdlKClcblxuICAgIC8vIGNvbnN0IHRlc3QgPSBuZXcgdGVzdENhcmQoKVxuICAgIC8vIHRlc3QuaW5pdGlhbGl6ZSh7fSlcbiAgICAvLyB0ZXN0LnRvTWVzc2FnZSgpXG4gIH1cblxuICAvLyBIYW5kbGUgcm91bmRzXG5cbiAgYXN5bmMgcHJvZ3Jlc3NUb05leHRSb3VuZCAoeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgcC5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgICBwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgKz0gcC5tb3ZlbWVudEFjdGlvblxuICAgICAgICBpZiAocC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zID4gcC5tb3ZlbWVudEFjdGlvbikge1xuICAgICAgICAgIHAuY3VycmVudE1vdmVtZW50QWN0aW9ucyA9IHAubW92ZW1lbnRBY3Rpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICB0aGlzLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybih7IHJlbmRlciB9KVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhc3luYyB1cGRhdGVSb2xsIChyb2xsU3RyaW5nKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSB7XG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmZyb21Sb2xsU3RyaW5nKHJvbGxTdHJpbmcpXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICAgIDogW11cbiAgICAgIGNvbnN0IGluZGV4ID0gcGFydGljaXBhbnRzLmZpbmRJbmRleChwID0+IHAucm9sbFV1aWQgPT09IHJvbGwudXVpZClcbiAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBkYXRhOiByb2xsU3RyaW5nLFxuICAgICAgICB0eXBlOiAnaW52b2tlJyxcbiAgICAgICAgbWV0aG9kOiAndXBkYXRlUm9sbCcsXG4gICAgICAgIGl0ZW06IHRoaXMudXVpZFxuICAgICAgfVxuICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgIH1cbiAgfVxuXG4gIC8vIGhhbmRsZSBsb2NhdGlvbnNcbiAgZ2V0IGxvY2F0aW9ucyAoKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5zdGFydGVkXG4gICAgICA/IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICAgIDogW11cbiAgICAgIDogdGhpcy5pbml0VHJhY2tcbiAgICB0aGlzLnByb2Nlc3NMb2NhdGlvbnMobG9jYXRpb25zKVxuICAgIHJldHVybiBsb2NhdGlvbnNcbiAgfVxuXG4gIGdldExvY2F0aW9uRGF0YSAobG9jYXRpb25VdWlkLCB7IGR1cGxpY2F0ZURhdGEgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZURhdGFcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5sb2NhdGlvbnMpXG4gICAgICA6IHRoaXMubG9jYXRpb25zXG4gICAgcmV0dXJuIGxvY2F0aW9ucy5maW5kKGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gIH1cblxuICBwcm9jZXNzTG9jYXRpb25zIChsb2NhdGlvbnMpIHtcbiAgICBpZiAoIWxvY2F0aW9ucz8ubGVuZ3RoKSByZXR1cm5cbiAgICBsb2NhdGlvbnNbMF0uZmlyc3QgPSB0cnVlXG5cbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgbG9jYXRpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgY29uc3QgY2xhc3NlcyA9IFtdXG4gICAgICBjb25zdCBsb2NhdGlvbiA9IGxvY2F0aW9uc1tpbmRleF1cbiAgICAgIGlmICghbG9jYXRpb24ubmFtZSkgY2xhc3Nlcy5wdXNoKCdlbXB0eScpXG4gICAgICBpZiAobG9jYXRpb24uYWN0aXZlKSBjbGFzc2VzLnB1c2goJ2FjdGl2ZScpXG4gICAgICBpZiAobG9jYXRpb24uaW5pdCAmJiAhdGhpcy5zdGFydGVkKSBjbGFzc2VzLnB1c2goJ2luaXQnKVxuICAgICAgbG9jYXRpb24uY3NzQ2xhc3NlcyA9IGNsYXNzZXMuam9pbignICcpXG4gICAgfVxuXG4gICAgaWYgKGxvY2F0aW9ucy5sZW5ndGggPiAxKSBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdLmxhc3QgPSB0cnVlXG5cbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcbiAgICAgICAgbC5wYXJ0aWNpcGFudHMgPSBsLnBhcnRpY2lwYW50cy5maWx0ZXIocCA9PiAhKHAgPT09IG51bGwpKVxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGwucGFydGljaXBhbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgZWxlbSA9IGwucGFydGljaXBhbnRzW2ldIC8vIEluaXQgdHJhY2sgPSBvbmx5IHV1aWQsIHVwZGF0ZSBsb2NhdGlvbiBsaXN0IGNoYW5nZSBmb3IgdXVpZFxuXG4gICAgICAgICAgLy8gdWkubm90aWZpY2F0aW9ucy5lcnJvcihgVHlwZSA6ICR7dHlwZW9mIGVsZW19YClcbiAgICAgICAgICBsZXQgcFxuICAgICAgICAgIGlmICh0eXBlb2YgZWxlbSA9PT0gJ3N0cmluZycgfHwgZWxlbSBpbnN0YW5jZW9mIFN0cmluZykge1xuICAgICAgICAgICAgcCA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50cy5maW5kKHAgPT4gZWxlbSA9PT0gcC51dWlkKSAvLyBSZXRyaWV2ZSBwYXJ0aWNpcGFudCBkYXRhIGZyb20gbGlzdC5cbiAgICAgICAgICB9IGVsc2UgaWYgKGVsZW0/LmNvbnN0cnVjdG9yPy5uYW1lID09PSAnX3BhcnRpY2lwYW50Jykge1xuICAgICAgICAgICAgcCA9IHVuZGVmaW5lZCAvLyBwYXJ0aWNpcGFudCBpcyBhbHJlYWR5IHByb2Nlc3NlZC5cbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihcbiAgICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlBhcnRpY2lwYW50QWxyZWFkeVByb2Nlc3NlZCcpXG4gICAgICAgICAgICApXG4gICAgICAgICAgfSBlbHNlIHAgPSB1bmRlZmluZWRcblxuICAgICAgICAgIGlmICh0eXBlb2YgcCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGwucGFydGljaXBhbnRzW2ldID0gbmV3IF9wYXJ0aWNpcGFudChwKSAvLyByZXBsYWNlIHV1aWQgd2l0aCBfcGFydGljaXBhbnRcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gcGFydGljaXBhbnRzLnB1c2goIG51bGwpXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAnVW5kZWZpbmVkIHBhdGljaXBhbnQgd2hpbGUgcHJvY2Vzc2luZyBwYXJ0aWNpcGFudHMgYXJyYXknXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGwucGFydGljaXBhbnRzLnNvcnQoc29ydEJ5Um9sZUFuZERleCkgLy8gVE9ETyA6IHRlc3QgaWYgc29ydGluZyB3b3Jrc1xuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBnZXQgaW5pdFRyYWNrICgpIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QgfHxcbiAgICAgIHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aCA9PT0gMFxuICAgICkge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cblxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IFtdIC8vICEhISEhISEgbG9jYXRpb25zIHZzIGluaXQgbG9jYXRpb25zICEhIVxuXG4gICAgY29uc3QgaW5pdCA9IHRoaXMuc3RhcnRpbmdMaW5lXG4gICAgbGV0IGxvY2F0aW9uc0luZGV4U3RhcnQsIGluaXRJbmRleFN0YXJ0LCBsb2NhdGlvbnNMZW5ndGhcbiAgICBpZiAoaW5pdC5sZW5ndGggPD0gMCkgbG9jYXRpb25zSW5kZXhTdGFydCA9IDBcbiAgICBlbHNlIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4ID49IGluaXQubGVuZ3RoKSB7XG4gICAgICBsb2NhdGlvbnNJbmRleFN0YXJ0ID0gMFxuICAgIH0gZWxzZSBsb2NhdGlvbnNJbmRleFN0YXJ0ID0gaW5pdC5sZW5ndGggLSB0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4XG5cbiAgICBpZiAodGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCA8PSAwKSBpbml0SW5kZXhTdGFydCA9IDBcbiAgICBlbHNlIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4IDw9IGluaXQubGVuZ3RoKSBpbml0SW5kZXhTdGFydCA9IDBcbiAgICBlbHNlIGluaXRJbmRleFN0YXJ0ID0gdGhpcy5zeXN0ZW0uc3RhcnRpbmdJbmRleCAtIGluaXQubGVuZ3RoXG5cbiAgICBpZiAobG9jYXRpb25zSW5kZXhTdGFydCA9PT0gMCkge1xuICAgICAgbG9jYXRpb25zTGVuZ3RoID0gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QubGVuZ3RoXG4gICAgfSBlbHNlIHtcbiAgICAgIGxvY2F0aW9uc0xlbmd0aCA9XG4gICAgICAgIHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aCArIGxvY2F0aW9uc0luZGV4U3RhcnRcbiAgICB9XG5cbiAgICBpZiAoaW5pdC5sZW5ndGggIT09IDApIHtcbiAgICAgIGlmICh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4IDwgMCkge1xuICAgICAgICBmb3IgKFxuICAgICAgICAgIGxldCBpbmRleCA9IDA7XG4gICAgICAgICAgaW5kZXggPCBNYXRoLmFicyh0aGlzLnN5c3RlbS5zdGFydGluZ0luZGV4KTtcbiAgICAgICAgICBpbmRleCsrXG4gICAgICAgICkge1xuICAgICAgICAgIGluaXQucHVzaCh7XG4gICAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgICAgaW5pdDogdHJ1ZSxcbiAgICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgICB9KVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgY2hhc2VMb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMpXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGxvY2F0aW9uc0xlbmd0aDsgaW5kZXgrKykge1xuICAgICAgbGV0IGxvY2F0aW9uID0ge31cbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IFtdXG4gICAgICBpZiAoXG4gICAgICAgIGluZGV4ID49IGxvY2F0aW9uc0luZGV4U3RhcnQgJiZcbiAgICAgICAgaW5kZXggLSBsb2NhdGlvbnNJbmRleFN0YXJ0IDwgY2hhc2VMb2NhdGlvbnMubGlzdC5sZW5ndGhcbiAgICAgICkge1xuICAgICAgICBsb2NhdGlvbiA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICAgIGNoYXNlTG9jYXRpb25zLmxpc3RbaW5kZXggLSBsb2NhdGlvbnNJbmRleFN0YXJ0XVxuICAgICAgICApXG4gICAgICAgIGxvY2F0aW9uLmluaXQgPSBmYWxzZVxuICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHM/LmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgaWYgKHAgIT0gbnVsbCkgcGFydGljaXBhbnRzLnB1c2gocClcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGlmIChpbmRleCA+PSBpbml0SW5kZXhTdGFydCAmJiBpbmRleCAtIGluaXRJbmRleFN0YXJ0IDwgaW5pdC5sZW5ndGgpIHtcbiAgICAgICAgbWVyZ2VPYmplY3QobG9jYXRpb24sIGluaXRbaW5kZXggLSBpbml0SW5kZXhTdGFydF0sIHtcbiAgICAgICAgICBvdmVyd3JpdGU6IGZhbHNlXG4gICAgICAgIH0pXG5cbiAgICAgICAgaW5pdFtpbmRleCAtIGluaXRJbmRleFN0YXJ0XS5wYXJ0aWNpcGFudHM/LmZvckVhY2gocCA9PiB7XG4gICAgICAgICAgaWYgKHAgIT0gbnVsbCkgcGFydGljaXBhbnRzLnB1c2gocClcbiAgICAgICAgfSlcblxuICAgICAgICBsb2NhdGlvbi5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHNcbiAgICAgIH1cbiAgICAgIGxvY2F0aW9uLmZpcnN0ID0gZmFsc2VcbiAgICAgIGxvY2F0aW9uLmVuZCA9IGZhbHNlXG4gICAgICBsb2NhdGlvbnMucHVzaChsb2NhdGlvbilcbiAgICB9XG5cbiAgICByZXR1cm4gbG9jYXRpb25zXG4gIH1cblxuICBnZXQgc3RhcnRpbmdMaW5lICgpIHtcbiAgICAvLyBHZXQgcHJleXMgYW5kIGNoZWNrIGZvciBlc2NhcGVkXG4gICAgY29uc3QgcHJleXMgPSB0aGlzLnN5c3RlbS5pbmNsdWRlRXNjYXBlZFxuICAgICAgPyB0aGlzLnByZXlzXG4gICAgICA6IHRoaXMucHJleXM/LmZpbHRlcihwID0+ICFwLmRhdGEuZXNjYXBlZClcbiAgICAvLyBHZXQgY2hhc2Vyc1xuICAgIGNvbnN0IGNoYXNlcnMgPSB0aGlzLnN5c3RlbS5pbmNsdWRlTGF0ZWNvbWVyc1xuICAgICAgPyB0aGlzLmNoYXNlcnNcbiAgICAgIDogdGhpcy5jaGFzZXJzPy5maWx0ZXIoYyA9PiAhYy5kYXRhLmV4Y2x1ZGVkKVxuXG4gICAgLy8gUmVjdXJzaXZpdHkgISEgd2l0aCBnZXRQYXJ0aWNpcGFudExvY2F0aW9uIGFuZCBnZXQgcGFydGljaXBhbnRzXG5cbiAgICAvLyBJZiBubyBwcmV5IG9yIG5vIGNoYXNzZXJcbiAgICAvLyBpZiAoMCA9PSBjaGFzZXJzLmxlbmd0aCkge1xuICAgIC8vICAgdWkubm90aWZpY2F0aW9ucy53YXJuKCdObyBjaGFzZXJzJylcbiAgICAvLyAgIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyB9XG4gICAgLy8gaWYgKDAgPT0gcHJleXMubGVuZ3RoKSB7XG4gICAgLy8gICB1aS5ub3RpZmljYXRpb25zLndhcm4oJ05vIHByZXlzJylcbiAgICAvLyAgIHJldHVybiB1bmRlZmluZWRcbiAgICAvLyB9XG5cbiAgICAvLyBCdWlsZCBzdGFydGluZyB0cmFja1xuICAgIGNvbnN0IGNoYXNlVHJhY2sgPSBbXVxuXG4gICAgY29uc3QgY2hhc2Vyc01pbk1vdiA9IHRoaXMuZmluZE1pbk1vdihjaGFzZXJzKVxuICAgIGNvbnN0IGNoYXNlcnNNYXhNb3YgPSB0aGlzLmZpbmRNYXhNb3YoY2hhc2VycylcbiAgICBjb25zdCBwcmV5c01pbk1vdiA9IHRoaXMuZmluZE1pbk1vdihwcmV5cylcbiAgICBjb25zdCBwcmV5c01heE1vdiA9IHRoaXMuZmluZE1heE1vdihwcmV5cylcblxuICAgIGlmIChjaGFzZXJzTWluTW92ICE9PSAtMSAmJiBjaGFzZXJzTWF4TW92ICE9PSAtMSkge1xuICAgICAgLy8gQWRkIGNoYXNlcnMgdG8gdGhlIHRyYWNrLlxuICAgICAgZm9yIChsZXQgbW92ID0gY2hhc2Vyc01pbk1vdjsgbW92IDw9IGNoYXNlcnNNYXhNb3Y7IG1vdisrKSB7XG4gICAgICAgIC8vIEZpbmQgYWxsIHdpdGggdGhhdCBtb3ZcbiAgICAgICAgY29uc3QgbG9jYXRpb24gPSB7XG4gICAgICAgICAgdXVpZDogdGhpcy5nZW5lcmF0ZU5ld1V1aWQoKSxcbiAgICAgICAgICBpbml0OiB0cnVlLFxuICAgICAgICAgIHBhcnRpY2lwYW50czogW11cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2NhdGlvblBhcnRpY2lwYW50c0xpc3QgPSBjaGFzZXJzXG4gICAgICAgICAgLmZpbHRlcihwID0+IG1vdiA9PT0gcC5hZGp1c3RlZE1vdilcbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5kZXggLSBiLmRleClcbiAgICAgICAgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0LmZvckVhY2gocCA9PlxuICAgICAgICAgIGxvY2F0aW9uLnBhcnRpY2lwYW50cy5wdXNoKHAudXVpZClcbiAgICAgICAgKVxuICAgICAgICBjaGFzZVRyYWNrLnB1c2gobG9jYXRpb24pXG4gICAgICB9XG5cbiAgICAgIC8vIEFkZCBzcGFjZSBiZXR3ZWVuIGNoYXNlcnMgYW5kIHByZXlzLlxuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc3lzdGVtLnN0YXJ0aW5nUmFuZ2U7IGluZGV4KyspIHtcbiAgICAgICAgY2hhc2VUcmFjay5wdXNoKHtcbiAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChwcmV5c01pbk1vdiAhPT0gLTEgJiYgcHJleXNNYXhNb3YgIT09IC0xKSB7XG4gICAgICAvLyBBZGQgcHJleXMgdG8gdGhlIHRyYWNrLlxuICAgICAgZm9yIChsZXQgbW92ID0gcHJleXNNaW5Nb3Y7IG1vdiA8PSBwcmV5c01heE1vdjsgbW92KyspIHtcbiAgICAgICAgLy8gRmluZCBhbGwgd2l0aCB0aGF0IG1vdlxuICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHtcbiAgICAgICAgICB1dWlkOiB0aGlzLmdlbmVyYXRlTmV3VXVpZCgpLFxuICAgICAgICAgIGluaXQ6IHRydWUsXG4gICAgICAgICAgcGFydGljaXBhbnRzOiBbXVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uUGFydGljaXBhbnRzTGlzdCA9IHByZXlzXG4gICAgICAgICAgLmZpbHRlcihwID0+IG1vdiA9PT0gcC5hZGp1c3RlZE1vdilcbiAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYS5kZXggLSBiLmRleClcbiAgICAgICAgbG9jYXRpb25QYXJ0aWNpcGFudHNMaXN0LmZvckVhY2gocCA9PlxuICAgICAgICAgIGxvY2F0aW9uLnBhcnRpY2lwYW50cy5wdXNoKHAudXVpZClcbiAgICAgICAgKVxuICAgICAgICBjaGFzZVRyYWNrLnB1c2gobG9jYXRpb24pXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNoYXNlVHJhY2tcbiAgfVxuXG4gIGFzeW5jIHVwZGF0ZUxvY2F0aW9uc0xpc3QgKGxpc3QsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICAvLyBSZW1vdmUgYWxsIHVubmVjZXNzYXJ5IGl0ZW1zIChjc3NDbGFzcywgKVxuICAgIGNvbnN0IHVwZGF0ZWRMaXN0ID0gdGhpcy5jbGVhbkxvY2F0aW9uc0xpc3QobGlzdClcbiAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgIHsgJ3N5c3RlbS5sb2NhdGlvbnMubGlzdCc6IHVwZGF0ZWRMaXN0IH0sXG4gICAgICB7IHJlbmRlciB9XG4gICAgKVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlTG9jYXRpb24gKGxvY2F0aW9uVXVpZCwgdXBkYXRlRGF0YSwgeyByZW5kZXIgPSB0cnVlIH0gPSB7fSkge1xuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IHVwZGF0ZSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHVwZGF0ZURhdGEpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHJldHVybiB1bmRlZmluZWRcbiAgICBpZiAodXBkYXRlLnV1aWQpIGRlbGV0ZSB1cGRhdGUudXVpZFxuICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QobG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLCB1cGRhdGUsIHtcbiAgICAgIG92ZXJ3cml0ZTogdHJ1ZVxuICAgIH0pXG4gICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGNsZWFuTG9jYXRpb25zTGlzdCAobGlzdCkge1xuICAgIGNvbnN0IHVwZGF0ZWRMaXN0ID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUobGlzdClcbiAgICBjb25zdCBwYXJ0aXBhbnRzVXVpZEFycmF5ID0gdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzLm1hcChwID0+IHAudXVpZClcblxuICAgIHVwZGF0ZWRMaXN0LmZvckVhY2gobCA9PiB7XG4gICAgICAvLyBkZWxldGUgbC5hY3RpdmVcbiAgICAgIGRlbGV0ZSBsLmNzc0NsYXNzZXNcbiAgICAgIGRlbGV0ZSBsLmZpcnN0XG4gICAgICBkZWxldGUgbC5sYXN0XG4gICAgICBkZWxldGUgbC5lbmRcbiAgICAgIGlmIChsLnBhcnRpY2lwYW50cyAmJiBsLnBhcnRpY2lwYW50cy5sZW5ndGgpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsLnBhcnRpY2lwYW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKHAgPT4gIShwID09PSBudWxsKSkgLy8gUmVtb3ZlIG51bGwgZWxlbWVudHNcbiAgICAgICAgICAvLyBSZXBsYWNlIF9QYXJ0aWNpcGFudHMgYnkgdXVpZFxuICAgICAgICAgIGlmIChsLnBhcnRpY2lwYW50c1tpXS5kYXRhPy51dWlkKSB7XG4gICAgICAgICAgICBsLnBhcnRpY2lwYW50c1tpXSA9IGwucGFydGljaXBhbnRzW2ldLmRhdGEudXVpZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbW92ZSB1bmtvd24gcGFydGljaWNwYW50c1xuICAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcih1dWlkID0+XG4gICAgICAgICAgcGFydGlwYW50c1V1aWRBcnJheS5pbmNsdWRlcyh1dWlkKVxuICAgICAgICApXG4gICAgICB9XG4gICAgfSlcblxuICAgIHJldHVybiB1cGRhdGVkTGlzdFxuICB9XG5cbiAgYXN5bmMgaW5zZXJ0TG9jYXRpb24gKFxuICAgIGluc2VydEF0VXVpZCxcbiAgICB7IHNoaWZ0ID0gMCwgbG9jRGF0YSA9IHt9LCByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgICAgIGRlbGV0ZSBsLmFjdGl2ZVxuICAgIH0pXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBpbnNlcnRBdFV1aWQgPT09IGwudXVpZClcbiAgICBpZiAobG9jYXRpb25JbmRleCA9PT0gLTEpIHtcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgICBjb25zdCBuZXdMb2NhdGlvbkluZGV4ID0gbG9jYXRpb25JbmRleCArIHNoaWZ0XG4gICAgaWYgKG5ld0xvY2F0aW9uSW5kZXggPiBsb2NhdGlvbnMubGVuZ3RoKSByZXR1cm4gZmFsc2VcbiAgICBjb25zdCBuZXdMb2NhdGlvbiA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKGxvY0RhdGEpXG4gICAgbmV3TG9jYXRpb24udXVpZCA9IHRoaXMuZ2VuZXJhdGVOZXdVdWlkKClcbiAgICBuZXdMb2NhdGlvbi5pbml0ID0gbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLmluaXRcbiAgICBuZXdMb2NhdGlvbi5hY3RpdmUgPSB0cnVlXG4gICAgbG9jYXRpb25zLnNwbGljZShuZXdMb2NhdGlvbkluZGV4LCAwLCBuZXdMb2NhdGlvbilcbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGFzeW5jIHJlbW92ZUxvY2F0aW9uICh1dWlkLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiB1dWlkID09PSBsLnV1aWQpXG4gICAgbG9jYXRpb25zLnNwbGljZShsb2NhdGlvbkluZGV4LCAxKVxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgZGVsZXRlIGwuYWN0aXZlXG4gICAgfSlcbiAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGxldCBpbmRleCA9IGxvY2F0aW9uSW5kZXggLSAxXG4gICAgICBpZiAoaW5kZXggPCAwKSBpbmRleCA9IDBcbiAgICAgIGxvY2F0aW9uc1tpbmRleF0uYWN0aXZlID0gdHJ1ZVxuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIGFzeW5jIGFjdGl2YXRlTG9jYXRpb24gKFxuICAgIGxvY2F0aW9uVXVpZCxcbiAgICB7IHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLCByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCB1cGRhdGVEYXRhID0gdGhpcy5nZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YShsb2NhdGlvblV1aWQsIHtcbiAgICAgIHNjcm9sbFRvTG9jYXRpb25cbiAgICB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlKHVwZGF0ZURhdGEsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBnZXRDbGVhckFjdGl2ZUxvY2F0aW9uVXBkYXRlRGF0YSAoe1xuICAgIHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLFxuICAgIGh0bWwgPSBudWxsXG4gIH0gPSB7fSkge1xuICAgIGNvbnN0IHVwZGF0ZURhdGEgPSB7fVxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0XG4gICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgOiBbXVxuICAgIGxvY2F0aW9ucy5mb3JFYWNoKGwgPT4ge1xuICAgICAgZGVsZXRlIGwuYWN0aXZlXG4gICAgfSlcbiAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubG9jYXRpb25zLmxpc3QnXSA9IHRoaXMuY2xlYW5Mb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcblxuICAgIGlmIChzY3JvbGxUb0xvY2F0aW9uKSB7XG4gICAgICB1cGRhdGVEYXRhWydzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2suZnJvbSddID0gMFxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLnRvJ10gPSAtMVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgZ2V0QWN0aXZhdGVMb2NhdGlvblVwZGF0ZURhdGEgKFxuICAgIGxvY2F0aW9uVXVpZCxcbiAgICB7IHNjcm9sbFRvTG9jYXRpb24gPSB0cnVlLCBodG1sID0gbnVsbCB9ID0ge31cbiAgKSB7XG4gICAgaWYgKCFsb2NhdGlvblV1aWQpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldENsZWFyQWN0aXZlTG9jYXRpb25VcGRhdGVEYXRhKHtcbiAgICAgICAgc2Nyb2xsVG9Mb2NhdGlvblxuICAgICAgfSlcbiAgICB9XG4gICAgY29uc3QgdXBkYXRlRGF0YSA9IHt9XG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3RcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICA6IFtdXG4gICAgbG9jYXRpb25zLmZvckVhY2gobCA9PiB7XG4gICAgICBkZWxldGUgbC5hY3RpdmVcbiAgICAgIGlmIChsb2NhdGlvblV1aWQgPT09IGwudXVpZCkgbC5hY3RpdmUgPSB0cnVlXG4gICAgfSlcbiAgICB1cGRhdGVEYXRhWydzeXN0ZW0ubG9jYXRpb25zLmxpc3QnXSA9IHRoaXMuY2xlYW5Mb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgICAvLyBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlcjogZmFsc2UgfSlcbiAgICBpZiAoc2Nyb2xsVG9Mb2NhdGlvbikge1xuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nXSA9XG4gICAgICAgIHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvblxuICAgICAgdXBkYXRlRGF0YVsnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLnRvJ10gPVxuICAgICAgICB0aGlzLmdldENoYXNlVHJhY2tMb2NhdGlvblNjcm9sbFBvc2l0aW9uKGxvY2F0aW9uVXVpZCwgeyBodG1sIH0pXG4gICAgICAvLyBhd2FpdCB0aGlzLnNldGNoYXNlVHJhY2tTY3JvbGwoe1xuICAgICAgLy8gICBmcm9tOiB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24sXG4gICAgICAvLyAgIHRvOiB0aGlzLmNoYXNlVHJhY2tBY3RpdmVMb2NhdGlvblNjcm9sbFBvc2l0aW9uXG4gICAgICAvLyB9KVxuICAgIH1cbiAgICByZXR1cm4gdXBkYXRlRGF0YVxuICB9XG5cbiAgLy8gTG9jYXRpb25zIG5hdmlnYXRpb25cbiAgZ2V0IGFjdGl2ZUxvY2F0aW9uICgpIHtcbiAgICBpZiAoIXRoaXMubG9jYXRpb25zKSByZXR1cm4gdW5kZWZpbmVkXG4gICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmxvY2F0aW9ucy5maW5kKGwgPT4gbC5hY3RpdmUpXG4gICAgaWYgKCFsb2NhdGlvbikgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChsb2NhdGlvbi5wYXJ0aWNpcGFudHM/Lmxlbmd0aCkgbG9jYXRpb24uaGFzUGFydGljaXBhbnQgPSB0cnVlXG4gICAgY29uc3QgYWN0b3IgPSB0aGlzLmFjdGl2ZUFjdG9yXG4gICAgaWYgKGFjdG9yKSB7XG4gICAgICBjb25zdCB0ZXN0ID0gYWN0b3IuZmluZChsb2NhdGlvbi5vYnN0YWNsZURldGFpbHM/LmNoZWNrTmFtZSlcbiAgICAgIGlmICh0ZXN0KSB7XG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9ySGFzU2tpbGwgPSB0cnVlXG4gICAgICAgIGxvY2F0aW9uLmFjdGl2ZUFjdG9yVGVzdCA9IHRlc3RcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGxvY2F0aW9uXG4gIH1cblxuICBnZXQgcHJldmlvdXNMb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmxvY2F0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gdGhpcy5sb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC5hY3RpdmUpXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gMCkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnNbYWN0aXZlSW5kZXggLSAxXVxuICAgIGNvbnN0IGFjdG9yID0gdGhpcy5hY3RpdmVBY3RvclxuICAgIGlmIChhY3Rvcikge1xuICAgICAgY29uc3QgdGVzdCA9IGFjdG9yLmZpbmQobG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpXG4gICAgICBpZiAodGVzdCkge1xuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3Rvckhhc1NraWxsID0gdHJ1ZVxuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3RvclRlc3QgPSB0ZXN0XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb2NhdGlvblxuICB9XG5cbiAgZ2V0IG5leHRMb2NhdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmxvY2F0aW9ucykgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGFjdGl2ZUluZGV4ID0gdGhpcy5sb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbC5hY3RpdmUpXG4gICAgaWYgKGFjdGl2ZUluZGV4ID09PSAtMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGlmIChhY3RpdmVJbmRleCA9PT0gdGhpcy5sb2NhdGlvbnMubGVuZ3RoIC0gMSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5sb2NhdGlvbnNbYWN0aXZlSW5kZXggKyAxXVxuICAgIGNvbnN0IGFjdG9yID0gdGhpcy5hY3RpdmVBY3RvclxuICAgIGlmIChhY3Rvcikge1xuICAgICAgY29uc3QgdGVzdCA9IGFjdG9yLmZpbmQobG9jYXRpb24ub2JzdGFjbGVEZXRhaWxzPy5jaGVja05hbWUpXG4gICAgICBpZiAodGVzdCkge1xuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3Rvckhhc1NraWxsID0gdHJ1ZVxuICAgICAgICBsb2NhdGlvbi5hY3RpdmVBY3RvclRlc3QgPSB0ZXN0XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBsb2NhdGlvblxuICB9XG5cbiAgYXN5bmMgbG9jYXRvckRyb3BwZWQgKGRhdGEpIHtcbiAgICBhd2FpdCB0aGlzLnNldExvY2F0aW9uQ29vcmRpbmF0ZXMoXG4gICAgICBkYXRhLmxvY2F0aW9uVXVpZCxcbiAgICAgIGRhdGEueCxcbiAgICAgIGRhdGEueSxcbiAgICAgIGRhdGEuc2NlbmVcbiAgICApXG4gIH1cblxuICBhc3luYyBzZXRMb2NhdGlvbkNvb3JkaW5hdGVzIChcbiAgICBsb2NhdGlvblV1aWQsXG4gICAgeCxcbiAgICB5LFxuICAgIHNjZW5lSWQsXG4gICAgeyByZW5kZXIgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5jb29yZGluYXRlcyA9IHsgeCwgeSwgc2NlbmU6IHNjZW5lSWQgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyIH0pXG4gIH1cblxuICBhc3luYyBjbGVhckFjdGl2ZUxvY2F0aW9uQ29vcmRpbmF0ZXMgKHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBpZiAodGhpcy5hY3RpdmVMb2NhdGlvbikge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMuY2xlYXJMb2NhdGlvbkNvb3JkaW5hdGVzKHRoaXMuYWN0aXZlTG9jYXRpb24udXVpZCwge1xuICAgICAgICByZW5kZXJcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgY2xlYXJMb2NhdGlvbkNvb3JkaW5hdGVzIChsb2NhdGlvblV1aWQsIHsgcmVuZGVyID0gdHJ1ZSB9ID0ge30pIHtcbiAgICBjb25zdCBsb2NhdGlvbnMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICBjb25zdCBsb2NhdGlvbkluZGV4ID0gbG9jYXRpb25zLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgIGRlbGV0ZSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0uY29vcmRpbmF0ZXNcblxuICAgIHJldHVybiBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zLCB7IHJlbmRlciB9KVxuICB9XG5cbiAgLy8gZ2V0IGFjdGl2ZVBhcnRpY2lwYW50SGF2ZUFjdGl2ZUxvY2F0aW9uU2tpbGwgKCl7XG4gIC8vICAgaWYoICF0aGlzLmFjdGl2ZUFjdG9yKSByZXR1cm4gZmFsc2VcbiAgLy8gICBpZiggdGhpcy5hY3RpdmVBY3Rvci5maW5kKCB0aGlzLmFjdGl2ZUxvY2F0aW9uLm9ic3RhY2xlRGV0YWlscz8uY2hlY2tOYW1lKSkgcmV0dXJuIHRydWVcbiAgLy8gICByZXR1cm4gZmFsc2VcbiAgLy8gfVxuXG4gIC8vIEhhbmRsZSBtZWNoYW5pY3NcbiAgYXN5bmMgY3V0VG9UaGVDaGFzZSAoKSB7XG4gICAgaWYgKCF0aGlzLmFsbEhhdmVTcGVlZFJvbGwpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTm90QWxsSGF2ZVNwZWVkUm9sbCcpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmFjdHVhbFBhcnRpY2lwYW50cz8ubGVuZ3RoIDwgMikge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5OZWVkTWluMlBhcnRpY2lwYW50cycpKVxuICAgICAgcmV0dXJuXG4gICAgfVxuICAgIGlmICh0aGlzLmFsbEhhdmVWYWxpZE1vdikge1xuICAgICAgLy8gVE9ETyA6IENoZWNrIGZvciBzcGVlZCByb2xsID8/XG5cbiAgICAgIC8vIENhbGN1bGF0ZSBtb3ZlbWVudCBhY3Rpb25zXG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgY29uc3QgbWluTW92ID0gdGhpcy5maW5kTWluTW92KHRoaXMuYWN0dWFsUGFydGljaXBhbnRzKVxuICAgICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICAgIC8vIHAuZGF0YS5tb3ZlbWVudEFjdGlvbiA9IDEgKyAocC5hZGp1c3RlZE1vdiAtIG1pbk1vdilcbiAgICAgICAgcC5jYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMobWluTW92KVxuICAgICAgICBwLmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSBwLm1vdmVtZW50QWN0aW9uXG4gICAgICAgIHAuYm9udXNEaWNlID0gMFxuICAgICAgfSlcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywgeyByZW5kZXI6IGZhbHNlIH0pXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QodGhpcy5sb2NhdGlvbnMsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgICAgYXdhaXQgdGhpcy5zdGFydCgpXG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcmVzdGFydCAoKSB7XG4gICAgLy8gYXdhaXQgdGhpcy5jbGVhbkxvY2F0aW9ucygpIC8vVHJhbnNmZXJyZWQgaW4gdXBkYXRlTG9jYXRpb25MaXN0XG4gICAgY29uc3QgbG9jYXRpb25zID0gdGhpcy5sb2NhdGlvbnMuZmlsdGVyKGwgPT4gIWwuaW5pdClcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvY2F0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGxvY2F0aW9uc1tpXS5wYXJ0aWNpcGFudHMpIGxvY2F0aW9uc1tpXS5wYXJ0aWNpcGFudHMgPSBbXVxuICAgICAgaWYgKGxvY2F0aW9uc1tpXS5hY3RpdmUpIGRlbGV0ZSBsb2NhdGlvbnNbaV0uYWN0aXZlXG4gICAgfVxuICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcGFydGljaXBhbnRzRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHBhcnRpY2lwYW50c0RhdGFbaV0uYWN0aXZlKSBkZWxldGUgcGFydGljaXBhbnRzRGF0YVtpXS5hY3RpdmVcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5zZXRjaGFzZVRyYWNrU2Nyb2xsKDAsIDAsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50c0RhdGEsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMuc3RvcCgpXG4gIH1cblxuICBnZXRMb2NhdGlvblNoaWZ0IChsb2NhdGlvblV1aWQsIHsgc2tpcCA9IDEgfSA9IHt9KSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3Qgb3JpZ2luSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT4gbG9jYXRpb25VdWlkID09PSBsLnV1aWQpXG4gICAgY29uc3QgZGVzdGluYXRpb25JbmRleCA9IG9yaWdpbkluZGV4ICsgc2tpcFxuICAgIGlmIChsb2NhdGlvbnMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbFxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4ID49IGxvY2F0aW9ucy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBsb2NhdGlvbnNbbG9jYXRpb25zLmxlbmd0aCAtIDFdXG4gICAgfVxuICAgIGlmIChkZXN0aW5hdGlvbkluZGV4IDwgMCkgcmV0dXJuIGxvY2F0aW9uc1swXVxuICAgIHJldHVybiBsb2NhdGlvbnNbZGVzdGluYXRpb25JbmRleF0gLy8gRVJST1IgTU9WRSAyIEZPUiBTS0lQICsxXG4gIH1cblxuICBhc3luYyByZW1vdmVQYXJ0aWNpcGFudCAocGFydGljaXBhbnRVdWlkLCB7IHJlbmRlciA9IHRydWUgfSA9IHt9KSB7XG4gICAgY29uc3QgcCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgIGF3YWl0IERpYWxvZy5jb25maXJtKHtcbiAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVtb3ZlUGFydGljaXBhbnQnKSxcbiAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUmVtb3ZlUGFydGljaXBhbnRIaW50Jywge1xuICAgICAgICBuYW1lOiBwLm5hbWVcbiAgICAgIH0pfTwvcD5gLFxuICAgICAgeWVzOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcnRpY2lwYW50c0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgICB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgICAgKVxuICAgICAgICBjb25zdCBuZXdQYXJ0aWNpcGFudHNEYXRhID0gcGFydGljaXBhbnRzRGF0YS5maWx0ZXIoXG4gICAgICAgICAgcCA9PiBwYXJ0aWNpcGFudFV1aWQgIT09IHAudXVpZFxuICAgICAgICApXG4gICAgICAgIGNvbnN0IGxvY2F0aW9uc0RhdGEgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShcbiAgICAgICAgICB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgICApXG4gICAgICAgIGxvY2F0aW9uc0RhdGEuZm9yRWFjaChsID0+IHtcbiAgICAgICAgICBpZiAobC5wYXJ0aWNpcGFudHMgJiYgbC5wYXJ0aWNpcGFudHMubGVuZ3RoKSB7XG4gICAgICAgICAgICBsLnBhcnRpY2lwYW50cyA9IGwucGFydGljaXBhbnRzLmZpbHRlcihcbiAgICAgICAgICAgICAgdXVpZCA9PiBwYXJ0aWNpcGFudFV1aWQgIT09IHV1aWRcbiAgICAgICAgICAgIClcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKG5ld1BhcnRpY2lwYW50c0RhdGEsIHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zRGF0YSwgeyByZW5kZXIgfSlcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgYXN5bmMgYWRkUGFydGljaXBhbnQgKFxuICAgIHBhcnRpY2lwYW50LFxuICAgIHtcbiAgICAgIHJlbmRlciA9IHRydWUsXG4gICAgICBsb2NhdGlvblV1aWQgPSBudWxsLFxuICAgICAgcmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLFxuICAgICAgdXBkYXRlID0gZmFsc2VcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IHRoaXMuc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBpZiAocGFydGljaXBhbnQuZGF0YS5jaGFzZVV1aWQpIGRlbGV0ZSBwYXJ0aWNpcGFudC5kYXRhLmNoYXNlVXVpZFxuICAgIGlmIChwYXJ0aWNpcGFudC5kYXRhLmxvY2F0aW9uVXVpZCkgZGVsZXRlIHBhcnRpY2lwYW50LmRhdGEubG9jYXRpb25VdWlkXG4gICAgaWYgKHBhcnRpY2lwYW50LmRhdGEudXBkYXRlKSBkZWxldGUgcGFydGljaXBhbnQuZGF0YS51cGRhdGVcblxuICAgIGlmICghcGFydGljaXBhbnQudXVpZCkge1xuICAgICAgbGV0IHVuaXF1ZSA9IGZhbHNlXG4gICAgICB3aGlsZSAoIXVuaXF1ZSkge1xuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnV1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgICAgICB1bmlxdWUgPVxuICAgICAgICAgIHBhcnRpY2lwYW50c0RhdGEuZmlsdGVyKHAgPT4gcC51dWlkID09PSBwYXJ0aWNpcGFudC51dWlkKS5sZW5ndGggPT09IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodXBkYXRlKSB7XG4gICAgICBpZiAocGFydGljaXBhbnQuY3VycmVudE1vdmVtZW50QWN0aW9ucyA+IHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uKSB7XG4gICAgICAgIHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnMgPSBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvblxuICAgICAgfVxuICAgICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gcGFydGljaXBhbnQudXVpZClcbiAgICAgIHBhcnRpY2lwYW50c0RhdGFbaW5kZXhdID0gcGFydGljaXBhbnQuZGF0YVxuICAgIH0gZWxzZSBwYXJ0aWNpcGFudHNEYXRhLnB1c2gocGFydGljaXBhbnQuZGF0YSlcblxuICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50c0RhdGEsIHtcbiAgICAgIHJlbmRlcjogcmVuZGVyICYmICF0aGlzLnN0YXJ0ZWQgJiYgIXRoaXMucmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnNcbiAgICB9KVxuXG4gICAgaWYgKHJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zKSB7XG4gICAgICBjb25zdCBzbG93ZXN0ID0gdGhpcy5zbG93ZXN0UGFydGljaXBhbnQ/LmFkanVzdGVkTW92XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLnBhcnRpY2lwYW50c1xuICAgICAgcGFydGljaXBhbnRzLmZvckVhY2gocCA9PiBwLmNhbGN1bGF0ZU1vdmVtZW50QWN0aW9ucyhzbG93ZXN0KSlcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlUGFydGljaXBhbnRzKHBhcnRpY2lwYW50cywge1xuICAgICAgICByZW5kZXI6IHJlbmRlciAmJiAhdGhpcy5zdGFydGVkXG4gICAgICB9KVxuICAgIH1cblxuICAgIGlmIChcbiAgICAgIHRoaXMuc3RhcnRlZCAmJlxuICAgICAgIShwYXJ0aWNpcGFudC5kYXRhLmVzY2FwZWQgfHwgcGFydGljaXBhbnQuZGF0YS5leGNsdWRlZClcbiAgICApIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9uc0RhdGEgPSB0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdFxuICAgICAgICA/IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKHRoaXMuc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgICA6IFtdXG5cbiAgICAgIGlmIChsb2NhdGlvbnNEYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FcnJvckVtcHR5TG9jYXRpb25zTGlzdCcpXG4gICAgICAgIClcbiAgICAgIH1cblxuICAgICAgbGV0IGxvY2F0aW9uSW5kZXggPSBsb2NhdGlvbnNEYXRhLmZpbmRJbmRleChsID0+IGxvY2F0aW9uVXVpZCA9PT0gbC51dWlkKVxuICAgICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSBsb2NhdGlvbkluZGV4ID0gMFxuICAgICAgaWYgKCFsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cykge1xuICAgICAgICBsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cyA9IFtdXG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIGxvY2F0aW9uc0RhdGFbbG9jYXRpb25JbmRleF0ucGFydGljaXBhbnRzLmZpbmRJbmRleChcbiAgICAgICAgICBwID0+IHAgPT09IHBhcnRpY2lwYW50LnV1aWRcbiAgICAgICAgKSA9PT0gLTFcbiAgICAgICkge1xuICAgICAgICBsb2NhdGlvbnNEYXRhW2xvY2F0aW9uSW5kZXhdLnBhcnRpY2lwYW50cy5wdXNoKHBhcnRpY2lwYW50LnV1aWQpXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zRGF0YSwgeyByZW5kZXIgfSlcbiAgICB9XG4gIH1cblxuICBhc3luYyBlZGl0UGFydGljaXBhbnQgKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICB7XG4gICAgICB1c2VNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLFxuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlUGFydGljaXBhbnQgPSB0cnVlLFxuICAgICAgcmVuZGVyID0gdHJ1ZVxuICAgIH0gPSB7fVxuICApIHt9XG5cbiAgLyoqXG4gICAqIE1vdmUgYSBwYXJ0aWNpcGFudCBmb3IgYSBudW1iZXIgb2YgbG9jYXRpb25zLlxuICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSBwYXJ0aWNpcGFudFV1aWQgICAgIFV1aWQgb2YgcGFydGljaXBhbnRcbiAgICogQHBhcmFtIHsqfSBsb2NhdGlvbk1vdmVkICAgICAgICAgICAgICAgICBOdW1iZXIgb2YgbG9jYXRpb25zIG1vdnJlZFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSAgICAgICAgICAgICAgICAgICAgICAgIFRvdGFsIG51bWJlciBvZiBsb2NhdGlvbnMgY3Jvc3NlZFxuICAgKi9cbiAgYXN5bmMgbW92ZVBhcnRpY2lwYW50IChcbiAgICBwYXJ0aWNpcGFudFV1aWQsXG4gICAgbG9jYXRpb25Nb3ZlZCxcbiAgICB7XG4gICAgICB1c2VNb3ZlbWVudEFjdGlvbnMgPSB0cnVlLFxuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFjdGl2YXRlUGFydGljaXBhbnQgPSB0cnVlLFxuICAgICAgcmVuZGVyID0gdHJ1ZVxuICAgIH0gPSB7fVxuICApIHtcbiAgICAvLyBjb25zdCBzZWxlY3RvciA9IGAjaXRlbS0ke3RoaXMuaWR9IC5jaGFzZS10cmFja2BcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBtb3ZlUGFydGljaXBhbnQgOiBKcXVlcnkgcm9vdDogJHskKCc6cm9vdCcpLmZpbmQoc2VsZWN0b3IpLnNjcm9sbExlZnQoKX1gKVxuICAgIGxldCBtb2RpZmllZCA9IGZhbHNlXG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgY29uc3Qgb3JpZ2luSW5kZXggPSBsb2NhdGlvbnMuZmluZEluZGV4KGwgPT5cbiAgICAgIGwucGFydGljaXBhbnRzPy5pbmNsdWRlcyhwYXJ0aWNpcGFudFV1aWQpXG4gICAgKVxuICAgIGxldCBkZXN0aW5hdGlvbkluZGV4ID0gb3JpZ2luSW5kZXggKyBsb2NhdGlvbk1vdmVkXG4gICAgaWYgKGRlc3RpbmF0aW9uSW5kZXggPiBsb2NhdGlvbnMubGVuZ3RoIC0gMSkge1xuICAgICAgZGVzdGluYXRpb25JbmRleCA9IGxvY2F0aW9ucy5sZW5ndGggLSAxXG4gICAgfVxuXG4gICAgaWYgKGRlc3RpbmF0aW9uSW5kZXggPCAwKSB7XG4gICAgICBkZXN0aW5hdGlvbkluZGV4ID0gMFxuICAgIH1cblxuICAgIGNvbnN0IHRvdGFsTW92ZSA9IGRlc3RpbmF0aW9uSW5kZXggLSBvcmlnaW5JbmRleFxuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzRGF0YSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgdGhpcy5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgKVxuICAgIGNvbnN0IHBhcnRpY2lwYW50SW5kZXggPSBwYXJ0aWNpcGFudHNEYXRhLmZpbmRJbmRleChcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWRcbiAgICApXG5cbiAgICBpZiAodXNlTW92ZW1lbnRBY3Rpb25zKSB7XG4gICAgICBpZiAoIXBhcnRpY2lwYW50KSB7XG4gICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoXG4gICAgICAgICAgZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5QYXJ0aWNpcGFudFV1aWROb3RGb3VuZCcsIHtcbiAgICAgICAgICAgIHBhcnRpY2lwYW50VXVpZDogdGhpcy5wYXJ0aWNpcGFudFV1aWRcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5jdXJyZW50TW92ZW1lbnRBY3Rpb25zIDwgTWF0aC5hYnModG90YWxNb3ZlKSkge1xuICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgIGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuUGFydGljaXBhbnROb3RFbm91Z2hNb3ZlbWVudCcsIHtcbiAgICAgICAgICAgIGFzc2lzdGFudFV1aWQ6IHBhcnRpY2lwYW50VXVpZCxcbiAgICAgICAgICAgIGFjdGlvbnM6IHBhcnRpY2lwYW50LmN1cnJlbnRNb3ZlbWVudEFjdGlvbnNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICAgIHJldHVybiB1bmRlZmluZWRcbiAgICAgIH1cbiAgICAgIHBhcnRpY2lwYW50LmFsdGVyTW92ZW1lbnRBY3Rpb25zKDAgLSBNYXRoLmFicyh0b3RhbE1vdmUpKVxuICAgICAgcGFydGljaXBhbnRzRGF0YVtwYXJ0aWNpcGFudEluZGV4XSA9IGZvdW5kcnkudXRpbHMuZHVwbGljYXRlKFxuICAgICAgICBwYXJ0aWNpcGFudC5kYXRhXG4gICAgICApXG4gICAgICBhd2FpdCB0aGlzLnVwZGF0ZShcbiAgICAgICAgeyAnc3lzdGVtLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50c0RhdGEgfSxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmICh0b3RhbE1vdmUgIT09IDApIHtcbiAgICAgIGF3YWl0IHRoaXMubW92ZVBhcnRpY2lwYW50VG9Mb2NhdGlvbihcbiAgICAgICAgcGFydGljaXBhbnRVdWlkLFxuICAgICAgICBsb2NhdGlvbnNbZGVzdGluYXRpb25JbmRleF0udXVpZCxcbiAgICAgICAgeyByZW5kZXI6IGZhbHNlIH1cbiAgICAgIClcbiAgICAgIG1vZGlmaWVkID0gdHJ1ZVxuICAgIH1cblxuICAgIGlmIChhY3RpdmF0ZVBhcnRpY2lwYW50KSB7XG4gICAgICBhd2FpdCB0aGlzLmFjdGl2YXRlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkLCB7XG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb24sXG4gICAgICAgIGFjdGl2YXRlTG9jYXRpb24sXG4gICAgICAgIHJlbmRlcjogZmFsc2VcbiAgICAgIH0pXG4gICAgICBtb2RpZmllZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAoYWN0aXZhdGVMb2NhdGlvbiAmJiAhYWN0aXZhdGVQYXJ0aWNpcGFudCkge1xuICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZUxvY2F0aW9uKGxvY2F0aW9uc1tkZXN0aW5hdGlvbkluZGV4XS51dWlkLCB7XG4gICAgICAgIHNjcm9sbFRvTG9jYXRpb24sXG4gICAgICAgIHJlbmRlcjogZmFsc2VcbiAgICAgIH0pXG4gICAgICBtb2RpZmllZCA9IHRydWVcbiAgICB9XG5cbiAgICBpZiAobW9kaWZpZWQgJiYgcmVuZGVyKSBhd2FpdCB0aGlzLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIHJldHVybiB0b3RhbE1vdmVcbiAgfVxuXG4gIGFzeW5jIG1vdmVQYXJ0aWNpcGFudFRvTG9jYXRpb24gKFxuICAgIHBhcnRpY2lwYW50VXVpZCxcbiAgICBsb2NhdGlvblV1aWQsXG4gICAge1xuICAgICAgc2Nyb2xsVG9Mb2NhdGlvbiA9IHRydWUsXG4gICAgICBhY3RpdmF0ZUxvY2F0aW9uID0gdHJ1ZSxcbiAgICAgIGFuaW1hdGUgPSBudWxsLFxuICAgICAgbW92ZVRva2VuID0gdHJ1ZSxcbiAgICAgIHJlbmRlciA9IHRydWVcbiAgICB9ID0ge31cbiAgKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZm91bmRyeS51dGlscy5kdXBsaWNhdGUodGhpcy5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG5cbiAgICAvLyBGaW5kIGRlc3RpbmF0aW9uIGxvY2F0aW9uLlxuICAgIGNvbnN0IGRlc3RpbmF0aW9uID0gbG9jYXRpb25zLmZpbmQobCA9PiBsb2NhdGlvblV1aWQgPT09IGwudXVpZClcbiAgICBpZiAoIWRlc3RpbmF0aW9uKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICBgRmFpbGVkIHRvIG1vdmUgJHtwYXJ0aWNpcGFudFV1aWR9LiBMb2NhdGlvbiAke2xvY2F0aW9uVXVpZH0gdW5rbm93bmBcbiAgICAgIClcbiAgICAgIHJldHVyblxuICAgIH1cblxuICAgIC8vIEZpbmQgb3JpZ2luIGxvY2F0aW9uXG4gICAgY29uc3Qgb3JpZ2luID0gbG9jYXRpb25zLmZpbmQobCA9PlxuICAgICAgbC5wYXJ0aWNpcGFudHM/LmluY2x1ZGVzKHBhcnRpY2lwYW50VXVpZClcbiAgICApXG5cbiAgICBpZiAoIW9yaWdpbikge1xuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGZpbmQgJHtwYXJ0aWNpcGFudFV1aWR9IGluIGxvY2F0aW9uc2ApXG4gICAgICByZXR1cm5cbiAgICB9XG5cbiAgICBpZiAoIWRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cykgZGVzdGluYXRpb24ucGFydGljaXBhbnRzID0gW11cbiAgICBpZiAoZGVzdGluYXRpb24ucGFydGljaXBhbnRzLmluY2x1ZGVzKHBhcnRpY2lwYW50VXVpZCkpIHJldHVybiAvLyBtb3ZpbmcgcGFydGljcGFudCB0byBhIGxvY2F0aW9uIGhlIGFscmVhZHkgb2NjdXBpZXNcbiAgICBkZXN0aW5hdGlvbi5wYXJ0aWNpcGFudHMucHVzaChwYXJ0aWNpcGFudFV1aWQpXG4gICAgLy8gZGVzdGluYXRpb24ucGFydGljaXBhbnRzLnNvcnQoc29ydEJ5Um9sZUFuZERleClcblxuICAgIGNvbnN0IG9sZFBhcnRpY2lwYW50c0xpc3QgPSBvcmlnaW4ucGFydGljaXBhbnRzLmZpbHRlcihcbiAgICAgIHAgPT4gcGFydGljaXBhbnRVdWlkICE9PSBwXG4gICAgKVxuICAgIG9yaWdpbi5wYXJ0aWNpcGFudHMgPSBvbGRQYXJ0aWNpcGFudHNMaXN0XG5cbiAgICBpZiAobW92ZVRva2VuICYmIGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzKSB7XG4gICAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuZ2V0UGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgICAgbGV0IHBhcnRpY3BhbnREb2N1bWVudCA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KFxuICAgICAgICBwYXJ0aWNpcGFudD8uZGF0YT8uZG9jVXVpZFxuICAgICAgKVxuICAgICAgLy8gRmluZCB0b2tlblxuICAgICAgaWYgKHBhcnRpY3BhbnREb2N1bWVudCAmJiAhKHBhcnRpY3BhbnREb2N1bWVudCBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgfHwgcGFydGljcGFudERvY3VtZW50Py5vYmplY3QgaW5zdGFuY2VvZiBUb2tlbikpIHtcbiAgICAgICAgY29uc3QgZm91bmRUb2tlbnMgPSBjYW52YXMuc2NlbmUudG9rZW5zLmZpbHRlcihkID0+IGQuYWN0b3JMaW5rICYmIGQuYWN0b3I/LmlkID09PSBwYXJ0aWNwYW50RG9jdW1lbnQuaWQpXG4gICAgICAgIGlmIChmb3VuZFRva2Vucy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQgPSBmb3VuZFRva2Vuc1swXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoXG4gICAgICAgIHBhcnRpY3BhbnREb2N1bWVudCAmJlxuICAgICAgICAhKFxuICAgICAgICAgIC8qIHBhcnRpY3BhbnREb2N1bWVudC5pc1Rva2VuIHx8ICovIChcbiAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudCBpbnN0YW5jZW9mIFRva2VuRG9jdW1lbnQgfHxcbiAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudD8ub2JqZWN0IGluc3RhbmNlb2YgVG9rZW5cbiAgICAgICAgICApXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ05vIHRva2VuIGFzc29jaWF0ZWQgd2l0aCB0aGlzIGFjdG9yJylcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChkZXN0aW5hdGlvbi5jb29yZGluYXRlcy5zY2VuZSAhPT0gZ2FtZS5zY2VuZXMudmlld2VkLnV1aWQpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oJ0NhdXRpb24gdGhlIHNjZW5lIGlzIG5vdCB0aGUgYWN0aXZlIHNjZW5lJylcbiAgICAgICAgfVxuICAgICAgICBpZiAocGFydGljcGFudERvY3VtZW50LnBhcmVudD8udXVpZCAhPT0gZGVzdGluYXRpb24uY29vcmRpbmF0ZXMuc2NlbmUpIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLmVycm9yKFxuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yVG9rZW5Ob3RPblNjZW5lJylcbiAgICAgICAgICApXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2NlbmUgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleShcbiAgICAgICAgICAgIGRlc3RpbmF0aW9uLmNvb3JkaW5hdGVzLnNjZW5lXG4gICAgICAgICAgKVxuICAgICAgICAgIGxldCB4ID0gZGVzdGluYXRpb24uY29vcmRpbmF0ZXMueFxuICAgICAgICAgIGNvbnN0IHkgPSBkZXN0aW5hdGlvbi5jb29yZGluYXRlcy55XG4gICAgICAgICAgbGV0IHRhcmdldFJlY3QgPSBuZXcgUElYSS5SZWN0YW5nbGUoXG4gICAgICAgICAgICB4LFxuICAgICAgICAgICAgeSxcbiAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3Qud2lkdGgsXG4gICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQub2JqZWN0LmhlaWdodFxuICAgICAgICAgICkubm9ybWFsaXplKClcbiAgICAgICAgICBjb25zdCB1cGRhdGUgPSBbXVxuICAgICAgICAgIGxldCBmb3VuZEZyZWVTcGFjZSA9IGZhbHNlXG4gICAgICAgICAgd2hpbGUgKCFmb3VuZEZyZWVTcGFjZSkge1xuICAgICAgICAgICAgY29uc3Qgb3ZlcmxhcGluZ1Rva2VuID0gc2NlbmUudG9rZW5zLmZpbmQodCA9PiB7XG4gICAgICAgICAgICAgIGlmICh0LmlkID09PSBwYXJ0aWNwYW50RG9jdW1lbnQuaWQpIHJldHVybiBmYWxzZSAvLyBZb3UgY2FuJ3Qgb3ZlcmxhcCB3aXRoIHlvdXJzZWxmXG4gICAgICAgICAgICAgIHJldHVybiB0Lm9iamVjdC5ib3VuZHMuaW50ZXJzZWN0cyh0YXJnZXRSZWN0KVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIGlmIChvdmVybGFwaW5nVG9rZW4pIHtcbiAgICAgICAgICAgICAgeCA9IG92ZXJsYXBpbmdUb2tlbi5vYmplY3QuYm91bmRzLnJpZ2h0ICsgMVxuICAgICAgICAgICAgICB0YXJnZXRSZWN0ID0gbmV3IFBJWEkuUmVjdGFuZ2xlKFxuICAgICAgICAgICAgICAgIHgsXG4gICAgICAgICAgICAgICAgeSxcbiAgICAgICAgICAgICAgICBwYXJ0aWNwYW50RG9jdW1lbnQub2JqZWN0LndpZHRoLFxuICAgICAgICAgICAgICAgIHBhcnRpY3BhbnREb2N1bWVudC5vYmplY3QuaGVpZ2h0XG4gICAgICAgICAgICAgICkubm9ybWFsaXplKClcbiAgICAgICAgICAgIH0gZWxzZSBmb3VuZEZyZWVTcGFjZSA9IHRydWVcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB1cGRhdGUucHVzaCh7XG4gICAgICAgICAgICBfaWQ6IHBhcnRpY3BhbnREb2N1bWVudC5pZCxcbiAgICAgICAgICAgIHgsXG4gICAgICAgICAgICB5XG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIGRlc3RpbmF0aW9uLnBhcnRpY2lwYW50cz8uZm9yRWFjaCggcFV1aWQgPT57XG4gICAgICAgICAgLy8gICBjb25zdCBwID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwVXVpZClcbiAgICAgICAgICAvLyAgIGNvbnN0IHBEb2MgPSBDb0M3VXRpbGl0aWVzLmdldERvY3VtZW50RnJvbUtleSggcD8uZGF0YT8uZG9jVXVpZClcbiAgICAgICAgICAvLyAgIGlmKCBwRG9jIGluc3RhbmNlb2YgVG9rZW5Eb2N1bWVudCAmJiBwRG9jLm9iamVjdCBpbnN0YW5jZW9mIFRva2VuKXtcbiAgICAgICAgICAvLyAgICAgdXBkYXRlcyA9IHRydWVcbiAgICAgICAgICAvLyAgICAgdXBkYXRlLnB1c2goe1xuICAgICAgICAgIC8vICAgICAgIF9pZDogcERvYy5pZCxcbiAgICAgICAgICAvLyAgICAgICB4OngsXG4gICAgICAgICAgLy8gICAgICAgeTp5XG4gICAgICAgICAgLy8gICAgIH0pXG4gICAgICAgICAgLy8gICAgIGlmKCBwRG9jLm9iamVjdC53aWR0aCkgeCArPSBwRG9jLm9iamVjdC53aWR0aFxuICAgICAgICAgIC8vICAgfVxuICAgICAgICAgIC8vIH0pXG4gICAgICAgICAgY29uc3Qgc2hvd1Rva2VuTW92ZW1lbnQgPVxuICAgICAgICAgICAgdHlwZW9mIGFuaW1hdGUgPT09ICdib29sZWFuJ1xuICAgICAgICAgICAgICA/IGFuaW1hdGVcbiAgICAgICAgICAgICAgOiB0aGlzLnN5c3RlbS5zaG93VG9rZW5Nb3ZlbWVudFxuICAgICAgICAgIGF3YWl0IHBhcnRpY3BhbnREb2N1bWVudC5wYXJlbnQudXBkYXRlRW1iZWRkZWREb2N1bWVudHMoXG4gICAgICAgICAgICAnVG9rZW4nLFxuICAgICAgICAgICAgdXBkYXRlLFxuICAgICAgICAgICAgeyBhbmltYXRlOiBzaG93VG9rZW5Nb3ZlbWVudCB9XG4gICAgICAgICAgKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucywgeyByZW5kZXIgfSlcbiAgfVxuXG4gIC8vIEhhbmRsZSBzY3JvbGxpbmdcbiAgYXN5bmMgc2V0Y2hhc2VUcmFja1Njcm9sbCAoe1xuICAgIGZyb20gPSB1bmRlZmluZWQsXG4gICAgdG8gPSAtMSxcbiAgICByZW5kZXIgPSB0cnVlXG4gIH0gPSB7fSkge1xuICAgIGF3YWl0IHRoaXMudXBkYXRlKFxuICAgICAge1xuICAgICAgICAnc3lzdGVtLnNjcm9sbC5jaGFzZVRyYWNrLmZyb20nOlxuICAgICAgICAgIHVuZGVmaW5lZCA9PT0gZnJvbSA/IHRoaXMuY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbiA6IGZyb20sXG4gICAgICAgICdzeXN0ZW0uc2Nyb2xsLmNoYXNlVHJhY2sudG8nOlxuICAgICAgICAgIHVuZGVmaW5lZCA9PT0gdG8gPyB0aGlzLmNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24gOiB0b1xuICAgICAgfSxcbiAgICAgIHsgcmVuZGVyIH1cbiAgICApXG4gIH1cblxuICBnZXQgY2hhc2VUcmFja0N1cnJlbnRTY3JvbGxQb3NpdGlvbiAoKSB7XG4gICAgY29uc3QgaHRtbCA9IHRoaXMuc2hlZXQ/Ll9lbGVtZW50XG4gICAgaWYgKCFodG1sKSByZXR1cm4gLTFcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxuICAgIGlmICghY2hhc2VUcmFjaykgcmV0dXJuIC0xXG4gICAgLy8gY29uc3Qgc2VsZWN0b3IgPSBgI2l0ZW0tJHt0aGlzLmlkfSAuY2hhc2UtdHJhY2tgXG4gICAgLy8gdWkubm90aWZpY2F0aW9ucy5pbmZvKCBgREFUQSA6IEpxdWVyeSByb290OiAkeyQoJzpyb290JykuZmluZChzZWxlY3Rvcikuc2Nyb2xsTGVmdCgpfWApXG4gICAgLy8gcmV0dXJuICQoJzpyb290JykuZmluZChzZWxlY3Rvcikuc2Nyb2xsTGVmdCgpXG5cbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oIGBEQVRBIDogSnF1ZXJ5IHJvb3Q6ICR7JCgnOnJvb3QnKS5maW5kKCcjaXRlbS1WTmh0cXhBMndKSm5XU3RUIC5jaGFzZS10cmFjaycpLnNjcm9sbExlZnQoKX0uQ2hhc2UgdHJhY2sgb2Zmc2V0OiAke2NoYXNlVHJhY2suc2Nyb2xsTGVmdH0sIERvY3VtZW50IG9mZnNldDoke2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNpdGVtLVZOaHRxeEEyd0pKbldTdFQnKS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKS5zY3JvbGxMZWZ0fWApXG4gICAgcmV0dXJuIGNoYXNlVHJhY2suc2Nyb2xsTGVmdFxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybiB0aGUgb2Zmc2V0IHBvc2l0aW9uIG9mIHRoZSBhY3RpdmUgbG9jYXRpb25cbiAgICogdGhlIGNlbnRlciBvZiB0aGUgYWN0aXZlIGxvY2F0aW9uIHdpbGwgYmUgY2VudGVyZWRcbiAgICogaW4gdGhlIHBhcmVudC5cbiAgICovXG4gIGdldCBjaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvbiAoKSB7XG4gICAgaWYgKCF0aGlzLmFjdGl2ZUxvY2F0aW9uKSByZXR1cm4gLTFcbiAgICByZXR1cm4gdGhpcy5nZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbih0aGlzLmFjdGl2ZUxvY2F0aW9uLnV1aWQpXG4gIH1cblxuICBnZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbiAobG9jYXRpb25VdWlkLCB7IGh0bWwgPSBudWxsIH0pIHtcbiAgICBjb25zdCBodG1sRWxlbWVudCA9IGh0bWwgfHwgdGhpcy5zaGVldD8uX2VsZW1lbnRcbiAgICBpZiAoIWh0bWxFbGVtZW50IHx8ICFodG1sRWxlbWVudFswXSkgcmV0dXJuIC0xXG4gICAgY29uc3QgY2hhc2VUcmFjayA9IGh0bWxFbGVtZW50WzBdLnF1ZXJ5U2VsZWN0b3IoJy5jaGFzZS10cmFjaycpXG4gICAgaWYgKCFjaGFzZVRyYWNrKSByZXR1cm4gLTFcbiAgICBjb25zdCBhY3RpdmVMb2NhdGlvbkVsZW1lbnQgPSBjaGFzZVRyYWNrLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgLmNoYXNlLWxvY2F0aW9uW2RhdGEtdXVpZD1cIiR7bG9jYXRpb25VdWlkfVwiXWBcbiAgICApXG4gICAgaWYgKCFhY3RpdmVMb2NhdGlvbkVsZW1lbnQpIHJldHVybiAtMVxuICAgIGNvbnN0IGxlZnRTY3JvbGwgPVxuICAgICAgYWN0aXZlTG9jYXRpb25FbGVtZW50Lm9mZnNldExlZnQgK1xuICAgICAgYWN0aXZlTG9jYXRpb25FbGVtZW50LmNsaWVudFdpZHRoIC8gMiAtXG4gICAgICBjaGFzZVRyYWNrLmNsaWVudFdpZHRoIC8gMlxuICAgIHJldHVybiBsZWZ0U2Nyb2xsIDwgMCA/IDAgOiBNYXRoLmZsb29yKGxlZnRTY3JvbGwpXG4gIH1cblxuICAvLyBTaG91bGQgYmUgcmVtb3ZlZFxuICBmaW5kTWluTW92IChsaXN0KSB7XG4gICAgaWYgKCFsaXN0Py5sZW5ndGgpIHJldHVybiAtMVxuICAgIHJldHVybiBsaXN0LnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgIHByZXYuYWRqdXN0ZWRNb3YgPCBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnRcbiAgICApLmFkanVzdGVkTW92XG4gIH1cblxuICBmaW5kTWF4TW92IChsaXN0KSB7XG4gICAgaWYgKCFsaXN0Py5sZW5ndGgpIHJldHVybiAtMVxuICAgIHJldHVybiBsaXN0LnJlZHVjZSgocHJldiwgY3VycmVudCkgPT5cbiAgICAgIHByZXYuYWRqdXN0ZWRNb3YgPiBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnRcbiAgICApLmFkanVzdGVkTW92XG4gIH1cblxuICAvLyBVdGlsaXRpZXNcbiAgZmluZEluZGV4IChsaXN0LCB1dWlkKSB7XG4gICAgcmV0dXJuIGxpc3QuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgZ2V0IHN0YXJ0ZWQgKCkge1xuICAgIHJldHVybiB0aGlzLmdldEZsYWcoJ0NvQzcnLCAnc3RhcnRlZCcpXG4gIH1cblxuICBhc3luYyBzdGFydCAoKSB7XG4gICAgY29uc3QgcmVtU3RyaW5nID0gJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScpXG4gICAgY29uc3QgcmVtU2l6ZSA9IE51bWJlcihyZW1TdHJpbmcucmVwbGFjZSgncHgnLCAnJykpXG4gICAgY29uc3QgcENvdW50ID0gdGhpcy5hY3R1YWxQYXJ0aWNpcGFudHMubGVuZ3RoXG4gICAgY29uc3Qgd2lkdGggPSBNYXRoLm1heCgocENvdW50ICogMTEuMiArIDMpICogcmVtU2l6ZSwgNDAgKiByZW1TaXplKVxuICAgIHRoaXMuc2hlZXQuX3RhYnNbMF0uYWN0aXZlID0gJ3NldHVwJ1xuICAgIHRoaXMuc2hlZXQucG9zaXRpb24ud2lkdGggPSB3aWR0aFxuICAgIGF3YWl0IHRoaXMuc2V0RmxhZygnQ29DNycsICdzdGFydGVkJywgdHJ1ZSlcbiAgICBhd2FpdCB0aGlzLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybigpXG4gIH1cblxuICBhc3luYyBzdG9wICgpIHtcbiAgICByZXR1cm4gdGhpcy51bnNldEZsYWcoJ0NvQzcnLCAnc3RhcnRlZCcpXG4gIH1cblxuICBnZW5lcmF0ZU5ld1V1aWQgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICB9XG5cbiAgZ2V0QWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MgKHBhcnRpY2lwYW50VXVpZCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5nZXRQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQpXG4gICAgaWYgKCFwYXJ0aWNpcGFudC5hY3RvcikgcmV0dXJuIHVuZGVmaW5lZFxuICAgIGNvbnN0IGxpc3QgPSBbXVxuICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PlxuICAgICAgbGlzdC5wdXNoKFxuICAgICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWNzJyl9ICgke2Muc2hvcnROYW1lfSlgXG4gICAgICApXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5MdWNrJ1xuICAgICAgKX0pYFxuICAgIClcbiAgICBsaXN0LnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuU0FOJ1xuICAgICAgKX0pYFxuICAgIClcbiAgICBwYXJ0aWNpcGFudC5hY3Rvci5za2lsbHMuZm9yRWFjaChzID0+IGxpc3QucHVzaChzLm5hbWUpKVxuICAgIHJldHVybiBsaXN0XG4gIH1cblxuICBnZXQgYWN0aXZlQWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IHBhcnRpY2ljcGFudERhdGEgPSB0aGlzLmFjdGl2ZVBhcnRpY2lwYW50RGF0YVxuICAgIGlmICghcGFydGljaWNwYW50RGF0YSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmdldEFjdG9yU2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzKHBhcnRpY2ljcGFudERhdGEudXVpZClcbiAgfVxuXG4gIGdldCBhbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MgKCkge1xuICAgIGNvbnN0IGxpc3QgPSBbXVxuICAgIENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZvckVhY2goYyA9PlxuICAgICAgbGlzdC5wdXNoKFxuICAgICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWNzJyl9ICgke2Muc2hvcnROYW1lfSlgXG4gICAgICApXG4gICAgKVxuICAgIGxpc3QucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5BdHRyaWJ1dGUnKX0gKCR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAnQ29DNy5MdWNrJ1xuICAgICAgKX0pYFxuICAgIClcbiAgICBsaXN0LnB1c2goXG4gICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQXR0cmlidXRlJyl9ICgke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgJ0NvQzcuU0FOJ1xuICAgICAgKX0pYFxuICAgIClcblxuICAgIGdhbWUuQ29DNy5za2lsbExpc3Q/LmZvckVhY2gocyA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgICFsaXN0LmluY2x1ZGVzKHMubmFtZSkgJiZcbiAgICAgICAgIXMubmFtZVxuICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXG4gICAgICAgICAgLmluY2x1ZGVzKGAoJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55U3BlY05hbWUnKX0pYC50b0xvd2VyQ2FzZSgpKVxuICAgICAgKSB7XG4gICAgICAgIGxpc3QucHVzaChzLm5hbWUpXG4gICAgICB9XG4gICAgfSkgLy8gVE9ETzogUmVtb3ZlID8/XG4gICAgdGhpcy5wYXJ0aWNpcGFudHMuZm9yRWFjaChwID0+IHtcbiAgICAgIGlmIChwLmFjdG9yKSB7XG4gICAgICAgIHAuYWN0b3Iuc2tpbGxzLmZvckVhY2gocyA9PiB7XG4gICAgICAgICAgaWYgKCFsaXN0LmluY2x1ZGVzKHMubmFtZSkpIGxpc3QucHVzaChzLm5hbWUpXG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gbGlzdC5zb3J0KEludGwuQ29sbGF0b3IoKS5jb21wYXJlKVxuICB9XG5cbiAgZ2V0IGFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljc1Nob3J0ICgpIHtcbiAgICBjb25zdCBsaXN0ID0gW11cbiAgICBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5mb3JFYWNoKGMgPT4gbGlzdC5wdXNoKGAke2MubGFiZWx9YCkpXG4gICAgbGlzdC5wdXNoKGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5MdWNrJyl9YClcbiAgICBsaXN0LnB1c2goYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlNBTicpfWApXG5cbiAgICBnYW1lLkNvQzcuc2tpbGxMaXN0Py5mb3JFYWNoKHMgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICAhbGlzdC5pbmNsdWRlcyhzLm5hbWUpICYmXG4gICAgICAgICFzLm5hbWVcbiAgICAgICAgICAudG9Mb3dlckNhc2UoKVxuICAgICAgICAgIC5pbmNsdWRlcyhgKCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueVNwZWNOYW1lJyl9KWAudG9Mb3dlckNhc2UoKSlcbiAgICAgICkge1xuICAgICAgICBsaXN0LnB1c2gocy5uYW1lKVxuICAgICAgfVxuICAgIH0pIC8vIFRPRE86IFJlbW92ZSA/P1xuICAgIHRoaXMucGFydGljaXBhbnRzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hY3Rvcikge1xuICAgICAgICBwLmFjdG9yLnNraWxscy5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgIGlmICghbGlzdC5pbmNsdWRlcyhzLm5hbWUpKSBsaXN0LnB1c2gocy5uYW1lKVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGxpc3Quc29ydChJbnRsLkNvbGxhdG9yKCkuY29tcGFyZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB0aGUgZGF0YSBvZiBhbGwgcGFyYXNpdGUgcGFydGljaXBhbnRzIGluIGxvY2F0aW9ucy5cbiAgICogU2hvdWxkIG5ldmVyIGhhcHBlblxuICAgKi9cbiAgLy8gYXN5bmMgY2xlYW5Mb2NhdGlvbnMgKCkge1xuICAvLyAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgLy8gICBsb2NhdGlvbnMuZm9yRWFjaChsID0+IHtcbiAgLy8gICAgIGNvbnN0IHBhcnRpcGFudHNVdWlkQXJyYXkgPSB0aGlzLnN5c3RlbS5wYXJ0aWNpcGFudHMubWFwKHAgPT4gcC51dWlkKVxuICAvLyAgICAgaWYgKGwucGFydGljaXBhbnRzKSB7XG4gIC8vICAgICAgIGwucGFydGljaXBhbnRzID0gbC5wYXJ0aWNpcGFudHMuZmlsdGVyKHV1aWQgPT5cbiAgLy8gICAgICAgICBwYXJ0aXBhbnRzVXVpZEFycmF5LmluY2x1ZGVzKHV1aWQpXG4gIC8vICAgICAgIClcbiAgLy8gICAgIH1cbiAgLy8gICB9KVxuICAvLyAgIHRoaXMudXBkYXRlTG9jYXRpb25zTGlzdChsb2NhdGlvbnMpXG4gIC8vIH1cbn1cbiIsIi8qIGdsb2JhbCBmb3VuZHJ5LCBnYW1lICovXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U2tpbGwgZXh0ZW5kcyBDb0M3SXRlbSB7XG4gIGNvbnN0cnVjdG9yIChkYXRhLCBjb250ZXh0KSB7XG4gICAgaWYgKHR5cGVvZiBkYXRhLnN5c3RlbT8uc2tpbGxOYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc3Qgc2tpbGwgPSBDb0M3U2tpbGwuZ3Vlc3NOYW1lUGFydHMoZGF0YS5uYW1lKVxuICAgICAgY29uc3QgeyBuYW1lLCBza2lsbE5hbWUsIHNwZWNpYWxpemF0aW9uLCAuLi5uZXdQcm9wZXJ0aWVzIH0gPSBza2lsbFxuICAgICAgZGF0YS5uYW1lID0gbmFtZVxuICAgICAgZGF0YS5zeXN0ZW0gfHw9IHt9XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0geyAuLi5kYXRhLnN5c3RlbS5wcm9wZXJ0aWVzLCAuLi5uZXdQcm9wZXJ0aWVzIH1cbiAgICAgIGRhdGEuc3lzdGVtID0geyAuLi5kYXRhLnN5c3RlbSwgc2tpbGxOYW1lLCBzcGVjaWFsaXphdGlvbiwgcHJvcGVydGllcyB9XG4gICAgfVxuICAgIHN1cGVyKGRhdGEsIGNvbnRleHQpXG4gIH1cblxuICBzdGF0aWMgZ3Vlc3NOYW1lUGFydHMgKHNraWxsTmFtZSkge1xuICAgIGNvbnN0IG91dHB1dCA9IHtcbiAgICAgIGNvbWJhdDogZmFsc2UsXG4gICAgICBmaWdodGluZzogZmFsc2UsXG4gICAgICBmaXJlYXJtOiBmYWxzZSxcbiAgICAgIG5hbWU6IHNraWxsTmFtZSxcbiAgICAgIHNraWxsTmFtZSxcbiAgICAgIHNwZWNpYWw6IGZhbHNlLFxuICAgICAgc3BlY2lhbGl6YXRpb246ICcnXG4gICAgfVxuXG4gICAgY29uc3QgbWF0Y2ggPSBza2lsbE5hbWUubWF0Y2goL14oLispXFxzKlxcKChbXildKylcXCkkLylcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIG91dHB1dC5za2lsbE5hbWUgPSBtYXRjaFsyXS50cmltKClcbiAgICAgIG91dHB1dC5zcGVjaWFsID0gdHJ1ZVxuXG4gICAgICBjb25zdCBzcGVjaWFsaXphdGlvbiA9IG1hdGNoWzFdLnRyaW0oKVxuICAgICAgb3V0cHV0LnNwZWNpYWxpemF0aW9uID0gc3BlY2lhbGl6YXRpb25cbiAgICAgIG91dHB1dC5uYW1lID0gc3BlY2lhbGl6YXRpb24gKyAnICgnICsgb3V0cHV0LnNraWxsTmFtZSArICcpJ1xuICAgICAgb3V0cHV0LmZpZ2h0aW5nID0gc3BlY2lhbGl6YXRpb24gPT09IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5GaWdodGluZ1NwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgICBvdXRwdXQuZmlyZWFybSA9IHNwZWNpYWxpemF0aW9uID09PSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZScpXG4gICAgICBvdXRwdXQuY29tYmF0ID0gb3V0cHV0LmZpZ2h0aW5nIHx8IG91dHB1dC5maXJlYXJtXG4gICAgfVxuICAgIHJldHVybiBvdXRwdXRcbiAgfVxuXG4gIGdldCBoYXNBY3RpdmVFZmZlY3RzICgpIHtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmVFZmZlY3RzLmxlbmd0aCA+IDBcbiAgfVxuXG4gIGdldCBhY3RpdmVFZmZlY3RzICgpIHtcbiAgICBpZiAodGhpcy5wYXJlbnQgJiYgdGhpcy5wYXJlbnQuZWZmZWN0cykge1xuICAgICAgY29uc3QgZWZmZWN0S2V5RnVsbCA9IGBza2lsbC4ke3RoaXMubmFtZX1gLnRvTG93ZXJDYXNlKClcbiAgICAgIGNvbnN0IGVmZmVjdEtleVNob3J0ID0gYHNraWxsLiR7dGhpcy5zeXN0ZW0uc2tpbGxOYW1lfWAudG9Mb3dlckNhc2UoKVxuICAgICAgbGV0IGNoYW5nZXMgPSB0aGlzLnBhcmVudC5lZmZlY3RzLnJlZHVjZSgoY2hhbmdlcywgZSkgPT4ge1xuICAgICAgICBpZiAoZS5kaXNhYmxlZCB8fCBlLmlzU3VwcHJlc3NlZCkgcmV0dXJuIGNoYW5nZXNcbiAgICAgICAgcmV0dXJuIGNoYW5nZXMuY29uY2F0KFxuICAgICAgICAgIGUuZGF0YS5jaGFuZ2VzLm1hcChjID0+IHtcbiAgICAgICAgICAgIGMgPSBmb3VuZHJ5LnV0aWxzLmR1cGxpY2F0ZShjKVxuICAgICAgICAgICAgYy5lZmZlY3QgPSBlXG4gICAgICAgICAgICBjLnByaW9yaXR5ID0gYy5wcmlvcml0eSA/PyBjLm1vZGUgKiAxMFxuICAgICAgICAgICAgcmV0dXJuIGNcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICB9LCBbXSlcbiAgICAgIGNoYW5nZXMuc29ydCgoYSwgYikgPT4gYS5wcmlvcml0eSAtIGIucHJpb3JpdHkpXG4gICAgICBjaGFuZ2VzID0gY2hhbmdlcy5maWx0ZXIoXG4gICAgICAgIGUgPT5cbiAgICAgICAgICBlLmtleS50b0xvd2VyQ2FzZSgpID09PSBlZmZlY3RLZXlTaG9ydCB8fFxuICAgICAgICAgIGUua2V5LnRvTG93ZXJDYXNlKCkgPT09IGVmZmVjdEtleUZ1bGxcbiAgICAgIClcbiAgICAgIHJldHVybiBjaGFuZ2VzXG4gICAgfVxuICAgIHJldHVybiBbXVxuICB9XG5cbiAgLyoqXG4gICogVW5pcXVlIGlkZW50aWZpZXIgc2hvdWxkIGJlIHVzZWQgdG8gc3RvcmUgYW5kIG9idGFpbiBpdGVtIHRvIGFzc2VzcyBpdGVtIHVuaXF1ZW5lc3MuXG4gICogRm9yIG9sZCBpdGVtcyB3aXRob3V0IGlkLCBmYWxsYmFjayBvZiBza2lsbE5hbWUgbWF5IHN0aWxsIGJlIHVzZWRcbiAgKiBidXQgaWYgc2tpbGwgbmFtZSBpcyBub3QgdW5pcXVlIGl0IHdpbGwgY2F1c2UgcHJvYmxlbXMuXG4gICovXG4gIGdldCBpdGVtSWRlbnRpZmllciAoKSB7XG4gICAgcmV0dXJuIHRoaXMubmFtZVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgdGhlIHZhbHVlIG9mIHRoZSBza2lsbCBzY29yZSB1bmFmZmVjdGVkIGJ5IGFjdGl2ZSBlZmZlY3RzXG4gICAqL1xuICBnZXQgcmF3VmFsdWUgKCkge1xuICAgIGxldCB2YWx1ZSA9IDBcbiAgICBpZiAodGhpcy5hY3Rvci50eXBlID09PSAnY2hhcmFjdGVyJykge1xuICAgICAgLy8gRm9yIGFuIGFjdG9yIHdpdGggZXhwZXJpZW5jZSB3ZSBuZWVkIHRvIGNhbGN1bGF0ZSBza2lsbCB2YWx1ZVxuICAgICAgdmFsdWUgPSB0aGlzLmJhc2VcbiAgICAgIHZhbHVlICs9IHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5wZXJzb25hbFxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5wZXJzb25hbClcbiAgICAgICAgOiAwXG4gICAgICB2YWx1ZSArPSB0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8ub2NjdXBhdGlvblxuICAgICAgICA/IHBhcnNlSW50KHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5vY2N1cGF0aW9uKVxuICAgICAgICA6IDBcbiAgICAgIHZhbHVlICs9IHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHM/LmV4cGVyaWVuY2UpXG4gICAgICAgIDogMFxuICAgICAgaWYgKFxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZUFyY2hldHlwZScpICYmXG4gICAgICAgIHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5hcmNoZXR5cGVcbiAgICAgICkge1xuICAgICAgICB2YWx1ZSArPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uYXJjaGV0eXBlKVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3IgYWxsIG90aGVycyBhY3RvciB3ZSBzdG9yZSB0aGUgdmFsdWUgZGlyZWN0bHlcbiAgICAgIHZhbHVlID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0udmFsdWUpXG4gICAgfVxuICAgIHJldHVybiAhaXNOYU4odmFsdWUpID8gdmFsdWUgOiBudWxsXG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyB0aGUgc2tpbGwncyB2YWx1ZSBhZnRlciBhY3RpdmUgZWZmZWN0cyBoYXZlIGJlZW4gYXBwbGllZFxuICAgKi9cbiAgZ2V0IHZhbHVlICgpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHRoaXMucGFyZW50Py5zeXN0ZW0uc2tpbGxzPy5bYCR7dGhpcy5pdGVtSWRlbnRpZmllcn1gXT8udmFsdWVcbiAgICByZXR1cm4gdmFsdWUgfHwgdGhpcy5yYXdWYWx1ZVxuICB9XG5cbiAgYXN5bmMgdXBkYXRlVmFsdWUgKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIGNvbnN0IGRlbHRhID0gcGFyc2VJbnQodmFsdWUpIC0gdGhpcy5yYXdWYWx1ZVxuICAgICAgY29uc3QgZXhwID1cbiAgICAgICAgKHRoaXMuc3lzdGVtLmFkanVzdG1lbnRzPy5leHBlcmllbmNlXG4gICAgICAgICAgPyBwYXJzZUludCh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlKVxuICAgICAgICAgIDogMCkgKyBkZWx0YVxuICAgICAgYXdhaXQgdGhpcy51cGRhdGUoe1xuICAgICAgICAnc3lzdGVtLmFkanVzdG1lbnRzLmV4cGVyaWVuY2UnOiBleHAgPiAwID8gZXhwIDogMFxuICAgICAgfSlcbiAgICB9IGVsc2UgYXdhaXQgdGhpcy51cGRhdGUoeyAnc3lzdGVtLnZhbHVlJzogdmFsdWUgfSlcbiAgfVxuXG4gIGFzeW5jIGluY3JlYXNlRXhwZXJpZW5jZSAoeCkge1xuICAgIGlmICh0aGlzLnR5cGUgIT09ICdza2lsbCcpIHJldHVybiBudWxsXG4gICAgaWYgKHRoaXMuYWN0b3IudHlwZSA9PT0gJ2NoYXJhY3RlcicpIHtcbiAgICAgIGNvbnN0IGV4cCA9XG4gICAgICAgICh0aGlzLnN5c3RlbS5hZGp1c3RtZW50cz8uZXhwZXJpZW5jZVxuICAgICAgICAgID8gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYWRqdXN0bWVudHMuZXhwZXJpZW5jZSlcbiAgICAgICAgICA6IDApICsgcGFyc2VJbnQoeClcbiAgICAgIGF3YWl0IHRoaXMudXBkYXRlKHtcbiAgICAgICAgJ3N5c3RlbS5hZGp1c3RtZW50cy5leHBlcmllbmNlJzogZXhwID4gMCA/IGV4cCA6IDBcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgLy8gZ2V0IHZhbHVlICgpIHtcbiAgLy8gICBsZXQgcFZhbHVlXG4gIC8vICAgaWYoIHRoaXMucGFyZW50KXtcblxuICAvLyAgIH1cbiAgLy8gICBjb25zdCB2YWx1ZSA9IHN1cGVyLnZhbHVlXG4gIC8vICAgbGV0IHVwZGF0ZWQgPSB2YWx1ZVxuICAvLyAgIGZvciAoY29uc3QgY2hhbmdlIG9mIHRoaXMuYWN0aXZlRWZmZWN0cykge1xuICAvLyAgICAgY29uc3QgbW9kaWZpZXIgPSBOdW1iZXIuZnJvbVN0cmluZyhjaGFuZ2UudmFsdWUpXG4gIC8vICAgICBpZiAoIWlzTmFOKG1vZGlmaWVyKSkge1xuICAvLyAgICAgICBjb25zdCBtb2RlcyA9IENPTlNULkFDVElWRV9FRkZFQ1RfTU9ERVNcbiAgLy8gICAgICAgc3dpdGNoIChjaGFuZ2UubW9kZSkge1xuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuQUREOlxuICAvLyAgICAgICAgICAgdXBkYXRlZCArPSBtb2RpZmllclxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLk1VTFRJUExZOlxuICAvLyAgICAgICAgICAgdXBkYXRlZCA9IE1hdGgucm91bmQodXBkYXRlZCAqIG1vZGlmaWVyKVxuICAvLyAgICAgICAgICAgYnJlYWtcbiAgLy8gICAgICAgICBjYXNlIG1vZGVzLk9WRVJSSURFOlxuICAvLyAgICAgICAgICAgdXBkYXRlZCA9IG1vZGlmaWVyXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuVVBHUkFERTpcbiAgLy8gICAgICAgICAgIGlmIChtb2RpZmVyID4gdXBkYXRlZCkgdXBkYXRlZCA9IG1vZGlmaWVyXG4gIC8vICAgICAgICAgICBicmVha1xuICAvLyAgICAgICAgIGNhc2UgbW9kZXMuRE9XTkdSQURFOlxuICAvLyAgICAgICAgICAgaWYgKG1vZGlmZXIgPCB1cGRhdGVkKSB1cGRhdGVkID0gbW9kaWZpZXJcbiAgLy8gICAgICAgICAgIGJyZWFrXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vICAgaWYgKCFpc05hTih1cGRhdGVkKSAmJiB1cGRhdGVkICE9IHZhbHVlKSB7XG4gIC8vICAgICBpZiAodXBkYXRlZCA8IDApIHVwZGF0ZWQgPSAwXG4gIC8vICAgICByZXR1cm4gdXBkYXRlZFxuICAvLyAgIH0gcmV0dXJuIHZhbHVlXG4gIC8vIH1cbn1cbiIsImltcG9ydCB7IENvQ0FjdG9yIH0gZnJvbSAnLi4vYWN0b3IuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3VmVoaWNsZSBleHRlbmRzIENvQ0FjdG9yIHtcbiAgY29uc3RydWN0b3IgKGRhdGEsIGNvbnRleHQpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEuaW1nID09PSAndW5kZWZpbmVkJykge1xuICAgICAgZGF0YS5pbWcgPSAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9qZWVwLnN2ZydcbiAgICB9XG4gICAgc3VwZXIoZGF0YSwgY29udGV4dClcbiAgfVxuXG4gIGdldCByYXdCdWlsZCAoKSB7XG4gICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgfVxuXG4gIGdldCBidWlsZCAoKSB7XG4gICAgY29uc3QgYnVpbGQgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLnZhbHVlKVxuICAgIHJldHVybiBpc05hTihidWlsZCkgPyBudWxsIDogYnVpbGRcbiAgfVxuXG4gIGdldCBocCAoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50ID09PSBudWxsIHx8XG4gICAgICB1bmRlZmluZWQgPT09IHRoaXMuc3lzdGVtLmF0dHJpYnMuYnVpbGQuY3VycmVudCB8fFxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50ID09PSAnJ1xuICAgICkge1xuICAgICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC5jdXJyZW50ID4gdGhpcy5zeXN0ZW0uYXR0cmlicy5idWlsZC52YWx1ZVxuICAgICkge1xuICAgICAgcmV0dXJuIHRoaXMuYnVpbGRcbiAgICB9XG4gICAgY29uc3QgaHAgPSBwYXJzZUludCh0aGlzLnN5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQpXG4gICAgcmV0dXJuIGlzTmFOKGhwKSA/IG51bGwgOiBocFxuICB9XG5cbiAgZ2V0IGhwTWF4ICgpIHtcbiAgICByZXR1cm4gdGhpcy5idWlsZFxuICB9XG5cbiAgZ2V0IHJhd0hwTWF4ICgpIHtcbiAgICByZXR1cm4gdGhpcy5idWlsZFxuICB9XG5cbiAgYXN5bmMgc2V0SHAgKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlID4gdGhpcy5idWlsZCkgdmFsdWUgPSB0aGlzLmJ1aWxkXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmJ1aWxkLmN1cnJlbnQnOiB2YWx1ZSB9KVxuICB9XG5cbiAgZ2V0IHJhd0RiICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYlxuICB9XG5cbiAgZ2V0IGRiICgpIHtcbiAgICBjb25zdCBkYiA9IHBhcnNlSW50KHRoaXMuc3lzdGVtLmF0dHJpYnMuZGI/LnZhbHVlKVxuICAgIHJldHVybiBpc05hTihkYikgPyBudWxsIDogZGJcbiAgfVxuXG4gIGdldCByYXdNb3YgKCkge1xuICAgIHJldHVybiB0aGlzLm1vdlxuICB9XG5cbiAgZ2V0IG1vdiAoKSB7XG4gICAgY29uc3QgbW92ID0gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicy5tb3Y/LnZhbHVlKVxuICAgIHJldHVybiBpc05hTihtb3YpID8gbnVsbCA6IG1vdlxuICB9XG5cbiAgZ2V0IG1wTWF4ICgpIHtcbiAgICByZXR1cm4gcGFyc2VJbnQodGhpcy5zeXN0ZW0uYXR0cmlicz8ubXA/Lm1heCkgfHwgMFxuICB9XG5cbiAgZ2V0IHJhd01wTWF4ICgpIHtcbiAgICByZXR1cm4gdGhpcy5tcE1heFxuICB9XG5cbiAgZ2V0IHNhbk1heCAoKSB7XG4gICAgcmV0dXJuIG51bGxcbiAgfVxuXG4gIGdldCByYXdTYW5NYXggKCkge1xuICAgIHJldHVybiBudWxsXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBEaWNlVGVybSAqL1xuXG5leHBvcnQgY2xhc3MgQ29DN0RlY2FkZXJEaWUgZXh0ZW5kcyBEaWNlVGVybSB7XG4gIGNvbnN0cnVjdG9yICh0ZXJtRGF0YSkge1xuICAgIHN1cGVyKHRlcm1EYXRhKVxuICAgIHRoaXMuZmFjZXMgPSAxMFxuICB9XG5cbiAgZ2V0IHRvdGFsICgpIHtcbiAgICBjb25zdCB0b3RhbCA9IHN1cGVyLnRvdGFsXG4gICAgcmV0dXJuIHRvdGFsID09PSAxMCA/IDAgOiB0b3RhbCAqIDEwXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBnZXQgREVOT01JTkFUSU9OICgpIHtcbiAgICByZXR1cm4gJ3QnXG4gIH1cbn1cbiIsImltcG9ydCB7IENvQzdEZWNhZGVyRGllIH0gZnJvbSAnLi9kZWNhZGVyLWRpZS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdEZWNhZGVyRGllT3RoZXIgZXh0ZW5kcyBDb0M3RGVjYWRlckRpZSB7XG4gIHN0YXRpYyBnZXQgREVOT01JTkFUSU9OICgpIHtcbiAgICByZXR1cm4gJ28nXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBDT05GSUcsIEZvcm1BcHBsaWNhdGlvbiwgZ2FtZSwgbWVyZ2VPYmplY3QgKi9cbmNvbnN0IFNFVFRJTkdTID0ge1xuICBwdWxwUnVsZXM6IHtcbiAgICBuYW1lOiAnJyxcbiAgICBoaW50OiAnJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgaW5pdGlhdGl2ZVJ1bGU6IHtcbiAgICBuYW1lOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGUnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZUhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogJ2Jhc2ljJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgYmFzaWM6ICdTRVRUSU5HUy5Jbml0aWF0aXZlUnVsZUJhc2ljJyxcbiAgICAgIG9wdGlvbmFsOiAnU0VUVElOR1MuSW5pdGlhdGl2ZVJ1bGVPcHRpb25hbCdcbiAgICB9LFxuICAgIG9uQ2hhbmdlOiBydWxlID0+IF9zZXRJbml0aWF0aXZlT3B0aW9ucyhydWxlKVxuICB9LFxuICBkZXZlbG9wbWVudFJvbGxGb3JMdWNrOiB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRldmVsb3BtZW50Um9sbEZvckx1Y2snLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kZXZlbG9wbWVudFJvbGxGb3JMdWNrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlRG91YmxlTWF4SGVhbHRoOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLkRvdWJsZU1heEhlYWx0aC5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRG91YmxlTWF4SGVhbHRoLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2s6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRGV2ZWxvcG1lbnRSb2xsTHVjay5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRGV2ZWxvcG1lbnRSb2xsTHVjay5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVBcmNoZXR5cGU6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuQXJjaGV0eXBlLk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5BcmNoZXR5cGUuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlT3JnYW5pemF0aW9uOiB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLk9yZ2FuaXphdGlvbi5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuT3JnYW5pemF0aW9uLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZVRhbGVudHM6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuVGFsZW50cy5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuVGFsZW50cy5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgcHVscFJ1bGVGYXN0ZXJSZWNvdmVyeToge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5GYXN0ZXJSZWNvdmVyeS5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuRmFzdGVyUmVjb3ZlcnkuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0sXG4gIHB1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHM6IHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5QdWxwUnVsZXMuSWdub3JlTWFqb3JXb3VuZHMuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLklnbm9yZU1ham9yV291bmRzLkhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9LFxuICBwdWxwUnVsZUlnbm9yZUFnZVBlbmFsdGllczoge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLlB1bHBSdWxlcy5JZ25vcmVBZ2VQZW5hbHRpZXMuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuUHVscFJ1bGVzLklnbm9yZUFnZVBlbmFsdGllcy5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSxcbiAgb3Bwb3NlZFJvbGxUaWVCcmVha2VyOiB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk9wcG9zZWRSb2xsVGllQnJlYWtlcicsXG4gICAgaGludDogJ1NFVFRJTkdTLk9wcG9zZWRSb2xsVGllQnJlYWtlckhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9XG59XG5cbmZ1bmN0aW9uIF9zZXRJbml0aWF0aXZlT3B0aW9ucyAocnVsZSkge1xuICBsZXQgZGVjaW1hbHMgPSAwXG4gIHN3aXRjaCAocnVsZSkge1xuICAgIGNhc2UgJ29wdGlvbmFsJzpcbiAgICAgIGRlY2ltYWxzID0gMlxuICAgICAgYnJlYWtcbiAgICBjYXNlICdiYXNpYyc6XG4gICAgICBkZWNpbWFscyA9IDBcbiAgICAgIGJyZWFrXG4gIH1cbiAgQ09ORklHLkNvbWJhdC5pbml0aWF0aXZlID0ge1xuICAgIGZvcm11bGE6IG51bGwsXG4gICAgZGVjaW1hbHNcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQ29DN0dhbWVSdWxlU2V0dGluZ3MgZXh0ZW5kcyBGb3JtQXBwbGljYXRpb24ge1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIHRpdGxlOiAnU0VUVElOR1MuVGl0bGVSdWxlcycsXG4gICAgICBpZDogJ3J1bGVzLXNldHRpbmdzJyxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9zeXN0ZW0vcnVsZS1zZXR0aW5ncy5odG1sJyxcbiAgICAgIHdpZHRoOiA1NTAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IHRydWVcbiAgICB9KVxuICB9XG5cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHt9XG4gICAgY29uc3QgcHVscFJ1bGVzID0ge1xuICAgICAgdHJ1ZTogZmFsc2UsXG4gICAgICBmYWxzZTogZmFsc2VcbiAgICB9XG4gICAgZm9yIChjb25zdCBbaywgdl0gb2YgT2JqZWN0LmVudHJpZXMoU0VUVElOR1MpKSB7XG4gICAgICBvcHRpb25zW2tdID0ge1xuICAgICAgICB2YWx1ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCBrKSxcbiAgICAgICAgc2V0dGluZzogdlxuICAgICAgfVxuICAgICAgaWYgKGsubWF0Y2goL15wdWxwUnVsZS57Mix9JC8pKSB7XG4gICAgICAgIHB1bHBSdWxlc1tvcHRpb25zW2tdLnZhbHVlXSA9IHRydWVcbiAgICAgIH1cbiAgICB9XG4gICAgb3B0aW9ucy5wdWxwU2VsZWN0aW9uID0gcHVscFJ1bGVzLnRydWVcbiAgICAgID8gcHVscFJ1bGVzLmZhbHNlXG4gICAgICAgID8gJ3NvbWUnXG4gICAgICAgIDogJ2FsbCdcbiAgICAgIDogJ25vbmUnXG4gICAgcmV0dXJuIG9wdGlvbnNcbiAgfVxuXG4gIHN0YXRpYyByZWdpc3RlclNldHRpbmdzICgpIHtcbiAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhTRVRUSU5HUykpIHtcbiAgICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCBrLCB2KVxuICAgIH1cbiAgICBfc2V0SW5pdGlhdGl2ZU9wdGlvbnMoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnaW5pdGlhdGl2ZVJ1bGUnKSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICBodG1sXG4gICAgICAuZmluZCgnI3B1bHBSdWxlc1NlbGVjdCcpXG4gICAgICAub24oJ2NoYW5nZScsIGV2ZW50ID0+IHRoaXMub25DaGFuZ2VQdWxwU2VsZWN0KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnaW5wdXQucHVscFJ1bGVzU2VsZWN0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgIC5vbignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uQ2xpY2tQdWxwKGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnYnV0dG9uW25hbWU9cmVzZXRdJylcbiAgICAgIC5vbignY2xpY2snLCBldmVudCA9PiB0aGlzLm9uUmVzZXREZWZhdWx0cyhldmVudCkpXG4gIH1cblxuICBvbkNoYW5nZVB1bHBTZWxlY3QgKGV2ZW50KSB7XG4gICAgY29uc3QgdmFsID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS52YWwoKVxuICAgIGlmICh2YWwgPT09ICdub25lJyB8fCB2YWwgPT09ICdhbGwnKSB7XG4gICAgICAkKCcjcnVsZXMtc2V0dGluZ3MnKVxuICAgICAgICAuZmluZCgnaW5wdXQucHVscFJ1bGVzU2VsZWN0W3R5cGU9Y2hlY2tib3hdJylcbiAgICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gJCh0aGlzKVxuICAgICAgICAgIGlmICh2YWwgPT09ICdub25lJykge1xuICAgICAgICAgICAgY2hlY2tib3gucHJvcCgnY2hlY2tlZCcsIGZhbHNlKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjaGVja2JveC5wcm9wKCdjaGVja2VkJywgdHJ1ZSlcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgb25DbGlja1B1bHAgKGV2ZW50KSB7XG4gICAgY29uc3QgcHVscFJ1bGVzID0ge1xuICAgICAgdHJ1ZTogZmFsc2UsXG4gICAgICBmYWxzZTogZmFsc2VcbiAgICB9XG4gICAgJCgnI3J1bGVzLXNldHRpbmdzJylcbiAgICAgIC5maW5kKCdpbnB1dC5wdWxwUnVsZXNTZWxlY3RbdHlwZT1jaGVja2JveF0nKVxuICAgICAgLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBjaGVja2JveCA9ICQodGhpcylcbiAgICAgICAgaWYgKGNoZWNrYm94LnByb3AoJ2NoZWNrZWQnKSkge1xuICAgICAgICAgIHB1bHBSdWxlcy50cnVlID0gdHJ1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHB1bHBSdWxlcy5mYWxzZSA9IHRydWVcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAkKCcjcHVscFJ1bGVzU2VsZWN0JykudmFsKFxuICAgICAgcHVscFJ1bGVzLnRydWUgPyAocHVscFJ1bGVzLmZhbHNlID8gJ3NvbWUnIDogJ2FsbCcpIDogJ25vbmUnXG4gICAgKVxuICB9XG5cbiAgYXN5bmMgb25SZXNldERlZmF1bHRzIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBmb3IgYXdhaXQgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhTRVRUSU5HUykpIHtcbiAgICAgIGF3YWl0IGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3Jywgaywgdj8uZGVmYXVsdClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVuZGVyKClcbiAgfVxuXG4gIGFzeW5jIF91cGRhdGVPYmplY3QgKGV2ZW50LCBkYXRhKSB7XG4gICAgY29uc3QgcHVscFJ1bGVzID0ge1xuICAgICAgdHJ1ZTogZmFsc2UsXG4gICAgICBmYWxzZTogZmFsc2VcbiAgICB9XG4gICAgZm9yIGF3YWl0IChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXMoU0VUVElOR1MpKSB7XG4gICAgICBnYW1lLnNldHRpbmdzLnNldCgnQ29DNycsIGtleSwgZGF0YVtrZXldKVxuICAgICAgaWYgKGtleS5tYXRjaCgvXnB1bHBSdWxlLnsyLH0kLykpIHtcbiAgICAgICAgcHVscFJ1bGVzW2RhdGFba2V5XV0gPSB0cnVlXG4gICAgICB9XG4gICAgfVxuICAgIGdhbWUuc2V0dGluZ3Muc2V0KCdDb0M3JywgJ3B1bHBSdWxlcycsIHB1bHBSdWxlcy50cnVlICYmICFwdWxwUnVsZXMuZmFsc2UpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBkdXBsaWNhdGUsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDb0M3SXRlbSB9IGZyb20gJy4uL2l0ZW0uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgRHJvcENvQ0lEIH0gZnJvbSAnLi4vLi4vYXBwcy9kcm9wLWNvYy1pZC5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN0FyY2hldHlwZVNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqIEFjdGl2YXRlIGV2ZW50IGxpc3RlbmVycyB1c2luZyB0aGUgcHJlcGFyZWQgc2hlZXQgSFRNTFxuICAgKiBAcGFyYW0gaHRtbCB7SFRNTH0gICBUaGUgcHJlcGFyZWQgSFRNTCBvYmplY3QgcmVhZHkgdG8gYmUgcmVuZGVyZWQgaW50byB0aGUgRE9NXG4gICAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgLy8gRXZlcnl0aGluZyBiZWxvdyBoZXJlIGlzIG9ubHkgbmVlZGVkIGlmIHRoZSBzaGVldCBpcyBlZGl0YWJsZVxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuaXRlbSAuaXRlbS1uYW1lIGg0JylcbiAgICAgIC5jbGljayhldmVudCA9PiB0aGlzLl9vbkl0ZW1TdW1tYXJ5KGV2ZW50LCAnc2tpbGxzJykpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5pdGVtLWRlbGV0ZScpXG4gICAgICAuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnc2tpbGxzJykpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCwgdHlwZSA9ICdza2lsbCcsIGNvbGxlY3Rpb25OYW1lID0gJ3NraWxscycpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcblxuICAgIGNvbnN0IGRhdGFMaXN0ID0gYXdhaXQgQ29DN1V0aWxpdGllcy5nZXREYXRhRnJvbURyb3BFdmVudChldmVudCwgJ0l0ZW0nKVxuXG4gICAgbGV0IHVzZUNvQ0lEID0gMFxuICAgIGNvbnN0IGNvbGxlY3Rpb24gPSB0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtW2NvbGxlY3Rpb25OYW1lXSkgOiBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkgY29udGludWVcbiAgICAgIGlmICghW3R5cGVdLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cbiAgICAgIGlmICghQ29DN0l0ZW0uaXNBbnlTcGVjKGl0ZW0pKSB7XG4gICAgICAgIGlmIChjb2xsZWN0aW9uLmZpbmQoZWwgPT4gZWwubmFtZSA9PT0gaXRlbS5uYW1lKSkge1xuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHVzZUNvQ0lEID09PSAwKSB7XG4gICAgICAgIHVzZUNvQ0lEID0gYXdhaXQgRHJvcENvQ0lELmNyZWF0ZSgpXG4gICAgICB9XG4gICAgICBjb2xsZWN0aW9uLnB1c2goRHJvcENvQ0lELnByb2Nlc3NJdGVtKHVzZUNvQ0lELCBpdGVtKSlcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7IFtgc3lzdGVtLiR7Y29sbGVjdGlvbk5hbWV9YF06IGNvbGxlY3Rpb24gfSlcbiAgfVxuXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxuICAgIH0pXG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2hhdERhdGEgPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvblxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+JHtjaGF0RGF0YS52YWx1ZX08L2Rpdj5gKVxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIC8vIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbURlbGV0ZSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtSWQgPSBpdGVtLmRhdGEoJ2l0ZW0taWQnKVxuICAgIGNvbnN0IENvQ0lkID0gaXRlbS5kYXRhKCdjb2NpZCcpXG4gICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZEluZGV4KGkgPT4gKGl0ZW1JZCAmJiBpLl9pZCA9PT0gaXRlbUlkKSB8fCAoQ29DSWQgJiYgaSA9PT0gQ29DSWQpKVxuICAgIGlmIChpdGVtSW5kZXggPiAtMSkge1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgICBjb2xsZWN0aW9uLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ29jY3VwYXRpb24nXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9hcmNoZXR5cGUuaHRtbCcsXG4gICAgICB3aWR0aDogNTIwLFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuXG4gICAgY29uc3QgY29yZUNoYXJhY3RlcmlzdGljcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCBzZWxlY3RlZF0gb2YgT2JqZWN0LmVudHJpZXMoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uY29yZUNoYXJhY3RlcmlzdGljc1xuICAgICkpIHtcbiAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICBjb25zdCBjaGFyYWNOYW1lID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDSEFSQUMuJHtrZXkudG9VcHBlckNhc2UoKX1gKVxuICAgICAgICBjb3JlQ2hhcmFjdGVyaXN0aWNzLnB1c2goY2hhcmFjTmFtZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRTdWdnZXN0ZWRPY2N1cGF0aW9ucyA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5zdWdnZXN0ZWRPY2N1cGF0aW9ucyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRTdWdnZXN0ZWRUcmFpdHMgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc3VnZ2VzdGVkVHJhaXRzLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMgPSBhd2FpdCBnYW1lLnN5c3RlbS5hcGkuY29jaWQuZXhwYW5kSXRlbUFycmF5KHsgaXRlbUxpc3Q6IHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5za2lsbHMgfSlcbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuZGF0YS5zeXN0ZW0uc2tpbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5jb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nID0gJydcbiAgICBjb25zdCBvclN0cmluZyA9IGAgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuT3InKX0gYFxuICAgIGlmIChjb3JlQ2hhcmFjdGVyaXN0aWNzLmxlbmd0aCkge1xuICAgICAgc2hlZXREYXRhLmNvcmVDaGFyYWN0ZXJpc3RpY3NTdHJpbmcgKz0gY29yZUNoYXJhY3RlcmlzdGljcy5qb2luKG9yU3RyaW5nKVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMucHVzaChcbiAgICAgIGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5QdWxwVGFsZW50cycpfTogJHtzaGVldERhdGEuZGF0YS5zeXN0ZW0udGFsZW50c31gXG4gICAgKVxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkJvbnVzUG9pbnRzJyl9OiAke3NoZWV0RGF0YS5kYXRhLnN5c3RlbS5ib251c1BvaW50c31gXG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCAkLCBkdXBsaWNhdGUsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0Jvb2tTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2Jvb2svbWFpbi5odG1sJyxcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdpdGVtJywgJ2Jvb2snXSxcbiAgICAgIHdpZHRoOiA1MDAsXG4gICAgICBoZWlnaHQ6ICdhdXRvJyxcbiAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLnNwZWxscycsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHNjcm9sbFk6IFsnLmJvZHknXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLm5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaW5pdGlhbFJlYWRpbmcgPSB0aGlzLml0ZW0uc3lzdGVtLmluaXRpYWxSZWFkaW5nXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICBzaGVldERhdGEuaXNPd25lciA9IHRoaXMuaXRlbS5pc093bmVyXG4gICAgc2hlZXREYXRhLnNwZWxsc0xlYXJuZWQgPSB0aGlzLnNwZWxsc0xlYXJuZWRcbiAgICBzaGVldERhdGEuZXhoYXVzdGVkID0gKGF3YWl0IHRoaXMuaXRlbS5jaGVja0V4aGF1c3Rpb24oKSkgIT09IGZhbHNlXG4gICAgc2hlZXREYXRhLnN0dWR5Q29tcGxldGVkID0gdGhpcy5pdGVtLnN5c3RlbS5zdHVkeS5wcm9ncmVzcyA9PT0gdGhpcy5pdGVtLnN5c3RlbS5zdHVkeS5uZWNlc3NhcnlcbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIHNoZWV0RGF0YS5zcGVsbExpc3RFbXB0eSA9IHRoaXMuaXRlbS5zeXN0ZW0uc3BlbGxzLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkQ29udGVudCA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5jb250ZW50LFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGdldCBzcGVsbHNMZWFybmVkICgpIHtcbiAgICBsZXQgYW1vdW50ID0gMFxuICAgIGNvbnN0IHNwZWxscyA9IHRoaXMuaXRlbS5zeXN0ZW0uc3BlbGxzXG4gICAgZm9yIChjb25zdCBzcGVsbCBvZiBzcGVsbHMpIHtcbiAgICAgIGlmIChzcGVsbC5zeXN0ZW0ubGVhcm5lZCkgYW1vdW50KytcbiAgICB9XG4gICAgcmV0dXJuIGAke2Ftb3VudH0gLyAke3NwZWxscy5sZW5ndGh9YFxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnI2F0dGVtcHQtaW5pdGlhbC1yZWFkaW5nJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgICAgdGhpcy5pdGVtLmF0dGVtcHRJbml0aWFsUmVhZGluZygpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5kZWxldGUtc3BlbGwnKS5jbGljayhldmVudCA9PiB0aGlzLl9vbkRlbGV0ZShldmVudCkpXG4gICAgaHRtbC5maW5kKCcuZWRpdC1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxEZXRhaWwoZXZlbnQpKVxuICAgIGh0bWwuZmluZCgnLnNwZWxsLW5hbWUnKS5jbGljayhldmVudCA9PiB0aGlzLl9vblNwZWxsRGV0YWlsKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy50ZWFjaC1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IGlkID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCdsaScpLmRhdGEoJ2lkJylcbiAgICAgIHRoaXMuaXRlbS5hdHRlbXB0U3BlbGxMZWFybmluZyhpZClcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnW25hbWU9XCJzeXN0ZW0uc3R1ZHkubmVjZXNzYXJ5XCJdJykuY2hhbmdlKGV2ZW50ID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gcGFyc2VJbnQoZXZlbnQuY3VycmVudFRhcmdldC52YWx1ZSlcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygncmVzZXQnLCB2YWx1ZSlcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnI2luY3JlYXNlLXByb2dyZXNzJykuY2xpY2soKCkgPT4ge1xuICAgICAgdGhpcy5pdGVtLmNoYW5nZVByb2dyZXNzKCdpbmNyZWFzZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJyNkZWNyZWFzZS1wcm9ncmVzcycpLmNsaWNrKCgpID0+IHtcbiAgICAgIHRoaXMuaXRlbS5jaGFuZ2VQcm9ncmVzcygnZGVjcmVhc2UnKVxuICAgIH0pXG4gICAgaHRtbC5maW5kKCcuYWRkLW90aGVyLWdhaW5zJykuY2xpY2soZXZlbnQgPT4ge1xuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ2FkZCcpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5jaGFuZ2Utb3RoZXItZ2FpbnMnKS5jaGFuZ2UoZXZlbnQgPT4ge1xuICAgICAgdGhpcy5tb2RpZnlPdGhlcnNHYWlucyhldmVudCwgJ2NoYW5nZScpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJyNyZWRvLWZ1bGwtc3R1ZHknKS5jbGljaygoKSA9PiB7XG4gICAgICB0aGlzLml0ZW0ucmVkb0Z1bGxTdHVkeSgpXG4gICAgfSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtb3RoZXItZ2FpbnMnKS5jbGljayhldmVudCA9PiB7XG4gICAgICB0aGlzLm1vZGlmeU90aGVyc0dhaW5zKGV2ZW50LCAncmVtb3ZlJylcbiAgICB9KVxuICAgIGh0bWwuZmluZCgnLm9wdGlvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMubW9kaWZ5VHlwZShldmVudCkpXG4gIH1cblxuICBhc3luYyBfb25TcGVsbERldGFpbCAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgZWxlbWVudCA9ICQoZXZlbnQuY3VycmVudFRhcmdldClcbiAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXG4gICAgY29uc3QgaW5kZXggPSBlbGVtZW50LnBhcmVudHMoJ2xpJykuZGF0YSgnaW5kZXgnKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0uc3BlbGxEZXRhaWwoaW5kZXgpXG4gIH1cblxuICAvKipcbiAgICogSXQgaXMgY2FsbGVkIGV2ZXJ5IHRpbWUgdGhlIHVzZXIgZGVsZXRlIGEgc3BlbGwgb24gdGhlIHNoZWV0XG4gICAqIEBwYXJhbSB7alF1ZXJ5fSBldmVudCBAc2VlIGFjdGl2YXRlTGlzdGVuZXJzXG4gICAqIEByZXR1cm5zIHtQcm9taXNlLjxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBfb25EZWxldGUgKGV2ZW50KSB7XG4gICAgaWYgKCFnYW1lLnVzZXIuaXNHTSkgcmV0dXJuXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGVsZW1lbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgLyoqIEBzZWUgZGF0YS1pbmRleCBwcm9wZXJ0eSBvbiB0ZW1wbGF0ZSAqL1xuICAgIGNvbnN0IGluZGV4ID0gZWxlbWVudC5wYXJlbnRzKCdsaScpLmRhdGEoJ2luZGV4JylcbiAgICAvKiogQWx3YXlzIGhhcyB0byBiZSBAdHlwZSB7QXJyYXl9ICovXG4gICAgY29uc3Qgc3BlbGxzID0gdGhpcy5pdGVtLnN5c3RlbS5zcGVsbHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uc3BlbGxzKVxuICAgICAgOiBbXVxuICAgIGlmIChpbmRleCA+PSAwKSBzcGVsbHMuc3BsaWNlKGluZGV4LCAxKVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5zcGVsbHMnOiBzcGVsbHMgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBJdCBpcyBjYWxsZWQgZXZlcnkgdGltZSB0aGUgdXNlciBkcmFncyBhbiBpdGVtIHRvIHRoZSBzaGVldFxuICAgKiBGaWx0ZXJzIG9ubHkgJ3NwZWxsJyBpdGVtcyBhbmQgaW5zZXJ0cyB0aGVtIGluIGEgQHR5cGUge0FycmF5fVxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZS48RG9jdW1lbnQ+fSB1cGRhdGUgdG8gSXRlbSBkb2N1bWVudFxuICAgKi9cbiAgYXN5bmMgX29uRHJvcCAoZXZlbnQsIHR5cGUgPSAnc3BlbGwnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIC8qKiBQcmV2ZW50cyBwcm9wYWdhdGlvbiBvZiB0aGUgc2FtZSBldmVudCBmcm9tIGJlaW5nIGNhbGxlZCAqL1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGNvbnN0IHNwZWxscyA9IFtdXG4gICAgZm9yIChjb25zdCBpdGVtIG9mIGRhdGFMaXN0KSB7XG4gICAgICBpZiAoIWl0ZW0gfHwgIVsnc2tpbGwnLCAnc3BlbGwnXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSBjb250aW51ZVxuICAgICAgaWYgKGl0ZW0udHlwZSA9PT0gJ3NwZWxsJykge1xuICAgICAgICBzcGVsbHMucHVzaChpdGVtKVxuICAgICAgfSBlbHNlIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcgJiYgdGhpcy5pdGVtLnN5c3RlbS50eXBlLm90aGVyKSB7XG4gICAgICAgIHRoaXMubW9kaWZ5T3RoZXJzR2FpbnMobnVsbCwgJ2FkZCcsIHsgbmFtZTogaXRlbS5uYW1lIH0pXG4gICAgICB9XG4gICAgfVxuICAgIGF3YWl0IHRoaXMuaXRlbS5hZGRTcGVsbHMoc3BlbGxzKVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgY2hlY2tib3hlcyBmb3IgdHlwZSB3aGVuIHVzZXIgY2xpY2tzIG9uIHRoZSBjb3JyZXNwb25kaW5nXG4gICAqIGxhYmVsLCBub3Qgc3VyZSBpZiB0aGlzIHdvcmtzIG9uIGVuZ2luZXMgb3RoZXIgdGhhbiBWOFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7alF1ZXJ5LkV2ZW50fSBjbGlja1xuICAgKi9cbiAgbW9kaWZ5VHlwZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0b2dnbGVTd2l0Y2ggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgcmV0dXJuIHRvZ2dsZVN3aXRjaC5wcmV2KCkudHJpZ2dlcignY2xpY2snKVxuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmeSBJdGVtIGRhdGEgYmFzZWQgb24gdXNlciBpbnRlcmFjdGlvbnMgd2l0aCB0aGUgb3RoZXIgc2tpbGxcbiAgICogZ2FpbnMgdGFibGUgb24gZGV0YWlscyB0YWIgb24gdGhpcyBzaGVldFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gbW9kZSAnYWRkJyB8fCAnY2hhbmdlJyB8fCAncmVtb3ZlJ1xuICAgKiBAcmV0dXJucyB7UHJvbWlzZTxEb2N1bWVudD59IHVwZGF0ZSB0byBJdGVtIGRvY3VtZW50XG4gICAqL1xuICBhc3luYyBtb2RpZnlPdGhlcnNHYWlucyAoZXZlbnQsIG1vZGUsIG9wdGlvbnMgPSB7fSkge1xuICAgIC8qKiBObyBuZWVkIHRvIGNoZWNrIGlmIHVzZXIgaXMgR00gYmVjYXVzZSBvbmx5IHRoZXkgY2FuIHNlZSBkZXRhaWxzIHRhYiAqL1xuICAgIGxldCBpbmRleCA9IG51bGxcbiAgICBsZXQgZWxlbWVudCA9IG51bGxcbiAgICBpZiAoZXZlbnQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIGVsZW1lbnQgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgICAvKiogQHNlZSBkYXRhLWluZGV4IHByb3BlcnR5IG9uIHRlbXBsYXRlICovXG4gICAgICBpbmRleCA9IGVsZW1lbnQucGFyZW50cygndHInKS5kYXRhKCdpbmRleCcpXG4gICAgICAvKiogQWx3YXlzIGhhcyB0byBiZSBAdHlwZSB7QXJyYXl9ICovXG4gICAgfVxuICAgIGNvbnN0IHNraWxscyA9IHRoaXMuaXRlbS5zeXN0ZW0uZ2FpbnMub3RoZXJzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmdhaW5zLm90aGVycylcbiAgICAgIDogW11cbiAgICBzd2l0Y2ggKG1vZGUpIHtcbiAgICAgIGNhc2UgJ2FkZCc6XG4gICAgICAgIC8qKiBVc2VyIGNsaWNrZWQgb24gcGx1cyBpY29uIHRvIGFkZCBhIG5ldyBza2lsbCBvbiBvdGhlciBnYWlucyB0YWJsZSAqL1xuICAgICAgICBza2lsbHMucHVzaCh7XG4gICAgICAgICAgLyoqIG5ldyBza2lsbCAqL1xuICAgICAgICAgIG5hbWU6IG9wdGlvbnMubmFtZSB8fCBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTmV3U2tpbGxOYW1lJyksXG4gICAgICAgICAgLyoqIGRldmVsb3BtZW50IGJ5IGRlZmF1bHQsIHZhbHVlIGNhbiBhbHNvIGJlIDFkNiBvciAxZDEwICovXG4gICAgICAgICAgdmFsdWU6ICdkZXZlbG9wbWVudCdcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2NoYW5nZSc6XG4gICAgICAgIC8qKiBVc2VyIGNoYW5nZWQgbmFtZSAoaW5wdXQpIG9yIHZhbHVlIChzZWxlY3QpIG9mIGEgc2tpbGwgb24gdGFibGUgKi9cbiAgICAgICAgc2tpbGxzW2luZGV4XSA9IHtcbiAgICAgICAgICBuYW1lOiBlbGVtZW50LmlzKCdpbnB1dCcpID8gZWxlbWVudC52YWwoKSA6IHNraWxsc1tpbmRleF0ubmFtZSxcbiAgICAgICAgICB2YWx1ZTogZWxlbWVudC5pcygnc2VsZWN0JykgPyBlbGVtZW50LnZhbCgpIDogc2tpbGxzW2luZGV4XS52YWx1ZVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdyZW1vdmUnOlxuICAgICAgICAvKiogVXNlciBjbGlja2VkIG9uIG1pbnVzIGljb24gdG8gcmVtb3ZlIGEgc2tpbGwgb24gb3RoZXIgZ2FpbnMgdGFibGUgKi9cbiAgICAgICAgaWYgKGluZGV4ID49IDApIHNraWxscy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5nYWlucy5vdGhlcnMnOiBza2lsbHMgfSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIEFjdG9yU2hlZXQsIENPTlNULCBEaWFsb2csIEZvcm1EYXRhLCBnYW1lLCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCB7IENvQzdMaW5rIH0gZnJvbSAnLi4vLi4vYXBwcy9jb2M3LWxpbmsuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NvbnRhaW5lclNoZWV0IGV4dGVuZHMgQWN0b3JTaGVldCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgNWUgQWN0b3IgU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2FjdG9yJywgJ3N0b3JhZ2UnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvc3RvcmFnZS1zaGVldC5odG1sJyxcbiAgICAgIHdpZHRoOiA2NzIsXG4gICAgICBoZWlnaHQ6IDc2NSxcbiAgICAgIGRyYWdEcm9wOiBbeyBkcmFnU2VsZWN0b3I6ICcuaXRlbScsIGRyb3BTZWxlY3RvcjogbnVsbCB9XSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdpdGVtcydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgZGF0YUxpc3QgPSBhd2FpdCBDb0M3VXRpbGl0aWVzLmdldERhdGFGcm9tRHJvcEV2ZW50KGV2ZW50LCAnSXRlbScpXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuYWN0b3IuaXRlbXMudG9PYmplY3QoKSB8fCBbXVxuICAgIGZvciAoY29uc3QgaXRlbSBvZiBkYXRhTGlzdCkge1xuICAgICAgaWYgKCFpdGVtIHx8ICFpdGVtLnN5c3RlbSkge1xuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuICAgICAgaWYgKCFbJ2Jvb2snLCAnaXRlbScsICdzcGVsbCcsICd3ZWFwb24nXS5pbmNsdWRlcyhpdGVtLnR5cGUpKSB7XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG4gICAgICBpdGVtcy5wdXNoKGl0ZW0udG9PYmplY3QoKSlcbiAgICB9XG4gICAgYXdhaXQgdGhpcy5hY3Rvci51cGRhdGUoeyBpdGVtcyB9KVxuICB9XG5cbiAgb25DbG9zZVNoZWV0ICgpIHt9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmVkaXRhYmxlID0gdGhpcy5pc0VkaXRhYmxlXG5cbiAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUgPSB7fVxuICAgIGlmIChzaGVldERhdGEuaXRlbXMpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBzaGVldERhdGEuaXRlbXMpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoXG4gICAgICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGUsXG4gICAgICAgICAgICBpdGVtLnR5cGVcbiAgICAgICAgICApXG4gICAgICAgICkge1xuICAgICAgICAgIHNoZWV0RGF0YS5pdGVtc0J5VHlwZVtpdGVtLnR5cGVdID0gW11cbiAgICAgICAgfVxuICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbS50eXBlXS5wdXNoKGl0ZW0pXG4gICAgICB9XG4gICAgICBmb3IgKGNvbnN0IGl0ZW1UeXBlIGluIHNoZWV0RGF0YS5pdGVtc0J5VHlwZSkge1xuICAgICAgICBzaGVldERhdGEuaXRlbXNCeVR5cGVbaXRlbVR5cGVdLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5hbGxvd1VubG9jayA9XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnKSA9PT0gJ2Fsd2F5cycgfHxcbiAgICAgIGdhbWUudXNlci5pc0dNXG5cbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdpdGVtJykgfHxcbiAgICAgICFzaGVldERhdGEuZGF0YS5zeXN0ZW0uZmxhZ3MubG9ja2VkXG4gICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlCb29rcyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAnYm9vaycpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5U3BlbGxzID1cbiAgICAgIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzaGVldERhdGEuaXRlbXNCeVR5cGUsICdzcGVsbCcpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuICAgIHNoZWV0RGF0YS5zaG93SW52ZW50b3J5VGFsZW50cyA9XG4gICAgICBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc2hlZXREYXRhLml0ZW1zQnlUeXBlLCAndGFsZW50JykgfHxcbiAgICAgICghc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZCAmJlxuICAgICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdwdWxwUnVsZVRhbGVudHMnKSlcbiAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnMgPVxuICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNoZWV0RGF0YS5pdGVtc0J5VHlwZSwgJ3dlYXBvbicpIHx8XG4gICAgICAhc2hlZXREYXRhLmRhdGEuc3lzdGVtLmZsYWdzLmxvY2tlZFxuXG4gICAgc2hlZXREYXRhLmhhc0ludmVudG9yeSA9XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUl0ZW1zIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeUJvb2tzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVNwZWxscyB8fFxuICAgICAgc2hlZXREYXRhLnNob3dJbnZlbnRvcnlUYWxlbnRzIHx8XG4gICAgICBzaGVldERhdGEuc2hvd0ludmVudG9yeVdlYXBvbnNcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHJldHVybiBzaGVldERhdGFcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tZWRpdCcpLmNsaWNrKGV2ID0+IHtcbiAgICAgIGNvbnN0IGxpID0gJChldi5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJykpXG4gICAgICBpdGVtLnNoZWV0LnJlbmRlcih0cnVlKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5pbnZlbnRvcnktaGVhZGVyJykuY2xpY2sodGhpcy5fb25JbnZlbnRvcnlIZWFkZXIuYmluZCh0aGlzKSlcblxuICAgIGh0bWwuZmluZCgnLml0ZW0tdHJhZGUnKS5jbGljayh0aGlzLl9vblRyYWRlSXRlbS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnNob3ctZGV0YWlsJykuY2xpY2sodGhpcy5fb25JdGVtU3VtbWFyeS5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayhhc3luYyBldiA9PiB7XG4gICAgICBjb25zdCBsaSA9ICQoZXYuY3VycmVudFRhcmdldCkucGFyZW50cygnLml0ZW0nKVxuICAgICAgY29uc3QgaXRlbVRvRGVsZXRlID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbUlkJyksIHtcbiAgICAgICAgc3RyaWN0OiB0cnVlXG4gICAgICB9KVxuICAgICAgYXdhaXQgaXRlbVRvRGVsZXRlLmRlbGV0ZSgpXG4gICAgICBsaS5zbGlkZVVwKDIwMCwgKCkgPT4gdGhpcy5yZW5kZXIoZmFsc2UpKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5hZGQtaXRlbScpLmNsaWNrKGV2ID0+IHtcbiAgICAgIHN3aXRjaCAoZXYuY3VycmVudFRhcmdldC5kYXRhc2V0LnR5cGUpIHtcbiAgICAgICAgY2FzZSAnYm9vayc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUJvb2soZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eUl0ZW0oZXYpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnc2tpbGwnOlxuICAgICAgICAgIHRoaXMuYWN0b3IuY3JlYXRlRW1wdHlTa2lsbChldilcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdzcGVsbCc6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVNwZWxsKGV2KVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ3dlYXBvbic6XG4gICAgICAgICAgdGhpcy5hY3Rvci5jcmVhdGVFbXB0eVdlYXBvbihldilcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJy5sb2NrJykuY2xpY2sodGhpcy5fb25Mb2NrQ2xpY2tlZC5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uTG9ja0NsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGlzTG9ja2VkID0gdGhpcy5hY3Rvci5sb2NrZWRcbiAgICB0aGlzLmFjdG9yLmxvY2tlZCA9ICFpc0xvY2tlZFxuICB9XG5cbiAgYXN5bmMgX29uVHJhZGVJdGVtIChldmVudCkge1xuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuYWN0b3IuaXRlbXMuZ2V0KGxpLmRhdGEoJ2l0ZW1JZCcpKVxuICAgIGxldCBjb250ZW50ID0gJzxwPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWVzc2FnZVNlbGVjdFVzZXJUb0dpdmVUbycpXG4gICAgY29uc3QgbWVzc2FnZSA9IHtcbiAgICAgIGFjdG9yRnJvbTogdGhpcy5hY3Rvci5pZCxcbiAgICAgIHNjZW5lOiBudWxsLFxuICAgICAgYWN0b3JUbzogdGhpcy5hY3Rvci5pZCxcbiAgICAgIGl0ZW06IGl0ZW0uaWRcbiAgICB9XG4gICAgaWYgKHRoaXMudG9rZW4/LmFjdG9yKSB7XG4gICAgICBtZXNzYWdlLmFjdG9yRnJvbSA9IHRoaXMudG9rZW4uaWRcbiAgICAgIG1lc3NhZ2Uuc2NlbmUgPSB0aGlzLnRva2VuLnBhcmVudC5pZFxuICAgIH1cbiAgICBjb25zdCBhY3RvcnMgPSBnYW1lLmFjdG9ycy5maWx0ZXIoZSA9PiB7XG4gICAgICBpZiAoIVsnY2hhcmFjdGVyJywgJ25wYycsICdjcmVhdHVyZScsICdjb250YWluZXInXS5pbmNsdWRlcyhlLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgICAgaWYgKHRoaXMuYWN0b3IuaWQgPT09IGUuaWQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBsZXQgdmlzaWJsZSA9IGZhbHNlXG4gICAgICBmb3IgKGNvbnN0IFtrLCB2XSBvZiBPYmplY3QuZW50cmllcyhlLm93bmVyc2hpcCkpIHtcbiAgICAgICAgaWYgKGsgPT09ICdkZWZhdWx0JyB8fCBrID09PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgICAgICB2aXNpYmxlID1cbiAgICAgICAgICAgIHZpc2libGUgfHxcbiAgICAgICAgICAgIHYgIT09IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmlzaWJsZVxuICAgIH0pXG4gICAgY29udGVudCA9IGNvbnRlbnQgKyAnPGZvcm0gaWQ9XCJzZWxlY3Rmb3JtXCI+PHNlbGVjdCBuYW1lPVwidXNlclwiPidcbiAgICBmb3IgKGNvbnN0IGFjdG9yIG9mIGFjdG9ycykge1xuICAgICAgY29udGVudCA9XG4gICAgICAgIGNvbnRlbnQgKyAnPG9wdGlvbiB2YWx1ZT1cIicgKyBhY3Rvci5pZCArICdcIj4nICsgYWN0b3IubmFtZSArICc8L29wdGlvbj4nXG4gICAgfVxuICAgIGNvbnRlbnQgPSBjb250ZW50ICsgJzwvc2VsZWN0PjwvZm9ybT48L3A+J1xuICAgIGF3YWl0IERpYWxvZy5wcm9tcHQoe1xuICAgICAgdGl0bGU6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5NZXNzYWdlVGl0bGVTZWxlY3RVc2VyVG9HaXZlVG8nKSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBjYWxsYmFjazogaHRtbCA9PiB7XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGh0bWxbMF0ucXVlcnlTZWxlY3RvcignI3NlbGVjdGZvcm0nKSlcbiAgICAgICAgZm9yIChjb25zdCBbbmFtZSwgdmFsdWVdIG9mIGZvcm1EYXRhKSB7XG4gICAgICAgICAgaWYgKG5hbWUgPT09ICd1c2VyJykge1xuICAgICAgICAgICAgbWVzc2FnZS5hY3RvclRvID0gdmFsdWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KVxuICAgIGF3YWl0IGdhbWUuQ29DN3NvY2tldC5leGVjdXRlQXNHTSgnZ210cmFkZWl0ZW10bycsIG1lc3NhZ2UpXG4gIH1cblxuICBfb25JdGVtU3VtbWFyeSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgbGkgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnBhcmVudHMoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtID0gdGhpcy5hY3Rvci5pdGVtcy5nZXQobGkuZGF0YSgnaXRlbS1pZCcpKVxuICAgIGNvbnN0IGNoYXREYXRhID0gaXRlbS5nZXRDaGF0RGF0YSh7IHNlY3JldHM6IHRoaXMuYWN0b3IuaXNPd25lciB9KVxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+PC9kaXY+JylcblxuICAgICAgY29uc3QgbGFiZWxzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxzXCI+PC9kaXY+JylcbiAgICAgIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5sYWJlbHMpIHtcbiAgICAgICAgbGFiZWxzLmFwcGVuZChcbiAgICAgICAgICBgPGRpdiBjbGFzcz1cIml0ZW0tbGFiZWxcIj48c3BhbiBjbGFzcz1cImxhYmVsLW5hbWVcIj4ke3AubmFtZX0gOjwvc3Bhbj48c3BhbiBjbGFzcz1cImxhYmVsLXZhbHVlXCI+JHtwLnZhbHVlfTwvc3Bhbj48L2Rpdj5gXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGRpdi5hcHBlbmQobGFiZWxzKVxuXG4gICAgICBkaXYuYXBwZW5kKFxuICAgICAgICAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1kZXNjcmlwdGlvblwiPiR7Y2hhdERhdGEuZGVzY3JpcHRpb24udmFsdWV9PC9kaXY+YClcbiAgICAgIClcbiAgICAgIGlmIChpdGVtLnN5c3RlbS5wcm9wZXJ0aWVzPy5zcGNsKSB7XG4gICAgICAgIGNvbnN0IHNwZWNpYWxEaXYgPSAkKFxuICAgICAgICAgIGA8ZGl2IGNsYXNzPVwiaXRlbS1zcGVjaWFsXCI+JHtjaGF0RGF0YS5kZXNjcmlwdGlvbi5zcGVjaWFsfTwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgICBkaXYuYXBwZW5kKHNwZWNpYWxEaXYpXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHByb3BzID0gJCgnPGRpdiBjbGFzcz1cIml0ZW0tcHJvcGVydGllc1wiPjwvZGl2PicpXG4gICAgICBmb3IgKGNvbnN0IHAgb2YgY2hhdERhdGEucHJvcGVydGllcykge1xuICAgICAgICBwcm9wcy5hcHBlbmQoXG4gICAgICAgICAgYDxkaXYgY2xhc3M9XCJ0YWcgaXRlbS1wcm9wZXJ0eVwiPiR7Z2FtZS5pMThuLmxvY2FsaXplKHApfTwvZGl2PmBcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgZGl2LmFwcGVuZChwcm9wcylcblxuICAgICAgbGkuYXBwZW5kKGRpdi5oaWRlKCkpXG4gICAgICBDb0M3TGluay5iaW5kRXZlbnRzSGFuZGxlcihkaXYpXG4gICAgICBkaXYuc2xpZGVEb3duKDIwMClcbiAgICB9XG4gICAgbGkudG9nZ2xlQ2xhc3MoJ2V4cGFuZGVkJylcbiAgICAvLyAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnRvZ2dsZUNsYXNzKCdleHBhbmRlZCcpO1xuICB9XG5cbiAgX29uSW52ZW50b3J5SGVhZGVyIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLnNpYmxpbmdzKCdsaScpLnNsaWRlVG9nZ2xlKDIwMClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIERyYWdEcm9wLCBGb3JtQXBwbGljYXRpb24sIGZvdW5kcnksIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdDaGVjayB9IGZyb20gJy4uL2NoZWNrLmpzJ1xuaW1wb3J0IHsgX3BhcnRpY2lwYW50IH0gZnJvbSAnLi4vaXRlbXMvY2hhc2UvcGFydGljaXBhbnQuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlciBleHRlbmRzIEZvcm1BcHBsaWNhdGlvbiB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBmb3VuZHJ5LnV0aWxzLm1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB0aXRsZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFkZEFjdG9yVG9DaGFzZScpLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvY2hhc2UtcGFydGljaXBhbnQtaW1wb3J0ZXIuaHRtbCcsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnZGlhbG9nJywgJ2NoYXNlLXBhcnRpY2lwYW50LWltcG9ydGVyJ10sXG4gICAgICBlZGl0YWJsZTogdHJ1ZSxcbiAgICAgIHJlc2l6YWJsZTogZmFsc2UsXG4gICAgICBzdWJtaXRPbkNoYW5nZTogdHJ1ZSxcbiAgICAgIGNsb3NlT25TdWJtaXQ6IGZhbHNlLFxuICAgICAgd2lkdGg6IDMwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nXG4gICAgfSlcbiAgfVxuXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLmZvcm0tY29udGFpbmVyJyxcbiAgICAgIHBlcm1pc3Npb25zOiB7IGRyb3A6IGdhbWUudXNlci5pc0dNIH0sXG4gICAgICBjYWxsYmFja3M6IHsgZHJvcDogdGhpcy5fb25Ecm9wUGFydGljaXBhbnQuYmluZCh0aGlzKSB9XG4gICAgfSlcbiAgICBwYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGNvbnN0IHRva2VuU2VsZWN0b3JEcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcmFnU2VsZWN0b3I6ICcuY2hhc2UtdG9rZW4nLFxuICAgICAgcGVybWlzc2lvbnM6IHtcbiAgICAgICAgZHJhZ3N0YXJ0OiBnYW1lLnVzZXIuaXNHTVxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX29uVG9rZW5TZWxlY3RvckRyYWdTdGFydC5iaW5kKHRoaXMpXG4gICAgICB9XG4gICAgfSlcbiAgICB0b2tlblNlbGVjdG9yRHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgaHRtbC5maW5kKCcucmVzZXQtcGFydGljaXBhbnQnKS5jbGljayhhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLm9iamVjdCA9IHt9XG4gICAgICB0aGlzLl9hY3RvciA9IG51bGxcbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gICAgfSlcblxuICAgIGh0bWwuZmluZCgnLmZvb2QtY2hhaW4nKS5jbGljayhhc3luYyAoKSA9PiB7XG4gICAgICB0aGlzLm9iamVjdC5jaGFzZXIgPSAhdGhpcy5vYmplY3QuY2hhc2VyXG4gICAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICAgIH0pXG5cbiAgICBodG1sLmZpbmQoJ1tkYXRhLWFjdGlvbl0nKS5jbGljayh0aGlzLl9vbkFjdGlvbi5iaW5kKHRoaXMpKVxuXG4gICAgLy8gaHRtbC5maW5kKCdidXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbi5iaW5kKHRoaXMpKVxuICB9XG5cbiAgYXN5bmMgX29uVG9rZW5TZWxlY3RvckRyYWdTdGFydCAoZXZlbnQpIHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgdHlwZTogJ2dldFRva2VuJyxcbiAgICAgIGFwcElkOiB0aGlzLmFwcElkLFxuICAgICAgY2FsbEJhY2s6ICdhZGRUb2tlblRvQ2hhc2UnXG4gICAgfVxuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBpZiAoIXRoaXMub2JqZWN0LmluaXRpYXRpdmUpIHtcbiAgICAgIGNvbnN0IGluaXQgPSBDb0NBY3Rvci5nZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24oKS5maW5kKFxuICAgICAgICBjID0+IGMua2V5ID09PSAnZGV4J1xuICAgICAgKVxuICAgICAgdGhpcy5vYmplY3QuaW5pdGlhdGl2ZSA9IGluaXQubGFiZWxcbiAgICAgIC8vIHRoaXMub2JqZWN0LmluaXRpYXRpdmUgPSBgJHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAvLyAgICdDb0M3LkNoYXJhY3RlcmlzdGljcydcbiAgICAgIC8vICl9ICgke2luaXQuc2hvcnROYW1lfSlgXG4gICAgfVxuICAgIGlmICghdGhpcy5vYmplY3Quc3BlZWRDaGVjaykge1xuICAgICAgY29uc3Qgc3BlZWRDaGVjayA9IENvQ0FjdG9yLmdldENoYXJhY3RlcmlzdGljRGVmaW5pdGlvbigpLmZpbmQoXG4gICAgICAgIGMgPT4gYy5rZXkgPT09ICdjb24nXG4gICAgICApXG4gICAgICB0aGlzLm9iamVjdC5zcGVlZENoZWNrID0ge1xuICAgICAgICBuYW1lOiBzcGVlZENoZWNrLmxhYmVsXG4gICAgICB9XG4gICAgICAvLyB0aGlzLm9iamVjdC5zcGVlZENoZWNrID0ge1xuICAgICAgLy8gICBuYW1lOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ2hhcmFjdGVyaXN0aWNzJyl9ICgke1xuICAgICAgLy8gICAgIHNwZWVkQ2hlY2suc2hvcnROYW1lXG4gICAgICAvLyAgIH0pYFxuICAgICAgLy8gfVxuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGVQYXJ0aWNpcGFudCgpXG5cbiAgICAvLyBjb25zdCBzcGVlZENoZWNrID0gdGhpcy5hY3Rvcj8uZmluZCggdGhpcy5vYmplY3Quc3BlZWRDaGVjaz8ubmFtZSlcbiAgICAvLyBpZiggc3BlZWRDaGVjayl7XG4gICAgLy8gICB0aGlzLm9iamVjdC5zcGVlZENoZWNrID0gc3BlZWRDaGVja1xuICAgIC8vIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBzdXBlci5nZXREYXRhKClcblxuICAgIGRhdGEucGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxuICAgIGlmIChkYXRhLm9iamVjdC5zcGVlZENoZWNrLm5hbWUgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgY29uc3Qgc3BlZWRDaGVjayA9IHRoaXMuYWN0b3IuZmluZChkYXRhLm9iamVjdC5zcGVlZENoZWNrLm5hbWUpXG4gICAgICBpZiAoc3BlZWRDaGVjaykge1xuICAgICAgICBkYXRhLm9iamVjdC5zcGVlZENoZWNrLnNjb3JlID0gc3BlZWRDaGVjay52YWx1ZS52YWx1ZVxuICAgICAgICBkYXRhLnNwZWVkQ2hlY2tSZWFkT25seSA9IHRydWVcbiAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgIGRhdGEucGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSAmJlxuICAgICAgICAhdGhpcy5vYmplY3Quc3BlZWRDaGVjaz8uc2NvcmVcbiAgICAgICkge1xuICAgICAgICBkYXRhLm9iamVjdC5zcGVlZENoZWNrLnNjb3JlID0gZGF0YS5wYXJ0aWNpcGFudC5zcGVlZENoZWNrLnNjb3JlXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRhdGEub2JqZWN0LmluaXRpYXRpdmUgJiYgdGhpcy5hY3Rvcikge1xuICAgICAgY29uc3QgaW5pdGlhdGl2ZSA9IHRoaXMuYWN0b3IuZmluZChkYXRhLm9iamVjdC5pbml0aWF0aXZlKVxuICAgICAgaWYgKGluaXRpYXRpdmUpIHtcbiAgICAgICAgZGF0YS5vYmplY3QuZGV4ID0gaW5pdGlhdGl2ZS52YWx1ZS52YWx1ZVxuICAgICAgICBkYXRhLmluaXRSZWFkT25seSA9IHRydWVcbiAgICAgIH0gZWxzZSBkYXRhLm9iamVjdC5kZXggPSBkYXRhLnBhcnRpY2lwYW50LmluaXRpYXRpdmVcbiAgICB9XG5cbiAgICBkYXRhLmFjdG9yID0gdGhpcy5hY3RvclxuICAgIGRhdGEuY2hhc2UgPSB0aGlzLmNoYXNlXG4gICAgZGF0YS5kYXRhID0gdGhpcy5kYXRhXG5cbiAgICBkYXRhLm9wdGlvbnNMaXN0ID0ge31cbiAgICBpZiAodGhpcy5jaGFzZSkge1xuICAgICAgZGF0YS5za2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0ID1cbiAgICAgICAgdGhpcy5jaGFzZS5hbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NTaG9ydFxuICAgIH1cblxuICAgIGlmICh0aGlzLmFjdG9yKSB7XG4gICAgICBkYXRhLnNraWxsc0FuZENoYXJhY3RlcmlzdGljc0xpc3QgPSBbXVxuICAgICAgQ29DQWN0b3IuZ2V0Q2hhcmFjdGVyaXN0aWNEZWZpbml0aW9uKCkuZm9yRWFjaChjID0+XG4gICAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdC5wdXNoKGAke2MubGFiZWx9YClcbiAgICAgIClcbiAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdC5wdXNoKFxuICAgICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTHVjaycpfWBcbiAgICAgIClcbiAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdC5wdXNoKFxuICAgICAgICBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU0FOJyl9YFxuICAgICAgKVxuICAgICAgdGhpcy5hY3Rvci5za2lsbHMuZm9yRWFjaChzID0+XG4gICAgICAgIGRhdGEuc2tpbGxzQW5kQ2hhcmFjdGVyaXN0aWNzTGlzdC5wdXNoKHMubmFtZSlcbiAgICAgIClcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxuICB9XG5cbiAgZ2V0IGNoYXNlICgpIHtcbiAgICBpZiAoIXRoaXMuX2NoYXNlKSB7XG4gICAgICB0aGlzLl9jaGFzZSA9IENvQzdVdGlsaXRpZXMuU2Zyb21VdWlkKHRoaXMub2JqZWN0LmNoYXNlVXVpZClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NoYXNlXG4gIH1cblxuICBnZXQgYWN0b3IgKCkge1xuICAgIGlmICghdGhpcy5vYmplY3QuZG9jVXVpZCkgcmV0dXJuIG51bGxcbiAgICBpZiAoIXRoaXMuX2FjdG9yKSB7XG4gICAgICB0aGlzLl9hY3RvciA9IENvQzdVdGlsaXRpZXMuZ2V0QWN0b3JGcm9tS2V5KHRoaXMub2JqZWN0LmRvY1V1aWQpXG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9hY3RvclxuICB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgZm91bmRyeS51dGlscy5tZXJnZU9iamVjdCh0aGlzLCBmb3JtRGF0YSlcbiAgICBhd2FpdCB0aGlzLnJlbmRlcih0cnVlKVxuICB9XG5cbiAgYXN5bmMgX29uRHJvcFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGNvbnN0IGRyb3BTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgY29uc3QgZHJvcERhdGEgPSBKU09OLnBhcnNlKGRyb3BTdHJpbmcpXG5cbiAgICBjb25zdCBkb2NVdWlkID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhKGRyb3BEYXRhKVxuXG4gICAgdGhpcy5vYmplY3QuZG9jVXVpZCA9IGRvY1V1aWRcblxuICAgIC8vIElmIGFjdG9yIGlzIGNvbnRyb2xsZWQgYnkgR00gb25seSB3ZSBhc3N1bWUgaGUgaXMgYSBjaGFzZXJcbiAgICB0aGlzLm9iamVjdC5jaGFzZXIgPSB0aGlzLmFjdG9yPy5vd25lcnM/LmZpbHRlcih1ID0+ICF1LmlzR00pLmxlbmd0aCA9PT0gMFxuICAgIGlmICh0aGlzLm9iamVjdC5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nKSB7XG4gICAgICBkZWxldGUgdGhpcy5vYmplY3Quc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZ1xuICAgIH1cblxuICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gIH1cblxuICBhc3luYyBhZGRUb2tlblRvQ2hhc2UgKHRva2Vucykge1xuICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICB0aGlzLm9iamVjdC5kb2NVdWlkID0gdG9rZW5zWzBdLmRvY3VtZW50Py51dWlkXG4gICAgICAvLyBJZiBhY3RvciBpcyBjb250cm9sbGVkIGJ5IEdNIG9ubHkgd2UgYXNzdW1lIGhlIGlzIGEgY2hhc2VyXG4gICAgICB0aGlzLm9iamVjdC5jaGFzZXIgPSB0aGlzLmFjdG9yPy5vd25lcnM/LmZpbHRlcih1ID0+ICF1LmlzR00pLmxlbmd0aCA9PT0gMFxuICAgICAgaWYgKHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMub2JqZWN0LnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmdcbiAgICAgIH1cbiAgICAgIGF3YWl0IHRoaXMucmVuZGVyKHRydWUpXG4gICAgfSBlbHNlIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMud2FybihnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JUb2tlbkluY29ycmVjdCcpKVxuICAgIH1cbiAgfVxuXG4gIGFzeW5jIF9vbkFjdGlvbiAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cbiAgICBjb25zdCBhY3Rpb24gPSBldmVudC5jdXJyZW50VGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2NoYXNlLWNhbmNlbCc6XG4gICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhc2UtYWRkJzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gbmV3IF9wYXJ0aWNpcGFudCh0aGlzLm9iamVjdClcblxuICAgICAgICAgIGlmICh0aGlzLmNoYXNlLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgIShwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbiAmJiBwYXJ0aWNpcGFudC5tb3ZlbWVudEFjdGlvbiA+IDApXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKFxuICAgICAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Eb2VzTm90TWVldE1pbmltdW1SZXFUb0JlQWRkZWQnKVxuICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIHJldHVyblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YS5vdmVycmlkZU1vdmVtZW50QWN0aW9uKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHNsb3dlc3QgPSB0aGlzLmNoYXNlLnNsb3dlc3RQYXJ0aWNpcGFudFxuICAgICAgICAgICAgICBpZiAoaXNOYU4ocGFydGljaXBhbnQuYWRqdXN0ZWRNb3YpKSB7XG4gICAgICAgICAgICAgICAgcGFydGljaXBhbnQubW92ID0gc2xvd2VzdC5hZGp1c3RlZE1vdlxuICAgICAgICAgICAgICB9IC8qKiBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLm1vdiA9XG4gICAgICAgICAgICAgICAgICBzbG93ZXN0LmFkanVzdGVkTW92ICsgcGFydGljaXBhbnQubW92ZW1lbnRBY3Rpb24gLSAxXG4gICAgICAgICAgICAgIH0gKi9cbiAgICAgICAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGF3YWl0IHRoaXMuY2hhc2UuYWRkUGFydGljaXBhbnQocGFydGljaXBhbnQsIHtcbiAgICAgICAgICAgIGxvY2F0aW9uVXVpZDogdGhpcy5vYmplY3QubG9jYXRpb25VdWlkLFxuICAgICAgICAgICAgcmVjYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnM6IHRoaXMuZGF0YS5yZWNhbGN1bGF0aW9uTmVlZGVkLFxuICAgICAgICAgICAgdXBkYXRlOiB0aGlzLm9iamVjdC51cGRhdGVcbiAgICAgICAgICB9KVxuICAgICAgICAgIHRoaXMuY2xvc2UoKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ3JvbGwtc3BlZWQtY2hlY2snOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxuICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlNldCkge1xuICAgICAgICAgICAgY29uc3Qgcm9sbCA9IG5ldyBDb0M3Q2hlY2soKVxuICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsZWQgPSB0cnVlXG4gICAgICAgICAgICByb2xsLmFjdG9yID0gcGFydGljaXBhbnQuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQ2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsQ2hhcmFjdGVyaXN0aWMocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suaXNTa2lsbCkge1xuICAgICAgICAgICAgICByb2xsLnNraWxsID0gcGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZcbiAgICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsKClcbiAgICAgICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5zcGVlZENoZWNrLnJvbGxEYXRhU3RyaW5nID0gcm9sbC5KU09OUm9sbFN0cmluZ1xuICAgICAgICAgICAgfSBlbHNlIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQXR0cmlidXRlKSB7XG4gICAgICAgICAgICAgIGF3YWl0IHJvbGwucm9sbEF0dHJpYnV0ZShwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZi5rZXkpXG4gICAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHJvbGxEYXRhID0ge1xuICAgICAgICAgICAgICByYXdWYWx1ZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSxcbiAgICAgICAgICAgICAgZGlzcGxheU5hbWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2submFtZSxcbiAgICAgICAgICAgICAgYWN0b3JOYW1lOiBwYXJ0aWNpcGFudC5uYW1lID8gcGFydGljaXBhbnQubmFtZSA6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHBhcnRpY2lwYW50Lmhhc0FjdG9yKSB7XG4gICAgICAgICAgICAgIHJvbGxEYXRhLmFjdG9yID0gcGFydGljaXBhbnQuYWN0b3IuYWN0b3JLZXlcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJvbGwgPSBDb0M3Q2hlY2suY3JlYXRlKHJvbGxEYXRhKVxuICAgICAgICAgICAgYXdhaXQgcm9sbC5yb2xsKClcbiAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgICAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGZvdW5kcnkudXRpbHMubWVyZ2VPYmplY3QodGhpcy5vYmplY3QsIHBhcnRpY2lwYW50LmRhdGEpXG4gICAgICAgICAgdGhpcy5yZW5kZXIodHJ1ZSlcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgdmFsaWRhdGVQYXJ0aWNpcGFudCAoKSB7XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBuZXcgX3BhcnRpY2lwYW50KHRoaXMub2JqZWN0KVxuICAgIGlmICghdGhpcy5kYXRhKSB0aGlzLmRhdGEgPSB7fVxuICAgIHRoaXMub2JqZWN0LmV4Y2x1ZGVkID0gZmFsc2VcbiAgICB0aGlzLm9iamVjdC5lc2NhcGVkID0gZmFsc2VcbiAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IGZhbHNlXG4gICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50RXhjbHVkZWQgPSBmYWxzZVxuICAgIHRoaXMuZGF0YS5tb3ZlbWVudEFjdGlvbkRlbHRhID0gMFxuXG4gICAgaWYgKCF0aGlzLmRhdGEub3ZlcnJpZGVNb3ZlbWVudEFjdGlvbikge1xuICAgICAgY29uc3Qgc2xvd2VzdFByZXkgPSB0aGlzLmNoYXNlLnNsb3dlc3RQcmV5XG4gICAgICBjb25zdCBmYXN0ZXN0Q2hhc2VyID0gdGhpcy5jaGFzZS5mYXN0ZXN0Q2hhc2VyXG4gICAgICBjb25zdCBzbG93ZXN0ID0gdGhpcy5jaGFzZS5zbG93ZXN0UGFydGljaXBhbnRcblxuICAgICAgaWYgKHBhcnRpY2lwYW50LmFkanVzdGVkTW92IDwgc2xvd2VzdD8uYWRqdXN0ZWRNb3YpIHtcbiAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSB0cnVlXG4gICAgICAgIHBhcnRpY2lwYW50Lm1vdmVtZW50QWN0aW9uID0gMVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgICAgICBwYXJ0aWNpcGFudC5jYWxjdWxhdGVNb3ZlbWVudEFjdGlvbnMoc2xvd2VzdD8uYWRqdXN0ZWRNb3YpXG4gICAgICB9XG4gICAgICBpZiAocGFydGljaXBhbnQuaXNDaGFzZXIpIHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHNsb3dlc3RQcmV5ICYmXG4gICAgICAgICAgIXRoaXMuY2hhc2Uuc3lzdGVtLmluY2x1ZGVMYXN0Q29tbWVycyAmJlxuICAgICAgICAgIHBhcnRpY2lwYW50LmFkanVzdGVkTW92IDwgc2xvd2VzdFByZXkuYWRqdXN0ZWRNb3ZcbiAgICAgICAgKSB7XG4gICAgICAgICAgdGhpcy5vYmplY3QuZXhjbHVkZWQgPSB0cnVlXG4gICAgICAgICAgdGhpcy5kYXRhLnBhcnRpY2lwYW50RXhjbHVkZWQgPSB0cnVlXG4gICAgICAgICAgdGhpcy5kYXRhLmV4Y2x1ZGVkQmVjYXVzZSA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub29TbG93JylcbiAgICAgICAgICB0aGlzLmRhdGEucmVjYWxjdWxhdGlvbk5lZWRlZCA9IGZhbHNlXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBhcnRpY2lwYW50LmlzUHJleSkge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgZmFzdGVzdENoYXNlciAmJlxuICAgICAgICAgICF0aGlzLmNoYXNlLnN5c3RlbS5pbmNsdWRlRXNjYXBlZCAmJlxuICAgICAgICAgIHBhcnRpY2lwYW50LmFkanVzdGVkTW92ID4gZmFzdGVzdENoYXNlci5hZGp1c3RlZE1vdlxuICAgICAgICApIHtcbiAgICAgICAgICB0aGlzLm9iamVjdC5lc2NhcGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuZGF0YS5wYXJ0aWNpcGFudEV4Y2x1ZGVkID0gdHJ1ZVxuICAgICAgICAgIHRoaXMuZGF0YS5leGNsdWRlZEJlY2F1c2UgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9vRmFzdCcpXG4gICAgICAgICAgdGhpcy5kYXRhLnJlY2FsY3VsYXRpb25OZWVkZWQgPSBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGFzeW5jIGNyZWF0ZSAoZGF0YSkge1xuICAgIGlmIChkYXRhLmRyb3BEYXRhKSB7XG4gICAgICBjb25zdCBkb2NVdWlkID0gQ29DN1V0aWxpdGllcy5nZXRBY3RvckRvY3VtZW50RnJvbURyb3BEYXRhKGRhdGEuZHJvcERhdGEpXG4gICAgICBpZiAoZG9jVXVpZCkgZGF0YS5kb2NVdWlkID0gZG9jVXVpZFxuICAgICAgZGVsZXRlIGRhdGEuZHJvcERhdGFcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyKGRhdGEpLnJlbmRlcih0cnVlKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgRGlhbG9nLCBEcmFnRHJvcCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGZsYXR0ZW5PYmplY3QsIEZvcm1EYXRhRXh0ZW5kZWQsIGZvdW5kcnksIGdhbWUsIGdldFR5cGUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IsIHVpICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlciB9IGZyb20gJy4uLy4uL2FwcHMvY2hhc2UtcGFydGljaXBhbnQtaW1wb3J0ZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uLy4uL2NoYXQuanMnXG5pbXBvcnQgeyBjaGF0SGVscGVyIH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuLi8uLi9jaGVjay5qcydcbmltcG9ydCB7IF9wYXJ0aWNpcGFudCB9IGZyb20gJy4vcGFydGljaXBhbnQuanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3Q2hhc2VTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnaXRlbScsICdjaGFzZSddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2NoYXNlLmh0bWwnLFxuICAgICAgd2lkdGg6IDU1MCxcbiAgICAgIGhlaWdodDogNTAwLFxuICAgICAgcmVzaXphYmxlOiB0cnVlLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2JyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ3BhcnRpY2lwYW50cydcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG5cbiAgICByZXR1cm4gb3B0aW9uc1xuXG4gICAgLy8gY2xvc2VPblN1Ym1pdDogZmFsc2UsXG4gICAgLy8gc3VibWl0T25DbG9zZTogdHJ1ZSxcbiAgfVxuXG4gIC8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cbiAgc3RhdGljIGdldCB0eXBlICgpIHtcbiAgICByZXR1cm4gJ2NvYzdDaGFzZVNoZWV0J1xuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBnZXREYXRhIChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKG9wdGlvbnMpXG5cbiAgICBzaGVldERhdGEucGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnBhcnRpY2lwYW50c09iamVjdFxuICAgIHNoZWV0RGF0YS5wYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUgPSB0aGlzLml0ZW0ucGFydGljaXBhbnRzQnlJbml0aWF0aXZlXG4gICAgc2hlZXREYXRhLnByZXlzID0gdGhpcy5pdGVtLnByZXlzXG4gICAgc2hlZXREYXRhLmNoYXNlcnMgPSB0aGlzLml0ZW0uY2hhc2Vyc1xuXG4gICAgc2hlZXREYXRhLnByZXlzTWluTW92ID0gc2hlZXREYXRhLnByZXlzLmxlbmd0aCA/IHNoZWV0RGF0YS5wcmV5cy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYuYWRqdXN0ZWRNb3YgPCBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnQpLmFkanVzdGVkTW92IDogLTFcblxuICAgIHNoZWV0RGF0YS5wcmV5c01heE1vdiA9IHNoZWV0RGF0YS5wcmV5cy5sZW5ndGggPyBzaGVldERhdGEucHJleXMucmVkdWNlKChwcmV2LCBjdXJyZW50KSA9PiBwcmV2LmFkanVzdGVkTW92ID4gY3VycmVudC5hZGp1c3RlZE1vdiA/IHByZXYgOiBjdXJyZW50KS5hZGp1c3RlZE1vdiA6IC0xXG5cbiAgICBzaGVldERhdGEuY2hhc2Vyc01pbk1vdiA9IHNoZWV0RGF0YS5jaGFzZXJzLmxlbmd0aCA/IHNoZWV0RGF0YS5jaGFzZXJzLnJlZHVjZSgocHJldiwgY3VycmVudCkgPT4gcHJldi5hZGp1c3RlZE1vdiA8IGN1cnJlbnQuYWRqdXN0ZWRNb3YgPyBwcmV2IDogY3VycmVudCkuYWRqdXN0ZWRNb3YgOiAtMVxuXG4gICAgc2hlZXREYXRhLmNoYXNlcnNNYXhNb3YgPSBzaGVldERhdGEuY2hhc2Vycy5sZW5ndGggPyBzaGVldERhdGEuY2hhc2Vycy5yZWR1Y2UoKHByZXYsIGN1cnJlbnQpID0+IHByZXYuYWRqdXN0ZWRNb3YgPiBjdXJyZW50LmFkanVzdGVkTW92ID8gcHJldiA6IGN1cnJlbnQpLmFkanVzdGVkTW92IDogLTFcblxuICAgIHNoZWV0RGF0YS5jaGFzZXJzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hZGp1c3RlZE1vdiA8IHNoZWV0RGF0YS5wcmV5c01pbk1vdikge1xuICAgICAgICBwLnRvb1Nsb3coKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcC5pbmNsdWRlSW5DaGFzZSgpXG4gICAgICB9XG4gICAgICBwLmZhc3Rlc3QgPSBwLmFkanVzdGVkTW92ID09PSBzaGVldERhdGEuY2hhc2Vyc01heE1vdlxuICAgICAgcC5zbG93ZXN0ID0gcC5hZGp1c3RlZE1vdiA9PT0gc2hlZXREYXRhLmNoYXNlcnNNaW5Nb3ZcbiAgICB9KVxuXG4gICAgc2hlZXREYXRhLnByZXlzLmZvckVhY2gocCA9PiB7XG4gICAgICBpZiAocC5hZGp1c3RlZE1vdiA+IHNoZWV0RGF0YS5jaGFzZXJzTWF4TW92KSB7XG4gICAgICAgIHAuZXNjYXBlZCgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwLmluY2x1ZGVJbkNoYXNlKClcbiAgICAgIH1cbiAgICAgIHAuZmFzdGVzdCA9IHAuYWRqdXN0ZWRNb3YgPT09IHNoZWV0RGF0YS5wcmV5c01heE1vdlxuICAgICAgcC5zbG93ZXN0ID0gcC5hZGp1c3RlZE1vdiA9PT0gc2hlZXREYXRhLnByZXlzTWluTW92XG4gICAgfSlcblxuICAgIHNoZWV0RGF0YS5sb2NhdGlvbnMgPSB0aGlzLml0ZW0ubG9jYXRpb25zXG4gICAgc2hlZXREYXRhLmFsbEhhdmVWYWxpZE1vdiA9IHRoaXMuYWxsSGF2ZVZhbGlkTW92XG4gICAgc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uID0gdGhpcy5pdGVtLmFjdGl2ZUxvY2F0aW9uXG4gICAgaWYgKHNoZWV0RGF0YS5hY3RpdmVMb2NhdGlvbikge1xuICAgICAgc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uLnRpdGxlID0gc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uLmNvb3JkaW5hdGVzXG4gICAgICAgID8gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Mb2NhdGlvbkNvb3JkaW5hdGUnLCB7XG4gICAgICAgICAgeDogc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uLmNvb3JkaW5hdGVzLngsXG4gICAgICAgICAgeTogc2hlZXREYXRhLmFjdGl2ZUxvY2F0aW9uLmNvb3JkaW5hdGVzLnlcbiAgICAgICAgfSlcbiAgICAgICAgOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRHJhZ09uQ2FudmFzJylcbiAgICB9XG4gICAgc2hlZXREYXRhLnByZXZpb3VzTG9jYXRpb24gPSB0aGlzLml0ZW0ucHJldmlvdXNMb2NhdGlvblxuICAgIHNoZWV0RGF0YS5uZXh0TG9jYXRpb24gPSB0aGlzLml0ZW0ubmV4dExvY2F0aW9uXG4gICAgc2hlZXREYXRhLnN0YXJ0ZWQgPSB0aGlzLml0ZW0uc3RhcnRlZFxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvLyBnZXQgYWN0aXZlUGFydGljaXBhbnQgKCkge1xuICAvLyAgIGlmICghdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpIHJldHVybiB1bmRlZmluZWRcbiAgLy8gICBjb25zdCBwYXJ0aWNpcGFudCA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmQocCA9PiBwLmFjdGl2ZSlcbiAgLy8gICBpZiAoIXBhcnRpY2lwYW50KSByZXR1cm4gdW5kZWZpbmVkXG4gIC8vICAgcmV0dXJuIG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnQpXG4gIC8vIH1cblxuICAvLyBnZXQgYWN0aXZlUGFydGljaXBhbnRMb2NhdGlvbiAoKSB7XG4gIC8vICAgaWYgKCF0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cykgcmV0dXJuIHVuZGVmaW5lZFxuICAvLyAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMuZmluZChwID0+IHAuYWN0aXZlKVxuICAvLyB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICAvLyBodG1sLmZpbmQoJy5jaGFzZS10cmFjaycpLnJlYWR5KGFzeW5jIGh0bWwgPT4gYXdhaXQgdGhpcy5fb25TaGVldFJlYWR5KGh0bWwpKVxuXG4gICAgLy8gSGFuZGxlIERyb3Byb3duXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5kcm9wZG93bi1lbGVtZW50JylcbiAgICAgIC5vbignY2xpY2snLCBldmVudCA9PiB0aGlzLl9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkKGV2ZW50KSlcblxuICAgIGh0bWwuZmluZCgnLmRyb3BidG4nKS5jbGljayhldmVudCA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgY29uc3QgZHJvcGRvd24gPSB0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duJylcbiAgICAgIGNvbnN0IGRyb3Bkb3duQ29udGVudCA9IGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1jb250ZW50JylcbiAgICAgIGRyb3Bkb3duQ29udGVudC5jbGFzc0xpc3QudG9nZ2xlKCdzaG93JylcbiAgICB9KVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcuZHJvcGRvd24nKVxuICAgICAgLm1vdXNlbGVhdmUoZXZlbnQgPT5cbiAgICAgICAgZXZlbnQuY3VycmVudFRhcmdldFxuICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tY29udGVudCcpXG4gICAgICAgICAgLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKVxuICAgICAgKVxuXG4gICAgaHRtbC5vbignZGJsY2xpY2snLCAnLm9wZW4tYWN0b3InLCBDb0M3Q2hhdC5fb25PcGVuQWN0b3IuYmluZCh0aGlzKSlcblxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGluLWxvY2F0aW9uJylcbiAgICAgIC5jb250ZXh0bWVudSh0aGlzLmNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcy5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdlbnRlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnb3ZlcicsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0VudGVyUGFydGljaXBhbnQoZXZlbnQpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLnBhcnRpY2lwYW50JylcbiAgICAgIC5vbignZHJvcCcsIGV2ZW50ID0+IHRoaXMuX29uRHJhZ0xlYXZlUGFydGljaXBhbnQoZXZlbnQpKVxuXG4gICAgaHRtbC5maW5kKCcucC1zaWRlJykuY2xpY2sodGhpcy5fb25DaGFuZ2VTaWRlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuZGVsZXRlLXBhcnRpY2lwYW50JykuY2xpY2sodGhpcy5fb25EZWxldGVQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnJlc2V0LXJvbGwnKS5jbGljayh0aGlzLl9vblJlc2V0Um9sbC5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLmRlbGV0ZS1kcml2ZXInKS5jbGljayh0aGlzLl9vbkRlbGV0ZURyaXZlci5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnZW50ZXInLCBldmVudCA9PiB0aGlzLl9vbkRyYWdFbnRlclBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2RyYWdvdmVyJywgZXZlbnQgPT4gdGhpcy5fb25EcmFnRW50ZXJQYXJ0aWNpcGFudChldmVudCkpXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5uZXctcGFydGljaXBhbnQnKVxuICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcbiAgICBodG1sXG4gICAgICAuZmluZCgnLm5ldy1wYXJ0aWNpcGFudCcpXG4gICAgICAub24oJ2Ryb3AnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZVBhcnRpY2lwYW50KGV2ZW50KSlcblxuICAgIGh0bWwuZmluZCgnLmFkZC1zaWduJykuY2xpY2sodGhpcy5fb25BZGRQYXJ0aWNpcGFudC5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcucm9sbC1wYXJ0aWNpcGFudCcpLmNsaWNrKHRoaXMuX29uUm9sbFBhcnRpY2lwYW50LmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5idXR0b24nKS5jbGljayh0aGlzLl9vbkJ1dHRvbkNsaWNrLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5uYW1lLWNvbnRhaW5lcicpLmNsaWNrKHRoaXMuX29uTG9jYXRpb25DbGljay5iaW5kKHRoaXMpKVxuXG4gICAgaHRtbC5maW5kKCcub2JzdGFjbGUtdHlwZScpLmNsaWNrKHRoaXMuX29uT2JzdGFjbGVUeXBlQ2xpY2suYmluZCh0aGlzKSlcbiAgICAvLyBodG1sLmZpbmQoJy5vYnN0YWNsZS10b2dnbGUnKS5jbGljayh0aGlzLl9vbk9ic3RhY2xlVG9nZ2xlQ2xpY2suYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy50b2dnbGUnKS5jbGljayh0aGlzLl9vblRvZ2dsZS5iaW5kKHRoaXMpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucGFydGljaXBhbnQtY29udHJvbCcpXG4gICAgICAuY2xpY2sodGhpcy5fb25QYXJ0aWNpcGFudENvbnRyb2xDbGlja2VkLmJpbmQodGhpcykpXG5cbiAgICBodG1sLmZpbmQoJy5jaGFzZS1jb250cm9sJykuY2xpY2sodGhpcy5fb25DaGFzZUNvbnRyb2xDbGlja2VkLmJpbmQodGhpcykpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLmxvY2F0aW9uLWNvbnRyb2wnKVxuICAgICAgLmNsaWNrKHRoaXMuX29uTG9jYXRpb25Db250cm9sQ2xpY2suYmluZCh0aGlzKSlcbiAgICAvLyBodG1sXG4gICAgLy8gICAuZmluZCgnLm1vdmVtZW50LWFjdGlvbiAuZGVjcmVhc2UnKVxuICAgIC8vICAgLmNsaWNrKHRoaXMuX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zLmJpbmQodGhpcywgLTEpKVxuICAgIC8vIGh0bWxcbiAgICAvLyAgIC5maW5kKCcubW92ZW1lbnQtYWN0aW9uIC5pbmNyZWFzZScpXG4gICAgLy8gICAuY2xpY2sodGhpcy5fb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMuYmluZCh0aGlzLCAxKSlcblxuICAgIC8vIGh0bWxcbiAgICAvLyAuZmluZCgnLnBpbi1sb2NhdGlvbicpXG4gICAgLy8gLm9uKCdkcmFnc3RhcnQnLCBldmVudCA9PiB0aGlzLl9vblBpbkxvY2F0aW9uRHJhZ1N0YXJ0KGV2ZW50KSlcblxuICAgIGNvbnN0IHBpbkxvY2F0aW9uU2VsZWN0b3JEcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcmFnU2VsZWN0b3I6ICcucGluLWxvY2F0aW9uJyxcbiAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgIGRyYWdzdGFydDogdGhpcy5fY2FuUGluTG9jYXRpb25EcmFnU3RhcnQuYmluZCh0aGlzKVxuICAgICAgfSxcbiAgICAgIGNhbGxiYWNrczoge1xuICAgICAgICBkcmFnc3RhcnQ6IHRoaXMuX29uUGluTG9jYXRpb25EcmFnU3RhcnQuYmluZCh0aGlzKVxuICAgICAgfVxuICAgIH0pXG4gICAgcGluTG9jYXRpb25TZWxlY3RvckRyYWdEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgIGNvbnN0IHBhcnRpY2lwYW50RHJhZ0Ryb3AgPSBuZXcgRHJhZ0Ryb3Aoe1xuICAgICAgZHJvcFNlbGVjdG9yOiAnLnBhcnRpY2lwYW50JyxcbiAgICAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkRyb3BQYXJ0aWNpcGFudC5iaW5kKHRoaXMpIH1cbiAgICB9KVxuICAgIHBhcnRpY2lwYW50RHJhZ0Ryb3AuYmluZChodG1sWzBdKVxuXG4gICAgY29uc3QgbmV3UGFydGljaXBhbnREcmFnRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICBkcm9wU2VsZWN0b3I6ICcubmV3LXBhcnRpY2lwYW50JyxcbiAgICAgIGNhbGxiYWNrczogeyBkcm9wOiB0aGlzLl9vbkFkZFBhcnRpY2lwYW50LmJpbmQodGhpcykgfVxuICAgIH0pXG4gICAgbmV3UGFydGljaXBhbnREcmFnRHJvcC5iaW5kKGh0bWxbMF0pXG5cbiAgICBpZiAodGhpcy5pdGVtLnN0YXJ0ZWQpIHtcbiAgICAgIGh0bWxcbiAgICAgICAgLmZpbmQoJy5jaGFzZS1sb2NhdGlvbiAuY2hhc2UtcGFydGljaXBhbnQnKVxuICAgICAgICAuY2xpY2sodGhpcy5fb25DaGFzZVBhcnRpY2lwYW50Q2xpY2suYmluZCh0aGlzKSlcblxuICAgICAgY29uc3QgY2hhc2VQYXJ0aWNpcGFudERyYWdwRHJvcCA9IG5ldyBEcmFnRHJvcCh7XG4gICAgICAgIGRyYWdTZWxlY3RvcjogJy5jaGFzZS1wYXJ0aWNpcGFudCcsXG4gICAgICAgIGRyb3BTZWxlY3RvcjogJy5jaGFzZS1sb2NhdGlvbicsXG4gICAgICAgIHBlcm1pc3Npb25zOiB7XG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0LmJpbmQodGhpcyksXG4gICAgICAgICAgZHJvcDogdGhpcy5fY2FuQ2hhc2VQYXJ0aWNpcGFudERyYWdEcm9wLmJpbmQodGhpcylcbiAgICAgICAgfSxcbiAgICAgICAgY2FsbGJhY2tzOiB7XG4gICAgICAgICAgZHJhZ3N0YXJ0OiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQuYmluZCh0aGlzKSxcbiAgICAgICAgICBkcm9wOiB0aGlzLl9vbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcC5iaW5kKHRoaXMpLFxuICAgICAgICAgIGRyYWdvdmVyOiB0aGlzLl9vbkRyYWdFbnRlci5iaW5kKHRoaXMpXG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICBjaGFzZVBhcnRpY2lwYW50RHJhZ3BEcm9wLmJpbmQoaHRtbFswXSlcblxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICAgICAgLm9uKCdkcmFnbGVhdmUnLCBldmVudCA9PiB0aGlzLl9vbkRyYWdMZWF2ZShldmVudCkpXG4gICAgfVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cbiAgLyogIEZvcm0gU3VibWlzc2lvbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKiogQG92ZXJyaWRlICovXG4gIF9nZXRTdWJtaXREYXRhICh1cGRhdGVEYXRhID0ge30pIHtcbiAgICAvLyBDcmVhdGUgdGhlIGV4cGFuZGVkIHVwZGF0ZSBkYXRhIG9iamVjdFxuICAgIGNvbnN0IGZkID0gbmV3IEZvcm1EYXRhRXh0ZW5kZWQodGhpcy5mb3JtLCB7IGVkaXRvcnM6IHRoaXMuZWRpdG9ycyB9KVxuICAgIGxldCBkYXRhID0gZmQub2JqZWN0XG4gICAgaWYgKHVwZGF0ZURhdGEpIHtcbiAgICAgIGRhdGEgPSBtZXJnZU9iamVjdChkYXRhLCB1cGRhdGVEYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBkYXRhID0gZXhwYW5kT2JqZWN0KGRhdGEpXG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgdGhhdCBzdGFydGluZyBwb3NpdGlvbiBpcyBub3Qgb3V0c2lkZSBvZiBjaGFzZSByYW5nZS5cbiAgICBpZiAoXG4gICAgICB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucz8ubGlzdD8ubGVuZ3RoICYmXG4gICAgICBkYXRhLnN5c3RlbS5zdGFydGluZ0luZGV4ID4gdGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdC5sZW5ndGhcbiAgICApIHtcbiAgICAgIGRhdGEuc3lzdGVtLnN0YXJ0aW5nSW5kZXggPSB0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0Lmxlbmd0aFxuICAgIH1cblxuICAgIGlmIChkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMpIHtcbiAgICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIC8vIEhhbmRsZSBwYXJ0aWNpcGFudHMgYXJyYXlcbiAgICAgIGZvciAoY29uc3QgW2ssIHZdIG9mIE9iamVjdC5lbnRyaWVzKGRhdGEuc3lzdGVtLnBhcnRpY2lwYW50cykpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSBwYXJ0aWNpcGFudHMuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSBrKVxuICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB1aS5ub3RpZmljYXRpb25zLmVycm9yKCdQYXJ0aWNpcGFudCB0YWJsZSBjb3JydXB0ZWQnKVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBjb25zdCBvcmlnaW5hbCA9IHBhcnRpY2lwYW50c1tpbmRleF1cbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW4odilcbiAgICAgICAgICBtZXJnZU9iamVjdChvcmlnaW5hbCwgY2xlYW5lZClcbiAgICAgICAgICBwYXJ0aWNpcGFudHNbaW5kZXhdID0gb3JpZ2luYWxcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMgPSBwYXJ0aWNpcGFudHNcbiAgICB9XG5cbiAgICBpZiAoZGF0YS5sb2NhdGlvbnMpIHtcbiAgICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgICAgLy8gSGFuZGxlIGxvY2F0aW9ucyBsaXN0XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmxvY2F0aW9ucykpIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLnV1aWQgPT09IGtleSlcbiAgICAgICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignTG9jYXRpb25zIHRhYmxlIGNvcnJ1cHRlZCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxMb2NhdGlvbiA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XVxuICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbih2YWx1ZSlcbiAgICAgICAgICBtZXJnZU9iamVjdChvcmlnaW5hbExvY2F0aW9uLCBjbGVhbmVkKVxuICAgICAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSA9IG9yaWdpbmFsTG9jYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBkZWxldGUgZGF0YS5sb2NhdGlvbnNcbiAgICAgIGRhdGEuc3lzdGVtLmxvY2F0aW9ucyA9IHsgbGlzdDogbG9jYXRpb25zIH1cbiAgICB9XG4gICAgLy8gY29uc3QgcGFydGljaXBhbnRzID0gZGF0YS5zeXN0ZW0/LnBhcnRpY2lwYW50cztcbiAgICAvLyBpZiggcGFydGljaXBhbnRzKSBkYXRhLnN5c3RlbS5wYXJ0aWNpcGFudHMgPSBPYmplY3QudmFsdWVzKCBwYXJ0aWNpcGFudHMpLm1hcCggcCA9PiBjbGVhbihwKSk7XG5cbiAgICAvLyBSZXR1cm4gdGhlIGZsYXR0ZW5lZCBzdWJtaXNzaW9uIGRhdGFcbiAgICByZXR1cm4gZmxhdHRlbk9iamVjdChkYXRhKVxuICB9XG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICAvLyBhc3luYyBfb25TdWJtaXQoLi4uYXJncykge1xuICAvLyAgYXdhaXQgc3VwZXIuX29uU3VibWl0KC4uLmFyZ3MpO1xuICAvLyB9XG5cbiAgYXN5bmMgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IG92ZXJyaWRlID0gdGFyZ2V0Py5kYXRhc2V0Py5vdmVycmlkZSA9PT0gJ3RydWUnXG4gICAgaWYgKHRhcmdldD8ubmFtZT8uaW5jbHVkZXMoJy5ocCcpKSB7XG4gICAgICBjb25zdCBbLCAsIHV1aWRdID0gdGFyZ2V0Lm5hbWUuc3BsaXQoJy4nKVxuICAgICAgY29uc3QgcGFydGljaXBhbnQgPSB0aGlzLml0ZW0uZ2V0UGFydGljaXBhbnQodXVpZClcbiAgICAgIGlmIChwYXJ0aWNpcGFudCAmJiBwYXJ0aWNpcGFudC5hY3Rvcikge1xuICAgICAgICBpZiAoIWlzTmFOKE51bWJlcih0YXJnZXQudmFsdWUpKSkge1xuICAgICAgICAgIGF3YWl0IHBhcnRpY2lwYW50LmFjdG9yLnNldEhwKE51bWJlcih0YXJnZXQudmFsdWUpKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvdmVycmlkZSkge1xuICAgICAgY29uc3QgWywgdHlwZSwgdXVpZCwgc3ViVHlwZSwgZGF0YV0gPSB0YXJnZXQubmFtZS5zcGxpdCgnLicpXG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZSA9PT0gJ3BhcnRpY2lwYW50cycgJiZcbiAgICAgICAgIWlzTmFOKGluZGV4KSAmJlxuICAgICAgICBzdWJUeXBlID09PSAnc3BlZWQtY2hlY2snXG4gICAgICApIHtcbiAgICAgICAgaWYgKGRhdGEgPT09ICduYW1lJykge1xuICAgICAgICAgIC8vIENoYW5naW5nIG5hbWUgd2lsbCByZW1vdmUgYWxsIG90aGVyIHJlZiAhXG4gICAgICAgICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgICAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgICAgICAgOiBbXVxuICAgICAgICAgIGlmIChwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2spIHtcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2suaWRcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sudHlwZVxuICAgICAgICAgIH0gZWxzZSBwYXJ0aWNpcGFudHNbaW5kZXhdLnNwZWVkQ2hlY2sgPSB7fVxuICAgICAgICAgIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5uYW1lID0gdGFyZ2V0LnZhbHVlXG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0ucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cblxuICBzdGF0aWMgYXN5bmMgc2V0U2Nyb2xsIChhcHAsIGh0bWwsIGRhdGEpIHtcbiAgICBpZiAoIWRhdGEuZWRpdGFibGUpIHtcbiAgICAgIHJldHVyblxuICAgIH1cbiAgICBjb25zdCBpbml0aWFsT3BlbmluZyA9IGh0bWxbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCd3aW5kb3ctYXBwJylcbiAgICBjb25zdCBjaGFzZVRyYWNrID0gaHRtbFswXS5xdWVyeVNlbGVjdG9yKCcuY2hhc2UtdHJhY2snKVxuICAgIGlmICghY2hhc2VUcmFjaykgcmV0dXJuXG5cbiAgICBsZXQgc3RhcnQgPSBkYXRhLmRhdGEuc2Nyb2xsPy5jaGFzZVRyYWNrLmZyb21cbiAgICBsZXQgZW5kID0gZGF0YS5kYXRhLnNjcm9sbD8uY2hhc2VUcmFjay50b1xuICAgIGlmICh0eXBlb2Ygc3RhcnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBzdGFydCA9IDBcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlbmQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBlbmQgPSAtMVxuICAgIH1cblxuICAgIGlmIChpbml0aWFsT3BlbmluZykge1xuICAgICAgY29uc3QgcmVtU3RyaW5nID0gJCgnOnJvb3QnKS5jc3MoJ2ZvbnQtc2l6ZScpXG4gICAgICBjb25zdCByZW1TaXplID0gTnVtYmVyKHJlbVN0cmluZy5yZXBsYWNlKCdweCcsICcnKSlcbiAgICAgIGlmIChhcHAuaXRlbS5zdGFydGVkKSB7XG4gICAgICAgIGNvbnN0IHBDb3VudCA9IGFwcC5pdGVtLmFjdHVhbFBhcnRpY2lwYW50cz8ubGVuZ3RoXG4gICAgICAgIGNvbnN0IHdpZHRoID0gKHBDb3VudCAqIDExLjIgKyAzKSAqIHJlbVNpemVcbiAgICAgICAgYXBwLmFjdGl2YXRlVGFiKCdzZXR1cCcpXG4gICAgICAgIC8vIGFwcC5fdGFic1swXS5hY3RpdmUgPSAnc2V0dXAnXG4gICAgICAgIGFwcC5wb3NpdGlvbi53aWR0aCA9IE1hdGgubWF4KHdpZHRoLCA0MCAqIHJlbVNpemUpXG4gICAgICAgIC8vIGh0bWwuY3NzKCd3aWR0aCcsIGAke3dpZHRofXB4YClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFwcC5wb3NpdGlvbi53aWR0aCA9IDQ1ICogcmVtU2l6ZVxuICAgICAgfVxuICAgICAgcmV0dXJuIGF3YWl0IGFwcC5pdGVtLmFjdGl2YXRlTmV4dFBhcnRpY2lwYW50VHVybih7IGh0bWwgfSkgLy8gaHRtbCBpcyBub3QgcmVuZGVyZWQsIGVsZW1lbnQgaGF2ZSBzaXplID0gMFxuICAgICAgLy8gaWYgKGVuZCA+IDApIHtcbiAgICAgIC8vICAgc3RhcnQgPSAwXG4gICAgICAvLyB9IGVsc2UgaWYgKHN0YXJ0ID4gMCkge1xuICAgICAgLy8gICBlbmQgPSBzdGFydFxuICAgICAgLy8gICBzdGFydCA9IDBcbiAgICAgIC8vIH1cbiAgICB9XG5cbiAgICBpZiAoc3RhcnQgJiYgc3RhcnQgIT09IC0xKSB7XG4gICAgICBjaGFzZVRyYWNrLnNjcm9sbFRvKHtcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICBsZWZ0OiBzdGFydCxcbiAgICAgICAgYmVoYXZpb3I6ICdpbnN0YW50J1xuICAgICAgfSlcbiAgICB9XG5cbiAgICBpZiAoZW5kICE9PSAtMSkge1xuICAgICAgY2hhc2VUcmFjay5zY3JvbGxUbyh7XG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgbGVmdDogZW5kLFxuICAgICAgICBiZWhhdmlvcjogJ3Ntb290aCdcbiAgICAgIH0pXG4gICAgfVxuXG4gICAgLy8gYXdhaXQgYXBwLml0ZW0udXBkYXRlKHsgJ2RhdGEudHJhY2tTY3JvbGxQb3NpdGlvbic6IGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgfSlcbiAgfVxuXG4gIHN0YXRpYyBvbkNsb3NlIChhcHAsIGh0bWwpIHtcbiAgICBhcHAuaXRlbS51cGRhdGUoeyAnc3lzdGVtLnRyYWNrU2Nyb2xsUG9zaXRpb24nOiAtMSB9KVxuICB9XG5cbiAgLy8gYXN5bmMgX29uU2hlZXRSZWFkeSAoaHRtbCkge1xuICAvLyAgIGNvbnN0IHRyYWNrID0gaHRtbC5maW5kKCcuY2hhc2UtdHJhY2snKVxuICAvLyAgIGNvbnN0IGVsZW1lbnQgPSAkKHRyYWNrKS5maW5kKCcuYWN0aXZlJylcblxuICAvLyAgIGNvbnN0IGVsZW1lbnRsZWZ0ID0gZWxlbWVudFswXS5vZmZzZXRMZWZ0XG4gIC8vICAgY29uc3QgZGl2V2lkdGggPSB0cmFja1swXS5jbGllbnRXaWR0aFxuICAvLyAgIGxldCBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0ID0gZWxlbWVudGxlZnQgLSBkaXZXaWR0aCAvIDJcbiAgLy8gICBpZiAoZWxlbWVudENlbnRlclJlbGF0aXZlTGVmdCA8IDApIGVsZW1lbnRDZW50ZXJSZWxhdGl2ZUxlZnQgPSAwXG5cbiAgLy8gICBjb25zdCBzY3JvbGxQb3NpdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW0udHJhY2tTY3JvbGxQb3NpdGlvblxuICAvLyAgIGlmICghdHJhY2subGVuZ3RoKSByZXR1cm5cbiAgLy8gICBpZiAoIXNjcm9sbFBvc2l0aW9uKSByZXR1cm5cbiAgLy8gICBjb25zdCB0cmFja0VsZW1lbnQgPSB0cmFja1swXVxuICAvLyAgIHRyYWNrRWxlbWVudC5zY3JvbGxUbyh7XG4gIC8vICAgICB0b3A6IDAsXG4gIC8vICAgICBsZWZ0OiBlbGVtZW50Q2VudGVyUmVsYXRpdmVMZWZ0LFxuICAvLyAgICAgYmVoYXZpb3I6ICdpbnN0YW50J1xuICAvLyAgIH0pXG5cbiAgLy8gICAvL1RPRE8gOiBjb3VsZGQgdXNlIHBhcmVudC5vZmZzZXRUb3AgZXQgY2hpbGQub2Zmc2V0VG9wIHRvIGNlbnRlciB0aGUgYWN0aXZlIGVsZW1lbnRcblxuICAvLyAgIC8vIGNvbnN0IGFjdGl2ZSA9IGh0bWwuZmluZCgnLm5hbWUtY29udGFpbmVyLmFjdGl2ZScpXG4gIC8vICAgLy8gaWYoIGFjdGl2ZSl7XG4gIC8vICAgLy8gICBjb25zdCBlbGVtZW50ID0gYWN0aXZlWzBdXG4gIC8vICAgLy8gICBlbGVtZW50LnNjcm9sbEludG9WaWV3KHtiZWhhdmlvcjogXCJzbW9vdGhcIiwgYmxvY2s6IFwiZW5kXCIsIGlubGluZTogXCJjZW50ZXJcIn0pXG4gIC8vICAgLy8gZWxlbWVudC5zY3JvbGxJbnRvVmlldyhmYWxzZSlcbiAgLy8gICAvLyB9XG4gIC8vICAgLy8gfSlcbiAgLy8gfVxuXG4gIGZpbmRQYXJ0aWNpcGFudEluZGV4ICh1dWlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzLmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGZpbmRMb2NhdGlvbkluZGV4ICh1dWlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QuZmluZEluZGV4KHAgPT4gcC51dWlkID09PSB1dWlkKVxuICB9XG5cbiAgZmluZExvY2F0aW9uICh1dWlkKSB7XG4gICAgcmV0dXJuIHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QuZmluZChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGZpbmRJbmRleCAobGlzdCwgdXVpZCkge1xuICAgIHJldHVybiBsaXN0LmZpbmRJbmRleChwID0+IHAudXVpZCA9PT0gdXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKT8uY2xhc3NMaXN0LnRvZ2dsZSgnc2hvdycpXG4gICAgY29uc3QgYXNzaXN0YW50VXVpZCA9IHRhcmdldC5jbG9zZXN0KCcuaW5pdGlhdGl2ZS1ibG9jaycpPy5kYXRhc2V0Py51dWlkXG4gICAgY29uc3QgYmVuZWZpY2lhcnlVdWlkID0gdGFyZ2V0LmRhdGFzZXQuYmVuZWZpY2lhcnlVdWlkXG4gICAgYXdhaXQgdGhpcy5pdGVtLmFzc2lzdFBhcnRpY2lwYW50KGFzc2lzdGFudFV1aWQsIGJlbmVmaWNpYXJ5VXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vblRvZ2dsZSAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgLy8gY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5sb2NhdGlvbi5vYnN0YWNsZScpXG4gICAgLy8gY29uc3QgdXVpZCA9IGxvY2F0aW9uRWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICAvLyBjb25zdCBsb2NhdGlvbnMgPSBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5sb2NhdGlvbnMubGlzdClcbiAgICAvLyBjb25zdCBsb2NhdGlvbkluZGV4ID0gdGhpcy5maW5kSW5kZXgobG9jYXRpb25zLCB1dWlkKVxuICAgIGNvbnN0IHRvZ2dsZSA9IHRhcmdldC5nZXRBdHRyaWJ1dGUoJ3RvZ2dsZScpXG4gICAgY29uc3QgZGF0YSA9IGV4cGFuZE9iamVjdCh7XG4gICAgICBbdG9nZ2xlXTogIXRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3N3aXRjaGVkLW9uJylcbiAgICB9KVxuICAgIGlmIChkYXRhLmxvY2F0aW9ucykge1xuICAgICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkYXRhLmxvY2F0aW9ucykpIHtcbiAgICAgICAgY29uc3QgbG9jYXRpb25JbmRleCA9IGxvY2F0aW9ucy5maW5kSW5kZXgobCA9PiBsLnV1aWQgPT09IGtleSlcbiAgICAgICAgaWYgKGxvY2F0aW9uSW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignTG9jYXRpb25zIHRhYmxlIGNvcnJ1cHRlZCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgb3JpZ2luYWxMb2NhdGlvbiA9IGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XVxuICAgICAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbih2YWx1ZSlcbiAgICAgICAgICBtZXJnZU9iamVjdChvcmlnaW5hbExvY2F0aW9uLCBjbGVhbmVkKVxuICAgICAgICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XSA9IG9yaWdpbmFsTG9jYXRpb25cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAgIH1cbiAgfVxuXG4gIC8vIGFzeW5jIF9vbk9ic3RhY2xlVG9nZ2xlQ2xpY2sgKGV2ZW50KSB7XG4gIC8vICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAvLyAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcub2JzdGFjbGUnKVxuICAvLyAgIGNvbnN0IHV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gIC8vICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLmxpc3QpXG4gIC8vICAgY29uc3QgbG9jYXRpb25JbmRleCA9IHRoaXMuZmluZEluZGV4KGxvY2F0aW9ucywgdXVpZClcbiAgLy8gICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGUgPSAhbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlXG4gIC8vICAgaWYgKCFsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzKSB7XG4gIC8vICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzID0ge1xuICAvLyAgICAgICBiYXJyaWVyOiB0cnVlXG4gIC8vICAgICB9XG4gIC8vICAgfVxuICAvLyAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgLy8gfVxuXG4gIGFzeW5jIF9vbk9ic3RhY2xlVHlwZUNsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBsb2NhdGlvbkVsZW1lbnQgPSB0YXJnZXQuY2xvc2VzdCgnLm9ic3RhY2xlJylcbiAgICBjb25zdCB1dWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGNvbnN0IGxvY2F0aW9ucyA9IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy5saXN0KVxuICAgIGNvbnN0IGxvY2F0aW9uSW5kZXggPSB0aGlzLmZpbmRJbmRleChsb2NhdGlvbnMsIHV1aWQpXG4gICAgaWYgKCFsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzKSB7XG4gICAgICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzID0ge31cbiAgICB9XG4gICAgY29uc3Qgb2JzdGFjbGUgPSBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzXG4gICAgY29uc3QgdHlwZSA9IHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2JhcnJpZXInKSA/ICdiYXJyaWVyJyA6ICdoYXphcmQnXG4gICAgY29uc3QgYWN0aXZlID0gb2JzdGFjbGVbdHlwZV1cbiAgICBvYnN0YWNsZS5iYXJyaWVyID0gZmFsc2VcbiAgICBvYnN0YWNsZS5oYXphcmQgPSBmYWxzZVxuICAgIG9ic3RhY2xlW3R5cGVdID0gIWFjdGl2ZVxuICAgIGxvY2F0aW9uc1tsb2NhdGlvbkluZGV4XS5vYnN0YWNsZSA9ICFhY3RpdmVcbiAgICAvLyBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnYmFycmllcicpKSB7XG4gICAgLy8gICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXIgPSAhbG9jYXRpb25zW1xuICAgIC8vICAgICBsb2NhdGlvbkluZGV4XG4gICAgLy8gICBdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyXG4gICAgLy8gICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZCA9ICFsb2NhdGlvbnNbXG4gICAgLy8gICAgIGxvY2F0aW9uSW5kZXhcbiAgICAvLyAgIF0ub2JzdGFjbGVEZXRhaWxzLmJhcnJpZXJcbiAgICAvLyB9IGVsc2UgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2hhemFyZCcpKSB7XG4gICAgLy8gICBsb2NhdGlvbnNbbG9jYXRpb25JbmRleF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZCA9ICFsb2NhdGlvbnNbXG4gICAgLy8gICAgIGxvY2F0aW9uSW5kZXhcbiAgICAvLyAgIF0ub2JzdGFjbGVEZXRhaWxzLmhhemFyZFxuICAgIC8vICAgbG9jYXRpb25zW2xvY2F0aW9uSW5kZXhdLm9ic3RhY2xlRGV0YWlscy5iYXJyaWVyID0gIWxvY2F0aW9uc1tcbiAgICAvLyAgICAgbG9jYXRpb25JbmRleFxuICAgIC8vICAgXS5vYnN0YWNsZURldGFpbHMuaGF6YXJkXG4gICAgLy8gfVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KGxvY2F0aW9ucylcbiAgfVxuXG4gIGFzeW5jIF9vbkxvY2F0aW9uQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IHRhcmdldC5jbG9zZXN0KCcuY2hhc2UtbG9jYXRpb24nKVxuICAgIGNvbnN0IGxVdWlkID0gbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZFxuICAgIGF3YWl0IHRoaXMuaXRlbS5hY3RpdmF0ZUxvY2F0aW9uKGxVdWlkKVxuICB9XG5cbiAgYXN5bmMgX29uTG9jYXRpb25Db250cm9sQ2xpY2sgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaW5hY3RpdmUnKSkgcmV0dXJuXG4gICAgY29uc3QgYWN0aW9uID0gdGFyZ2V0LmRhdGFzZXQuYWN0aW9uXG4gICAgY29uc3QgbG9jYXRpb25FbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5jaGFzZS1sb2NhdGlvbicpXG4gICAgY29uc3QgbFV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ3JlbW92ZSc6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5yZW1vdmVMb2NhdGlvbihsVXVpZClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2FkZC1hZnRlcic6XG4gICAgICAgIGF3YWl0IHRoaXMuaXRlbS5pbnNlcnRMb2NhdGlvbihsVXVpZCwgeyBzaGlmdDogMSB9KVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdhZGQtYmVmb3JlJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLmluc2VydExvY2F0aW9uKGxVdWlkLCB7IHNoaWZ0OiAwIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGNhc2UgJ2FkZC1wYXJ0aWNpcGFudCc6XG4gICAgICAgIENvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIuY3JlYXRlKHtcbiAgICAgICAgICBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkLFxuICAgICAgICAgIGxvY2F0aW9uVXVpZDogbFV1aWQsXG4gICAgICAgICAgZHJvcERhdGE6IHt9XG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuICAgIC8vIHVpLm5vdGlmaWNhdGlvbnMuaW5mbyhgTG9jYXRpb24gJHtsVXVpZH0gQ2xpY2tlZC4gQWN0aW9uOiAke2FjdGlvbn1gKVxuICB9XG5cbiAgYXN5bmMgX29uQ2hhc2VQYXJ0aWNpcGFudENsaWNrIChldmVudCkge1xuICAgIGNvbnN0IHBVdWlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0Py51dWlkXG4gICAgYXdhaXQgdGhpcy5pdGVtLmFjdGl2YXRlUGFydGljaXBhbnQocFV1aWQpXG4gIH1cblxuICBhc3luYyBfb25QYXJ0aWNpcGFudENvbnRyb2xDbGlja2VkIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2luYWN0aXZlJykpIHJldHVyblxuICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdkcm9wZG93bicpKSByZXR1cm5cbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgcGFydGljaXBhbnRVdWlkID0gdGFyZ2V0LmNsb3Nlc3QoJy5pbml0aWF0aXZlLWJsb2NrJyk/LmRhdGFzZXQ/LnV1aWRcbiAgICBpZiAoIXBhcnRpY2lwYW50VXVpZCkgcmV0dXJuXG4gICAgc3dpdGNoICh0YXJnZXQuZGF0YXNldC5hY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2RyYXdHdW4nOlxuICAgICAgICBhd2FpdCB0aGlzLnRvZ2dsZVBhcnRpY2lwYW50R3VuKHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2RlY3JlYXNlQWN0aW9ucyc6XG4gICAgICAgIGF3YWl0IHRoaXMuX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zKC0xLCBldmVudClcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2luY3JlYXNlQWN0aW9ucyc6XG4gICAgICAgIGF3YWl0IHRoaXMuX29uQ2hhbmdlTW92ZW1lbnRBY3Rpb25zKDEsIGV2ZW50KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbW92ZUJhY2t3YXJkJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLm1vdmVQYXJ0aWNpcGFudChwYXJ0aWNpcGFudFV1aWQsIC0xLCB7IHJlbmRlcjogdHJ1ZSB9KVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnbW92ZUZvcndhcmQnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ubW92ZVBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZCwgMSwgeyByZW5kZXI6IHRydWUgfSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2FjdGl2YXRlUGFydGljaXBhbnQnOlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5pdGVtLmFjdGl2YXRlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgICAgY2FzZSAnYm9udXNEaWNlJzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IGRpY2VOdW1iZXIgPSB0YXJnZXQuZGF0YXNldC5jb3VudFxuICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVCb251c0RpY2UocGFydGljaXBhbnRVdWlkLCBkaWNlTnVtYmVyKVxuICAgICAgICAgIHRoaXMuaXRlbS5hY3RpdmF0ZU5leHRQYXJ0aWNpcGFudFR1cm4oKVxuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjYXV0aW91c0FwcHJvYWNoJzpcbiAgICAgICAgYXdhaXQgdGhpcy5pdGVtLmNhdXRpb3VzQXBwcm9hY2gocGFydGljaXBhbnRVdWlkKVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnZWRpdFBhcnRpY2lwYW50JzpcbiAgICAgICAge1xuICAgICAgICAgIGNvbnN0IHBhcnRpY2lwYW50ID0gdGhpcy5pdGVtLmdldFBhcnRpY2lwYW50KHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgICBjb25zdCBsb2NhdGlvbiA9IHRoaXMuaXRlbS5nZXRQYXJ0aWNpcGFudExvY2F0aW9uKHBhcnRpY2lwYW50VXVpZClcbiAgICAgICAgICBwYXJ0aWNpcGFudC5kYXRhLmNoYXNlVXVpZCA9IHRoaXMuaXRlbS51dWlkXG4gICAgICAgICAgcGFydGljaXBhbnQuZGF0YS5sb2NhdGlvblV1aWQgPSBsb2NhdGlvbi51dWlkXG4gICAgICAgICAgcGFydGljaXBhbnQuZGF0YS51cGRhdGUgPSB0cnVlXG4gICAgICAgICAgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlci5jcmVhdGUocGFydGljaXBhbnQuZGF0YSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAncmVtb3ZlUGFydGljaXBhbnQnOlxuICAgICAgICBhd2FpdCB0aGlzLml0ZW0ucmVtb3ZlUGFydGljaXBhbnQocGFydGljaXBhbnRVdWlkKVxuICAgICAgICBicmVha1xuICAgIH1cbiAgICB0aGlzLml0ZW0uYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuKClcbiAgfVxuXG4gIGFzeW5jIF9vbkNoYXNlQ29udHJvbENsaWNrZWQgKGV2ZW50KSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuXG4gICAgY29uc3QgbG9jYXRpb25VdWlkID0gdGFyZ2V0LmNsb3Nlc3QoJy5vYnN0YWNsZScpPy5kYXRhc2V0Py51dWlkXG4gICAgaWYgKCFsb2NhdGlvblV1aWQpIHJldHVyblxuICAgIHN3aXRjaCAodGFyZ2V0LmRhdGFzZXQuYWN0aW9uKSB7XG4gICAgICBjYXNlICdvYnN0YWNsZS1za2lsbC1jaGVjayc6XG4gICAgICAgIHJldHVybiB0aGlzLml0ZW0uYWN0aXZlUGFydGljaXBhbnRPYnN0YWNsZUNoZWNrKGxvY2F0aW9uVXVpZClcbiAgICB9XG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMgKGNvdW50LCBldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKVxuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudFV1aWQgPSB0YXJnZXQuY2xvc2VzdCgnLmluaXRpYXRpdmUtYmxvY2snKT8uZGF0YXNldD8udXVpZFxuICAgIGlmICghcGFydGljaXBhbnRVdWlkKSByZXR1cm5cbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0ucGFydGljaXBhbnRzXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHMuZmluZChwID0+IHBhcnRpY2lwYW50VXVpZCA9PT0gcC51dWlkKVxuICAgIGlmIChwYXJ0aWNpcGFudC5oYXNNYXhNdnRBY3Rpb25zICYmIGNvdW50ID4gMCkgcmV0dXJuXG4gICAgcGFydGljaXBhbnQuYWx0ZXJNb3ZlbWVudEFjdGlvbnMoY291bnQpXG5cbiAgICAvLyBjb25zdCBzaGVldCA9IHRhcmdldC5jbG9zZXN0KCcuY29jNy5pdGVtLmNoYXNlJylcbiAgICAvLyBjb25zdCBjaGFzZVRyYWNrID0gc2hlZXQucXVlcnlTZWxlY3RvcignLmNoYXNlLXRyYWNrJylcbiAgICAvLyBpZiAoY2hhc2VUcmFjaylcbiAgICAvLyAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoe1xuICAgIC8vICAgICAnZGF0YS50cmFja1Njcm9sbFBvc2l0aW9uJzogY2hhc2VUcmFjay5zY3JvbGxMZWZ0XG4gICAgLy8gICB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKVxuICB9XG5cbiAgYXN5bmMgX29uQnV0dG9uQ2xpY2sgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGFjdGlvbiA9IHRhcmdldC5kYXRhc2V0Py5hY3Rpb25cbiAgICBpZiAoIWFjdGlvbikgcmV0dXJuXG4gICAgc3dpdGNoIChhY3Rpb24pIHtcbiAgICAgIGNhc2UgJ2luaXQnOlxuICAgICAgICBpZiAoXG4gICAgICAgICAgIWlzTmFOKHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLnRvdGFsKSAmJlxuICAgICAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ubG9jYXRpb25zLnRvdGFsID4gMFxuICAgICAgICApIHtcbiAgICAgICAgICBjb25zdCBsb2NhdGlvbnMgPSBBcnJheS5hcHBseShcbiAgICAgICAgICAgIG51bGwsXG4gICAgICAgICAgICBBcnJheSh0aGlzLml0ZW0uc3lzdGVtLmxvY2F0aW9ucy50b3RhbClcbiAgICAgICAgICApLm1hcChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4geyB1dWlkOiBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KSB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICBsb2NhdGlvbnNbMF0ubmFtZSA9ICdTdGFydCdcbiAgICAgICAgICBpZiAobG9jYXRpb25zLmxlbmd0aCA+IDEpIGxvY2F0aW9uc1tsb2NhdGlvbnMubGVuZ3RoIC0gMV0ubmFtZSA9ICdFbmQnXG4gICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZUxvY2F0aW9uc0xpc3QobG9jYXRpb25zKVxuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3Jlc2V0JzpcbiAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybVJlc2V0Q2hhc2UnKX1gLFxuICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtUmVzZXRDaGFzZUhpbnQnKX08L3A+YCxcbiAgICAgICAgICB5ZXM6IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVMb2NhdGlvbnNMaXN0KFtdKVxuICAgICAgICAgICAgYXdhaXQgdGhpcy5pdGVtLnN0b3AoKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnY3V0MmNoYXNlJzpcbiAgICAgICAgaWYgKHRoaXMuaXRlbS5hbGxIYXZlU3BlZWRSb2xsKSB7XG4gICAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgICAgdGl0bGU6IGAke2dhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Db25maXJtQ3V0MkNoYXNlJyl9YCxcbiAgICAgICAgICAgIGNvbnRlbnQ6IGA8cD4ke2dhbWUuaTE4bi5sb2NhbGl6ZShcbiAgICAgICAgICAgICAgJ0NvQzcuQ29uZmlybUN1dDJDaGFzZUhpbnQnXG4gICAgICAgICAgICApfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB0aGlzLml0ZW0uY3V0VG9UaGVDaGFzZSgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3Lk5vdEFsbEhhdmVTcGVlZFJvbGwnKSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBjYXNlICdyZXN0YXJ0JzpcbiAgICAgICAgRGlhbG9nLmNvbmZpcm0oe1xuICAgICAgICAgIHRpdGxlOiBgJHtnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQ29uZmlybVJlc3RhcnRDaGFzZScpfWAsXG4gICAgICAgICAgY29udGVudDogYDxwPiR7Z2FtZS5pMThuLmxvY2FsaXplKFxuICAgICAgICAgICAgJ0NvQzcuQ29uZmlybVJlc3RhcnRDaGFzZUhpbnQnXG4gICAgICAgICAgKX08L3A+YCxcbiAgICAgICAgICB5ZXM6ICgpID0+IHRoaXMuaXRlbS5yZXN0YXJ0KClcbiAgICAgICAgfSlcbiAgICAgICAgYnJlYWtcblxuICAgICAgY2FzZSAnbmV4dFJvdW5kJzpcbiAgICAgICAgaWYgKHRoaXMuaXRlbS5uZXh0QWN0aXZlUGFydGljaXBhbnQpIHtcbiAgICAgICAgICBEaWFsb2cuY29uZmlybSh7XG4gICAgICAgICAgICB0aXRsZTogYCR7Z2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvbmZpcm1OZXh0Q2hhc2VSb3VuZCcpfWAsXG4gICAgICAgICAgICBjb250ZW50OiBgPHA+JHtnYW1lLmkxOG4ubG9jYWxpemUoXG4gICAgICAgICAgICAgICdDb0M3LkNvbmZpcm1OZXh0Q2hhc2VSb3VuZEhpbnQnXG4gICAgICAgICAgICApfTwvcD5gLFxuICAgICAgICAgICAgeWVzOiAoKSA9PiB0aGlzLml0ZW0ucHJvZ3Jlc3NUb05leHRSb3VuZCgpXG4gICAgICAgICAgfSlcbiAgICAgICAgfSBlbHNlIHRoaXMuaXRlbS5wcm9ncmVzc1RvTmV4dFJvdW5kKClcbiAgICAgICAgYnJlYWtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBfY2FuUGluTG9jYXRpb25EcmFnU3RhcnQgKHNlbGVjdG9yKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgYXN5bmMgX29uUGluTG9jYXRpb25EcmFnU3RhcnQgKGV2ZW50KSB7XG4gICAgY29uc3QgYSA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBpID0gYS5xdWVyeVNlbGVjdG9yKCdpLmljb24nKVxuICAgIGNvbnN0IGRyYWdJY29uID0gYS5xdWVyeVNlbGVjdG9yKCcucGluLWltYWdlJylcblxuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREcmFnSW1hZ2UoZHJhZ0ljb24sIDAsIGRyYWdJY29uLmhlaWdodClcblxuICAgIGNvbnN0IGxvY2F0aW9uRWxlbWVudCA9IGEuY2xvc2VzdCgnLmNoYXNlLWxvY2F0aW9uJylcbiAgICBjb25zdCBkYXRhID0ge31cblxuICAgIGRhdGEudHlwZSA9ICdsb2NhdG9yJ1xuICAgIGRhdGEuQ29DN1R5cGUgPSAnY2hhc2UnXG4gICAgZGF0YS5pY29uID0gaS5kYXRhc2V0LmxpbmtJY29uXG4gICAgZGF0YS5sb2NhdGlvblV1aWQgPSBsb2NhdGlvbkVsZW1lbnQuZGF0YXNldC51dWlkXG4gICAgZGF0YS5kb2NVdWlkID0gdGhpcy5pdGVtLnV1aWRcbiAgICBkYXRhLmNhbGxCYWNrID0gJ2xvY2F0b3JEcm9wcGVkJ1xuICAgIGV2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpXG5cbiAgICAvLyBjb25zdCBkcmFnRGF0YSA9IHsgdXVpZDogbG9jYXRpb25FbGVtZW50LmRhdGFzZXQudXVpZCwgY2hhc2VVdWlkOiB0aGlzLml0ZW0udXVpZCB9XG4gICAgLy8gZHJhZ0V2ZW50LmRhdGFUcmFuc2Zlci5zZXREYXRhKCd0ZXh0L3BsYWluJywgSlNPTi5zdHJpbmdpZnkoZHJhZ0RhdGEpKVxuICB9XG5cbiAgX2NhbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQgKHNlbGVjdG9yKSB7XG4gICAgaWYgKGdhbWUudXNlci5pc0dNKSByZXR1cm4gdHJ1ZVxuICAgIHJldHVybiBmYWxzZVxuICB9XG5cbiAgX2NhbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCAoc2VsZWN0b3IpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHJldHVybiB0cnVlXG4gICAgcmV0dXJuIGZhbHNlXG4gIH1cblxuICBhc3luYyBfb25DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0IChkcmFnRXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBkcmFnRXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGRyYWdEYXRhID0geyB1dWlkOiB0YXJnZXQuZGF0YXNldC51dWlkLCB0eXBlOiAncGFydGljaXBhbnQnIH1cbiAgICBkcmFnRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ3RleHQvcGxhaW4nLCBKU09OLnN0cmluZ2lmeShkcmFnRGF0YSkpXG4gIH1cblxuICBhc3luYyBfb25DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AgKGRyYWdFdmVudCkge1xuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBkcmFnRXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGRhdGFTdHJpbmcpXG5cbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLmluZm8oJ0Ryb3BwZWQnKVxuICAgIHRoaXMuX29uRHJhZ0xlYXZlKGRyYWdFdmVudClcblxuICAgIGNvbnN0IHRhcmdldCA9IGRyYWdFdmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgbG9jYXRpb25VdWlkID0gdGFyZ2V0LmRhdGFzZXQudXVpZFxuXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ3BhcnRpY2lwYW50Jykge1xuICAgICAgY29uc3Qgb2xkTG9jYXRpb24gPSB0aGlzLmZpbmRMb2NhdGlvbihsb2NhdGlvblV1aWQpXG4gICAgICBpZiAob2xkTG9jYXRpb24pIHtcbiAgICAgICAgaWYgKG9sZExvY2F0aW9uLnBhcnRpY2lwYW50cz8uaW5jbHVkZXMoZGF0YS51dWlkKSkgcmV0dXJuXG4gICAgICB9XG4gICAgICBhd2FpdCB0aGlzLml0ZW0uc2V0Y2hhc2VUcmFja1Njcm9sbCh7IHJlbmRlcjogZmFsc2UgfSlcbiAgICAgIGF3YWl0IHRoaXMuaXRlbS5tb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uKGRhdGEudXVpZCwgbG9jYXRpb25VdWlkKVxuICAgIH0gZWxzZSB7XG4gICAgICBDb0M3Q2hhc2VQYXJ0aWNpcGFudEltcG9ydGVyLmNyZWF0ZSh7XG4gICAgICAgIGNoYXNlVXVpZDogdGhpcy5pdGVtLnV1aWQsXG4gICAgICAgIGxvY2F0aW9uVXVpZCxcbiAgICAgICAgZHJvcERhdGE6IGRhdGFcbiAgICAgIH0pXG4gICAgfVxuICB9XG5cbiAgX29uRHJhZ092ZXIgKGRyYWdFdmVudCkge1xuICAgIHRoaXMuX29uRHJhZ0VudGVyKGRyYWdFdmVudClcbiAgfVxuXG4gIF9vbkRyYWdFbnRlciAoZHJhZ0V2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZHJhZ0V2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJhZy1vdmVyJylcbiAgfVxuXG4gIF9vbkRyYWdMZWF2ZSAoZHJhZ0V2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZHJhZ0V2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICB0YXJnZXQuY2xhc3NMaXN0Py5yZW1vdmUoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBhc3luYyBfb25Ecm9wUGFydGljaXBhbnQgKGV2ZW50KSB7XG4gICAgY29uc3QgdGFyZ2V0ID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IHV1aWQgPSB0YXJnZXQuZGF0YXNldD8udXVpZFxuICAgIGNvbnN0IGRhdGFTdHJpbmcgPSBldmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YSgndGV4dC9wbGFpbicpXG4gICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICBhd2FpdCB0aGlzLmFsdGVyUGFydGljaXBhbnQoZGF0YSwgdXVpZClcbiAgfVxuXG4gIGFzeW5jIF9vbkFkZFBhcnRpY2lwYW50IChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBkYXRhID0geyBjaGFzZVV1aWQ6IHRoaXMuaXRlbS51dWlkIH1cbiAgICBpZiAoZXZlbnQuZGF0YVRyYW5zZmVyKSB7XG4gICAgICBjb25zdCBkYXRhU3RyaW5nID0gZXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoJ3RleHQvcGxhaW4nKVxuICAgICAgZGF0YS5kcm9wRGF0YSA9IEpTT04ucGFyc2UoZGF0YVN0cmluZylcbiAgICB9XG4gICAgQ29DN0NoYXNlUGFydGljaXBhbnRJbXBvcnRlci5jcmVhdGUoZGF0YSlcbiAgfVxuXG4gIGFzeW5jIF9vblJvbGxQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnRFbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoJy5wYXJ0aWNpcGFudCcpXG4gICAgY29uc3QgdXVpZCA9IHBhcnRpY2lwYW50RWxlbWVudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IG5ldyBfcGFydGljaXBhbnQocGFydGljaXBhbnRzW2luZGV4XSlcbiAgICBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWZTZXQpIHtcbiAgICAgIGNvbnN0IHJvbGwgPSBuZXcgQ29DN0NoZWNrKClcbiAgICAgIHJvbGwucGFyZW50ID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbGVkID0gdHJ1ZVxuICAgICAgcGFydGljaXBhbnQuZGF0YS5yb2xsVXVpZCA9IHJvbGwudXVpZFxuICAgICAgcm9sbC5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICBpZiAoIWV2ZW50LnNoaWZ0S2V5ICYmIHBhcnRpY2lwYW50LmFjdG9yLnBsYXllcikge1xuICAgICAgICByb2xsLnN0YW5kYnkgPSB0cnVlXG4gICAgICAgIHJvbGwuc3RhbmRieVRleHQgPSAnQ29DNy5DaGFzZSdcbiAgICAgICAgcm9sbC5zdGFuZGJ5UmlnaHRJY29uID0gJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvcnVubmluZy1zb2xpZC5zdmcnXG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJ0aWNpcGFudC5zcGVlZENoZWNrLmlzQ2hhcmFjdGVyaXN0aWMpIHtcbiAgICAgICAgYXdhaXQgcm9sbC5yb2xsQ2hhcmFjdGVyaXN0aWMocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc1NraWxsKSB7XG4gICAgICAgIHJvbGwuc2tpbGwgPSBwYXJ0aWNpcGFudC5zcGVlZENoZWNrLnJlZlxuICAgICAgICBhd2FpdCByb2xsLnJvbGwoKVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH0gZWxzZSBpZiAocGFydGljaXBhbnQuc3BlZWRDaGVjay5pc0F0dHJpYnV0ZSkge1xuICAgICAgICBhd2FpdCByb2xsLnJvbGxBdHRyaWJ1dGUocGFydGljaXBhbnQuc3BlZWRDaGVjay5yZWYua2V5KVxuICAgICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICAgIHBhcnRpY2lwYW50LmRhdGEuc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZyA9IHJvbGwuSlNPTlJvbGxTdHJpbmdcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHBhcnRpY2lwYW50LnNwZWVkQ2hlY2suc2NvcmUpIHtcbiAgICAgIGNvbnN0IHJvbGxEYXRhID0ge1xuICAgICAgICByYXdWYWx1ZTogcGFydGljaXBhbnQuc3BlZWRDaGVjay5zY29yZSxcbiAgICAgICAgZGlzcGxheU5hbWU6IHBhcnRpY2lwYW50LnNwZWVkQ2hlY2submFtZSxcbiAgICAgICAgYWN0b3JOYW1lOiBwYXJ0aWNpcGFudC5uYW1lID8gcGFydGljaXBhbnQubmFtZSA6IHVuZGVmaW5lZFxuICAgICAgfVxuICAgICAgaWYgKHBhcnRpY2lwYW50Lmhhc0FjdG9yKSByb2xsRGF0YS5hY3RvciA9IHBhcnRpY2lwYW50LmFjdG9yLmFjdG9yS2V5XG4gICAgICBjb25zdCByb2xsID0gQ29DN0NoZWNrLmNyZWF0ZShyb2xsRGF0YSlcbiAgICAgIHJvbGwucGFyZW50ID0gdGhpcy5pdGVtLnV1aWRcbiAgICAgIGF3YWl0IHJvbGwucm9sbCgpXG4gICAgICBhd2FpdCByb2xsLnRvTWVzc2FnZSgpXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnNwZWVkQ2hlY2sucm9sbERhdGFTdHJpbmcgPSByb2xsLkpTT05Sb2xsU3RyaW5nXG4gICAgICBwYXJ0aWNpcGFudC5kYXRhLnJvbGxlZCA9IHRydWVcbiAgICAgIHBhcnRpY2lwYW50LmRhdGEucm9sbFV1aWQgPSByb2xsLnV1aWRcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBfb25EcmFnRW50ZXJQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBfb25EcmFnTGVhdmVQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ2RyYWctb3ZlcicpXG4gIH1cblxuICBhc3luYyBfb25DaGFuZ2VTaWRlIChldmVudCkge1xuICAgIC8vIGNvbnN0IHRlc3QgPSBhd2FpdCBmcm9tVXVpZCggJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4ubkNkb0N5b2l1ZHRqck5rdScpO1xuICAgIC8vIGNvbnN0IGl0ZW1UZXN0ID0gYXdhaXQgZnJvbVV1aWQoICdJdGVtLnBsSUVtTlJQNk83UHZlTnYucm9sbC5xMnNBenNIdDRGc3FzZGZEJyk7XG5cbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyID0gIXBhcnRpY2lwYW50c1tpbmRleF0uY2hhc2VyXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uRGVsZXRlRHJpdmVyIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBkcml2ZXIgPSB0YXJnZXQuY2xvc2VzdCgnLmRyaXZlcicpXG4gICAgY29uc3QgdXVpZCA9IGRyaXZlci5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSBwYXJ0aWNpcGFudHNbaW5kZXhdXG4gICAgZGVsZXRlIHBhcnRpY2lwYW50LmRvY1V1aWRcbiAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgJ2RhdGEucGFydGljaXBhbnRzJzogcGFydGljaXBhbnRzIH0pXG4gIH1cblxuICBhc3luYyBfb25EZWxldGVQYXJ0aWNpcGFudCAoZXZlbnQpIHtcbiAgICBjb25zdCB0YXJnZXQgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB0YXJnZXQuY2xvc2VzdCgnLnBhcnRpY2lwYW50JylcbiAgICBjb25zdCB1dWlkID0gcGFydGljaXBhbnQuZGF0YXNldC51dWlkXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmZpbmRQYXJ0aWNpcGFudEluZGV4KHV1aWQpXG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuICAgIHBhcnRpY2lwYW50cy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgX29uUmVzZXRSb2xsIChldmVudCkge1xuICAgIGNvbnN0IHRhcmdldCA9IGV2ZW50LmN1cnJlbnRUYXJnZXRcbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHRhcmdldC5jbG9zZXN0KCcucGFydGljaXBhbnQnKVxuICAgIGNvbnN0IHV1aWQgPSBwYXJ0aWNpcGFudC5kYXRhc2V0LnV1aWRcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBwYXJ0aWNpcGFudHMgPSB0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50c1xuICAgICAgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHMpXG4gICAgICA6IFtdXG4gICAgZGVsZXRlIHBhcnRpY2lwYW50c1tpbmRleF0uc3BlZWRDaGVjay5yb2xsRGF0YVN0cmluZ1xuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIGFsdGVyUGFydGljaXBhbnQgKGRhdGEsIHV1aWQpIHtcbiAgICBsZXQgZG9jVXVpZCwgYWN0b3JcbiAgICBpZiAoZGF0YS50b2tlblV1aWQpIGRvY1V1aWQgPSBkYXRhLnRva2VuVXVpZFxuICAgIGVsc2Uge1xuICAgICAgZG9jVXVpZCA9XG4gICAgICAgIGRhdGEuc2NlbmVJZCAmJiBkYXRhLnRva2VuSWRcbiAgICAgICAgICA/IGBTY2VuZS4ke2RhdGEuc2NlbmVJZH0uVG9rZW4uJHtkYXRhLnRva2VuSWR9YFxuICAgICAgICAgIDogZGF0YS5hY3RvcklkIHx8IGRhdGEuYWN0b3JLZXkgfHwgZGF0YS5pZFxuICAgIH1cblxuICAgIGlmIChkYXRhLnR5cGUgPT09ICdUb2tlbicpIHtcbiAgICAgIGRvY1V1aWQgPSBkYXRhLnV1aWRcbiAgICB9IGVsc2UgaWYgKGRvY1V1aWQpIHtcbiAgICAgIGFjdG9yID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoZG9jVXVpZClcbiAgICAgIGlmICghYWN0b3IgJiYgZGF0YS50eXBlID09PSAnSXRlbScpIGRvY1V1aWQgPSBudWxsXG4gICAgfVxuXG4gICAgaWYgKGFjdG9yICYmIGRvY1V1aWQgIT09IGFjdG9yLnV1aWQpIHtcbiAgICAgIGRvY1V1aWQgPSBhY3Rvci51dWlkXG4gICAgfVxuXG4gICAgY29uc3QgcGFydGljaXBhbnQgPSB7fVxuICAgIGlmIChkb2NVdWlkKSBwYXJ0aWNpcGFudC5kb2NVdWlkID0gZG9jVXVpZFxuXG4gICAgc3dpdGNoIChkYXRhLnR5cGU/LnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgJ2FjdG9yJzpcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2l0ZW0nOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLmRhdGE/Ll9pZCB8fCBkYXRhLmlkLFxuICAgICAgICAgIHR5cGU6ICdpdGVtJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdjaGFyYWN0ZXJpc3RpYyc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ2F0dHJpYnV0ZSc6XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6IGRhdGEubmFtZSxcbiAgICAgICAgICB0eXBlOiAnYXR0cmlidXRlJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGJyZWFrXG4gICAgfVxuXG4gICAgLy8gVE9ETzpDaGVjayBmb3Igc3BlZWQgY2hlY2ssIGlmIG5vbmUgYWRkIHNwZWVkY2hlY2tcbiAgICAvLyBzcGVlZENoZWNrID0ge1xuICAgIC8vICAgaWQ6ICdzdHInXG4gICAgLy8gICB0eXBlOiAnY2hhcmFjdGVyaXN0aWMnXG4gICAgLy8gfVxuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBpbmRleCA9IHRoaXMuZmluZFBhcnRpY2lwYW50SW5kZXgodXVpZClcbiAgICBjb25zdCBvbGRQYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50c1tpbmRleF1cbiAgICBpZiAob2xkUGFydGljaXBhbnQubW92KSBkZWxldGUgb2xkUGFydGljaXBhbnQubW92XG4gICAgbWVyZ2VPYmplY3Qob2xkUGFydGljaXBhbnQsIHBhcnRpY2lwYW50KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnZGF0YS5wYXJ0aWNpcGFudHMnOiBwYXJ0aWNpcGFudHMgfSlcbiAgfVxuXG4gIGFzeW5jIGNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcyAoKSB7XG4gICAgYXdhaXQgdGhpcy5pdGVtLmNsZWFyQWN0aXZlTG9jYXRpb25Db29yZGluYXRlcygpXG4gIH1cblxuICBhc3luYyBhZGRQYXJ0aWNpcGFudCAoZGF0YSkge1xuICAgIC8vIGxldCBwcm91dCA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JGcm9tS2V5KFxuICAgIC8vICAgJ1NjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uUXlGVGlpRVppWDl2VGZpQydcbiAgICAvLyApXG4gICAgLy8gcHJvdXQgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShcbiAgICAvLyAgICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLnViTHpoZTU3Sk9USE1JcjknXG4gICAgLy8gKVxuICAgIC8vIHByb3V0ID0gY2hhdEhlbHBlci5nZXRBY3RvckZyb21LZXkoJ0FjdG9yLnVpWTNjYXBTVWVMTHZTTGknKVxuICAgIC8vIHByb3V0ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoICdTY2VuZS53aDdTTHV2SU9wY1F5YjhTLlRva2VuLlF5RlRpaUVaaVg5dlRmaUMuSXRlbS5Hck9IZUxYZmVFcGhzUk1aJylcbiAgICAvLyBwcm91dCA9IENvQzdVdGlsaXRpZXMuZ2V0RG9jdW1lbnRGcm9tS2V5KCBcIlNjZW5lLndoN1NMdXZJT3BjUXliOFMuVG9rZW4uWXFzTlFQRGhGQ1BsU1JxSlwiKVxuICAgIC8vIHByb3V0ID0gQ29DN1V0aWxpdGllcy5nZXREb2N1bWVudEZyb21LZXkoIFwiU2NlbmUud2g3U0x1dklPcGNReWI4Uy5Ub2tlbi5ZcXNOUVBEaEZDUGxTUnFKLkl0ZW0uOEpFblRqSk9HRlhtbDR3a1wiKVxuXG4gICAgLy8gdHJ5IHRvIGZpbmQgYSB2YWxpZCBkb2N1bWVudFxuICAgIGxldCBkb2NVdWlkLCBhY3RvclxuICAgIGlmIChkYXRhLnRva2VuVXVpZCkgZG9jVXVpZCA9IGRhdGEudG9rZW5VdWlkXG4gICAgZWxzZSB7XG4gICAgICBkb2NVdWlkID1cbiAgICAgICAgZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZFxuICAgICAgICAgID8gYFNjZW5lLiR7ZGF0YS5zY2VuZUlkfS5Ub2tlbi4ke2RhdGEudG9rZW5JZH1gXG4gICAgICAgICAgOiBkYXRhLmFjdG9ySWQgfHwgZGF0YS5hY3RvcktleSB8fCBkYXRhLmlkXG4gICAgfVxuXG4gICAgaWYgKGRhdGEudHlwZSA9PT0gJ1Rva2VuJykge1xuICAgICAgZG9jVXVpZCA9IGRhdGEudXVpZFxuICAgIH0gZWxzZSBpZiAoZG9jVXVpZCkge1xuICAgICAgYWN0b3IgPSBjaGF0SGVscGVyLmdldEFjdG9yRnJvbUtleShkb2NVdWlkKVxuICAgICAgaWYgKCFhY3RvciAmJiBkYXRhLnR5cGUgPT09ICdJdGVtJykgZG9jVXVpZCA9IG51bGxcbiAgICB9XG5cbiAgICBpZiAoYWN0b3IgJiYgZG9jVXVpZCAhPT0gYWN0b3IudXVpZCkge1xuICAgICAgZG9jVXVpZCA9IGFjdG9yLnV1aWRcbiAgICB9XG5cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHt9XG4gICAgaWYgKGRvY1V1aWQpIHBhcnRpY2lwYW50LmRvY1V1aWQgPSBkb2NVdWlkXG5cbiAgICBzd2l0Y2ggKGRhdGEudHlwZT8udG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSAnYWN0b3InOlxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnaXRlbSc6XG4gICAgICAgIGlmIChkYXRhLmlkKSB7XG4gICAgICAgICAgY29uc3QgaXRlbSA9IGdhbWUuaXRlbXMuZ2V0KGRhdGEuaWQpXG4gICAgICAgICAgaWYgKGl0ZW0/LmRhdGE/LnR5cGUgIT09ICdza2lsbCcpIHJldHVyblxuICAgICAgICB9XG5cbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICBpZDogZGF0YS5kYXRhPy5faWQgfHwgZGF0YS5pZCxcbiAgICAgICAgICB0eXBlOiAnaXRlbSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgICAgY2FzZSAnY2hhcmFjdGVyaXN0aWMnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2NoYXJhY3RlcmlzdGljJ1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICBwYXJ0aWNpcGFudC5zcGVlZENoZWNrID0ge1xuICAgICAgICAgIGlkOiBkYXRhLm5hbWUsXG4gICAgICAgICAgdHlwZTogJ2F0dHJpYnV0ZSdcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVha1xuICAgIH1cblxuICAgIC8vIFRPRE86Q2hlY2sgZm9yIHNwZWVkIGNoZWNrLCBpZiBub25lIGFkZCBzcGVlZGNoZWNrIGNvbiBub24gdmVoaWNsZSwgZHJpdmUgYXV0byBmb3IgdmVoaWNsZVxuICAgIC8vIHNwZWVkQ2hlY2sgPSB7XG4gICAgLy8gICBpZDogJ2NvbidcbiAgICAvLyAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYydcbiAgICAvLyB9XG5cbiAgICBpZiAoIXBhcnRpY2lwYW50LnNwZWVkQ2hlY2spIHtcbiAgICAgIGlmICghdGhpcy5pdGVtLnN5c3RlbS52ZWhpY2xlKSB7XG4gICAgICAgIHBhcnRpY2lwYW50LnNwZWVkQ2hlY2sgPSB7XG4gICAgICAgICAgaWQ6ICdjb24nLFxuICAgICAgICAgIHR5cGU6ICdjaGFyYWN0ZXJpc3RpYycsXG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDSEFSQUMuQ29uc3RpdHV0aW9uJylcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFydGljaXBhbnQuc3BlZWRDaGVjayA9IHtcbiAgICAgICAgICB0eXBlOiAnaXRlbScsXG4gICAgICAgICAgbmFtZTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNvQ0lERmxhZy5rZXlzLmkuc2tpbGwuZHJpdmUtYXV0bycpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcGFydGljaXBhbnRzID0gdGhpcy5pdGVtLnN5c3RlbS5wYXJ0aWNpcGFudHNcbiAgICAgID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzKVxuICAgICAgOiBbXVxuXG4gICAgbGV0IHVuaXF1ZSA9IGZhbHNlXG4gICAgd2hpbGUgKCF1bmlxdWUpIHtcbiAgICAgIHBhcnRpY2lwYW50LnV1aWQgPSBmb3VuZHJ5LnV0aWxzLnJhbmRvbUlEKDE2KVxuICAgICAgdW5pcXVlID1cbiAgICAgICAgcGFydGljaXBhbnRzLmZpbHRlcihwID0+IHAudXVpZCA9PT0gcGFydGljaXBhbnQudXVpZCkubGVuZ3RoID09PSAwXG4gICAgfVxuXG4gICAgcGFydGljaXBhbnRzLnB1c2gocGFydGljaXBhbnQpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdkYXRhLnBhcnRpY2lwYW50cyc6IHBhcnRpY2lwYW50cyB9KVxuICB9XG5cbiAgYXN5bmMgdG9nZ2xlUGFydGljaXBhbnRHdW4gKHBhcnRpY2lwYW50VXVpZCkge1xuICAgIGNvbnN0IHBhcnRpY2lwYW50cyA9IHRoaXMuaXRlbS5zeXN0ZW0ucGFydGljaXBhbnRzXG4gICAgICA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLnBhcnRpY2lwYW50cylcbiAgICAgIDogW11cbiAgICBjb25zdCBwYXJ0aWNpcGFudCA9IHBhcnRpY2lwYW50cy5maW5kKHAgPT4gcGFydGljaXBhbnRVdWlkID09PSBwLnV1aWQpXG4gICAgaWYgKCFwYXJ0aWNpcGFudCkgcmV0dXJuXG4gICAgcGFydGljaXBhbnQuaGFzQUd1blJlYWR5ID0gIXBhcnRpY2lwYW50Lmhhc0FHdW5SZWFkeVxuICAgIGF3YWl0IHRoaXMuaXRlbS5zZXRjaGFzZVRyYWNrU2Nyb2xsKHsgcmVuZGVyOiBmYWxzZSB9KVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGVQYXJ0aWNpcGFudHMocGFydGljaXBhbnRzKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhbiAob2JqKSB7XG4gIGZvciAoY29uc3QgcHJvcE5hbWUgaW4gb2JqKSB7XG4gICAgY29uc3QgdHAgPSBnZXRUeXBlKG9ialtwcm9wTmFtZV0pXG4gICAgaWYgKHRwID09PSAnT2JqZWN0Jykge1xuICAgICAgb2JqW3Byb3BOYW1lXSA9IGNsZWFuKG9ialtwcm9wTmFtZV0pXG4gICAgfVxuXG4gICAgaWYgKHRwID09PSAnT2JqZWN0JyAmJiAhT2JqZWN0LmVudHJpZXMob2JqW3Byb3BOYW1lXSkubGVuZ3RoKSB7XG4gICAgICBvYmpbcHJvcE5hbWVdID0gbnVsbFxuICAgIH0gZWxzZSBpZiAodHAgPT09ICdzdHJpbmcnICYmICFvYmpbcHJvcE5hbWVdLmxlbmd0aCkge1xuICAgICAgb2JqW3Byb3BOYW1lXSA9IG51bGxcbiAgICB9IGVsc2UgaWYgKHRwID09PSAnc3RyaW5nJyAmJiAhaXNOYU4oTnVtYmVyKG9ialtwcm9wTmFtZV0pKSkge1xuICAgICAgb2JqW3Byb3BOYW1lXSA9IE51bWJlcihvYmpbcHJvcE5hbWVdKVxuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uLy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdJdGVtU2hlZXRWMiBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIC8qKlxuICAgKiBFeHRlbmQgYW5kIG92ZXJyaWRlIHRoZSBkZWZhdWx0IG9wdGlvbnMgdXNlZCBieSB0aGUgU2ltcGxlIEl0ZW0gU2hlZXRcbiAgICogQHJldHVybnMge09iamVjdH1cbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnaXRlbSddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL2l0ZW0tc2hlZXRWMi5odG1sJyxcbiAgICAgIHdpZHRoOiA1MDAsXG4gICAgICBoZWlnaHQ6IDQ1MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBfZ2V0SGVhZGVyQnV0dG9ucyAoKSB7XG4gICAgY29uc3QgaGVhZGVyQnV0dG9ucyA9IHN1cGVyLl9nZXRIZWFkZXJCdXR0b25zKClcbiAgICBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uKGhlYWRlckJ1dHRvbnMsIHRoaXMpXG4gICAgcmV0dXJuIGhlYWRlckJ1dHRvbnNcbiAgfVxuXG4gIC8qKlxuICAgKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YShvcHRpb25zKVxuXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPSBDb0M3QWN0aXZlRWZmZWN0LnByZXBhcmVBY3RpdmVFZmZlY3RDYXRlZ29yaWVzKHRoaXMuaXRlbS5lZmZlY3RzLCB7IHN0YXR1czogZmFsc2UgfSlcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG5cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVyblxuXG4gICAgaHRtbFxuICAgICAgLmZpbmQoJy5lZmZlY3QtY29udHJvbCcpXG4gICAgICAuY2xpY2soZXYgPT4gQ29DN0FjdGl2ZUVmZmVjdC5vbk1hbmFnZUFjdGl2ZUVmZmVjdChldiwgdGhpcy5pdGVtKSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIG1lcmdlT2JqZWN0ICovXG5cbmltcG9ydCB7IENvQzdJdGVtU2hlZXRWMiB9IGZyb20gJy4vaXRlbS1zaGVldFYyLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3SXRlbVNoZWV0IGV4dGVuZHMgQ29DN0l0ZW1TaGVldFYyIHtcbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICB3aWR0aDogNTI1LFxuICAgICAgaGVpZ2h0OiA1MDZcbiAgICB9KVxuICB9XG59XG4iLCIvKiBnbG9iYWwgSm91cm5hbFNoZWV0ICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN0pvdXJuYWxTaGVldCBleHRlbmRzIEpvdXJuYWxTaGVldCB7XG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG59XG4iLCIvKiBnbG9iYWwgTWFjcm9Db25maWcgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3TWFjcm9Db25maWcgZXh0ZW5kcyBNYWNyb0NvbmZpZyB7XG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG59XG4iLCIvKiBnbG9iYWwgUGxheWxpc3RDb25maWcgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3UGxheWxpc3RDb25maWcgZXh0ZW5kcyBQbGF5bGlzdENvbmZpZyB7XG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG59XG4iLCIvKiBnbG9iYWwgUm9sbFRhYmxlQ29uZmlnICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DN1JvbGxUYWJsZUNvbmZpZyBleHRlbmRzIFJvbGxUYWJsZUNvbmZpZyB7XG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG59XG4iLCIvKiBnbG9iYWwgU2NlbmVDb25maWcgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U2NlbmVDb25maWcgZXh0ZW5kcyBTY2VuZUNvbmZpZyB7XG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1V0aWxpdGllcyB9IGZyb20gJy4uLy4uL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IERyb3BDb0NJRCB9IGZyb20gJy4uLy4uL2FwcHMvZHJvcC1jb2MtaWQuanMnXG5pbXBvcnQgeyBpc0N0cmxLZXkgfSBmcm9tICcuLi8uLi9jaGF0L2hlbHBlci5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1NldHVwU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIGlmICghdGhpcy5vcHRpb25zLmVkaXRhYmxlKSByZXR1cm5cblxuICAgIGh0bWwuZmluZCgnLml0ZW0gLml0ZW0tbmFtZSBoNCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uSXRlbVN1bW1hcnkoZXZlbnQsICdpdGVtcycpKVxuICAgIGh0bWwuZmluZCgnLml0ZW0tZGVsZXRlJykuY2xpY2soZXZlbnQgPT4gdGhpcy5fb25JdGVtRGVsZXRlKGV2ZW50LCAnaXRlbXMnKSlcbiAgICBodG1sLmZpbmQoJy5hZGQtYmlvJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRCaW8oKSlcbiAgICBodG1sLmZpbmQoJy5yZW1vdmUtc2VjdGlvbicpLmNsaWNrKHRoaXMuX29uUmVtb3ZlU2VjdGlvbi5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnRvZ2dsZS1zd2l0Y2gnKS5jbGljayh0aGlzLl9vbkNsaWNrVG9nZ2xlLmJpbmQodGhpcykpXG4gICAgaHRtbC5maW5kKCcuYWRkLW1vbmV0YXJ5JykuY2xpY2sodGhpcy5fb25BZGRNb25ldGFyeS5iaW5kKHRoaXMpKVxuICAgIGh0bWwuZmluZCgnLnJlbW92ZS1tb25ldGFyeScpLmNsaWNrKHRoaXMuX29uUmVtb3ZlTW9uZXRhcnkuYmluZCh0aGlzKSlcbiAgfVxuXG4gIGFzeW5jIF9vbkNsaWNrVG9nZ2xlIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgcHJvcGVydHlJZCxcbiAgICAgIGlzQ3RybEtleShldmVudClcbiAgICApXG4gIH1cblxuICBhc3luYyBfb25Ecm9wIChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpXG5cbiAgICBjb25zdCBkYXRhTGlzdCA9IGF3YWl0IENvQzdVdGlsaXRpZXMuZ2V0RGF0YUZyb21Ecm9wRXZlbnQoZXZlbnQsICdJdGVtJylcblxuICAgIGxldCB1c2VDb0NJRCA9IDBcbiAgICBjb25zdCBjb2xsZWN0aW9uID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0gPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0pIDogW11cbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgZGF0YUxpc3QpIHtcbiAgICAgIGlmICghaXRlbSB8fCAhaXRlbS5zeXN0ZW0pIGNvbnRpbnVlXG4gICAgICBpZiAoIVsnaXRlbScsICd3ZWFwb24nLCAnc2tpbGwnLCAnYm9vaycsICdzcGVsbCddLmluY2x1ZGVzKGl0ZW0udHlwZSkpIHtcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgaWYgKCFDb0M3SXRlbS5pc0FueVNwZWMoaXRlbSkpIHtcbiAgICAgICAgaWYgKGNvbGxlY3Rpb24uZmluZChlbCA9PiBlbC5uYW1lID09PSBpdGVtLm5hbWUpKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodXNlQ29DSUQgPT09IDApIHtcbiAgICAgICAgdXNlQ29DSUQgPSBhd2FpdCBEcm9wQ29DSUQuY3JlYXRlKClcbiAgICAgIH1cbiAgICAgIGNvbGxlY3Rpb24ucHVzaChEcm9wQ29DSUQucHJvY2Vzc0l0ZW0odXNlQ29DSUQsIGl0ZW0pKVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyBbYHN5c3RlbS4ke2NvbGxlY3Rpb25OYW1lfWBdOiBjb2xsZWN0aW9uIH0pXG4gIH1cblxuICBhc3luYyBfb25SZW1vdmVTZWN0aW9uIChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZGl2ID0gYS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgYmlvID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0uYmlvU2VjdGlvbnMpXG4gICAgYmlvLnNwbGljZShOdW1iZXIoZGl2LmRhdGFzZXQuaW5kZXgpLCAxKVxuICAgIGF3YWl0IHRoaXMuaXRlbS51cGRhdGUoeyAnc3lzdGVtLmJpb1NlY3Rpb25zJzogYmlvIH0pXG4gIH1cblxuICBhc3luYyBfb25BZGRCaW8gKCkge1xuICAgIGNvbnN0IGJpbyA9IHRoaXMuaXRlbS5zeXN0ZW0uYmlvU2VjdGlvbnMgPyBkdXBsaWNhdGUodGhpcy5pdGVtLnN5c3RlbS5iaW9TZWN0aW9ucykgOiBbXVxuICAgIGJpby5wdXNoKG51bGwpXG4gICAgYXdhaXQgdGhpcy5pdGVtLnVwZGF0ZSh7ICdzeXN0ZW0uYmlvU2VjdGlvbnMnOiBiaW8gfSlcbiAgfVxuXG4gIF9vbkFkZE1vbmV0YXJ5ICgpIHtcbiAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLml0ZW0uc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyA/IGR1cGxpY2F0ZSh0aGlzLml0ZW0uc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcykgOiBbXVxuICAgIHZhbHVlcy5wdXNoKHtcbiAgICAgIG5hbWU6ICcnLFxuICAgICAgbWluOiBudWxsLFxuICAgICAgbWF4OiBudWxsLFxuICAgICAgY2FzaFR5cGU6IDAsXG4gICAgICBjYXNoVmFsdWU6ICcnLFxuICAgICAgYXNzZXRzVHlwZTogMCxcbiAgICAgIGFzc2V0c1ZhbHVlOiAnJyxcbiAgICAgIHNwZW5kaW5nVHlwZTogMCxcbiAgICAgIHNwZW5kaW5nVmFsdWU6ICcnXG4gICAgfSlcbiAgICB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnOiB2YWx1ZXMgfSlcbiAgfVxuXG4gIF9vblJlbW92ZU1vbmV0YXJ5IChldmVudCkge1xuICAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0XG4gICAgY29uc3QgZGl2ID0gYS5jbG9zZXN0KCcuaXRlbScpXG4gICAgY29uc3QgdmFsdWVzID0gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW0ubW9uZXRhcnkudmFsdWVzKVxuICAgIHZhbHVlcy5zcGxpY2UoTnVtYmVyKGRpdi5kYXRhc2V0LmluZGV4KSwgMSlcbiAgICB0aGlzLml0ZW0udXBkYXRlKHsgJ3N5c3RlbS5tb25ldGFyeS52YWx1ZXMnOiB2YWx1ZXMgfSlcbiAgfVxuXG4gIF9vbkl0ZW1TdW1tYXJ5IChldmVudCwgY29sbGVjdGlvbk5hbWUgPSAnaXRlbXMnKSB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKVxuICAgIGNvbnN0IGxpID0gJChldmVudC5jdXJyZW50VGFyZ2V0KS5wYXJlbnRzKCcuaXRlbScpXG4gICAgY29uc3QgaXRlbSA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdLmZpbmQocyA9PiB7XG4gICAgICByZXR1cm4gcy5faWQgPT09IGxpLmRhdGEoJ2l0ZW0taWQnKVxuICAgIH0pXG4gICAgaWYgKCFpdGVtKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgY29uc3QgY2hhdERhdGEgPSBpdGVtLnN5c3RlbS5kZXNjcmlwdGlvblxuXG4gICAgLy8gVG9nZ2xlIHN1bW1hcnlcbiAgICBpZiAobGkuaGFzQ2xhc3MoJ2V4cGFuZGVkJykpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBsaS5jaGlsZHJlbignLml0ZW0tc3VtbWFyeScpXG4gICAgICBzdW1tYXJ5LnNsaWRlVXAoMjAwLCAoKSA9PiBzdW1tYXJ5LnJlbW92ZSgpKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBkaXYgPSAkKGA8ZGl2IGNsYXNzPVwiaXRlbS1zdW1tYXJ5XCI+JHtjaGF0RGF0YS52YWx1ZX08L2Rpdj5gKVxuICAgICAgY29uc3QgcHJvcHMgPSAkKCc8ZGl2IGNsYXNzPVwiaXRlbS1wcm9wZXJ0aWVzXCI+PC9kaXY+JylcbiAgICAgIC8vIGZvciAoY29uc3QgcCBvZiBjaGF0RGF0YS5wcm9wZXJ0aWVzKSB7IHByb3BzLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJ0YWdcIj4ke3B9PC9zcGFuPmApIH1cbiAgICAgIGRpdi5hcHBlbmQocHJvcHMpXG4gICAgICBsaS5hcHBlbmQoZGl2LmhpZGUoKSlcbiAgICAgIGRpdi5zbGlkZURvd24oMjAwKVxuICAgIH1cbiAgICBsaS50b2dnbGVDbGFzcygnZXhwYW5kZWQnKVxuICB9XG5cbiAgYXN5bmMgX29uSXRlbURlbGV0ZSAoZXZlbnQsIGNvbGxlY3Rpb25OYW1lID0gJ2l0ZW1zJykge1xuICAgIGNvbnN0IGl0ZW0gPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpLmNsb3Nlc3QoJy5pdGVtJylcbiAgICBjb25zdCBpdGVtSWQgPSBpdGVtLmRhdGEoJ2l0ZW0taWQnKVxuICAgIGNvbnN0IENvQ0lkID0gaXRlbS5kYXRhKCdjb2NpZCcpXG4gICAgY29uc3QgaXRlbUluZGV4ID0gdGhpcy5pdGVtLnN5c3RlbVtjb2xsZWN0aW9uTmFtZV0uZmluZEluZGV4KGkgPT4gKGl0ZW1JZCAmJiBpLl9pZCA9PT0gaXRlbUlkKSB8fCAoQ29DSWQgJiYgaSA9PT0gQ29DSWQpKVxuICAgIGlmIChpdGVtSW5kZXggPiAtMSkge1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdID8gZHVwbGljYXRlKHRoaXMuaXRlbS5zeXN0ZW1bY29sbGVjdGlvbk5hbWVdKSA6IFtdXG4gICAgICBjb2xsZWN0aW9uLnNwbGljZShpdGVtSW5kZXgsIDEpXG4gICAgICBhd2FpdCB0aGlzLml0ZW0udXBkYXRlKHsgW2BzeXN0ZW0uJHtjb2xsZWN0aW9uTmFtZX1gXTogY29sbGVjdGlvbiB9KVxuICAgIH1cbiAgfVxuXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3NldHVwJ10sXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc2V0dXAuaHRtbCcsXG4gICAgICB3aWR0aDogNTY1LFxuICAgICAgaGVpZ2h0OiA1MzAsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLml0ZW0nIH1dLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgYXN5bmMgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuXG4gICAgY29uc3QgZXJhID0gT2JqZWN0LmVudHJpZXModGhpcy5pdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXMgPz8ge30pLmZpbHRlcihlID0+IGVbMV0pLm1hcChlID0+IGVbMF0pXG5cbiAgICBjb25zdCBpdGVtcyA9IGF3YWl0IGdhbWUuc3lzdGVtLmFwaS5jb2NpZC5leHBhbmRJdGVtQXJyYXkoeyBpdGVtTGlzdDogdGhpcy5pdGVtLnN5c3RlbS5pdGVtcywgZXJhOiAodHlwZW9mIGVyYVswXSAhPT0gJ3VuZGVmaW5lZCcgPyBlcmFbMF0gOiB0cnVlKSB9KVxuXG4gICAgc2hlZXREYXRhLnNraWxscyA9IGl0ZW1zLmZpbHRlcihpdCA9PiBpdC50eXBlID09PSAnc2tpbGwnKVxuICAgIHNoZWV0RGF0YS5vdGhlckl0ZW1zID0gaXRlbXMuZmlsdGVyKGl0ID0+IGl0LnR5cGUgIT09ICdza2lsbCcpXG5cbiAgICBzaGVldERhdGEuc2tpbGxMaXN0RW1wdHkgPSBzaGVldERhdGEuc2tpbGxzLmxlbmd0aCA9PT0gMFxuICAgIHNoZWV0RGF0YS5pdGVtc0xpc3RFbXB0eSA9IHNoZWV0RGF0YS5vdGhlckl0ZW1zLmxlbmd0aCA9PT0gMFxuXG4gICAgc2hlZXREYXRhLnNraWxscy5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSlcblxuICAgIHNoZWV0RGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6ICh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeUZvcm1hdHMgPSBbXVxuICAgIGZvciAoY29uc3Qga2V5IGluIENPQzcubW9uZXRhcnlGb3JtYXRzKSB7XG4gICAgICBzaGVldERhdGEuX21vbmV0YXJ5Rm9ybWF0cy5wdXNoKHsga2V5LCB2YWw6IGdhbWUuaTE4bi5sb2NhbGl6ZShDT0M3Lm1vbmV0YXJ5Rm9ybWF0c1trZXldKSB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5zaG93Q3VycmVuY3lTeW1ib2wgPSBbJ2RlY2ltYWxMZWZ0JywgJ2RlY2ltYWxSaWdodCcsICdpbnRlZ2VyTGVmdCcsICdpbnRlZ2VyUmlnaHQnXS5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KVxuXG4gICAgc2hlZXREYXRhLl9tb25ldGFyeVR5cGVzID0gW11cbiAgICBmb3IgKGNvbnN0IGtleSBpbiBDT0M3Lm1vbmV0YXJ5VHlwZXMpIHtcbiAgICAgIGlmIChDT0M3Lm1vbmV0YXJ5VHlwZXNba2V5XS5maWx0ZXIubGVuZ3RoID09PSAwIHx8IENPQzcubW9uZXRhcnlUeXBlc1trZXldLmZpbHRlci5pbmNsdWRlcyhzaGVldERhdGEuZGF0YS5zeXN0ZW0ubW9uZXRhcnkuZm9ybWF0KSkge1xuICAgICAgICBzaGVldERhdGEuX21vbmV0YXJ5VHlwZXMucHVzaCh7IGtleSwgdmFsOiBnYW1lLmkxOG4ubG9jYWxpemUoQ09DNy5tb25ldGFyeVR5cGVzW2tleV0ubmFtZSkgfSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEub25lQmxvY2tCYWNrU3RvcnkgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdvbmVCbG9ja0JhY2tzdG9yeScpXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uS2VlcGVyID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLmtlZXBlcixcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWRCYWNrc3RvcnkgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uYmFja3N0b3J5LFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgX3VwZGF0ZU9iamVjdCAoZXZlbnQsIGZvcm1EYXRhKSB7XG4gICAgY29uc3Qgc3lzdGVtID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKT8uc3lzdGVtXG4gICAgaWYgKHN5c3RlbS5iaW9TZWN0aW9ucykge1xuICAgICAgZm9ybURhdGFbJ3N5c3RlbS5iaW9TZWN0aW9ucyddID0gT2JqZWN0LnZhbHVlcyhcbiAgICAgICAgc3lzdGVtLmJpb1NlY3Rpb25zIHx8IFtdXG4gICAgICApXG4gICAgfVxuICAgIGlmIChzeXN0ZW0ubW9uZXRhcnkudmFsdWVzKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLm1vbmV0YXJ5LnZhbHVlcyddID0gT2JqZWN0LnZhbHVlcyhzeXN0ZW0ubW9uZXRhcnkudmFsdWVzIHx8IFtdKVxuICAgIH1cblxuICAgIGlmIChldmVudC5jdXJyZW50VGFyZ2V0Py5uYW1lID09PSAnc3lzdGVtLmNoYXJhY3RlcmlzdGljcy5wb2ludHMuZW5hYmxlZCcpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnJvbGxzLmVuYWJsZWQnXSA9ICFldmVudC5jdXJyZW50VGFyZ2V0LmNoZWNrZWRcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQuY3VycmVudFRhcmdldD8ubmFtZSA9PT0gJ3N5c3RlbS5jaGFyYWN0ZXJpc3RpY3Mucm9sbHMuZW5hYmxlZCcpIHtcbiAgICAgIGZvcm1EYXRhWydzeXN0ZW0uY2hhcmFjdGVyaXN0aWNzLnBvaW50cy5lbmFibGVkJ10gPSAhZXZlbnQuY3VycmVudFRhcmdldC5jaGVja2VkXG4gICAgfVxuXG4gICAgc3VwZXIuX3VwZGF0ZU9iamVjdChldmVudCwgZm9ybURhdGEpXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IENvQzdBY3RpdmVFZmZlY3QgZnJvbSAnLi4vLi4vYWN0aXZlLWVmZmVjdC5qcydcbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi8uLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuaW1wb3J0IHsgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5cbi8qKlxuICogRXh0ZW5kIHRoZSBiYXNpYyBJdGVtU2hlZXQgd2l0aCBzb21lIHZlcnkgc2ltcGxlIG1vZGlmaWNhdGlvbnNcbiAqL1xuZXhwb3J0IGNsYXNzIENvQzdTa2lsbFNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgY29uc3RydWN0b3IgKC4uLmFyZ3MpIHtcbiAgICBzdXBlciguLi5hcmdzKVxuICAgIHRoaXMuX3NoZWV0VGFiID0gJ2l0ZW1zJ1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dGVuZCBhbmQgb3ZlcnJpZGUgdGhlIGRlZmF1bHQgb3B0aW9ucyB1c2VkIGJ5IHRoZSBTaW1wbGUgSXRlbSBTaGVldFxuICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgKi9cbiAgc3RhdGljIGdldCBkZWZhdWx0T3B0aW9ucyAoKSB7XG4gICAgcmV0dXJuIG1lcmdlT2JqZWN0KHN1cGVyLmRlZmF1bHRPcHRpb25zLCB7XG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnc2hlZXQnLCAnaXRlbSddLFxuICAgICAgd2lkdGg6IDUyMCxcbiAgICAgIGhlaWdodDogNDgwLFxuICAgICAgc2Nyb2xsWTogWycudGFiLmRlc2NyaXB0aW9uJ10sXG4gICAgICB0YWJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYXZTZWxlY3RvcjogJy5zaGVldC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgICBjb250ZW50U2VsZWN0b3I6ICcuc2hlZXQtYm9keScsXG4gICAgICAgICAgaW5pdGlhbDogJ2Rlc2NyaXB0aW9uJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICByZXR1cm4gYHN5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvJHt0aGlzLml0ZW0udHlwZX0tc2hlZXQuaHRtbGBcbiAgfVxuXG4gIF9nZXRIZWFkZXJCdXR0b25zICgpIHtcbiAgICBjb25zdCBoZWFkZXJCdXR0b25zID0gc3VwZXIuX2dldEhlYWRlckJ1dHRvbnMoKVxuICAgIGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24oaGVhZGVyQnV0dG9ucywgdGhpcylcbiAgICByZXR1cm4gaGVhZGVyQnV0dG9uc1xuICB9XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgZGF0YSBmb3IgcmVuZGVyaW5nIHRoZSBJdGVtIHNoZWV0XG4gICAqIFRoZSBwcmVwYXJlZCBkYXRhIG9iamVjdCBjb250YWlucyBib3RoIHRoZSBhY3RvciBkYXRhIGFzIHdlbGwgYXMgYWRkaXRpb25hbCBzaGVldCBvcHRpb25zXG4gICAqL1xuICBnZXREYXRhICgpIHtcbiAgICAvLyB0aGlzLml0ZW0uY2hlY2tTa2lsbFByb3BlcnRpZXMoKTtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG4gICAgc2hlZXREYXRhLmhhZE5vbkNoYXJhY3Rlck93bmVyID0gc2hlZXREYXRhLmhhc093bmVyICYmIHRoaXMuYWN0b3I/LnR5cGUgIT09ICdjaGFyYWN0ZXInXG5cbiAgICBzaGVldERhdGEuZWZmZWN0cyA9IENvQzdBY3RpdmVFZmZlY3QucHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMoXG4gICAgICB0aGlzLml0ZW0uZWZmZWN0c1xuICAgIClcblxuICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5za2lsbFByb3BlcnRpZXMpKSB7XG4gICAgICBzaGVldERhdGEuX3Byb3BlcnRpZXMucHVzaCh7XG4gICAgICAgIGlkOiBrZXksXG4gICAgICAgIG5hbWU6IHZhbHVlLFxuICAgICAgICBpc0VuYWJsZWQ6IHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllc1trZXldID09PSB0cnVlXG4gICAgICB9KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5fZXJhcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKSkge1xuICAgICAgc2hlZXREYXRhLl9lcmFzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6ICh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLmlzU3BlY2lhbGl6ZWQgPSB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuc3BlY2lhbFxuICAgIHNoZWV0RGF0YS5jYW5Nb2RpZnlTcGVjID1cbiAgICAgICF0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuZmlyZWFybSAmJlxuICAgICAgIXRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5maWdodGluZ1xuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSBldmVudCBsaXN0ZW5lcnMgdXNpbmcgdGhlIHByZXBhcmVkIHNoZWV0IEhUTUxcbiAgICogQHBhcmFtIGh0bWwge0hUTUx9ICAgVGhlIHByZXBhcmVkIEhUTUwgb2JqZWN0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGludG8gdGhlIERPTVxuICAgKi9cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG5cbiAgICBodG1sLmZpbmQoJy50b2dnbGUtc3dpdGNoJykuY2xpY2sodGhpcy5fb25DbGlja1RvZ2dsZS5iaW5kKHRoaXMpKVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICBhc3luYyBfb25DbGlja1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgcHJvcGVydHlJZCxcbiAgICAgIGlzQ3RybEtleShldmVudClcbiAgICApXG4gIH1cblxuICAvLyBhc3luYyBfb25DbGlja0F0dHJpYnV0ZUNvbnRyb2woZXZlbnQpIHtcbiAgLy8gICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAvLyAgIGNvbnN0IGEgPSBldmVudC5jdXJyZW50VGFyZ2V0O1xuICAvLyAgIGNvbnN0IGFjdGlvbiA9IGEuZGF0YXNldC5hY3Rpb247XG4gIC8vICAgY29uc3QgYXR0cnMgPSB0aGlzLm9iamVjdC5kYXRhLmRhdGEuYXR0cmlidXRlcztcbiAgLy8gICBjb25zdCBmb3JtID0gdGhpcy5mb3JtO1xuXG4gIC8vICAgLy8gQWRkIG5ldyBhdHRyaWJ1dGVcbiAgLy8gICBpZiAoYWN0aW9uID09PSBcImNyZWF0ZVwiKSB7XG4gIC8vICAgICBjb25zdCBuayA9IE9iamVjdC5rZXlzKGF0dHJzKS5sZW5ndGggKyAxO1xuICAvLyAgICAgbGV0IG5ld0tleSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIC8vICAgICBuZXdLZXkuaW5uZXJIVE1MID0gYDxpbnB1dCB0eXBlPVwidGV4dFwiIG5hbWU9XCJkYXRhLmF0dHJpYnV0ZXMuYXR0ciR7bmt9LmtleVwiIHZhbHVlPVwiYXR0ciR7bmt9XCIvPmA7XG4gIC8vICAgICBuZXdLZXkgPSBuZXdLZXkuY2hpbGRyZW5bMF07XG4gIC8vICAgICBmb3JtLmFwcGVuZENoaWxkKG5ld0tleSk7XG4gIC8vICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCk7XG4gIC8vICAgfVxuXG4gIC8vICAgLy8gUmVtb3ZlIGV4aXN0aW5nIGF0dHJpYnV0ZVxuICAvLyAgIGVsc2UgaWYgKGFjdGlvbiA9PT0gXCJkZWxldGVcIikge1xuICAvLyAgICAgY29uc3QgbGkgPSBhLmNsb3Nlc3QoXCIuYXR0cmlidXRlXCIpO1xuICAvLyAgICAgbGkucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChsaSk7XG4gIC8vICAgICBhd2FpdCB0aGlzLl9vblN1Ym1pdChldmVudCk7XG4gIC8vICAgfVxuICAvLyB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogSW1wbGVtZW50IHRoZSBfdXBkYXRlT2JqZWN0IG1ldGhvZCBhcyByZXF1aXJlZCBieSB0aGUgcGFyZW50IGNsYXNzIHNwZWNcbiAgICogVGhpcyBkZWZpbmVzIGhvdyB0byB1cGRhdGUgdGhlIHN1YmplY3Qgb2YgdGhlIGZvcm0gd2hlbiB0aGUgZm9ybSBpcyBzdWJtaXR0ZWRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIC8vIF91cGRhdGVPYmplY3QoZXZlbnQsIGZvcm1EYXRhKSB7XG4gIC8vICAgLy8gSGFuZGxlIHRoZSBmcmVlLWZvcm0gYXR0cmlidXRlcyBsaXN0XG4gIC8vICAgY29uc3QgZm9yZCA9IGV4cGFuZE9iamVjdChmb3JtRGF0YSk7XG4gIC8vICAgY29uc3QgZm9ybUF0dHJzID0gZXhwYW5kT2JqZWN0KGZvcm1EYXRhKS5kYXRhLmF0dHJpYnV0ZXMgfHwge307XG4gIC8vICAgY29uc3QgYXR0cmlidXRlcyA9IE9iamVjdC52YWx1ZXMoZm9ybUF0dHJzKS5yZWR1Y2UoKG9iaiwgdikgPT4ge1xuICAvLyAgICAgbGV0IGsgPSB2W1wia2V5XCJdLnRyaW0oKTtcbiAgLy8gICAgIGlmICgvW1xcc1xcLl0vLnRlc3QoaykpIHJldHVybiB1aS5ub3RpZmljYXRpb25zLmVycm9yKFwiQXR0cmlidXRlIGtleXMgbWF5IG5vdCBjb250YWluIHNwYWNlcyBvciBwZXJpb2RzXCIpO1xuICAvLyAgICAgZGVsZXRlIHZbXCJrZXlcIl07XG4gIC8vICAgICBvYmpba10gPSB2O1xuICAvLyAgICAgcmV0dXJuIG9iajtcbiAgLy8gICB9LCB7fSk7XG5cbiAgLy8gICAvLyBSZW1vdmUgYXR0cmlidXRlcyB3aGljaCBhcmUgbm8gbG9uZ2VyIHVzZWRcbiAgLy8gICBmb3IgKGxldCBrIG9mIE9iamVjdC5rZXlzKHRoaXMub2JqZWN0LmRhdGEuZGF0YS5hdHRyaWJ1dGVzKSkge1xuICAvLyAgICAgaWYgKCFhdHRyaWJ1dGVzLmhhc093blByb3BlcnR5KGspKSBhdHRyaWJ1dGVzW2AtPSR7a31gXSA9IG51bGw7XG4gIC8vICAgfVxuXG4gIC8vICAgLy8gUmUtY29tYmluZSBmb3JtRGF0YVxuICAvLyAgIGZvcm1EYXRhID0gT2JqZWN0LmVudHJpZXMoZm9ybURhdGEpLmZpbHRlcihlID0+ICFlWzBdLnN0YXJ0c1dpdGgoXCJkYXRhLmF0dHJpYnV0ZXNcIikpLnJlZHVjZSgob2JqLCBlKSA9PiB7XG4gIC8vICAgICBvYmpbZVswXV0gPSBlWzFdO1xuICAvLyAgICAgcmV0dXJuIG9iajtcbiAgLy8gICB9LCB7IF9pZDogdGhpcy5vYmplY3QuX2lkLCBcImRhdGEuYXR0cmlidXRlc1wiOiBhdHRyaWJ1dGVzIH0pO1xuXG4gIC8vICAgLy8gVXBkYXRlIHRoZSBJdGVtXG4gIC8vICAgcmV0dXJuIHRoaXMub2JqZWN0LnVwZGF0ZShmb3JtRGF0YSk7XG4gIC8vIH1cblxuICBhc3luYyBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBza2lsbE5hbWUgPSBmb3JtRGF0YVsnc3lzdGVtLnNraWxsTmFtZSddIHx8IHRoaXMuaXRlbS5zeXN0ZW0uc2tpbGxOYW1lXG4gICAgaWYgKHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcz8uc3BlY2lhbCkge1xuICAgICAgY29uc3Qgc3BlY2lhbGl6YXRpb24gPSBmb3JtRGF0YVsnc3lzdGVtLnNwZWNpYWxpemF0aW9uJ10gfHwgdGhpcy5pdGVtLnN5c3RlbS5zcGVjaWFsaXphdGlvblxuICAgICAgZm9ybURhdGEubmFtZSA9IHNwZWNpYWxpemF0aW9uICsgJyAoJyArIHNraWxsTmFtZSArICcpJ1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3JtRGF0YS5uYW1lID0gc2tpbGxOYW1lXG4gICAgfVxuICAgIHJldHVybiBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsICQsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5cbmV4cG9ydCBjbGFzcyBDb0M3U3BlbGxTaGVldCBleHRlbmRzIEl0ZW1TaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3NwZWxsL21haW4uaHRtbCcsXG4gICAgICBjbGFzc2VzOiBbJ2NvYzcnLCAnaXRlbScsICdzcGVsbCddLFxuICAgICAgd2lkdGg6IDUwMCxcbiAgICAgIGhlaWdodDogJ2F1dG8nLFxuICAgICAgcmVzaXphYmxlOiBmYWxzZSxcbiAgICAgIHNjcm9sbFk6IFsnLmJvZHknXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLm5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICBjb25zdCBzaGVldERhdGEgPSBzdXBlci5nZXREYXRhKClcbiAgICBzaGVldERhdGEuaGFzT3duZXIgPSB0aGlzLml0ZW0uaXNFbWJlZGRlZCA9PT0gdHJ1ZVxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgc2hlZXREYXRhLmlzT3duZXIgPSB0aGlzLml0ZW0uaXNPd25lclxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi52YWx1ZSxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgYWN0aXZhdGVMaXN0ZW5lcnMgKGh0bWwpIHtcbiAgICBzdXBlci5hY3RpdmF0ZUxpc3RlbmVycyhodG1sKVxuICAgIGh0bWwuZmluZCgnLm9wdGlvbicpLmNsaWNrKGV2ZW50ID0+IHRoaXMubW9kaWZ5VHlwZShldmVudCkpXG4gICAgaHRtbC5maW5kKCcjY2FzdC1zcGVsbCcpLmNsaWNrKGV2ZW50ID0+IHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICAgIHRoaXMuaXRlbS5jYXN0KClcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFRvZ2dsZSB0aGUgY2hlY2tib3hlcyBmb3IgdHlwZSB3aGVuIHVzZXIgY2xpY2tzIG9uIHRoZSBjb3JyZXNwb25kaW5nXG4gICAqIGxhYmVsLCBub3Qgc3VyZSBpZiB0aGlzIHdvcmtzIG9uIGVuZ2luZXMgb3RoZXIgdGhhbiBWOFxuICAgKiBAcGFyYW0ge2pRdWVyeX0gZXZlbnQgQHNlZSBhY3RpdmF0ZUxpc3RlbmVyc1xuICAgKiBAcmV0dXJucyB7alF1ZXJ5LkV2ZW50fSBjbGlja1xuICAgKi9cbiAgbW9kaWZ5VHlwZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgLyoqIFByZXZlbnRzIHByb3BhZ2F0aW9uIG9mIHRoZSBzYW1lIGV2ZW50IGZyb20gYmVpbmcgY2FsbGVkICovXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKClcbiAgICBjb25zdCB0b2dnbGVTd2l0Y2ggPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpXG4gICAgcmV0dXJuIHRvZ2dsZVN3aXRjaC5wcmV2KCkudHJpZ2dlcignY2xpY2snKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSXRlbVNoZWV0LCBtZXJnZU9iamVjdCwgVGV4dEVkaXRvciAqL1xuaW1wb3J0IHsgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbiB9IGZyb20gJy4uLy4uL3NjcmlwdHMvY29jLWlkLWJ1dHRvbi5qcydcbmltcG9ydCBDb0M3QWN0aXZlRWZmZWN0IGZyb20gJy4uLy4uL2FjdGl2ZS1lZmZlY3QuanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3U3RhdHVzU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ3N0YXR1cyddLFxuICAgICAgdGVtcGxhdGU6ICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2l0ZW1zL3N0YXR1cy5odG1sJyxcbiAgICAgIHdpZHRoOiA1MjUsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHNjcm9sbFk6IFsnLnRhYi5kZXNjcmlwdGlvbiddLFxuICAgICAgdGFiczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmF2U2VsZWN0b3I6ICcuc2hlZXQtbmF2aWdhdGlvbicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG5cbiAgICBodG1sXG4gICAgICAuZmluZCgnLmVmZmVjdC1jb250cm9sJylcbiAgICAgIC5jbGljayhldiA9PiBDb0M3QWN0aXZlRWZmZWN0Lm9uTWFuYWdlQWN0aXZlRWZmZWN0KGV2LCB0aGlzLml0ZW0pKVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICAvKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG4gICAgc2hlZXREYXRhLmVmZmVjdHMgPSBDb0M3QWN0aXZlRWZmZWN0LnByZXBhcmVBY3RpdmVFZmZlY3RDYXRlZ29yaWVzKHRoaXMuaXRlbS5lZmZlY3RzLCB7IHN0YXR1czogZmFsc2UgfSlcblxuICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcyA9IFtdXG5cbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh0aGlzLml0ZW0uc3lzdGVtLnR5cGUpKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgc2hlZXREYXRhLml0ZW1Qcm9wZXJ0aWVzLnB1c2goXG4gICAgICAgICAgQ09DNy5zdGF0dXNUeXBlW2tleV0gPyBDT0M3LnN0YXR1c1R5cGVba2V5XSA6IG51bGxcbiAgICAgICAgKVxuICAgICAgfVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5ub3RlcyxcbiAgICAgIHtcbiAgICAgICAgYXN5bmM6IGZhbHNlLFxuICAgICAgICBzZWNyZXRzOiBzaGVldERhdGEuZWRpdGFibGVcbiAgICAgIH1cbiAgICApXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvbktlZXBlciA9IFRleHRFZGl0b3IuZW5yaWNoSFRNTChcbiAgICAgIHNoZWV0RGF0YS5kYXRhLnN5c3RlbS5kZXNjcmlwdGlvbi5rZWVwZXIsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmlzS2VlcGVyID0gZ2FtZS51c2VyLmlzR01cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBJdGVtU2hlZXQsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIH0gZnJvbSAnLi4vLi4vc2NyaXB0cy9jb2MtaWQtYnV0dG9uLmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4uLy4uL2NvbmZpZy5qcydcblxuLyoqXG4gKiBFeHRlbmQgdGhlIGJhc2ljIEl0ZW1TaGVldCB3aXRoIHNvbWUgdmVyeSBzaW1wbGUgbW9kaWZpY2F0aW9uc1xuICovXG5leHBvcnQgY2xhc3MgQ29DN1RhbGVudFNoZWV0IGV4dGVuZHMgSXRlbVNoZWV0IHtcbiAgLyoqXG4gICAqXG4gICAqL1xuICBzdGF0aWMgZ2V0IGRlZmF1bHRPcHRpb25zICgpIHtcbiAgICByZXR1cm4gbWVyZ2VPYmplY3Qoc3VwZXIuZGVmYXVsdE9wdGlvbnMsIHtcbiAgICAgIGNsYXNzZXM6IFsnY29jNycsICdzaGVldCcsICd0YWxlbnQnXSxcbiAgICAgIHRlbXBsYXRlOiAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy90YWxlbnQuaHRtbCcsXG4gICAgICB3aWR0aDogNTI1LFxuICAgICAgaGVpZ2h0OiA0ODAsXG4gICAgICBzY3JvbGxZOiBbJy50YWIuZGVzY3JpcHRpb24nXSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdmlnYXRpb24nLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnZGVzY3JpcHRpb24nXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KVxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICAvKiBQcmVwYXJlIGRhdGEgZm9yIHJlbmRlcmluZyB0aGUgSXRlbSBzaGVldFxuICAgKiBUaGUgcHJlcGFyZWQgZGF0YSBvYmplY3QgY29udGFpbnMgYm90aCB0aGUgYWN0b3IgZGF0YSBhcyB3ZWxsIGFzIGFkZGl0aW9uYWwgc2hlZXQgb3B0aW9uc1xuICAgKi9cbiAgZ2V0RGF0YSAoKSB7XG4gICAgY29uc3Qgc2hlZXREYXRhID0gc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEuaXRlbVByb3BlcnRpZXMgPSBbXVxuXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModGhpcy5pdGVtLnN5c3RlbS50eXBlKSkge1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKFxuICAgICAgICAgIENPQzcudGFsZW50VHlwZVtrZXldID8gQ09DNy50YWxlbnRUeXBlW2tleV0gOiBudWxsXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uTm90ZXMgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXMsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG59XG4iLCIvKiBnbG9iYWwgZHVwbGljYXRlLCBleHBhbmRPYmplY3QsIGdhbWUsIG1lcmdlT2JqZWN0LCBUZXh0RWRpdG9yICovXG5pbXBvcnQgeyBDb0M3QWN0b3JTaGVldCB9IGZyb20gJy4vYmFzZS5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdWZWhpY2xlU2hlZXQgZXh0ZW5kcyBDb0M3QWN0b3JTaGVldCB7XG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0VjInLCAnYWN0b3InLCAnaXRlbScsICd2ZWhpY2xlJ10sXG4gICAgICB3aWR0aDogNTU1LFxuICAgICAgaGVpZ2h0OiA0MjAsXG4gICAgICByZXNpemFibGU6IHRydWUsXG4gICAgICB0ZW1wbGF0ZTogJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3ZlaGljbGUuaHRtbCcsXG4gICAgICBkcmFnRHJvcDogW3sgZHJhZ1NlbGVjdG9yOiAnLmFjdG9yJywgZHJvcFNlbGVjdG9yOiAnLmRyb3Bab25lJyB9XSxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LW5hdicsXG4gICAgICAgICAgY29udGVudFNlbGVjdG9yOiAnLnNoZWV0LWJvZHknLFxuICAgICAgICAgIGluaXRpYWw6ICdkZXNjcmlwdGlvbidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pXG4gIH1cblxuICBhc3luYyBnZXREYXRhICgpIHtcbiAgICAvLyB1aS5ub3RpZmljYXRpb25zLndhcm4oXG4gICAgLy8gICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXhwZXJpbWVudGFsRmVhdHVyZXNXYXJuaW5nJylcbiAgICAvLyApXG4gICAgY29uc3Qgc2hlZXREYXRhID0gYXdhaXQgc3VwZXIuZ2V0RGF0YSgpXG5cbiAgICBzaGVldERhdGEucHJvcGVydGllcyA9IFtdXG4gICAgaWYgKHRoaXMuYWN0b3Iuc3lzdGVtLnByb3BlcnRpZXMuYXJtZWQpIHtcbiAgICAgIHNoZWV0RGF0YS5wcm9wZXJ0aWVzLnB1c2goZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFybWVkVmVoaWNsZScpKVxuICAgIH1cblxuICAgIGNvbnN0IGV4cGFuZGVkID0gdGhpcy5hY3Rvci5nZXRGbGFnKCdDb0M3JywgJ2V4cGFuZGVkJylcbiAgICBpZiAodHlwZW9mIGV4cGFuZGVkID09PSAndW5kZWZpbmVkJykgc2hlZXREYXRhLmV4cGFuZGVkID0gdHJ1ZVxuICAgIGVsc2Ugc2hlZXREYXRhLmV4cGFuZGVkID0gZXhwYW5kZWRcbiAgICBpZiAoc2hlZXREYXRhLmV4cGFuZGVkKSB7XG4gICAgICBzaGVldERhdGEub3B0aW9ucy5oZWlnaHQgPSA0MjBcbiAgICB9IGVsc2Ugc2hlZXREYXRhLm9wdGlvbnMuaGVpZ2h0ID0gJ2F1dG8nXG5cbiAgICBzaGVldERhdGEuZW5yaWNoZWREZXNjcmlwdGlvblZhbHVlID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uTm90ZXMgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ubm90ZXMsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgLy8gZm9yIChsZXQgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHNoZWV0RGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgLy8gICBpZiggdmFsdWUpIHNoZWV0RGF0YS5pdGVtUHJvcGVydGllcy5wdXNoKCBDT0M3LmJvb2tUeXBlW2tleV0/Q09DNy5ib29rVHlwZVtrZXldOm51bGwpO1xuICAgIC8vIH1cbiAgICByZXR1cm4gc2hlZXREYXRhXG4gIH1cblxuICBhY3RpdmF0ZUxpc3RlbmVycyAoaHRtbCkge1xuICAgIHN1cGVyLmFjdGl2YXRlTGlzdGVuZXJzKGh0bWwpXG4gICAgaHRtbC5maW5kKCcuYWRkLWFybW9yJykuY2xpY2soYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5fb25BZGRBcm1vcigpKVxuICAgIGh0bWxcbiAgICAgIC5maW5kKCcucmVtb3ZlLWFybW9yJylcbiAgICAgIC5jbGljayhhc3luYyBldmVudCA9PiBhd2FpdCB0aGlzLl9vblJlbW92ZUFybW9yKGV2ZW50KSlcbiAgICBodG1sLmZpbmQoJy5leHBhbmQtYnV0dG9uJykuY2xpY2sodGhpcy5fb25Ub2dnbGVFeHBhbmQuYmluZCh0aGlzKSlcbiAgICAvLyBFdmVyeXRoaW5nIGJlbG93IGhlcmUgaXMgb25seSBuZWVkZWQgaWYgdGhlIHNoZWV0IGlzIGVkaXRhYmxlXG4gICAgLy8gaWYgKCF0aGlzLm9wdGlvbnMuZWRpdGFibGUpIHJldHVybjtcbiAgICAvLyBodG1sLm9uKCdkcm9wJywgKGV2ZW50KSA9PiB0aGlzLl9vbkRyb3AoZXZlbnQpKTtcbiAgICAvLyBodG1sLmZpbmQoJy5zcGVsbCAuc3BlbGwtbmFtZSBoNCcpLmNsaWNrKGV2ZW50ID0+IHRoaXMuX29uU3BlbGxTdW1tYXJ5KGV2ZW50KSk7XG4gICAgLy8gaHRtbC5maW5kKCcuaXRlbS1kZWxldGUnKS5jbGljayh0aGlzLl9vblNwZWxsRGVsZXRlLmJpbmQodGhpcykpO1xuICB9XG5cbiAgYXN5bmMgX29uVG9nZ2xlRXhwYW5kICgpIHtcbiAgICBjb25zdCBleHBhbmRlZCA9IHRoaXMuYWN0b3IuZ2V0RmxhZygnQ29DNycsICdleHBhbmRlZCcpXG4gICAgaWYgKGV4cGFuZGVkKSB7XG4gICAgICB0aGlzLm9sZFNpemUgPSB0aGlzLnBvc2l0aW9uLmhlaWdodFxuICAgICAgdGhpcy5wb3NpdGlvbi5oZWlnaHQgPSAnYXV0bycgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBvc2l0aW9uLmhlaWdodCA9IHRoaXMub2xkU2l6ZSB8fCA0MjAgLy8gUmVzZXQgdGhlIHN0b3JlZCBwb3NpdGlvbiB0byBmb3JjZSB0byByZWNhbGN1bGF0ZSB3aW5kb3cgc2l6ZSBUT0RPOiBTdG9yZSBwcmV2aW91cyBwb3NpdGlvbiB0byByZXN0b3JlIGl0IGluc3RlYWQgb2YgYXV0b1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmFjdG9yLnNldEZsYWcoJ0NvQzcnLCAnZXhwYW5kZWQnLCAhZXhwYW5kZWQpXG4gIH1cblxuICBhc3luYyBfb25BZGRBcm1vciAoKSB7XG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKFxuICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgW11cbiAgICApXG4gICAgbG9jYXRpb25zLnB1c2goeyBuYW1lOiBudWxsLCB2YWx1ZTogbnVsbCB9KVxuICAgIGF3YWl0IHRoaXMuYWN0b3IudXBkYXRlKHsgJ3N5c3RlbS5hdHRyaWJzLmFybW9yLmxvY2F0aW9ucyc6IGxvY2F0aW9ucyB9KVxuICB9XG5cbiAgYXN5bmMgX29uUmVtb3ZlQXJtb3IgKGV2ZW50KSB7XG4gICAgY29uc3QgYnV0dG9uID0gZXZlbnQuY3VycmVudFRhcmdldFxuICAgIGNvbnN0IGxvY2F0aW9uID0gYnV0dG9uLmNsb3Nlc3QoJy5hcm1vcicpXG4gICAgY29uc3QgaW5kZXggPSBsb2NhdGlvbi5kYXRhc2V0LmluZGV4XG4gICAgY29uc3QgbG9jYXRpb25zID0gZHVwbGljYXRlKFxuICAgICAgdGhpcy5hY3Rvci5zeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgbnVsbFxuICAgIClcbiAgICBpZiAoIWxvY2F0aW9ucykgcmV0dXJuXG4gICAgbG9jYXRpb25zLnNwbGljZShpbmRleCwgMSlcbiAgICBhd2FpdCB0aGlzLmFjdG9yLnVwZGF0ZSh7ICdzeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMnOiBsb2NhdGlvbnMgfSlcbiAgfVxuXG4gIG9uQ2xvc2VTaGVldCAoKSB7XG4gICAgc3VwZXIub25DbG9zZVNoZWV0KClcbiAgICAvLyB0aGlzLmFjdG9yLmxvY2tlZCA9IHRydWU7XG4gIH1cblxuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICAvKiAgRm9ybSBTdWJtaXNzaW9uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuICAvKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuICBfdXBkYXRlT2JqZWN0IChldmVudCwgZm9ybURhdGEpIHtcbiAgICBjb25zdCBzeXN0ZW0gPSBleHBhbmRPYmplY3QoZm9ybURhdGEpPy5zeXN0ZW1cbiAgICBpZiAoc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zKSB7XG4gICAgICBmb3JtRGF0YVsnc3lzdGVtLmF0dHJpYnMuYXJtb3IubG9jYXRpb25zJ10gPSBPYmplY3QudmFsdWVzKFxuICAgICAgICBzeXN0ZW0uYXR0cmlicy5hcm1vci5sb2NhdGlvbnMgfHwgW11cbiAgICAgIClcbiAgICB9XG5cbiAgICBzdXBlci5fdXBkYXRlT2JqZWN0KGV2ZW50LCBmb3JtRGF0YSlcbiAgfVxufVxuIiwiLyogZ2xvYmFsIGdhbWUsIEl0ZW1TaGVldCwgbWVyZ2VPYmplY3QsIFRleHRFZGl0b3IgKi9cbmltcG9ydCB7IGFkZENvQ0lEU2hlZXRIZWFkZXJCdXR0b24gfSBmcm9tICcuLi8uLi9zY3JpcHRzL2NvYy1pZC1idXR0b24uanMnXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgaXNDdHJsS2V5IH0gZnJvbSAnLi4vLi4vY2hhdC9oZWxwZXIuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzLmpzJ1xuXG4vKipcbiAqIEV4dGVuZCB0aGUgYmFzaWMgSXRlbVNoZWV0IHdpdGggc29tZSB2ZXJ5IHNpbXBsZSBtb2RpZmljYXRpb25zXG4gKi9cbmV4cG9ydCBjbGFzcyBDb0M3V2VhcG9uU2hlZXQgZXh0ZW5kcyBJdGVtU2hlZXQge1xuICAvKipcbiAgICpcbiAgICovXG4gIHN0YXRpYyBnZXQgZGVmYXVsdE9wdGlvbnMgKCkge1xuICAgIHJldHVybiBtZXJnZU9iamVjdChzdXBlci5kZWZhdWx0T3B0aW9ucywge1xuICAgICAgY2xhc3NlczogWydjb2M3JywgJ3NoZWV0JywgJ2l0ZW0nXSxcbiAgICAgIHdpZHRoOiA1NDUsXG4gICAgICBoZWlnaHQ6IDQ4MCxcbiAgICAgIHRhYnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hdlNlbGVjdG9yOiAnLnNoZWV0LXRhYnMnLFxuICAgICAgICAgIGNvbnRlbnRTZWxlY3RvcjogJy5zaGVldC1ib2R5JyxcbiAgICAgICAgICBpbml0aWFsOiAnc2tpbGxzJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKi9cbiAgZ2V0IHRlbXBsYXRlICgpIHtcbiAgICBjb25zdCBwYXRoID0gJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMnXG4gICAgcmV0dXJuIGAke3BhdGh9L3dlYXBvbi1zaGVldC5odG1sYFxuICB9XG5cbiAgX2dldEhlYWRlckJ1dHRvbnMgKCkge1xuICAgIGNvbnN0IGhlYWRlckJ1dHRvbnMgPSBzdXBlci5fZ2V0SGVhZGVyQnV0dG9ucygpXG4gICAgYWRkQ29DSURTaGVldEhlYWRlckJ1dHRvbihoZWFkZXJCdXR0b25zLCB0aGlzKVxuICAgIHJldHVybiBoZWFkZXJCdXR0b25zXG4gIH1cblxuICAvKipcbiAgICogUHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcgdGhlIEl0ZW0gc2hlZXRcbiAgICogVGhlIHByZXBhcmVkIGRhdGEgb2JqZWN0IGNvbnRhaW5zIGJvdGggdGhlIGFjdG9yIGRhdGEgYXMgd2VsbCBhcyBhZGRpdGlvbmFsIHNoZWV0IG9wdGlvbnNcbiAgICovXG4gIGdldERhdGEgKCkge1xuICAgIGNvbnN0IHNoZWV0RGF0YSA9IHN1cGVyLmdldERhdGEoKVxuXG4gICAgc2hlZXREYXRhLmNvbWJhdFNraWxsID0gW11cblxuICAgIHNoZWV0RGF0YS5oYXNPd25lciA9IHRoaXMuaXRlbS5pc0VtYmVkZGVkID09PSB0cnVlXG4gICAgaWYgKHNoZWV0RGF0YS5oYXNPd25lcikge1xuICAgICAgc2hlZXREYXRhLmZpcmVhcm1Ta2lsbHMgPSB0aGlzLmFjdG9yLmZpcmVhcm1Ta2lsbHNcbiAgICAgIHNoZWV0RGF0YS5maWdodGluZ1NraWxscyA9IHRoaXMuYWN0b3IuZmlnaHRpbmdTa2lsbHNcbiAgICAgIHNoZWV0RGF0YS5jb21iYXRTa2lsbCA9IHRoaXMuaXRlbS5hY3Rvci5pdGVtcy5maWx0ZXIoaXRlbSA9PiB7XG4gICAgICAgIGlmIChpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICBpZiAoaXRlbS5zeXN0ZW0ucHJvcGVydGllcy5jb21iYXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfSlcblxuICAgICAgc2hlZXREYXRhLmNvbWJhdFNraWxsLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuICAgIH1cblxuICAgIHNoZWV0RGF0YS5fcHJvcGVydGllcyA9IFtdXG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoQ09DNy53ZWFwb25Qcm9wZXJ0aWVzKSkge1xuICAgICAgc2hlZXREYXRhLl9wcm9wZXJ0aWVzLnB1c2goe1xuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiB2YWx1ZSxcbiAgICAgICAgaXNFbmFibGVkOiB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXNba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG5cbiAgICBzaGVldERhdGEuX2VyYXMgPSBbXVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKENPQzcuZXJhcykpIHtcbiAgICAgIHNoZWV0RGF0YS5fZXJhcy5wdXNoKHtcbiAgICAgICAgcHJpY2U6IHRoaXMuaXRlbS5zeXN0ZW0ucHJpY2Vba2V5XSA/PyAwLFxuICAgICAgICBpZDoga2V5LFxuICAgICAgICBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUodmFsdWUpLFxuICAgICAgICBpc0VuYWJsZWQ6ICh0aGlzLml0ZW0uZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uZXJhcyA/PyB7fSlba2V5XSA9PT0gdHJ1ZVxuICAgICAgfSlcbiAgICB9XG4gICAgc2hlZXREYXRhLl9lcmFzLnNvcnQoQ29DN1V0aWxpdGllcy5zb3J0QnlOYW1lS2V5KVxuXG4gICAgc2hlZXREYXRhLnVzZXNBbHRlcm5hdGVTa2lsbCA9XG4gICAgICB0aGlzLml0ZW0uc3lzdGVtLnByb3BlcnRpZXMuYXV0byA9PT0gdHJ1ZSB8fFxuICAgICAgdGhpcy5pdGVtLnN5c3RlbS5wcm9wZXJ0aWVzLmJyc3QgPT09IHRydWUgfHxcbiAgICAgIHRoaXMuaXRlbS5zeXN0ZW0ucHJvcGVydGllcy50aHJvd24gPT09IHRydWVcblxuICAgIHNoZWV0RGF0YS5lbnJpY2hlZERlc2NyaXB0aW9uVmFsdWUgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25TcGVjaWFsID0gVGV4dEVkaXRvci5lbnJpY2hIVE1MKFxuICAgICAgc2hlZXREYXRhLmRhdGEuc3lzdGVtLmRlc2NyaXB0aW9uLnNwZWNpYWwsXG4gICAgICB7XG4gICAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgICAgc2VjcmV0czogc2hlZXREYXRhLmVkaXRhYmxlXG4gICAgICB9XG4gICAgKVxuXG4gICAgc2hlZXREYXRhLmVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIgPSBUZXh0RWRpdG9yLmVucmljaEhUTUwoXG4gICAgICBzaGVldERhdGEuZGF0YS5zeXN0ZW0uZGVzY3JpcHRpb24ua2VlcGVyLFxuICAgICAge1xuICAgICAgICBhc3luYzogZmFsc2UsXG4gICAgICAgIHNlY3JldHM6IHNoZWV0RGF0YS5lZGl0YWJsZVxuICAgICAgfVxuICAgIClcblxuICAgIHNoZWV0RGF0YS5pc0tlZXBlciA9IGdhbWUudXNlci5pc0dNXG4gICAgcmV0dXJuIHNoZWV0RGF0YVxuICB9XG5cbiAgLyogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuICAvKipcbiAgICogQWN0aXZhdGUgZXZlbnQgbGlzdGVuZXJzIHVzaW5nIHRoZSBwcmVwYXJlZCBzaGVldCBIVE1MXG4gICAqIEBwYXJhbSBodG1sIHtIVE1MfSAgIFRoZSBwcmVwYXJlZCBIVE1MIG9iamVjdCByZWFkeSB0byBiZSByZW5kZXJlZCBpbnRvIHRoZSBET01cbiAgICovXG4gIGFjdGl2YXRlTGlzdGVuZXJzIChodG1sKSB7XG4gICAgc3VwZXIuYWN0aXZhdGVMaXN0ZW5lcnMoaHRtbClcblxuICAgIC8vIEV2ZXJ5dGhpbmcgYmVsb3cgaGVyZSBpcyBvbmx5IG5lZWRlZCBpZiB0aGUgc2hlZXQgaXMgZWRpdGFibGVcbiAgICBpZiAoIXRoaXMub3B0aW9ucy5lZGl0YWJsZSkgcmV0dXJuXG4gICAgaHRtbC5maW5kKCcudG9nZ2xlLXN3aXRjaCcpLmNsaWNrKHRoaXMuX29uQ2xpY2tUb2dnbGUuYmluZCh0aGlzKSlcbiAgICBodG1sLmZpbmQoJy53ZWFwb24tcHJvcGVydHknKS5jbGljayh0aGlzLl9vblByb3BlcnR5Q2xpY2suYmluZCh0aGlzKSlcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0geyp9IGV2ZW50XG4gICAqL1xuICBhc3luYyBfb25DbGlja1RvZ2dsZSAoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgY29uc3QgcHJvcGVydHlJZCA9IGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnRvZ2dsZS1zd2l0Y2gnKS5kYXRhc2V0LnByb3BlcnR5XG4gICAgYXdhaXQgdGhpcy5pdGVtLnRvZ2dsZVByb3BlcnR5KFxuICAgICAgcHJvcGVydHlJZCxcbiAgICAgIGlzQ3RybEtleShldmVudClcbiAgICApXG4gIH1cblxuICBhc3luYyBfb25Qcm9wZXJ0eUNsaWNrIChldmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBwcm9wZXJ0eUlkID0gZXZlbnQuY3VycmVudFRhcmdldC5jbG9zZXN0KCcud2VhcG9uLXByb3BlcnR5JykuZGF0YXNldC5wcm9wZXJ0eVxuICAgIGF3YWl0IHRoaXMuaXRlbS50b2dnbGVQcm9wZXJ0eShwcm9wZXJ0eUlkKVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5hc3luYyBmdW5jdGlvbiBwZXJmb3JtRmlsdGVyIChlKSB7XG4gIGNvbnN0IGFwcElkID0gZS5jdXJyZW50VGFyZ2V0Lm5hbWUucmVwbGFjZSgvXmNvYzdbXjAtOV0rKFxcZCspJC8sICckMScpXG4gIGNvbnN0IGFwcCA9ICQoJ2Rpdi5hcHBbZGF0YS1hcHBpZD0nICsgYXBwSWQgKyAnXScpXG4gIGNvbnN0IHR5cGUgPSBhcHAuZmluZCgnc2VsZWN0W25hbWU9Y29jN3R5cGUnICsgYXBwSWQgKyAnXScpLnZhbCgpXG4gIGNvbnN0IG5hbWUgPSBhcHAuZmluZCgnaW5wdXRbbmFtZT1zZWFyY2hdJykudmFsKClcbiAgY29uc3QgZXJhRWxlbWVudCA9IGFwcC5maW5kKCdzZWxlY3RbbmFtZT1jb2M3ZXJhJyArIGFwcElkICsgJ10nKVxuICBsZXQgZXJhID0gJydcbiAgc3dpdGNoICh0eXBlKSB7XG4gICAgY2FzZSAnc2V0dXAnOlxuICAgIGNhc2UgJ3NraWxsJzpcbiAgICBjYXNlICd3ZWFwb24nOlxuICAgICAgZXJhRWxlbWVudC5jbG9zZXN0KCdkaXYuZXJhX3NlbGVjdCcpLnNob3coKVxuICAgICAgZXJhID0gZXJhRWxlbWVudC52YWwoKVxuICAgICAgYnJlYWtcbiAgICBkZWZhdWx0OlxuICAgICAgZXJhRWxlbWVudC5jbG9zZXN0KCdkaXYuZXJhX3NlbGVjdCcpLmhpZGUoKVxuICB9XG4gIGNvbnN0IGl0ZW1zID0gYXdhaXQgZ2FtZS5wYWNrcy5nZXQoYXBwLmRhdGEoJ3BhY2tJZCcpKT8uZ2V0RG9jdW1lbnRzKClcbiAgaWYgKHR5cGVvZiBpdGVtcyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm5cbiAgfVxuICBjb25zdCBzaG93ID0gW11cbiAgY29uc3QgbmFtZUZpbHRlciA9IG5ldyBSZWdFeHAoUmVnRXhwLmVzY2FwZShuYW1lKSwgJ2knKVxuICBmb3IgKGNvbnN0IFssIGl0ZW1dIG9mIE9iamVjdC5lbnRyaWVzKGl0ZW1zKSkge1xuICAgIGxldCBmaWx0ZXIgPSB0cnVlXG4gICAgaWYgKGZpbHRlciAmJiBuYW1lICE9PSAnJykge1xuICAgICAgZmlsdGVyID0gaXRlbS5uYW1lLm1hdGNoKG5hbWVGaWx0ZXIpXG4gICAgfVxuICAgIGlmIChmaWx0ZXIgJiYgdHlwZSAhPT0gJycpIHtcbiAgICAgIGZpbHRlciA9IGl0ZW0udHlwZSA9PT0gdHlwZVxuICAgIH1cbiAgICBpZiAoZmlsdGVyICYmIGVyYSAhPT0gJycpIHtcbiAgICAgIGNvbnN0IGVyYXMgPSBpdGVtLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmVyYXNcbiAgICAgIGlmIChlcmFzICYmIE9iamVjdC5rZXlzKGVyYXMpLmxlbmd0aCA+IDAgJiYgIShlcmFzW2VyYV0gPz8gZmFsc2UpKSB7XG4gICAgICAgIGZpbHRlciA9IGZhbHNlXG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmaWx0ZXIpIHtcbiAgICAgIHNob3cucHVzaChpdGVtLmlkKVxuICAgIH1cbiAgfVxuICBhcHAuZmluZCgnb2wuZGlyZWN0b3J5LWxpc3QgbGknKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPSBzaG93LmluY2x1ZGVzKHRoaXMuZGF0YXNldC5kb2N1bWVudElkKVxuICAgICAgPyAnZmxleCdcbiAgICAgIDogJ25vbmUnXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb21wZW5kaXVtRmlsdGVyICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckNvbXBlbmRpdW0nLCBhc3luYyAoYXBwLCBodG1sLCBkYXRhKSA9PiB7XG4gICAgaWYgKGFwcC5jb2xsZWN0aW9uLmRvY3VtZW50TmFtZSA9PT0gJ0l0ZW0nKSB7XG4gICAgICBhd2FpdCBhcHAuY29sbGVjdGlvbi5nZXRJbmRleCgpXG4gICAgICBjb25zdCB0eXBlcyA9IFsuLi5uZXcgU2V0KGRhdGEuaW5kZXguZmlsdGVyKGkgPT4gaS5uYW1lICE9PSAnI1tDRl90ZW1wRW50aXR5XScpLm1hcChpdGVtID0+IGl0ZW0udHlwZSkpXVxuICAgICAgY29uc3Qgc2VsZWN0ID0gW11cbiAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIlwiPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWxsJykgKyAnPC9vcHRpb24+J1xuICAgICAgKVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdhcmNoZXR5cGUnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cImFyY2hldHlwZVwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLkFyY2hldHlwZScpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnYm9vaycpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiYm9va1wiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLkJvb2snKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ2l0ZW0nKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIml0ZW1cIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5JdGVtJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdvY2N1cGF0aW9uJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJvY2N1cGF0aW9uXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuT2NjdXBhdGlvbicpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnc2V0dXAnKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cInNldHVwXCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuU2V0dXAnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3NraWxsJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJza2lsbFwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLlNraWxsJykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCdzcGVsbCcpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwic3BlbGxcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5TcGVsbCcpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGlmICh0eXBlcy5pbmNsdWRlcygnc3RhdHVzJykpIHtcbiAgICAgICAgc2VsZWN0LnB1c2goXG4gICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCJzdGF0dXNcIj4nICtcbiAgICAgICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FbnRpdGllcy5TdGF0dXMnKSArXG4gICAgICAgICAgICAnPC9vcHRpb24+J1xuICAgICAgICApXG4gICAgICB9XG4gICAgICBpZiAodHlwZXMuaW5jbHVkZXMoJ3RhbGVudCcpKSB7XG4gICAgICAgIHNlbGVjdC5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwidGFsZW50XCI+JyArXG4gICAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRW50aXRpZXMuVGFsZW50JykgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaWYgKHR5cGVzLmluY2x1ZGVzKCd3ZWFwb24nKSkge1xuICAgICAgICBzZWxlY3QucHVzaChcbiAgICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIndlYXBvblwiPicgK1xuICAgICAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVudGl0aWVzLldlYXBvbicpICtcbiAgICAgICAgICAgICc8L29wdGlvbj4nXG4gICAgICAgIClcbiAgICAgIH1cbiAgICAgIGNvbnN0IGVyYXMgPSBbXVxuICAgICAgZXJhcy5wdXNoKFxuICAgICAgICAnPG9wdGlvbiB2YWx1ZT1cIlwiPicgKyBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQWxsJykgKyAnPC9vcHRpb24+J1xuICAgICAgKVxuICAgICAgZm9yIChjb25zdCBlcmEgb2YgT2JqZWN0LmVudHJpZXMoQ09DNy5lcmFzKS5tYXAoZSA9PiB7IHJldHVybiB7IGlkOiBlWzBdLCBuYW1lOiBnYW1lLmkxOG4ubG9jYWxpemUoZVsxXSkgfSB9KS5zb3J0KENvQzdVdGlsaXRpZXMuc29ydEJ5TmFtZUtleSkpIHtcbiAgICAgICAgZXJhcy5wdXNoKFxuICAgICAgICAgICc8b3B0aW9uIHZhbHVlPVwiJyArXG4gICAgICAgICAgICBlcmEuaWQgK1xuICAgICAgICAgICAgJ1wiPicgK1xuICAgICAgICAgICAgZXJhLm5hbWUgK1xuICAgICAgICAgICAgJzwvb3B0aW9uPidcbiAgICAgICAgKVxuICAgICAgfVxuICAgICAgaHRtbC5kYXRhKCdwYWNrSWQnLCBhcHAubWV0YWRhdGEuaWQpXG4gICAgICBsZXQgdW5jb21tb24gPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuU2tpbGxSYXJpdHlTaG9ydCcpXG4gICAgICBpZiAodW5jb21tb24gPT09ICdDb0M3LlNraWxsUmFyaXR5U2hvcnQnKSB7XG4gICAgICAgIHVuY29tbW9uID0gJz8/J1xuICAgICAgfVxuICAgICAgaHRtbC5maW5kKCdsaS5kaXJlY3RvcnktaXRlbScpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCByb3cgPSAkKHRoaXMpXG4gICAgICAgIGxldCBpdGVtID0gW11cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRhLmluZGV4ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIC8vIERFUFJFQ0lBVEVEIElOIHYxMVxuICAgICAgICAgIGl0ZW0gPSBkYXRhLmluZGV4LmZpbmQoaSA9PiBpLl9pZCA9PT0gcm93LmRhdGEoJ2RvY3VtZW50LWlkJykpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaXRlbSA9IGFwcC5jb2xsZWN0aW9uLmluZGV4LmdldChyb3cuZGF0YSgnZG9jdW1lbnQtaWQnKSlcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXRlbSAmJiBpdGVtLnR5cGUgPT09ICdza2lsbCcpIHtcbiAgICAgICAgICByb3cuZmluZCgnYScpLmh0bWwoaXRlbS5uYW1lICsgJyAoJyArIChpdGVtLnN5c3RlbT8uYmFzZSA/PyAnPycpICsgJyUnICsgKChpdGVtLnN5c3RlbT8ucHJvcGVydGllcz8ucmFyaXR5ID8/IGZhbHNlKSA/ICcgJyArIHVuY29tbW9uIDogJycpICsgJyknKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgaHRtbFxuICAgICAgICAuZmluZCgnaGVhZGVyLmRpcmVjdG9yeS1oZWFkZXInKVxuICAgICAgICAuYWZ0ZXIoXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb21wZW5kaXVtZmlsdGVyXCI+JyArXG4gICAgICAgICAgJzxkaXYgY2xhc3M9XCJoZWFkZXItc2VhcmNoIGZsZXhyb3dcIj48aSBjbGFzcz1cImZhcyBmYS1sYXllci1ncm91cFwiPjwvaT48c2VsZWN0IG5hbWU9XCJjb2M3dHlwZScgKyBhcHAuYXBwSWQgKyAnXCIgc3R5bGU9XCJcIj4nICsgc2VsZWN0LmpvaW4oJycpICsgJzwvc2VsZWN0PjwvZGl2PicgK1xuICAgICAgICAgICc8ZGl2IGNsYXNzPVwiaGVhZGVyLXNlYXJjaCBmbGV4cm93IGVyYV9zZWxlY3RcIiBzdHlsZT1cImRpc3BsYXk6bm9uZVwiPjxpIGNsYXNzPVwiZmFzIGZhLWxheWVyLWdyb3VwXCI+PC9pPjxzZWxlY3QgbmFtZT1cImNvYzdlcmEnICsgYXBwLmFwcElkICsgJ1wiIHN0eWxlPVwiXCI+JyArIGVyYXMuam9pbignJykgKyAnPC9zZWxlY3Q+PC9kaXY+JyArXG4gICAgICAgICAgJzwvZGl2PidcbiAgICAgICAgKVxuICAgICAgaHRtbC5maW5kKCdzZWxlY3QnKS5jaGFuZ2UocGVyZm9ybUZpbHRlci5iaW5kKHRoaXMpKVxuICAgICAgaHRtbC5maW5kKCdpbnB1dCcpLmtleXVwKHBlcmZvcm1GaWx0ZXIuYmluZCh0aGlzKSlcbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgQWN0b3IsIENhcmQsIENPTkZJRywgZmxhdHRlbk9iamVjdCwgZ2FtZSwgSXRlbSwgSm91cm5hbEVudHJ5LCBNYWNybywgUGxheWxpc3QsIFJvbGxUYWJsZSwgU2NlbmUsIFNjZW5lTmF2aWdhdGlvbiwgdWkgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3VXRpbGl0aWVzIH0gZnJvbSAnLi4vdXRpbGl0aWVzLmpzJ1xuXG5leHBvcnQgY2xhc3MgQ29DSUQge1xuICBzdGF0aWMgaW5pdCAoKSB7XG4gICAgQ09ORklHLkFjdG9yLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgLy8gQ09ORklHLkNhcmRzLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdmbGFncy5Db0M3LmNvY2lkRmxhZycpXG4gICAgQ09ORklHLkl0ZW0uY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuSXRlbS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnc3lzdGVtLmJhc2UnKVxuICAgIENPTkZJRy5JdGVtLmNvbXBlbmRpdW1JbmRleEZpZWxkcy5wdXNoKCdzeXN0ZW0ucHJvcGVydGllcycpXG4gICAgQ09ORklHLkpvdXJuYWxFbnRyeS5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5NYWNyby5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5QbGF5bGlzdC5jb21wZW5kaXVtSW5kZXhGaWVsZHMucHVzaCgnZmxhZ3MuQ29DNy5jb2NpZEZsYWcnKVxuICAgIENPTkZJRy5Sb2xsVGFibGUuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBDT05GSUcuU2NlbmUuY29tcGVuZGl1bUluZGV4RmllbGRzLnB1c2goJ2ZsYWdzLkNvQzcuY29jaWRGbGFnJylcbiAgICBnYW1lLnN5c3RlbS5hcGkgPSB7XG4gICAgICBjb2NpZDogQ29DSURcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBSZWdFeHAgZm9yIHZhbGlkIHR5cGUgYW5kIGZvcm1hdFxuICAgKiBAcmV0dXJucyBSZWdFeHBcbiAgICovXG4gIHN0YXRpYyByZWdFeEtleSAoKSB7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoJ14oJyArIE9iamVjdC5rZXlzKENvQ0lELmdhbWVQcm9wZXJ0eUxvb2t1cCkuam9pbignfCcpICsgJylcXFxcLiguKj8pXFxcXC4oLispJCcpXG4gIH1cblxuICAvKipcbiAgICogR2V0IENvQ0lEIHR5cGUuc3VidHlwZS4gYmFzZWQgb24gZG9jdW1lbnRcbiAgICogQHBhcmFtIGRvY3VtZW50XG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgc3RhdGljIGdldFByZWZpeCAoZG9jdW1lbnQpIHtcbiAgICBmb3IgKGNvbnN0IHR5cGUgaW4gQ29DSUQuZG9jdW1lbnROYW1lTG9va3VwKSB7XG4gICAgICBpZiAoZG9jdW1lbnQgaW5zdGFuY2VvZiBDb0NJRC5kb2N1bWVudE5hbWVMb29rdXBbdHlwZV0pIHtcbiAgICAgICAgcmV0dXJuIHR5cGUgKyAnLicgKyAoZG9jdW1lbnQudHlwZSA/PyAnJykgKyAnLidcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuICcnXG4gIH1cblxuICAvKipcbiAgICogR2V0IENvQ0lEIHR5cGUuc3VidHlwZS5uYW1lIGJhc2VkIG9uIGRvY3VtZW50XG4gICAqIEBwYXJhbSBkb2N1bWVudFxuICAgKiBAcmV0dXJucyBzdHJpbmdcbiAgICovXG4gIHN0YXRpYyBndWVzc0lkIChkb2N1bWVudCkge1xuICAgIHJldHVybiBDb0NJRC5nZXRQcmVmaXgoZG9jdW1lbnQpICsgQ29DN1V0aWxpdGllcy50b0tlYmFiQ2FzZShkb2N1bWVudC5uYW1lKVxuICB9XG5cbiAgLyoqXG4gICAqIEdldCBDb0NJRCB0eXBlLnN1YnR5cGUucGFydGlhbC1uYW1lKC1yZW1vdmVkKVxuICAgKiBAcGFyYW0ga2V5XG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgc3RhdGljIGd1ZXNzR3JvdXBGcm9tS2V5IChpZCkge1xuICAgIGlmIChpZCkge1xuICAgICAgY29uc3Qga2V5ID0gaWQucmVwbGFjZSgvKFteXFxcXC4tXSspJC8sICcnKVxuICAgICAgaWYgKGtleS5zdWJzdHIoLTEpID09PSAnLScpIHtcbiAgICAgICAgcmV0dXJuIGtleVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgQ29DSUQgdHlwZS5zdWJ0eXBlLnBhcnRpYWwtbmFtZSgtcmVtb3ZlZClcbiAgICogQHBhcmFtIGRvY3VtZW50XG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgc3RhdGljIGd1ZXNzR3JvdXBGcm9tRG9jdW1lbnQgKGRvY3VtZW50KSB7XG4gICAgcmV0dXJuIENvQ0lELmd1ZXNzR3JvdXBGcm9tS2V5KGRvY3VtZW50LmZsYWdzPy5Db0M3Py5jb2NpZEZsYWc/LmlkKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJhbnNsYXRpb24gb2YgZXJhIGtleVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgc3RhdGljIGVyYVRleHQgKGVyYSkge1xuICAgIGlmIChlcmEgPT09IGZhbHNlKSB7XG4gICAgICByZXR1cm4gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpXG4gICAgfSBlbHNlIGlmIChlcmEgPT09IHRydWUpIHtcbiAgICAgIGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICB9XG5cbiAgICByZXR1cm4gZ2FtZS5pMThuLmZvcm1hdChDT0M3LmVyYXNbZXJhXSA/PyAnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYSB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIGl0ZW1zIHdpdGggbWF0Y2hpbmcgQ29DSURzLCBsYW5ndWFnZSwgYW5kIGVyYXNcbiAgICogdWkubm90aWZpY2F0aW9ucy53YXJuIGZvciBtaXNzaW5nIGtleXNcbiAgICogQHBhcmFtIGl0ZW1MaXN0IGFycmF5IG9mIENvQ0lEc1xuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGV4cGFuZEl0ZW1BcnJheSAoeyBpdGVtTGlzdCwgbGFuZyA9IGdhbWUuaTE4bi5sYW5nLCBlcmEgPSB0cnVlLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBzaG93TG9hZGluZyA9IGZhbHNlIH0gPSB7fSkge1xuICAgIGxldCBpdGVtcyA9IFtdXG4gICAgY29uc3QgY29jaWRzID0gaXRlbUxpc3QuZmlsdGVyKGl0ID0+IHR5cGVvZiBpdCA9PT0gJ3N0cmluZycpXG4gICAgaXRlbXMgPSBpdGVtTGlzdC5maWx0ZXIoaXQgPT4gdHlwZW9mIGl0ICE9PSAnc3RyaW5nJylcblxuICAgIGlmIChjb2NpZHMubGVuZ3RoKSB7XG4gICAgICBjb25zdCBmb3VuZCA9IGF3YWl0IENvQ0lELmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwOiBDb0NJRC5tYWtlR3JvdXBSZWdFeChjb2NpZHMpLCB0eXBlOiAnaScsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrLCBzaG93TG9hZGluZyB9KVxuICAgICAgY29uc3QgYWxsID0gW11cbiAgICAgIGZvciAoY29uc3QgY29jaWQgb2YgY29jaWRzKSB7XG4gICAgICAgIGNvbnN0IGl0ZW0gPSBmb3VuZC5maW5kKGkgPT4gaS5mbGFncy5Db0M3LmNvY2lkRmxhZy5pZCA9PT0gY29jaWQpXG4gICAgICAgIGlmIChpdGVtKSB7XG4gICAgICAgICAgYWxsLnB1c2goaXRlbSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGFsbC5sZW5ndGggPCBjb2NpZHMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IG5vdG1pc3NpbmcgPSBbXVxuICAgICAgICBmb3IgKGNvbnN0IGRvYyBvZiBhbGwpIHtcbiAgICAgICAgICBub3RtaXNzaW5nLnB1c2goZG9jLmZsYWdzLkNvQzcuY29jaWRGbGFnLmlkKVxuICAgICAgICB9XG4gICAgICAgIGlmIChlcmEgPT09IHRydWUpIHtcbiAgICAgICAgICBlcmEgPSBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpXG4gICAgICAgIH1cbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmRvY3VtZW50cy1ub3QtZm91bmQnLCB7IGNvY2lkczogY29jaWRzLmZpbHRlcih4ID0+ICFub3RtaXNzaW5nLmluY2x1ZGVzKHgpKS5qb2luKCcsICcpLCBsYW5nLCBlcmE6IENvQ0lELmVyYVRleHQoZXJhKSB9KSlcbiAgICAgIH1cbiAgICAgIGl0ZW1zID0gaXRlbXMuY29uY2F0KGFsbClcbiAgICB9XG4gICAgcmV0dXJuIGl0ZW1zXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpdGVtIHdpdGggbWF0Y2hpbmcgQ29DSURzIGZyb20gbGlzdFxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG1pc3Npbmcga2V5c1xuICAgKiBAcGFyYW0gY29jaWQgYSBzaW5nbGUgY29jaWRcbiAgICogQHBhcmFtIGxpc3QgYXJyYXkgb2YgaXRlbXNcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBmaW5kQ29jSWRJbkxpc3QgKGNvY2lkLCBsaXN0KSB7XG4gICAgbGV0IGl0ZW1OYW1lID0gJydcbiAgICBjb25zdCBDb0NJREtleXMgPSBmbGF0dGVuT2JqZWN0KGdhbWUuaTE4bi50cmFuc2xhdGlvbnMuQ29DNy5Db0NJREZsYWcua2V5cylcbiAgICBpZiAodHlwZW9mIENvQ0lES2V5c1tjb2NpZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpdGVtTmFtZSA9IENvQ0lES2V5c1tjb2NpZF1cbiAgICB9XG4gICAgcmV0dXJuICh0eXBlb2YgbGlzdC5maWx0ZXIgPT09ICd1bmRlZmluZWQnID8gT2JqZWN0LnZhbHVlcyhsaXN0KSA6IGxpc3QpLmZpbHRlcihpID0+IGkuZmxhZ3M/LkNvQzc/LmNvY2lkRmxhZz8uaWQgPT09IGNvY2lkIHx8IChpdGVtTmFtZSAhPT0gJycgJiYgaXRlbU5hbWUgPT09IGkubmFtZSkpXG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBSZWdFeHAgbWF0Y2hpbmcgYWxsIHN0cmluZ3MgaW4gYXJyYXlcbiAgICogQHBhcmFtIGNvY2lkcyBhbiBhcnJheSBvZiBDb0NJRCBzdHJpbmdzXG4gICAqIEBwYXJhbSBsaXN0IGFycmF5IG9mIGl0ZW1zXG4gICAqIEByZXR1cm5zIFJlZ0V4cFxuICAgKi9cbiAgc3RhdGljIG1ha2VHcm91cFJlZ0V4IChjb2NpZHMpIHtcbiAgICBpZiAodHlwZW9mIGNvY2lkcyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGNvY2lkcyA9IFtjb2NpZHNdXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgY29jaWRzID09PSAndW5kZWZpbmVkJyB8fCB0eXBlb2YgY29jaWRzLmZpbHRlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIH1cbiAgICBjb25zdCBzcGxpdHMgPSB7fVxuICAgIGNvbnN0IHJneCA9IENvQ0lELnJlZ0V4S2V5KClcbiAgICBmb3IgKGNvbnN0IGkgb2YgY29jaWRzKSB7XG4gICAgICBjb25zdCBrZXkgPSBpLm1hdGNoKHJneClcbiAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBzcGxpdHNba2V5WzFdXSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBzcGxpdHNba2V5WzFdXSA9IHt9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBzcGxpdHNba2V5WzFdXVtrZXlbMl1dID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHNwbGl0c1trZXlbMV1dW2tleVsyXV0gPSBbXVxuICAgICAgICB9XG4gICAgICAgIHNwbGl0c1trZXlbMV1dW2tleVsyXV0ucHVzaChrZXlbM10pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBTbGllbnRseSBlcnJvclxuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZWdFeFBhcnRzID0gW11cbiAgICBmb3IgKGNvbnN0IHQgaW4gc3BsaXRzKSB7XG4gICAgICBjb25zdCByb3cgPSBbXVxuICAgICAgZm9yIChjb25zdCBzIGluIHNwbGl0c1t0XSkge1xuICAgICAgICBpZiAoc3BsaXRzW3RdW3NdLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICByb3cucHVzaChzICsgJ1xcXFwuJyArICcoJyArIHNwbGl0c1t0XVtzXS5qb2luKCd8JykgKyAnKScpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcm93LnB1c2gocyArICdcXFxcLicgKyBzcGxpdHNbdF1bc10uam9pbignJykpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChyb3cubGVuZ3RoID4gMSkge1xuICAgICAgICByZWdFeFBhcnRzLnB1c2godCArICdcXFxcLicgKyAnKCcgKyByb3cuam9pbignfCcpICsgJyknKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVnRXhQYXJ0cy5wdXNoKHQgKyAnXFxcXC4nICsgcm93LmpvaW4oJycpKVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAocmVnRXhQYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXignICsgcmVnRXhQYXJ0cy5qb2luKCd8JykgKyAnKSQnKVxuICAgIH1cbiAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByZWdFeFBhcnRzLmpvaW4oJycpICsgJyQnKVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIGRvY3VtZW50cyB3aXRoIGFuIENvQ0lEIG1hdGNoaW5nIHRoZSByZWdleCBhbmQgbWF0Y2hpbmcgdGhlIGRvY3VtZW50IHR5cGVcbiAgICogYW5kIGxhbmd1YWdlLCBmcm9tIHRoZSBzcGVjaWZpZWQgc2NvcGUuXG4gICAqIEVtcHR5IGFycmF5IHJldHVybiBmb3Igbm8gbWF0Y2hlc1xuICAgKiBAcGFyYW0gY29jaWRSZWdFeHAgcmVnZXggdXNlZCBvbiB0aGUgQ29DSURcbiAgICogQHBhcmFtIHR5cGUgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHdhbnRlZCBDb0NJRCwgZm9yIGV4YW1wbGUgJ2knLCAnYScsICdqZSdcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gc2NvcGUgZGVmaW5lcyB3aGVyZSBpdCB3aWxsIGxvb2s6XG4gICAqICoqbWF0Y2gqKiBzYW1lIGxvZ2ljIGFzIGZyb21Db0NJRCBmdW5jdGlvbixcbiAgICogKiphbGwqKjogZmluZCBpbiBib3RoIHdvcmxkICYgY29tcGVuZGlhLFxuICAgKiAqKndvcmxkKio6IG9ubHkgc2VhcmNoIGluIHdvcmxkLFxuICAgKiAqKmNvbXBlbmRpdW1zKio6IG9ubHkgc2VhcmNoIGluIGNvbXBlbmRpdW1zXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGZyb21Db0NJRFJlZ2V4QWxsICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IGZhbHNlLCBzY29wZSA9ICdtYXRjaCcsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IFtdXG5cbiAgICBsZXQgY291bnQgPSAwXG4gICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICBpZiAoWydtYXRjaCcsICdhbGwnLCAnd29ybGQnXS5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgICAgY291bnQrK1xuICAgICAgfVxuICAgICAgaWYgKFsnbWF0Y2gnLCAnYWxsJywgJ2NvbXBlbmRpdW1zJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICAgIGNvdW50ID0gY291bnQgKyBnYW1lLnBhY2tzLnNpemVcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoWydtYXRjaCcsICdhbGwnLCAnd29ybGQnXS5pbmNsdWRlcyhzY29wZSkpIHtcbiAgICAgIGNvbnN0IHdvcmxkRG9jdW1lbnRzID0gYXdhaXQgQ29DSUQuZG9jdW1lbnRzRnJvbVdvcmxkKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrLCBwcm9ncmVzc0JhcjogY291bnQgfSlcbiAgICAgIGlmIChzY29wZSA9PT0gJ21hdGNoJyAmJiB3b3JsZERvY3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICAgICAgU2NlbmVOYXZpZ2F0aW9uLmRpc3BsYXlQcm9ncmVzc0Jhcih7IGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFVQLlBhY2thZ2VzTG9hZGluZycpLCBwY3Q6IDEwMCB9KVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmZpbHRlckFsbENvQ0lEKHdvcmxkRG9jdW1lbnRzLCBsYW5nRmFsbGJhY2sgJiYgbGFuZyAhPT0gJ2VuJylcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5zcGxpY2UoMCwgMCwgLi4ud29ybGREb2N1bWVudHMpXG4gICAgfVxuXG4gICAgaWYgKFsnbWF0Y2gnLCAnYWxsJywgJ2NvbXBlbmRpdW1zJ10uaW5jbHVkZXMoc2NvcGUpKSB7XG4gICAgICBjb25zdCBjb21wZW5kaWFEb2N1bWVudHMgPSBhd2FpdCBDb0NJRC5kb2N1bWVudHNGcm9tQ29tcGVuZGlhKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcsIGVyYSwgbGFuZ0ZhbGxiYWNrLCBwcm9ncmVzc0JhcjogY291bnQgfSlcblxuICAgICAgcmVzdWx0LnNwbGljZShyZXN1bHQubGVuZ3RoLCAwLCAuLi5jb21wZW5kaWFEb2N1bWVudHMpXG4gICAgfVxuXG4gICAgaWYgKHNob3dMb2FkaW5nKSB7XG4gICAgICBTY2VuZU5hdmlnYXRpb24uZGlzcGxheVByb2dyZXNzQmFyKHsgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVVAuUGFja2FnZXNMb2FkaW5nJyksIHBjdDogMTAwIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuZmlsdGVyQWxsQ29DSUQocmVzdWx0LCBsYW5nRmFsbGJhY2sgJiYgbGFuZyAhPT0gJ2VuJylcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFsbCBkb2N1bWVudHMgd2l0aCBhbiBDb0NJRCwgbGFuZ3VhZ2UsIGFuZCBlcmEgZnJvbSB0aGUgc3BlY2lmaWVkIHNjb3BlLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkIGEgc2luZ2xlIGNvY2lkXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdCwgZmFsc2UgPSBubyBmaWx0ZXJcbiAgICogQHBhcmFtIHNjb3BlIGRlZmluZXMgd2hlcmUgaXQgd2lsbCBsb29rOlxuICAgKiAqKm1hdGNoKiogc2FtZSBsb2dpYyBhcyBmcm9tQ29DSUQgZnVuY3Rpb24sXG4gICAqICoqYWxsKio6IGZpbmQgaW4gYm90aCB3b3JsZCAmIGNvbXBlbmRpYSxcbiAgICogKip3b3JsZCoqOiBvbmx5IHNlYXJjaCBpbiB3b3JsZCxcbiAgICogKipjb21wZW5kaXVtcyoqOiBvbmx5IHNlYXJjaCBpbiBjb21wZW5kaXVtc1xuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHNob3dMb2FkaW5nIFNob3cgbG9hZGluZyBiYXJcbiAgICogQHJldHVybnMgYXJyYXlcbiAgICovXG4gIHN0YXRpYyBhc3luYyBmcm9tQ29DSURBbGwgKHsgY29jaWQsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gZmFsc2UsIHNjb3BlID0gJ21hdGNoJywgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWNvY2lkIHx8IHR5cGVvZiBjb2NpZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBjb25zdCBwYXJ0cyA9IGNvY2lkLm1hdGNoKENvQ0lELnJlZ0V4S2V5KCkpXG4gICAgaWYgKCFwYXJ0cykge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIHJldHVybiBDb0NJRC5mcm9tQ29DSURSZWdleEFsbCh7IGNvY2lkUmVnRXhwOiBuZXcgUmVnRXhwKCdeJyArIENvQzdVdGlsaXRpZXMucXVvdGVSZWdFeHAoY29jaWQpICsgJyQnKSwgdHlwZTogcGFydHNbMV0sIGxhbmcsIGVyYSwgc2NvcGUsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG9ubHkgdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnRzIGZvciBlYWNoIENvQ0lEIHRoYXQgbWF0Y2hlcyB0aGUgUmVnRXhwIGFuZFxuICAgKiBsYW5ndWFnZSwgd2l0aCB0aGUgaGlnaGVzdCBwcmlvcml0eSBkb2N1bWVudHMgaW4gdGhlIFdvcmxkIHRha2luZyBwcmVjZWRlbmNlIG92ZXJcbiAgICogYW55IGRvY3VtZW50cyBpbiBjb21wZW5kaXVtIHBhY2tzLlxuICAgKiBFbXB0eSBhcnJheSByZXR1cm4gZm9yIG5vIG1hdGNoZXNcbiAgICogQHBhcmFtIGNvY2lkUmVnRXhwIHJlZ2V4IHVzZWQgb24gdGhlIENvQ0lEXG4gICAqIEBwYXJhbSB0eXBlIHRoZSBmaXJzdCBwYXJ0IG9mIHRoZSB3YW50ZWQgQ29DSUQsIGZvciBleGFtcGxlICdpJywgJ2EnLCAnamUnXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0IChcImVuXCIsIFwiZXNcIiwgLi4uKVxuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHRcbiAgICogQHBhcmFtIGxhbmdGYWxsYmFjayBzaG91bGQgdGhlIHN5c3RlbSBmYWxsIGJhY2sgdG8gZW4gaW5jYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEBwYXJhbSBzaG93TG9hZGluZyBTaG93IGxvYWRpbmcgYmFyXG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZnJvbUNvQ0lEUmVnZXhCZXN0ICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUsIHNob3dMb2FkaW5nID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgaWYgKGVyYSA9PT0gZmFsc2UpIHtcbiAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IudW5rbm93bi1lcmEnLCB7IGVyYTogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkFueScpIH0pKVxuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGNvbnN0IGFsbERvY3VtZW50cyA9IGF3YWl0IHRoaXMuZnJvbUNvQ0lEUmVnZXhBbGwoeyBjb2NpZFJlZ0V4cCwgdHlwZSwgbGFuZywgZXJhLCBzY29wZTogJ2FsbCcsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgICBjb25zdCBiZXN0RG9jdW1lbnRzID0gdGhpcy5maWx0ZXJCZXN0Q29DSUQoYWxsRG9jdW1lbnRzKVxuICAgIHJldHVybiBiZXN0RG9jdW1lbnRzXG4gIH1cblxuICAvKipcbiAgICogR2V0cyBvbmx5IHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50IGZvciBDb0NJRCB0aGF0IG1hdGNoZXMgdGhlIGxhbmd1YWdlLFxuICAgKiB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGRvY3VtZW50cyBpbiB0aGUgV29ybGQgdGFraW5nIHByZWNlZGVuY2Ugb3ZlclxuICAgKiBhbnkgZG9jdW1lbnRzXG4gICAqIGluIGNvbXBlbmRpdW0gcGFja3MuXG4gICAqIEBwYXJhbSBjb2NpZCBzdHJpbmcgQ29DSURcbiAgICogQHBhcmFtIGxhbmcgdGhlIGxhbmd1YWdlIHRvIG1hdGNoIGFnYWluc3QgKFwiZW5cIiwgXCJlc1wiLCAuLi4pXG4gICAqIEBwYXJhbSBlcmEgdGhlIGVyYXMgdG8gbWF0Y2ggYWdhaW5zdCAoJ3N0YW5kYXJkJywgJ21vZGVyblB1bHAnLCAuLi4pLCB0cnVlID0gd29ybGQgZGVmYXVsdFxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICovXG4gIHN0YXRpYyBmcm9tQ29DSUQgKGNvY2lkLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IHRydWUsIGxhbmdGYWxsYmFjayA9IHRydWUpIHtcbiAgICBpZiAoZXJhID09PSBmYWxzZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55JykgfSkpXG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgcmV0dXJuIENvQ0lELmZyb21Db0NJREJlc3QoeyBjb2NpZCwgbGFuZywgZXJhLCBsYW5nRmFsbGJhY2sgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIG9ubHkgdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnQgZm9yIENvQ0lEIHRoYXQgbWF0Y2hlcyB0aGUgbGFuZ3VhZ2UsXG4gICAqIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZG9jdW1lbnRzIGluIHRoZSBXb3JsZCB0YWtpbmcgcHJlY2VkZW5jZSBvdmVyXG4gICAqIGFueSBkb2N1bWVudHNcbiAgICogaW4gY29tcGVuZGl1bSBwYWNrcy5cbiAgICogQHBhcmFtIGNvY2lkIHN0cmluZyBDb0NJRFxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoXCJlblwiLCBcImVzXCIsIC4uLilcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0XG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gc2hvd0xvYWRpbmcgU2hvdyBsb2FkaW5nIGJhclxuICAgKi9cbiAgc3RhdGljIGZyb21Db0NJREJlc3QgKHsgY29jaWQsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gdHJ1ZSwgbGFuZ0ZhbGxiYWNrID0gdHJ1ZSwgc2hvd0xvYWRpbmcgPSBmYWxzZSB9ID0ge30pIHtcbiAgICBpZiAoIWNvY2lkIHx8IHR5cGVvZiBjb2NpZCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHJldHVybiBbXVxuICAgIH1cbiAgICBpZiAoZXJhID09PSBmYWxzZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihnYW1lLmkxOG4uZm9ybWF0KCdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuQW55JykgfSkpXG4gICAgICByZXR1cm4gW11cbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IGNvY2lkLnNwbGl0KCcuJylbMF1cbiAgICBjb25zdCBjb2NpZFJlZ0V4cCA9IG5ldyBSZWdFeHAoJ14nICsgQ29DN1V0aWxpdGllcy5xdW90ZVJlZ0V4cChjb2NpZCkgKyAnJCcpXG4gICAgcmV0dXJuIENvQ0lELmZyb21Db0NJRFJlZ2V4QmVzdCh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nLCBlcmEsIGxhbmdGYWxsYmFjaywgc2hvd0xvYWRpbmcgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgYW4gYXJyYXkgb2YgZG9jdW1lbnRzIGFscmVhZHkgcHJvY2Vzc2VkIGJ5IGZpbHRlckFsbENvQ0lELCByZXR1cm5zIG9ubHkgdGhvc2UgdGhhdCBhcmUgdGhlIFwiYmVzdFwiIHZlcnNpb24gb2YgdGhlaXIgQ29DSURcbiAgICogQHBhcmFtIGRvY3VtZW50c1xuICAgKiBAcmV0dXJuc1xuICAgKi9cbiAgc3RhdGljIGZpbHRlckJlc3RDb0NJRCAoZG9jdW1lbnRzKSB7XG4gICAgY29uc3QgYmVzdE1hdGNoRG9jdW1lbnRzID0gbmV3IE1hcCgpXG4gICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jdW1lbnRzKSB7XG4gICAgICBjb25zdCBkb2NDb0NJRCA9IGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5pZFxuICAgICAgaWYgKGRvY0NvQ0lEKSB7XG4gICAgICAgIGNvbnN0IGN1cnJlbnREb2MgPSBiZXN0TWF0Y2hEb2N1bWVudHMuZ2V0KGRvY0NvQ0lEKVxuICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnREb2MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgYmVzdE1hdGNoRG9jdW1lbnRzLnNldChkb2NDb0NJRCwgZG9jKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyBQcmVmZXIgcGFjayA9PT0gJycgaWYgcG9zc2libGVcbiAgICAgICAgY29uc3QgZG9jUGFjayA9IChkb2MucGFjayA/PyAnJylcbiAgICAgICAgY29uc3QgZXhpc3RpbmdQYWNrID0gKGN1cnJlbnREb2M/LnBhY2sgPz8gJycpXG4gICAgICAgIGNvbnN0IHByZWZlcldvcmxkID0gZG9jUGFjayA9PT0gJycgfHwgZXhpc3RpbmdQYWNrICE9PSAnJ1xuICAgICAgICBpZiAoIXByZWZlcldvcmxkKSB7XG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFByZWZlciBoaWdoZXN0IHByaW9yaXR5XG4gICAgICAgIGxldCBkb2NQcmlvcml0eSA9IHBhcnNlSW50KGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5wcmlvcml0eSA/PyBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiwgMTApXG4gICAgICAgIGRvY1ByaW9yaXR5ID0gaXNOYU4oZG9jUHJpb3JpdHkpID8gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIgOiBkb2NQcmlvcml0eVxuICAgICAgICBsZXQgZXhpc3RpbmdQcmlvcml0eSA9IHBhcnNlSW50KGN1cnJlbnREb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ucHJpb3JpdHkgPz8gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIDEwKVxuICAgICAgICBleGlzdGluZ1ByaW9yaXR5ID0gaXNOYU4oZXhpc3RpbmdQcmlvcml0eSkgPyBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUiA6IGV4aXN0aW5nUHJpb3JpdHlcbiAgICAgICAgY29uc3QgcHJlZmVyUHJpb3JpdHkgPSBkb2NQcmlvcml0eSA+PSBleGlzdGluZ1ByaW9yaXR5XG4gICAgICAgIGlmICghcHJlZmVyUHJpb3JpdHkpIHtcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgYmVzdE1hdGNoRG9jdW1lbnRzLnNldChkb2NDb0NJRCwgZG9jKVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gWy4uLmJlc3RNYXRjaERvY3VtZW50cy52YWx1ZXMoKV1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb3IgYW4gYXJyYXkgb2YgZG9jdW1lbnRzLCByZXR1cm5zIGZpbHRlciBvdXQgZW4gZG9jdW1lbnRzIGlmIGEgdHJhbnNsYXRlZCBvbmUgZXhpc3RzIG1hdGNoaW5nIHRoZSBzYW1lIGVyYXNcbiAgICogQHBhcmFtIGRvY3VtZW50c1xuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbiBjYXNlIHRoZXJlIGlzIG5vIHRyYW5zbGF0aW9uXG4gICAqIEByZXR1cm5zXG4gICAqL1xuICBzdGF0aWMgZmlsdGVyQWxsQ29DSUQgKGRvY3VtZW50cywgbGFuZ0ZhbGxiYWNrKSB7XG4gICAgaWYgKCFsYW5nRmFsbGJhY2spIHtcbiAgICAgIHJldHVybiBkb2N1bWVudHNcbiAgICB9XG4gICAgY29uc3QgYmVzdE1hdGNoRG9jdW1lbnRzID0gbmV3IE1hcCgpXG4gICAgZm9yIChjb25zdCBkb2Mgb2YgZG9jdW1lbnRzKSB7XG4gICAgICBjb25zdCBkb2NDb0NJRCA9IGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5pZFxuICAgICAgaWYgKGRvY0NvQ0lEKSB7XG4gICAgICAgIGNvbnN0IGRvY0VyYXMgPSBPYmplY3QuZW50cmllcyhkb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8uZXJhcyA/PyB7fSkuZmlsdGVyKGUgPT4gZVsxXSkubWFwKGUgPT4gZVswXSkuc29ydCgpLmpvaW4oJy8nKVxuICAgICAgICBsZXQgZG9jUHJpb3JpdHkgPSBwYXJzZUludChkb2MuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ucHJpb3JpdHkgPz8gTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVIsIDEwKVxuICAgICAgICBkb2NQcmlvcml0eSA9IGlzTmFOKGRvY1ByaW9yaXR5KSA/IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSIDogZG9jUHJpb3JpdHlcbiAgICAgICAgY29uc3Qga2V5ID0gZG9jQ29DSUQgKyAnLycgKyBkb2NFcmFzICsgJy8nICsgKGlzTmFOKGRvY1ByaW9yaXR5KSA/IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSIDogZG9jUHJpb3JpdHkpXG5cbiAgICAgICAgY29uc3QgY3VycmVudERvYyA9IGJlc3RNYXRjaERvY3VtZW50cy5nZXQoa2V5KVxuICAgICAgICBpZiAodHlwZW9mIGN1cnJlbnREb2MgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgYmVzdE1hdGNoRG9jdW1lbnRzLnNldChrZXksIGRvYylcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZG9jTGFuZyA9IGRvYy5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpPy5sYW5nID8/ICdlbidcbiAgICAgICAgY29uc3QgZXhpc3RpbmdMYW5nID0gY3VycmVudERvYz8uZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ubGFuZyA/PyAnZW4nXG4gICAgICAgIGlmIChleGlzdGluZ0xhbmcgPT09ICdlbicgJiYgZXhpc3RpbmdMYW5nICE9PSBkb2NMYW5nKSB7XG4gICAgICAgICAgYmVzdE1hdGNoRG9jdW1lbnRzLnNldChrZXksIGRvYylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gWy4uLmJlc3RNYXRjaERvY3VtZW50cy52YWx1ZXMoKV1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgYSBsaXN0IG9mIGFsbCBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIENvQ0lEIHJlZ2V4LCBsYW5ndWFnZSwgYW5kIGVyYSBmcm9tIHRoZSB3b3JsZC5cbiAgICogVGhlIGRvY3VtZW50IGxpc3QgaXMgc29ydGVkIHdpdGggdGhlIGhpZ2hlc3QgcHJpb3JpdHkgZmlyc3QuXG4gICAqIEBwYXJhbSBjb2NpZFJlZ0V4cCByZWdleCB1c2VkIG9uIHRoZSBDb0NJRFxuICAgKiBAcGFyYW0gdHlwZSB0aGUgZmlyc3QgcGFydCBvZiB0aGUgd2FudGVkIENvQ0lELCBmb3IgZXhhbXBsZSAnaScsICdhJywgJ2plJ1xuICAgKiBAcGFyYW0gZXJhIHRoZSBlcmFzIHRvIG1hdGNoIGFnYWluc3QgKCdzdGFuZGFyZCcsICdtb2Rlcm5QdWxwJywgLi4uKSwgdHJ1ZSA9IHdvcmxkIGRlZmF1bHQsIGZhbHNlID0gbm8gZmlsdGVyXG4gICAqIEBwYXJhbSBsYW5nIHRoZSBsYW5ndWFnZSB0byBtYXRjaCBhZ2FpbnN0ICgnZW4nLCAnZXMnLCAuLi4pXG4gICAqIEBwYXJhbSBsYW5nRmFsbGJhY2sgc2hvdWxkIHRoZSBzeXN0ZW0gZmFsbCBiYWNrIHRvIGVuIGluY2FzZSB0aGVyZSBpcyBubyB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gcHJvZ3Jlc3NCYXIgSWYgZ3JlYXRlciB0aGFuIHplcm8gc2hvdyBwZXJjZW50YWdlXG4gICAqIEByZXR1cm5zIGFycmF5XG4gICAqL1xuICBzdGF0aWMgYXN5bmMgZG9jdW1lbnRzRnJvbVdvcmxkICh7IGNvY2lkUmVnRXhwLCB0eXBlLCBsYW5nID0gZ2FtZS5pMThuLmxhbmcsIGVyYSA9IGZhbHNlLCBsYW5nRmFsbGJhY2sgPSB0cnVlLCBwcm9ncmVzc0JhciA9IDAgfSA9IHt9KSB7XG4gICAgaWYgKCFjb2NpZFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIGlmIChlcmEgPT09IHRydWUpIHtcbiAgICAgIGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICB9XG5cbiAgICBpZiAocHJvZ3Jlc3NCYXIgPiAwKSB7XG4gICAgICBTY2VuZU5hdmlnYXRpb24uZGlzcGxheVByb2dyZXNzQmFyKHsgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVVAuUGFja2FnZXNMb2FkaW5nJyksIHBjdDogTWF0aC5mbG9vcigxMDAgLyBwcm9ncmVzc0JhcikgfSlcbiAgICB9XG5cbiAgICBjb25zdCBnYW1lUHJvcGVydHkgPSBDb0NJRC5nZXRHYW1lUHJvcGVydHkoYCR7dHlwZX0uLmApXG5cbiAgICBjb25zdCBjYW5kaWRhdGVEb2N1bWVudHMgPSBnYW1lW2dhbWVQcm9wZXJ0eV0/LmZpbHRlcigoZCkgPT4ge1xuICAgICAgY29uc3QgY29jaWRGbGFnID0gZC5nZXRGbGFnKCdDb0M3JywgJ2NvY2lkRmxhZycpXG4gICAgICBpZiAodHlwZW9mIGNvY2lkRmxhZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICB9XG4gICAgICBjb25zdCBlcmFzID0gKGNvY2lkRmxhZy5lcmFzID8/IFtdKVxuICAgICAgY29uc3QgbWF0Y2hpbmdFcmFzID0gKGVyYSA9PT0gZmFsc2UgfHwgT2JqZWN0LmVudHJpZXMoZXJhcykubGVuZ3RoID09PSAwIHx8IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZXJhcywgZXJhKSAmJiBlcmFzW2VyYV0pKVxuICAgICAgcmV0dXJuIGNvY2lkUmVnRXhwLnRlc3QoY29jaWRGbGFnLmlkKSAmJiBbbGFuZywgKGxhbmdGYWxsYmFjayA/ICdlbicgOiAnLScpXS5pbmNsdWRlcyhjb2NpZEZsYWcubGFuZykgJiYgbWF0Y2hpbmdFcmFzXG4gICAgfSlcblxuICAgIGlmIChjYW5kaWRhdGVEb2N1bWVudHMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbmRpZGF0ZURvY3VtZW50cy5zb3J0KENvQ0lELmNvbXBhcmVDb0NJRFByaW8pXG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBhbGwgZG9jdW1lbnRzIG1hdGNoaW5nIHRoZSBDb0NJRCByZWdleCwgbGFuZ3VhZ2UsIGFuZCBlcmEgZnJvbSB0aGUgY29tcGVuZGl1bXMuXG4gICAqIFRoZSBkb2N1bWVudCBsaXN0IGlzIHNvcnRlZCB3aXRoIHRoZSBoaWdoZXN0IHByaW9yaXR5IGZpcnN0LlxuICAgKiBAcGFyYW0gY29jaWRSZWdFeHAgcmVnZXggdXNlZCBvbiB0aGUgQ29DSURcbiAgICogQHBhcmFtIHR5cGUgdGhlIGZpcnN0IHBhcnQgb2YgdGhlIHdhbnRlZCBDb0NJRCwgZm9yIGV4YW1wbGUgJ2knLCAnYScsICdqZSdcbiAgICogQHBhcmFtIGVyYSB0aGUgZXJhcyB0byBtYXRjaCBhZ2FpbnN0ICgnc3RhbmRhcmQnLCAnbW9kZXJuUHVscCcsIC4uLiksIHRydWUgPSB3b3JsZCBkZWZhdWx0LCBmYWxzZSA9IG5vIGZpbHRlclxuICAgKiBAcGFyYW0gbGFuZyB0aGUgbGFuZ3VhZ2UgdG8gbWF0Y2ggYWdhaW5zdCAoJ2VuJywgJ2VzJywgLi4uKVxuICAgKiBAcGFyYW0gbGFuZ0ZhbGxiYWNrIHNob3VsZCB0aGUgc3lzdGVtIGZhbGwgYmFjayB0byBlbiBpbmNhc2UgdGhlcmUgaXMgbm8gdHJhbnNsYXRpb25cbiAgICogQHBhcmFtIHByb2dyZXNzQmFyIElmIGdyZWF0ZXIgdGhhbiB6ZXJvIHNob3cgcGVyY2VudGFnZVxuICAgKiBAcmV0dXJucyBhcnJheVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGRvY3VtZW50c0Zyb21Db21wZW5kaWEgKHsgY29jaWRSZWdFeHAsIHR5cGUsIGxhbmcgPSBnYW1lLmkxOG4ubGFuZywgZXJhID0gZmFsc2UsIGxhbmdGYWxsYmFjayA9IHRydWUsIHByb2dyZXNzQmFyID0gMCB9KSB7XG4gICAgaWYgKCFjb2NpZFJlZ0V4cCkge1xuICAgICAgcmV0dXJuIFtdXG4gICAgfVxuICAgIGlmIChsYW5nID09PSAnJykge1xuICAgICAgbGFuZyA9IGdhbWUuaTE4bi5sYW5nXG4gICAgfVxuICAgIGlmIChlcmEgPT09IHRydWUpIHtcbiAgICAgIGVyYSA9IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJylcbiAgICB9XG4gICAgY29uc3QgZXJhVGV4dCA9IENvQ0lELmVyYVRleHQoZXJhKVxuXG4gICAgY29uc3QgZG9jdW1lbnRUeXBlID0gQ29DSUQuZ2V0RG9jdW1lbnRUeXBlKHR5cGUpLnNjaGVtYS5uYW1lXG4gICAgY29uc3QgY2FuZGlkYXRlRG9jdW1lbnRzID0gW11cblxuICAgIGxldCBjb3VudCA9IDFcbiAgICBmb3IgKGNvbnN0IHBhY2sgb2YgZ2FtZS5wYWNrcykge1xuICAgICAgaWYgKHByb2dyZXNzQmFyID4gMCkge1xuICAgICAgICBTY2VuZU5hdmlnYXRpb24uZGlzcGxheVByb2dyZXNzQmFyKHsgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVVAuUGFja2FnZXNMb2FkaW5nJyksIHBjdDogTWF0aC5mbG9vcihjb3VudCAqIDEwMCAvIHByb2dyZXNzQmFyKSB9KVxuICAgICAgICBjb3VudCsrXG4gICAgICB9XG4gICAgICBpZiAocGFjay5kb2N1bWVudE5hbWUgPT09IGRvY3VtZW50VHlwZSkge1xuICAgICAgICBpZiAoIXBhY2suaW5kZXhlZCkge1xuICAgICAgICAgIGF3YWl0IHBhY2suZ2V0SW5kZXgoKVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZGV4SW5zdGFuY2VzID0gcGFjay5pbmRleC5maWx0ZXIoKGkpID0+IHtcbiAgICAgICAgICBjb25zdCBjb2NpZEZsYWcgPSBpLmZsYWdzPy5Db0M3Py5jb2NpZEZsYWdcbiAgICAgICAgICBpZiAodHlwZW9mIGNvY2lkRmxhZyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBlcmFzID0gKGNvY2lkRmxhZy5lcmFzID8/IFtdKVxuICAgICAgICAgIGNvbnN0IG1hdGNoaW5nRXJhcyA9IChlcmEgPT09IGZhbHNlIHx8IE9iamVjdC5lbnRyaWVzKGVyYXMpLmxlbmd0aCA9PT0gMCB8fCAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVyYXMsIGVyYSkgJiYgZXJhc1tlcmFdKSlcbiAgICAgICAgICByZXR1cm4gY29jaWRSZWdFeHAudGVzdChjb2NpZEZsYWcuaWQpICYmIFtsYW5nLCAobGFuZ0ZhbGxiYWNrID8gJ2VuJyA6ICctJyldLmluY2x1ZGVzKGNvY2lkRmxhZy5sYW5nKSAmJiBtYXRjaGluZ0VyYXNcbiAgICAgICAgfSlcbiAgICAgICAgZm9yIChjb25zdCBpbmRleCBvZiBpbmRleEluc3RhbmNlcykge1xuICAgICAgICAgIGNvbnN0IGRvY3VtZW50ID0gYXdhaXQgcGFjay5nZXREb2N1bWVudChpbmRleC5faWQpXG4gICAgICAgICAgaWYgKCFkb2N1bWVudCkge1xuICAgICAgICAgICAgY29uc3QgbXNnID0gZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuZG9jdW1lbnQtbm90LWZvdW5kJywge1xuICAgICAgICAgICAgICBjb2NpZDogY29jaWRSZWdFeHAsXG4gICAgICAgICAgICAgIGxhbmcsXG4gICAgICAgICAgICAgIGVyYTogZXJhVGV4dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IobXNnKVxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvQzcgfCcsIG1zZywgaW5kZXgpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYW5kaWRhdGVEb2N1bWVudHMucHVzaChkb2N1bWVudClcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNhbmRpZGF0ZURvY3VtZW50cy5zb3J0KENvQ0lELmNvbXBhcmVDb0NJRFByaW8pXG4gIH1cblxuICAvKipcbiAgICogU29ydCBhIGxpc3Qgb2YgZG9jdW1lbnQgb24gQ29DSUQgcHJpb3JpdHkgLSB0aGUgaGlnaGVzdCBmaXJzdC5cbiAgICogQGV4YW1wbGVcbiAgICogYUxpc3RPZkRvY3VtZW50cy5zb3J0KENvQ0lELmNvbXBhcmVDb0NJRFByaW8pXG4gICAqL1xuICBzdGF0aWMgY29tcGFyZUNvQ0lEUHJpbyAoYSwgYikge1xuICAgIHJldHVybiAoXG4gICAgICBiLmdldEZsYWcoJ0NvQzcnLCAnY29jaWRGbGFnJyk/LnByaW9yaXR5IC1cbiAgICAgIGEuZ2V0RmxhZygnQ29DNycsICdjb2NpZEZsYWcnKT8ucHJpb3JpdHlcbiAgICApXG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyB0aGUgZmlyc3QgcGFydCBvZiBhIENvQ0lEIHRvIHdoYXQgdGhvc2UgZG9jdW1lbnRzIGFyZSBjYWxsZWQgaW4gdGhlIGBnYW1lYCBvYmplY3QuXG4gICAqIEBwYXJhbSBjb2NpZCBhIHNpbmdsZSBjb2NpZFxuICAgKi9cbiAgc3RhdGljIGdldEdhbWVQcm9wZXJ0eSAoY29jaWQpIHtcbiAgICBjb25zdCB0eXBlID0gY29jaWQuc3BsaXQoJy4nKVswXVxuICAgIGNvbnN0IGdhbWVQcm9wZXJ0eSA9IENvQ0lELmdhbWVQcm9wZXJ0eUxvb2t1cFt0eXBlXVxuICAgIGlmICghZ2FtZVByb3BlcnR5KSB7XG4gICAgICB1aS5ub3RpZmljYXRpb25zLndhcm4oZ2FtZS5pMThuLmZvcm1hdCgnQ29DNy5Db0NJREZsYWcuZXJyb3IuaW5jb3JyZWN0LnR5cGUnKSlcbiAgICAgIGNvbnNvbGUubG9nKCdDb0M3IHwgJywgY29jaWQpXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoKVxuICAgIH1cbiAgICByZXR1cm4gZ2FtZVByb3BlcnR5XG4gIH1cblxuICBzdGF0aWMgZ2V0IGdhbWVQcm9wZXJ0eUxvb2t1cCAoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGE6ICdhY3RvcnMnLFxuICAgICAgYzogJ2NhcmRzJyxcbiAgICAgIGk6ICdpdGVtcycsXG4gICAgICBqZTogJ2pvdXJuYWwnLFxuICAgICAgbTogJ21hY3JvcycsXG4gICAgICBwOiAncGxheWxpc3RzJyxcbiAgICAgIHJ0OiAndGFibGVzJyxcbiAgICAgIHM6ICdzY2VuZXMnXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgdGhlIGZpcnN0IHBhcnQgb2YgYSBDb0NJRCB0byB3aGF0IHRob3NlIGRvY3VtZW50cyBhcmUgY2FsbGVkIGluIHRoZSBgZ2FtZWAgb2JqZWN0LlxuICAgKiBAcGFyYW0gY29jaWQgYSBzaW5nbGUgY29jaWRcbiAgICovXG4gIHN0YXRpYyBnZXREb2N1bWVudFR5cGUgKGNvY2lkKSB7XG4gICAgY29uc3QgdHlwZSA9IGNvY2lkLnNwbGl0KCcuJylbMF1cbiAgICBjb25zdCBkb2N1bWVudFR5cGUgPSBDb0NJRC5kb2N1bWVudE5hbWVMb29rdXBbdHlwZV1cbiAgICBpZiAoIWRvY3VtZW50VHlwZSkge1xuICAgICAgdWkubm90aWZpY2F0aW9ucy53YXJuKGdhbWUuaTE4bi5mb3JtYXQoJ0NvQzcuQ29DSURGbGFnLmVycm9yLmluY29ycmVjdC50eXBlJykpXG4gICAgICBjb25zb2xlLmxvZygnQ29DNyB8ICcsIGNvY2lkKVxuICAgICAgdGhyb3cgbmV3IEVycm9yKClcbiAgICB9XG4gICAgcmV0dXJuIGRvY3VtZW50VHlwZVxuICB9XG5cbiAgc3RhdGljIGdldCBkb2N1bWVudE5hbWVMb29rdXAgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhOiBBY3RvcixcbiAgICAgIGM6IENhcmQsXG4gICAgICBpOiBJdGVtLFxuICAgICAgamU6IEpvdXJuYWxFbnRyeSxcbiAgICAgIG06IE1hY3JvLFxuICAgICAgcDogUGxheWxpc3QsXG4gICAgICBydDogUm9sbFRhYmxlLFxuICAgICAgczogU2NlbmVcbiAgICB9XG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuaW1wb3J0IHsgY29uZmlndXJlRG9jdW1lbnRzIH0gZnJvbSAnLi4vc2NyaXB0cy9jb25maWd1cmUtZG9jdW1lbnRzLmpzJ1xuaW1wb3J0IHsgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMgfSBmcm9tICcuLi9zY3JpcHRzL2xvYWQtdGVtcGxhdGVzLmpzJ1xuaW1wb3J0IHsgcmVnaXN0ZXJTZXR0aW5ncyB9IGZyb20gJy4uL3NjcmlwdHMvcmVnaXN0ZXItc2V0dGluZ3MuanMnXG5pbXBvcnQgeyByZWdpc3RlclNoZWV0cyB9IGZyb20gJy4uL3NjcmlwdHMvcmVnaXN0ZXItc2hlZXRzLmpzJ1xuaW1wb3J0IHsgaGFuZGxlYmFyc0hlbHBlciB9IGZyb20gJy4uL3NjcmlwdHMvaGFuZGxlYmFycy1oZWxwZXIuanMnXG5pbXBvcnQgeyBjb21wZW5kaXVtRmlsdGVyIH0gZnJvbSAnLi4vc2NyaXB0cy9jb21wZW5kaXVtLWZpbHRlci5qcydcbmltcG9ydCB7IENvQ0lEIH0gZnJvbSAnLi4vc2NyaXB0cy9jb2MtaWQuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub25jZSgnaW5pdCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25maWd1cmVEb2N1bWVudHMoKVxuICAgIHByZWxvYWRIYW5kbGViYXJzVGVtcGxhdGVzKClcbiAgICByZWdpc3RlclNldHRpbmdzKClcbiAgICByZWdpc3RlclNoZWV0cygpXG4gICAgaGFuZGxlYmFyc0hlbHBlcigpXG4gICAgY29tcGVuZGl1bUZpbHRlcigpXG4gICAgQ29DSUQuaW5pdCgpXG4gICAgQ29DN0xpbmsuaW5pdCgpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgQ09ORklHICovXG5pbXBvcnQgeyBDb0NBY3RvciB9IGZyb20gJy4uL2FjdG9ycy9hY3Rvci5qcydcbmltcG9ydCB7IENvQzdCb29rIH0gZnJvbSAnLi4vaXRlbXMvYm9vay9kYXRhLmpzJ1xuaW1wb3J0IHsgQ29DN0l0ZW0gfSBmcm9tICcuLi9pdGVtcy9pdGVtLmpzJ1xuaW1wb3J0IHsgQ29DN1NwZWxsIH0gZnJvbSAnLi4vaXRlbXMvc3BlbGwvZGF0YS5qcydcbmltcG9ydCB7IENvQzdDaGFzZSB9IGZyb20gJy4uL2l0ZW1zL2NoYXNlL2RhdGEuanMnXG5pbXBvcnQgQ29DN0FjdGl2ZUVmZmVjdCBmcm9tICcuLi9hY3RpdmUtZWZmZWN0LmpzJ1xuaW1wb3J0IHsgQ29DN1NraWxsIH0gZnJvbSAnLi4vaXRlbXMvc2tpbGwvZGF0YS5qcydcbmltcG9ydCB7IENvQzdWZWhpY2xlIH0gZnJvbSAnLi4vYWN0b3JzL3ZlaGljbGUvZGF0YS5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGNvbmZpZ3VyZURvY3VtZW50cyAoKSB7XG4gIENPTkZJRy5BY3RpdmVFZmZlY3QuZG9jdW1lbnRDbGFzcyA9IENvQzdBY3RpdmVFZmZlY3RcbiAgQ09ORklHLkFjdG9yLmRvY3VtZW50Q2xhc3MgPSBDb0NBY3RvclxuICBDT05GSUcuQWN0b3IuZG9jdW1lbnRDbGFzc2VzID0ge1xuICAgIHZlaGljbGU6IENvQzdWZWhpY2xlXG4gIH1cbiAgQ09ORklHLkl0ZW0uZG9jdW1lbnRDbGFzcyA9IENvQzdJdGVtXG4gIENPTkZJRy5JdGVtLmRvY3VtZW50Q2xhc3NlcyA9IHtcbiAgICBib29rOiBDb0M3Qm9vayxcbiAgICBzcGVsbDogQ29DN1NwZWxsLFxuICAgIGNoYXNlOiBDb0M3Q2hhc2UsXG4gICAgc2tpbGw6IENvQzdTa2lsbFxuICB9XG59XG4iLCIvKiBnbG9iYWwgbG9hZFRlbXBsYXRlcyAqL1xuXG4vKipcbiAqIERlZmluZSBhIHNldCBvZiB0ZW1wbGF0ZSBwYXRocyB0byBwcmUtbG9hZFxuICogUHJlLWxvYWRlZCB0ZW1wbGF0ZXMgYXJlIGNvbXBpbGVkIGFuZCBjYWNoZWQgZm9yIGZhc3QgYWNjZXNzIHdoZW4gcmVuZGVyaW5nXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICovXG5leHBvcnQgY29uc3QgcHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIC8qKiBEZWZpbmUgdGVtcGxhdGUgcGF0aHMgdG8gbG9hZCAqL1xuICBjb25zdCB0ZW1wbGF0ZVBhdGhzID0gW1xuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9ucGMtc2tpbGxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9ucGMtY29tYmF0Lmh0bWwnLFxuXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWludmVudG9yeS5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvYWN0b3ItaW52ZW50b3J5LWl0ZW1zLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1iYWNrZ3JvdW5kLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2NvbW1vbi9hY3RpdmUtZWZmZWN0cy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9hY3Rvci1teXRob3MtZW5vdW50ZXJzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLWtlZXBlci1teXRob3MtZW5vdW50ZXJzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL3BhcnRzL2FjdG9yLXNraWxscy12Mi5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvY2hhcmFjdGVyLWRldmVsb3BtZW50LXYyLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9kZXZlbG9wbWVudC1jb250cm9scy5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvcGFydHMvdml0YWxzLmh0bWwnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FjdG9ycy9wYXJ0cy9jb21iYXQuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYWN0b3JzL2NoYXJhY3Rlci1zaGVldC12Mi5odG1sJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hY3RvcnMvY2hhcmFjdGVyL3N1bW1hcnkuaHRtbCcsXG5cbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9pdGVtcy9ib29rL2RldGFpbHMuaHRtbCcsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvaXRlbXMvc3BlbGwvZGV0YWlscy5odG1sJyxcblxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9pbnRyb2R1Y3Rpb24uaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvY29uZmlndXJhdGlvbi5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZWxlY3Qtc2V0dXAuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2VsZWN0LWFyY2hldHlwZS5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZWxlY3Qtb2NjdXBhdGlvbi5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtY2hhcmFjdGVyaXN0aWNzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1hdHRyaWJ1dGVzLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3ZpZXctYXR0cmlidXRlcy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9zZXQtaW52ZXN0aWdhdG9yLmhicycsXG4gICAgJ3N5c3RlbXMvQ29DNy90ZW1wbGF0ZXMvYXBwcy9pbnZlc3RpZ2F0b3Itd2l6YXJkL3NldC1vY2N1cGF0aW9uLXNraWxscy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC90b2dnbGUtc2tpbGwuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvc2V0LWFyY2hldHlwZS1za2lsbHMuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvcG9pbnRzLXNraWxscy5oYnMnLFxuICAgICdzeXN0ZW1zL0NvQzcvdGVtcGxhdGVzL2FwcHMvaW52ZXN0aWdhdG9yLXdpemFyZC9iYWNrc3RvcnkuaGJzJyxcbiAgICAnc3lzdGVtcy9Db0M3L3RlbXBsYXRlcy9hcHBzL2ludmVzdGlnYXRvci13aXphcmQvY3JlYXRlLmhicydcbiAgXVxuXG4gIC8qKiBMb2FkIHRoZSB0ZW1wbGF0ZSBwYXJ0cyAqL1xuICByZXR1cm4gbG9hZFRlbXBsYXRlcyh0ZW1wbGF0ZVBhdGhzKVxufVxuIiwiLyogZ2xvYmFsICQsIENPTkZJRywgQ09OU1QsIGdhbWUsIHVpICovXG5pbXBvcnQgeyBDT0M3IH0gZnJvbSAnLi4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgQ29DN0RlY2FkZXJEaWUgfSBmcm9tICcuLi9hcHBzL2RlY2FkZXItZGllLmpzJ1xuaW1wb3J0IHsgQ29DN0RlY2FkZXJEaWVPdGhlciB9IGZyb20gJy4uL2FwcHMvZGVjYWRlci1kaWUtb3RoZXIuanMnXG5pbXBvcnQgeyBDb0M3R2FtZVJ1bGVTZXR0aW5ncyB9IGZyb20gJy4vZ2FtZS1ydWxlcy5qcydcbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2V0dGluZ3MgKCkge1xuICAvKipcbiAgICogUnVsZXNcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXJNZW51KCdDb0M3JywgJ2dhbWVSdWxlcycsIHtcbiAgICBuYW1lOiAnQ29DNy5TZXR0aW5ncy5SdWxlcy5OYW1lJyxcbiAgICBsYWJlbDogJ0NvQzcuU2V0dGluZ3MuUnVsZXMuTGFiZWwnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLlJ1bGVzLkhpbnQnLFxuICAgIGljb246ICdmYXMgZmEtYm9vaycsXG4gICAgdHlwZTogQ29DN0dhbWVSdWxlU2V0dGluZ3MsXG4gICAgcmVzdHJpY3RlZDogdHJ1ZVxuICB9KVxuICBDb0M3R2FtZVJ1bGVTZXR0aW5ncy5yZWdpc3RlclNldHRpbmdzKClcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3VzZUNvbnRleHRNZW51cycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVXNlQ29udGV4dE1lbnVzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuVXNlQ29udGV4dE1lbnVzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcblxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rob2xlVXBsb2FkRGlyZWN0b3J5Jywge1xuICAgIG5hbWU6ICdDb0M3LlNldHRpbmdzLkRob2xlVXBsb2FkLkRpcmVjdG9yeS5OYW1lJyxcbiAgICBoaW50OiAnQ29DNy5TZXR0aW5ncy5EaG9sZVVwbG9hZC5EaXJlY3RvcnkuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIHR5cGU6IENvQzdEaXJlY3RvcnlQaWNrZXIuRGVmYXVsdERpcmVjdG9yeSxcbiAgICBkZWZhdWx0OiAnW2RhdGFdIHdvcmxkcy8nICsgZ2FtZS53b3JsZC5pZCArICcvZGhvbGUtaW1hZ2VzJ1xuICB9KVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnd29ybGRFcmEnLCB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuV29ybGRFcmEuTmFtZScsXG4gICAgaGludDogJ0NvQzcuU2V0dGluZ3MuV29ybGRFcmEuSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdzdGFuZGFyZCcsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IENPQzcuZXJhcyxcbiAgICBvbkNoYW5nZTogKCkgPT4ge1xuICAgICAgdWkucGxheWVycy5yZW5kZXIodHJ1ZSlcbiAgICB9XG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkcm9wQ29DSUQnLCB7XG4gICAgbmFtZTogJ0NvQzcuU2V0dGluZ3MuRHJvcENvQ0lELk5hbWUnLFxuICAgIGhpbnQ6ICdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogJycsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgICcnOiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuUHJvbXB0JyxcbiAgICAgIFk6ICdDb0M3LlNldHRpbmdzLkRyb3BDb0NJRC5Vc2VDb0NJRCcsXG4gICAgICBOOiAnQ29DNy5TZXR0aW5ncy5Ecm9wQ29DSUQuSWdub3JlQ29DSUQnXG4gICAgfVxuICB9KVxuXG4gIC8qKlxuICAgKiBJbml0aWF0aXZlXG4gICAqL1xuICAvKiogU2V0IGRpc3BsYXlpbmcgZGljZXMgZm9yIGluaXQgcm9sbCAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlJbml0RGljZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLmRpc3BsYXlJbml0RGljZXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdERpY2VzSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogU2V0IGRpc3BsYXlpbmcgZGljZXMgZm9yIGluaXQgcm9sbCAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlJbml0QXNUZXh0Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5kaXNwbGF5SW5pdEFzVGV4dCcsXG4gICAgaGludDogJ1NFVFRJTkdTLmRpc3BsYXlJbml0QXNUZXh0SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuXG4gIC8qKlxuICAgKiBSb2xsIGN1c3RvbWlzYWlvbnNcbiAgICovXG4gIC8qKiBTdGFuZGJ5IHJvbGxzIG1hZGUgYnkgR00gZnJvbSBwbGF5ZXIgc2hlZXQgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzdGFuYnlHTVJvbGxzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5TdGFuYnlHTVJvbGxzJyxcbiAgICBoaW50OiAnU0VUVElOR1MuU3RhbmJ5R01Sb2xsc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiB0cnVlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIEFsbG93IHVzYWdlIG9mIGEgZmxhdCBkaWNlIG1vZGlmaWVyICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYWxsb3dGbGF0RGljZU1vZGlmaWVyJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5BbGxvd0ZsYXREaWNlTW9kaWZpZXInLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5BbGxvd0ZsYXREaWNlTW9kaWZpZXJIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICAvKiogQWxsb3cgdXNhZ2Ugb2YgYSBmbGF0IHRocmVzaG9sZCBtb2RpZmllciAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5BbGxvd0ZsYXRUaHJlc2hvbGRNb2RpZmllcicsXG4gICAgaGludDogJ1NFVFRJTkdTLkFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkZWZhdWx0Q2hlY2tEaWZmaWN1bHR5Jywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EZWZhdWx0RGlmZmljdWx0eScsXG4gICAgaGludDogJ1NFVFRJTkdTLkRlZmF1bHREaWZmaWN1bHR5SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdyZWd1bGFyJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczoge1xuICAgICAgcmVndWxhcjogJ1NFVFRJTkdTLkNoZWNrRGlmZmljdWx0eVJlZ3VsYXInLFxuICAgICAgdW5rbm93bjogJ1NFVFRJTkdTLkNoZWNrRGlmZmljdWx0eVVua25vd24nXG4gICAgfVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NlbGZSb2xsV2hpc3BlclRhcmdldCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU2VsZlJvbGxXaGlzcGVyVGFyZ2V0JyxcbiAgICBoaW50OiAnU0VUVElOR1MuU2VsZlJvbGxXaGlzcGVyVGFyZ2V0SGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdldmVyeW9uZScsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHtcbiAgICAgIG5vYm9keTogJ1NFVFRJTkdTLkRvTm90QWR2aXNlJyxcbiAgICAgIG93bmVyczogJ1NFVFRJTkdTLkFkdmlzZU93bmVyc09ubHknLFxuICAgICAgZXZlcnlvbmU6ICdTRVRUSU5HUy5BZHZpc2VBbGxQbGF5ZXInXG4gICAgfVxuICB9KVxuXG4gIC8qKlxuICAgKiBDaGF0IENhcmRzXG4gICAqL1xuICAvKiogVHJ1c3RlZCBwbGF5ZXJzIHdpbGwgYmUgYWxsb3dlZCB0byBtb2RpZnkgY2hhdCBjYXJkcyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RydXN0ZWRDYW5Nb2RmeUNoYXRDYXJkJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5UcnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLlRydXN0ZWRDYW5Nb2RmeUNoYXRDYXJkSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFRydXN0ZWQgcGxheWVycyB3aWxsIGJlIGFsbG93ZWQgdG8gc2VlIGNoYXQgY2FyZHMgcHJpdmF0ZSBzZWN0aW9ucyAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3RydXN0ZWRDYW5TZWVDaGF0Q2FyZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuVHJ1c3RlZENhblNlZUNoYXRDYXJkJyxcbiAgICBoaW50OiAnU0VUVElOR1MuVHJ1c3RlZENhblNlZUNoYXRDYXJkSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFNldCB0aGUgbmVlZCB0byBkaXNwbGF5IGFjdG9yIGltYWdlIG9uIGNoYXQgY2FyZHMgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdkaXNwbGF5QWN0b3JPbkNhcmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3BsYXlBY3Rvck9uQ2FyZCcsXG4gICAgaGludDogJ1NFVFRJTkdTLkRpc3BsYXlBY3Rvck9uQ2FyZEhpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheUNoZWNrU3VjY2Vzc0xldmVsJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5EaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwnLFxuICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcGxheVJlc3VsdFR5cGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3BsYXlSZXN1bHRUeXBlJyxcbiAgICBzY29wZTogJ2NsaWVudCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgLyoqIFNldCB0aGUgdXNlIG9mIHRva2VuIGluc3RlYWQgb2YgcG9ydHJhaXRzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAndXNlVG9rZW4nLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlVzZVRva2VuJyxcbiAgICBoaW50OiAnU0VUVElOR1MuVXNlVG9rZW5IaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuXG4gIC8qKlxuICAgKiBTY2VuZSBTZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdlbmFibGVTdGF0dXNJY29ucycsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRW5hYmxlU3RhdHVzSWNvbnMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5FbmFibGVTdGF0dXNJY29uc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IHRydWVcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdncmlkU3BhY2VzJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5SZXN0cmljdEdyaWRTcGFjZXMnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5SZXN0cmljdEdyaWRTcGFjZXNIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3RhbmNlRWxldmF0aW9uJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5DaGVja0VsZXZhdGlvbicsXG4gICAgaGludDogJ1NFVFRJTkdTLkNoZWNrRWxldmF0aW9uSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IHRydWUsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3RhbmNlVGhlYXRyZU9mVGhlTWluZCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuU2NlbmVEaXN0YW5jZU5vdENhbGN1YWx0ZWROb0Vycm9yJyxcbiAgICBoaW50OiAnU0VUVElOR1MuU2NlbmVEaXN0YW5jZU5vdENhbGN1YWx0ZWROb0Vycm9ySGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogR2FtZSBBcnR3b3JrIFNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk92ZXJyaWRlR2FtZUFydHdvcmsnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5PdmVycmlkZUdhbWVBcnR3b3JrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlR2FtZUFydHdvcmsnKSkge1xuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRQYXVzZUltYWdlJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRQYXVzZUltYWdlSGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL3RpbWUtdHJhcC5zdmcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFBhdXNlVGV4dCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnRQYXVzZVRleHQnLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydFBhdXNlVGV4dEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnVGhlIEJsaW5kIElkaW90IEdvZCBpcyBkcmVhbWluZy4uLicsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICB9XG5cbiAgLyoqXG4gICAqIFNoZWV0IHNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3BsYXlQbGF5ZXJOYW1lT25TaGVldCcsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuZGlzcGxheVBsYXllck5hbWVPblNoZWV0JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Rvb2xUaXBEZWxheScsIHtcbiAgICBuYW1lOiAnQ29DNy50b29sVGlwRGVsYXknLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAyMDAwLFxuICAgIHR5cGU6IE51bWJlclxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dJY29uc09ubHknLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLnNob3dJY29uc09ubHknLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIC8qKiBBbGxvdyBwbGF5ZXIgdG8gdW5sb2NrIHRoZSBzaGVldCBvdXRzaWRlIG9mIGNyZWF0aW9uIG1vZGUgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdwbGF5ZXJVbmxvY2tTaGVldE1vZGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlBsYXllclVubG9ja1NoZWV0TW9kZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdhbHdheXMnLFxuICAgIHR5cGU6IFN0cmluZyxcbiAgICBjaG9pY2VzOiB7XG4gICAgICBhbHdheXM6ICdTRVRUSU5HUy5BbHdheXNFZGl0YWJsZScsXG4gICAgICBjcmVhdGlvbjogJ1NFVFRJTkdTLkNyZWF0aW9uTW9kZU9ubHknLFxuICAgICAgbmV2ZXI6ICdTRVRUSU5HUy5OZXZlckVkaXRhYmxlJ1xuICAgIH1cbiAgfSlcbiAgLyoqIEFsbG93IHBsYXllciB0byBtb2RpZnkgc3RhdHVzICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc3RhdHVzUGxheWVyRWRpdGFibGUnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlN0YXR1c1BsYXllckVkaXRhYmxlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuU3RhdHVzUGxheWVyRWRpdGFibGVIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnb25lQmxvY2tCYWNrc3RvcnknLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLk9uZUJsb2NrQmFja1N0b3J5JyxcbiAgICBoaW50OiAnU0VUVElOR1MuT25lQmxvY2tCYWNrU3RvcnlIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5PdmVycmlkZVNoZWV0QXJ0d29yaycsXG4gICAgaGludDogJ1NFVFRJTkdTLk92ZXJyaWRlU2hlZXRBcnR3b3JrSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcbiAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ292ZXJyaWRlU2hlZXRBcnR3b3JrJykpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydFdvcmtTaGVldEJhY2tncm91bmQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZEhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiBcInVybCgnLi9hc3NldHMvaW1hZ2VzL2JhY2tncm91bmQud2VicCcpIDQgcmVwZWF0XCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya1NoZWV0QmFja2dyb3VuZFR5cGUnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiAnc2xpY2UnLFxuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgY2hvaWNlczoge1xuICAgICAgICBzbGljZTogJ1NFVFRJTkdTLkJhY2tncm91bmRTbGljZScsXG4gICAgICAgIGF1dG86ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQXV0bycsXG4gICAgICAgIGNvbnRhaW46ICdTRVRUSU5HUy5CYWNrZ3JvdW5kQ29udGFpbicsXG4gICAgICAgIGNvdmVyOiAnU0VUVElOR1MuQmFja2dyb3VuZENvdmVyJ1xuICAgICAgfVxuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0V29ya090aGVyU2hlZXRCYWNrZ3JvdW5kJyxcbiAgICAgIGhpbnQ6ICdTRVRUSU5HUy5BcnRXb3JrT3RoZXJTaGVldEJhY2tncm91bmRIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoICcuL2Fzc2V0cy9pbWFnZXMvYmFja2dyb3VuZC53ZWJwJylcIixcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrU2hlZXRJbWFnZScsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrU2hlZXRJbWFnZScsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya1NoZWV0SW1hZ2VIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogXCJ1cmwoJy4vYXNzZXRzL2ltYWdlcy90ZW50YWNsZXMud2VicCcpXCIsXG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya0Zyb250Q29sb3InLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya0Zyb250Q29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtGcm9udENvbG9ySGludCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICdyZ2JhKDQzLDU1LDgzLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrQmFja2dyb3VuZENvbG9yJywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtCYWNrZ3JvdW5kQ29sb3InLFxuICAgICAgaGludDogJ1NFVFRJTkdTLkFydHdvcmtCYWNrZ3JvdW5kQ29sb3JIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3JnYmEoMTAzLDExLDExLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrSW50ZXJhY3RpdmVDb2xvcicsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0ludGVyYWN0aXZlQ29sb3JIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogJ3JnYmEoMTAzLDExLDExLDEpJyxcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH0pXG4gICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdhcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcsIHtcbiAgICAgIG5hbWU6ICdTRVRUSU5HUy5BcnR3b3JrRml4ZWRTa2lsbExlbmd0aCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuQXJ0d29ya0ZpeGVkU2tpbGxMZW5ndGhIaW50JyxcbiAgICAgIHNjb3BlOiAnd29ybGQnLFxuICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgZGVmYXVsdDogdHJ1ZSxcbiAgICAgIHR5cGU6IEJvb2xlYW5cbiAgICB9KVxuICAgIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYXJ0d29ya01haW5Gb250Jywge1xuICAgICAgbmFtZTogJ1NFVFRJTkdTLkFydHdvcmtNYWluRm9udCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udEJvbGQnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250Qm9sZCcsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6ICcnLFxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSlcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2FydHdvcmtNYWluRm9udFNpemUnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuQXJ0d29ya01haW5Gb250U2l6ZScsXG4gICAgICBzY29wZTogJ3dvcmxkJyxcbiAgICAgIGNvbmZpZzogdHJ1ZSxcbiAgICAgIGRlZmF1bHQ6IDE2LFxuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgb25DaGFuZ2U6IHNpemUgPT4gX3NldFJvb3RGb250U2l6ZShzaXplKVxuICAgIH0pXG5cbiAgICBmdW5jdGlvbiBfc2V0Um9vdEZvbnRTaXplIChzaXplKSB7XG4gICAgICAkKCc6cm9vdCcpLmNzcygnZm9udC1zaXplJywgc2l6ZSlcbiAgICAgIHVpLnNpZGViYXIucmVuZGVyKHRydWUpXG4gICAgICBmb3IgKGNvbnN0IFssIHddIG9mIE9iamVjdC5lbnRyaWVzKHVpLndpbmRvd3MpKSB7XG4gICAgICAgIHcucmVuZGVyKHRydWUpXG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdlYXBvbnNcbiAgICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGlzcmVnYXJkVXNlUGVyUm91bmQnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3JlZ2FyZFVzZVBlclJvdW5kJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGlzcmVnYXJkVXNlUGVyUm91bmRIaW50JyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IHRydWUsXG4gICAgZGVmYXVsdDogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhblxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2Rpc3JlZ2FyZEFtbW8nLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLkRpc3JlZ2FyZEFtbW8nLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5EaXNyZWdhcmRBbW1vSGludCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW5cbiAgfSlcblxuICAvKipcbiAgICogQ2hhc2VzXG4gICAqL1xuICAvLyBNT1ZFRCBUTyBDSEFTU0UgSU5ESVZJRFVBTCBTRVRUSU5HXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnY2hhc2VTaG93VG9rZW5Nb3ZlbWVudCcsIHtcbiAgLy8gICBuYW1lOiAnU0VUVElOR1MuQ2hhc2VTaG93VG9rZW5Nb3ZlbWVudCcsXG4gIC8vICAgaGludDogJ1NFVFRJTkdTLkNoYXNlU2hvd1Rva2VuTW92ZW1lbnRIaW50JyxcbiAgLy8gICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gICBjb25maWc6IHRydWUsXG4gIC8vICAgZGVmYXVsdDogdHJ1ZSxcbiAgLy8gICB0eXBlOiBCb29sZWFuXG4gIC8vIH0pXG5cbiAgLyoqXG4gICAqIERpY2UgU28gTmljZVxuICAgKi9cbiAgaWYgKGdhbWUubW9kdWxlcy5nZXQoJ2RpY2Utc28tbmljZScpPy5hY3RpdmUpIHtcbiAgICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5bmNEaWNlM2QnLCB7XG4gICAgICBuYW1lOiAnU0VUVElOR1MuU3luY0RpY2UzRCcsXG4gICAgICBoaW50OiAnU0VUVElOR1MuU3luY0RpY2UzREhpbnQnLFxuICAgICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgICBjb25maWc6IHRydWUsXG4gICAgICBkZWZhdWx0OiB0cnVlLFxuICAgICAgdHlwZTogQm9vbGVhblxuICAgIH0pXG4gICAgY29uc3QgW3ZlcnNpb25dID0gZ2FtZS5tb2R1bGVzLmdldCgnZGljZS1zby1uaWNlJyk/LnZlcnNpb24uc3BsaXQoJy4nKVxuICAgIGlmICghaXNOYU4oTnVtYmVyKHZlcnNpb24pKSAmJiBOdW1iZXIodmVyc2lvbikgPj0gMykge1xuICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0ZW5EaWVCb251cycsIHtcbiAgICAgICAgbmFtZTogJ1NFVFRJTkdTLlRlbkRpZUJvbnVzJyxcbiAgICAgICAgaGludDogJ1NFVFRJTkdTLlRlbkRpZUJvbnVzSGludCcsXG4gICAgICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnYnJvbnplJyxcbiAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICB9KVxuICAgICAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd0ZW5EaWVQZW5hbHR5Jywge1xuICAgICAgICBuYW1lOiAnU0VUVElOR1MuVGVuRGllUGVuYWx0eScsXG4gICAgICAgIGhpbnQ6ICdTRVRUSU5HUy5UZW5EaWVQZW5hbHR5SGludCcsXG4gICAgICAgIHNjb3BlOiAnY2xpZW50JyxcbiAgICAgICAgY29uZmlnOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnYmxvb2Rtb29uJyxcbiAgICAgICAgdHlwZTogU3RyaW5nXG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEZXZlbG9wZXIgYW5kIGRlYnVnIHNldHRpbmdzXG4gICAqL1xuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2RlYnVnbW9kZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuRGVidWdNb2RlJyxcbiAgICBoaW50OiAnU0VUVElOR1MuRGVidWdNb2RlSGludCcsXG4gICAgc2NvcGU6ICdjbGllbnQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZXhwZXJpbWVudGFsRmVhdHVyZXMnLCB7XG4gICAgbmFtZTogJ1NFVFRJTkdTLlNob3dFeHBlcmltZW50YWxGZWF0dXJlcycsXG4gICAgaGludDogJ1NFVFRJTkdTLlNob3dFeHBlcmltZW50YWxGZWF0dXJlc0hpbnQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIC8qKlxuICAgKiBPdGhlciBzZXR0aW5nc1xuICAgKi9cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdoaWRkZW5kZXZtZW51Jywge1xuICAgIG5hbWU6ICdIaWRkZW4gZGV2IG1lbnUnLFxuICAgIGhpbnQ6ICdVc2UgYXQgeW91ciBvd24gcmlzaycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnZGV2ZWxvcG1lbnRFbmFibGVkJywge1xuICAgIG5hbWU6ICdEZXYgcGhhc2VkIGFsbG93ZWQnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogQm9vbGVhbixcbiAgICBkZWZhdWx0OiBmYWxzZVxuICB9KVxuICAvKiogRmVhdDogd2VsY29tZSBtZXNzYWdlICovXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2hvd1dlbGNvbWVNZXNzYWdlJywge1xuICAgIG5hbWU6ICdTRVRUSU5HUy5zaG93V2VsY29tZU1lc3NhZ2UnLFxuICAgIGhpbnQ6ICdTRVRUSU5HUy5zaG93V2VsY29tZU1lc3NhZ2UnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDogdHJ1ZSxcbiAgICB0eXBlOiBCb29sZWFuXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcsIHtcbiAgICBuYW1lOiAnQ2hhciBjcmVhdGlvbiBhbGxvd2VkJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogZmFsc2VcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdzeXN0ZW1VcGRhdGVWZXJzaW9uJywge1xuICAgIG5hbWU6ICdTeXN0ZW0gdXBkYXRlIHZlcnNpb24nLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGRlZmF1bHQ6ICcwJ1xuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3N5c3RlbVVwZGF0ZWRNb2R1bGVWZXJzaW9uJywge1xuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgZGVmYXVsdDoge31cbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICd4cEVuYWJsZWQnLCB7XG4gICAgbmFtZTogJ0VuYWJsZSBYUCBnYWluJyxcbiAgICBzY29wZTogJ3dvcmxkJyxcbiAgICBjb25maWc6IGZhbHNlLFxuICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgZGVmYXVsdDogdHJ1ZVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3Nob3dJbnN0cnVjdGlvbnMnLCB7XG4gICAgbmFtZTogJ1Nob3cgY2hhbmdlbG9nL2luc3RydWN0aW9ucycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJzAnXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkU2V0dXAnLCB7XG4gICAgbmFtZTogJ0ZvcmNlIHNwZWNpZmljIHNldHVwIENvQyBJRCBmb3IgSW52ZXN0aWdhdG9yIFdpemFyZCcsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgZGVmYXVsdDogJydcbiAgfSlcbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdJbnZlc3RpZ2F0b3JXaXphcmRRdWFudGl0eScsIHtcbiAgICBuYW1lOiAnTnVtYmVyIG9mIGludmVzdGlnYXRvcnMgYSBzaW5nbGUgdXNlciB3aXRob3V0IGNyZWF0ZSBhY3RvciByaWdodHMgY2FuIG93bicsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgZGVmYXVsdDogMFxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZE93bmVyc2hpcCcsIHtcbiAgICBuYW1lOiAnRGVmYXVsdCBwZXJtaXNzaW9ucyBmb3Igbm9uIG93bmVyIHBsYXllcnMnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogZmFsc2UsXG4gICAgdHlwZTogTnVtYmVyLFxuICAgIGRlZmF1bHQ6IENPTlNULkRPQ1VNRU5UX09XTkVSU0hJUF9MRVZFTFMuTk9ORVxuICB9KVxuICBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ0ludmVzdGlnYXRvcldpemFyZFJlcm9sbHMnLCB7XG4gICAgbmFtZTogJ0FsbG93IHBsYXllcnMgdG8gcmVyb2xsIGNoYXJhY3RlcmlzdGljcycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUG9pbnRCdXknLCB7XG4gICAgbmFtZTogJ0ZvcmNlIHBvaW50IGJ1eSBpbnN0ZWFkIG9mIHNldHVwIGNob2ljZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBCb29sZWFuLFxuICAgIGRlZmF1bHQ6IGZhbHNlXG4gIH0pXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnSW52ZXN0aWdhdG9yV2l6YXJkUXVpY2tGaXJlJywge1xuICAgIG5hbWU6ICdRdWljayBmaXJlIHNldHVwIHZhbHVlcycsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiBmYWxzZSxcbiAgICB0eXBlOiBBcnJheSxcbiAgICBkZWZhdWx0OiBbXVxuICB9KVxuICAvKiogU2V0IGFuIGluaXRpYXRpdmUgZm9ybXVsYSBmb3IgdGhlIHN5c3RlbSAqL1xuICBDT05GSUcuQ29tYmF0LmluaXRpYXRpdmUgPSB7XG4gICAgZm9ybXVsYTogJ0BjaGFyYWN0ZXJpc3RpY3MuZGV4LnZhbHVlJyxcbiAgICBkZWNpbWFsczogNFxuICB9XG4gIENPTkZJRy5kZWJ1Zy5ob29rcyA9ICEhZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnZGVidWdtb2RlJylcbiAgQ09ORklHLkRpY2UudGVybXMudCA9IENvQzdEZWNhZGVyRGllXG4gIENPTkZJRy5EaWNlLnRlcm1zLm8gPSBDb0M3RGVjYWRlckRpZU90aGVyXG59XG4iLCIvKiBnbG9iYWwgQWN0b3JzLCBBY3RvclNoZWV0LCBJdGVtcywgSXRlbVNoZWV0LCBKb3VybmFsLCBKb3VybmFsU2hlZXQsIE1hY3JvQ29uZmlnLCBNYWNyb3MsIFBsYXlsaXN0Q29uZmlnLCBQbGF5bGlzdHMsIFJvbGxUYWJsZXMsIFJvbGxUYWJsZUNvbmZpZywgU2NlbmVzLCBTY2VuZUNvbmZpZyAqL1xuaW1wb3J0IHsgQ29DN0FyY2hldHlwZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2FyY2hldHlwZS5qcydcbmltcG9ydCB7IENvQzdCb29rU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9ib29rL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXJhY3RlclNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy9jaGFyYWN0ZXIuanMnXG5pbXBvcnQgeyBDb0M3Q29udGFpbmVyU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL2NvbnRhaW5lci5qcydcbmltcG9ydCB7IENvQzdDaGFzZVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvY2hhc2Uvc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q3JlYXR1cmVTaGVldCB9IGZyb20gJy4uL2FjdG9ycy9zaGVldHMvY3JlYXR1cmUtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL2l0ZW0tc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3SXRlbVNoZWV0VjIgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvaXRlbS1zaGVldFYyLmpzJ1xuaW1wb3J0IHsgQ29DN0pvdXJuYWxTaGVldCB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LWpvdXJuYWwtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3TWFjcm9Db25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1tYWNyby1jb25maWcuanMnXG5pbXBvcnQgeyBDb0M3TlBDU2hlZXQgfSBmcm9tICcuLi9hY3RvcnMvc2hlZXRzL25wYy1zaGVldC5qcydcbmltcG9ydCB7IENvQzdPY2N1cGF0aW9uU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvb2NjdXBhdGlvbi5qcydcbmltcG9ydCB7IENvQzdQbGF5bGlzdENvbmZpZyB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LXBsYXlsaXN0LWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdSb2xsVGFibGVDb25maWcgfSBmcm9tICcuLi9zaGVldHMvY29jNy1yb2xsLXRhYmxlLWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdTY2VuZUNvbmZpZyB9IGZyb20gJy4uL3NoZWV0cy9jb2M3LXNjZW5lLWNvbmZpZy5qcydcbmltcG9ydCB7IENvQzdTZXR1cFNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3NldHVwLmpzJ1xuaW1wb3J0IHsgQ29DN1NraWxsU2hlZXQgfSBmcm9tICcuLi9pdGVtcy9zaGVldHMvc2tpbGwuanMnXG5pbXBvcnQgeyBDb0M3U3BlbGxTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NwZWxsL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN1N0YXR1c1NoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3N0YXR1cy5qcydcbmltcG9ydCB7IENvQzdUYWxlbnRTaGVldCB9IGZyb20gJy4uL2l0ZW1zL3NoZWV0cy90YWxlbnQuanMnXG5pbXBvcnQgeyBDb0M3VmVoaWNsZVNoZWV0IH0gZnJvbSAnLi4vYWN0b3JzL3NoZWV0cy92ZWhpY2xlLmpzJ1xuaW1wb3J0IHsgQ29DN1dlYXBvblNoZWV0IH0gZnJvbSAnLi4vaXRlbXMvc2hlZXRzL3dlYXBvbi1zaGVldC5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyU2hlZXRzICgpIHtcbiAgQWN0b3JzLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEFjdG9yU2hlZXQpXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN05QQ1NoZWV0LCB7XG4gICAgdHlwZXM6IFsnbnBjJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3VmVoaWNsZVNoZWV0LCB7XG4gICAgdHlwZXM6IFsndmVoaWNsZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NyZWF0dXJlU2hlZXQsIHtcbiAgICB0eXBlczogWydjcmVhdHVyZSddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEFjdG9ycy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0NvbnRhaW5lclNoZWV0LCB7XG4gICAgdHlwZXM6IFsnY29udGFpbmVyJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgQWN0b3JzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q2hhcmFjdGVyU2hlZXQsIHtcbiAgICB0eXBlczogWydjaGFyYWN0ZXInXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIEl0ZW1zLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEl0ZW1TaGVldClcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTa2lsbFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc2tpbGwnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1dlYXBvblNoZWV0LCB7XG4gICAgdHlwZXM6IFsnd2VhcG9uJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdCb29rU2hlZXQsIHtcbiAgICB0eXBlczogWydib29rJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTcGVsbFNoZWV0LCB7XG4gICAgdHlwZXM6IFsnc3BlbGwnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1RhbGVudFNoZWV0LCB7XG4gICAgdHlwZXM6IFsndGFsZW50J10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdTdGF0dXNTaGVldCwge1xuICAgIHR5cGVzOiBbJ3N0YXR1cyddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3T2NjdXBhdGlvblNoZWV0LCB7XG4gICAgdHlwZXM6IFsnb2NjdXBhdGlvbiddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3QXJjaGV0eXBlU2hlZXQsIHtcbiAgICB0eXBlczogWydhcmNoZXR5cGUnXSxcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuICBJdGVtcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NldHVwU2hlZXQsIHtcbiAgICB0eXBlczogWydzZXR1cCddLFxuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3Q2hhc2VTaGVldCwge1xuICAgIHR5cGVzOiBbJ2NoYXNlJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcbiAgSXRlbXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdJdGVtU2hlZXQsIHsgdHlwZXM6IFsnaXRlbSddIH0pXG4gIEl0ZW1zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3SXRlbVNoZWV0VjIsIHtcbiAgICB0eXBlczogWydpdGVtJ10sXG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBTY2VuZXMudW5yZWdpc3RlclNoZWV0KCdjb3JlJywgU2NlbmVDb25maWcpXG4gIFNjZW5lcy5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN1NjZW5lQ29uZmlnLCB7XG4gICAgbWFrZURlZmF1bHQ6IHRydWVcbiAgfSlcblxuICBKb3VybmFsLnVucmVnaXN0ZXJTaGVldCgnY29yZScsIEpvdXJuYWxTaGVldClcbiAgSm91cm5hbC5yZWdpc3RlclNoZWV0KCdDb0M3JywgQ29DN0pvdXJuYWxTaGVldCwge1xuICAgIG1ha2VEZWZhdWx0OiB0cnVlXG4gIH0pXG5cbiAgUm9sbFRhYmxlcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBSb2xsVGFibGVDb25maWcpXG4gIFJvbGxUYWJsZXMucmVnaXN0ZXJTaGVldCgnQ29DNycsIENvQzdSb2xsVGFibGVDb25maWcsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIE1hY3Jvcy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBNYWNyb0NvbmZpZylcbiAgTWFjcm9zLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3TWFjcm9Db25maWcsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxuXG4gIFBsYXlsaXN0cy51bnJlZ2lzdGVyU2hlZXQoJ2NvcmUnLCBQbGF5bGlzdENvbmZpZylcbiAgUGxheWxpc3RzLnJlZ2lzdGVyU2hlZXQoJ0NvQzcnLCBDb0M3UGxheWxpc3RDb25maWcsIHtcbiAgICBtYWtlRGVmYXVsdDogdHJ1ZVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIEhhbmRsZWJhcnMgKi9cbmltcG9ydCB7IGNoYXRIZWxwZXIgfSBmcm9tICcuLi9jaGF0L2hlbHBlci5qcydcblxuZXhwb3J0IGNvbnN0IGhhbmRsZWJhcnNIZWxwZXIgPSBmdW5jdGlvbiAoKSB7XG4gIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3JvbGxBY3RvckltZycsIGZ1bmN0aW9uIChhY3RvcktleSkge1xuICAgIGNvbnN0IGltZyA9IGNoYXRIZWxwZXIuZ2V0QWN0b3JJbWdGcm9tS2V5KGFjdG9yS2V5KVxuICAgIGlmIChpbWcpIHJldHVybiBpbWdcbiAgICByZXR1cm4gJy4uL2ljb25zL3N2Zy9teXN0ZXJ5LW1hbi1ibGFjay5zdmcnXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSAqL1xuZXhwb3J0IGNsYXNzIENvQzdUb29sdGlwcyB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICB0aGlzLlRvb2xUaXBIb3ZlciA9IG51bGxcbiAgICB0aGlzLnRvb2xUaXBUaW1lciA9IG51bGxcbiAgfVxuXG4gIGRpc3BsYXlUb29sVGlwICh0b29sVGlwKSB7XG4gICAgaWYgKHR5cGVvZiB0aGlzLlRvb2xUaXBIb3ZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnN0IGJvdW5kcyA9IHRoaXMuVG9vbFRpcEhvdmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpXG4gICAgICBpZiAoIWlzTmFOKGJvdW5kcy5sZWZ0IHx8ICcnKSAmJiAhaXNOYU4oYm91bmRzLnRvcCB8fCAnJykpIHtcbiAgICAgICAgbGV0IGxlZnQgPSBib3VuZHMubGVmdFxuICAgICAgICBsZXQgdG9wID0gYm91bmRzLnRvcFxuICAgICAgICBjb25zdCBoZWlnaHRUZXh0ID0gJCh0aGlzLlRvb2xUaXBIb3Zlcikub3V0ZXJIZWlnaHQoKVxuICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPVwiaGVscC10b29sdGlwXCI+JyArIHRvb2xUaXAgKyAnPC9kaXY+JylcbiAgICAgICAgY29uc3QgdGlwID0gJCgnI2hlbHAtdG9vbHRpcCcpXG4gICAgICAgIGNvbnN0IGhlaWdodFRpcCA9IHRpcC5vdXRlckhlaWdodCgpXG4gICAgICAgIGNvbnN0IHdpZHRoVGlwID0gdGlwLm91dGVyV2lkdGgoKVxuICAgICAgICBpZiAod2luZG93LmlubmVySGVpZ2h0IDwgaGVpZ2h0VGV4dCAqIDEuNSArIGhlaWdodFRpcCArIHRvcCkge1xuICAgICAgICAgIHRvcCA9IHRvcCAtIGhlaWdodFRpcFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvcCA9IHRvcCArIGhlaWdodFRleHQgKiAxLjVcbiAgICAgICAgfVxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPCB3aWR0aFRpcCArIGxlZnQpIHtcbiAgICAgICAgICBsZWZ0ID0gd2luZG93LmlubmVyV2lkdGggLSB3aWR0aFRpcFxuICAgICAgICB9XG4gICAgICAgIHRpcC5jc3Moe1xuICAgICAgICAgIGxlZnQ6IGxlZnQgKyAncHgnLFxuICAgICAgICAgIHRvcDogdG9wICsgJ3B4J1xuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRvb2xUaXBMZWF2ZSAoZXZlbnQpIHtcbiAgICBpZiAoZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID09PSBldmVudC5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQoZ2FtZS5Db0M3VG9vbHRpcHMudG9vbFRpcFRpbWVyKVxuICAgICAgZ2FtZS5Db0M3VG9vbHRpcHMuVG9vbFRpcEhvdmVyID0gbnVsbFxuICAgICAgJCgnI2hlbHAtdG9vbHRpcCcpLnJlbW92ZSgpXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgTXV0YXRpb25PYnNlcnZlciwgVG91ciwgdWkgKi9cbmxldCBDb0M3VG91ciA9IGNsYXNzIGludGVybmFsQ29DN1RvdXIge31cbmlmICh0eXBlb2YgVG91ciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgQ29DN1RvdXIgPSBjbGFzcyBpbnRlcm5hbENvQzdUb3VyIGV4dGVuZHMgVG91ciB7XG4gICAgYXN5bmMgd2FpdEZvckVsZW1lbnQgKHNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcilcbiAgICAgICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgICByZXNvbHZlKClcbiAgICAgICAgICByZXR1cm5cbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucywgb2JzZXJ2ZXIpID0+IHtcbiAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9yKS5mb3JFYWNoKChlbCkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KClcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuXG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xuICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcbiAgICAgICAgICBzdWJ0cmVlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICB9KVxuICAgIH1cblxuICAgIGFzeW5jIF9wcmVTdGVwICgpIHtcbiAgICAgIGF3YWl0IHN1cGVyLl9wcmVTdGVwKClcblxuICAgICAgLy8gQ2xvc2UgY3VycmVudGx5IG9wZW4gYXBwbGljYXRpb25zXG4gICAgICBpZiAodGhpcy5zdGVwSW5kZXggPT09IDApIHtcbiAgICAgICAgZm9yIChjb25zdCBhcHAgb2YgT2JqZWN0LnZhbHVlcyh1aS53aW5kb3dzKSkge1xuICAgICAgICAgIGFwcC5jbG9zZSgpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgYXdhaXQgdGhpcy53YWl0Rm9yRWxlbWVudCh0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yKVxuXG4gICAgICBpZiAodHlwZW9mIHRoaXMuY3VycmVudFN0ZXAuc2lkZWJhclRhYiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgdWkuc2lkZWJhci5hY3RpdmF0ZVRhYih0aGlzLmN1cnJlbnRTdGVwLnNpZGViYXJUYWIpXG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgX3Bvc3RTdGVwICgpIHtcbiAgICAgIGF3YWl0IHN1cGVyLl9wb3N0U3RlcCgpXG4gICAgICBpZiAodGhpcy5zdGVwSW5kZXggPCAwIHx8ICF0aGlzLmhhc05leHQpIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5jdXJyZW50U3RlcC5hY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmlzUmVzZXR0aW5nKSB7XG4gICAgICAgIHRoaXMuaXNSZXNldHRpbmcgPSBmYWxzZVxuICAgICAgICByZXR1cm5cbiAgICAgIH1cblxuICAgICAgc3dpdGNoICh0aGlzLmN1cnJlbnRTdGVwLmFjdGlvbikge1xuICAgICAgICBjYXNlICdjbGljayc6XG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmN1cnJlbnRTdGVwLnNlbGVjdG9yKS5jbGljaygpXG4gICAgICAgICAgYnJlYWtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyByZXNldCAoKSB7XG4gICAgICBpZiAodGhpcy5zdGF0dXMgIT09ICdjb21wbGV0ZWQnKSB7XG4gICAgICAgIHRoaXMuaXNSZXNldHRpbmcgPSB0cnVlXG4gICAgICB9XG4gICAgICBhd2FpdCBzdXBlci5yZXNldCgpXG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCB7IENvQzdUb3VyIH1cbiIsIi8qIGdsb2JhbCBtZXJnZU9iamVjdCAqL1xuaW1wb3J0IHsgQ29DN1RvdXIgfSBmcm9tICcuLi9hcHBzL2NvYzctdG91ci5qcydcblxuZXhwb3J0IGNsYXNzIEVuYWJsZVZhcmlhbnRSdWxlc0VuIGV4dGVuZHMgQ29DN1RvdXIge1xuICBjb25zdHJ1Y3RvciAoY29uZmlnKSB7XG4gICAgc3VwZXIobWVyZ2VPYmplY3Qoe1xuICAgICAgdGl0bGU6ICdFbmFibGUgb3B0aW9uYWwvdmFyaWFudCBydWxlcy4nLFxuICAgICAgZGVzY3JpcHRpb246ICdMZWFybiBob3cgdG8gZW5hYmxlIFB1bHAgQ3RodWxodSBydWxlcywgb3Igb3RoZXIgdmFyaWFudCBydWxlcycsXG4gICAgICBjYW5CZVJlc3VtZWQ6IGZhbHNlLFxuICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgIHN0ZXBzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2dvdG8tc2V0dGluZ3MnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnLnRhYnM+YVtkYXRhLXRhYj1cInNldHRpbmdzXCJdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5Hb3RvU2V0dGluZ3NDb250ZW50JyxcbiAgICAgICAgICBzaWRlYmFyVGFiOiAnc2V0dGluZ3MnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2dvdG8tY29uZmlndXJlJyxcbiAgICAgICAgICBzZWxlY3RvcjogJ1tkYXRhLWFjdGlvbj1cImNvbmZpZ3VyZVwiXScsXG4gICAgICAgICAgdGl0bGU6ICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZVRpdGxlJyxcbiAgICAgICAgICBjb250ZW50OiAnQ09DNy5Ub3VyLkdvdG9Db25maWd1cmVDb250ZW50JyxcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1zeXN0ZW0tc2V0dGluZ3MnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtdGFiPVwic3lzdGVtXCJdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NDb250ZW50JyxcbiAgICAgICAgICBhY3Rpb246ICdjbGljaydcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnZ290by1nYW1lLXJ1bGVzJyxcbiAgICAgICAgICBzZWxlY3RvcjogJ1tkYXRhLWNhdGVnb3J5PVwic3lzdGVtXCJdIFtkYXRhLWtleT1cIkNvQzcuZ2FtZVJ1bGVzXCJdJyxcbiAgICAgICAgICB0aXRsZTogJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzVGl0bGUnLFxuICAgICAgICAgIGNvbnRlbnQ6ICdDT0M3LlRvdXIuR290b0dhbWVSdWxlc0NvbnRlbnQnLFxuICAgICAgICAgIGFjdGlvbjogJ2NsaWNrJ1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdzYXZlLWdhbWUtcnVsZXMnLFxuICAgICAgICAgIHNlbGVjdG9yOiAnI3J1bGVzLXNldHRpbmdzIFtuYW1lPXN1Ym1pdF0nLFxuICAgICAgICAgIHRpdGxlOiAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNUaXRsZScsXG4gICAgICAgICAgY29udGVudDogJ0NPQzcuVG91ci5TYXZlR2FtZVJ1bGVzQ29udGVudCdcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGxvY2FsaXphdGlvbjoge1xuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc1RpdGxlJzogJ0dhbWUgU2V0dGluZ3MnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc0NvbnRlbnQnOiAnR28gdG8gdGhlIEdhbWUgU2V0dGluZ3MgdGFiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlVGl0bGUnOiAnQ29uZmlndXJlIFNldHRpbmdzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlQ29udGVudCc6ICdDbGljayBvbiB0aGUgQ29uZmlndXJlIFNldHRpbmdzIGJ1dHRvbicsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzVGl0bGUnOiAnU3lzdGVtIFNldHRpbmdzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvU3lzdGVtU2V0dGluZ3NDb250ZW50JzogJ0dvIHRvIHRoZSBTeXN0ZW0gU2V0dGluZ3MgdGFiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzVGl0bGUnOiAnQ29uZmlndXJlIFZhcmlhbnQvT3B0aW9uYWwgUnVsZXMnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9HYW1lUnVsZXNDb250ZW50JzogJ0NsaWNrIG9uIHRoZSBDb25maWd1cmUgVmFyaWFudC9PcHRpb25hbCBSdWxlcyBidXR0b24nLFxuICAgICAgICAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNUaXRsZSc6ICdTYXZlIHJ1bGUgY2hhbmdlcycsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc0NvbnRlbnQnOiAnT25jZSB5b3UgaGF2ZSBtYWRlIHlvdXIgY2hhbmdlcyBjbGljayBvbiB0aGUgU2F2ZSBDaGFuZ2VzIGJ1dHRvbidcbiAgICAgIH1cbiAgICB9LCBjb25maWcpKVxuICB9XG59XG4iLCJpbXBvcnQgeyBFbmFibGVWYXJpYW50UnVsZXNFbiB9IGZyb20gJy4vZW5hYmxlLXZhcmlhbnQtcnVsZXMtZW4uanMnXG5cbmV4cG9ydCBjbGFzcyBFbmFibGVWYXJpYW50UnVsZXNGciBleHRlbmRzIEVuYWJsZVZhcmlhbnRSdWxlc0VuIHtcbiAgY29uc3RydWN0b3IgKGNvbmZpZykge1xuICAgIHN1cGVyKHtcbiAgICAgIHRpdGxlOiAnQWN0aXZleiBsZXMgcsOoZ2xlcyBvcHRpb25uZWxsZXMuJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWN0aXZleiBsZXMgcsOoZ2xlcyBvcHRpb25lbGxlcyBldCBQdWxwIEN0aHVsaHUnLFxuICAgICAgbG9jYWxpemF0aW9uOiB7XG4gICAgICAgICdDT0M3LlRvdXIuR290b1NldHRpbmdzVGl0bGUnOiAnUGFyYW3DqHRyZXMnLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TZXR0aW5nc0NvbnRlbnQnOiAnT3V2cmlyIGxcXCdvbmdsZXQgXCJQYXJhbcOodHJlc1wiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvQ29uZmlndXJlVGl0bGUnOiAnQ29uZmlndXJhdGlvbiBkZXMgb3B0aW9ucycsXG4gICAgICAgICdDT0M3LlRvdXIuR290b0NvbmZpZ3VyZUNvbnRlbnQnOiAnQ2xpcXVleiBzdXIgXCJDb25maWd1cmF0aW9uIGRlcyBvcHRpb25zXCInLFxuICAgICAgICAnQ09DNy5Ub3VyLkdvdG9TeXN0ZW1TZXR0aW5nc1RpdGxlJzogJ1N5c3TDqG1lIGRlIGpldScsXG4gICAgICAgICdDT0M3LlRvdXIuR290b1N5c3RlbVNldHRpbmdzQ29udGVudCc6ICdPdXZyZXogbFxcJ29uZ2xldCBcIlN5c3TDqG1lIGRlIGpldVwiJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzVGl0bGUnOiAnQ29uZmlndXJlciBsZXMgdmFyaWFudGVzL3LDqGdsZXMgb3B0aW9ubmVsbGVzJyxcbiAgICAgICAgJ0NPQzcuVG91ci5Hb3RvR2FtZVJ1bGVzQ29udGVudCc6ICdDbGlja2V6IHN1ciBsZSBib3V0dG9uIFwiQ29uZmlndXJlciBsZXMgdmFyaWFudGVzL3LDqGdsZXMgb3B0aW9ubmVsbGVzXCInLFxuICAgICAgICAnQ09DNy5Ub3VyLlNhdmVHYW1lUnVsZXNUaXRsZSc6ICdTYXV2ZWdhcmRlciBsZXMgbW9kaWZpY2F0aW9ucycsXG4gICAgICAgICdDT0M3LlRvdXIuU2F2ZUdhbWVSdWxlc0NvbnRlbnQnOiAnQXByZXMgYXZvaXIgY2hvaXNpcyBsZXMgb3B0aW9ucyBjbGlxdWV6IHN1ciBsZSBib3V0b24gXCJTYXV2ZWdhcmRlciBsZXMgbW9kaWZpY2F0aW9uc1wiJ1xuICAgICAgfVxuICAgIH0pXG4gIH1cbn1cbiIsIi8qIGdsb2JhbCBDT05GSUcsIGdhbWUsIEhvb2tzLCBpc05ld2VyVmVyc2lvbiAqL1xuaW1wb3J0IHsgQ29DN1Rvb2x0aXBzIH0gZnJvbSAnLi4vYXBwcy90b29sdGlwcy5qcydcbi8vIGltcG9ydCB7IENvQzdXZWxjb21lTWVzc2FnZSB9IGZyb20gJy4uL2FwcHMvd2VsY29tZS1tZXNzYWdlLmpzJ1xuaW1wb3J0IHsgcmVnaXN0ZXJUb3VycyB9IGZyb20gJy4uL3NjcmlwdHMvcmVnaXN0ZXItdG91cnMuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdyZWFkeScsIGFzeW5jICgpID0+IHtcbiAgICBjb25zb2xlLmxvZygnQ2FsbCBvZiBDdGh1bGh1IDd0aCBFZGl0aW9uIHwgUmVhZHknKVxuICAgIGlmIChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzaG93V2VsY29tZU1lc3NhZ2UnKSAmJiBnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgLyoqIFRoaXMgd2lsbCBwcm9tcHQgdGhlIHdlbGNvbWUgbWVzc2FnZSB3aGVuIGl0IGlzICBmaW5pc2hlZCAqL1xuICAgICAgLy8gYXdhaXQgQ29DN1dlbGNvbWVNZXNzYWdlLmNyZWF0ZSgpXG4gICAgfVxuICAgIGdhbWUuQ29DN1Rvb2x0aXBzID0gbmV3IENvQzdUb29sdGlwcygpXG5cbiAgICBjb25zdCBpbnN0cnVjdGlvbnNWZXJzaW9uID0gZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnc2hvd0luc3RydWN0aW9ucycpXG4gICAgbGV0IGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIGNvbnN0IHJlYWRNZSA9IHtcbiAgICAgIGVuOiAnc3hCMk9YYmZ3VjZNMG55UScsXG4gICAgICBmcjogJ3RkYWt5elRWT1FzQU1kU20nXG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmVhZE1lW2xhbmddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbGFuZyA9ICdlbidcbiAgICB9XG4gICAgQ09ORklHLkNvQzcgPSBDT05GSUcuQ29DNyA/PyB7fVxuICAgIENPTkZJRy5Db0M3Lk1hbnVhbCA9IHJlYWRNZVtsYW5nXVxuICAgIGlmIChpc05ld2VyVmVyc2lvbihnYW1lLnN5c3RlbS52ZXJzaW9uLCBpbnN0cnVjdGlvbnNWZXJzaW9uID8/ICcwJykpIHtcbiAgICAgIChhd2FpdCBnYW1lLnBhY2tzLmdldCgnQ29DNy5zeXN0ZW0tZG9jJykuZ2V0RG9jdW1lbnQoQ09ORklHLkNvQzcuTWFudWFsKSk/LnNoZWV0LnJlbmRlcih0cnVlKVxuICAgICAgZ2FtZS5zZXR0aW5ncy5zZXQoJ0NvQzcnLCAnc2hvd0luc3RydWN0aW9ucycsIGdhbWUuc3lzdGVtLnZlcnNpb24pXG4gICAgfVxuICAgIHJlZ2lzdGVyVG91cnMoKVxuICB9KVxufVxuIiwiLyogZ2xvYmFsIGdhbWUgKi9cbmltcG9ydCB7IEVuYWJsZVZhcmlhbnRSdWxlc0VuIH0gZnJvbSAnLi4vdG91cnMvZW5hYmxlLXZhcmlhbnQtcnVsZXMtZW4uanMnXG5pbXBvcnQgeyBFbmFibGVWYXJpYW50UnVsZXNGciB9IGZyb20gJy4uL3RvdXJzL2VuYWJsZS12YXJpYW50LXJ1bGVzLWZyLmpzJ1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVnaXN0ZXJUb3VycyAoKSB7XG4gIHRyeSB7XG4gICAgbGV0IGxhbmcgPSBnYW1lLmkxOG4ubGFuZ1xuICAgIGNvbnN0IHRvdXJzID0ge1xuICAgICAgZW46IHtcbiAgICAgICAgJ2VuYWJsZS12YXJpYW50LXJ1bGVzJzogRW5hYmxlVmFyaWFudFJ1bGVzRW5cbiAgICAgIH0sXG4gICAgICBmcjoge1xuICAgICAgICAnZW5hYmxlLXZhcmlhbnQtcnVsZXMnOiBFbmFibGVWYXJpYW50UnVsZXNGclxuICAgICAgfVxuICAgIH1cbiAgICBpZiAodHlwZW9mIHRvdXJzW2xhbmddID09PSAndW5kZWZpbmVkJykge1xuICAgICAgbGFuZyA9ICdlbidcbiAgICB9XG4gICAgZm9yIChjb25zdCB0b3VyTmFtZSBpbiB0b3Vyc1tsYW5nXSkge1xuICAgICAgZ2FtZS50b3Vycy5yZWdpc3RlcignQ29DNycsIHRvdXJOYW1lLCBuZXcgdG91cnNbbGFuZ11bdG91ck5hbWVdKCkpXG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdUT1VSIEVSUk9SJywgZXJyKVxuICB9XG59XG4iLCJpbXBvcnQgKiBhcyBDcmVhdGVUb2tlbiBmcm9tICcuL2NyZWF0ZS10b2tlbi5qcydcbmltcG9ydCAqIGFzIERpY2VTb05pY2VSZWFkeSBmcm9tICcuL2RpY2Utc28tbmljZS1yZWFkeS5qcydcbmltcG9ydCAqIGFzIERpY2VTb05pY2VSb2xsU3RhcnQgZnJvbSAnLi9kaWNlLXNvLW5pY2Utcm9sbC1zdGFydC5qcydcbmltcG9ydCAqIGFzIEluaXQgZnJvbSAnLi9pbml0LmpzJ1xuaW1wb3J0ICogYXMgUmVhZHkgZnJvbSAnLi9yZWFkeS5qcydcbmltcG9ydCAqIGFzIFJlbmRlckFjdG9yU2hlZXQgZnJvbSAnLi9yZW5kZXItYWN0b3Itc2hlZXQuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJDaGF0TWVzc2FnZSBmcm9tICcuL3JlbmRlci1jaGF0LW1lc3NhZ2UuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJEaWFsb2cgZnJvbSAnLi9yZW5kZXItZGlhbG9nLmpzJ1xuaW1wb3J0ICogYXMgUmVuZGVySXRlbVNoZWV0IGZyb20gJy4vcmVuZGVyLWl0ZW0tc2hlZXQuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJQYXVzZSBmcm9tICcuL3JlbmRlci1wYXVzZS5qcydcbmltcG9ydCAqIGFzIFJlbmRlclBsYXllckxpc3QgZnJvbSAnLi9yZW5kZXItcGxheWVyLWxpc3QuanMnXG5pbXBvcnQgKiBhcyBSZW5kZXJTZXR0aW5nc0NvbmZpZyBmcm9tICcuL3JlbmRlci1zZXR0aW5ncy1jb25maWcuanMnXG5cbmV4cG9ydCBjb25zdCBDb0M3SG9va3MgPSB7XG4gIGxpc3RlbiAoKSB7XG4gICAgQ3JlYXRlVG9rZW4ubGlzdGVuKClcbiAgICBEaWNlU29OaWNlUmVhZHkubGlzdGVuKClcbiAgICBEaWNlU29OaWNlUm9sbFN0YXJ0Lmxpc3RlbigpXG4gICAgSW5pdC5saXN0ZW4oKVxuICAgIFJlYWR5Lmxpc3RlbigpXG4gICAgUmVuZGVyQWN0b3JTaGVldC5saXN0ZW4oKVxuICAgIFJlbmRlckNoYXRNZXNzYWdlLmxpc3RlbigpXG4gICAgUmVuZGVyRGlhbG9nLmxpc3RlbigpXG4gICAgUmVuZGVySXRlbVNoZWV0Lmxpc3RlbigpXG4gICAgUmVuZGVyUGF1c2UubGlzdGVuKClcbiAgICBSZW5kZXJQbGF5ZXJMaXN0Lmxpc3RlbigpXG4gICAgUmVuZGVyU2V0dGluZ3NDb25maWcubGlzdGVuKClcbiAgfVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzLCBEaWFsb2csIGdhbWUgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbignY3JlYXRlVG9rZW4nLCBhc3luYyAodG9rZW5Eb2N1bWVudCwgb3B0aW9ucywgYWN0b3JJZCkgPT4ge1xuICAgIC8vIFNldCB0b2tlbiBpY29uIGNvcnJlY3RseVxuICAgIGlmIChcbiAgICAgIHRva2VuRG9jdW1lbnQudGV4dHVyZS5zcmMgPT09ICdpY29ucy9zdmcvbXlzdGVyeS1tYW4uc3ZnJyAmJlxuICAgICAgdG9rZW5Eb2N1bWVudC50ZXh0dXJlLnNyYyAhPT0gdG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmltZykge1xuICAgICAgdG9rZW5Eb2N1bWVudC50ZXh0dXJlLnNyYyA9IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5pbWdcbiAgICB9XG5cbiAgICAvLyBJZiB0aGVyZSBpcyBzb21ldGhpbmcgdG8gcm9sbCBhc2sgaWYgd2Ugc2hvdWxkIHJvbGwgaXRcbiAgICBpZiAodG9rZW5Eb2N1bWVudC5fb2JqZWN0LmFjdG9yLmhhc1JvbGxhYmxlQ2hhcmFjdGVyaXN0aWNzIHx8IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5ob3NSb2xsYWJsZVNraWxscykge1xuICAgICAgbmV3IERpYWxvZyhcbiAgICAgICAge1xuICAgICAgICAgIHRpdGxlOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9rZW5DcmVhdGlvblJvbGwuVGl0bGUnKSxcbiAgICAgICAgICBjb250ZW50OiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuVG9rZW5DcmVhdGlvblJvbGwuUHJvbXB0JyksXG4gICAgICAgICAgYnV0dG9uczoge1xuICAgICAgICAgICAgcm9sbDoge1xuICAgICAgICAgICAgICBsYWJlbDogZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LlRva2VuQ3JlYXRpb25Sb2xsLkJ1dHRvblJvbGwnKSxcbiAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IGF3YWl0IHRva2VuRG9jdW1lbnQuX29iamVjdC5hY3Rvci5yb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUoKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGF2ZXJhZ2U6IHtcbiAgICAgICAgICAgICAgbGFiZWw6IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5Ub2tlbkNyZWF0aW9uUm9sbC5CdXR0b25BdmVyYWdlJyksXG4gICAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiBhd2FpdCB0b2tlbkRvY3VtZW50Ll9vYmplY3QuYWN0b3IuYXZlcmFnZUNoYXJhY3RlcmlzdGljc1ZhbHVlKClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBza2lwOiB7XG4gICAgICAgICAgICAgIGxhYmVsOiBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuTWlncmF0ZS5CdXR0b25Ta2lwJylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pLnJlbmRlcih0cnVlKVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xuaW1wb3J0IHsgQ29DN0RlY2FkZXJEU05GYWNlcyB9IGZyb20gJy4uL2FwcHMvZGVjYWRlci1kc24tZmFjZXMuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbmNlKCdkaWNlU29OaWNlUmVhZHknLCBkaWNlM2QgPT4ge1xuICAgIGRpY2UzZC5hZGREaWNlUHJlc2V0KHtcbiAgICAgIHR5cGU6ICdkdCcsXG4gICAgICBsYWJlbHM6IFsnMTAnLCAnMjAnLCAnMzAnLCAnNDAnLCAnNTAnLCAnNjAnLCAnNzAnLCAnODAnLCAnOTAnLCAnMDAnXSxcbiAgICAgIGZvbnRTY2FsZTogMC43NSxcbiAgICAgIHN5c3RlbTogJ3N0YW5kYXJkJ1xuICAgIH0pXG4gICAgZGljZTNkLmFkZERpY2VQcmVzZXQoe1xuICAgICAgdHlwZTogJ2RvJyxcbiAgICAgIGxhYmVsczogWycxMCcsICcyMCcsICczMCcsICc0MCcsICc1MCcsICc2MCcsICc3MCcsICc4MCcsICc5MCcsICcwMCddLFxuICAgICAgZm9udFNjYWxlOiAwLjc1LFxuICAgICAgc3lzdGVtOiAnc3RhbmRhcmQnXG4gICAgfSlcbiAgICBnYW1lLkNvQzdEZWNhZGVyRFNORmFjZXMgPSBuZXcgQ29DN0RlY2FkZXJEU05GYWNlcygpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbignZGljZVNvTmljZVJvbGxTdGFydCcsIGRpY2UzZCA9PiB7XG4gICAgZ2FtZS5Db0M3RGVjYWRlckRTTkZhY2VzLnNldEZhY2VzKClcbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJBY3RvclNoZWV0JywgYXN5bmMgKGRhdGEsIGh0bWwsIG9wdGlvbnMpID0+IHt9KVxufVxuIiwiLyogZ2xvYmFsIEhvb2tzICovXG5pbXBvcnQgeyBDb0M3Q2hhdCB9IGZyb20gJy4uL2NoYXQuanMnXG5pbXBvcnQgeyBDb0M3TGluayB9IGZyb20gJy4uL2FwcHMvY29jNy1saW5rLmpzJ1xuaW1wb3J0IHsgQ29DN1BhcnNlciB9IGZyb20gJy4uL2FwcHMvY29jNy1wYXJzZXIuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyQ2hhdE1lc3NhZ2UnLCAoYXBwLCBodG1sLCBkYXRhKSA9PiB7XG4gICAgQ29DN0NoYXQucmVuZGVyTWVzc2FnZUhvb2soYXBwLCBodG1sLCBkYXRhKVxuICAgIENvQzdDaGF0LnJlbmRlckNoYXRNZXNzYWdlSG9vayhhcHAsIGh0bWwsIGRhdGEpXG4gICAgQ29DN1BhcnNlci5QYXJzZU1lc3NhZ2UoYXBwLCBodG1sLCBkYXRhKVxuICAgIENvQzdMaW5rLmJpbmRFdmVudHNIYW5kbGVyKGh0bWwpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgSG9va3MgKi9cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyRGlhbG9nJywgKGRpYWxvZywgaHRtbCkgPT4ge1xuICAgIGNvbnN0IGZvcm0gPSBodG1sLmZpbmQoJ2Zvcm0nKVxuICAgIGlmIChmb3JtLmlzKCcjZG9jdW1lbnQtY3JlYXRlJykgJiYgZm9ybS5maW5kKCdzZWxlY3QnKS5sZW5ndGggIT09IDApIHtcbiAgICAgIGNvbnN0IGVudGl0eUNyZWF0ZVNlbGVjdFRhZyA9IGZvcm0uZmluZChcIltuYW1lPSd0eXBlJ11cIilcbiAgICAgIGNvbnN0IGVudGl0eVNvcnRlZExpc3QgPSBbXVxuICAgICAgY29uc3Qgc2hvd0V4cGVyaW1lbnRhbCA9ICEhZ2FtZS5zZXR0aW5ncy5nZXQoXG4gICAgICAgICdDb0M3JyxcbiAgICAgICAgJ2V4cGVyaW1lbnRhbEZlYXR1cmVzJ1xuICAgICAgKVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmNoaWxkcmVuKCkuZWFjaCgobywgZW50aXR5T3B0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGVudGl0eU9wdGlvbi50ZXh0Q29udGVudD8uY2FwaXRhbGl6ZSgpXG4gICAgICAgIGlmIChnYW1lLmkxOG4uaGFzKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApKSB7XG4gICAgICAgICAgZW50aXR5T3B0aW9uLnRleHRDb250ZW50ID0gZ2FtZS5pMThuLmxvY2FsaXplKGBDb0M3LkVudGl0aWVzLiR7a2V5fWApXG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNob3dFeHBlcmltZW50YWwgfHwgIVsndmVoaWNsZSddLmluY2x1ZGVzKGVudGl0eU9wdGlvbi52YWx1ZSkpIHtcbiAgICAgICAgICBlbnRpdHlTb3J0ZWRMaXN0LnB1c2goZW50aXR5T3B0aW9uKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgZW50aXR5Q3JlYXRlU2VsZWN0VGFnLmVtcHR5KClcbiAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy5hcHBlbmQoXG4gICAgICAgIGVudGl0eVNvcnRlZExpc3Quc29ydCgoZmlyc3QsIHNlY29uZCkgPT5cbiAgICAgICAgICBmaXJzdC5pbm5lclRleHQubG9jYWxlQ29tcGFyZShzZWNvbmQuaW5uZXJUZXh0KVxuICAgICAgICApXG4gICAgICApXG4gICAgICBpZiAoZW50aXR5Q3JlYXRlU2VsZWN0VGFnLnZhbCgpID09PSAnYWN0b3InKSB7XG4gICAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoJ2NoYXJhY3RlcicpXG4gICAgICB9IGVsc2UgaWYgKGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoKSA9PT0gJ2Jvb2snKSB7XG4gICAgICAgIGVudGl0eUNyZWF0ZVNlbGVjdFRhZy52YWwoJ2l0ZW0nKVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIGFzeW5jIChkYXRhLCBodG1sLCBvcHRpb25zKSA9PiB7fSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lLCBIb29rcyAqL1xuXG5leHBvcnQgZnVuY3Rpb24gbGlzdGVuICgpIHtcbiAgSG9va3Mub24oJ3JlbmRlclBhdXNlJywgYXN5bmMgKGRhdGEsIGh0bWwsIG9wdGlvbnMpID0+IHtcbiAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnb3ZlcnJpZGVHYW1lQXJ0d29yaycpKSB7XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpLnRvTG93ZXJDYXNlKCkgPT09ICdudWxsJykge1xuICAgICAgICBodG1sLmZpbmQoJ2ltZycpLnJlbW92ZSgpXG4gICAgICB9XG4gICAgICBpZiAoZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYXJ0UGF1c2VJbWFnZScpICE9PSAnJykge1xuICAgICAgICBodG1sLmZpbmQoJ2ltZycpLmF0dHIoJ3NyYycsIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlSW1hZ2UnKSlcbiAgICAgIH1cblxuICAgICAgaWYgKGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2FydFBhdXNlVGV4dCcpICE9PSAnJykge1xuICAgICAgICBodG1sLmZpbmQoJ2gzJykuaHRtbChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdhcnRQYXVzZVRleHQnKSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgJCwgZ2FtZSwgSG9va3MgKi9cbmltcG9ydCB7IENPQzcgfSBmcm9tICcuLi9jb25maWcuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0ZW4gKCkge1xuICBIb29rcy5vbigncmVuZGVyUGxheWVyTGlzdCcsIChwbGF5ZXJMaXN0LCBodG1sLCBkYXRhKSA9PiB7XG4gICAgJCgnPGg0PicpLmFwcGVuZCgnPGRpdj48aSBjbGFzcz1cImZhLXJlZ3VsYXIgZmEtY2FsZW5kYXJcIj48L2k+JyArIGdhbWUuaTE4bi5mb3JtYXQoQ09DNy5lcmFzW2dhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3dvcmxkRXJhJyldID8/ICdDb0M3LkNvQ0lERmxhZy5lcnJvci51bmtub3duLWVyYScsIHsgZXJhOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICd3b3JsZEVyYScpIH0pICsgJzwvZGl2PicpLmluc2VydEFmdGVyKCQoJ2gzJywgaHRtbCkpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgSG9va3MgKi9cbmltcG9ydCB7IENvQzdEaXJlY3RvcnlQaWNrZXIgfSBmcm9tICcuLi9zY3JpcHRzL2NvYzctZGlyZWN0b3J5LXBpY2tlci5qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdyZW5kZXJTZXR0aW5nc0NvbmZpZycsIChhcHAsIGh0bWwsIHVzZXIpID0+IHtcbiAgICBDb0M3RGlyZWN0b3J5UGlja2VyLnByb2Nlc3NIdG1sKGh0bWwpXG4gIH0pXG59XG4iLCIvKiBnbG9iYWwgZ2FtZSwgc29ja2V0bGliLCB1aSAqL1xuaW1wb3J0IHsgQ29DN01lbGVlVGFyZ2V0IH0gZnJvbSAnLi4vY2hhdC9jb21iYXQvbWVsZWUtdGFyZ2V0LmpzJ1xuXG5leHBvcnQgZnVuY3Rpb24gQ29DN1NvY2tldCAoKSB7XG4gIGdhbWUuQ29DN3NvY2tldCA9IHNvY2tldGxpYi5yZWdpc3RlclN5c3RlbSgnQ29DNycpXG4gIGdhbWUuQ29DN3NvY2tldC5yZWdpc3RlcignZ21jcmVhdGVtZXNzYWdlYXMnLCBnbWNyZWF0ZW1lc3NhZ2VhcylcbiAgZ2FtZS5Db0M3c29ja2V0LnJlZ2lzdGVyKCdnbXRyYWRlaXRlbXRvJywgZ210cmFkZWl0ZW10bylcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ21jcmVhdGVtZXNzYWdlYXMgKGRhdGEpIHtcbiAgY29uc3QgbWVsZWVUYXJnZXQgPSBuZXcgQ29DN01lbGVlVGFyZ2V0KFxuICAgIGRhdGEudGFyZ2V0S2V5LFxuICAgIGRhdGEubWVzc2FnZUlkLFxuICAgIGRhdGEuZmFzdEZvcndhcmRcbiAgKVxuICBtZWxlZVRhcmdldC5pbml0aWF0b3JLZXkgPSBkYXRhLmFjdG9yS2V5XG4gIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBtZWxlZVRhcmdldC5jcmVhdGVDaGF0Q2FyZCgpXG4gIHJldHVybiBtZXNzYWdlXG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdtdHJhZGVpdGVtdG8gKGRhdGEpIHtcbiAgdHJ5IHtcbiAgICBsZXQgYWN0b3JcbiAgICBpZiAoZGF0YS5zY2VuZSkge1xuICAgICAgYWN0b3IgPSBnYW1lLnNjZW5lcy5nZXQoZGF0YS5zY2VuZSkudG9rZW5zLmdldChkYXRhLmFjdG9yRnJvbSkuYWN0b3JcbiAgICB9IGVsc2Uge1xuICAgICAgYWN0b3IgPSBnYW1lLmFjdG9ycy5nZXQoZGF0YS5hY3RvckZyb20pXG4gICAgfVxuICAgIGNvbnN0IGl0ZW0gPSBhY3Rvci5pdGVtcy5nZXQoZGF0YS5pdGVtKVxuICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCBnYW1lLmFjdG9yc1xuICAgICAgLmdldChkYXRhLmFjdG9yVG8pXG4gICAgICAuY3JlYXRlRW1iZWRkZWREb2N1bWVudHMoJ0l0ZW0nLCBbaXRlbS50b0pTT04oKV0pXG4gICAgaWYgKGNyZWF0ZWQpIHtcbiAgICAgIGFjdG9yLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2l0ZW0uaWRdKVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZSlcbiAgICByZXR1cm4gZmFsc2VcbiAgfVxuICByZXR1cm4gdHJ1ZVxufVxuIiwiLyogZ2xvYmFsIGZyb21VdWlkLCBnYW1lLCB1aSAqL1xuaW1wb3J0IHsgQ29DN0ludmVzdGlnYXRvcldpemFyZCB9IGZyb20gJy4vaW52ZXN0aWdhdG9yLXdpemFyZC5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuLi91dGlsaXRpZXMuanMnXG5pbXBvcnQgeyBDb21iaW5lZENoZWNrQ2FyZCB9IGZyb20gJy4uL2NoYXQvY2FyZHMvY29tYmluZWQtcm9sbC5qcydcbmltcG9ydCB7IE9wcG9zZWRDaGVja0NhcmQgfSBmcm9tICcuLi9jaGF0L2NhcmRzL29wcG9zZWQtcm9sbC5qcydcblxuZXhwb3J0IGNsYXNzIENvQzdTeXN0ZW1Tb2NrZXQge1xuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGRhdGEgICAgICAgICAgICAgICAgICAgICAgIERhdGEgdG8gc2VuZCB0byBzb2NrZXQuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbZGF0YS50eXBlXSAgICAgICAgICAgICAgICBBY3Rpb24gdG8gcnVuXG4gICAqIEBwYXJhbSB7c3RyaW5nfHVuZGVmaW5lZH0gW2RhdGEubGlzdGVuZXJdICBvbmx5IHRoaXMgc3BlY2ZpYyB1c2VyIHNob3VsZCBydW4gdGhlIGFjdGlvblxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgc3RhdGljIGFzeW5jIGNhbGxTb2NrZXQgKGRhdGEpIHtcbiAgICBpZiAodHlwZW9mIGRhdGEubGlzdGVuZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoZ2FtZS51c2VyLmlkID09PSBkYXRhLmxpc3RlbmVyKSB7XG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAnY2hhcmFjdGVyLXdpemFyZCc6XG4gICAgICAgICAgICBDb0M3SW52ZXN0aWdhdG9yV2l6YXJkLmNyZWF0ZUNoYXJhY3RlckZyb21EYXRhKGRhdGEucGF5bG9hZClcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnb3Blbi1jaGFyYWN0ZXInOlxuICAgICAgICAgICAgZ2FtZS5hY3RvcnMuZ2V0KGRhdGEucGF5bG9hZCkuc2hlZXQucmVuZGVyKHRydWUpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChnYW1lLnVzZXIuaXNHTSkge1xuICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgT3Bwb3NlZENoZWNrQ2FyZC5kZWZhdWx0Q29uZmlnLnR5cGU6XG4gICAgICAgICAgICBPcHBvc2VkQ2hlY2tDYXJkLmRpc3BhdGNoKGRhdGEpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgQ29tYmluZWRDaGVja0NhcmQuZGVmYXVsdENvbmZpZy50eXBlOlxuICAgICAgICAgICAgQ29tYmluZWRDaGVja0NhcmQuZGlzcGF0Y2goZGF0YSlcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgY2FzZSAnaW52b2tlJzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY29uc3QgaXRlbSA9IGF3YWl0IGZyb21VdWlkKGRhdGEuaXRlbSlcbiAgICAgICAgICAgICAgaXRlbVtkYXRhLm1ldGhvZF0oZGF0YS5kYXRhKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgc3dpdGNoIChkYXRhLnR5cGUpIHtcbiAgICAgICAgY2FzZSAndXBkYXRlQ2hhcic6XG4gICAgICAgICAgQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKClcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IEtlZXBlciBhY3Rpb24sIGlmIHlvdSBhcmUgYSBrZWVwZXIgcnVuIHlvdXJzZWxmLCBpZiB0aGVyZSBpcyBubyBhY3RpdmUgR00gc2hvdyBlcnJvclxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgICBEYXRhIHRvIHNlbmQgdG8gc29ja2V0LlxuICAgKi9cbiAgc3RhdGljIHJlcXVlc3RLZWVwZXJBY3Rpb24gKGRhdGEpIHtcbiAgICBpZiAoZ2FtZS51c2VyLmlzR00pIHtcbiAgICAgIGRhdGEubGlzdGVuZXIgPSBnYW1lLnVzZXIuaWRcbiAgICAgIENvQzdTeXN0ZW1Tb2NrZXQuY2FsbFNvY2tldChkYXRhKVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBrZWVwZXJzID0gZ2FtZS51c2Vycy5maWx0ZXIodSA9PiB1LmFjdGl2ZSAmJiB1LmlzR00pXG4gICAgICBpZiAoa2VlcGVycy5sZW5ndGgpIHtcbiAgICAgICAgZGF0YS5saXN0ZW5lciA9IGtlZXBlcnNbMF0uaWRcbiAgICAgICAgZ2FtZS5zb2NrZXQuZW1pdCgnc3lzdGVtLkNvQzcnLCBkYXRhKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcihcbiAgICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRXJyb3JNaXNzaW5nS2VlcGVyVXNlcicpXG4gICAgICAgIClcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVxdWVzdCB1c2VyIGFjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gZGF0YSAgICAgICAgICAgICBEYXRhIHRvIHNlbmQgdG8gc29ja2V0LlxuICAgKiBAcGFyYW0ge3N0cmluZ3xudWxsfSB1c2VySWQgICAgICBPbmx5IHRoaXMgdXNlciBpZCBzaG91bGQgcnVuIHRoZSBhY3Rpb24uXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZXJyb3JJZk1pc3NpbmcgIElmIHJlcXVlc3RpbmcgYSBzcGVjaWZpYyB1c2VyIHNob3VsZCBydW4gdGhlIGFjdGlvbiBlcnJvciBpZiB1c2VyIG5vdCBmb3VuZCAvIGxvZ2dlZCBpbi5cbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlU2VsZiAgICAgSWYgcnVubmluZyBhcyBhbGwgdXNlcnMgc2hvdWxkIHRoZSBjdXJyZW50IHVzZXIgYWxzbyBydW4gdGhlIGFjdGlvbi5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHN0YXRpYyByZXF1ZXN0VXNlckFjdGlvbiAoXG4gICAgZGF0YSxcbiAgICB7IHVzZXJJZCA9IG51bGwsIGVycm9ySWZNaXNzaW5nID0gdHJ1ZSwgaW5jbHVkZVNlbGYgPSB0cnVlIH0gPSB7fVxuICApIHtcbiAgICBpZiAodXNlcklkICYmIHR5cGVvZiB1c2VySWQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAodXNlcklkID09PSBnYW1lLnVzZXIuaWQpIHtcbiAgICAgICAgZGF0YS5saXN0ZW5lciA9IGdhbWUudXNlci5pZFxuICAgICAgICBDb0M3U3lzdGVtU29ja2V0LmNhbGxTb2NrZXQoZGF0YSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBnYW1lLnVzZXJzLmdldCh1c2VySWQpXG4gICAgICAgIGlmICh0eXBlb2YgdXNlci5pZCAhPT0gJ3VuZGVmaW5lZCcgJiYgdXNlci5hY3RpdmUpIHtcbiAgICAgICAgICBkYXRhLmxpc3RlbmVyID0gdXNlci5pZFxuICAgICAgICAgIGdhbWUuc29ja2V0LmVtaXQoJ3N5c3RlbS5Db0M3JywgZGF0YSlcbiAgICAgICAgfSBlbHNlIGlmIChlcnJvcklmTWlzc2luZykge1xuICAgICAgICAgIHVpLm5vdGlmaWNhdGlvbnMuZXJyb3IoZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkVycm9yTWlzc2luZ1VzZXInKSlcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaW5jbHVkZVNlbGYpIHtcbiAgICAgICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gICAgICB9XG4gICAgICBnYW1lLnNvY2tldC5lbWl0KCdzeXN0ZW0uQ29DNycsIGRhdGEpXG4gICAgfVxuICB9XG59XG4iLCIvKiBnbG9iYWwgJCwgQ29tYmF0LCBDT05GSUcsIGdhbWUsIEhvb2tzLCBJdGVtRGlyZWN0b3J5ICovXG5pbXBvcnQgeyBDb0M3TlBDU2hlZXQgfSBmcm9tICcuL2FjdG9ycy9zaGVldHMvbnBjLXNoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN0NyZWF0dXJlU2hlZXQgfSBmcm9tICcuL2FjdG9ycy9zaGVldHMvY3JlYXR1cmUtc2hlZXQuanMnXG5pbXBvcnQgeyBDb0M3Q2hhcmFjdGVyU2hlZXQgfSBmcm9tICcuL2FjdG9ycy9zaGVldHMvY2hhcmFjdGVyLmpzJ1xuaW1wb3J0IHsgQ29DN0NoYXQgfSBmcm9tICcuL2NoYXQuanMnXG5pbXBvcnQgeyBDb0M3Q29tYmF0LCByb2xsSW5pdGlhdGl2ZSB9IGZyb20gJy4vY29tYmF0LmpzJ1xuaW1wb3J0IHsgQ09DNyB9IGZyb20gJy4vY29uZmlnLmpzJ1xuaW1wb3J0IHsgVXBkYXRlciB9IGZyb20gJy4vdXBkYXRlci5qcydcbmltcG9ydCB7IENvQzdVdGlsaXRpZXMgfSBmcm9tICcuL3V0aWxpdGllcy5qcydcbmltcG9ydCB7IENvQzdQYXJzZXIgfSBmcm9tICcuL2FwcHMvY29jNy1wYXJzZXIuanMnXG5pbXBvcnQgeyBDb0M3Q2hlY2sgfSBmcm9tICcuL2NoZWNrLmpzJ1xuaW1wb3J0IHsgQ29DN01lbnUgfSBmcm9tICcuL21lbnUuanMnXG5pbXBvcnQgeyBEYW1hZ2VDYXJkIH0gZnJvbSAnLi9jaGF0L2NhcmRzL2RhbWFnZS5qcydcbmltcG9ydCB7IENvQzdDYW52YXMgfSBmcm9tICcuL2FwcHMvY2FudmFzLmpzJ1xuaW1wb3J0IHsgQ29DN1NldHRpbmdzRGlyZWN0b3J5IH0gZnJvbSAnLi9zZXR0aW5ncy1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSB9IGZyb20gJy4vY29tcGVuZGl1bS1kaXJlY3RvcnkuanMnXG5pbXBvcnQgeyBDb0M3QWN0b3JEaXJlY3RvcnkgfSBmcm9tICcuL2FjdG9yLWRpcmVjdG9yeS5qcydcbmltcG9ydCB7IENvQzdIb29rcyB9IGZyb20gJy4vaG9va3MvaW5kZXguanMnXG5pbXBvcnQgKiBhcyBEaWNlQm90IGZyb20gJy4vZGljZWJvdC5qcydcbmltcG9ydCAnLi4vc3R5bGVzL3N5c3RlbS9pbmRleC5sZXNzJ1xuaW1wb3J0IHsgQ29DN0NoYXNlU2hlZXQgfSBmcm9tICcuL2l0ZW1zL2NoYXNlL3NoZWV0LmpzJ1xuaW1wb3J0IHsgQ29DN1NvY2tldCB9IGZyb20gJy4vaG9va3Mvc29ja2V0LmpzJ1xuaW1wb3J0IHsgQ29DN1N5c3RlbVNvY2tldCB9IGZyb20gJy4vYXBwcy9jb2M3LXN5c3RlbS1zb2NrZXQuanMnXG5pbXBvcnQgeyBEcm9wQWN0b3JTaGVldERhdGEgfSBmcm9tICcuL2hvb2tzL2Ryb3AtYWN0b3Itc2hlZXQtZGF0YS5qcydcblxuLy8gQ2FyZCBpbml0XG5pbXBvcnQgeyBpbml0RUNDIH0gZnJvbSAnLi9jb21tb24vY2hhdGNhcmRsaWIvc3JjL2NoYXRjYXJkbGliLmpzJ1xuaW1wb3J0IHsgQ2hhc2VPYnN0YWNsZUNhcmQgfSBmcm9tICcuL2NoYXQvY2FyZHMvY2hhc2Utb2JzdGFjbGUuanMnXG5pbXBvcnQgeyBDb0M3Q29udGV4dE1lbnUgfSBmcm9tICcuL2NvbnRleHQtbWVudS5qcydcblxuSG9va3Mub24oJ3JlbmRlclNldHRpbmdzQ29uZmlnJywgKGFwcCwgaHRtbCwgb3B0aW9ucykgPT4ge1xuICBjb25zdCBzeXN0ZW1UYWIgPSAkKGFwcC5mb3JtKS5maW5kKCcudGFiW2RhdGEtdGFiPXN5c3RlbV0nKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kaXNwbGF5SW5pdERpY2VzXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVJbml0aWF0aXZlJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5zdGFuYnlHTVJvbGxzXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVSb2xsJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC50cnVzdGVkQ2FuTW9kZnlDaGF0Q2FyZF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlQ2hhdENhcmRzJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5lbmFibGVTdGF0dXNJY29uc10nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlU2NlbmUnKSArXG4gICAgICAgICc8L2gyPidcbiAgICApXG4gIHN5c3RlbVRhYlxuICAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLm92ZXJyaWRlR2FtZUFydHdvcmtdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUdhbWVBcnR3b3JrJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kaXNwbGF5UGxheWVyTmFtZU9uU2hlZXRdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZVNoZWV0JykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kaXNyZWdhcmRVc2VQZXJSb3VuZF0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlV2VhcG9uJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5zeW5jRGljZTNkXScpXG4gICAgLmNsb3Nlc3QoJ2Rpdi5mb3JtLWdyb3VwJylcbiAgICAuYmVmb3JlKFxuICAgICAgJzxoMiBjbGFzcz1cInNldHRpbmctaGVhZGVyXCI+JyArXG4gICAgICAgIGdhbWUuaTE4bi5sb2NhbGl6ZSgnU0VUVElOR1MuVGl0bGVEaWNlU29OaWNlJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnaW5wdXRbbmFtZT1Db0M3XFxcXC5kZWJ1Z21vZGVdJylcbiAgICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAgIC5iZWZvcmUoXG4gICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZURldmVsb3BlckRlYnVnJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICBzeXN0ZW1UYWJcbiAgICAuZmluZCgnc2VsZWN0W25hbWU9Q29DN1xcXFwuYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZV0nKVxuICAgIC5jbG9zZXN0KCdkaXYuZm9ybS1ncm91cCcpXG4gICAgLmJlZm9yZShcbiAgICAgICc8aDIgY2xhc3M9XCJzZXR0aW5nLWhlYWRlclwiPicgK1xuICAgICAgICBnYW1lLmkxOG4ubG9jYWxpemUoJ1NFVFRJTkdTLlRpdGxlUm9sbFRhYmxlJykgK1xuICAgICAgICAnPC9oMj4nXG4gICAgKVxuICAvLyBNT1ZFRCBUTyBDSEFTU0UgSU5ESVZJRFVBTCBTRVRUSU5HXG4gIC8vIHN5c3RlbVRhYlxuICAvLyAgIC5maW5kKCdpbnB1dFtuYW1lPUNvQzdcXFxcLmNoYXNlU2hvd1Rva2VuTW92ZW1lbnRdJylcbiAgLy8gICAuY2xvc2VzdCgnZGl2LmZvcm0tZ3JvdXAnKVxuICAvLyAgIC5iZWZvcmUoXG4gIC8vICAgICAnPGgyIGNsYXNzPVwic2V0dGluZy1oZWFkZXJcIj4nICtcbiAgLy8gICAgICAgZ2FtZS5pMThuLmxvY2FsaXplKCdTRVRUSU5HUy5UaXRsZUNoYXNlU2V0dGluZ3MnKSArXG4gIC8vICAgICAgICc8L2gyPidcbiAgLy8gICApXG59KVxuXG5Ib29rcy5vbmNlKCdpbml0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICBnYW1lLkNvQzcgPSB7XG4gICAgbWFjcm9zOiB7XG4gICAgICBza2lsbENoZWNrOiBDb0M3VXRpbGl0aWVzLnNraWxsQ2hlY2tNYWNybyxcbiAgICAgIHdlYXBvbkNoZWNrOiBDb0M3VXRpbGl0aWVzLndlYXBvbkNoZWNrTWFjcm8sXG4gICAgICBjaGVjazogQ29DN1V0aWxpdGllcy5jaGVja01hY3JvXG4gICAgfSxcbiAgICBjYXJkczoge1xuICAgICAgRGFtYWdlQ2FyZFxuICAgIH0sXG4gICAgZGV2OiB7XG4gICAgICBkaWNlOiB7XG4gICAgICAgIGFsd2F5c0NyaXQ6IGZhbHNlLFxuICAgICAgICBhbHdheXNGdW1ibGU6IGZhbHNlXG4gICAgICB9XG4gICAgfSxcbiAgICBlcmFzOiAoZXJhLCBuYW1lKSA9PiB7XG4gICAgICBDT0M3LmVyYXNbZXJhXSA9IG5hbWVcbiAgICB9XG4gIH1cbiAgQ29tYmF0LnByb3RvdHlwZS5yb2xsSW5pdGlhdGl2ZSA9IHJvbGxJbml0aWF0aXZlXG59KVxuXG5pbml0RUNDKENoYXNlT2JzdGFjbGVDYXJkKVxuXG5Ib29rcy5vbigncmVuZGVyQ29tYmF0VHJhY2tlcicsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDb21iYXQucmVuZGVyQ29tYmF0VHJhY2tlcihhcHAsIGh0bWwsIGRhdGEpXG4pXG5cbkRpY2VCb3QubGlzdGVuKClcbkNvQzdIb29rcy5saXN0ZW4oKVxuXG5Ib29rcy5vbmNlKCdzb2NrZXRsaWIucmVhZHknLCBDb0M3U29ja2V0KVxuXG5Ib29rcy5vbmNlKCdzZXR1cCcsIGZ1bmN0aW9uICgpIHtcbiAgLy8gTG9jYWxpemUgQ09ORklHIG9iamVjdHMgb25jZSB1cC1mcm9udFxuICBjb25zdCB0b0xvY2FsaXplID0gW1xuICAgICdzcGVsbFByb3BlcnRpZXMnLFxuICAgICdib29rVHlwZScsXG4gICAgJ3RhbGVudFR5cGUnLFxuICAgICdvY2N1cGF0aW9uUHJvcGVydGllcycsXG4gICAgJ3N0YXR1c1R5cGUnXG4gIF1cblxuICBmb3IgKGNvbnN0IG8gb2YgdG9Mb2NhbGl6ZSkge1xuICAgIGNvbnN0IGxvY2FsaXplZCA9IE9iamVjdC5lbnRyaWVzKENPQzdbb10pLm1hcChlID0+IHtcbiAgICAgIHJldHVybiBbZVswXSwgZ2FtZS5pMThuLmxvY2FsaXplKGVbMV0pXVxuICAgIH0pXG4gICAgQ09DN1tvXSA9IGxvY2FsaXplZC5yZWR1Y2UoKG9iaiwgZSkgPT4ge1xuICAgICAgb2JqW2VbMF1dID0gZVsxXVxuICAgICAgcmV0dXJuIG9ialxuICAgIH0sIHt9KVxuICB9XG5cbiAgbGV0IGVmZmVjdEluZGV4ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmluZEluZGV4KFxuICAgIHQgPT4gdC5pZCA9PT0gQ09DNy5zdGF0dXMuZGVhZFxuICApXG4gIGlmIChlZmZlY3RJbmRleCAhPT0gLTEpIHtcbiAgICBDT05GSUcuc3RhdHVzRWZmZWN0c1tlZmZlY3RJbmRleF0uaWNvbiA9XG4gICAgICAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy90b21ic3RvbmUuc3ZnJ1xuICB9XG4gIGVmZmVjdEluZGV4ID0gQ09ORklHLnN0YXR1c0VmZmVjdHMuZmluZEluZGV4KFxuICAgIHQgPT4gdC5pZCA9PT0gQ09DNy5zdGF0dXMudW5jb25zY2lvdXNcbiAgKVxuICBpZiAoZWZmZWN0SW5kZXggIT09IC0xKSB7XG4gICAgQ09ORklHLnN0YXR1c0VmZmVjdHNbZWZmZWN0SW5kZXhdLmljb24gPVxuICAgICAgJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMva25vY2tlZC1vdXQtc3RhcnMuc3ZnJ1xuICB9XG4gIENPTkZJRy5zdGF0dXNFZmZlY3RzLnVuc2hpZnQoXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lLFxuICAgICAgbGFiZWw6ICdDb0M3LkJvdXRPZk1hZG5lc3NOYW1lJyxcbiAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2hhbmdpbmctc3BpZGVyLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZSxcbiAgICAgIGxhYmVsOiAnQ29DNy5JbnNhbml0eU5hbWUnLFxuICAgICAgaWNvbjogJ3N5c3RlbXMvQ29DNy9hc3NldHMvaWNvbnMvdGVudGFjbGVzLXNrdWxsLnN2ZydcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiBDT0M3LnN0YXR1cy5jcml0aWNhbFdvdW5kcyxcbiAgICAgIGxhYmVsOiAnQ29DNy5Dcml0aWNhbFdvdW5kcycsXG4gICAgICBpY29uOiAnc3lzdGVtcy9Db0M3L2Fzc2V0cy9pY29ucy9hcm0tc2xpbmcuc3ZnJ1xuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IENPQzcuc3RhdHVzLmR5aW5nLFxuICAgICAgbGFiZWw6ICdDb0M3LkR5aW5nJyxcbiAgICAgIGljb246ICdzeXN0ZW1zL0NvQzcvYXNzZXRzL2ljb25zL2hlYXJ0LWJlYXRzLnN2ZydcbiAgICB9XG4gIClcbn0pXG5cbkhvb2tzLm9uKCdjcmVhdGVBY3RpdmVFZmZlY3QnLCAoZGF0YSwgb3B0aW9ucywgdXNlcklkKSA9PiB7XG4gIGlmIChcbiAgICBnYW1lLnVzZXJJZCA9PT0gdXNlcklkICYmXG4gICAgdHlwZW9mIGRhdGEuZmxhZ3MuY29yZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgZGF0YS5mbGFncy5jb3JlLnN0YXR1c0lkICE9PSAndW5kZWZpbmVkJ1xuICApIHtcbiAgICBzd2l0Y2ggKGRhdGEuZmxhZ3MuY29yZS5zdGF0dXNJZCkge1xuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgIGRhdGEucGFyZW50LnNldENvbmRpdGlvbihkYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQsIHtcbiAgICAgICAgICBmb3JjZVZhbHVlOiB0cnVlXG4gICAgICAgIH0pXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgICB7XG4gICAgICAgICAgY29uc3QgcmVhbFRpbWUgPSBkYXRhLmZsYWdzLkNvQzc/LnJlYWxUaW1lXG4gICAgICAgICAgbGV0IGR1cmF0aW9uID0gbnVsbFxuICAgICAgICAgIGlmIChyZWFsVGltZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uPy5yb3VuZHNcbiAgICAgICAgICB9IGVsc2UgaWYgKHJlYWxUaW1lID09PSBmYWxzZSkge1xuICAgICAgICAgICAgZHVyYXRpb24gPSBkYXRhLmR1cmF0aW9uPy5zZWNvbmRzXG4gICAgICAgICAgICBpZiAoIWlzTmFOKGR1cmF0aW9uKSkge1xuICAgICAgICAgICAgICBkdXJhdGlvbiA9IE1hdGguZmxvb3IoZHVyYXRpb24gLyAzNjAwKVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBkYXRhLnBhcmVudC5zZXRDb25kaXRpb24oQ09DNy5zdGF0dXMudGVtcG9JbnNhbmUsIHtcbiAgICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWUsXG4gICAgICAgICAgICByZWFsVGltZSxcbiAgICAgICAgICAgIGR1cmF0aW9uXG4gICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBicmVha1xuICAgIH1cbiAgfVxufSlcblxuSG9va3Mub24oJ2RlbGV0ZUFjdGl2ZUVmZmVjdCcsIChkYXRhLCBvcHRpb25zLCB1c2VySWQpID0+IHtcbiAgaWYgKFxuICAgIGdhbWUudXNlcklkID09PSB1c2VySWQgJiZcbiAgICB0eXBlb2YgZGF0YS5mbGFncy5jb3JlICE9PSAndW5kZWZpbmVkJyAmJlxuICAgIHR5cGVvZiBkYXRhLmZsYWdzLmNvcmUuc3RhdHVzSWQgIT09ICd1bmRlZmluZWQnXG4gICkge1xuICAgIHN3aXRjaCAoZGF0YS5mbGFncy5jb3JlLnN0YXR1c0lkKSB7XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLnRlbXBvSW5zYW5lOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5pbmRlZkluc2FuZTpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMudW5jb25zY2lvdXM6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmNyaXRpY2FsV291bmRzOlxuICAgICAgY2FzZSBDT0M3LnN0YXR1cy5keWluZzpcbiAgICAgIGNhc2UgQ09DNy5zdGF0dXMucHJvbmU6XG4gICAgICBjYXNlIENPQzcuc3RhdHVzLmRlYWQ6XG4gICAgICAgIGRhdGEucGFyZW50LnVuc2V0Q29uZGl0aW9uKGRhdGEuZmxhZ3MuY29yZS5zdGF0dXNJZCwge1xuICAgICAgICAgIGZvcmNlVmFsdWU6IHRydWVcbiAgICAgICAgfSlcbiAgICB9XG4gIH1cbn0pXG5cbi8vIFRoaXMgd2lsbCBoaWRlIHRoZSBpdGVtIGNhbGxlZCAnX19Db0M3SW50ZXJuYWxJdGVtX18nXG4vLyBUaGlzIGl0ZW0gaXMgdXNlZCBmb3IgaW50ZXJuYWwgcHVycG9zZXMgYW5kIHNob3VsZCBub3QgYmUgc2VlbiBieSBhbnlvbmVcbkhvb2tzLm9uKCdjaGFuZ2VTaWRlYmFyVGFiJywgZGlyZWN0b3J5ID0+IHtcbiAgaWYgKGRpcmVjdG9yeSBpbnN0YW5jZW9mIEl0ZW1EaXJlY3RvcnkpIHtcbiAgICBjb25zdCBpdGVtID0gZ2FtZS5pdGVtcy5maW5kKGkgPT4gaS5uYW1lID09PSAnX19Db0M3SW50ZXJuYWxJdGVtX18nKVxuICAgIGlmIChpdGVtKSB7XG4gICAgICBjb25zdCBodG1sID0gZGlyZWN0b3J5Ll9lbGVtZW50XG4gICAgICBjb25zdCBpdGVtRWxlbWVudCA9IGh0bWwuZmluZChgW2RhdGEtZG9jdW1lbnQtaWQ9JyR7aXRlbS5pZH0nXWApXG4gICAgICBpZiAoaXRlbUVsZW1lbnQpIGl0ZW1FbGVtZW50WzBdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcbiAgICB9XG4gIH1cbn0pXG5cbkhvb2tzLm9uKCdob3RiYXJEcm9wJywgKGJhciwgZGF0YSwgc2xvdCkgPT4ge1xuICByZXR1cm4gQ29DN1V0aWxpdGllcy5jcmVhdGVNYWNybyhiYXIsIGRhdGEsIHNsb3QpXG59KVxuXG5Ib29rcy5vbigncmVuZGVyQ2hhdExvZycsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdDaGF0LmNoYXRMaXN0ZW5lcnMoYXBwLCBodG1sLCBkYXRhKVxuKVxuSG9va3Mub24oJ3VwZGF0ZUNoYXRNZXNzYWdlJywgKGNoYXRNZXNzYWdlLCBjaGF0RGF0YSwgZGlmZiwgc3BlYWtlcikgPT5cbiAgQ29DN0NoYXQub25VcGRhdGVDaGF0TWVzc2FnZShjaGF0TWVzc2FnZSwgY2hhdERhdGEsIGRpZmYsIHNwZWFrZXIpXG4pXG5cbkhvb2tzLm9uKCdyZWFkeScsIGFzeW5jICgpID0+IHtcbiAgYXdhaXQgVXBkYXRlci5jaGVja0ZvclVwZGF0ZSgpXG5cbiAgLy8gZ2FtZS5Db0M3Lm1lbnVzID0gbmV3IENvQzdNZW51KCk7XG5cbiAgYWN0aXZhdGVHbG9iYWxMaXN0ZW5lcigpXG5cbiAgLy8gc2V0R2xvYmFsQ3NzVmFyKClcblxuICBnYW1lLkNvQzcuc2tpbGxMaXN0ID0gYXdhaXQgZ2FtZS5wYWNrcy5nZXQoJ0NvQzcuc2tpbGxzJyk/LmdldERvY3VtZW50cygpXG5cbiAgZ2FtZS5zb2NrZXQub24oJ3N5c3RlbS5Db0M3JywgYXN5bmMgZGF0YSA9PiB7XG4gICAgQ29DN1N5c3RlbVNvY2tldC5jYWxsU29ja2V0KGRhdGEpXG4gIH0pXG5cbiAgLy8gXCJTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4XCI6IFwiUGhvYmlhcyBpbmRleFwiLFxuICAvLyBcIlNFVFRJTkdTLkJvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXhIaW50XCI6IFwiVGhlIGluZGV4IChyb2xsIHJlc3VsdCkgdGhhdCB3aWxsIHRyaWdnZXIgYSByb2xsIGluIHRoZSBwaG9iaWFzIHRhYmxlXCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4XCI6IFwiTWFuaWFzIGluZGV4XCIsXG4gIC8vIFwiU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludFwiOiBcIlRoZSBpbmRleCAocm9sbCByZXN1bHQpIHRoYXQgd2lsbCB0cmlnZ2VyIGEgcm9sbCBpbiB0aGUgbWFuaWFzIHRhYmxlXCIsXG4gIC8vIFwiU0VUVElOR1MuU2FtcGxlUGhvYmlhc1RhYmxlXCI6IFwiU2FtcGxlIHBob2JpYXMgdGFibGVcIixcbiAgLy8gXCJTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZVwiOiBcIlNhbXBsZSBNYW5pYXMgdGFibGVcIixcblxuICBmdW5jdGlvbiBfdGFibGVTZXR0aW5nc0NoYW5nZWQgKHRhYmxlLCBpZCkge1xuICAgIGlmIChpZCA9PT0gJ25vbmUnKSBnYW1lLkNvQzcudGFibGVzW3RhYmxlXSA9IG51bGxcbiAgICBlbHNlIGdhbWUuQ29DNy50YWJsZXNbdGFibGVdID0gZ2FtZS50YWJsZXMuZ2V0KGlkKVxuICB9XG5cbiAgLy8gZnVuY3Rpb24gX3RhYmxlSW5kZXhDaGFuZ2VkKCB0YWJsZSwgaW5kZXgpe1xuICAvLyAgZ2FtZS5Db0M3LnRhYmxlc1t0YWJsZV09aW5kZXg7XG4gIC8vIH1cblxuICBjb25zdCB0YWJsZUNob2ljZSA9IHsgbm9uZTogJ1NFVFRJTkdTLkxldEtlZXBlckRlY2lkZScgfVxuICBmb3IgKGNvbnN0IHQgb2YgZ2FtZS50YWJsZXMpIHtcbiAgICB0YWJsZUNob2ljZVt0Ll9pZF0gPSB0Lm5hbWVcbiAgfVxuXG4gIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScsXG4gICAgc2NvcGU6ICd3b3JsZCcsXG4gICAgY29uZmlnOiB0cnVlLFxuICAgIGRlZmF1bHQ6ICdub25lJyxcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgY2hvaWNlczogdGFibGVDaG9pY2UsXG4gICAgb25DaGFuZ2U6IGlkID0+IF90YWJsZVNldHRpbmdzQ2hhbmdlZCgnYm91dE9mTWFkbmVzc19TdW1tYXJ5JywgaWQpXG4gIH0pXG5cbiAgZ2FtZS5zZXR0aW5ncy5yZWdpc3RlcignQ29DNycsICdib3V0T2ZNYWRuZXNzUmVhbFRpbWVUYWJsZScsIHtcbiAgICBuYW1lOiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnLFxuICAgIHNjb3BlOiAnd29ybGQnLFxuICAgIGNvbmZpZzogdHJ1ZSxcbiAgICBkZWZhdWx0OiAnbm9uZScsXG4gICAgdHlwZTogU3RyaW5nLFxuICAgIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAgIG9uQ2hhbmdlOiBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoJ2JvdXRPZk1hZG5lc3NfUmVhbFRpbWUnLCBpZClcbiAgfSlcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NQaG9iaWFzSW5kZXgnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyxcbiAgLy8gIGhpbnQ6ICdTRVRUSU5HUy5Cb3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDksXG4gIC8vICB0eXBlOiBOdW1iZXIsXG4gIC8vICBvbkNoYW5nZTogIGlkID0+IF90YWJsZUluZGV4Q2hhbmdlZCggJ3Bob2JpYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLkJvdXRPZk1hZG5lc3NNYW5pYXNJbmRleCcsXG4gIC8vICBoaW50OiAnU0VUVElOR1MuQm91dE9mTWFkbmVzc01hbmlhc0luZGV4SGludCcsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6IDEwLFxuICAvLyAgdHlwZTogTnVtYmVyLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVJbmRleENoYW5nZWQoICdtYW5pYXNJbmRleCcsIGlkKVxuICAvLyB9KTtcblxuICAvLyBnYW1lLnNldHRpbmdzLnJlZ2lzdGVyKCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScse1xuICAvLyAgbmFtZTogJ1NFVFRJTkdTLlNhbXBsZVBob2JpYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdwaG9iaWFzJywgaWQpXG4gIC8vIH0pO1xuXG4gIC8vIGdhbWUuc2V0dGluZ3MucmVnaXN0ZXIoJ0NvQzcnLCAnc2FtcGxlTWFuaWFzVGFibGUnLHtcbiAgLy8gIG5hbWU6ICdTRVRUSU5HUy5TYW1wbGVNYW5pYXNUYWJsZScsXG4gIC8vICBzY29wZTogJ3dvcmxkJyxcbiAgLy8gIGNvbmZpZzogdHJ1ZSxcbiAgLy8gIGRlZmF1bHQ6ICdub25lJyxcbiAgLy8gIHR5cGU6IFN0cmluZyxcbiAgLy8gIGNob2ljZXM6IHRhYmxlQ2hvaWNlLFxuICAvLyAgb25DaGFuZ2U6ICBpZCA9PiBfdGFibGVTZXR0aW5nc0NoYW5nZWQoICdtYW5pYXMnLCBpZClcbiAgLy8gfSk7XG5cbiAgZ2FtZS5Db0M3LnRhYmxlcyA9IHtcbiAgICBib3V0T2ZNYWRuZXNzX1N1bW1hcnk6XG4gICAgICBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzU3VtbWFyeVRhYmxlJykgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBnYW1lLnRhYmxlcy5nZXQoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1N1bW1hcnlUYWJsZScpXG4gICAgICAgICksXG4gICAgYm91dE9mTWFkbmVzc19SZWFsVGltZTpcbiAgICAgIGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2JvdXRPZk1hZG5lc3NSZWFsVGltZVRhYmxlJykgPT09ICdub25lJ1xuICAgICAgICA/IG51bGxcbiAgICAgICAgOiBnYW1lLnRhYmxlcy5nZXQoXG4gICAgICAgICAgZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnYm91dE9mTWFkbmVzc1JlYWxUaW1lVGFibGUnKVxuICAgICAgICApXG4gICAgLy8gbWFuaWFzSW5kZXg6IGdlLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzUGhvYmlhc0luZGV4JyksXG4gICAgLy8gcGhvYmlhc0luZGV4OiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdib3V0T2ZNYWRuZXNzTWFuaWFzSW5kZXgnKSxcbiAgICAvLyBwaG9iaWFzOiAoJ25vbmUnID09IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZVBob2JpYXNUYWJsZScpKT9udWxsOmdhbWUudGFibGVzLmdldChnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdzYW1wbGVQaG9iaWFzVGFibGUnKSksXG4gICAgLy8gbWFuaWFzOiAoJ25vbmUnID09IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZU1hbmlhc1RhYmxlJykpP251bGw6Z2FtZS50YWJsZXMuZ2V0KGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ3NhbXBsZU1hbmlhc1RhYmxlJykpLFxuICB9XG59KVxuXG4vLyBIb29rcy5vbigncHJlQ3JlYXRlQWN0b3InLCAoY3JlYXRlRGF0YSkgPT4gQ29DQWN0b3IuaW5pdFRva2VuKCBjcmVhdGVEYXRhKSk7XG5cbkhvb2tzLm9uKFxuICAncmVuZGVyQ29DN0NoYXNlU2hlZXQnLFxuICAvKiogYXN5bmMgKi8gKGFwcCwgaHRtbCwgZGF0YSkgPT5cbiAgICAvKiogYXdhaXQgKi8gQ29DN0NoYXNlU2hlZXQuc2V0U2Nyb2xsKGFwcCwgaHRtbCwgZGF0YSlcbilcblxuSG9va3Mub24oJ2Nsb3NlQ29DN0NoYXNlU2hlZXQnLCAoYXBwLCBodG1sKSA9PlxuICBDb0M3Q2hhc2VTaGVldC5vbkNsb3NlKGFwcCwgaHRtbClcbilcblxuLy8gQ2FsbGVkIG9uIGNsb3NpbmcgYSBjaGFyYWN0ZXIgc2hlZXQgdG8gbG9jayBpdCBvbiBnZXR0aW5nIGl0IHRvIGRpc3BsYXkgdmFsdWVzXG5Ib29rcy5vbignY2xvc2VBY3RvclNoZWV0JywgY2hhcmFjdGVyU2hlZXQgPT4gY2hhcmFjdGVyU2hlZXQub25DbG9zZVNoZWV0KCkpXG5Ib29rcy5vbigncmVuZGVyQ29DN0NyZWF0dXJlU2hlZXQnLCAoYXBwLCBodG1sLCBkYXRhKSA9PlxuICBDb0M3Q3JlYXR1cmVTaGVldC5mb3JjZUF1dG8oYXBwLCBodG1sLCBkYXRhKVxuKVxuSG9va3Mub24oJ3JlbmRlckNvQzdOUENTaGVldCcsIChhcHAsIGh0bWwsIGRhdGEpID0+XG4gIENvQzdOUENTaGVldC5mb3JjZUF1dG8oYXBwLCBodG1sLCBkYXRhKVxuKVxuLy8gSG9va3Mub24oJ3VwZGF0ZUFjdG9yJywgKGFjdG9yLCBkYXRhVXBkYXRlKSA9PiBDb0NBY3Rvci51cGRhdGVBY3RvciggYWN0b3IsIGRhdGFVcGRhdGUpKTtcbi8vIEhvb2tzLm9uKCd1cGRhdGVUb2tlbicsIChzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpID0+IENvQ0FjdG9yLnVwZGF0ZVRva2VuKCBzY2VuZSwgdG9rZW4sIGRhdGFVcGRhdGUpKTtcblxuSG9va3Mub24oJ2NoYXRNZXNzYWdlJywgQ29DN1V0aWxpdGllcy5QYXJzZUNoYXRFbnRyeSlcbi8vIEhvb2tzLm9uKCdwcmVDcmVhdGVUb2tlbicsICggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkgPT4gQ29DQWN0b3IucHJlQ3JlYXRlVG9rZW4oIHNjZW5lLCBhY3Rvciwgb3B0aW9ucywgaWQpKVxuLy8gSG9va3Mub24oJ2NyZWF0ZVRva2VuJywgKCBzY2VuZSwgYWN0b3IsIG9wdGlvbnMsIGlkKSA9PiBDb0NBY3Rvci5wcmVDcmVhdGVUb2tlbiggc2NlbmUsIGFjdG9yLCBvcHRpb25zLCBpZCkpXG4vLyBIb29rcy5vbihcInJlbmRlckNoYXRMb2dcIiwgKGFwcCwgaHRtbCwgZGF0YSkgPT4gQ29DN0l0ZW0uY2hhdExpc3RlbmVycyhodG1sKSk7XG5cbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgKC8qIGNvbnRyb2xzICovKSA9PiB7XG4gIC8vIGlmKCBnYW1lLnVzZXIuaXNHTSl7XG4gIC8vICBsZXQgZ3JvdXAgPSBjb250cm9scy5maW5kKGIgPT4gYi5uYW1lID09ICd0b2tlbicpO1xuICAvLyAgZ3JvdXAudG9vbHMucHVzaCh7XG4gIC8vICAgIHRvZ2dsZTogdHJ1ZSxcbiAgLy8gICAgaWNvbiA6ICdmYXMgZmEtYW5nbGUtZG91YmxlLXVwJyxcbiAgLy8gICAgbmFtZTogJ2RldnBoYXNlJyxcbiAgLy8gICAgYWN0aXZlOiBnYW1lLnNldHRpbmdzLmdldCgnQ29DNycsICdkZXZlbG9wbWVudEVuYWJsZWQnKSxcbiAgLy8gICAgdGl0bGU6IGdhbWUuc2V0dGluZ3MuZ2V0KCdDb0M3JywgJ2RldmVsb3BtZW50RW5hYmxlZCcpPyBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkRldlBoYXNlRW5hYmxlZCcpOiBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkRldlBoYXNlRGlzYWJsZWQnKSxcbiAgLy8gICAgb25DbGljayA6YXN5bmMgKCkgPT4gYXdhaXQgQ29DN1V0aWxpdGllcy50b2dnbGVEZXZQaGFzZSgpXG4gIC8vICB9KTtcbiAgLy8gIGdyb3VwLnRvb2xzLnB1c2goe1xuICAvLyAgICB0b2dnbGU6IHRydWUsXG4gIC8vICAgIGljb24gOiAnZmFzIGZhcyBmYS11c2VyLWVkaXQnLFxuICAvLyAgICBuYW1lOiAnY2hhcmNyZWF0ZScsXG4gIC8vICAgIGFjdGl2ZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpLFxuICAvLyAgICB0aXRsZTogZ2FtZS5zZXR0aW5ncy5nZXQoJ0NvQzcnLCAnY2hhckNyZWF0aW9uRW5hYmxlZCcpPyBnYW1lLmkxOG4ubG9jYWxpemUoICdDb0M3LkNoYXJDcmVhdGlvbkVuYWJsZWQnKTogZ2FtZS5pMThuLmxvY2FsaXplKCAnQ29DNy5DaGFyQ3JlYXRpb25EaXNhYmxlZCcpLFxuICAvLyAgICBvbkNsaWNrIDphc3luYyAoKSA9PiBhd2FpdCBDb0M3VXRpbGl0aWVzLnRvZ2dsZUNoYXJDcmVhdGlvbigpXG4gIC8vICB9KTtcbiAgLy8gfVxufSlcblxuLy8gSG9va3Mub24oJ3JlbmRlclNjZW5lQ29udHJvbHMnLCAoKSA9PiBDb0M3VXRpbGl0aWVzLnVwZGF0ZUNoYXJTaGVldHMoKSk7XG4vLyBIb29rcy5vbigncmVuZGVyU2NlbmVOYXZpZ2F0aW9uJywgKCkgPT4gQ29DN1V0aWxpdGllcy51cGRhdGVDaGFyU2hlZXRzKCkpO1xuSG9va3Mub24oJ3JlbmRlckl0ZW1TaGVldCcsIENvQzdQYXJzZXIuUGFyc2VTaGVldENvbnRlbnQpXG5Ib29rcy5vbigncmVuZGVySm91cm5hbFBhZ2VTaGVldCcsIENvQzdQYXJzZXIuUGFyc2VTaGVldENvbnRlbnQpXG5Ib29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIENvQzdQYXJzZXIuUGFyc2VTaGVldENvbnRlbnQpXG4vLyBTaGVldCBjc3Mgb3B0aW9uc1xuLy8gSG9va3Mub24oJ3JlbmRlckNvQzdDaGFyYWN0ZXJTaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldCk7XG5Ib29rcy5vbigncmVuZGVyQWN0b3JTaGVldCcsIENvQzdDaGFyYWN0ZXJTaGVldC5yZW5kZXJTaGVldClcbkhvb2tzLm9uKCdyZW5kZXJJdGVtU2hlZXQnLCBDb0M3Q2hhcmFjdGVyU2hlZXQucmVuZGVyU2hlZXQpXG5cbi8vIEhvb2tzLm9uKCdkcm9wQ2FudmFzRGF0YScsIENvQzdQYXJzZXIub25Ecm9wU29tZXRoaW5nKTtcbkhvb2tzLm9uKCdnZXRTY2VuZUNvbnRyb2xCdXR0b25zJywgQ29DN01lbnUuZ2V0QnV0dG9ucylcbkhvb2tzLm9uKCdyZW5kZXJTY2VuZUNvbnRyb2xzJywgQ29DN01lbnUucmVuZGVyQ29udHJvbHMpXG5cbkhvb2tzLm9uKCdkcm9wQ2FudmFzRGF0YScsIENvQzdDYW52YXMub25Ecm9wU29tZXRoaW5nKVxuXG5Ib29rcy5vbignZHJvcEFjdG9yU2hlZXREYXRhJywgRHJvcEFjdG9yU2hlZXREYXRhKVxuXG5mdW5jdGlvbiBhY3RpdmF0ZUdsb2JhbExpc3RlbmVyICgpIHtcbiAgY29uc3QgYm9keSA9ICQoJ2JvZHknKVxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIENvQzdDb250ZXh0TWVudS5jbG9zZUFsbClcbiAgYm9keS5vbignY2xpY2snLCAnYS5jb2M3LWlubGluZS1jaGVjaycsIENvQzdDaGVjay5fb25DbGlja0lubGluZVJvbGwpXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIF9vbkxlZnRDbGljaylcbn1cblxuZnVuY3Rpb24gX29uTGVmdENsaWNrIChldmVudCkge1xuICByZXR1cm4gZXZlbnQuc2hpZnRLZXlcbn1cblxuQ09ORklHLnVpLnNldHRpbmdzID0gQ29DN1NldHRpbmdzRGlyZWN0b3J5XG5DT05GSUcudWkuY29tcGVuZGl1bSA9IENvQzdDb21wZW5kaXVtRGlyZWN0b3J5XG5DT05GSUcudWkuYWN0b3JzID0gQ29DN0FjdG9yRGlyZWN0b3J5XG4iLCIvKiBnbG9iYWwgQ2hhdE1lc3NhZ2UsIGdhbWUsIEhvb2tzLCBSb2xsLCB1aSAqL1xuXG4vKipcbiAqQ2FsbG9mQ3RodWxodSg3dGhFZC4pIERlZmluZSB5b3VyIG93biBjb21tYW5kc1xuICpIZXJlLCB3ZSByZWNlaXZlIHRoZSBjaGF0IE1lc3NhZ2VzIGFuZCBkZXRlcm1pbmUgZWFjaCBjb21tYW5kLlxuICpbL0NDXURlZmluZSBhIGNvbW1hbmQgdG8ganVkZ2UgYSBub3JtYWwgZGljZS5cbiAqWy9DQlJdIENvbW1hbmQgdG8gZGVmaW5lIHRoZSBkZWNpc2lvbiBvbiBjb21iaW5hdGlvbiByb2xscy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxpc3RlbiAoKSB7XG4gIEhvb2tzLm9uKCdjaGF0TWVzc2FnZScsIChodG1sLCBjb250ZW50KSA9PiB7XG4gICAgLy8gSSdtIGN1cnJlbnRseSB1c2luZyBpdCBmb3IgdGVzdGluZyBib251cyBkaWNlLlxuICAgIGlmIChjb250ZW50Lm1hdGNoKC9eXFwvKGNicnxjYykvaSkpIHtcbiAgICAgIC8vIEV4dHJhY3RpbmcgbnVtYmVycyBmcm9tIGNvbWJpbmF0aW9uIHJvbGxzXG4gICAgICBjb25zdCBjb21tYW5kcyA9IGNvbnRlbnQubWF0Y2goLyhcXGQrKS9nKVxuICAgICAgaWYgKGNvbW1hbmRzKSB7XG4gICAgICAgIG5ldyBSb2xsKCcxZDEwMCcpLnJvbGwoeyBhc3luYzogdHJ1ZSB9KS50aGVuKHIgPT4ge1xuICAgICAgICAgIGNvbnN0IHMgPSByLnJlc3VsdFxuICAgICAgICAgIGNvbnN0IHJlcyA9IGNvbW1hbmRzXG4gICAgICAgICAgICAubWFwKG0gPT4ge1xuICAgICAgICAgICAgICBsZXQgcmVzID0gJydcbiAgICAgICAgICAgICAgaWYgKHMgPD0gMSkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkNyaXRpY2FsU3VjY2VzcycpXG4gICAgICAgICAgICAgIGVsc2UgaWYgKHMgPj0gMTAwKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRnVtYmxlJylcbiAgICAgICAgICAgICAgZWxzZSBpZiAocyA8PSBtIC8gNSkge1xuICAgICAgICAgICAgICAgIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5FeHRyZW1lU3VjY2VzcycpXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA8PSBtIC8gMikge1xuICAgICAgICAgICAgICAgIHJlcyA9IGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5IYXJkU3VjY2VzcycpXG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAocyA8PSBtKSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuUmVndWxhclN1Y2Nlc3MnKVxuICAgICAgICAgICAgICBlbHNlIGlmIChzID49IDk2KSB7XG4gICAgICAgICAgICAgICAgaWYgKG0gPCA1MCkgcmVzID0gZ2FtZS5pMThuLmxvY2FsaXplKCdDb0M3LkZ1bWJsZScpXG4gICAgICAgICAgICAgICAgZWxzZSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgICAgICAgIH0gZWxzZSByZXMgPSBnYW1lLmkxOG4ubG9jYWxpemUoJ0NvQzcuRmFpbHVyZScpXG4gICAgICAgICAgICAgIC8vIFJlY29yZCB0aGUgZmlyc3QgcmVzdWx0cy5cbiAgICAgICAgICAgICAgcmVzICs9ICcgJyArIGdhbWUuaTE4bi5sb2NhbGl6ZSgnQ29DNy5WYWx1ZScpICsgJyAnICsgbVxuICAgICAgICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmpvaW4oJyAvICcpXG4gICAgICAgICAgci50b01lc3NhZ2Uoe1xuICAgICAgICAgICAgc3BlYWtlcjogQ2hhdE1lc3NhZ2UuZ2V0U3BlYWtlcigpLFxuICAgICAgICAgICAgZmxhdm9yOiByZXNcbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdWkubm90aWZpY2F0aW9ucy5lcnJvcignSW5jb3JyZWN0IHVzYWdlIG9mIGNvbW1hbmQnKVxuICAgICAgfVxuICAgICAgLy8gcmV0dXJuIHRvIGF2b2lkIGVycm9ycyBpbiB0aGUgY29tbWFuZC5cbiAgICAgIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfSlcbn1cbiIsIi8qIGdsb2JhbCBnYW1lICovXG5leHBvcnQgZnVuY3Rpb24gRHJvcEFjdG9yU2hlZXREYXRhIChhY3Rvciwgc2hlZXQsIGRhdGEpIHtcbiAgaWYgKGRhdGEudHlwZSA9PT0gJ0l0ZW0nICYmIGRhdGEuYWN0b3JJZCkge1xuICAgIGlmIChhY3Rvci5kYXRhLl9pZCA9PT0gZGF0YS5hY3RvcklkKSB7XG4gICAgICByZXR1cm5cbiAgICB9XG4gICAgbGV0IGFjdG9yRnJvbSA9IG51bGxcbiAgICBpZiAoZGF0YS5zY2VuZUlkICYmIGRhdGEudG9rZW5JZCkge1xuICAgICAgYWN0b3JGcm9tID0gZ2FtZS5zY2VuZXMuZ2V0KGRhdGEuc2NlbmVJZCkudG9rZW5zLmdldChkYXRhLnRva2VuSWQpLmFjdG9yXG4gICAgfSBlbHNlIHtcbiAgICAgIGFjdG9yRnJvbSA9IGdhbWUuYWN0b3JzLmdldChkYXRhLmFjdG9ySWQpXG4gICAgfVxuICAgIHN3aXRjaCAoYWN0b3IuZGF0YS50eXBlKSB7XG4gICAgICBjYXNlICdjaGFyYWN0ZXInOlxuICAgICAgY2FzZSAnbnBjJzpcbiAgICAgIGNhc2UgJ2NyZWF0dXJlJzpcbiAgICAgICAgaWYgKCFbJ2NoYXNlJ10uaW5jbHVkZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3ZlaGljbGUnOlxuICAgICAgICByZXR1cm5cbiAgICAgIGNhc2UgJ2NvbnRhaW5lcic6XG4gICAgICAgIGlmICghWydib29rJywgJ2l0ZW0nLCAnc3BlbGwnLCAnd2VhcG9uJ10uaW5jbHVkZXMoZGF0YS5kYXRhLnR5cGUpKSB7XG4gICAgICAgICAgcmV0dXJuXG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGFjdG9yRnJvbSkge1xuICAgICAgYWN0b3JGcm9tLmRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzKCdJdGVtJywgW2RhdGEuZGF0YS5faWRdKVxuICAgIH1cbiAgfVxufVxuIl0sIm5hbWVzIjpbIkNPQzciLCJzdGFuZGFyZCIsIm1vZGVybiIsIm1vZGVyblB1bHAiLCJwdWxwIiwiZG93bkRhcmtlclRyYWlscyIsImRvd25EYXJrZXJUcmFpbHNQdWxwIiwiZGFya0FnZXMiLCJkYXJrQWdlc1B1bHAiLCJyZWdlbmN5IiwicmVnZW5jeVB1bHAiLCJnYXNMaWdodCIsImludmljdHVzIiwiZGVjaW1hbExlZnQiLCJkZWNpbWFsUmlnaHQiLCJpbnRlZ2VyTGVmdCIsImludGVnZXJSaWdodCIsImxzZCIsInJvbWFuIiwibm9uZSIsImFzc2VzIiwic2VzdGVydGlpIiwicXVpbmFyaWkiLCJkZW5hcmlpIiwiZCIsInMiLCJ2YWx1ZSIsIm11bHRpcGxpZXIiLCJuYW1lIiwiZmlsdGVyIiwic3RyIiwiY29uIiwic2l6IiwiZGV4IiwiYXBwIiwiaW50IiwicG93IiwiZWR1Iiwibm9hZGp1c3RtZW50cyIsIm5veHBnYWluIiwic3BlY2lhbCIsInJhcml0eSIsInB1c2giLCJjb21iYXQiLCJmaWdodGluZyIsImZpcmVhcm0iLCJyZXF1aXJlc25hbWUiLCJrZWVwYmFzZXZhbHVlIiwicGlja25hbWVvbmx5Iiwib25seW9uZSIsIm1lbGVlIiwicm5nZCIsIm1udnIiLCJ0aHJvd24iLCJzaG90Z3VuIiwiZGJybCIsImltcGwiLCJicnN0IiwiYXV0byIsImFoZGIiLCJhZGRiIiwic2xudCIsInNwY2wiLCJtb250IiwiYmxzdCIsInN0dW4iLCJyYXJlIiwiYnVybiIsImNhbGwiLCJkaXNtaXNzIiwiY29udGFjdCIsInN1bW1vbiIsImJpbmQiLCJlbmNoYW50bWVudCIsImdhdGUiLCJteXRob3MiLCJvY2N1bHQiLCJvdGhlciIsInBoeXNpY2FsIiwibWVudGFsIiwibWlzY2VsbGFuZW91cyIsImJhc2ljIiwiaW5zYW5lIiwibWFuaWEiLCJwaG9iaWEiLCJjbGFzc2ljIiwibG92ZWNyYWZ0aWFuIiwiZm9ybXVsYSIsImFjdG9yIiwiYWN0b3JzaGVldCIsInN0YXR1cyIsInRlbXBvSW5zYW5lIiwiaW5kZWZJbnNhbmUiLCJ1bmNvbnNjaW91cyIsImNyaXRpY2FsV291bmRzIiwiZHlpbmciLCJwcm9uZSIsImRlYWQiLCJuZXdCb29rTmFtZSIsIm5ld1NraWxsTmFtZSIsIm5ld1NwZWxsTmFtZSIsIm5ld0l0ZW1OYW1lIiwibmV3V2VhcG9uTmFtZSIsImNyZWF0dXJlRmlnaHRpbmdTa2lsbCIsImZpZ2h0aW5nU3BlY2lhbGl6YXRpb25OYW1lIiwiZmlyZWFybVNwZWNpYWxpemF0aW9uTmFtZSIsImNvbWJhdENhcmRzIiwiZmlnaHRCYWNrIiwiZG9kZ2UiLCJtYW5ldXZlciIsIm5vUmVzcG9uc2UiLCJDb0M3RGljZSIsInJvbGwiLCJtb2RpZiIsInJvbGxNb2RlIiwiaGlkZURpY2UiLCJhbHRlcm5hdGl2ZURpY2UiLCJnYW1lIiwibW9kdWxlcyIsImdldCIsImFjdGl2ZSIsInNldHRpbmdzIiwiQ29DNyIsImRldiIsImRpY2UiLCJhbHdheXNDcml0IiwiUm9sbCIsImZyb21EYXRhIiwiY3JpdDAxIiwiYWx3YXlzRnVtYmxlIiwiZnVtYmxlOTkiLCJyZXBlYXQiLCJNYXRoIiwiYWJzIiwiYXN5bmMiLCJyZXN1bHQiLCJ1bml0IiwidG90YWwiLCJyZXN1bHRzIiwidGVucyIsIkNPTkZJRyIsIkRpY2UiLCJ0ZXJtcyIsInQiLCJpbmNsdWRlcyIsIm1heCIsImxlbmd0aCIsIm1pbiIsInNob3dSb2xsRGljZTNkIiwic3luY0RpY2UiLCJjaGF0RGF0YSIsIndoaXNwZXIiLCJibGluZCIsIkNoYXRNZXNzYWdlIiwiYXBwbHlSb2xsTW9kZSIsImRpY2UzZCIsInNob3dGb3JSb2xsIiwidXNlciIsImNvbWJpbmVkUm9sbCIsIm9wdGlvbnMiLCJwb29sIiwia2V5cyIsIk9iamVjdCIsIm1hcCIsInYiLCJwYXJzZUludCIsInBlbmFsdHlEaWNlIiwiYm9udXNEaWNlIiwiaGFzRFNOIiwiam9pbiIsImdyb3VwcyIsImJhc2VEaWUiLCJiYXNlU2V0Iiwib3V0cHV0Iiwia2V5IiwibW9kaWZpZXIiLCJvZmZzZXQiLCJzdGF0aWMiLCJjbGFzcyIsImV2YWx1YXRlZCIsIm51bWJlciIsImZhY2VzIiwibW9kaWZpZXJzIiwib3BlcmF0b3IiLCJDb0M3Q29udGVudExpbmtEaWFsb2ciLCJGb3JtQXBwbGljYXRpb24iLCJkZWZhdWx0T3B0aW9ucyIsIm1lcmdlT2JqZWN0Iiwic3VwZXIiLCJpZCIsImNsYXNzZXMiLCJ0aXRsZSIsImkxOG4iLCJsb2NhbGl6ZSIsImRyYWdEcm9wIiwiZHJhZ1NlbGVjdG9yIiwiZHJvcFNlbGVjdG9yIiwidGVtcGxhdGUiLCJjbG9zZU9uU3VibWl0Iiwid2lkdGgiLCJoZWlnaHQiLCJ0YWJzIiwibmF2U2VsZWN0b3IiLCJjb250ZW50U2VsZWN0b3IiLCJpbml0aWFsIiwiZ2V0RGF0YSIsInNoZWV0RGF0YSIsImNoZWNrVHlwZSIsIkNvQzdMaW5rIiwiQ0hFQ0tfVFlQRSIsIkNIRUNLIiwibGFiZWwiLCJTQU5MT1NTIiwiSVRFTSIsIkVGRkVDVCIsImxpbmtUeXBlIiwiTElOS19UWVBFIiwiQ0hBUkFDVEVSSVNUSUMiLCJBVFRSSUJVVEUiLCJTS0lMTCIsImF0dHJpYnV0ZVR5cGUiLCJlZmZlY3RNb2RlcyIsImVudHJpZXMiLCJDT05TVCIsIkFDVElWRV9FRkZFQ1RfTU9ERVMiLCJyZWR1Y2UiLCJvYmoiLCJlIiwiY2hhcmFjdGVyaXN0aWNUeXBlIiwiQ29DQWN0b3IiLCJnZXRDaGFyYWN0ZXJpc3RpY0RlZmluaXRpb24iLCJsaW5rIiwib2JqZWN0IiwiZnJvbUdhbWUiLCJpc0l0ZW1DaGVjayIsImlzU2tpbGxDaGVjayIsImZyb21EaXJlY3RvcnkiLCJoYXNJRCIsImZyb21Db21wZW5kaXVtIiwiaXNTZXRGcm9tR2FtZSIsImRpZmZpY3VsdHlMZXZlbCIsIkNvQzdDaGVjayIsImFjdG9yTmFtZXMiLCJhY3RvcnMiLCJhIiwiYWN0aXZhdGVMaXN0ZW5lcnMiLCJodG1sIiwiZmluZCIsImNoYW5nZSIsInRoaXMiLCJfb25DaGFuZ2VTdWJtaXQiLCJjbGljayIsIl9vbkVmZmVjdENvbnRyb2wiLCJldmVudCIsImN1cnJlbnRUYXJnZXQiLCJfb25TdWJtaXQiLCJwcmV2ZW50RGVmYXVsdCIsImJ1dHRvbiIsImRhdGFzZXQiLCJhY3Rpb24iLCJfYWRkRWZmZWN0Q2hhbmdlIiwiY2xvc2VzdCIsInJlbW92ZSIsImlkeCIsImVmZmVjdCIsImNoYW5nZXMiLCJzdWJtaXQiLCJwcmV2ZW50Q2xvc2UiLCJ1cGRhdGVEYXRhIiwibW9kZSIsIkFERCIsIl91cGRhdGVPYmplY3QiLCJmb3JtRGF0YSIsImhhc0VmZmVjdCIsImR1cmF0aW9uIiwic2V0VmFsdWUiLCJjaGVja05hbWUiLCJpY29uIiwidGludCIsImRpc2FibGVkIiwic2Vjb25kcyIsInJvdW5kcyIsInR1cm5zIiwibWF0Y2giLCJ0YXJnZXQiLCJ0eXBlIiwic3VibWl0dGVyIiwiQ29DN1V0aWxpdGllcyIsImNvcHlUb0NsaXBib2FyZCIsInRvQ2hhdE1lc3NhZ2UiLCJ0b1doaXNwZXJNZXNzYWdlIiwiY2FudmFzIiwidG9rZW5zIiwiY29udHJvbGxlZCIsInVpIiwibm90aWZpY2F0aW9ucyIsIndhcm4iLCJvd25lcnMiLCJyZW5kZXIiLCJfb25Ecm9wIiwiZGF0YVN0cmluZyIsImRhdGFUcmFuc2ZlciIsImRhdGEiLCJKU09OIiwicGFyc2UiLCJzZXRMaW5rIiwiZnJvbURyb3BEYXRhIiwiZG9jdW1lbnROYW1lIiwiZGF0YUxpc3QiLCJnZXREYXRhRnJvbURyb3BFdmVudCIsInBhY2siLCJkaWZmaWN1bHR5IiwicmVndWxhciIsImhhc01vZGlmaWVycyIsImRpc3BsYXlOYW1lIiwiaGFzTGFiZWwiLCJoYXNJY29uIiwiY3JlYXRlIiwibGlua0RhdGEiLCJvcHRpb24iLCJkaWFsb2ciLCJjcmVhdGVJbmxpbmVSb2xsIiwiY2xzIiwiZXNjYXBlIiwic3RyaW5naWZ5IiwiZXJyIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY2xhc3NMaXN0IiwiYWRkIiwiayIsImlubmVySFRNTCIsImlzQ3RybEtleSIsIm1ldGFLZXkiLCJjdHJsS2V5Iiwia2V5Q29kZSIsImNoYXRIZWxwZXIiLCJoeXBoZW5Ub0NhbWVsQ2FzZSIsInN0cmluZyIsInJlcGxhY2UiLCJ0b1VwcGVyQ2FzZSIsImNyZWF0ZU1lc3NhZ2UiLCJtZXNzYWdlIiwibWVzc2FnZURhdGEiLCJmbGF2b3IiLCJzcGVha2VyIiwiZ2V0U3BlYWtlciIsIkNIQVRfTUVTU0FHRV9UWVBFUyIsIldISVNQRVIiLCJST0xMIiwiRElDRV9ST0xMX01PREVTIiwiU0VMRiIsImNvbnRlbnQiLCJ0aGVuIiwibXNnIiwiY2FtZWxDYXNlVG9IeXBoZW4iLCJ0b0xvd2VyQ2FzZSIsImdldEFjdG9yRnJvbUtleSIsImlzRG9jdW1lbnRVdWlkIiwiaXNEb2N1bWVudFV1aWRQYWNrIiwiZnJvbVV1aWQiLCJTZnJvbVV1aWQiLCJzY2VuZUlkIiwidG9rZW5JZCIsInNwbGl0IiwidG9rZW4iLCJnZXRUb2tlbkZyb21LZXkiLCJnZXRTcGVha2VyRnJvbUtleSIsImFjdG9yS2V5Iiwic2NlbmUiLCJhbGlhcyIsImF0dGFjaE9iamVjdFRvRWxlbWVudCIsImVsZW1lbnQiLCJvYmplY3ROYW1lIiwicHJvcCIsInN0YXJ0c1dpdGgiLCJnZXRPYmplY3RGcm9tRWxlbWVudCIsImRlc2VyaWFsaXplIiwic2xpY2UiLCJvYmpQcm9wIiwiaW5kZXhPZiIsIm9iak5hbWUiLCJzdWJzdHJpbmciLCJOdW1iZXIiLCJ0b1N0cmluZyIsInRva2VuRG9jIiwic2NlbmVzIiwidG9rZW5EYXRhIiwiZ2V0RW1iZWRkZWREb2N1bWVudCIsIlRva2VuIiwiZHVwbGljYXRlIiwiZ2V0QWN0b3JUb2tlbiIsInByb3RvdHlwZVRva2VuIiwiZ2V0QWN0b3JJbWdGcm9tS2V5IiwidGV4dHVyZSIsInNyYyIsImltZyIsImdldERpc3RhbmNlIiwic3RhcnRUb2tlbiIsImVuZFRva2VuIiwiY2VudGVyIiwiZGlzdGFuY2UiLCJncmlkVW5pdCIsImdyaWQiLCJ1bml0cyIsInJheSIsIlJheSIsInNlZ21lbnQiLCJzaXplIiwibWVhc3VyZURpc3RhbmNlcyIsImdyaWRTcGFjZXMiLCJlbGV2YXRpb24iLCJzcXJ0IiwidG9ZYXJkcyIsIkNvQzdSb2xsIiwiZ2V0RnJvbUNhcmQiLCJjYXJkIiwicm9sbERpdiIsInF1ZXJ5U2VsZWN0b3IiLCJyZXN1bHRUeXBlIiwic3VjY2Vzc0xldmVsIiwiZm9ybWF0IiwiaGFyZCIsImV4dHJlbWUiLCJjcml0aWNhbCIsImZ1bWJsZSIsImZhaWx1cmUiLCJpdGVtIiwiaXRlbUlkIiwiaXRlbXMiLCJza2lsbCIsInNraWxsSWQiLCJzaG93RGljZVJvbGwiLCJkaWNlUmVzdWx0cyIsImRpZVJlc3VsdCIsImRpY2VzIiwiZGljZURhdGEiLCJzaG93IiwiZ2V0RnJvbUVsZW1lbnQiLCJoYXNCb251cyIsImRpY2VNb2RpZmllciIsImJvbnVzIiwiYm9udXNUeXBlIiwidGVuRGljZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkaWUiLCJzZWxlY3RlZCIsImlzTWF4IiwiaXNNaW4iLCJ1bml0RGllIiwiaW5jcmVhc2VTdWNjZXNzIiwiaXNsIiwibmV3U3VjY2VzTGV2ZWwiLCJsdWNrTmVlZGVkIiwibHVja05lZWRlZFR4dCIsImx1Y2tOZWVkZWRWYWx1ZSIsImdldEZyb21DaGVjayIsImNoZWNrIiwicm9sbFR5cGUiLCJzaWRlIiwicmVmTWVzc2FnZUlkIiwicmVmZXJlbmNlTWVzc2FnZUlkIiwiZGljZU1vZCIsInJhd1ZhbHVlIiwiaXNGdW1ibGUiLCJpc0NyaXRpY2FsIiwiY2hhcmFjdGVyaXN0aWMiLCJ0b2tlbktleSIsImlzVG9rZW4iLCJhY3RvcklkIiwiYXR0YWNoQ2hlY2tUb0VsZW1lbnQiLCJodG1sRWxlbWVudCIsImF0dGFjaFRvRWxlbWVudCIsIkNvQzdEYW1hZ2UiLCJnZXRNYWluRGllIiwiZGFtYWdlU3RyaW5nIiwiZGFtYWdlIiwicm9sbHMiLCJyIiwiUm9sbERpYWxvZyIsInVua25vd24iLCJ1bmtub3duRGlmZmljdWx0eURlZmF1bHQiLCJhbGxvd0ZsYXREaWNlTW9kaWZpZXIiLCJkaXNhYmxlRmxhdERpY2VNb2RpZmllciIsImFsbG93RmxhdFRocmVzaG9sZE1vZGlmaWVyIiwiZGlzYWJsZUZsYXRUaHJlc2hvbGRNb2RpZmllciIsImhpZGVEaWZmaWN1bHR5IiwiY2FyZFR5cGUiLCJmb3JjZWRDYXJkVHlwZSIsImNhcmRUeXBlcyIsIkNvQzdDaGF0TWVzc2FnZSIsInJlbmRlclRlbXBsYXRlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJkbGciLCJEaWFsb2ciLCJidXR0b25zIiwiY2FsbGJhY2siLCJGb3JtRGF0YSIsImRlZmF1bHQiLCJjbG9zZSIsIlJvbGxDYXJkIiwiY29uc3RydWN0b3IiLCJpbml0aWF0b3IiLCJmcm9tTWVzc2FnZUlkIiwibWVzc2FnZUlkIiwibWVzc2FnZXMiLCJmcm9tTWVzc2FnZSIsImNhcmRFbGVtZW50IiwiJCIsImZyb21IVE1MQ2FyZEVsZW1lbnQiLCJjYXJkRGF0YSIsInVuZXNjYXBlIiwiYXNzaWduIiwiaW5kZXgiLCJyb2xsZWQiLCJfaHRtbFJvbGwiLCJnZXRIdG1sUm9sbCIsIl9vblRvZ2dsZSIsInNwYW4iLCJjb250YWlucyIsImlzR00iLCJmbGFnIiwidG9nZ2xlIiwiYiIsInVuc2V0RmxhZyIsInNldEZsYWciLCJ0b2dnbGVGbGFnIiwidXBkYXRlQ2hhdENhcmQiLCJkaXNwYXRjaCIsImNoYXQiLCJjb2xsZWN0aW9uIiwiZGVmYXVsdENvbmZpZyIsImdldEZsYWciLCJ0aW1lc3RhbXAiLCJEYXRlIiwiX3JvbGxNb2RlIiwicHJvY2VzcyIsInNvY2tldCIsImVtaXQiLCJ0b01lc3NhZ2UiLCJjb25maWciLCJodG1sQ2FyZEVsZW1lbnQiLCJvdXRlckhUTUwiLCJmbGFncyIsInN0YXRlIiwiZ2V0V2hpc3BlclJlY2lwaWVudHMiLCJjb21wdXRlIiwicGFyc2VIVE1MIiwiY2hhdE1lc3NhZ2UiLCJjbG9zZWQiLCJ1cGRhdGUiLCJ1cGRhdGVNZXNzYWdlIiwidXBkYXRlUm9sbCIsImZyb21HTSIsInJhbmsiLCJhZGRSb2xsRGF0YSIsImFkZFJvbGwiLCJyZW1vdmVSb2xsIiwic3BsaWNlIiwiZmxhZ05hbWUiLCJfbWVzc2FnZSIsIl9tZXNzYWdlSWQiLCJ4IiwiZXhjbHVkZSIsImV4Y2x1ZGVTdGFydFdpdGgiLCJ3aW5uZXJzIiwid2lubmVyIiwibG9vc2VycyIsImxvb3NlciIsImhhc1dpbm5lciIsImlzS2VlcGVyIiwiQ29tYmluZWRDaGVja0NhcmQiLCJiaW5kTGlzdGVybmVycyIsIm9uIiwiX29uQ2xpY2siLCJzdWNjZXNzQ291bnQiLCJjb3VudCIsInBhc3NlZCIsIm1haW5BY3RvcktleSIsInVuZGVmaW5lZCIsInN1Y2Nlc3MiLCJhbnkiLCJhbGwiLCJjaGVja0dNSW5pdGlhdG9yIiwidXNlcnMiLCJfcGVyZm9ybSIsIl9yb2xsIiwic2lsZW50IiwiaGlkZVN1Y2Nlc3MiLCJhc3NpZ25Sb2xsIiwibGkiLCJjbG9zZUNhcmQiLCJpc05hTiIsIkF1ZGlvSGVscGVyIiwicGxheSIsInNvdW5kcyIsImFsdGVyIiwiSlNPTlJvbGxEYXRhIiwiZmxhdERpY2VNb2RpZmllciIsImZsYXRUaHJlc2hvbGRNb2RpZmllciIsImkiLCJoaWRlRGljZVJlc3VsdCIsIkludGVyYWN0aXZlQ2hhdENhcmQiLCJfb3B0aW9ucyIsImNzc0NsYXNzZXMiLCJvcHRpb25uYWxDaGF0RGF0YSIsImNhcmRDbGFzcyIsIl9vbkJ1dHRvbiIsIl9vbktleSIsImJpbmRMaXN0ZW5lcnMiLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiY2FyZHMiLCJ0eXBlZENhcmQiLCJhc3NpZ25PYmplY3QiLCJfdXBkYXRlIiwiZm9ybXMiLCJ1cGRhdGVzIiwiZm9ybSIsIkZvcm1EYXRhRXh0ZW5kZWQiLCJ0b09iamVjdCIsImRpZmZPYmplY3QiLCJleHBhbmRPYmplY3QiLCJkaXNwbGF5QWN0b3JPbkNhcmQiLCJpc0JsaW5kIiwiX2lzQmxpbmQiLCJ3ZWFwb24iLCJ0YXJnZXRlZFRva2VucyIsInRhcmdldHMiLCJ0YXJnZXRUb2tlbiIsInRhcmdldEFjdG9yIiwiaXNUYXJnZXRPd25lciIsImlzT3duZXIiLCJfdGFyZ2V0VG9rZW4iLCJfdGFyZ2V0S2V5IiwicG9wIiwiX3RhcmdldEFjdG9yIiwidGFyZ2V0S2V5IiwiaGFzVGFyZ2V0Iiwic2tpbGxzIiwiZ2V0V2VhcG9uU2tpbGxzIiwidGFyZ2V0SW1nIiwidGFyZ2V0TmFtZSIsImFjdG9ySW1nIiwiRGFtYWdlQ2FyZCIsImNvbmNhdCIsImRhbWFnZVJvbGwiLCJpbXBhbGUiLCJfaW1wYWxlIiwiaXNEYW1hZ2VGb3JtdWxhIiwiZGFtYWdlRm9ybXVsYSIsInZhbGlkYXRlIiwiaXNEYW1hZ2VOdW1iZXIiLCJpc0FybW9yRm9ydWxhIiwiYXJtb3IiLCJ0b3RhbERhbWFnZVN0cmluZyIsImlnbm9yZUFybW9yIiwibm9EYW1hZ2UiLCJmYXN0Rm9yd2FyZCIsInJvbGxEYW1hZ2UiLCJoYXJkcm9sbGVkIiwiZGFtYWdlSW5mbGljdGVkIiwiZGVhbERhbWFnZSIsIl9odG1sSW5saW5lUm9sbCIsImV2YWx1YXRlIiwicm9sbEFybW9yIiwiZGVhbERhbWFnZVRvU2VsZWN0ZWRUYXJnZXQiLCJlcnJvciIsInNlbGVjdGVkUGxheWVycyIsIm9uZSIsImNvbmZpcm1EYW1hZ2UiLCJ0d28iLCJyYW5nZSIsImluY2x1ZXMiLCJzeXN0ZW0iLCJkYiIsInRyaW0iLCJwcm9wZXJ0aWVzIiwibWF4RGFtYWdlIiwibWF4aW1pemUiLCJyb2xsU3RyaW5nIiwiX2FybW9yIiwiYXR0cmlicyIsIk9wcG9zZWRDaGVja0NhcmQiLCJhdHRhY2tlclJvbGwiLCJhdHRhY2tlciIsImRlZmVuZGVyUm9sbCIsImRlZmVuZGVyIiwiZGVmZW5kZXJJc0RvZGdpbmciLCJkb2RnZVNraWxsIiwiYWR2YW50YWdlQXR0YWNrZXIiLCJfYWEiLCJ3aW5uZXJSb2xsc0RhbWFnZSIsIl9hZCIsImFkdmFudGFnZURlZmVuZGVyIiwiaXNUaWUiLCJ3aW5uZXJDb3VudCIsIm5lZWRzVGllQnJlYWtlciIsImlzQXR0YWNrTWFuZXV2ZXIiLCJyZXN1bHRUZXh0IiwiZGFtYWdlQ2hhdENhcmQiLCJpc0V4dHJlbWVTdWNjZXNzIiwic2hpZnRLZXkiLCJzb3J0IiwidGllIiwicmVzb2x2ZWQiLCJtb2RpZmllZFJlc3VsdCIsIndpbkNvdW50IiwiZmFpbGVkIiwiQ2hhdENhcmRBY3RvciIsInNheSIsInNwZWFrZXJEYXRhIiwicmVwbGFjZXIiLCJTYW5DaGVja0NhcmQiLCJzYW5EYXRhIiwiQm9vbGVhbiIsInNhblJlYXNvbiIsInNhbk1vZGlmaWVyIiwic2FuRGlmZmljdWx0eSIsInNhbkxvc3NTb3VyY2UiLCJpbnZvbHVudGFyeUFjdGlvbiIsInNhblJvbGxlZCIsInNhbkNoZWNrIiwiaXNGYWlsdXJlIiwic2FuTG9zc0Zvcm11bGEiLCJzYW5NYXgiLCJzYW5NaW4iLCJzYW5Mb3N0VG9SZWFzb24iLCJtYXhQb3NzaWJsZVNhbkxvc3MiLCJtYXhMb3NzVG9TYW5SZWFzb24iLCJtYXhTYW5Mb3NzIiwic2FuTG9zc1JlYXNvbkVuY291bnRlcmVkIiwiZmlyc3RFbmNvdW50ZXIiLCJteXRob3NJbnNhbml0eUV4cGVyaWVuY2VkIiwiaXNBY3Rvckxvb3NpbmdTYW4iLCJoYXNUZW1wb0luc2FuZSIsImltbXVuZVRvQ3JlYXR1cmUiLCJib3V0RHVyYXRpb25UZXh0IiwiYm91dER1cmF0aW9uIiwiYm91dFJlYWxUaW1lIiwiYm91dFN1bW1hcnkiLCJ5b3VHYWluQ3RodWxodU15dGhvc1N0cmluZyIsIm15dGhvc0dhaW4iLCJhZHZhbmNlU3RhdGUiLCJrZWVwQ3JlYXR1cmVTYW5EYXRhIiwiZmluaXNoIiwiYXBwbHlTYW5Mb3NzIiwiYm91dFJlc3VsdCIsImVudGVyQm91dE9mTWFkbmVzcyIsImJvdXRPZk1hZG5lc3NSZXNvbHZlZCIsImJvdXRPZk1hZG5lc3NPdmVyIiwidHJpZ2dlckluc2FuaXR5IiwidW5zZXRDb25kaXRpb24iLCJjdGh1bGh1TXl0aG9zQXdhcmRlZCIsImFtb3VudEdhaW5lZCIsImV4cGVyaWVuY2VGaXJzdE15dGhvc0luc2FuaXR5IiwiY3RodWxodU15dGhvc1NraWxsIiwib2xkVmFsdWUiLCJhZGp1c3RtZW50cyIsImV4cGVyaWVuY2UiLCJieXBhc3NSb2xsU2FuIiwiaXNCeXBhc3NlZCIsImF0dHJpYnV0ZSIsImZvcmNlRFNOIiwiaW52b2x1bnRhcnlBY3Rpb25QZXJmb3JtZWQiLCJzYW5Mb3NzUm9sbGVkIiwiaWdub3JlU2FuQ2hlY2siLCJzYW5Mb3NzIiwicm9sbFNhbiIsImxpbWl0ZWRMb3NzVG9DcmVhdHVyZSIsIm1pbmltaXplIiwiaW1tdW5lQWxyZWFkeUluQm91dCIsInNhbkxvc3NBcHBsaWVkIiwiaW50Um9sbGVkIiwiaW5zYW5pdHkiLCJyb2xsU2FuTG9zcyIsInNhbkxvc3NSb2xsIiwibG9vc2VTYW4iLCJhY3Rvckxvc3RTYW4iLCJzYW4iLCJwZXJtYW5lbnRseUluc2FuZSIsImhhc0luZGVmSW5zYW5lIiwic2hha2VuIiwiaW5zYW5pdHlUYWJsZVJvbGxlZCIsImRhaWx5U2FuTG9zcyIsImRhaWx5U2FuTGltaXQiLCJ0ZW1wb3JhcnlJbnNhbmUiLCJpbmRlZmluaXRlbHlJbnNhbmUiLCJtZW1vcnlSZXByZXNzZWQiLCJyb2xsSW50IiwiaW50Q2hlY2siLCJpbnREaWZmaWN1bHR5IiwiaW50TW9kaWZpZXIiLCJhbHJlYWR5SW5zYW5lIiwic2V0Q29uZGl0aW9uIiwiY2xlYXJTYW5Mb3NzUmVhc29uIiwic2V0UmVhc29uU2FuTG9zcyIsIl9faW5saW5lU2FuQ2hlY2siLCJpbmxpbmVDaGVjayIsIl9faW5saW5lU2FuTG9zc1JvbGwiLCJfX2lubGluZUludENoZWNrIiwiY2hlY2tUYXJnZXRzIiwiYXJncyIsImNoYXRDYXJkIiwiZ2V0RnJvbU1lc3NhZ2VJZCIsImh0bWxDYXJkIiwic2FuQ2hlY2tDYXJkRGF0YSIsInNhbkNoZWNrQ2FyZCIsIlNhbkRhdGFEaWFsb2ciLCJfdG9nZ2xlSW5wdXQiLCJWYWxpZGF0ZSIsIlJPTExfVFlQRV9BVFRSSUJVVEUiLCJST0xMX1RZUEVfQ0hBUkFDVEVSSVNUSUMiLCJST0xMX1RZUEVfQ09NQkFUIiwiUk9MTF9UWVBFX1NLSUxMIiwiUk9MTF9UWVBFX0VOQ09VTlRFUiIsIkNBUkRfVFlQRV9DT01CSU5FRCIsIkNBUkRfVFlQRV9HUk9VUCIsIkNBUkRfVFlQRV9OT1JNQUwiLCJDQVJEX1RZUEVfT1BQT1NFRCIsIkNBUkRfVFlQRV9TQU5fQ0hFQ0siLCJDQVJEX1RZUEVfTk9ORSIsInNlbGVjdCIsIm5vcm1hbGl6ZVJlcXVlc3QiLCJza2lsbE5hbWUiLCJza2lsbElkcyIsImdldFNraWxsc0J5TmFtZSIsImNoYXJhY3RlcmlzdGljcyIsImFsdEtleSIsImNyZWF0ZUVuY291bnRlciIsIm9wZW5MaW5rVG9vbCIsInNlbmRUb0NoYXQiLCJzZW5kVG9DbGlwYm9hcmQiLCJpc0NvbWJhdCIsInByZXZlbnRTdGFuZGJ5IiwiZGlhbG9nT3B0aW9ucyIsInBhcmVudEVsZW1lbnQiLCJhdHRyaWIiLCJ3ZWFwb25BbHRTa2lsbCIsIndlYXBvbk5hbWUiLCJoYXNQbGF5ZXJPd25lciIsInRyaWdnZXIiLCJjcmVhdGVMaW5rIiwiaXRlbU1vZGlmaWVycyIsInZhbHVlcyIsImZvdW5kcnlJRCIsImNyZWF0ZVJvbGwiLCJydW5Sb2xsIiwic2hvcnROYW1lIiwiY2hlY2tQYXNzZWQiLCJjaGVja0ZhaWxsZWQiLCJpbmZvcyIsInVzYWdlIiwicHJvbXB0TGFiZWwiLCJzdGFuZGJ5Iiwicm9sbEF0dHJpYnV0ZSIsInJvbGxDaGFyYWN0ZXJpc3RpYyIsInJvbGxlZFN1Y2Nlc3NMZXZlbCIsInN1Y2Nlc3NMZXZlbHMiLCJyZWd1bGFyVGhyZXNob2xkIiwiaGFyZFRocmVzaG9sZCIsImV4dHJlbWVUaHJlc2hvbGQiLCJkZW55UHVzaCIsIkNvQzdDb25DaGVjayIsIl9hY3RvcklkIiwiaXNTdWNjZXNzIiwiaXNSb2xsZWQiLCJjb25DaGVjayIsImh0bWxDaGVjayIsImdldENoZWNrRWxlbWVudCIsInJvbGxDb24iLCJyZXBsYWNlV2l0aCIsInN0YXlBbGl2ZSIsImFwcGxpZWQiLCJTa2lsbFNlbGVjdERpYWxvZyIsIl9vblNlbGVjdFNraWxsQ2xpY2tlZCIsInN0eWxlIiwiZGlzcGxheSIsImFkZGVkIiwiaW5uZXJUZXh0Iiwib3B0aW9uc0NvdW50IiwiUG9pbnRTZWxlY3REaWFsb2ciLCJfb25TZWxlY3RDaGFyYWN0ZXJpc3RpYyIsIl9vbkJ1dHRvbkNsaWNrZWQiLCJpdGVtTGlzdCIsIm9wdGlvbmFsIiwidG9nZ2xlQ2xhc3MiLCJDaGFyYWNTZWxlY3REaWFsb2ciLCJDaGFyYWNSb2xsRGlhbG9nIiwiX29uQ2hhbmdlSW5wdXQiLCJfb25Sb2xsQ2hhcmFjdGVyaXN0aWMiLCJfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljIiwiX29uRGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyIsIl9vblJlc2V0Q2hhcmFjdGVyaXN0aWMiLCJjaGFyYWNLZXkiLCJpbmNyZWFzZUNoYXJhY3RlcmlzdGljIiwiZGVjcmVhc2VDaGFyYWN0ZXJpc3RpYyIsInJlc2V0Q2hhcmFjdGVyaXN0aWMiLCJjaGFyIiwiY2hlY2tUb3RhbCIsIl9lbGVtZW50IiwiaW5wdXQiLCJsaXN0IiwicG9pbnRzIiwidmFsaWRhdGlvbiIsImVuYWJsZWQiLCJlbCIsInBvaW50c1dhcm5pbmciLCJTa2lsbFNwZWNTZWxlY3REaWFsb2ciLCJzcGVjaWFsaXphdGlvbk5hbWUiLCJiYXNlVmFsdWUiLCJoYXNTa2lsbHMiLCJiYXNlIiwic3BlY2lhbGl6YXRpb24iLCJTa2lsbFNwZWNpYWxpemF0aW9uU2VsZWN0RGlhbG9nIiwiX29uQ2xpY2tTdWJtaXQiLCJfb25TZWxlY3RDaGFuZ2UiLCJ2YWwiLCJhbGxvd0N1c3RvbSIsImZpeGVkQmFzZVZhbHVlIiwiYWxsb3dTZWxlY3QiLCJTa2lsbFZhbHVlRGlhbG9nIiwiQ29DN01lbGVlUmVzb2x0aW9uIiwiaW5pdGlhdG9yTWVzc2FnZSIsInRhcmdldE1lc3NhZ2UiLCJwcmVDcmVhdGVNZXNzYWdlIiwiQ29DN01lbGVlVGFyZ2V0IiwiQ29DN01lbGVlSW5pdGlhdG9yIiwiaW5pdGlhdG9yVG9rZW4iLCJyZXN1bHRTdHJpbmciLCJ3aW5uZXJJbWciLCJ3aW5uZXJUaXRsZSIsImNyaXRpY2FsRGFtYWdlIiwiZG9jdW1tZW50IiwicGFyZW50TWVzc2FnZUlkIiwiaW5pdGlhdG9yS2V5Iiwib3V0bnVtYmVyZWQiLCJzdXJwcmlzZWQiLCJhdXRvU3VjY2VzcyIsImFkdmFudGFnZSIsImRpc2FkdmFudGFnZSIsImRvZGdpbmciLCJub3RSZXNwb25kaW5nIiwiZmlnaHRpbmdCYWNrIiwibWFuZXV2ZXJpbmciLCJhY3Rpb25TZWxlY3RlZCIsIl9pbml0aWF0b3JLZXkiLCJfaW5pdGlhdG9yIiwibWVsZWVJbml0aWF0b3IiLCJ1cGRhdGVDYXJkU3dpdGNoIiwicHVibGlzaFVwZGF0ZSIsImNhbWVsRmxhZyIsImNyZWF0ZUNoYXRDYXJkIiwiZ21zIiwib3duZXJzaGlwIiwiRE9DVU1FTlRfT1dORVJTSElQX0xFVkVMUyIsIk9XTkVSIiwicHJvbXB0IiwiaW5mbyIsImdldFVwZGF0ZWRDaGF0Q2FyZCIsInVwZGF0ZVNlbGVjdGVkIiwid2VhcG9uSWQiLCJwZXJmb3JtU2tpbGxDaGVjayIsInB1Ymxpc2giLCJpc1Vua29ud24iLCJwdWJsaXNoTm9SZXBvbnNlUmVzdWx0IiwicmVzb2x1dGlvbkNhcmQiLCJyZXNvbHV0aW9uTWVzc2FnZSIsInB1Ymxpc2hDaGVja1Jlc3VsdCIsInJvbGxJY29ucyIsInJvbGxDb2xvciIsInJvbGxUaXRsZSIsInVwZ3JhZGVSb2xsIiwibHVja0Ftb3VudCIsIm5ld1N1Y2Nlc3NMZXZlbCIsIm9sZENhcmQiLCJzcGVuZEx1Y2siLCJsdWNrU3BlbnQiLCJwcm9jZXNzZWQiLCJkaWNlUm9sbHMiLCJyZXN1bERldGFpbHMiLCJkaWNlVG90YWwiLCJDb0M3Q2hhdCIsIkNvQzdSYW5nZUluaXRpYXRvciIsImNvdmVyIiwidGFyZ2V0Q2FyZCIsInNpbmdsZVNob3QiLCJtdWx0aXBsZVNob3RzIiwiYnVyc3QiLCJmdWxsQXV0byIsImFpbWVkIiwidG90YWxCdWxsZXRzRmlyZWQiLCJfdGFyZ2V0cyIsIkNvQzdSYW5nZVRhcmdldCIsInJvdW5kZWREaXN0YW5jZSIsInJvdW5kIiwiZGlzdGFuY2VVbml0IiwiZGlzdEluWWQiLCJwb2ludEJsYW5rUmFuZ2UiLCJiYXNlUmFuZ2UiLCJsb25nUmFuZ2UiLCJleHRyZW1lUmFuZ2UiLCJvdXRPZlJhbmdlIiwibWFpbldlYXBvblNraWxsIiwibWFpbiIsImF1dG9XZWFwb25Ta2lsbCIsImFsdGVybmF0aXYiLCJhdXRvRmlyZSIsIm11bHRpVGFyZ2V0IiwiYWltaW5nIiwiX2FpbWluZyIsImdldEFjdG9yRmxhZyIsImFjdGl2ZVRhcmdldCIsInNob3RzIiwiX3Nob3RzIiwiY3VycmVudFNob3RSYW5rIiwiYWN0aXZlVGFyZ2V0U2hvdERpZmZpY3VsdHkiLCJzaG90RGlmZmljdWx0eSIsImRpZEFueVNob3RIaXQiLCJhbnlIaXQiLCJzdWNjZXNzZnVsSGl0cyIsImhpdHMiLCJoaXQiLCJzaG90Iiwic2hvdEZpcmVkIiwidG90YWxBbW1vIiwiZ2V0QnVsbGV0TGVmdCIsIm1heFNob3RzIiwidXNlc1BlclJvdW5kIiwiaWdub3JlQW1tbyIsImlnbm9yZVVzZXNQZXJSb3VuZCIsIm91dE9mQW1tbyIsIm91dE9mU2hvdHMiLCJ2b2xsZXlTaXplIiwiX3ZvbGxleVNpemUiLCJmbG9vciIsImlzVm9sbGV5TWluU2l6ZSIsImlzVm9sbGV5TWF4U2l6ZSIsImdldFRhcmdldEZyb21LZXkiLCJjYWxjVGFyZ2V0c0RpZmZpY3VsdHkiLCJub3JtYWwiLCJsb25nIiwiZGlmZmljdWx0eU5hbWUiLCJyZWxvYWQiLCJpbXBvc3NpYmxlIiwibGV2ZWwiLCJhZGRTaG90QXRDdXJyZW50VGFyZ2V0IiwiYWN0b3JOYW1lIiwiYnVsbGV0c1Nob3QiLCJ0cmFuc2l0QnVsbGV0cyIsImJ1bGxldHNTaG90VHJhbnNpdCIsInRyYW5zaXQiLCJidWxsZXRMZWZ0IiwicHJldmlvdXNTaG90IiwicmVzb2x2ZUNhcmQiLCJ3ZWFwb25NYWxmdW5jdGlvbiIsInNob290QXRUYXJnZXQiLCJzaG9vdEJ1bGxldHMiLCJoYXNNYWxmdW5jdGlvbiIsImJ1bGxldEZpcmVkIiwiZGV0YWlscyIsImNoYW5nZVZvbGxleVNpemUiLCJwYXNzUm9sbCIsInJvbGxJbmRleCIsInVwZ3JhZGVpbmRleCIsImluY3JlYXNlZFN1Y2Nlc3MiLCJyYW5nZUluaXRpYXRvciIsImNhcmRUYXJnZXRzIiwiY2FyZFNob3RzIiwiZGFtYWdlUm9sbHMiLCJkciIsImgiLCJTdHJpbmciLCJkYW1hZ2VEaWUiLCJjcml0aWNhbERhbWFnZUZvcm11bGEiLCJjcml0aWNhbERhbWFnZURpZSIsImltcGFsaW5nU2hvdHMiLCJzdWNjZXNzZnVsU2hvdHMiLCJkZWFsdCIsImRhbWFnZVJvbGxlZCIsImRJbmRleCIsInRvdGFsVGFrZW4iLCJ0b3RhbEFic29yYmVkIiwickluZGV4IiwiZGVhbHRBbW91bnQiLCJ0YWtlbiIsImFic29yYmVkIiwiZGFtYWdlRGVhbHQiLCJpbk1lbGVlIiwiYmlnIiwiX2JpZyIsImJ1aWxkIiwic21hbGwiLCJfc21hbGwiLCJpc0Zhc3QiLCJtb3YiLCJmYXN0IiwiX2Zhc3QiLCJfYWN0b3IiLCJfdG9rZW4iLCJzaXplVGV4dCIsInNpemVMYWJlbCIsImNoYW5nZURpc3BsYXllZFRhcmdldCIsIkNIQVRfQ09DN19NRVNTQUdFIiwicmVuZGVyQ2hhdE1lc3NhZ2VIb29rIiwiZmFrZVJvbGxNZXNzYWdlIiwicGxheWVycyIsIkdNU2VsZlJvbGwiLCJyZW1vdmVXaXNwZXJUYXJnZXRzIiwiZmFrZVJvbGwiLCJyZWFkeSIsImNoYXRMaXN0ZW5lcnMiLCJfb25DaGF0Q2FyZEFjdGlvbiIsIl9vbkNoYXRDYXJkVG9nZ2xlQ29udGVudCIsIl9vbkNoYXRDYXJkUmFkaW9Td2l0Y2giLCJfb25DaGF0Q2FyZFRvZ2dsZVN3aXRjaCIsIl9vbkNoYXRDYXJkVm9sbGV5U2l6ZSIsIl9vbkRyb3BEb3duRWxlbWVudFNlbGVjdGVkIiwiX29uVG9nZ2xlU2VsZWN0ZWQiLCJfb25UYXJnZXRTZWxlY3QiLCJfb25PcGVuQWN0b3IiLCJiaW5kRXZlbnRzSGFuZGxlciIsIl9vbklubGluZSIsInNoZWV0Iiwib25VcGRhdGVDaGF0TWVzc2FnZSIsInNjcm9sbEJvdHRvbSIsImNoZWNrUmV2ZWFsZWQiLCJyZXZlYWxDaGVjayIsInJlbmRlck1lc3NhZ2VIb29rIiwicmVtb3ZlQ2xhc3MiLCJtb3VzZWxlYXZlIiwiZGVmZW5kYW50SWQiLCJpbml0aWF0b3JJZCIsInVwZGF0ZUNvbWJhdENhcmRUYXJnZXQiLCJ1c2VyT25seSIsImdldEF0dHJpYnV0ZSIsImdtT25seSIsInpvbmUiLCJ1c2VyVmlzaWJsZU9ubHkiLCJlbGVtIiwiZ21WaXNpYmxlT25seSIsImlzVHJ1c3RlZCIsIm93bmVyVmlzaWJsZU9ubHkiLCJfZ2V0QWN0b3JGcm9tS2V5IiwiX2dldENoYXRDYXJkQWN0b3IiLCJvd25lck9ubHkiLCJnbVNlbGVjdE9ubHkiLCJhY3Rpb25UeXBlU3RyaW5nIiwidGFyZ2V0c1NlbGVjdG9yIiwiYm9yZGVyIiwidGFyZ2V0VG9EaXNwbGF5IiwiZHJvcERvd25Cb3hlcyIsImRwZG5Cb3giLCJzZWxlY3RlZEJveCIsImFjdGlvblR5cGUiLCJkZWZlbmRlckNob2ljZSIsInNraWxsVmFsdWUiLCJpdGVtTmFtZSIsIl9jb2xsYXBzZUlubGluZVJlc3VsdCIsIl9leHBhbmRJbmxpbmVSZXN1bHQiLCJvcHRpb25MaXN0IiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInByb3BlcnR5IiwicmFuZ2VDYXJkIiwiY2hhcmFjdGVyIiwiaXNDYXJkT3duZXIiLCJvd25uZXIiLCJnZXRBY3RvckZyb21Ub2tlbiIsImdldFRva2VuIiwibWVzc0lkIiwib3JpZ2luTWVzc2FnZSIsIm1lbGVlQ2FyZCIsInJvbGxSZXN1bHQiLCJ1cGdyYWRlSW5kZXgiLCJmb3JjZVBhc3MiLCJ1cGdyYWRlQ2hlY2siLCJkZXRhaWxlZFJlc3VsdFBsYWNlSG9sZGVyIiwibmV3Q2FyZCIsImNsb25lTm9kZSIsInB1c2hlZFJvbGwiLCJkZWZlbmRlcktleSIsInJlc3BvbnNlVHlwZSIsImRlYWxlciIsImFtb3VudCIsImFwcGVuZCIsImZvcmNlRmFpbCIsImluY3JlYXNlU3VjY2Vzc0xldmVsIiwiZGVjcmVhc2VTdWNjZXNzTGV2ZWwiLCJjb21wdXRlQ2hlY2siLCJtYWtlUHVibGljIiwiZm9yY2VSb2xsIiwiZmxhZ0ZvckRldmVsb3BlbWVudCIsIkNvQzdzb2NrZXQiLCJleGVjdXRlQXNHTSIsIl9pZCIsInJvbGxEYW1hZ2VCdXR0b24iLCJBY3RvciIsImNvbnRleHQiLCJkb2N1bWVudENsYXNzZXMiLCJleHRlbmRlZCIsImluaXRpYWxpemUiLCJjcmVhdHVyZUluaXQiLCJwcmVwYXJlQmFzZURhdGEiLCJpdGVtSWRlbnRpZmllciIsImNvY2lkIiwiY29jaWRGbGFnIiwiZGFpbHlMaW1pdCIsIm9uZUZpZnRoU2FuaXR5IiwicmF3TW92IiwicmF3RGIiLCJyYXdCdWlsZCIsImN1cnJlbnQiLCJocCIsInByZXBhcmVFbWJlZGRlZERvY3VtZW50cyIsInByZXBhcmVEZXJpdmVkRGF0YSIsInJhd0hwTWF4IiwibXAiLCJyYXdNcE1heCIsInJhd1Nhbk1heCIsImZpbHRlck1hdHJpeCIsImVmZmVjdHMiLCJpc1N1cHByZXNzZWQiLCJjIiwiZm91bmRyeSIsInV0aWxzIiwicHJpb3JpdHkiLCJzZWxlY3RDaGFuZ2VzIiwiYXBwbHkiLCJocE1heCIsIm1wTWF4IiwiYWN0b3JMaW5rIiwiZGlzcG9zaXRpb24iLCJzaWdodCIsImNoZWNrVW5kZWZpbmVkQXV0byIsInJldHVybkRhdGEiLCJzaG9ydCIsImluaXRUb2tlbiIsImNyZWF0ZURhdGEiLCJoYXNDb25kaXRpb25TdGF0dXMiLCJnZXRUZW1wb0luc2FuZUR1cmF0aW9uVGV4dCIsImhhc0NvbmRpdGlvblZhbHVlIiwicG9ydHJhaXQiLCJyZWFsVGltZSIsImJvdXRPZk1hZG5lc3NUYWJsZUlkIiwiZGVzY3JpcHRpb24iLCJib3V0T2ZNYWRuZXNzVGFibGUiLCJ0YWJsZXMiLCJ0YWJsZVJvbGwiLCJUQUJMRV9SRVNVTFRfVFlQRVMiLCJET0NVTUVOVCIsImRvY3VtZW50SWQiLCJUZXh0RWRpdG9yIiwiZW5yaWNoSFRNTCIsIml0ZW1EYXRhIiwiY3JlYXRlRW1iZWRkZWREb2N1bWVudHMiLCJURVhUIiwidGV4dCIsImVtcHR5U2tpbGwiLCJwYXJ0cyIsIkNvQzdJdGVtIiwiZ2V0TmFtZVBhcnRzU3BlYyIsImNyZWF0ZVNraWxsIiwic2hvd1NoZWV0IiwicmVuZGVyU2hlZXQiLCJjcmVhdGVXZWFwb25Ta2lsbCIsImZpcmVhcm1zIiwic2tpbGxEYXRhIiwicGVyc29uYWwiLCJvY2N1cGF0aW9uIiwiYXJjaGV0eXBlIiwiYXR0YWNrIiwid3BuVHlwZSIsImNyZWF0ZWRBdHRhY2siLCJjb25zb2xlIiwic2V0QWN0b3JGbGFnIiwiY3JlYXRlSXRlbSIsInF1YW50aXR5IiwiY3JlYXRlRW1wdHlCb29rIiwiZ2V0SXRlbUlkQnlOYW1lIiwiY3JlYXRlQm9vayIsImNyZWF0ZUVtcHR5U3BlbGwiLCJjcmVhdGVTcGVsbCIsImVtcHR5U3BlbGwiLCJjcmVhdGVFbXB0eVNraWxsIiwiY3JlYXRlRW1wdHlJdGVtIiwiY3JlYXRlRW1wdHlXZWFwb24iLCJ3ZWFwb25Qcm9wZXJ0aWVzIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjcmVhdGVCaW9TZWN0aW9uIiwiYmlvIiwiYmlvZ3JhcGh5IiwidXBkYXRlQmlvVmFsdWUiLCJ1cGRhdGVCaW9UaXRsZSIsImRlbGV0ZUJpb1NlY3Rpb24iLCJtb3ZlQmlvU2VjdGlvblVwIiwibW92ZUJpb1NlY3Rpb25Eb3duIiwidXBkYXRlVGV4dEFyZWEiLCJ0ZXh0QXJlYSIsImFyZWFOYW1lIiwiZW1iZWRkZWROYW1lIiwiZGF0YUFycmF5IiwicHJvY2Vzc2VkRGF0YUFycmF5IiwiYmFzZUNhbGN1bGF0ZWQiLCJjYWxjdWxhdGVCYXNlIiwicGFyc2VDaGFyYWN0ZXJpc3RpY3MiLCJhZGRUaGlzIiwiaXNBbnlTcGVjIiwiaXNBbnlCdXROb3RGbGFnZ2VkIiwic2tpbGxMaXN0IiwiZ3JvdXAiLCJhcGkiLCJndWVzc0dyb3VwRnJvbURvY3VtZW50IiwiZnJvbUNvQ0lEUmVnZXhCZXN0IiwiY29jaWRSZWdFeHAiLCJSZWdFeHAiLCJxdW90ZVJlZ0V4cCIsImV4aXN0aW5nU2tpbGxzIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJmb3VuZCIsImZpbmRJbmRleCIsInNvcnRCeU5hbWVLZXkiLCJleGlzdGluZ0l0ZW0iLCJ1cGRhdGVFbWJlZGRlZERvY3VtZW50cyIsImdldE5hbWVXaXRob3V0U3BlYyIsImV4aXN0aW5nIiwibWFpblNraWxsIiwiYWRkSXRlbXMiLCJzZWNvbmRTa2lsbCIsImVuYWJsZUNoYXJhY3RlcmlzaXRpY3MiLCJnZXRDaGFyYWN0ZXJpc3RpYyIsImx1Y2siLCJlcmEiLCJlcmFzIiwiZXhwYW5kSXRlbUFycmF5IiwiaXQiLCJvdGhlcnNJdGVtcyIsImFkZFVuaXF1ZUl0ZW1zIiwiYmFja3N0b3J5Iiwic2VjdGlvbk5hbWUiLCJiaW9TZWN0aW9ucyIsIm1vbmV0YXJ5Iiwic2V0VGltZW91dCIsIl9zdGF0ZSIsIkFwcGxpY2F0aW9uIiwiUkVOREVSX1NUQVRFUyIsIlJFTkRFUklORyIsIkhvb2tzIiwicmVzZXRBcmNoZXR5cGUiLCJjb25maXJtIiwieWVzIiwiZGVmYXVsdFllcyIsImNvcmVDaGFyYWMiLCJlbnRyeSIsImNvcmVDaGFyYWN0ZXJpc3RpY3MiLCJjaGFyYWMiLCJjaGFyRGlhbG9nRGF0YSIsImNvcmVDaGFyYWN0ZXJpc3RpY3NGb3JtdWxhIiwicmVzZXRPY2N1cGF0aW9uIiwiY3JlZGl0UmF0aW5nIiwiYWN0b3JDcmVkaXRSYXRpbmciLCJmaW5kQ29jSWRJbkxpc3QiLCJwb2ludHNEaWFsb2dEYXRhIiwib2NjdXBhdGlvblNraWxsUG9pbnRzIiwib3B0aW9uYWxDaGFyIiwiZGlhbG9nRGF0YSIsInNraWxsQ291bnQiLCJtZXJnZWQiLCJtZXJnZU9wdGlvbmFsU2tpbGxzIiwiY3JlZGl0UmF0aW5nU2tpbGwiLCJzZXRJdGVtRmxhZyIsImFyY2hldHlwZVBvaW50cyIsIm9jY3VwYXRpb25Qb2ludHMiLCJwZXJzb25hbFBvaW50cyIsImdldEl0ZW1zQnlOYW1lIiwiZ2V0Rmlyc3RTa2lsbEJ5Q29DSUQiLCJwYXJzZWQiLCJnZXRQcm9wZXJ0eSIsInRlbXBsYXRlcyIsImNoYXJOYW1lIiwiYXR0cmliTmFtZSIsImxjayIsImVyYXNlT2xkIiwib2NjdXBhdGlvblNraWxsIiwiZ2V0SXRlbUZsYWciLCJ1bnNldEl0ZW1GbGFnIiwiZGVsZXRlIiwiYXJjaGV0eXBlU2tpbGwiLCJzZXRMdWNrIiwiaHBGcm9tQ2hhcmFjdGVyaXN0aWNzIiwiX3NldEhwIiwiYWRkVW5pcXVlSXRlbSIsIm1wRnJvbUNoYXJhY3RlcmlzdGljcyIsImdldFJlYXNvblNhbkxvc3MiLCJzYW5pdHlMb3NzRXZlbnRzIiwidG90YWxMb3NzIiwiaW1tdW5pdHkiLCJsZWZ0IiwicmlnaHQiLCJsb2NhbGVDb21wYXJlIiwic2FuTWF4Rm9ybXVsYSIsInNhbml0eUxvc3NFdmVudCIsInNldFNhbiIsInNhbkxvc3NDaGVja1Bhc3NlZCIsInNhbkxvc3NDaGVja0ZhaWxsZWQiLCJzYW5Mb3NzTWF4Iiwic2FuTG9zc01pbiIsImRhaWx5TG9zcyIsImN0aHVsaHVNeXRob3MiLCJzZXRNcCIsIm9jY3VwYXRpb25Qb2ludHNTcGVudCIsInJlc2V0T2NjdXBhdGlvblBvaW50cyIsInJlc2V0QXJjaGV0eXBlUG9pbnRzIiwicmVzZXRQZXJzb25hbFBvaW50cyIsImFyY2hldHlwZVBvaW50c1NwZW50IiwiYm9udXNQb2ludHMiLCJleHBlcmllbmNlUG9pbnRzIiwicGVyc29uYWxQb2ludHNTcGVudCIsImhhc0RldmVsb3BtZW50UGhhc2UiLCJkZXZlbG9wZW1lbnQiLCJvbmx5UnVuT25jZVBlclNlc3Npb24iLCJsb3NzIiwic2V0QXR0cmliQXV0byIsInVwZGF0ZWRLZXkiLCJ0b2dnbGVBdHRyaWJBdXRvIiwiZGJGcm9tQ2hhcmFjdGVyaXN0aWNzIiwic3VtIiwiYnVpbGRGcm9tQ2hhcmFjdGVyaXN0aWNzIiwiZGl2aXNvciIsIm1vdkZyb21DaGFyYWN0ZXJpc3RpY3MiLCJhZ2UiLCJNT1YiLCJsb2NrZWQiLCJnZXRJdGVtc0Zyb21OYW1lIiwidG9nZ2xlQWN0b3JGbGFnIiwiZmxhZ1ZhbHVlIiwiYXR0cmlidXRlQ2hlY2siLCJhdHRyaWJ1dGVOYW1lIiwibWlzc2luZyIsImNvbnZlcnREaWZmaWN1bHR5IiwiY2hhcmFjdGVyaXN0aWNDaGVjayIsImNoYXJhY3RlcmlzdGljTmFtZSIsInNraWxsQ2hlY2siLCJza2lsbElkZW50aWZpZXIiLCJsb2ciLCJwYWNrcyIsIm1ldGFkYXRhIiwiZW50aXR5IiwiZ2V0RG9jdW1lbnQiLCJfcmF3VmFsdWUiLCJ1cGRhdGVWYWx1ZSIsIndlYXBvbkNoZWNrIiwid2VhcG9uRGF0YSIsInV1aWQiLCJ3ZWFwb25zIiwicGFyZW50IiwidG9KU09OIiwicm9sbEluaXRpYXRpdmUiLCJoYXNHdW4iLCJkZW55THVjayIsImRlbnlCbGluZFRhbXBlcmluZyIsInVuc2V0QWN0b3JGbGFnIiwiZnJvbVV1aWRTeW5jIiwidXNlc0FsdGVybmF0aXZlU2tpbGwiLCJtYXRjaGVzIiwiZXhlYyIsImNoYXJLZXkiLCJhdHRyaWJLZXkiLCJhdHRyIiwicGlsb3RTa2lsbHMiLCJkcml2ZVNraWxscyIsInRva2VuVXVpZCIsImhhc1JvbGxhYmxlQ2hhcmFjdGVyaXN0aWNzIiwiaG9zUm9sbGFibGVTa2lsbHMiLCJyb2xsQ2hhcmFjdGVyaXN0aWNzVmFsdWUiLCJyZXBvcnRDaGFyYWN0ZWRyaXRpY3NWYWx1ZSIsImF2ZXJhZ2VDaGFyYWN0ZXJpc3RpY3NWYWx1ZSIsImF2ZXJhZ2UiLCJjaGFyVmFsdWUiLCJzZXRDaGFyYWN0ZXJpc3RpYyIsImRldmVsb3BlbWVudFBoYXNlIiwic2tpbGxzUm9sbGVkIiwiZGV2ZWxvcGVtZW50RmxhZyIsIkRpZSIsImF1Z21lbnQiLCJza2lsbE1hc3RlcmluZ01lc3NhZ2UiLCJhdWdtZW50RGllIiwiYXVnbWVudFNBTkRpZSIsInNhbkdhaW5lZCIsInNhbkdhaW5lZE1lc3NhZ2UiLCJkZWJ1ZyIsInNjb3JlIiwiaW5jcmVhc2VFeHBlcmllbmNlIiwidW5mbGFnRm9yRGV2ZWxvcGVtZW50IiwiY2hhbmdlZCIsImRldmVsb3BMdWNrIiwiY3VycmVudEx1Y2siLCJwdWxwUnVsZURldmVsb3BtZW50Um9sbEx1Y2siLCJoaWdoZXJUaGFuQ3VycmVudEx1Y2siLCJhdWdtZW50Um9sbCIsImF1Z21lbnRWYWx1ZSIsImRldmVsb3BTa2lsbCIsImNvbmRpdGlvbk5hbWUiLCJjb25kaXRpb25WYWx1ZSIsImNvbmRpdGlvbnMiLCJmaWVsZCIsInRvZ2dsZUNvbmRpdGlvbiIsImZvcmNlVmFsdWUiLCJjb3JlIiwic3RhdHVzSWQiLCJjdXN0b20iLCJvdmVybGF5Iiwic3RhdHVzRWZmZWN0cyIsImVmZmVjdERhdGEiLCJmaWVsZHMiLCJqdXN0VGhpcyIsImRlbGV0ZUVtYmVkZGVkRG9jdW1lbnRzIiwicmVzZXRDb3VudGVyIiwiY291bnRlciIsInJlc2V0RGFpbHlTYW5pdHkiLCJmaWdodGluZ1NraWxscyIsImNsb3NlQ29tYmF0V2VhcG9ucyIsIndlYXBvbkxpc3QiLCJmaXJlYXJtU2tpbGxzIiwiQ00iLCJteXRob3NIYXJkZW5lZCIsInNldE15dGhvc0hhcmRlbmVkIiwiQ1IiLCJtb25ldGFyeUZvcm1hdCIsInN5bWJvbCIsIm1vbmV0YXJ5Rm9ybWF0S2V5cyIsInRvTG9jYWxlU3RyaW5nIiwibWluaW11bUZyYWN0aW9uRGlnaXRzIiwibW9uZXRhcnlWYWx1ZSIsInJvdyIsIm1vbmV0YXJ5VHlwZUtleXMiLCJzcGVuZGluZ0xldmVsIiwiY2FzaCIsImFzc2V0cyIsInUiLCJ0ZXN0VXNlclBlcm1pc3Npb24iLCJwbGF5ZXIiLCJjaGFyYWN0ZXJVc2VyIiwiY29udGVudHMiLCJzZXRIcCIsImhlYWx0aEJlZm9yZSIsImRhbWFnZVRha2VuIiwiYXJtb3JEYXRhIiwiZ3Jvc3NEYW1hZ2UiLCJhcm1vclZhbHVlIiwiaXNGb3JtdWxhIiwibmV0RGFtYWdlIiwiY2VpbCIsImhhc01ham9yV291bmQiLCJtYWpvcldvdW5kIiwiaW5pdCIsImRvY3VtZW50Q2xhc3MiLCJfb25MaW5rQ2xpY2siLCJfb25EcmFnQ29DN0xpbmsiLCJhZGRDbGFzcyIsIl9saW5rRnJvbUV2ZW50Iiwib2xkVHlwZSIsImxpbmtJY29uIiwib3JpZ2luYWxFdmVudCIsInNldERhdGEiLCJleHRlcm5hbCIsIl9jcmVhdGVMaW5rIiwibWF0Y2hBbGwiLCJBcnJheSIsImZyb20iLCJkaWZmaWN1bHR5U3RyaW5nIiwiaHVtYW5OYW1lIiwiZ2V0Q2hhcmFjdGVyaXN0aWNOYW1lcyIsImRyYWdnYWJsZSIsIl9jcmVhdGVEb2N1bWVudExpbmsiLCJldmVudERhdGEiLCJfb25MaW5rQWN0b3JDbGljayIsImdldFNwZWFrZXJBY3RvciIsIk9CU0VSVkVSIiwiaXNDaGFyYWN0ZXJpc3RpY0NoZWNrIiwiaXNDaGVjayIsImlzQXR0cmlidXRlQ2hlY2siLCJpc1Nhbkxvc3NDaGVjayIsImlzRWZmZWN0IiwiQ29DN1BhcnNlciIsIl9nZXRUZXh0Tm9kZXMiLCJyZ3giLCJfcmVwbGFjZVRleHRDb250ZW50IiwiUGFyc2VTaGVldENvbnRlbnQiLCJQYXJzZU1lc3NhZ2UiLCJpc0NvbnRlbnRWaXNpYmxlIiwicGFyc2VkQ29udGVudCIsIkl0ZW0iLCJyZWxhdGl2ZVRvIiwiSm91cm5hbEVudHJ5UGFnZSIsImljb25MYW5ndWFnZSIsIm1hbGZ1bmN0aW9uIiwidG9nZ2xlUHJvcGVydHkiLCJwcm9wZXJ0eUlkIiwib3ZlcnJpZGUiLCJjaGVja2VkUHJvcHMiLCJDb0NJREVkaXRvciIsImVyYVRvZ2dsZSIsIm1lbGVlV2VhcG9uIiwicHJvcE5hbWUiLCJwcm9wVmFsdWUiLCJoYXNQcm9wZXJ0eSIsImlzSW5jbHVkZWRJblNldCIsInNwZWNOYW1lUmVnZXgiLCJndWVzc05hbWVQYXJ0cyIsImNoZWNrU2tpbGxQcm9wZXJ0aWVzIiwic2V0IiwidG9nZ2xlSXRlbUZsYWciLCJlcmFzZUFkanVzdG1lbnQiLCJtYXhVc2VzUGVyUm91bmQiLCJtdWx0aVNob3QiLCJ1c2VzUGVyUm91bmRTdHJpbmciLCJza2lsbFByb3BlcnRpZXMiLCJfYmFzZSIsImFzeW5jQmFzZSIsImFtbW8iLCJzZXRCdWxsZXRzIiwibWF4QnVsbGV0IiwiYnVsbGV0cyIsImFkZEJ1bGxldCIsIm1heEJ1bGxldHMiLCJuZXdBcnJheSIsImdldENoYXREYXRhIiwiaHRtbE9wdGlvbnMiLCJsYWJlbHMiLCJwcm9wcyIsImZuIiwicCIsIl93ZWFwb25DaGF0RGF0YSIsInNraWxsTGFiZWwiLCJjYW5CZVB1c2hlZCIsImlzRG9kZ2UiLCJwdXNoaW5nIiwiaXNVbmtub3duIiwiX3V1aWQiLCJyYW5kb21JRCIsImhhc0NhcmQiLCJyYXdWYWx1ZVN0cmluZyIsImNyaXRpY2FsVGhyZXNob2xkIiwiZnVtYmxlVGhyZXNob2xkIiwic3VjY2VzVGhyZXNob2xkIiwiX21vZGlmaWVkUmVzdWx0IiwibW9kaWZpZWQiLCJmbGF0RGljZU1vZGlmaWVyU3RyaW5nIiwiaXNTaW1wbGVSb2xsIiwiaGFzUGVuYWx0eSIsImhhc01vZGlmaWVyIiwiX2RpY2VNb2RpZmllciIsImZ1bGxOYW1lIiwiX2RpZmZpY3VsdHkiLCJvbGRDaGVjayIsInN1Y2Nlc3NMZXZlbEljb25zIiwidW5rbm93bkRpZmZpY3VsdHkiLCJpY29ucyIsInN1Y2Nlc3NIaW50IiwiY3NzQ2xhc3MiLCJoaW50IiwiZmFpbHVyZUhpbnQiLCJnbURpZmZpY3VsdHlDcml0aWNhbCIsImdtRGlmZmljdWx0eUV4dHJlbWUiLCJnbURpZmZpY3VsdHlIYXJkIiwiZ21EaWZmaWN1bHR5UmVndWxhciIsIl9za2lsbCIsIl9nZXRJdGVtRnJvbUlkIiwiX2l0ZW0iLCJpc0R1bW15IiwiZGlzcGxheVJlc3VsdFR5cGUiLCJkaXNwbGF5Q2hlY2tTdWNjZXNzTGV2ZWwiLCJkaXNwbGF5Qm90aFN1Y2Nlc3NMZXZlbCIsImRvbnREaXNwbGF5U3VjY2Vzc0xldmVsIiwiaW1hZ2UiLCJnZXRMaW5rRWxlbWVudCIsImNyZWF0ZUZyb21BY3RvclJvbGxEYXRhIiwicm9sbERhdGEiLCJ0aHJlc2hvbGQiLCJyb2xsVmFsdWUiLCJ0ZW5SZXN1bHQiLCJ0ZW5Pbmx5T25lRGllIiwiaXNWYWx1ZSIsImlzQ2hhcmFjdGlyaXN0aWMiLCJpc1NraWxsIiwiaXNJdGVtIiwiaXNBdHRyaWJ1dGUiLCJzdWNjZXNzUmVxdWlyZWQiLCJtYWxmdW5jdGlvblR4dCIsImhhc0Vub3VnaEx1Y2siLCJuZXh0TGV2ZWwiLCJsdWNrVG9TcGVuZCIsImNhbkluY3JlYXNlU3VjY2VzcyIsImNhbkF3YXJkRXhwZXJpZW5jZSIsImZvcmNlZCIsIkpTT05Sb2xsU3RyaW5nIiwiY3NzQ2xhc3NMaXN0IiwicGxheWVyQ3NzQ2xhc3MiLCJmb3JjZWRTdWNjZXNzIiwiZm9yY2VkRmFpbHVyZSIsInRvdGFsTHVja1NwZW50Iiwic2hpZnQiLCJyZW1vdmVVcGdyYWRlcyIsImZvcmNlU3VjY2Vzc0xldmVsIiwiX2ZvcmNlQ2hlY2siLCJoaWdoIiwibG93IiwicmFuZG9tIiwidW5pdFRvdGFsIiwidGVuVG90YWwiLCJoYXNFbm91Z2giLCJ0ZW4iLCJmbGFnZ2VkRm9yRGV2ZWxvcG1lbnQiLCJfZmxhdm9yIiwiX2NvbnRleHQiLCJwYXJlbnRVdWlkIiwicmF3dmFsdWUiLCJ0b29sdGlwSGVhZGVyIiwiZ2V0SHRtbFJvbGxFbGVtZW50Iiwib3JpZ2luYWxTcGVha2VyIiwibmV3Q29udGVudCIsImh0bWxNZXNzYWdlIiwicm9sbFJlc3VsdEVsZW1lbnQiLCJPVEhFUiIsInRvb2x0aXAiLCJyb2xsVG9vbFRpcCIsImZhY2UiLCJmcm9tUm9sbFN0cmluZyIsImNvbW1hbmQiLCJfb25DbGlja0lubGluZVJvbGwiLCJ0aXAiLCJjaGlsZHJlbiIsImFwcGVuZENoaWxkIiwicGEiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJwdCIsIndpbmRvdyIsImlubmVyV2lkdGgiLCJ0b3AiLCJ5IiwiaW5uZXJIZWlnaHQiLCJ6aSIsImdldENvbXB1dGVkU3R5bGUiLCJ6SW5kZXgiLCJpc051bWVyaWMiLCJQYXJzZUNoYXRFbnRyeSIsIl9FeGVjQ29tbWFuZCIsImVzY2FwZWQiLCJhc2siLCJ0aHJlc2hvbGRTdHIiLCJkaWZmaWN1bHR5U3RyIiwiYXNrVmFsdWUiLCJ0ZXN0IiwiZ2V0QWN0b3JGcm9tU3RyaW5nIiwiYWN0b3JTdHJpbmciLCJza2lsbENoZWNrTWFjcm8iLCJ3ZWFwb25DaGVja01hY3JvIiwiYmFzZUFjdG9yIiwiZ2V0RG9jdW1lbnRDbGFzcyIsImNoZWNrTWFjcm8iLCJyb2xsRGljZSIsImNyZWF0ZU1hY3JvIiwiYmFyIiwic2xvdCIsIm1hY3JvIiwibWFjcm9zIiwibSIsImFzc2lnbkhvdGJhck1hY3JvIiwiTWFjcm8iLCJ0b2dnbGVEZXZQaGFzZSIsInVwZGF0ZUNoYXJTaGVldHMiLCJ0b2dnbGVDaGFyQ3JlYXRpb24iLCJnZXRUYXJnZXQiLCJjaGVja09wdGlvbnMiLCJwbGF5ZXJUb2tlbklkcyIsInNlbGVjdGVkUGxheWVySWRzIiwiZm9yRWFjaCIsImNoZWNrZWQiLCJzdGFydFJlc3QiLCJjaGF0Q29udGVudCIsInF1aWNrSGVhbGVyIiwiaXNDcml0aWNhbFdvdW5kcyIsImRhaWx5U2FuaXR5TG9zcyIsImhwVmFsdWUiLCJtcFZhbHVlIiwiaGVhbEFtb3VudCIsImhvdXJzIiwibWFnaWNBbW91bnQiLCJ0b2dnbGVYUEdhaW4iLCJ0ayIsInJlbmRlcmVkIiwiZW50aXR5VHlwZSIsImZvbGRlciIsIm5hdmlnYXRvciIsImNsaXBib2FyZCIsImlzU2VjdXJlQ29udGV4dCIsIndyaXRlVGV4dCIsInBvc2l0aW9uIiwiYm9keSIsImZvY3VzIiwicmVqZWN0IiwiZXhlY0NvbW1hbmQiLCJFcnJvciIsImNhdGNoIiwibGVuIiwicVN0cmluZyIsImNoYXJBdCIsImNoYXJDb2RlQXQiLCJqIiwic2V0QnlQYXRoIiwicGF0aCIsIm8iLCJnZXRCeVBhdGgiLCJkb2MiLCJkb2NOYW1lIiwiZG9jSWQiLCJpbnN0YW5jZSIsImVtYmVkZGVkSWQiLCJpZGVudGlmaWVycyIsImdldEFjdG9yRG9jdW1lbnRGcm9tRHJvcERhdGEiLCJkcm9wRGF0YSIsImRvY1V1aWQiLCJnZXREb2N1bWVudEZyb21LZXkiLCJjcmVhdGVJbXBvcnRDaGFyYWN0ZXJzRm9sZGVySWZOb3RFeGlzdHMiLCJmb2xkZXJOYW1lIiwiaW1wb3J0ZWRDaGFyYWN0ZXJzRm9sZGVyIiwiZm9sZGVycyIsIkZvbGRlciIsImd1ZXNzSXRlbSIsIm9NIiwic291cmNlIiwicGFja2FnZSIsImdldERvY3VtZW50cyIsImZhbGxiYWNrQW55IiwidG9LZWJhYkNhc2UiLCJub3JtYWxpemUiLCJzdWJtaXRPbkNsb3NlIiwic3VibWl0T25DaGFuZ2UiLCJzdXBwb3J0ZWRMYW5ndWFnZXMiLCJlZGl0YWJsZSIsImlzRWRpdGFibGUiLCJndWVzc0NvZGUiLCJndWVzc0lkIiwiaWRQcmVmaXgiLCJnZXRQcmVmaXgiLCJsYW5nIiwiaXNFbmFibGVkIiwiQ29DSURLZXlzIiwiZmxhdHRlbk9iamVjdCIsInRyYW5zbGF0aW9ucyIsIkNvQ0lERmxhZyIsInByZWZpeCIsImV4aXN0aW5nS2V5cyIsImlzU3lzdGVtSUQiLCJfZXhpc3RpbmciLCJ3b3JsZERvY3VtZW50cyIsImZyb21Db0NJREFsbCIsInNjb3BlIiwidXNlZEVyYXMiLCJ1bmlxdWVXb3JsZFByaW9yaXR5Iiwid29ybGREb2N1bWVudEluZm8iLCJ3YXJuRHVwbGljYXRlV29ybGRQcmlvcml0eSIsIndvcmxkRHVwbGljYXRlcyIsImNvbXBlbmRpdW1Eb2N1bWVudHMiLCJ1bmlxdWVDb21wZW5kaXVtUHJpb3JpdHkiLCJjb21wZW5kaXVtRG9jdW1lbnRJbmZvIiwid2FybkR1cGxpY2F0ZUNvbXBlbmRpdW1Qcmlvcml0eSIsImNvbXBlbmRpdW1EdXBsaWNhdGVzIiwic2libGluZ3MiLCJfb25DbGlja1RvZ2dsZSIsImd1ZXNzIiwiY3NzIiwiY29sb3IiLCJhZGRDb0NJRFNoZWV0SGVhZGVyQnV0dG9uIiwiaGVhZGVyQnV0dG9ucyIsInNoZWV0Q29DSUQiLCJDb0NJREVkaXRvckJ1dHRvbiIsIm9uY2xpY2siLCJudW1iZXJPZkJ1dHRvbnMiLCJDb0M3QWN0aXZlRWZmZWN0IiwiQWN0aXZlRWZmZWN0Iiwib25NYW5hZ2VBY3RpdmVFZmZlY3QiLCJvd25lciIsImVmZmVjdElkIiwib3JpZ2luIiwiZWZmZWN0VHlwZSIsIl9wcmVwYXJlRHVyYXRpb24iLCJ0b0lTT1N0cmluZyIsImlzU3RhdHVzIiwicHJlcGFyZUFjdGl2ZUVmZmVjdENhdGVnb3JpZXMiLCJjYXRlZ29yaWVzIiwidGVtcG9yYXJ5IiwicGFzc2l2ZSIsImluYWN0aXZlIiwic3VwcHJlc3NlZCIsIl9nZXRTb3VyY2VOYW1lIiwiaXNUZW1wb3JhcnkiLCJoaWRkZW4iLCJwcmVwYXJlTlBDQWN0aXZlRWZmZWN0Q2F0ZWdvcmllcyIsImV4cGVuZGVkIiwiQ29DN0NvbnRleHRNZW51IiwibWVudSIsIl9jYWxsYmFjayIsIl9odG1sIiwiX21lbnUiLCJtZW51VHJpZ2dlciIsImNvbnRleHRtZW51IiwiX29uQ29udGV4dE1lbnUiLCJtZW51RWxlbWVudCIsIkNyZWF0ZU1lbnUiLCJfb25NZW51QWN0aW9uIiwibWVudUNvbnRhaW5lciIsImNsb3NlQWxsIiwiZWFjaCIsInZpc2liaWxpdHkiLCJtZW51TmFtZSIsImNvbnRleHRNZW51Iiwid3JhcHBlciIsInN1Yk1lbnUiLCJjbGllbnRYIiwiY2xpZW50WSIsIm1lbnVIZWlnaHQiLCJvdXRlckhlaWdodCIsIm1lbnVXaWR0aCIsIm91dGVyV2lkdGgiLCJjYW5TZWUiLCJzZWN0aW9uIiwiQ3JlYXRlU2VjdGlvbiIsIm11bHRpIiwic3ViIiwiQ29DN0FjdG9yU2hlZXQiLCJBY3RvclNoZWV0IiwiX2dldEhlYWRlckJ1dHRvbnMiLCJzaG93SGlkZGVuRGV2TWVudSIsImNhbkRyYWdUb2tlbiIsImxpbmtlZEFjdG9yIiwiaXRlbXNCeVR5cGUiLCJjb21iYXRTa2lsbHMiLCJyYW5nZVdwbiIsIm1lbGVlV3BuIiwiYWN0b3JGbGFncyIsInBlcm1pc3Npb25MaW1pdGVkIiwiTElNSVRFRCIsImFsbG93VW5sb2NrIiwicGVyc29uYWxEZXNjcmlwdGlvbiIsInNleCIsInJlc2lkZW5jZSIsImJpcnRocGxhY2UiLCJvcmdhbml6YXRpb24iLCJwbGF5ZXJuYW1lIiwibWFudWFsQ3JlZGl0IiwiY3JlZGl0IiwibW9uZXRhcnlTeW1ib2wiLCJzcGVudCIsImFzc2V0c0RldGFpbHMiLCJkZXZlbG9wbWVudCIsInB1bHBSdWxlQXJjaGV0eXBlIiwicHVscFJ1bGVPcmdhbml6YXRpb24iLCJpc0RlYWQiLCJpc0R5aW5nIiwiaXRlbVRvVXBkYXRlIiwidXBkYXRlZEV4cCIsIml0ZW1UeXBlIiwibWVsZWVTa2lsbHMiLCJyYW5nZVNraWxscyIsImNidFNraWxscyIsInVzZXNBbHRlcm5hdGVTa2lsbCIsInNraWxsU2V0IiwiX3Byb3BlcnRpZXMiLCJoYXNFbXB0eVZhbHVlV2l0aEZvcm11bGEiLCJpc0ZpcnN0IiwiaXNMYXN0Iiwic2hvd0ludmVudG9yeUl0ZW1zIiwic2hvd0ludmVudG9yeUJvb2tzIiwic2hvd0ludmVudG9yeVNwZWxscyIsInNob3dJbnZlbnRvcnlUYWxlbnRzIiwic2hvd0ludmVudG9yeVN0YXR1c2VzIiwic2hvd0ludmVudG9yeVdlYXBvbnMiLCJoYXNDb25kaXRpb25zIiwiY29uZGl0aW9uIiwib25DbG9zZVNoZWV0IiwibWVudXMiLCJyb2xsTWVudSIsInNhbk1lbnUiLCJyb2xsQ29udGV4dE1lbnUiLCJfb25Db250ZXh0TWVudUNsaWNrIiwic2FuQ29udGV4dE1lbnUiLCJfb25PcHBvc2VkUm9sbCIsIl9vblJvbGxDaGFyYWN0ZXJpdGljVGVzdCIsIl9vblJvbGxTa2lsbFRlc3QiLCJfb25Sb2xsQXR0cmliVGVzdCIsIl9vbkRyYWdUb2tlblN0YXJ0IiwiY29tcGVuZGl1bSIsIl9vbkxvY2tDbGlja2VkIiwiX29uRmxhZ0NsaWNrZWQiLCJfb25Gb3JtdWxhQ2xpY2tlZCIsIl9vbkRyYWdDaGFyYWN0ZXJpc3RpYyIsIl9vbkRyYWdBdHRyaWJ1dGUiLCJfb25EcmFnU2FuQ2hlY2siLCJfb25Sb2xsQ2hhcmFjdGVyaXRpY3NWYWx1ZSIsIl9vbkF2ZXJhZ2VDaGFyYWN0ZXJpdGljc1ZhbHVlIiwiX29uQXV0b1RvZ2dsZSIsIl9vblJlc2V0Q291bnRlciIsIl9vbkNvbmRpdGlvblRvZ2dsZSIsImhlYWwiLCJyZXZpdmUiLCJjaGVja0ZvckRlYXRoIiwiX29uSXRlbVJvbGwiLCJfb25XZWFwb25Sb2xsIiwiX29uRWZmZWN0IiwiX29uV2VhcG9uU2tpbGxSb2xsIiwiX29uUmVsb2FkV2VhcG9uIiwiX29uQWRkQW1vIiwiZGJsY2xpY2siLCJfdG9nZ2xlUmVhZE9ubHkiLCJfb25XZWFwb25EYW1hZ2UiLCJfb25JbnZlbnRvcnlIZWFkZXIiLCJfb25JdGVtSGVhZGVyIiwiX29uU2VjdGlvbkhlYWRlciIsIndoZWVsSW5wdXRzIiwid2hlZWxJbnB1dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfb25XaGVlbCIsIl9vbkl0ZW1TdW1tYXJ5IiwiX29uSXRlbVBvcHVwIiwiX29uUmVuZGVySXRlbVNoZWV0IiwiZXYiLCJwYXJlbnRzIiwiaXRlbVRvRGVsZXRlIiwic3RyaWN0Iiwic2xpZGVVcCIsInN0b3BQcm9wYWdhdGlvbiIsIl9vblRyYWRlSXRlbSIsImRldGFpbCIsImRpc2FibGUiLCJtb3VzZWVudGVyIiwidG9vbFRpcFNraWxsRW50ZXIiLCJDb0M3VG9vbHRpcHMiLCJ0b29sVGlwTGVhdmUiLCJ0b29sVGlwQ2hhcmFjdGVyaXN0aWNFbnRlciIsInRvb2xUaXBBdHRyaWJ1dGVFbnRlciIsInRvb2xUaXBBdXRvRW50ZXIiLCJ0b29sVGlwRmxhZ0ZvckRldmVsb3BtZW50IiwiZGVsYXkiLCJUb29sVGlwSG92ZXIiLCJ0b29sVGlwVGltZXIiLCJ0b29sVGlwIiwiZGlzcGxheVRvb2xUaXAiLCJjaGFySWQiLCJhdHRyaWJ1dGVJZCIsImF0dHJpYnV0ZXMiLCJ0YXJnZXRUeXBlIiwicm9sbE9wdGlvbnMiLCJhY3RvckZyb20iLCJhY3RvclRvIiwidmlzaWJsZSIsIk5PTkUiLCJfb25EcmFnU3RhcnQiLCJkcmFnRGF0YSIsImJveCIsIkNvQzdUeXBlIiwiaXNMb2NrZWQiLCJkZWx0YVkiLCJyZWFkT25seSIsInNlY3JldHMiLCJoYXNDbGFzcyIsInN1bW1hcnkiLCJkaXYiLCJzcGVjaWFsRGl2IiwiaGlkZSIsInNsaWRlRG93biIsInBhbm5lbENsYXNzIiwicGFubmVsIiwiaXMiLCJvbCIsIm5leHQiLCJwb3B1cFNraWxsIiwiZW5yaWNoZWRWYWx1ZSIsInNjcm9sbFkiLCJwcm9jZWVkV2l0aG91dFRhcmdldCIsImNhbmNlbCIsInByb2NlZWQiLCJyb2xsRm9ybXVsYSIsIm92ZXJyaWRlcyIsImNyZWRpdFZhbHVlIiwic2VsZWN0ZWRJbmRleCIsIkNvQzdOUENTaGVldCIsImFsbG93Rm9ybXVsYSIsImRpc3BsYXlGb3JtdWxhIiwiaGFzU2FuIiwiaGFzTXAiLCJoYXNMdWNrIiwiaXNDcmVhdHVyZSIsImhhc0ludmVudG9yeSIsImVucmljaGVkQmlvZ3JhcGh5UGVyc29uYWxEZXNjcmlwdGlvbiIsImVucmljaGVkRGVzY3JpcHRpb25LZWVwZXIiLCJrZWVwZXIiLCJzYW5sb3NzTWVudSIsInNhbmxvc3NDb250ZXh0TWVudSIsIl9vblNhbkxvc3NDb250ZXh0TWVudUNsaWNrIiwiX29uU2FuQ2hlY2siLCJyZXNpemFibGUiLCJtaW5pbWl6YWJsZSIsImZvcmNlQXV0byIsInNldFBvc2l0aW9uIiwiQ29DN0NyZWF0dXJlU2hlZXQiLCJDb0M3Q3JlYXRlTXl0aG9zRW5jb3VudGVyIiwiaXNJbW11bml0eSIsIl9vbkJ1dHRvbkNsaWNrIiwiQ29DN0NoYXJhY3RlclNoZWV0Iiwic3VtbWFyaXplZCIsInRvZ2dsZVNoZWV0TW9kZSIsInNraWxsTGlzdE1vZGVWYWx1ZSIsInNraWxsU2hvd1VuY29tbW9uIiwic2hvd0ljb25zT25seSIsIm9jY3VwYXRpb25TZXQiLCJhcmNoZXR5cGVTZXQiLCJ0b3RhbEV4cGVyaWVuY2UiLCJ0b3RhbE9jY3VwYXRpb24iLCJpbnZhbGlkT2NjdXBhdGlvblBvaW50cyIsInRvdGFsQXJjaGV0eXBlIiwiaW52YWxpZEFyY2hldHlwZVBvaW50cyIsInRvdGFsUGVyc29uYWwiLCJpbnZhbGlkUGVyc29uYWxQb2ludHMiLCJjcmVkaXRSYXRpbmdNYXgiLCJjcmVkaXRSYXRpbmdNaW4iLCJpbnZhbGlkQ3JlZGl0UmF0aW5nIiwicHVscFRhbGVudENvdW50IiwidGFsZW50IiwibWluUHVscFRhbGVudHMiLCJ0YWxlbnRzIiwiaW52YWxpZFB1bHBUYWxlbnRzIiwiYWxsb3dEZXZlbG9wbWVudCIsImFsbG93Q2hhckNyZWF0aW9uIiwiZGV2ZWxvcG1lbnRSb2xsRm9yTHVjayIsInNob3dEZXZQYW5uZWwiLCJfbW9uZXRhcnlGb3JtYXRzIiwibW9uZXRhcnlGb3JtYXRzIiwic2hvd0N1cnJlbmN5U3ltYm9sIiwiX21vbmV0YXJ5VHlwZXMiLCJtb25ldGFyeVR5cGVzIiwib25lQmxvY2tCYWNrU3RvcnkiLCJwcmV2aW91c1NwZWMiLCJpc1NwZWNpYWxpemF0aW9uIiwic2tpbGxzQnlWYWx1ZSIsInRvcFNraWxscyIsInRvcFdlYXBvbnMiLCJyZXZlcnNlIiwiZGlzcGxheVBsYXllck5hbWUiLCJza2lsbExpc3RFbXB0eSIsImVucmljaGVkQmFja3N0b3J5IiwiX3NhdmVTY3JvbGxQb3NpdGlvbnMiLCJfc2Nyb2xsUG9zaXRpb25zWCIsInBvcyIsInNlbCIsInNjcm9sbExlZnQiLCJfcmVzdG9yZVNjcm9sbFBvc2l0aW9ucyIsInNlbGVjdG9ycyIsInBvc2l0aW9ucyIsIl9vblNraWxsRGV2IiwiX29uSXRlbURldGFpbHMiLCJ0b2dnbGVTa2lsbExpc3RNb2RlIiwidG9nZ2xlU2tpbGxVbmNvbW1vbk1vZGUiLCJfb25BZGRTYW5pdHlMb3NzUmVhc29uIiwiX29uRGVsZXRlU2FuaXR5TG9zc1JlYXNvbiIsIl9vblRvZ2dsZUtlZXBlckZsYWdzIiwiX29uQWRkTW9uZXRhcnkiLCJfb25SZW1vdmVNb25ldGFyeSIsImNhc2hUeXBlIiwiY2FzaFZhbHVlIiwiYXNzZXRzVHlwZSIsImFzc2V0c1ZhbHVlIiwic3BlbmRpbmdUeXBlIiwic3BlbmRpbmdWYWx1ZSIsInN0eWxlU2hlZXQiLCJjc3NSdWxlSW5kZXgiLCJzdHlsZVNoZWV0cyIsImhyZWYiLCJlbmRzV2l0aCIsInJ1bGVzIiwic2VsZWN0b3JUZXh0IiwiQ1NTU3R5bGUiLCJyZW1vdmVQcm9wZXJ0eSIsInNldFByb3BlcnR5IiwiRm9udEZhY2UiLCJsb2FkIiwibG9hZGVkRmFjZSIsImZvbnRzIiwid2VpZ2h0IiwiZXhwYW5kZWQiLCJDb0M3Q29tYmF0IiwicmVuZGVyQ29tYmF0VHJhY2tlciIsImN1cnJlbnRDb21iYXQiLCJjb21iYXRzIiwiY3VycmVudEluZGV4IiwiY29tYklkIiwiY29tYmF0YW50Q29udHJvbHNEaXYiLCJjb21iYXRhbnQiLCJjb21iYXRhbnRzIiwicHJlcGVuZCIsImluaXRpYXRpdmUiLCJ0b2tlbkluaXRpYXRpdmUiLCJpbml0aWF0aXZlVGVzdCIsImg0IiwiZm9udFdlaWdodCIsInRleHRTaGFkb3ciLCJiYWNrZ3JvdW5kIiwiX29uVG9nZ2xlR3VuIiwiY29tYmF0YW50SWQiLCJuZXdJbml0Iiwic2V0SW5pdGlhdGl2ZSIsImlkcyIsIkNvQ0lEQmF0Y2giLCJmb3VuZEtleXMiLCJvdXQiLCJtaXNzaW5nTmFtZXMiLCJzdWZmaXgiLCJzdWZmaXhSZWdFeHAiLCJvblNldE5hbWUiLCJvbkNsaWNrR3Vlc3MiLCJrZXl1cCIsIm9uS2V5dXAiLCJ0eXBlTmFtZSIsInByb2Nlc3NTa2lsbEtleXMiLCJ1cGRhdGVMaXN0IiwidG9rZW5PZmZzZXQiLCJpdGVtT2Zmc2V0IiwiYWN0b3JEYXRhIiwiZXhwYW5kZWRGbGFncyIsInVwZGF0ZURvY3VtZW50cyIsInBvcHVsYXRlU2tpbGxLZXlzIiwic2NlbmVEYXRhIiwiVXBkYXRlciIsImNoZWNrRm9yVXBkYXRlIiwic3lzdGVtVXBkYXRlVmVyc2lvbiIsImpvdXJuYWwiLCJ2ZXJzaW9uIiwicnVuTWlncmF0ZSIsImlzTmV3ZXJWZXJzaW9uIiwidXBkYXRlZE1vZHVsZXMiLCJjdXJyZW50TW9kdWxlcyIsInBhY2thZ2VOYW1lIiwibW9kdWxlIiwibW9kIiwic2tpcCIsIk9LIiwicGVybWFuZW50IiwibWlncmF0ZUFjdG9yRGF0YSIsImlzRW1wdHkiLCJlbmZvcmNlVHlwZXMiLCJtaWdyYXRlSXRlbURhdGEiLCJ0YWJsZSIsIm1pZ3JhdGVUYWJsZURhdGEiLCJtaWdyYXRlTWFjcm9EYXRhIiwibWlncmF0ZVNjZW5lRGF0YSIsIm1pZ3JhdGVDb21wZW5kaXVtRGF0YSIsIl9taWdyYXRlQWN0b3JDaGFyYWN0ZXJTYW5pdHkiLCJfbWlncmF0ZUFjdG9yQXJ0d29yayIsIl9taWdyYXRlQWN0b3JLZWVwZXJOb3RlcyIsIl9taWdyYXRlQWN0b3JOcGNDcmVhdHVyZSIsIl9taWdyYXRlQWN0b3JTdGF0dXNFZmZlY3RBY3RpdmUiLCJfbWlncmF0ZUFjdG9yU2FuTG9zc1JlYXNvbnMiLCJfbWlncmF0ZUFjdG9yTW9uZXRhcnkiLCJhcnIiLCJpdGVtVXBkYXRlIiwiZG9jdW1lbnRUeXBlIiwid2FzTG9ja2VkIiwiY29uZmlndXJlIiwibWlncmF0ZSIsImRvY3VtZW50cyIsIl9taWdyYXRlSXRlbUVtYmVkZGVkdjEwIiwiX21pZ3JhdGVJdGVtRXhwZXJpZW5jZSIsIl9taWdyYXRlSXRlbUFydHdvcmsiLCJfbWlncmF0ZUl0ZW1Cb29rQXV0b21hdGVkIiwiX21pZ3JhdGVJdGVtS2VlcGVyTm90ZXMiLCJfbWlncmF0ZUl0ZW1TcGVsbEF1dG9tYXRlZCIsIl9taWdyYXRlSXRlbUtlZXBlck5vdGVzTWVyZ2UiLCJfbWlncmF0ZUl0ZW1FcmFzIiwiX21pZ3JhdGVJdGVtdjEwIiwiX21pZ3JhdGVJdGVtQm9va1VuaXRzIiwiX21pZ3JhdGVNYWNyb0FydHdvcmsiLCJfbWlncmF0ZVRhYmxlQXJ0d29yayIsInJldHVybnMiLCJfbWlncmF0ZVRva2VuQXJ0d29yayIsImhhcyIsIk1hcCIsIm9yaWdpbmFsIiwiZyIsInNwZWxscyIsImNvc3QiLCJjYXN0aW5nVGltZSIsInVuaWRlbnRpZmllZCIsImF1dGhvciIsImRhdGUiLCJsYW5ndWFnZSIsIm15dGhvc1JhdGluZyIsIm5vdGVzIiwiZ2FpbiIsIkNNSSIsIkNNRiIsIm5lY2Vzc2FyeSIsIndlZWtzU3R1ZHlUaW1lIiwicHJvZ3Jlc3MiLCJzdHVkeSIsImtlZXBlck5vdGVzIiwiZW5jb3VudGVyZWRDcmVhdHVyZXMiLCJpbSIsImF0dGFja3NQZXJSb3VuZCIsImluZGVmaW5pdGVJbnNhbml0eUxldmVsIiwibmFtZUNoYXJhY3RlcnMiLCJlbiIsImRiTm9uZSIsImFybW9yTm9uZSIsImF0dGFja3NQZXJSb3VuZE5vbmUiLCJzYW5Mb3NzTm9uZSIsImZ1bGxkYiIsImhhbGZkYiIsInNlY3Rpb25Db21iYXRzIiwibmV3Q29tYmF0SGVhZGVyIiwic2VjdGlvblNraWxscyIsInNlY3Rpb25MYW5nYXVnZXMiLCJzZWN0aW9uU3BlbGxzIiwiaGFuZGd1biIsInJpZmxlIiwic21iIiwibWFjaGluZUd1biIsImxhdW5jaGVkIiwiZXhhbXBsZSIsImRlIiwiZGljZVNob3J0IiwicGwiLCJmciIsImVzIiwid2VhcG9uRG9kZ2UiLCJndWVzc1N0YXJ0Q29tYmF0Iiwic2VjdGlvbnMiLCJDb0M3QWN0b3JJbXBvcnRlclJlZ0V4cCIsImNoZWNrTGFuZ3VhZ2UiLCJnZXRFeGFtcGxlVGV4dCIsImdldFRyYW5zbGF0aW9ucyIsImdldEtleXMiLCJnZXRSZWd1bGFyRXhwcmVzc2lvbnMiLCJDb0M3QWN0b3JJbXBvcnRlciIsIml0ZW1Mb2NhdGlvbnMiLCJhc051bWJlciIsImFzU3RyaW5nIiwiZ2V0UmVnRXgiLCJyZWdleCIsImNsZWFuU3RyaW5nIiwidHJhbnNsYXRlUm9sbCIsInJlZ0V4IiwidG9IVE1MIiwicmVnRXhLZXkiLCJyZWdFeHAiLCJyZXF1aXJlZEdyb3VwIiwicmVtb3ZlRnJvbVRleHQiLCJzYXZlS2V5cyIsInByb2Nlc3NDb21iYXQiLCJuZXdsaW5lIiwiQ29DN0ltcG9ydGVyIiwibGFzdFBlcmNlbnQiLCJtYXhMb29wcyIsInBlcmNlbnRhZ2UiLCJpc1JhbmdlZCIsImRhbWFnZXMiLCJpc1Nob3RndW4iLCJhdHRhY2tzIiwicHJvY2Vzc1NraWxscyIsImJyZWFrcyIsInByb2Nlc3NTcGVsbHMiLCJzcGVsbHNBcnIiLCJzcGVsbCIsInBhcnNlQ2hhcmFjdGVyIiwiaGVhZGVyIiwic3Vic3RyIiwib2NjdXBhdGlvbkFnZSIsInJlZ0V4cFNlY3Rpb25zIiwiZ21ub3RlcyIsImRpc2FibGVBdHRyaWJBdXRvIiwiYXR0cmliVmFsdWUiLCJjcmVhdGVFbnRpdHkiLCJjaGFyYWN0ZXJEYXRhIiwibnBjIiwidXBkYXRlSXRlbURhdGEiLCJsYXN0V2VhcG9uU2tpbGwiLCJwYWlyIiwid2VhcG9uU2tpbGxzIiwicGMiLCJpdGVtc0RhdGEiLCJ3ZWFwb25Ta2lsbCIsImNsb25lZCIsImxhbmd1YWdlcyIsImNsb25lIiwibmV3U2tpbGwiLCJuZWVkc0NvbnZlcnNpb24iLCJuZWVkc0NvbnZlcnNpb25SZXN1bHQiLCJjcmVhdGVBY3RvciIsImlucHV0cyIsImNvbnZlcnRGcm9tNkUiLCJjb252ZXJ0N0UiLCJ0ZXN0TW9kZSIsImNyZWF0dXJlIiwiQ29DN0RpcmVjdG9yeVBpY2tlciIsIkZpbGVQaWNrZXIiLCJhY3RpdmVTb3VyY2UiLCJidWNrZXQiLCJEZWZhdWx0RGlyZWN0b3J5IiwicmF3IiwicHJvY2Vzc0h0bWwiLCJwaWNrZXIiLCJwaWNrZXJCdXR0b24iLCJjcmVhdGVEZWZhdWx0RGlyZWN0b3J5IiwiY3JlYXRlRGlyZWN0b3J5IiwidXBsb2FkVG9EZWZhdWx0RGlyZWN0b3J5IiwiZmlsZSIsImZpbGVuYW1lIiwidXBsb2FkIiwiRmlsZSIsIkNvQzdEaG9sZUhvdXNlQWN0b3JJbXBvcnRlciIsImdldEJhY2tzdG9yeSIsImJhY2tzdG9yeUpTT04iLCJibG9jayIsImNvbnZlcnREaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSIsImRob2xlSG91c2VEYXRhIiwiSW52ZXN0aWdhdG9yIiwiYmFja3N0b3JpZXMiLCJCYWNrc3RvcnkiLCJQZXJzb25hbERldGFpbHMiLCJOYW1lIiwiQ2hhcmFjdGVyaXN0aWNzIiwiU1RSIiwiQ09OIiwiU0laIiwiREVYIiwiQVBQIiwiSU5UIiwiUE9XIiwiRURVIiwiU2FuaXR5IiwiU2FuaXR5TWF4IiwiSGl0UHRzIiwiSGl0UHRzTWF4IiwiTWFnaWNQdHMiLCJNYWdpY1B0c01heCIsIkx1Y2siLCJNb3ZlIiwiRGFtYWdlQm9udXMiLCJCdWlsZCIsIk9jY3VwYXRpb24iLCJBZ2UiLCJHZW5kZXIiLCJSZXNpZGVuY2UiLCJCaXJ0aHBsYWNlIiwiZXh0cmFjdFNraWxscyIsIlNraWxscyIsIlNraWxsIiwicG9zc2VzaW9ucyIsImV4dHJhY3RQb3NzZXNzaW9ucyIsIlBvc3Nlc3Npb25zIiwibWFrZVNraWxsTmFtZSIsImRob2xlSG91c2Vza2lsbHMiLCJzdWJza2lsbCIsImhhbGYiLCJmaWZ0aCIsImZpbmRXZWFwb25Ta2lsbElkIiwiZ2V0RW1iZWRkZWRDb2xsZWN0aW9uIiwiZGhvbGVob3VzZVBvc3Nlc3Npb25zIiwiaXNBcnJheSIsImV4dHJhY3RXZWFwb25zIiwiZGhvbGVob3VzZVdlYXBvbnMiLCJza2lsbG5hbWUiLCJtYWxmIiwic2F2ZVBvcnRyYWl0IiwiYmFzZTY0UG9ydHJhaXQiLCJmaWxlTmFtZSIsImJhc2U2NFJlc3BvbnNlIiwiZmV0Y2giLCJpbWFnZUJsb2IiLCJibG9iIiwiY3JlYXRlTlBDRnJvbURob2xlSG91c2UiLCJkaG9sZUhvdXNlQ2hhcmFjdGVyRGF0YSIsImNhbiIsIlBvcnRyYWl0IiwiV2VhcG9ucyIsIkNvQzdBY3RvckltcG9ydGVyRGlhbG9nIiwiaW1wb3J0VHlwZSIsImNvbnZlcnQ2RSIsImNhblVwbG9hZCIsInBsYWNlaG9sZGVyIiwiX29uSlNPTkZpbGVTZWxlY3RlZCIsImNoYXJhY3RlcnNUb29FeHRlbmRlZCIsImdldElucHV0cyIsImpzb25GaWxlSW5wdXQiLCJnZXRFbGVtZW50QnlJZCIsInBvcnRyYWl0SW1hZ2UiLCJjaGFyYWN0ZXJOYW1lIiwicHJldmlldyIsImZpbGVzIiwiZmlsZVJlYWRlciIsIkZpbGVSZWFkZXIiLCJvbmxvYWQiLCJjaGFyYWN0ZXJKU09OIiwicGVyc29uYWxEZXRhaWxzIiwidGV4dENvbnRlbnQiLCJyZWFkQXNUZXh0IiwiYWN0b3JUeXBlIiwiaW1wb3J0QWN0b3IiLCJjcmVhdGVkQWN0b3IiLCJvbmNlIiwiRHJvcENvQ0lEIiwicHJvY2Vzc0Zvcm0iLCJyZXNwb25zZSIsInByb2Nlc3NJdGVtIiwibm8iLCJDb0M3T2NjdXBhdGlvblNoZWV0IiwiSXRlbVNoZWV0IiwiX29uSXRlbURlbGV0ZSIsIl9vbkdyb3VwSXRlbURlbGV0ZSIsIl9vbkdyb3VwQ29udHJvbCIsIkRyYWdEcm9wIiwiY2FsbGJhY2tzIiwiZHJvcCIsImNvbGxlY3Rpb25OYW1lIiwib3B0aW9uYWxTa2lsbCIsInVzZUNvQ0lEIiwiQ29DSWQiLCJpdGVtSW5kZXgiLCJoYXNPd25lciIsImlzRW1iZWRkZWQiLCJvY2N1cGF0aW9uUG9pbnRzU3RyaW5nIiwiaXRlbVByb3BlcnRpZXMiLCJvY2N1cGF0aW9uUHJvcGVydGllcyIsImVucmljaGVkRGVzY3JpcHRpb25WYWx1ZSIsIm9wdGlvbm5hbCIsIm1hbmRhdG9yeSIsImNhcmFjIiwiY2FyYWNOYW1lIiwib3JTdHJpbmciLCJDb0M3SW52ZXN0aWdhdG9yV2l6YXJkIiwicGFnZUxpc3QiLCJQQUdFX05PTkUiLCJQQUdFX0lOVFJPRFVDVElPTiIsIlBBR0VfQ09ORklHVVJBVElPTiIsIlBBR0VfU0VUVVBTIiwiUEFHRV9BUkNIRVRZUEVTIiwiUEFHRV9DSEFSQUNUSVNUSUNTIiwiUEFHRV9BVFRSSUJVVEVTIiwiUEFHRV9WSUVXX0FUVFJJQlVURVMiLCJQQUdFX09DQ1VQQVRJT05TIiwiUEFHRV9PQ0NVUEFUSU9OX1NLSUxMUyIsIlBBR0VfQVJDSEVUWVBFX1NLSUxMUyIsIlBBR0VfUE9JTlRTX1NLSUxMUyIsIlBBR0VfSU5WRVNUSUdBVE9SIiwiUEFHRV9CQUNLU1RPUlkiLCJQQUdFX0NSRUFURSIsImNoYXJhY3RlcmlzdGljc01ldGhvZHMiLCJNRVRIT0RfREVGQVVMVCIsIk1FVEhPRF9ST0xMIiwiTUVUSE9EX1BPSU5UUyIsIk1FVEhPRF9WQUxVRVMiLCJjb2NpZENyZWRpdFJhdGluZyIsImNvY2lkTGFuZ3VhZ2VPd24iLCJwYWdlT3JkZXIiLCJwYWdlcyIsImRlZmF1bHRTZXR1cCIsImxvYWRDYWNoZUl0ZW1CeUNvQ0lEIiwic2hvd0xvYWRpbmciLCJmaWx0ZXJDYWNoZUl0ZW1CeUNvQ0lEIiwicmVnZXhwIiwiY2FjaGVDb0NJRCIsImdldENhY2hlSXRlbUJ5Q29DSUQiLCJjb2NpZHMiLCJkZWZhdWx0RXJhIiwiZ2V0QWdlQWRqdXN0bWVudHMiLCJzZXR1cE1vZGlmaWVycyIsInJlcXVpcmVzQWdlQWRqdXN0bWVudHMiLCJkZWR1Y3QiLCJzZXR1cCIsImNhbk5leHQiLCJjcmVhdGVCdXR0b24iLCJzaG93TW9uZXRhcnkiLCJzdGVwIiwic2V0dXBzIiwib2NjdXBhdGlvbnMiLCJhcmNoZXR5cGVzIiwiX2VyYXMiLCJjaGFyYWN0ZXJpc3RpY3NNZXRob2QiLCJlbmZvcmNlUG9pbnRCdXkiLCJxdWlja0ZpcmVWYWx1ZXMiLCJoYXNBcmNoZXR5cGVzIiwiY29yZUNoYXJhY3RlcmlzdGljIiwidG9Mb2NhbGVVcHBlckNhc2UiLCJzdWdnZXN0ZWRPY2N1cGF0aW9ucyIsInN1Z2dlc3RlZFRyYWl0cyIsImVtcHRpZXMiLCJzZXR1cFBvaW50cyIsInB1bHBSdWxlSWdub3JlQWdlUGVuYWx0aWVzIiwiZGVkdWN0VG90YWwiLCJkZWR1Y3RGcm9tIiwibiIsInJlZHVjZUZyb20iLCJsdWNrVmFsdWUiLCJwZXJzb25hbFRleHQiLCJza2lsbEl0ZW1zIiwibGFuZ3VhZ2VOYW1lIiwicm93cyIsImlzTXVsdGlwbGUiLCJpc0NyZWRpdFJhdGluZyIsImlzUGlja2FibGUiLCJpc09jY3VwYXRpb25EZWZhdWx0IiwiaW5PY2N1cGF0aW9uR3JvdXAiLCJvY2N1cGF0aW9uVG9nZ2xlIiwicGlja2VkIiwiZGVsZXRlYWJsZSIsImFyY2hldHlwZVRvZ2dsZSIsIm9jY3VwYXRpb25Hcm91cHMiLCJpc0FyY2hldHlwZURlZmF1bHQiLCJjcmVkaXRSYXRpbmdPa2F5IiwicmVtYWluaW5nIiwiZnJvbUNvQ0lEIiwidG90YWxQb2ludHMiLCJudW0iLCJpc09jY3VwYXRpb24iLCJpc0FyY2hldHlwZSIsInNob3dDcmVkaXRSYXRpbmciLCJhbGxCYWNrc3RvcmllcyIsImNhY2hlQmFja3N0b3JpZXMiLCJyb2xlIiwiVVNFUl9QRVJNSVNTSU9OUyIsIkFDVE9SX0NSRUFURSIsImRlZmF1bHRSb2xlIiwia2V5cHJlc3MiLCJzcmNFbGVtZW50IiwidGFnTmFtZSIsIndoaWNoIiwiY2hhckNvZGUiLCJfb25JbmNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25EZWNyZWFzZUNoYXJhY3RlcmlzdGljMTAiLCJfb25Sb2xsQWxsIiwiX29uUm9sbEVkdSIsIl9vblJvbGxMdWNrIiwiYmx1ciIsIl9vbkNoYW5nZVNhdmVDaGFyYWN0ZXJpc3RpYyIsIl9vblRvZ2dsZVNraWxsIiwiX29uQ2xpY2tQaWNrU2tpbGwiLCJfb25DbGlja1NraWxsU3BlY2lhbCIsIl9vbkNsaWNrUmVtb3ZlU2tpbGwiLCJfb25DaGFuZ2VTa2lsbFBvaW50cyIsIl9vbkNoYW5nZUJhY2tzdG9yeVRleHQiLCJfb25Sb2xsQmFja3N0b3J5IiwiX29uUmVzZXRCYWNrc3RvcnkiLCJyb2xsTWVzc2FnZSIsIkNIQVRfVEVNUExBVEUiLCJnZXRUb29sdGlwIiwiYWRkSXRlbVRvTGlzdCIsImludmVzdGlnYXRvckl0ZW1zIiwiaW5wbGFjZSIsImNsZWFyU2V0dXBQb2ludHMiLCJzZXRTa2lsbExpc3RzIiwicGxhY2VhYmxlIiwiZ20iLCJuYW1lQ3JlZGl0UmF0aW5nIiwiY2hhcmFjdGVyaXN0aWNLZXkiLCJkZXN0aW5hdGlvbiIsIm9rYXkiLCJ0ZW1wIiwicGFyZW50Tm9kZSIsInRvZ2dsZUtleSIsImd1ZXNzR3JvdXBGcm9tS2V5IiwiYWRqdXN0bWVudCIsInRleHRhcmVhIiwicm9sbHRhYmxlIiwidGFibGVSZXN1bHQiLCJtb2RpZnlPZmZzZXQiLCJtb2RpZnlDaGFyYWN0ZXJpc3RpYyIsInJlcm9sbHNFbmFibGVkIiwib2JqVG90YWwiLCJnZXRQYWdlTnVtYmVyIiwiZGlyZWN0aW9uIiwiY2xhc3NOYW1lIiwiZGVmYXVsdE93bmVyc2hpcCIsInN0YXJ0ZWQiLCJub3ciLCJidWZmZXIiLCJkZWZhdWx0UXVhbnRpdHkiLCJmbGF0S2V5cyIsInBhZ2VOdW1iZXIiLCJzY3JvbGxUb3AiLCJhdHRlbXB0VG9DcmVhdGUiLCJub3JtYWxpemVDaGFyYWN0ZXJEYXRhIiwiY3JlYXRlQ2hhcmFjdGVyIiwia2VlcGVycyIsImxpc3RlbmVyIiwicGF5bG9hZCIsInNvdXJjZUl0ZW0iLCJhdmF0YXIiLCJUT0tFTl9ESVNQT1NJVElPTlMiLCJGUklFTkRMWSIsImNyZWF0ZUNoYXJhY3RlckZyb21EYXRhIiwiZnVuY3Rpb25JZCIsIm9mZiIsImNhY2hlSXRlbXMiLCJDb0M3TWVudUxheWVyIiwiUGxhY2VhYmxlc0xheWVyIiwib2JqZWN0cyIsImxheWVyT3B0aW9ucyIsInBsYWNlYWJsZXMiLCJDb0M3TWVudSIsImdldEJ1dHRvbnMiLCJjb250cm9scyIsImNvYzdnbXRvb2xzIiwibGF5ZXIiLCJ0b29scyIsIm9uQ2xpY2siLCJjb2M3RGV2VG9vbHMiLCJyZW5kZXJDb250cm9scyIsImtlZXBlck1lbnUiLCJhZnRlciIsIkNvQzdDYW52YXMiLCJDT0M3X1RZUEVTX1NVUFBPUlRFRCIsIm9uRHJvcFNvbWV0aGluZyIsImdyaWRTaXplIiwiZHJvcFRhcmdldFRva2VucyIsImJldHdlZW4iLCJhcHBJZCIsImNhbGxCYWNrIiwid2luZG93cyIsIkNvQzdTZXR0aW5nc0RpcmVjdG9yeSIsIlNldHRpbmdzIiwibG9jYXRpb24iLCJNYW51YWwiLCJDb0M3Q29tcGVuZGl1bURpcmVjdG9yeSIsIkNvbXBlbmRpdW1EaXJlY3RvcnkiLCJ0cmFuc2xhdGVkIiwiYmFiZWxlIiwiQ29DN0FjdG9yRGlyZWN0b3J5IiwiQWN0b3JEaXJlY3RvcnkiLCJhbGxvd1dpemFyZCIsImFsbG93ZWQiLCJDb0M3RGVjYWRlckRTTkZhY2VzIiwiY29uc3RydXRvciIsInNldEZhY2VzIiwiZ2xvYmFsIiwic291cmNlRGllIiwiRGljZUZhY3RvcnkiLCJzeXN0ZW1zIiwiQ29DN1NwZWxsIiwiY2FzdCIsImlzT3duZWQiLCJjb3N0cyIsImxvc3NlcyIsImNvbnZlcnRTdXJwbHVzSW50b0hpdFBvaW50cyIsIm1hZ2ljUG9pbnRzIiwiY29udmVydGVkSGl0UG9pbnRzIiwiY29udmVydGVkTWFnaWNQb2ludHMiLCJhY3Rvck1hZ2ljUG9pbnRzIiwib3JpZ2luYWxNYWdpY1BvaW50cyIsImhpdFBvaW50cyIsInJlc29sdmVMb3NzZXMiLCJncmFudFNhbml0eUxvc3MiLCJnZXRIVE1MIiwic2FuaXR5TG9zcyIsInNhbml0eUNoZWNrIiwiYm9va0lkIiwiYm9vayIsIkNvQzdCb29rIiwiYWRkU3BlbGxzIiwic3BlbGxEZXRhaWwiLCJsZWFybmVkIiwiYXR0ZW1wdEluaXRpYWxSZWFkaW5nIiwiY2hhbmdlUHJvZ3Jlc3MiLCJpbml0aWFsUmVhZGluZyIsImZ1bGxTdHVkeSIsImNvbXBsZXRlRnVsbFN0dWR5IiwiY2hlY2tFeGhhdXN0aW9uIiwiZ3JhbnRGdWxsU3R1ZHkiLCJhY3Rvck15dGhvc1ZhbHVlIiwiZGV2ZWxvcG1lbnRzIiwibXl0aG9zRmluYWwiLCJnYWlucyIsImZpbmFsIiwiZ3JhbnRTa2lsbERldmVsb3BtZW50Iiwicm9sbFNhbml0eUxvc3MiLCJmdWxsU3R1ZGllcyIsImdyYW50SW5pdGlhbFJlYWRpbmciLCJvdGhlcnMiLCJwYXR0ZXJuIiwiZ3JhbnRTcGVsbExlYXJuaW5nIiwic3BlbGxsZWFybmVkIiwiZXhpc3RpbmdTa2lsbCIsInNob3dEZXZlbG9wbWVudHNUYWJsZSIsInJlZG9GdWxsU3R1ZHkiLCJhdHRlbXB0U3BlbGxMZWFybmluZyIsIkVDQ19DTEFTUyIsIlBFUk1JU1NJT05fVFlQRSIsIlNUQVRFIiwiR01VcGRhdGUiLCJjYXJkQ2xhc3NOYW1lIiwiRW5oYW5jZWRDaGF0Q2FyZCIsImFkdmlzZSIsIkVuaGFuY2VkQ2hhdENhcmRMaWIiLCJ0eXBlcyIsImluamVjdENTUyIsImVuaGFuY2VkQ2hhdENhcmRzTGliIiwicmVnaXN0ZXIiLCJjYXJkQ29uc3RydWN0b3JzIiwiY2FyZENvbnN0cnVjdG9yIiwib29jIiwiZGVlcENsb25lIiwiYXR0YWNoT2JqZWN0Iiwib2JqZWN0RGF0YVN0cmluZyIsImVjY0NsYXNzIiwibG9jYWxDb21wdXRlIiwiRXhlY3V0ZUdNVXBkYXRlIiwiRUVDX0FDVElPTiIsImRldGFjaERhdGEiLCJfb25DaGFuZ2UiLCJzZXRWaXNpYmlsaXR5Iiwic2V0UGVybWlzc2lvbiIsInNldFN0YXRlIiwic2V0UmFkaW9TdGF0ZSIsInNwbGl0ZWQiLCJlY2NWaXNpYmlsaXR5IiwiaGFzUGVybSIsImVjY1Blcm1pc3Npb25zIiwicmVzdHJpY3RlZFRvIiwidmlzaW9uIiwicGVybWlzc2lvbnNBcnJheSIsIndoaXRlTGlzdCIsImlzQXV0aG9yIiwiYXNzaWduT2JqZWN0cyIsIm5ld0RhdGEiLCJmb3JtVXBkYXRlIiwiYWN0aW9uVXBkYXRlIiwib3JpZ2luYWxEaXNwbGF5U3R5bGUiLCJ1cGRhdGVDYXJkIiwic2F2ZURhdGEiLCJodG1tbENhcmQiLCJDYXJkQ2xhc3MiLCJ1bnNldERhdGEiLCJ0b2dnbGVEYXRhIiwiYk5hbWUiLCJfcGFydGljaXBhbnQiLCJfZmV0Y2giLCJfZG9jIiwiaXNBY3RvciIsImhhc0FjdG9yIiwiaGFzVmVoaWNsZSIsImlzQWN0aXZlIiwidmVoaWNsZSIsImRyaXZlciIsIl9kcml2ZXIiLCJ2ZWhpY2xlS2V5IiwiX3ZlaGljbGUiLCJoYXNWYWxpZE1vdiIsImhhc01heEJvbnVzRGljZSIsImFkZEJvbnVzRGljZSIsInJlbW92ZUJvbnVzRGljZSIsInJlc2V0Qm9udXNEaWNlIiwiaGFzQm9udXNEaWNlIiwiaGFzT25lQm9udXNEaWNlIiwiaGFzVHdvQm9udXNEaWNlIiwiY2FuQXNzaXN0IiwiYXNzaXN0IiwiY2FuQmVDYXV0aW91cyIsImhhc0RyaXZlciIsImhhc1ZhbGlkRGV4IiwiaGFzQUd1blJlYWR5IiwiaXNDaGFzZXIiLCJjaGFzZXIiLCJpc1ByZXkiLCJpc1ZhbGlkIiwibW92QWRqdXN0bWVudCIsInNwZWVkQ2hlY2siLCJyb2xsRGF0YVN0cmluZyIsImFkanVzdGVkTW92IiwiaGFzTW92QWRqdXN0bWVudCIsImhhc0JvbnVzTW92IiwiaGFzTWFsdXNNb3YiLCJ0b29TbG93IiwiZXhjbHVkZWQiLCJpbmNsdWRlSW5DaGFzZSIsInNsb3dlc3QiLCJmYXN0ZXN0IiwiY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zIiwibWluTW92IiwibW92ZW1lbnRBY3Rpb24iLCJjdXJyZW50TW92ZW1lbnRBY3Rpb25zIiwiaGFzTWF4TXZ0QWN0aW9ucyIsImhhc05vTXZ0QWN0aW9ucyIsImFkZE1vdmVtZW50QWN0aW9ucyIsImFsdGVyTW92ZW1lbnRBY3Rpb25zIiwibW92ZW1lbnRBY3Rpb25BcnJheSIsImJhc2VBcnJheSIsImZpbGwiLCJpbmxpbmVSb2xsIiwibW9kaWZpZXJDc3MiLCJoYXNPcHRpb25zIiwiZ2FtZUl0ZW0iLCJyZWYiLCJyZWZTZXQiLCJpc0NoYXJhY3RlcmlzdGljIiwiY2FuQmVSb2xsZWQiLCJzb3J0QnlSb2xlQW5kRGV4IiwiQ2hhc2VPYnN0YWNsZUNhcmQiLCJzdHJpbmdzIiwidG90YWxBY3Rpb25Db3N0IiwiYnJlYWthYmxlT2JzdGFjbGUiLCJvYnN0YWNsZSIsImJhcnJpZXIiLCJoYXNIaXRQb2ludHMiLCJ2YWxpZENoZWNrIiwic3RhdGVzIiwib2JzdGFjbGVEZWZpbmVkIiwiaGF6YXJkIiwidHJ5VG9OZWdvdGlhdGUiLCJ0cnlUb0JyZWFrIiwiYnJlYWtPck5lZ290aWF0ZURlZmluZWQiLCJwYXJ0aWNpcGFudCIsImNoYXNlIiwiZ2V0QWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MiLCJwYXJ0aWNpcGFudFV1aWQiLCJ2YWxpZFNraWxsIiwiY2hlY2tUaHJlc2hvbGQiLCJhbGxTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MiLCJkdW1teUFjdG9yIiwiY2FuVGFrZUNhdXRpb3VzQXBwcm9hY2giLCJjdXN0b21XZWFwb24iLCJ3ZWFwb25DaG9pY2UiLCJjaGVja1JvbGxSZXF1ZXN0IiwiY2FuQXNrUm9sbCIsIkVudGVyVmFsdWVUaXRsZSIsImRhbWFnZVN0YXR1cyIsIm9ic3RhY2xlRGFtYWdlUm9sbCIsIm9ic3RhY2xlRGFtYWdlUm9sbGVkIiwib2JzdGFjbGVEYW1hZ2UiLCJpbmxpbmVEYW1hZ2VSb2xsIiwidG90YWxDYXV0aW91c0FwcHJvYWNoIiwiY2F1dGlvdXNTdGF0dXMiLCJjYXV0aW91c0FwcHJvYWNoVHlwZSIsImNvbnN1bWVCb251c0RpY2UiLCJtb3ZlUGxheWVyIiwib2JzdGFjbGVQYXNzZWQiLCJjaGVja0ZhaWxlZCIsInBsYXllckFjdGlvbkRlZmluZWQiLCJwbGF5ZXJJbnRlbnRpb25zIiwiY2hlY2tSb2xsZWQiLCJjYXJkUmVzb2x2ZWQiLCJwbGF5ZXJEYW1hZ2VUYWtlbiIsIm9ic3RhbGNlRGVmaW5pdGlvbkNoYW5nZWQiLCJsaXN0Q2hhbmdlcyIsImhhc0RhbWFnZSIsImlubGluZURhbWFnZVRha2VuUm9sbCIsImZhaWxlZERhbWFnZVJvbGwiLCJ0b3RhbFBsYXllckRhbWFnZVRha2VuIiwiaGFzQWN0aW9uQ29zdCIsImFjdGlvbkxvc3QiLCJpbmxpbmVBY3Rpb25Mb3N0Um9sbCIsImZhaWxlZEFjdGlvblJvbGwiLCJmaW5hbE91dGNvbWUiLCJ0b3RhbERhbWFnZSIsInJlZmxlY3RPYnN0YWxlQ2hhbmdlcyIsImZhaWxlZENvbnNlcXVlbmNlc1JvbGxlZCIsInRvdGFsT2JzdGFjbGVEYW1hZ2UiLCJvYnN0YWNsZURlc3RveWVkIiwiSGl0UG9pbnRzIiwiYWN0aXZlUGFydGljaXBhbnREYXRhIiwib2JzdGFjbGVEZXRhaWxzIiwicGFydGljaXBhbnREYXRhIiwiZ2V0UGFydGljaXBhbnREYXRhIiwiZ2V0TG9jYXRpb25EYXRhIiwibG9jYXRpb25VdWlkIiwiY2hhc2VVdWlkIiwiX2NoYXNlIiwiYWN0b3JTa2lsbCIsInZhbGlkRmFpbGVkUm9sbHMiLCJmYWlsZWRDaGVja0RhbWFnZSIsImFjdGlvbkNvc3QiLCJmYWlsZWRBY3Rpb25Db3N0Iiwid2VhcG9uc09wdGlvbnMiLCJpdGVtVHlwZXMiLCJ3IiwiYWhiZCIsInVuc2hpZnQiLCJjdXN0b21XZWFwb25EYW1hZ2UiLCJ1c2VkV2VhcG9uIiwiaW5mbGljdGVkRGFtYWdlRm9ybXVsYSIsInZhbGlkT2JzdGFjbGVEYW1hZ2UiLCJkYW1hZ2VSb2xsUmVxdWVzdCIsInZhbGlkYXRlQ2FyZCIsImxvYWN0aW9uQ2hhbmdlZCIsInBhcnRpY2lwYW50Q2hhZ2VkIiwib2JzdGFjbGVVcGRhdGUiLCJwYXJ0aWNpcGFudFVwZGF0ZSIsImRpZmYiLCJuZXciLCJyZW1haW5pbmdIcCIsInRhcmdldExvY2F0aW9uIiwiZm9yd2FyZCIsImdldExvY2F0aW9uU2hpZnQiLCJtb3ZlUGFydGljaXBhbnRUb0xvY2F0aW9uIiwic2Nyb2xsVG9Mb2NhdGlvbiIsImFjdGl2YXRlTG9jYXRpb24iLCJ1cGRhdGVMb2NhdGlvbiIsInVwZGF0ZVBhcnRpY2lwYW50IiwiYWN0aXZhdGVOZXh0UGFydGljaXBhbnRUdXJuIiwiZGVmaW5lT2JzdGFjbGUiLCJ0cnlUb05lZ290aWF0ZU9ic3RhY2xlIiwidHJ5VG9CcmVha0Rvd25PYnN0YWNsZSIsImNhbmNlbE9ic3RhY2xlRGVmaW5pdGlvbiIsImNhbmNlbEJyZWFrT3JQYXNzQ2hvaWNlIiwicmVxdWVzdFJvbGwiLCJ0YWtlQ2F1dGlvdXNBcHByb2FjaCIsInJvbGxTa2lsbENoZWNrIiwidXNlTHVjayIsInJvbGxGYWlsQ29uc2VxdWVuY2VzIiwiYXNrUm9sbE9ic3RhY2xlRGFtYWdlIiwicm9sbE9ic3RhY2xlRGFtYWdlIiwibmFtZXMiLCJuZXdPYnN0YWNsZSIsIm9sZCIsIkNvQzdDaGFzZSIsInBhcnRpY2lwYW50cyIsInBMaXN0IiwicHJleXMiLCJjaGFzZXJzIiwicGFydGljcGFudCIsInBhcnRpY2lwYW50c09iamVjdCIsImdldFBhcnRpY2lwYW50TG9jYXRpb24iLCJhY3RpdmVBY3RvciIsInBhcnRpY2lwYW50c0J5QWRqdXN0ZWRNb3YiLCJhY3R1YWxQYXJ0aWNpcGFudHMiLCJwYXJ0aWNpcGFudHNCeUluaXRpYXRpdmUiLCJhbGxIYXZlVmFsaWRNb3YiLCJldmVyeSIsImFsbEhhdmVTcGVlZFJvbGwiLCJsb2NhdGlvbnMiLCJsIiwibHAiLCJnZXRQYXJ0aWNpcGFudCIsIm5leHRBY3RpdmVQYXJ0aWNpcGFudCIsInNsb3dlc3RQcmV5IiwiZmFzdGVzdENoYXNlciIsImluY2x1ZGVMYXRlY29tZXJzIiwiaW5jbHVkZUVzY2FwZWQiLCJzbG93ZXN0UGFydGljaXBhbnQiLCJ1cGRhdGVQYXJ0aWNpcGFudHMiLCJwYXJ0aWNpcGFudHNEYXRhIiwiY2xlYW5QYXJ0aWNpcGFudExpc3QiLCJwYXJ0aWNpYW50VXVpZCIsInBhcnRpY2lwYW50SW5kZXgiLCJvdmVyd3JpdGUiLCJhc3Npc3RQYXJ0aWNpcGFudCIsImFzc2lzdGFudFV1aWQiLCJiZW5lZmljaWFyeVV1aWQiLCJhc3Npc3RhbnQiLCJiZW5lZmljaWFyeSIsImFzc2lzdGFudEluZGV4IiwiYmVuZWZpY2lhcnlJbmRleCIsInVzZU1vdmVtZW50QWN0aW9ucyIsImFjdGlvbnMiLCJ0b2dnbGVCb251c0RpY2UiLCJkaWNlTnVtYmVyIiwiY2F1dGlvdXNBcHByb2FjaCIsImFsdGVyUGFydGljaXBhbnRNb3ZlbWVudEFjdGlvbiIsImFjdGl2ZVBhcnRpY2lwYW50IiwiYWN0aXZhdGVQYXJ0aWNpcGFudCIsImRhdGFVcGRhdGUiLCJnZXRBY3RpdmF0ZVBhcnRpY2lwYW50VXBkYXRlRGF0YSIsImFjdGl2ZUxvY2F0aW9uIiwicFV1aWQiLCJwYXJ0aWNpcGFudHNEYXRhVXBkYXRlIiwicGFydGljaXBhbnRMb2NhdGlvbiIsImxvY2F0aW9uc0RhdGFVcGRhdGUiLCJnZXRBY3RpdmF0ZUxvY2F0aW9uVXBkYXRlRGF0YSIsImNoYXNlVHJhY2tDdXJyZW50U2Nyb2xsUG9zaXRpb24iLCJnZXRDaGFzZVRyYWNrTG9jYXRpb25TY3JvbGxQb3NpdGlvbiIsImFjdGl2ZVBhcnRpY2lwYW50T2JzdGFjbGVDaGVjayIsIm1vdmVQYXJ0aWNpcGFudCIsInByb2dyZXNzVG9OZXh0Um91bmQiLCJyb2xsVXVpZCIsIm1ldGhvZCIsImluaXRUcmFjayIsInByb2Nlc3NMb2NhdGlvbnMiLCJkdXBsaWNhdGVEYXRhIiwiZmlyc3QiLCJsYXN0Iiwic3RhcnRpbmdMaW5lIiwibG9jYXRpb25zSW5kZXhTdGFydCIsImluaXRJbmRleFN0YXJ0IiwibG9jYXRpb25zTGVuZ3RoIiwic3RhcnRpbmdJbmRleCIsImdlbmVyYXRlTmV3VXVpZCIsImNoYXNlTG9jYXRpb25zIiwiZW5kIiwiY2hhc2VUcmFjayIsImNoYXNlcnNNaW5Nb3YiLCJmaW5kTWluTW92IiwiY2hhc2Vyc01heE1vdiIsImZpbmRNYXhNb3YiLCJwcmV5c01pbk1vdiIsInByZXlzTWF4TW92Iiwic3RhcnRpbmdSYW5nZSIsInVwZGF0ZUxvY2F0aW9uc0xpc3QiLCJ1cGRhdGVkTGlzdCIsImNsZWFuTG9jYXRpb25zTGlzdCIsImxvY2F0aW9uSW5kZXgiLCJwYXJ0aXBhbnRzVXVpZEFycmF5IiwiaW5zZXJ0TG9jYXRpb24iLCJpbnNlcnRBdFV1aWQiLCJuZXdMb2NhdGlvbkluZGV4IiwibmV3TG9jYXRpb24iLCJsb2NEYXRhIiwicmVtb3ZlTG9jYXRpb24iLCJnZXRDbGVhckFjdGl2ZUxvY2F0aW9uVXBkYXRlRGF0YSIsImhhc1BhcnRpY2lwYW50IiwiYWN0aXZlQWN0b3JIYXNTa2lsbCIsImFjdGl2ZUFjdG9yVGVzdCIsInByZXZpb3VzTG9jYXRpb24iLCJhY3RpdmVJbmRleCIsIm5leHRMb2NhdGlvbiIsImxvY2F0b3JEcm9wcGVkIiwic2V0TG9jYXRpb25Db29yZGluYXRlcyIsImNvb3JkaW5hdGVzIiwiY2xlYXJBY3RpdmVMb2NhdGlvbkNvb3JkaW5hdGVzIiwiY2xlYXJMb2NhdGlvbkNvb3JkaW5hdGVzIiwiY3V0VG9UaGVDaGFzZSIsInN0YXJ0IiwicmVzdGFydCIsInNldGNoYXNlVHJhY2tTY3JvbGwiLCJzdG9wIiwiZGVzdGluYXRpb25JbmRleCIsInJlbW92ZVBhcnRpY2lwYW50IiwibmV3UGFydGljaXBhbnRzRGF0YSIsImxvY2F0aW9uc0RhdGEiLCJhZGRQYXJ0aWNpcGFudCIsInVuaXF1ZSIsInJlY2FsY3VsYXRlTW92ZW1lbnRBY3Rpb25zIiwiZWRpdFBhcnRpY2lwYW50IiwibG9jYXRpb25Nb3ZlZCIsIm9yaWdpbkluZGV4IiwidG90YWxNb3ZlIiwib2xkUGFydGljaXBhbnRzTGlzdCIsIm1vdmVUb2tlbiIsInBhcnRpY3BhbnREb2N1bWVudCIsIlRva2VuRG9jdW1lbnQiLCJmb3VuZFRva2VucyIsInZpZXdlZCIsInRhcmdldFJlY3QiLCJQSVhJIiwiUmVjdGFuZ2xlIiwiZm91bmRGcmVlU3BhY2UiLCJvdmVybGFwaW5nVG9rZW4iLCJib3VuZHMiLCJpbnRlcnNlY3RzIiwic2hvd1Rva2VuTW92ZW1lbnQiLCJhbmltYXRlIiwidG8iLCJjaGFzZVRyYWNrQWN0aXZlTG9jYXRpb25TY3JvbGxQb3NpdGlvbiIsImFjdGl2ZUxvY2F0aW9uRWxlbWVudCIsImxlZnRTY3JvbGwiLCJvZmZzZXRMZWZ0IiwiY2xpZW50V2lkdGgiLCJwcmV2IiwicmVtU3RyaW5nIiwicmVtU2l6ZSIsInBDb3VudCIsIl90YWJzIiwiYWN0aXZlQWN0b3JTa2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3MiLCJwYXJ0aWNpY3BhbnREYXRhIiwiSW50bCIsIkNvbGxhdG9yIiwiY29tcGFyZSIsImFsbFNraWxsc0FuZENoYXJhY3RlcmlzdGljc1Nob3J0IiwiQ29DN1NraWxsIiwibmV3UHJvcGVydGllcyIsImhhc0FjdGl2ZUVmZmVjdHMiLCJhY3RpdmVFZmZlY3RzIiwiZWZmZWN0S2V5RnVsbCIsImVmZmVjdEtleVNob3J0IiwiZGVsdGEiLCJleHAiLCJDb0M3VmVoaWNsZSIsIkNvQzdEZWNhZGVyRGllIiwiRGljZVRlcm0iLCJ0ZXJtRGF0YSIsIkRFTk9NSU5BVElPTiIsIkNvQzdEZWNhZGVyRGllT3RoZXIiLCJTRVRUSU5HUyIsInB1bHBSdWxlcyIsImluaXRpYXRpdmVSdWxlIiwiY2hvaWNlcyIsIm9uQ2hhbmdlIiwicnVsZSIsIl9zZXRJbml0aWF0aXZlT3B0aW9ucyIsInB1bHBSdWxlRG91YmxlTWF4SGVhbHRoIiwicHVscFJ1bGVUYWxlbnRzIiwicHVscFJ1bGVGYXN0ZXJSZWNvdmVyeSIsInB1bHBSdWxlSWdub3JlTWFqb3JXb3VuZHMiLCJvcHBvc2VkUm9sbFRpZUJyZWFrZXIiLCJkZWNpbWFscyIsIkNvbWJhdCIsIkNvQzdHYW1lUnVsZVNldHRpbmdzIiwidHJ1ZSIsImZhbHNlIiwic2V0dGluZyIsInB1bHBTZWxlY3Rpb24iLCJyZWdpc3RlclNldHRpbmdzIiwib25DaGFuZ2VQdWxwU2VsZWN0Iiwib25DbGlja1B1bHAiLCJvblJlc2V0RGVmYXVsdHMiLCJjaGVja2JveCIsIkNvQzdBcmNoZXR5cGVTaGVldCIsImNoYXJhY05hbWUiLCJlbnJpY2hlZFN1Z2dlc3RlZE9jY3VwYXRpb25zIiwiZW5yaWNoZWRTdWdnZXN0ZWRUcmFpdHMiLCJjb3JlQ2hhcmFjdGVyaXN0aWNzU3RyaW5nIiwiQ29DN0Jvb2tTaGVldCIsInNwZWxsc0xlYXJuZWQiLCJleGhhdXN0ZWQiLCJzdHVkeUNvbXBsZXRlZCIsInNwZWxsTGlzdEVtcHR5IiwiZW5yaWNoZWRDb250ZW50IiwiX29uRGVsZXRlIiwiX29uU3BlbGxEZXRhaWwiLCJtb2RpZnlPdGhlcnNHYWlucyIsIm1vZGlmeVR5cGUiLCJDb0M3Q29udGFpbmVyU2hlZXQiLCJzbGlkZVRvZ2dsZSIsIkNvQzdDaGFzZVBhcnRpY2lwYW50SW1wb3J0ZXIiLCJwZXJtaXNzaW9ucyIsIl9vbkRyb3BQYXJ0aWNpcGFudCIsImRyYWdzdGFydCIsIl9vblRva2VuU2VsZWN0b3JEcmFnU3RhcnQiLCJfb25BY3Rpb24iLCJ2YWxpZGF0ZVBhcnRpY2lwYW50Iiwic3BlZWRDaGVja1JlYWRPbmx5IiwiaW5pdFJlYWRPbmx5Iiwib3B0aW9uc0xpc3QiLCJza2lsbHNBbmRDaGFyYWN0ZXJpc3RpY3NMaXN0IiwiZHJvcFN0cmluZyIsImFkZFRva2VuVG9DaGFzZSIsIm92ZXJyaWRlTW92ZW1lbnRBY3Rpb24iLCJyZWNhbGN1bGF0aW9uTmVlZGVkIiwicGFydGljaXBhbnRFeGNsdWRlZCIsIm1vdmVtZW50QWN0aW9uRGVsdGEiLCJpbmNsdWRlTGFzdENvbW1lcnMiLCJleGNsdWRlZEJlY2F1c2UiLCJDb0M3Q2hhc2VTaGVldCIsIl9vbkRyYWdFbnRlclBhcnRpY2lwYW50IiwiX29uRHJhZ0xlYXZlUGFydGljaXBhbnQiLCJfb25DaGFuZ2VTaWRlIiwiX29uRGVsZXRlUGFydGljaXBhbnQiLCJfb25SZXNldFJvbGwiLCJfb25EZWxldGVEcml2ZXIiLCJfb25BZGRQYXJ0aWNpcGFudCIsIl9vblJvbGxQYXJ0aWNpcGFudCIsIl9vbkxvY2F0aW9uQ2xpY2siLCJfb25PYnN0YWNsZVR5cGVDbGljayIsIl9vblBhcnRpY2lwYW50Q29udHJvbENsaWNrZWQiLCJfb25DaGFzZUNvbnRyb2xDbGlja2VkIiwiX29uTG9jYXRpb25Db250cm9sQ2xpY2siLCJfY2FuUGluTG9jYXRpb25EcmFnU3RhcnQiLCJfb25QaW5Mb2NhdGlvbkRyYWdTdGFydCIsIl9vbkNoYXNlUGFydGljaXBhbnRDbGljayIsIl9jYW5DaGFzZVBhcnRpY2lwYW50RHJhZ1N0YXJ0IiwiX2NhbkNoYXNlUGFydGljaXBhbnREcmFnRHJvcCIsIl9vbkNoYXNlUGFydGljaXBhbnREcmFnU3RhcnQiLCJfb25DaGFzZVBhcnRpY2lwYW50RHJhZ0Ryb3AiLCJkcmFnb3ZlciIsIl9vbkRyYWdFbnRlciIsIl9vbkRyYWdMZWF2ZSIsIl9nZXRTdWJtaXREYXRhIiwiZWRpdG9ycyIsImNsZWFuZWQiLCJjbGVhbiIsIm9yaWdpbmFsTG9jYXRpb24iLCJzdWJUeXBlIiwiZmluZFBhcnRpY2lwYW50SW5kZXgiLCJzZXRTY3JvbGwiLCJpbml0aWFsT3BlbmluZyIsInNjcm9sbCIsImFjdGl2YXRlVGFiIiwic2Nyb2xsVG8iLCJiZWhhdmlvciIsIm9uQ2xvc2UiLCJmaW5kTG9jYXRpb25JbmRleCIsImZpbmRMb2NhdGlvbiIsImxVdWlkIiwidG9nZ2xlUGFydGljaXBhbnRHdW4iLCJfb25DaGFuZ2VNb3ZlbWVudEFjdGlvbnMiLCJzZWxlY3RvciIsImRyYWdJY29uIiwic2V0RHJhZ0ltYWdlIiwibG9jYXRpb25FbGVtZW50IiwiZHJhZ0V2ZW50Iiwib2xkTG9jYXRpb24iLCJfb25EcmFnT3ZlciIsImFsdGVyUGFydGljaXBhbnQiLCJzdGFuZGJ5VGV4dCIsInN0YW5kYnlSaWdodEljb24iLCJvbGRQYXJ0aWNpcGFudCIsInRwIiwiZ2V0VHlwZSIsIkNvQzdJdGVtU2hlZXRWMiIsIkNvQzdJdGVtU2hlZXQiLCJDb0M3Sm91cm5hbFNoZWV0IiwiSm91cm5hbFNoZWV0IiwiQ29DN01hY3JvQ29uZmlnIiwiTWFjcm9Db25maWciLCJDb0M3UGxheWxpc3RDb25maWciLCJQbGF5bGlzdENvbmZpZyIsIkNvQzdSb2xsVGFibGVDb25maWciLCJSb2xsVGFibGVDb25maWciLCJDb0M3U2NlbmVDb25maWciLCJTY2VuZUNvbmZpZyIsIkNvQzdTZXR1cFNoZWV0IiwiX29uQWRkQmlvIiwiX29uUmVtb3ZlU2VjdGlvbiIsIm90aGVySXRlbXMiLCJpdGVtc0xpc3RFbXB0eSIsIkNvQzdTa2lsbFNoZWV0IiwiX3NoZWV0VGFiIiwiaGFkTm9uQ2hhcmFjdGVyT3duZXIiLCJpc1NwZWNpYWxpemVkIiwiY2FuTW9kaWZ5U3BlYyIsIkNvQzdTcGVsbFNoZWV0IiwiQ29DN1N0YXR1c1NoZWV0Iiwic3RhdHVzVHlwZSIsImVucmljaGVkRGVzY3JpcHRpb25Ob3RlcyIsIkNvQzdUYWxlbnRTaGVldCIsInRhbGVudFR5cGUiLCJDb0M3VmVoaWNsZVNoZWV0IiwiYXJtZWQiLCJfb25BZGRBcm1vciIsIl9vblJlbW92ZUFybW9yIiwiX29uVG9nZ2xlRXhwYW5kIiwib2xkU2l6ZSIsIkNvQzdXZWFwb25TaGVldCIsImNvbWJhdFNraWxsIiwicHJpY2UiLCJlbnJpY2hlZERlc2NyaXB0aW9uU3BlY2lhbCIsIl9vblByb3BlcnR5Q2xpY2siLCJwZXJmb3JtRmlsdGVyIiwiZXJhRWxlbWVudCIsIm5hbWVGaWx0ZXIiLCJDb0NJRCIsImNvbXBlbmRpdW1JbmRleEZpZWxkcyIsIkpvdXJuYWxFbnRyeSIsIlBsYXlsaXN0IiwiUm9sbFRhYmxlIiwiU2NlbmUiLCJnYW1lUHJvcGVydHlMb29rdXAiLCJkb2N1bWVudE5hbWVMb29rdXAiLCJlcmFUZXh0IiwibWFrZUdyb3VwUmVnRXgiLCJsYW5nRmFsbGJhY2siLCJub3RtaXNzaW5nIiwic3BsaXRzIiwicmVnRXhQYXJ0cyIsImZyb21Db0NJRFJlZ2V4QWxsIiwiZG9jdW1lbnRzRnJvbVdvcmxkIiwicHJvZ3Jlc3NCYXIiLCJTY2VuZU5hdmlnYXRpb24iLCJkaXNwbGF5UHJvZ3Jlc3NCYXIiLCJwY3QiLCJmaWx0ZXJBbGxDb0NJRCIsImNvbXBlbmRpYURvY3VtZW50cyIsImRvY3VtZW50c0Zyb21Db21wZW5kaWEiLCJhbGxEb2N1bWVudHMiLCJmaWx0ZXJCZXN0Q29DSUQiLCJmcm9tQ29DSURCZXN0IiwiYmVzdE1hdGNoRG9jdW1lbnRzIiwiZG9jQ29DSUQiLCJjdXJyZW50RG9jIiwiZG9jUHJpb3JpdHkiLCJNSU5fU0FGRV9JTlRFR0VSIiwiZXhpc3RpbmdQcmlvcml0eSIsImRvY0VyYXMiLCJkb2NMYW5nIiwiZXhpc3RpbmdMYW5nIiwiZ2FtZVByb3BlcnR5IiwiZ2V0R2FtZVByb3BlcnR5IiwiY2FuZGlkYXRlRG9jdW1lbnRzIiwibWF0Y2hpbmdFcmFzIiwiY29tcGFyZUNvQ0lEUHJpbyIsImdldERvY3VtZW50VHlwZSIsInNjaGVtYSIsImluZGV4ZWQiLCJnZXRJbmRleCIsImluZGV4SW5zdGFuY2VzIiwiamUiLCJydCIsIkNhcmQiLCJsb2FkVGVtcGxhdGVzIiwicHJlbG9hZEhhbmRsZWJhcnNUZW1wbGF0ZXMiLCJyZWdpc3Rlck1lbnUiLCJyZXN0cmljdGVkIiwid29ybGQiLCJZIiwiTiIsIm5vYm9keSIsImV2ZXJ5b25lIiwiYWx3YXlzIiwiY3JlYXRpb24iLCJuZXZlciIsIl9zZXRSb290Rm9udFNpemUiLCJzaWRlYmFyIiwiY29udGFpbiIsImhvb2tzIiwiQWN0b3JzIiwidW5yZWdpc3RlclNoZWV0IiwicmVnaXN0ZXJTaGVldCIsIm1ha2VEZWZhdWx0IiwiSXRlbXMiLCJTY2VuZXMiLCJKb3VybmFsIiwiUm9sbFRhYmxlcyIsIk1hY3JvcyIsIlBsYXlsaXN0cyIsIkhhbmRsZWJhcnMiLCJyZWdpc3RlckhlbHBlciIsIlNldCIsInVuY29tbW9uIiwiY29tcGVuZGl1bUZpbHRlciIsImhlaWdodFRleHQiLCJoZWlnaHRUaXAiLCJ3aWR0aFRpcCIsImNsZWFyVGltZW91dCIsIkNvQzdUb3VyIiwiVG91ciIsIndhaXRGb3JFbGVtZW50IiwiTXV0YXRpb25PYnNlcnZlciIsIm11dGF0aW9ucyIsIm9ic2VydmVyIiwiZGlzY29ubmVjdCIsIm9ic2VydmUiLCJjaGlsZExpc3QiLCJzdWJ0cmVlIiwiX3ByZVN0ZXAiLCJzdGVwSW5kZXgiLCJjdXJyZW50U3RlcCIsInNpZGViYXJUYWIiLCJfcG9zdFN0ZXAiLCJoYXNOZXh0IiwiaXNSZXNldHRpbmciLCJyZXNldCIsIkVuYWJsZVZhcmlhbnRSdWxlc0VuIiwiY2FuQmVSZXN1bWVkIiwic3RlcHMiLCJsb2NhbGl6YXRpb24iLCJFbmFibGVWYXJpYW50UnVsZXNGciIsImluc3RydWN0aW9uc1ZlcnNpb24iLCJyZWFkTWUiLCJ0b3VycyIsInRvdXJOYW1lIiwicmVnaXN0ZXJUb3VycyIsIkNvQzdIb29rcyIsImxpc3RlbiIsInRva2VuRG9jdW1lbnQiLCJfb2JqZWN0IiwiYWRkRGljZVByZXNldCIsImZvbnRTY2FsZSIsImVudGl0eUNyZWF0ZVNlbGVjdFRhZyIsImVudGl0eVNvcnRlZExpc3QiLCJzaG93RXhwZXJpbWVudGFsIiwiZW50aXR5T3B0aW9uIiwiY2FwaXRhbGl6ZSIsImVtcHR5Iiwic2Vjb25kIiwicGxheWVyTGlzdCIsImluc2VydEFmdGVyIiwiZ21jcmVhdGVtZXNzYWdlYXMiLCJtZWxlZVRhcmdldCIsImdtdHJhZGVpdGVtdG8iLCJDb0M3U3lzdGVtU29ja2V0IiwiY2FsbFNvY2tldCIsInJlcXVlc3RLZWVwZXJBY3Rpb24iLCJyZXF1ZXN0VXNlckFjdGlvbiIsInVzZXJJZCIsImVycm9ySWZNaXNzaW5nIiwiaW5jbHVkZVNlbGYiLCJfb25MZWZ0Q2xpY2siLCJzeXN0ZW1UYWIiLCJiZWZvcmUiLCJjYXJkY2xhc3MiLCJzb2NrZXRsaWIiLCJyZWdpc3RlclN5c3RlbSIsImluaXRFQ0MiLCJjb21tYW5kcyIsInJlcyIsInRvTG9jYWxpemUiLCJsb2NhbGl6ZWQiLCJlZmZlY3RJbmRleCIsImRpcmVjdG9yeSIsIkl0ZW1EaXJlY3RvcnkiLCJpdGVtRWxlbWVudCIsIl90YWJsZVNldHRpbmdzQ2hhbmdlZCIsImFjdGl2YXRlR2xvYmFsTGlzdGVuZXIiLCJ0YWJsZUNob2ljZSIsImJvdXRPZk1hZG5lc3NfU3VtbWFyeSIsImJvdXRPZk1hZG5lc3NfUmVhbFRpbWUiLCJjaGFyYWN0ZXJTaGVldCJdLCJzb3VyY2VSb290IjoiIn0=